{"version":3,"sources":["../../icons/dist/BDA.js","../../icons/dist/AppLogoSimple.js","../../icons/dist/QRCode.js","../../icons/dist/Apple.js","../../icons/dist/index.js","../../client-common/dist/config.js","../../client-common/dist/canvasLib.js","../../client-common/dist/imageParser.js","../../client-common/dist/Webcam.js","../../client-common/dist/useCamera.js","../../client-common/dist/useComponentSize.js","../../client-common/dist/useFileInput.js","../../client-common/dist/useOnline.js","../../client-common/dist/ErrorBoundary.js","../../client-common/dist/useOSDetect.js","../../client-common/dist/appContext.js","../../client-common/dist/useSensors.js","../../client-common/dist/devSetup.js","../../client-common/dist/index.js","../../../packages/common/dist/index.js","../../components/navigation/dist/TopBar.js","../../components/navigation/dist/SideDrawer.js","../../components/navigation/dist/TopBarWrapper.js","../../components/navigation/dist/OfflineBar.js","../../components/navigation/dist/BottomBar.js","../../components/navigation/dist/index.js","../../components/tags/dist/TagChip.js","../../components/tags/dist/suggested.js","../../components/tags/dist/useTagOptions.js","../../components/tags/dist/TagControl.js","../../components/tags/dist/TagControl.style.js","../../components/tags/dist/TagEdit.js","../../components/tags/dist/TagView.js","../../components/tags/dist/XYTagChip.style.js","../../components/tags/dist/XYTagChip.js","../../components/tags/dist/XYTagSelect.js","../../components/tags/dist/XYTagSelect.style.js","../../components/tags/dist/XYTagChooser.js","../../components/tags/dist/XYTagChooser.style.js","../../components/tags/dist/useXYTags.js","../../components/tags/dist/index.js","../../client-mock/dist/LoadFakeData.js","../../client-mock/dist/withContext.js","../../components/feed/dist/MyFeed.js","../../components/feed/dist/FeedEnder.js","../../components/camera/dist/cameraHelpers.js","../../components/camera/dist/CameraTool.js","../../components/camera/dist/CameraTool.style.js","../../components/camera/dist/QRUtil.js","../../components/camera/dist/QRReader.js","../../components/camera/dist/QRDisplay.js","../../components/camera/dist/index.js","../../datastore/dist/index.js","../../components/client-auth/dist/useAuthCommon.js","../../components/client-auth/dist/AuthContainer.js","../../components/client-auth/dist/auth.style.js","../../components/client-auth/dist/SignIn.js","../../components/client-auth/dist/PasswordHelper.js","../../components/client-auth/dist/SignUp.js","../../components/client-auth/dist/ConfirmSignIn.js","../../components/client-auth/dist/CheckemailMsg.js","../../components/client-auth/dist/ConfirmSignUp.js","../../components/client-auth/dist/ForgotPassword.js","../../components/client-auth/dist/Loading.js","../../components/client-auth/dist/RequireNewPassword.js","../../components/client-auth/dist/VerifyContact.js","../../client-mock/dist/index.js","../../components/client-auth/dist/auth.fixture.js","../../components/client-auth/dist/useAuthentication.js","../../components/pwainstall/dist/InstallPrompt.js","../../components/pwainstall/dist/useShowAddToHome.js","connectors/withUploadConnect.js","connectors/withSeriesConnect.js","connectors/withHomeMap.js","connectors/withSearchConnect.js","connectors/withProfileConnect.js","connectors/withFeedConnect.js","connectors/withOfflineData.js","../../components/feed/dist/index.js","../../components/profile/dist/index.js","connectors/Error.connect.js","../../components/home/dist/Home.js","../../components/home/dist/index.js","connectors/App.connect.js","serviceWorker.js","index.js","../../datastore/dist/redux/reducers/map.js","../../datastore/dist/redux/reducers/home.js","../../datastore/dist/redux/reducers/uploader.js","../../datastore/dist/redux/reducers/flags.js","../../datastore/dist/redux/reducers/offline.js","../../datastore/dist/redux/reducers/index.js","../../datastore/dist/redux/queueMiddleware.js","../../datastore/dist/redux/storeConfig.js","../../datastore/dist/redux/withReduxProvider.js","../../datastore/dist/graphql/queries/feedQueries.js","../../datastore/dist/graphql/queries/offlineQueries.js","../../datastore/dist/graphql/queries/s3Queries.js","../../datastore/dist/graphql/queries/searchQueries.js","../../datastore/dist/graphql/queries/seriesQueries.js","../../datastore/dist/graphql/queries/userQueries.js","../../datastore/dist/graphql/queries/index.js","../../components/search/dist/SearchContextItem.js","../../components/search/dist/SearchContextResults.js","../../components/search/dist/SearchEnder.js","../../components/search/dist/SearchResults.js","../../components/search/dist/SearchPlaceholder.js","../../components/search/dist/Search.js","../../components/slideshow/dist/Slideshow.js","../../components/slideshow/dist/Slideshow.style.js","../../components/swipeshow/dist/SwipeShow.js","../../components/swipeshow/dist/SwipeShow.style.js","../../components/profile/dist/MeCard.js","../../components/profile/dist/MyProfile.js","../../../packages/common/dist/graphql/fragments.js","../../icons/dist/AppLogo.js","../../components/search/dist/SearchInput.js","../../components/feed/dist/FeedItem.js","../../components/search/dist/index.js","../../../packages/mock/dist/random.js","../../datastore/dist/s3Upload.js","../../datastore/dist/graphql/mutations/createSeries.js","../../datastore/dist/graphql/mutations/updateSeries.js","../../datastore/dist/graphql/mutations/createPhoto.js","../../datastore/dist/graphql/mutations/updatePhoto.js","../../datastore/dist/graphql/mutations/deletePhoto.js","../../datastore/dist/graphql/mutations/deleteSeries.js","../../datastore/dist/graphql/mutations/watch.js","../../datastore/dist/graphql/mutations/unwatch.js","../../client-mock/dist/utils.js","../../../packages/common/dist/accesscontrol/permissions.js","../../../packages/common/dist/dates.js","../../../packages/common/dist/util.js","../../themes/dist/jss/mapbox.css.js","../../themes/dist/jss/typeface-roboto.css.js","../../datastore/dist/graphql/useGraphQL.js","../../components/ui/dist/FindOnMapButton.js","../../components/ui/dist/AboutApp.js","../../components/ui/dist/AppSettings.js","../../components/ui/dist/AddFab.js","../../components/ui/dist/ContextMenu.js","../../components/ui/dist/LibraryFilePicker.js","../../components/ui/dist/ShortLongText.js","../../components/ui/dist/useNewImageMenu.js","../../components/ui/dist/UploadControl.js","../../components/ui/dist/LoadingContainer.js","../../components/ui/dist/DateControl.js","../../components/ui/dist/DateView.js","../../components/ui/dist/ErrorScreen.js","../../components/ui/dist/index.js","../../components/maps/dist/BaseMap.style.js","../../themes/dist/index.js","../../datastore/dist/offline.js","../../../packages/mock/dist/index.js","../../datastore/dist/graphql/mutations/updateQueries.js","../../datastore/dist/redux/actions.js","../../themes/dist/themes.js","../../../packages/common/dist/Tags.js","../../../packages/common/dist/exif.js","../../../packages/common/dist/Series.js","../../../packages/common/dist/Photo.js","../../../packages/common/dist/share.js","../../../packages/common/dist/accesscontrol/AccessHelper.js","../../../packages/common/dist/graphql/queries.js","../../../packages/common/dist/graphql/mutations.js","../../../packages/common/dist/graphql/optimistic.js","../../../packages/common/dist/graphql/schema.graphql.js","../../themes/dist/jss/baseline.css.js","../../datastore/dist/getPhotoUrls.js","../../components/photos/dist/BrokenImg.js","../../components/photos/dist/LoadingImg.js","../../components/photos/dist/RawImage.js","../../components/photos/dist/Photo.js","../../components/photos/dist/Photo.style.js","../../components/photos/dist/PhotoGrid.js","../../components/photos/dist/PhotoGrid.style.js","../../components/photos/dist/PhotoFadeSlider.js","../../components/photos/dist/PhotoReviewTool.js","../../components/photos/dist/PhotoReviewTool.style.js","../../components/photos/dist/PhotoZoom.js","../../components/photos/dist/PhotoViewTool.style.js","../../components/photos/dist/PhotoViewTool.js","../../components/photos/dist/NewPhotoViewTool.js","../../components/photos/dist/index.js","../../client-mock/dist/CosmosBlackBackground.js","../../client-mock/dist/MaterialUIWrap.js","../../../packages/mock/dist/fakedata.js","../../components/modals/dist/DeleteDialog.js","../../components/modals/dist/CancelConfirm.js","../../components/modals/dist/FeatureDisabled.js","../../components/modals/dist/BigText.js","../../components/modals/dist/BigTextEdit.js","../../components/modals/dist/index.js","../../components/slideshow/dist/index.js","../../components/swipeshow/dist/index.js","../../components/photoseries/dist/UserListItem.js","../../components/photoseries/dist/contexts.js","../../components/photoseries/dist/views/SeriesInfo.js","../../components/photoseries/dist/views/SeriesInfo.style.js","../../components/photoseries/dist/SeriesView.style.js","../../components/photoseries/dist/views/SeriesView.js","../../components/photoseries/dist/views/SeriesEditInner.js","../../components/photoseries/dist/views/SeriesEditInner.style.js","../../components/photoseries/dist/views/SeriesEdit.js","../../components/photoseries/dist/views/SeriesEdit.style.js","../../components/photoseries/dist/views/PhotoInfoInner.js","../../components/photoseries/dist/views/NewPhotoInfo.js","../../components/photoseries/dist/views/NewPhotoInfo.style.js","../../components/photoseries/dist/views/NewPhoto.js","../../components/photoseries/dist/SeriesNotFound.js","../../components/photoseries/dist/PhotoSeries.js","../../components/photoseries/dist/SeriesList.js","../../components/photoseries/dist/SeriesList.style.js","../../components/photoseries/dist/SeriesListItem.js","../../components/photoseries/dist/ViewListDialog.js","../../components/photoseries/dist/views/PhotoInfo.js","../../components/photoseries/dist/index.js","../../components/maps/dist/mapStyles/index.js","../../components/maps/dist/markers/MyLocation.js","../../components/maps/dist/controls/StyleButtons.js","../../components/maps/dist/controls/MyLocationButton.js","../../components/maps/dist/BaseMap.js","../../components/maps/dist/lib/useClusteredData.js","../../components/maps/dist/HomeMap.style.js","../../components/maps/dist/ClusterSelected.js","../../components/maps/dist/markers/Single.js","../../components/maps/dist/markers/Cluster.js","../../components/maps/dist/HomeMap.js","../../components/maps/dist/BaseStaticMap.js","../../components/maps/dist/markers/Dot.js","../../components/maps/dist/MapDot.js","../../components/maps/dist/OfflineMap.style.js","../../components/maps/dist/OfflineMap.js","../../components/maps/dist/MapDirPicker.js","../../components/maps/dist/index.js"],"names":["createElement","Fragment","d","fillRule","x","y","width","height","REACT_APP_BASEURL","mandatoryEnv","REACT_APP_MAPBOX_TOKEN","REACT_APP_VERSION","REACT_APP_CONTACT_EMAIL","REACT_APP_GRAPHQL","REACT_APP_AWS_REGION","REACT_APP_COGNITO_USER_POOL_ID","REACT_APP_COGNITO_CLIENT_ID","Object","keys","forEach","keyname","error","concat","mapConfig","mapBoxToken","endpoints","graphql","share","maxTagLength","tagColors","version","contact","appName","versionText","ACCESS","OPEN","label","description","theme","primary","green","secondary","PRIVATE","red","PUBLIC","blue","home","Offline","seriesImgsToCache","highestOfflineTileZoom","maxMapTileArea","AppStateTypes","FEED","MAP","SEARCH","PROFILE","SERIES","SETTINGS","QRCAPTURE","NEW_SERIES_CAMERA","NEW_SERIES_LIBRARY","OFFLINE_DOWNLOAD","SEARCH_TABS","KEYWORD","TAG","LOCATION","USER","PROJECT","MapModeTypes","FREE","federated","analytics","token","aws","Auth","region","userPoolId","userPoolWebClientId","mandatorySignIn","cookieStorage","domain","expires","secure","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","key","getOwnPropertyDescriptors","defineProperties","defineProperty","ROTATION_MODES","1","rot","p","2","3","4","5","6","7","8","blob","exifObj","newRatio","Promise","resolve","img","Image","imageUrl","window","URL","webkitURL","createObjectURL","onload","debug","newExifObj","imageHeight","naturalHeight","imageWidth","naturalWidth","canvasEl","document","ctx","getContext","_getRotation","rotObj","exif","tags","Orientation","_unused","tr","sz","reverse","orientation","ExifImageWidth","ExifImageHeight","imageSize","outVal","translate","rotate","Math","PI","rotatedExifObj","cropSize","ratio","newWidth","newHeight","round","transform","drawImage","e","toBlob","newBlob","file","type","src","name","size","resultObj","ext","async","_context","prev","next","awrap","sent","getExtFromFile","info","abrupt","stop","fileBlob","Webcam","webcamElement","canvasElement","this","location","protocol","hostname","warn","navigator","mediaDevices","getUserMedia","value","srcObject","getVideoTracks","previewSize","newPreviewSize","_this","_context2","innerWidth","innerHeight","capabilities","redEyeReduction","max","min","step","fillLightMode","previewRatio","reject","undefined","audio","video","facingMode","ideal","then","mediaStream","onloadedmetadata","play","onplaying","mediaStreamTrack","ImageCapture","getPhotoCapabilities","catch","err","Error","videoWidth","videoHeight","context","_this$_drawImage","_drawImage","data","getImageData","imageCapture","takePhoto","_this2","_ref","quality","onCapture","_useState","_useState2","cameraError","setCameraError","_useState3","_useState4","sensorSize","setSensorSize","_useState5","_useState6","cameraOnline","setCameraOnline","camRef","current","getElementById","setup","newSensorSize","destroy","captureImage","imageParser","dumpCanvasToBlob","captureRawData","capturedData","takeImageData","getSize","el","minSize","defaultSize","offsetWidth","offsetHeight","ref","resizeActiveRef","resizeActive","setResizeActive","setComponentSize","handleResize","newSize","handleResizeDebounced","debounce","ResizeObserver","resizeObserver","observe","disconnect","addEventListener","removeEventListener","onChange","preferCamera","initialClick","anyFile","inputRef","clickRef","element","style","display","accept","capture","forceClick","click","handleChange","evt","files","fileClickEl","state","setState","onLine","newDate","Date","now","isOnline","offlineSince","_React$Component","ErrorBoundary","props","call","hasError","_this$state","FallbackUI","fallback","children","Component","propTypes","any","isIos","Boolean","test","userAgent","vendor","opera","device","ios","phone","a","substr","isPhone","cameraAccess","AppContext","createContext","finalValue","online","Provider","shape","user","signedIn","bool","isRequired","getPhotoUrls","func","metaConfig","tagConfigArr","array","onAvatarClick","globalActions","isrequired","accuracy","altitude","altitudeAccuracy","heading","latitude","longitude","speed","timestamp","mountedRef","watchIdRef","onEvent","event","coords","geolocation","getCurrentPosition","watchPosition","clearWatch","useDeviceOrientation","absolute","alpha","beta","gamma","deviceOrientation","setDeviceOrientation","isMounted","handleDeviceOrientation","setLevel","logger","config","_typeof","obj","Symbol","iterator","constructor","prototype","exports","get","_Tags","getSeriesTags","_exif","getExifPromise","_Series","_Photo","_share","createShareUrl","decodeShareUrl","_AccessHelper","permissions","util","dates","accessControl","graphqlAPI","_accesscontrol","_interopRequireDefault","_permissions","datesLib","_interopRequireWildcard","utilLib","_getRequireWildcardCache","WeakMap","cache","__esModule","has","newObj","hasPropertyDescriptor","hasOwnProperty","desc","set","queries","mutations","fragments","optimistic","schema","useStyles","makeStyles","appBar","background","toolbar","alignItems","padding","spacing","backgroundColor","palette","main","color","contrastText","borderBottom","searchIcon","opacity","marginRight","transparent","text","noCamIcon","logo","transparentLogo","transparentLogoIcon","flexGrow","qrButton","qrButtonTransparent","className","isTransparent","hideLogo","actions","classes","AppBar","elevation","position","Toolbar","disableGutters","IconButton","onClick","setDrawerOpen","onQRClickWrapped","string","isRequred","drawerInner","flexDirection","disableListItem","avatar","border","margin","gravatarImg","spacer","fullList","open","onClose","onOpen","_useContext","currentUser","SwipeableDrawer","role","onKeyDown","username","List","ListItem","root","Avatar","alt","gravatar","loginButton","ListItemText","Divider","button","onQRButtonClick","onDisabledClick","ListItemIcon","addToHomeScreen","onOfflineMenuClick","onSettingsClick","onAboutClick","signOut","forceSignIn","_extends","assign","DIALOGS","topBarProps","dialogOpen","setDialogOpen","drawerOpen","handleQRClick","title","message","Typography","variant","component","textAlign","sinceStr","setSinceStr","timerRef","calcSinceStr","newText","formatDateAgo","clearTimer","clearInterval","setInterval","loggedText","offlineText","STATES","borderTop","container","jet","papayawhip","paper","paddingBottom","list","marginBottom","subheader","grow","addFab","bottom","left","transformOrigin","zIndex","Container","maxWidth","Button","edge","setHomeState","onCameraClick","onLibraryClick","typography","caption","marginTop","deleteIcon","edit","tag","onDelete","useTheme","deleteRef","stopBadness","stopPropagation","deleteHelper","Chip","getContrastText","onTouchStart","onMouseDown","onClickCapture","suggestedContainer","suggestedLink","loadPulse","animation","suggestedObj","onSelectChange","loading","tagLabels","slice","groupLabel","map","idg","_ref2","suggestedGroup","tagLabel","lid","__isNew__","action","suggestedChip","getValuePromiseArr","rawTagValues","setTagValues","loadingArr","setLoadingArr","pr","idx","idxx","tagReduce","reduce","acc","group","finalGroup","count","g","tlKeys","sort","tLabelA","tLabelB","toLowerCase","tlk","weight","allAlph","t","b","Set","some","tagContainer","formControl","singleValue","fontSize","valueContainer","flexWrap","flex","overflow","hint","tagType","isClearable","tagsRef","_useTagOptions","currTags","selected","typeId","id","options","remaining","opVal","find","s","suggested","groupName","groupSuggest","tla","tlb","tagArr","actionEvent","curr","option","removedValue","_ref3","_ref4","newTagArr","Array","isArray","_ref5","_ref6","MultiValue","_ref7","removeProps","innerProps","fieldTitle","allowAdditions","getOptionValue","getLabelValue","isFocused","components","deleteRemoves","placeholder","isMulti","isSearchable","dlgContent","grey","dlgTitle","closeButton","alignSelf","onOk","onCancel","setValue","Dialog","scroll","fullScreen","DialogTitle","disableTypography","DialogContent","field","DialogActions","clickHelper","canEdit","tagValues","fullWidth","tagChips","chipBucket","content","tagColor","top","vFlip","userSelect","cursor","innerContainDrag","warning","dragging","innercontainer","hOffset","xyTagChip","onTagDragOver","onTagDragStop","onTagDelete","isReversed","relCoords","isDragging","setIsDragging","_useState4$","setOffset","tagRef","tagWidth","getBoundingClientRect","newOffset","newVFlip","disabled","bounds","right","onDrag","onStop","editing","clickable","reversedDelete","tagVal","blurInputOnSelect","header","listItem","dlgBody","paddingLeft","paddingRight","onNewTag","promptText","xyTags","allowXY","paperScrollPaper","photo","newTagDialog","setNewTagDialog","tagObj","tagClass","relXYTags","getRelXYTags","multiplier","addTag","createNewXYTagObj","updateTagLocation","oldTag","parseInt","onAddTagTrigger","rect","clientEvent","clientX","clientY","XYTagChooserWrapper","LoadFakeData","delay","mockData","setData","dataRef","dirName","split","dirPath","finalPath","host","result","setTimeout","loaded","mockProps","finalData","finalRender","cloneElement","node","number","ContextObj","listContainer","vList","feedContainer","MyFeed","events","listRef","rowRenderer","index","isScrolling","isVisible","parent","row","_id","wEnd","icon","thickness","almostAtEnd","ROWHEIGHT","scrollTop","fetchMore","rowCount","rowHeight","arrayOf","onImageClick","onProfileClick","onMapClick","fetchNewest","fontStyle","FeedEnder","CROP_MODES","cameraErrorText","disabledFab","cameraFab","maxHeight","slider","cameraIcon","cancelFab","cancelIcon","swipeDrawer","libraryFab","cropFab","myLocationFab","myLocationIcon","captured","reference","cropSnack","cropSnackPaper","cropSnackContent","portraitRef","landscapeRef","onShutter","defaultRefPhotoId","photos","setSlider","cropMode","setCropMode","imgRatio","setImgRatio","_useState7","_useState8","setPreviewSize","_useState9","_useState10","setCropSnack","snackTimer","refImgRef","rotClass","_useState11","_useState12","refPhotoId","setRefPhotoId","_useState13","_useState14","incrementCropMode","newCropMode","_useCamera","clearTimeout","recalcRefImg","refPhoto","cropModeUse","findIndex","cm","newState","refImgRatio","newRefImgRatio","imgScale","realImgHeight","recalcRefState","CssBaseline","defaultValue","imgRef","onLoad","sizePriority","autoPlay","playsInline","muted","Fab","buttonFab","cropIcon","libraryIcon","anchor","paperAnchorLeft","tabIndex","swipeDrawerContainer","multiSelect","columns","onTileClick","Snackbar","disableWindowBlurListener","SnackbarContent","qrIcon","backupText","manualImg","inner","tipPaper","docContainer","cameraContainer","paddingTop","cameraContainerError","snackErr","snackSuccess","snackMsg","verticalAlign","onMenuBack","intervalRef","setErr","code","setCode","readBlob","scannedCode","foundIdx","newData","decodedUrl","t0","indexOf","JSON","parse","decodeURI","t1","menuButton","toolbarTitle","Paper","anchorOrigin","vertical","horizontal","autoHideDuration","qrPaper","qrCode","minHeight","series","photoId","qrCodeEl","setQRCodeEl","_createShareUrl","url","ogShare","canShare","access","toString","svgStr","note","dangerouslySetInnerHTML","__html","Link","href","s3Upload","default","APOLLOSTATES","useGraphQL","createPhoto","createSeries","deletePhoto","deleteSeries","unwatch","updatePhoto","updateSeries","watch","updateQueries","offline","redux","withReduxProvider","containerRef","handleKeyPress","found","getElementsByClassName","spin","forgotPassword","switch","switchButton","borderRadius","phoneNumInner","phoneNumDropdown","minWidth","warnText","noSignin","handleSignup","handleForgotPassword","handleInputChange","handleBeAnonymous","handleSignIn","TextField","autoFocus","textField","autoComplete","chipContainer","chip","ok","bad","pword","hasUpper","match","hasLower","hasNum","hasSpecial","enoughChars","signUpFields","signUpFieldLabels","signUpFieldPlaceholders","handleBack","countryDialCodes","defaultDialCode","selectVal","setSelectVal","setPword","pwordType","handleDialCodeChange","f","FormControl","InputLabel","htmlFor","shrink","required","Select","inputProps","dialCode","handleConfirm","checkEmailMsgIco","checkEmailMsgTxt","checkEmailMsg","onResend","handleResend","handleSubmit","handleSendCode","setSent","change","requiredAttributes","placeholders","attribute","RADIO","onBack","hasEmail","hasPhone","handleSkip","handleVerify","radioVal","setRadioVal","Tabs","indicatorColor","val","textColor","centered","Tab","defaultProps","MaterialUIWrap","Wrapper","login","authState","google_client_id","alert","configure","defaultAuthState","authData","signUpConfig","hiddenDefaults","defaultCountryCode","displayOrder","_useState2$","setAuth","handleAuthStateChange","authScreen","onStateChange","hideDefault","isGod","signInUserSession","idToken","payload","getCurrentToken","currSession","currentSession","accessToken","_SignInOrig","SignIn","newProps","changeState","signIn","_SignUpOrig","SignUp","hide","includes","checkCustomSignUpFields","sortFields","getDefaultDialCode","signUp","_ConfirmSignInOrig","ConfirmSignIn","_this3","confirm","_ConfirmSignUpOrig","ConfirmSignUp","_this4","resend","_RequireNewPasswordOr","RequireNewPassword","challengeParam","part","charAt","toUpperCase","join","_LoadingOrig","Loading","_ForgotPasswordOrig","ForgotPassword","_this5","send","submit","messageWrapper","boxShadow","textWrapper","buttons","onInstall","paragraph","showInstall","dismissInstall","deferredPrompt","setPrompt","handleBeforePrompt","preventDefault","installPrompt","prompt","userChoice","choiceResult","outcome","standalone","compose","connect","uploader","activeUpload","uploading","uploadOnline","dispatch","updateUploadProgress","newProgress","datastore","setUploaderOnline","bOnline","Wrapped","useContext","useEffect","log","newS3Creds","useMemo","NewS3Credentials","onDone","progress","withGetNewS3Credentials","activeSeries","initialPhoto","onAfterSeriesDelete","queueUpload","uploadObj","doneCreatingSeries","doneCreatingPhoto","onFindOnMap","withGetSelectedQuery","withMutation","WrappedSeries","updateSeriesMutation","updatePhotoMutation","deleteSeriesMutation","deletePhotoMutation","createSeriesMutation","createPhotoMutation","watchSeriesMutation","unWatchSeriesMutation","inputMethod","NEW_PHOTO_MODES","CAMERA","FILEPICKER","modeName","SERIES_MODES","SERIES_VIEW","NEWSERIES","takenOn","ReactGA","category","seriesTags","sTags","newTags","owned","createdUser","watching","currentUserId","currentUserRole","onNewPhoto","newPhoto","newPhotoData","imgStore","setItem","uploadToken","preAuth","seriesId","retry","onChangePhoto","photoDelta","onDeletePhoto","seriesDelta","onNewSeries","newSeries","onWatch","onUnWatch","AllSeriesConnect","withAllSeries","PollQueryConnect","withPollQuery","mapDispatchToProps","onSeriesNavigate","onSeriesMapSelect","setActiveSeries","onSearchClick","search","tab","popMapHistory","pushMapHistory","clearMapHistory","initViewport","pop","initialActiveSeries","useState","seriesProps","setSeriesProps","queryVersion","setVersion","useRef","queryVersionRef","lastCheck","setLastCheck","allSeriesQUERY","pollSeriesQUERY","updateIncrement","readyForPolling","String","POLL_INTERVAL","seriesList","allSeries","seriesSummaries","TABS","defaultTab","defaultText","currentTab","setCurrentTab","searchText","setSearchText","contextChoice","setContextChoice","pageview","withContextQuery","withSearchQuery","withKeywordSearch","withTagSearch","withTagSeries","withGeoCode","withUserSearch","withUserSeries","ComposedSearch","jumpToMap","onResultClick","jumpToSeriesView","newContextChoice","newTab","withuserSeriesQuery","withMyWatchedSeriesQuery","seriesQ","watchedSeriesQ","mySeries","userSeries","seriesStatus","watchingSeries","arraySeries","jumpToSeries","jumpToSeriesMap","withFeedQueryThunk","gqlActions","loadingNewest","loadingMore","lastCheckRef","myFeed","feed","v","jumpToUser","WholeSeriesConnect","withGetSeriesForOffline","GeoQuery","withGeoSearch","lastMapViewport","completedDownload","viewport","setOfflineCompleted","bVal","setOfflineViewport","OFFLINE_STATES","LOCKED","NAVIGATING","toolState","setToolState","limiterRef","setBounds","seriesIds","setSeriesIds","activeSeriesId","setActiveSeriesId","seriesPhotos","setSeriesPhotos","tileTick","setTileTick","seriesTick","setSeriesTick","seriesPhotoTick","setSeriesPhotoTick","tileTickRef","onTileTick","onSeriesPhotoTick","onSeriesTick","useCallback","urls","num","theTick","theIds","ids","thePhotos","addCount","schedule","makeRequest","finalState","OFFLINE","geoSeriesQuery","wholeSeriesQuery","CANCELED","dropWaitingJobs","Bottleneck","maxConcurrent","tiles","zoomRange","zoom","xtileLeft","long2tile","xtileRight","ytileTop","lat2tile","ytileBottom","getTileURL","process","getTiles","tile","newTotal","onStartDownload","DOWNLOADING","onCancelComplete","onUnlock","method","xhr","XMLHttpRequest","status","response","statusText","onerror","replace","other","newMap","reduxState","ERROR_SEND_STATES","UNSENT","withReportBugMutation","ErrorScreen","sendState","outerRoot","offlineBar","activeWrapper","flexShrink","uploaderContainer","Upload","upload","showBottomBar","activeProps","touchMove","abs","scale","body","ActiveComponent","profile","onQRCapture","ThemeProvider","oneOf","values","homeConfig","initialize","withUploadConnect","UploadControl","withSeriesConnect","PhotoSeries","withHomeMap","HomeMap","withSearchConnect","Search","withProfileConnect","MyProfile","withFeedConnect","withOfflineData","OfflineMap","AppConnect","reduxProps","flags","newDomain","newParams","bbox","center","bufferPts","buffer","point","units","bboxFunc","mode","resetAllState","setFlag","setUseOffline","homeStateBack","reduxActions","useAuthentication","useLoggedOut","apolloClient","client","apolloDone","done","apolloState","currState","useShowAddToHome","install","retryRef","handleBackClick","history","pushState","decodedObj","queryVars","forceSignInWrapped","resetApp","clear","resetStore","stateStore","staticContext","allowNonXY","appContext","cognitoUser","query","getUser","skip","refetch","attributes","sub","themes","ErrorConnect","Home","isLocalhost","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","onUpdate","onSuccess","require","devSetup","ReactDOM","render","origin","fetch","contentType","headers","ready","unregister","reload","checkValidServiceWorker","mapInit","homeInit","initState","store","defaultFlags","iOSWarning","offlineInit","appReducer","MAP_HISTORY_CLEAR","newClearerHistory","MAP_HISTORY_POP","MAP_HISTORY_PUSH","HOME_STATE_BACK","newStateHistory","newCurrentState","HOME_CHANGE_ACTIVE_SERIES","HOME_CHANGE_STATE","params","skipSave","replaceState","newHistory","UPLOADER_QUEUE","UPLOADER_SET_ONLINE","UPLOADER_SET_UPLOADING","UPLOADER_COMPLETE","newStore","newActive","UPLOADER_UPDATE_PROGRESS","SETFLAG","flagName","flagVal","OFFLINE_VIEWPORT_SAVE","OFFLINE_SET_STATUS","getState","_getUploadState","getUploadState","newAction","kickoff","_unused2","persistConfig","storage","persistedReducer","preloadedState","queueMiddleware","persistor","BaseComponent","_storeConfig","storeConfig","feedLimit","getMyFeed","variables","start","updateQuery","fetchMoreResult","end","limit","getWholeSeries","ownProps","updatedUser","ph","paths","base","getNewS3Credentials","s3Credentials","tagSearch","contextResults","ceil","userSearch","createdOn","searchStr","geocode","_ref8","geocoder","_ref9","relevance","placeName","_ref10","_ref11","seriesWithTag","_ref12","tagSeries","nextToken","_ref13","searchResults","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","createdBy","keywordSearch","_ref20","_ref21","_ref22","_ref23","geoSeriesIdOnly","_ref24","seriesInGeoBounds","_ref25","_ref26","_ref27","isNewSeries","pollQuery","_ref7$ownProps","changedSeries","oldList","newSeriesSummaries","polledSeries","ds","oldSeries","oldId","seriesFromList","reportBug","mutate","_ref$ownProps","ERROR","reportError","SENDING","reportJSON","extra","_window$navigator","appVersion","languages","language","platform","errSubset","stack","errObj","env","stringify","update","SENT","chosenItem","dark","closeIcon","avatarImg","objectFit","TheIcon","ListItemAvatar","overflowX","overflowY","listSection","placeholderText","ul","cr","ctxItem","enderRef","handleScroll","offsetTop","_listRef$current","showCreatedOn","showLastPhoto","onScroll","innerRef","light","PlaceholderIcon","tabs","ListWrapper","SearchInput","flexContainer","TAGS","swipeAble","slideContainer","titleBar","mobileStepper","slide","dotActive","iconButton","active","last","labelBadge","tagChip","manualBack","manualForward","transition","_useStepper","activeStep","lastStep","handleForward","paused","pause","showXYTags","setShowXYTags","refImgWrap","_useComponentSize$siz","GridListTile","transitions","create","duration","showTags","Badge","badgeContent","GridListTileBar","titlePosition","formatDate","subtitle","actionIcon","direction","MobileStepper","steps","nextButton","backButton","isFullScreen","slides","interval","setActiveStep","setPaused","setLastStep","createTimer","oldStep","destroyTimer","photoWrapper","dateCaption","tagButton","slideshowButton","dots","onImageSelect","activePhotoId","setActivePhotoId","setShowTags","singular","activePhotoIndex","activePhoto","axis","onChangeIndex","enableMouseEvents","imgContainer","filterContainer","filterChip","seriesListItemWrap","noneFound","SORT","sortVal","setSort","sortAsc","setSortAsc","sortSetter","newSort","tabFeed","latest","aa","bb","firstname","asc","useFilterStyles","arrow","userKeys","userFragment","photoKeys","photoFragment","seriesKeys","seriesFragment","feedSeriesSummaryKeys","feedSeriesSummaryFragment","seriesSummaryKeys","seriesSummaryFragment","userSummaryKeys","userSummaryFragment","photoSummaryKeys","photoSummaryFragment","_graphqlTag","_templateObject7","_taggedTemplateLiteral","_templateObject6","_templateObject5","_templateObject4","_templateObject3","_templateObject2","_templateObject","strings","raw","freeze","RawSVG","useSearchBarStyles","common","white","marginLeft","breakpoints","up","inputRoot","inputInput","pointerEvents","justifyContent","debounceSearchText","blur","onBlur","input","findOnMapButtonContainer","titleContainer","textShadow","seriesName","textOverflow","whiteSpace","EVENT_VERBS","FeedItem","updatedOn","randomObjectElement","randomArrayEl","filledArray","randomMap","randomChance","randomFloat","randomInt","_random","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","TypeError","_nonIterableSpread","chance","inTimes","low","high","fillval","completeActiveUpload","failRetry","formData","fields","fieldkey","append","getItem","onUploadProgress","progressEvent","total","floor","post","removeItem","t2","t3","interceptors","request","use","MUTATION","SERIES_KEYS","newSeriesKeys","PHOTO_KEYS","newPhotoKeys","createOptimisticResponse","createSeriesResponse","_ownProps$currentUser","gravatarProfile","meUserSummary","optimisticResponse","mutationStackId","__typename","pick","refetchQueries","updateThunk","cb","KEYS","updateSeriesKeys","updateSeriesResponse","createPhotoResponse","newPhotoInput","cloneDeep","updatePhotoKeys","updatePhotoResponse","newUpdatePhoto","newT","watchSeries","unWatchSeries","actionMaker","actionArr","useConsole","acStr","_len","args","_key","_len2","_key2","fakeGlobalActions","admin","nonuser","series_public","series_open","timestampToHTML5Input","utctimestamp","_moment","format","HTML5InputToTimestamp","isoStr","convertJSDatetoTimestamp","parseDate","fixParseDate","_util","_loglevel","isNumeric","inTimestamp","isGMT","retVal","newInTimeStamp","jsDate","getTime","tzOffset","getTimezoneOffset","fromNow","utc","formatNum","precision","precstr","_numeral","clearSelection","selection","empty","getSelection","removeAllRanges","isObjectWithKeys","makeDomArray","domnode","capitalizeFirstLetter","numericArrayCompare","arr1","caseInsensitiveSort","decodeUnbufferedBase64","hash","missingPadding","newhash","Buffer","encodeUnbufferedBase64","str","urlizeb64","isObject","arrToObj","keyDat","_","$","attr","Number","getRandomArbitraryInt","random","wait","immediate","timeout","innerArgs","callNow","chunkArray","base64toJSON","json2base64","_zlib","isNaN","parseFloat","isFinite","o","gzip","b64String","buff","gunzip","chunkSize","font","W","fallbacks","M","touchAction","float","outline","boxSizing","speak","borderColor","backgroundImage","O","backgroundRepeat","fill","enableBackground","visibility","textDecoration","fontWeight","borderWidth","borderStyle","willChange","borderBottomColor","borderLeft","borderRight","borderTopColor","borderRightColor","borderLeftColor","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","fontFamily","fontDisplay","INITIALIZING","AUTHENTICATING","LOADING","APPLY_MUTATIONS","DONE","setClient","setDone","setCurrState","authLink","httpLink","_context3","fragmentMatcher","introspectionQueryResultData","newHeaders","authorization","uri","attempts","Infinity","retryIf","_operation","statusCode","link","tokenName","addTypename","connectToDevTools","createApolloClient","newClient","jwtToken","placeAvatar","placeIcon","_onClick","dialogContent","iconContainer","stop1","stopColor","rose","stop2","redorange","buttonIcon","scrollText","PaperProps","focusable","viewBox","x2","y2","offset","nuclear","deleteOpen","setDeleteOpen","mapWrapper","onConfirm","confirmed","pulseCol","fab","animationIterationCount","animationTimingFunction","directionUp","actionsClosed","modalContainer","subFabContainer","subFab","subFabIcon","setOpen","down","setDown","downRef","elRef","realChildren","onDown","currentTarget","block","rootContainer","disableFocusRipple","disableTouchRipple","disableRipple","Modal","Zoom","in","unmountOnExit","anchorEl","menuItems","Menu","divider","Icon","MenuItem","primaryTypographyProps","onLibraryAdd","cameraPicker","_useFileInput","cameraWords","PlaceIcon","formLabel","cameraClick","libraryClick","menuEl","setMenuEl","setSeries","onDownThunk","onUpThunk","onBlock","menu","CameraPopup","onCamera","onLibrary","onMouseUp","onTouchEnd","bar","msgContainer","msgTextBright","msgTextDark","messageInner","finalProgress","LinearProgress","useWrapperStyles","displayName","bgSwoosh","logoSpin","logoContainer","noAppInfo","rootEdit","textBody","actionButtons","_onChange","buttonGroup","helperText","dlgOpen","setNote","stackEl","buttonText","DialogContentText","multiline","rows","rowsMax","mapContainer","globalStyle","storeName","createInstance","getPendingMutations","setPendingPromise","pushMutationPromise","mutation","popMutationPromise","pm","proxyUpdateForId","proxy","resp","unWatch","updateHandler","__optimistic","restoreRequests","_loop","pendingMutation","_fakedata","fakePastDate","randomLocation","_graphqlAPI$queries","_graphqlAPI$fragments","getWholeSeriesUpdate","qVal","readQuery","writeQuery","getUserUpdate","userDelta","getWholeSeriesPhotoUpdate","remove","updateSeriesSummaries","origArr","newArr","seriesIndex","newAllSeriesEntry","updateFeedList","fItem","fitem","newFeedSeriesSummary","newPhotoSummary","relation","allSeriesUpdate","allSeriesPhotoUpdate","newS","photoIndex","featured","photoCount","photoSummary","userSeriesUpdate","feedUpdate","watchUpdate","userId","newWatchers","newWatching","seriesFragId","seriesFrag","seriesWatchers","readFragment","fragment","userFragId","userFrag","userFragResult","watchers","wid","_seriesSummaryFragmentUpdate","seriesSummaryFragId","seriesSummaryFragResults","fragmentName","writeFragment","Actions","RESET_ALL_STATE","viewportSave","useNextVariants","overrides","MuiDialog","paperFullWidth","colors","indigo","cblue","homeTheme","accessObj","contrastTextPrimary","contrastTextSecondary","_defineProperty","configurable","writable","_default","Tags","instance","Constructor","_classCallCheck","getTagType","tt","xyTagTypeIds","getXYTagTypes","ttID","NonXYTagLabels","getNonXYTagTypes","findTagByLabel","getXYTags","_regeneratorRuntime","_exifParser","_common","_dates","asyncGeneratorStep","gen","_next","_throw","arg","fn","mark","_callee","imgData","exifDateTime","exifGPS","blobParser","parser","wrap","Blob","Response","arrayBuffer","DateTimeOriginal","GPSLatitude","GPSLongitude","self","_x","_v","Series","meta","getSeriesMeta","Photo","getPhotoMeta","shareUrl","encodedId","encodeURI","_defineProperties","descriptor","AccessHelper","userSub","permissionObj","attrs","ownAny","ownOrAny","perm","ac","can","otherPerm","granted","protoProps","staticProps","geoSeries","seriesSummaryFromList","initQuery","_fragments","_templateObject17","_templateObject16","_templateObject15","_templateObject14","_templateObject13","_templateObject12","_templateObject11","_templateObject10","_templateObject9","_templateObject8","_lodash","updatedBy","seriesCreatedBy","large","orig","thumb","medium","photoResponse","photoResponseSummary","overscrollBehavior","urlCreator","sp","circularProgress","CircularProgress","IMG_STATES","imgBroken","dataUrl","_onLoad","imgUrls","setImgUrls","altIndex","setAltIndex","imgState","setImgState","imgPropRef","dataAsUrl","setBroken","isBroken","isLoading","finalURL","onError","brokenImg","editXYTags","onXYTagChange","setNewSize","_useComponentSize","_useXYTags","handleNewSize","_imgRef$current","refWrapBounds","broken","imgStyle","rawImage","removeFab","notDeleteable","unSelectedTile","selectedTile","snackbarContent","snackbar","allowDelete","selectMode","setSelectMode","selectedItems","setSelectedItems","setUrls","deleteConfirm","setDeleteConfirm","handleCancelSelection","toggleListItem","arrId","t4","t5","t6","t7","t8","t9","GridList","cols","cellHeight","handlePhotoTap","handleAddToSelection","ContentProps","confirmation","sliderLabel","rail","track","debouncedOnChange","Slider","canvasWrapper","referenceTextContainer","refText","photoBlob","onRetry","newRefPhoto","setRefPhoto","initZoom","setTransform","trOld","setTrOld","scaledWidth","scaledHeight","disableImgEventHandlers","_refImgWrap$current$p","parentElement","containerWidth","containerHeight","minZoom","maxZoom","_initZoom","moving","pinchCenter","rangeSnap","handleEnd","ft","handleCancel","rawImg","onDoubleTap","onPinch","old","newScaledWidth","newScaledHeight","centerFraction","newX","newY","onPan","deltaX","deltaY","onPinchEnd","onPanEnd","onPinchCancel","onPanCancel","recognizers","pinch","enable","imgEl","seriesAccess","appBarEdit","menuTextPadded","pulseIcon","tabMenu","tipChip","dot","activeButton","MODES","SWIPING","ZOOMING","SHOW_INFO","EDIT_TAGS","onUpdatePhoto","canUpdatePhotoArr","activePhotoInd","setActivePhotoInd","tagDelta","setTagDelta","setMode","tagsClass","canUpdatePhoto","menuText","infoButton","SHOWINFO","containerStyle","photoidx","tagD","newDelta","CosmosBlackBackground","enableAll","boundBox","outerTheme","noTheme","iOS","boundBoxStyle","innerTheme","contextValue","fakeAppContext","querySelector","setAttribute","newChildren","_turf","_faker","_random2","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","EVENT_RELATIONS","date","past","latLngsAarr","transformTranslate","geometry","coordinates","FakeData","userPool","attribs","userSummary","basicAttribs","basicObj","fakeWidth","fakeHeight","photoPlaceholderArr","numPhotos","whichHighlight","hasPaths","objType","project","reach","nite","lorem","paragraphs","seriesSummary","basic","widthHeight","templateObj","base64","rawData","getImagePaths","strict","getPath","w","h","_getTag","pool","shuffle","_values","idt","hasCoords","tagIncludesCoords","sampleUser","freeBothTags","structureTags","treeTags","emotionTags","seasonTags","_x2","firstName","lastName","avatarSrc","_freeBothTagsValues","treeTagValues","structureTagValues","emotionTagValues","seasonTagValues","disableBackdropClick","disableEscapeKeyDown","IconComp","textArea","SeriesContext","tagListItem","_useContext2","activeDialog","setActiveDialog","tagInst","existing","metaKeys","FormLabel","dense","tagKey","idtk","subheading","useStylesAccess","mapWrap","AddFab","gridList","placeholderInner","progressWrapper","onSlideshowStart","onEditSeries","onDeletePhotos","onCameraAdd","onDeleteSeries","contextEl","setContextEl","showQR","setShowQR","listTypeTab","setListTypeTab","canUser","delete","contribute","accessRadio","mapFormLabel","mapInnerWrap","chips","tagWarning","delta","nameError","staticMap","FormControlLabel","control","Switch","checked","newNote","setDelta","submitted","setSubmitted","useTitleStyles","dlgTitleContainer","catTagTitle","hideUser","activeDialogContext","tagMemo","nonXYTagTypes","numTags","getNonXYTags","setSeriesDelta","setPhotoDelta","validName","photoTitle","PhotoInfoInner","newAttr","onSave","PHOTOREVIEW","PHOTOINFOEDIT","geoRef","setNewSeries","setNewPhoto","photoRefId","setPhotoRefId","_changeMode","geo","changeMode","newModeName","_data$exifObj","_geoRef$current","beginnerObj","_newPhoto","sensors","captureObj","photoObj","refId","_data$exifObj2","_geoRef$current2","oldHistory","oldMode","onCreate","SERIES_EDIT","NEWPHOTO","REVIEW","PHOTO_VIEW","PHOTO_VIEW_NEW","SLIDESHOW","VIEW_ONLY_MODES","VALID_STARTMODES","PHOTO_REVIEW","inputMethodINIT","seriesContextState","setSeriesContextState","pid","newPid","newInputMethod","canUpdate","to","lastMode","photoIdArr","finalContext","fab2","tileClick","_useNewImageMenu","seriesItem","rootSm","accessLabel","textSm","titleText","createdUserText","dateContainer","dateLabel","dateText","imgContainerSm","isSmall","useMediaQuery","onSelect","disablePadding","dirty","toolTip","SatelliteOutlined","ActiveIcon","TerrainOutlined","Terrain","TopoMap","svgDot","svgAccuracyDot","projection","accHeight","pixelsPerMeter","accWidth","cx","cy","r","stroke","fillOpacity","strokeWidth","speedDialFab","speedDialAction","speedDialIcon","speedDialLabel","controlPadding","currStyle","mapStyles","setCurrStyle","noEventSetOpen","SpeedDial","ariaLabel","speedDial","SpeedDialAction","tooltipOpen","tooltipPlacement","tooltipTitle","myPosition","showMe","lockToBounds","lockPan","initStyle","incomingOnViewportChange","onViewportChange","incomingOnTransitionStart","onTransitionStart","incomingOnTransitionEnd","onTransitionEnd","onMapDataEvent","stylechooser","passthroughProps","mapContainerRef","mapBoxRef","innerTransitionsRef","defaultViewVals","setViewport","isTransitioning","setIsTransitioning","setProjection","geoMarker","captureDrag","_projection","_onViewportChange","viewportChange","newViewport","getMap","_bounds","minlng","minlat","maxlng","maxlat","_fitBounds","fitBounds","mapStyle","onData","dragPan","mapboxApiAccessToken","c","handleChild","hideNavControls","showZoom","touchZoom","scrollZoom","showCompass","touchRotate","dragRotate","transitionDuration","transitionInterpolator","transitionEasing","lockRotation","lockZoom","bearing","pitch","child","filterBounds","currentZoom","sizeScale","clusteredData","setClusteredData","single","cluster","filteredData","setFilteredData","updateDataDebounce","updatedData","_args","filterDataDebounce","filtered","_args2","filterData","filteredClusteredData","tree","screenCoords","properties","zoomLevels","geoJSON","load","z","radius","sqrt","pow","neighbors","minX","minY","maxX","maxY","neighbor","newGeoJSON","n","reducedPhotoCount","points","newZ","listItemText","compoundButton","seriesCount","onZoomTo","onViewList","rootActive","avatarActive","badge","badgeActive","directionIndicator","nameActive","svgArc","strokeOpacity","topBar","loadingWrapper","zoomOutFab","selectedPopup","defaultView","mapViewObj","setMapViewObj","mapViewRef","homeMapContainerRef","setCurrentZoom","showViewList","setShowViewList","setTransitions","selectedItem","setSelectedItem","updateSelectedItem","item","saveObj","transitionInterruption","maxPitch","minPitch","saveMap","_onZoomTo","pts","paddedPoint","lngBuff","latBuff","buffBounds","onMarkerClick","markersRendered","offsetLeft","selectedItemRender","viewZoom","getBounds","_map$getBounds","_map$getBounds$_sw","_sw","minLng","lng","minLat","lat","_map$getBounds$_ne","_ne","maxLng","maxLat","oldMinLng","oldMinLat","oldMaxLng","oldMaxLat","onNativeClick","mapRef","recalcProjection","baseStaticMap","deckelements","zoomBounds","InnerBounds","editable","Map","mapProps","Dot","rectContents","black","areaLabel","rectContentsDownloading","rectIcon","tooBig","tickText","svgRect","svgCutout","svgBorder","svgBorderNavigating","svgBorderLocked","svgBorderTooBig","svgBorderDownloading","downloadingProgress","downloadingProgressCircle","snackError","mapWrapperRef","viewState","area","setArea","classWithState","setGeoState","rectSide","newArea","metersPerPixel","dx","degreesPerPixel","dy","newBounds","snack","onSnackClose","snackTimeout","unlocked","doubleClickZoom","rectStyle","boxCorners","totalProgress","xmlns","sliderWrapper","sliderRoot","initLat","initLong","initDir","setCoords","setRotation","_ref2$viewport"],"mappings":"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","file":"static/js/main.8345ce7d.chunk.js","sourcesContent":["import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \" M 16 8 L 16 8.938 L 14 8.938 L 14 10.938 L 16 10.938 L 16 12 L 16 14 L 16 14 L 16 15 L 14 15 L 14 17 L 16 17 L 16 17 L 16 18 L 12.969 18 L 12.969 14 L 15 14 L 15 12 L 12.969 12 L 12.969 7.969 L 12.969 7.969 L 12.969 7.969 C 12.969 7.417 12.521 6.969 11.969 6.969 C 11.417 6.969 10.969 7.417 10.969 7.969 L 10.969 12 L 9 12 L 9 14 L 10.969 14 L 10.969 18 L 8 18 L 8 17 L 10 17 L 10 15 L 8 15 L 8 15 L 8 14 L 8 14 L 8 12 L 8 10.938 L 8 10.938 L 10 10.938 L 10 8.938 L 8 8.938 L 8 8 C 8 7.448 7.552 7 7 7 C 6.448 7 6 7.448 6 8 L 6 8 L 6 8.938 L 5 8.938 L 5 10.938 L 6 10.938 L 6 12 L 4 12 L 4 8 C 4 7.448 3.552 7 3 7 C 2.448 7 2 7.448 2 8 L 2 10.4 L 2 12 L 2 14 L 2 16 L 2 17.6 C 2 18.925 3.075 20 4.4 20 L 19.6 20 C 20.925 20 22 18.925 22 17.6 L 22 16 L 22 14 L 22 12 L 22 10.4 L 22 10.4 L 22 8 C 22 7.448 21.552 7 21 7 C 20.448 7 20 7.448 20 8 L 20 12 L 18 12 L 18 10.938 L 18 10.938 L 19 10.938 L 19 8.938 L 18 8.938 L 18 8 C 18 7.448 17.552 7 17 7 C 16.448 7 16 7.448 16 8 Z  M 6 15 L 6 14 L 6 14 L 6 14 L 6 14 L 4 14 L 4 15.69 C 4 16.86 4.871 17.828 6 17.979 L 6 17 L 5 17 L 5 15 L 6 15 L 6 15 L 6 15 L 6 15 L 6 15 Z  M 18 15 L 18 14 L 18 14 L 18 14 L 20 14 L 20 15.69 C 20 16.86 19.129 17.828 18 17.979 L 18 17 L 19 17 L 19 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 Z \",\n  fillRule: \"evenodd\"\n})), 'BDA');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M16.432,6.104c-2.671,-1.06 -6.842,4.123 -6.572,5.826c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873Z\"\n}), React.createElement(\"path\", {\n  d: \"M9.159,5.228c-2.254,1.782 0.149,7.986 1.76,8.604c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066Z\"\n}), React.createElement(\"path\", {\n  d: \"M4.727,11.059c0.417,2.844 6.991,3.864 8.331,2.779c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94Z\"\n}), React.createElement(\"path\", {\n  d: \"M7.561,17.813c2.671,1.061 6.842,-4.122 6.572,-5.826c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873Z\"\n}), React.createElement(\"path\", {\n  d: \"M14.828,18.736c2.254,-1.783 -0.149,-7.987 -1.76,-8.605c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067Z\"\n}), React.createElement(\"path\", {\n  d: \"M19.26,12.904c-0.417,-2.843 -6.991,-3.864 -8.331,-2.778c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94Z\"\n})), 'AppLogoSimple');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M22,2l0,20l-20,0l0,-20l20,0Zm-2,2l-16,0l0,16l16,0l0,-16Z\"\n}), React.createElement(\"rect\", {\n  x: \"5\",\n  y: \"5\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"15\",\n  y: \"5\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"5\",\n  y: \"15\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"10\",\n  width: \"1\",\n  height: \"5\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"10\",\n  width: \"6\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"12\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"13\",\n  y: \"7\",\n  width: \"1\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"14\",\n  y: \"9\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"8\",\n  y: \"10\",\n  width: \"1\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"7\",\n  y: \"11\",\n  width: \"1\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"9\",\n  y: \"11\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"6\",\n  width: \"2\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"12\",\n  y: \"7\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"15\",\n  y: \"14\",\n  width: \"2\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"14\",\n  y: \"14\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"17\",\n  y: \"15\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"16\",\n  width: \"1\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"12\",\n  y: \"15\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"18\",\n  width: \"1\",\n  height: \"1\"\n})), 'QRCode');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M21.229,18.388c-0.346,0.799 -0.756,1.535 -1.23,2.211c-0.647,0.922 -1.176,1.56 -1.584,1.914c-0.632,0.582 -1.31,0.88 -2.036,0.897c-0.521,0 -1.149,-0.148 -1.88,-0.449c-0.734,-0.299 -1.408,-0.448 -2.025,-0.448c-0.646,0 -1.34,0.149 -2.081,0.448c-0.743,0.301 -1.342,0.457 -1.799,0.473c-0.696,0.03 -1.39,-0.277 -2.082,-0.921c-0.442,-0.385 -0.995,-1.046 -1.657,-1.982c-0.71,-0.999 -1.294,-2.158 -1.752,-3.48c-0.49,-1.427 -0.735,-2.809 -0.735,-4.147c0,-1.533 0.331,-2.855 0.994,-3.963c0.521,-0.89 1.215,-1.591 2.083,-2.107c0.868,-0.515 1.806,-0.778 2.816,-0.794c0.553,0 1.278,0.17 2.179,0.506c0.898,0.338 1.474,0.509 1.727,0.509c0.189,0 0.83,-0.2 1.916,-0.599c1.027,-0.369 1.894,-0.522 2.604,-0.462c1.924,0.155 3.37,0.914 4.331,2.28c-1.721,1.043 -2.572,2.503 -2.555,4.377c0.016,1.459 0.545,2.674 1.585,3.638c0.472,0.447 0.999,0.793 1.584,1.039c-0.127,0.368 -0.261,0.721 -0.403,1.06Zm-4.413,-17.366c0,1.144 -0.418,2.212 -1.251,3.2c-1.005,1.176 -2.221,1.855 -3.54,1.748c-0.017,-0.138 -0.026,-0.282 -0.026,-0.434c0,-1.098 0.478,-2.273 1.327,-3.234c0.423,-0.486 0.962,-0.891 1.616,-1.214c0.652,-0.318 1.269,-0.493 1.85,-0.523c0.016,0.152 0.024,0.305 0.024,0.457l0,0Z\"\n})), 'Apple');","export { default as BDA } from './BDA';\nexport { default as AppLogo } from './AppLogo';\nexport { default as AppLogoSimple } from './AppLogoSimple';\nexport { default as QRCode } from './QRCode';\nexport { default as Apple } from './Apple';","import React from 'react';\nimport { green, blue, red, yellow, purple, teal } from '@material-ui/core/colors';\nimport log from 'loglevel';\nvar baseurl = process.env.REACT_APP_BASEURL;\nvar basename = process.env.REACT_APP_BASENAME;\nvar domain = process.env.REACT_APP_DOMAIN;\n\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n  domain = 'localhost';\n  basename = '';\n}\n\nvar mandatoryEnv = {\n  REACT_APP_MAPBOX_TOKEN: process.env.REACT_APP_MAPBOX_TOKEN,\n  REACT_APP_VERSION: process.env.REACT_APP_VERSION,\n  REACT_APP_CONTACT_EMAIL: process.env.REACT_APP_CONTACT_EMAIL,\n  REACT_APP_GRAPHQL: process.env.REACT_APP_GRAPHQL,\n  REACT_APP_AWS_REGION: process.env.REACT_APP_AWS_REGION,\n  REACT_APP_COGNITO_USER_POOL_ID: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n  REACT_APP_COGNITO_CLIENT_ID: process.env.REACT_APP_COGNITO_CLIENT_ID\n};\nObject.keys(mandatoryEnv).forEach(function (keyname) {\n  if (!mandatoryEnv[keyname]) {\n    log.error(\"You must set environment variable: \".concat(keyname));\n  }\n});\nexport var mapConfig = {\n  mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN\n};\nexport var endpoints = {\n  graphql: \"\".concat(process.env.REACT_APP_GRAPHQL, \"/api\"),\n  share: \"\".concat(process.env.REACT_APP_GRAPHQL, \"/share\")\n};\nexport var maxTagLength = 100;\nexport var tagColors = ['#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B', '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'];\nexport var version = process.env.REACT_APP_VERSION || 'NO_VERSION';\nexport var contact = process.env.REACT_APP_CONTACT_EMAIL || 'NO_CONTACT';\nexport var appName = 'MorPhoto';\nexport var versionText = React.createElement(\"span\", null, \"Version:  \", version, \" \", React.createElement(\"em\", null, \"BETA\"));\nexport var ACCESS = {\n  OPEN: {\n    label: 'Open',\n    description: 'Anyone can see and contribute photos to this series.',\n    theme: {\n      primary: green[900],\n      secondary: green[700]\n    }\n  },\n  PRIVATE: {\n    label: 'Private',\n    description: 'Can only be seen by you.',\n    theme: {\n      primary: red[700],\n      secondary: red[500]\n    }\n  },\n  PUBLIC: {\n    label: 'Public',\n    description: 'Anyone can see this series. Only the owner can add photos.',\n    theme: {\n      primary: blue[700],\n      secondary: blue[500]\n    }\n  }\n};\nexport var home = {\n  Offline: {\n    seriesImgsToCache: ['thumb', 'large'],\n    highestOfflineTileZoom: 12,\n    maxMapTileArea: 25000\n  },\n  AppStateTypes: {\n    FEED: 'feed',\n    MAP: 'map',\n    SEARCH: 'search',\n    PROFILE: 'profile',\n    SERIES: 'series',\n    SETTINGS: 'settings',\n    QRCAPTURE: 'QRCapture',\n    NEW_SERIES_CAMERA: 'new_series_camera',\n    NEW_SERIES_LIBRARY: 'new_series_library',\n    OFFLINE_DOWNLOAD: 'offline_download'\n  },\n  SEARCH_TABS: {\n    KEYWORD: 'keyword',\n    TAG: 'tag',\n    LOCATION: 'location',\n    USER: 'user',\n    PROJECT: 'project'\n  },\n  MapModeTypes: {\n    FREE: 'free',\n    USER: 'user',\n    TAG: 'tag'\n  }\n};\nexport var federated = {};\nexport var analytics = {\n  token: process.env.REACT_APP_GA_TOKEN || 'UA-XXXXXXXX-XX'\n};\nexport var aws = {\n  Auth: {\n    region: process.env.REACT_APP_AWS_REGION,\n    userPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n    userPoolWebClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\n    mandatorySignIn: true,\n    cookieStorage: {\n      domain: \"\".concat(domain),\n      expires: 120,\n      secure: false\n    }\n  }\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport log from 'loglevel';\nvar ROTATION_MODES = {\n  1: {\n    rot: 0,\n    p: false\n  },\n  2: {\n    rot: 0,\n    p: false\n  },\n  3: {\n    rot: 180,\n    p: false\n  },\n  4: {\n    rot: 180,\n    p: false\n  },\n  5: {\n    rot: 90,\n    p: true\n  },\n  6: {\n    rot: 90,\n    p: true\n  },\n  7: {\n    rot: 270,\n    p: true\n  },\n  8: {\n    rot: 270,\n    p: true\n  }\n};\nexport var getRotation = function getRotation(exifObj, width, height) {\n  var rotObj = ROTATION_MODES[1];\n\n  try {\n    if (exifObj.exif.tags.Orientation) {\n      rotObj = ROTATION_MODES[exifObj.exif.tags.Orientation];\n      log.debug('getRotation', rotObj);\n    }\n  } catch (_unused) {}\n\n  var tr = [0, 0];\n  var sz = [width, height];\n\n  switch (rotObj.rot) {\n    case 90:\n      tr = [sz[1], 0];\n      sz = sz.reverse();\n      break;\n\n    case 180:\n      tr = [sz[0], sz[1]];\n      break;\n\n    case 270:\n      tr = [0, sz[0]];\n      sz = sz.reverse();\n      break;\n\n    default:\n      break;\n  }\n\n  var newExifObj = exifObj && exifObj.exif ? _objectSpread({}, exifObj, {\n    exif: {\n      tags: _objectSpread({}, exifObj.exif.tags, {\n        orientation: 1,\n        ExifImageWidth: sz[0],\n        ExifImageHeight: sz[1]\n      }),\n      imageSize: {\n        height: sz[1],\n        width: sz[0]\n      }\n    }\n  }) : null;\n  var outVal = {\n    translate: tr,\n    rotate: rotObj.rot * Math.PI / 180,\n    width: sz[0],\n    height: sz[1],\n    exifObj: newExifObj\n  };\n  log.debug('getRotation returns', outVal);\n  return outVal;\n};\nexport var getAutoCrop = function getAutoCrop(width, height, ratio) {\n  var newWidth = width;\n  var newHeight = height;\n\n  if (ratio) {\n    if (width * ratio > height) {\n      newWidth = Math.round(height / ratio);\n    } else {\n      newHeight = Math.round(width * ratio);\n    }\n  }\n\n  log.debug('getAutoCrop', {\n    width: newWidth,\n    height: newHeight\n  });\n  return {\n    width: newWidth,\n    height: newHeight\n  };\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { getExifPromise } from '@morphoto/common';\nimport { getAutoCrop, getRotation } from './canvasLib';\nimport log from 'loglevel';\nexport var imgLoadPromise = function imgLoadPromise(blob, exifObj, newRatio) {\n  return new Promise(function (resolve) {\n    var img = new Image();\n    var urlCreator = window.URL || window.webkitURL;\n    var imageUrl = urlCreator.createObjectURL(blob);\n\n    img.onload = function () {\n      log.debug('imgLoadPromise:: Image Loaded', {\n        exifObj: exifObj,\n        newRatio: newRatio\n      });\n      var imageHeight = img.naturalHeight;\n      var imageWidth = img.naturalWidth;\n      var newExifObj;\n\n      if (newRatio) {\n        var canvasEl = document.createElement('canvas');\n        var ctx = canvasEl.getContext('2d');\n\n        try {\n          log.debug('imgLoadPromise:: Start drawing', {\n            imageWidth: imageWidth,\n            imageHeight: imageHeight\n          });\n\n          var _getRotation = getRotation(exifObj, imageWidth, imageHeight),\n              translate = _getRotation.translate,\n              rotate = _getRotation.rotate,\n              width = _getRotation.width,\n              height = _getRotation.height,\n              rotatedExifObj = _getRotation.exifObj;\n\n          var cropSize = getAutoCrop(width, height, newRatio);\n          canvasEl.width = cropSize.width;\n          canvasEl.height = cropSize.height;\n          ctx.transform(1, 0, 0, 1, translate[0], translate[1]);\n          ctx.rotate(rotate);\n          ctx.drawImage(img, 0, 0);\n          rotatedExifObj.exif.tags.ExifImageWidth = cropSize.width;\n          rotatedExifObj.exif.tags.ExifImageHeight = cropSize.height;\n          rotatedExifObj.exif.imageSize = cropSize;\n          newExifObj = rotatedExifObj;\n          log.debug('imgLoadPromise:: done drawing', {\n            rotate: rotate,\n            translate: translate,\n            width: width,\n            height: height,\n            newRatio: newRatio\n          });\n        } catch (e) {\n          log.error(e);\n        }\n\n        return canvasEl.toBlob(function (newBlob) {\n          if (!newBlob) {\n            resolve({\n              file: blob,\n              imageHeight: imageHeight,\n              imageWidth: imageWidth,\n              type: blob.type\n            });\n          } else {\n            resolve({\n              file: newBlob,\n              imageHeight: canvasEl.height,\n              imageWidth: canvasEl.width,\n              type: blob.type,\n              exifObj: newExifObj\n            });\n          }\n        }, blob.type, 100);\n      } else {\n        return resolve({\n          file: blob,\n          imageHeight: img.naturalHeight,\n          imageWidth: img.naturalWidth,\n          type: blob.type\n        });\n      }\n    };\n\n    img.src = imageUrl;\n  });\n};\nexport default (function _callee(blob, ratio) {\n  var type, name, size, exifObj, resultObj, ext;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          type = blob.type, name = blob.name, size = blob.size;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(getExifPromise(blob));\n\n        case 3:\n          exifObj = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(imgLoadPromise(blob, exifObj, ratio));\n\n        case 6:\n          resultObj = _context.sent;\n          ext = getExtFromFile(blob);\n          log.info('done imageParser', _objectSpread({\n            type: type,\n            ext: ext,\n            name: name || \"capture.\".concat(ext),\n            size: size,\n            exifObj: exifObj\n          }, resultObj));\n          return _context.abrupt(\"return\", _objectSpread({\n            type: type,\n            ext: ext,\n            name: name || \"capture.\".concat(ext),\n            size: size,\n            exifObj: exifObj\n          }, resultObj));\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n});\nexport var getExtFromFile = function getExtFromFile(fileBlob) {\n  switch (fileBlob.type) {\n    case 'image/jpeg':\n      return 'jpeg';\n\n    case 'image/jpg':\n      return 'jpeg';\n\n    case 'image/png':\n      return 'png';\n\n    default:\n      return 'jpg';\n  }\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport log from 'loglevel';\n\nvar Webcam =\n/*#__PURE__*/\nfunction () {\n  function Webcam(webcamElement, canvasElement) {\n    _classCallCheck(this, Webcam);\n\n    this.webcamElement = webcamElement;\n    this.canvasElement = canvasElement;\n\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      log.warn('getUserMedia() must be run from a secure origin: https or localhost.\\nChanging protocol to https.');\n    }\n\n    if (!navigator.mediaDevices && !navigator.getUserMedia) {\n      log.warn(\"Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia.\");\n    }\n  }\n\n  _createClass(Webcam, [{\n    key: \"destroy\",\n    value: function destroy() {\n      return _regeneratorRuntime.async(function destroy$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              try {\n                if (this.webcamElement.srcObject && this.webcamElement.srcObject.getVideoTracks) {\n                  this.webcamElement.srcObject.getVideoTracks()[0].stop();\n                  log.info('Releasing Camera');\n                }\n\n                this.webcamElement = null;\n                this.canvasElement = null;\n              } catch (e) {\n                log.error(e);\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(previewSize) {\n      var _this = this;\n\n      var newPreviewSize;\n      return _regeneratorRuntime.async(function setup$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              newPreviewSize = previewSize || [window.innerWidth, window.innerHeight];\n\n              if (!(this.webcamElement && this.webcamElement.srcObject && this.previewSize && this.previewSize[0] === newPreviewSize[0] && this.previewSize[1] === newPreviewSize[1])) {\n                _context2.next = 3;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              this.capabilities = {\n                redEyeReduction: 'never',\n                imageWidth: {\n                  max: newPreviewSize[0],\n                  min: 480,\n                  step: 0\n                },\n                imageHeight: {\n                  max: newPreviewSize[1],\n                  min: 480,\n                  step: 0\n                },\n                fillLightMode: []\n              };\n              this.previewRatio = newPreviewSize[1] / newPreviewSize[0];\n              this.previewSize = newPreviewSize;\n              return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                if (navigator.mediaDevices.getUserMedia !== undefined) {\n                  if (_this.webcamElement.srcObject) {\n                    _this.webcamElement.srcObject.getVideoTracks()[0].stop();\n\n                    _this.webcamElement.srcObject = null;\n                  }\n\n                  navigator.mediaDevices.getUserMedia({\n                    audio: false,\n                    video: {\n                      facingMode: 'environment',\n                      width: {\n                        ideal: Math.max(_this.previewSize[1], _this.previewSize[0])\n                      },\n                      height: {\n                        ideal: Math.min(_this.previewSize[1], _this.previewSize[0])\n                      }\n                    }\n                  }).then(function (mediaStream) {\n                    if (_this.webcamElement && 'srcObject' in _this.webcamElement) {\n                      _this.webcamElement.srcObject = mediaStream;\n                    } else {\n                      _this.webcamElement.src = window.URL.createObjectURL(mediaStream);\n                    }\n\n                    _this.webcamElement.onloadedmetadata = function (e) {\n                      if (_this.webcamElement) _this.webcamElement.play();\n                    };\n\n                    _this.webcamElement.onplaying = function (e) {\n                      try {\n                        var mediaStreamTrack = _this.webcamElement.srcObject.getVideoTracks()[0];\n\n                        var imageCapture = new ImageCapture(mediaStreamTrack);\n                        imageCapture.getPhotoCapabilities().then(function (capabilities) {\n                          _this.capabilities = capabilities;\n                          resolve();\n                        });\n                      } catch (_unused) {\n                        log.error('COULD NOT GET CAPABILITIES');\n                        resolve();\n                      }\n                    };\n                  }).catch(function (err) {\n                    return reject(err);\n                  });\n                } else {\n                  reject(new Error('Error accessing camera'));\n                }\n              }));\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"_drawImage\",\n    value: function _drawImage() {\n      var imageWidth = this.webcamElement.videoWidth;\n      var imageHeight = this.webcamElement.videoHeight;\n      var context = this.canvasElement.getContext('2d');\n      this.canvasElement.width = imageWidth;\n      this.canvasElement.height = imageHeight;\n      context.drawImage(this.webcamElement, 0, 0, imageWidth, imageHeight);\n      return {\n        imageHeight: imageHeight,\n        imageWidth: imageWidth\n      };\n    }\n  }, {\n    key: \"takeImageData\",\n    value: function takeImageData() {\n      var _this$_drawImage = this._drawImage(),\n          imageHeight = _this$_drawImage.imageHeight,\n          imageWidth = _this$_drawImage.imageWidth;\n\n      var data = {\n        data: null,\n        imageHeight: imageHeight,\n        imageWidth: imageWidth\n      };\n\n      try {\n        data.data = this.canvasElement.getContext('2d').getImageData(0, 0, imageWidth, imageHeight).data;\n      } catch (e) {}\n\n      return data;\n    }\n  }, {\n    key: \"imageCapture\",\n    value: function imageCapture(ratio) {\n      var mediaStreamTrack = this.webcamElement.srcObject.getVideoTracks()[0];\n      var imageCapture = new ImageCapture(mediaStreamTrack);\n      var imageWidth = this.capabilities.imageWidth.max;\n      var imageHeight = this.capabilities.imageHeight.max;\n      log.info('Taking picture', imageWidth, imageHeight);\n      return imageCapture.takePhoto({\n        imageWidth: imageWidth,\n        imageHeight: imageHeight\n      }).catch(function (error) {\n        return log.error('takePhoto() error:', error);\n      });\n    }\n  }, {\n    key: \"dumpCanvasToBlob\",\n    value: function dumpCanvasToBlob() {\n      var _this2 = this;\n\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        type: 'image/jpeg',\n        quality: 1\n      },\n          type = _ref.type,\n          quality = _ref.quality;\n\n      return new Promise(function (resolve) {\n        _this2.canvasElement.toBlob(resolve, type, quality);\n      });\n    }\n  }]);\n\n  return Webcam;\n}();\n\nexport default Webcam;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nimport imageParser from './imageParser';\nimport Webcam from './Webcam';\nimport log from 'loglevel';\n\nvar useCamera = function useCamera(onCapture, previewSize) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      cameraError = _useState2[0],\n      setCameraError = _useState2[1];\n\n  var _useState3 = useState(previewSize),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sensorSize = _useState4[0],\n      setSensorSize = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      cameraOnline = _useState6[0],\n      setCameraOnline = _useState6[1];\n\n  var camRef = useRef();\n  useEffect(function () {\n    if (!camRef.current) {\n      camRef.current = new Webcam(document.getElementById('webcam'), document.createElement('canvas'));\n    }\n\n    camRef.current.setup(previewSize).then(function (data) {\n      var newSensorSize = [camRef.current.capabilities.imageWidth.max, camRef.current.capabilities.imageHeight.max];\n\n      if (!sensorSize || sensorSize[0] !== newSensorSize[0] || sensorSize[1] !== newSensorSize[1]) {\n        setSensorSize([camRef.current.capabilities.imageWidth.max, camRef.current.capabilities.imageHeight.max]);\n      }\n\n      if (!cameraOnline) setCameraOnline(true);\n    }).catch(function (e) {\n      if (cameraOnline) setCameraOnline(false);\n      setCameraError(true);\n    });\n  }, [previewSize]);\n  useEffect(function () {\n    return function () {\n      if (camRef.current) {\n        camRef.current.destroy();\n        camRef.current = null;\n      }\n    };\n  }, []);\n\n  var captureImage = function captureImage(ratio) {\n    if (camRef.current && cameraOnline) {\n      try {\n        camRef.current.imageCapture(ratio).then(function (blob) {\n          return imageParser(blob, ratio);\n        }).then(onCapture).catch(log.error);\n      } catch (err) {\n        log.error(err);\n        log.info('Your hardware is lame and doesn\\'t support ImageCapture');\n        camRef.current.dumpCanvasToBlob({\n          type: 'image/jpeg',\n          quality: 1\n        }).then(function (blob) {\n          return imageParser(blob, ratio);\n        }).then(onCapture).catch(log.error);\n      }\n    }\n  };\n\n  var captureRawData = function captureRawData() {\n    if (camRef.current && cameraOnline) {\n      var capturedData = camRef.current.takeImageData();\n      onCapture(capturedData);\n    }\n  };\n\n  return {\n    cameraError: cameraError,\n    captureImage: captureImage,\n    cameraOnline: cameraOnline,\n    captureRawData: captureRawData,\n    sensorSize: sensorSize\n  };\n};\n\nexport default useCamera;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useState, useLayoutEffect, useRef } from 'react';\nimport { util } from '@morphoto/common';\n\nvar getSize = function getSize(el, minSize, defaultSize) {\n  if (!el) return defaultSize || minSize || {\n    width: 0,\n    height: 0,\n    naturalWidth: 0,\n    naturalHeight: 0\n  };\n\n  if (minSize) {\n    return {\n      width: Math.max(minSize.width, el.offsetWidth),\n      height: Math.max(minSize.height, el.offsetHeight),\n      naturalWidth: el.naturalWidth,\n      naturalHeight: el.naturalHeight\n    };\n  } else {\n    return {\n      width: el.offsetWidth,\n      height: el.offsetHeight,\n      naturalWidth: el.naturalWidth,\n      naturalHeight: el.naturalHeight\n    };\n  }\n};\n\nvar useComponentSize = function useComponentSize(ref, minSize, defaultSize) {\n  var resizeActiveRef = useRef();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      resizeActive = _useState2[0],\n      setResizeActive = _useState2[1];\n\n  resizeActiveRef.current = resizeActive;\n\n  var _useState3 = useState(getSize(ref ? ref.current : null, minSize, defaultSize)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      size = _useState4[0],\n      setComponentSize = _useState4[1];\n\n  var handleResize = function handleResize(e) {\n    if (!resizeActiveRef.current || !ref.current) return;\n    var newSize = getSize(ref.current, minSize, defaultSize);\n\n    if (newSize.height !== size.height || newSize.width !== size.width) {\n      setComponentSize(newSize);\n    }\n  };\n\n  var handleResizeDebounced = useCallback(util.debounce(handleResize, 500), []);\n  useLayoutEffect(function () {\n    if (!ref || !ref.current) return;\n    handleResize();\n\n    if (typeof ResizeObserver === 'function') {\n      var resizeObserver = new ResizeObserver(handleResizeDebounced);\n      resizeObserver.observe(ref.current);\n      return function () {\n        resizeObserver.disconnect(ref.current);\n        resizeObserver = null;\n      };\n    } else {\n      window.addEventListener('resize', handleResizeDebounced);\n      return function () {\n        window.removeEventListener('resize', handleResizeDebounced);\n      };\n    }\n  }, [ref]);\n  return {\n    size: size,\n    setResizeActive: setResizeActive\n  };\n};\n\nexport default useComponentSize;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect, useRef } from 'react';\nimport imageParser from './imageParser';\n\nvar useFileInput = function useFileInput() {\n  var onChange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n  var preferCamera = arguments.length > 1 ? arguments[1] : undefined;\n  var initialClick = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var anyFile = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var inputRef = useRef();\n  var clickRef = useRef();\n  var element = React.createElement(\"input\", {\n    style: {\n      display: 'none'\n    },\n    ref: inputRef,\n    type: \"file\",\n    accept: !anyFile ? 'image/*' : null,\n    capture: preferCamera\n  });\n\n  var forceClick = function forceClick() {\n    if (inputRef.current) inputRef.current.click();\n  };\n\n  useEffect(function () {\n    var handleChange = function handleChange(evt) {\n      if (evt.target.files) {\n        var _ref = _toConsumableArray(evt.target.files),\n            file = _ref[0];\n\n        if (file) {\n          imageParser(file).then(onChange);\n        }\n\n        inputRef.current.value = null;\n      }\n    };\n\n    if (inputRef.current) {\n      inputRef.current.addEventListener('change', handleChange);\n\n      if (!clickRef.current) {\n        if (initialClick) inputRef.current.click();\n        clickRef.current = true;\n      }\n    }\n\n    return function () {\n      if (inputRef.current) {\n        inputRef.current.removeEventListener('change', handleChange);\n      }\n    };\n  }, [inputRef.current]);\n  return {\n    fileClickEl: element,\n    forceClick: forceClick,\n    inputRef: inputRef\n  };\n};\n\nexport default useFileInput;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState, useMemo } from 'react';\nimport log from 'loglevel';\n\nvar useOnline = function useOnline() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var onChange = function onChange(e) {\n    if (window.navigator.onLine) {\n      log.info('ONLINE');\n      if (state !== null) setState(null);\n    } else {\n      log.info('OFFLINE');\n      var newDate = Date.now();\n      if (state !== newDate) setState(newDate);\n    }\n  };\n\n  useEffect(function () {\n    onChange();\n    window.addEventListener('online', onChange);\n    window.addEventListener('offline', onChange);\n    return function () {\n      window.removeEventListener('online', onChange);\n      window.removeEventListener('offline', onChange);\n    };\n  }, []);\n  var retVal = useMemo(function () {\n    return {\n      isOnline: state === null,\n      offlineSince: state\n    };\n  }, [state]);\n  return retVal;\n};\n\nexport default useOnline;","import _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport log from 'loglevel';\n\nvar ErrorBoundary =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary(props) {\n    var _this;\n\n    _classCallCheck(this, ErrorBoundary);\n\n    log.info('ErrorBoundary constructor');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ErrorBoundary).call(this, props));\n    _this.state = {\n      hasError: false\n    };\n    return _this;\n  }\n\n  _createClass(ErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, info) {\n      log.error('ErrorBoundary componentDidCatch', error);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          hasError = _this$state.hasError,\n          error = _this$state.error;\n      var FallbackUI = this.props.fallback;\n\n      if (hasError) {\n        log.error('ErrorBoundary hasError');\n        return React.createElement(FallbackUI, {\n          error: error\n        });\n      }\n\n      return this.props.children;\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      return {\n        hasError: true,\n        error: error\n      };\n    }\n  }]);\n\n  return ErrorBoundary;\n}(React.Component);\n\nErrorBoundary.propTypes = {\n  children: PropTypes.any,\n  fallback: PropTypes.any\n};\nexport default ErrorBoundary;","import { useEffect, useState } from 'react';\nexport var isIos = function isIos() {\n  return Boolean(/iphone|ipad|ipod/i.test(window.navigator.userAgent || navigator.vendor || window.opera || ''));\n};\nexport var isPhone = function isPhone() {\n  var a = window.navigator.userAgent || navigator.vendor || window.opera || '';\n  return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4));\n};\nexport var device = {\n  ios: Boolean(isIos()),\n  phone: Boolean(isPhone()),\n  cameraAccess: navigator.mediaDevices ? Boolean(navigator.mediaDevices.getUserMedia) : false\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { device } from './useOSDetect';\nimport useOnline from './useOnline';\nimport log from 'loglevel';\nexport var AppContext = React.createContext({});\nexport var AppContextProvider = function AppContextProvider(_ref) {\n  var children = _ref.children,\n      value = _ref.value;\n  var online = useOnline();\n\n  var finalValue = _objectSpread({\n    online: online\n  }, value, {\n    device: _objectSpread({}, device, {}, value.device)\n  });\n\n  return React.createElement(AppContext.Provider, {\n    value: finalValue\n  }, children);\n};\nAppContextProvider.propTypes = {\n  children: PropTypes.any,\n  value: PropTypes.shape({\n    user: PropTypes.object,\n    signedIn: PropTypes.bool.isRequired,\n    getPhotoUrls: PropTypes.func.isRequired,\n    device: PropTypes.object,\n    metaConfig: PropTypes.object,\n    tagConfigArr: PropTypes.array.isRequired,\n    onAvatarClick: PropTypes.func,\n    globalActions: PropTypes.object.isrequired\n  })\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nexport var useGeolocation = function useGeolocation() {\n  var _useState = useState({\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: Date.now()\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var mountedRef = useRef();\n  var watchIdRef = useRef();\n  mountedRef.current = true;\n\n  var onEvent = function onEvent(event) {\n    if (mountedRef.current) {\n      setState({\n        accuracy: event.coords.accuracy,\n        altitude: event.coords.altitude,\n        altitudeAccuracy: event.coords.altitudeAccuracy,\n        heading: event.coords.heading,\n        latitude: event.coords.latitude,\n        longitude: event.coords.longitude,\n        speed: event.coords.speed,\n        timestamp: event.timestamp\n      });\n    }\n  };\n\n  useEffect(function () {\n    navigator.geolocation.getCurrentPosition(onEvent);\n    watchIdRef.current = navigator.geolocation.watchPosition(onEvent);\n    return function () {\n      mountedRef.current = false;\n      navigator.geolocation.clearWatch(watchIdRef.current);\n    };\n  }, [navigator.geolocation]);\n  return state;\n};\nexport function useDeviceOrientation() {\n  var _useState3 = useState({\n    absolute: false,\n    alpha: null,\n    beta: null,\n    gamma: null\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      deviceOrientation = _useState4[0],\n      setDeviceOrientation = _useState4[1];\n\n  var isMounted = useRef(false);\n\n  function handleDeviceOrientation(event) {\n    if (isMounted.current) {\n      setDeviceOrientation({\n        absolute: event.absolute,\n        alpha: event.alpha,\n        beta: event.beta,\n        gamma: event.gamma\n      });\n    }\n  }\n\n  useEffect(function () {\n    isMounted.current = true;\n    window.addEventListener('deviceorientation', handleDeviceOrientation);\n    return function () {\n      isMounted.current = false;\n      window.removeEventListener('deviceorientation', handleDeviceOrientation);\n    };\n  }, []);\n  return deviceOrientation;\n}","import React from 'react';\nimport log from 'loglevel';\nexport default (function () {\n  if (process.env.NODE_ENV !== 'production') {\n    var whyDidYouRender = require('@welldone-software/why-did-you-render');\n\n    whyDidYouRender(React);\n    log.enableAll();\n\n    var downloadObjectAsJson = function downloadObjectAsJson(exportObj, exportName) {\n      var dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(exportObj, null, 2));\n      var downloadAnchorNode = document.createElement('a');\n      downloadAnchorNode.setAttribute('href', dataStr);\n      downloadAnchorNode.setAttribute('download', exportName + '.json');\n      document.body.appendChild(downloadAnchorNode);\n      downloadAnchorNode.click();\n      downloadAnchorNode.remove();\n    };\n\n    window.breakMe = function () {\n      throw new Error('bogus Error');\n    };\n\n    window.grabApolloCache = function () {\n      return downloadObjectAsJson(window.__APOLLO_CLIENT__.cache.data.data, \"__APOLLO_CLIENT__.cache\");\n    };\n  } else {\n    log.setLevel('warn');\n  }\n\n  window.logger = log;\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as configImp from './config';\nexport var config = _objectSpread({}, configImp);\nexport { default as useCamera } from './useCamera';\nexport { default as useComponentSize } from './useComponentSize';\nexport { default as useFileInput } from './useFileInput';\nexport { default as useOnline } from './useOnline';\nexport { default as useResponsive } from './useResponsive';\nexport { default as ErrorBoundary } from './ErrorBoundary';\nexport { playAudio } from './audio';\nexport { default as imageParser } from './imageParser';\nexport { getRotation, getAutoCrop } from './canvasLib';\nexport { AppContext, AppContextProvider } from './appContext';\nexport { useGeolocation, useDeviceOrientation } from './useSensors';\nexport { device, isIos, isPhone } from './useOSDetect';\nexport { default as devSetup } from './devSetup';","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Tags\", {\n  enumerable: true,\n  get: function get() {\n    return _Tags[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"getSeriesTags\", {\n  enumerable: true,\n  get: function get() {\n    return _Tags.getSeriesTags;\n  }\n});\nObject.defineProperty(exports, \"getExifPromise\", {\n  enumerable: true,\n  get: function get() {\n    return _exif.getExifPromise;\n  }\n});\nObject.defineProperty(exports, \"Series\", {\n  enumerable: true,\n  get: function get() {\n    return _Series[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Photo\", {\n  enumerable: true,\n  get: function get() {\n    return _Photo[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"createShareUrl\", {\n  enumerable: true,\n  get: function get() {\n    return _share.createShareUrl;\n  }\n});\nObject.defineProperty(exports, \"decodeShareUrl\", {\n  enumerable: true,\n  get: function get() {\n    return _share.decodeShareUrl;\n  }\n});\nObject.defineProperty(exports, \"AccessHelper\", {\n  enumerable: true,\n  get: function get() {\n    return _AccessHelper[\"default\"];\n  }\n});\nexports.permissions = exports.util = exports.dates = exports.accessControl = exports.graphqlAPI = void 0;\n\nvar _accesscontrol = _interopRequireDefault(require(\"accesscontrol\"));\n\nvar _permissions = _interopRequireDefault(require(\"./accesscontrol/permissions\"));\n\nvar datesLib = _interopRequireWildcard(require(\"./dates\"));\n\nvar utilLib = _interopRequireWildcard(require(\"./util\"));\n\nvar _Tags = _interopRequireWildcard(require(\"./Tags\"));\n\nvar _exif = require(\"./exif\");\n\nvar _Series = _interopRequireDefault(require(\"./Series\"));\n\nvar _Photo = _interopRequireDefault(require(\"./Photo\"));\n\nvar _share = require(\"./share\");\n\nvar _AccessHelper = _interopRequireDefault(require(\"./accesscontrol/AccessHelper\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar graphqlAPI = {\n  queries: require('./graphql/queries'),\n  mutations: require('./graphql/mutations'),\n  fragments: require('./graphql/fragments'),\n  optimistic: require('./graphql/optimistic'),\n  schema: require('./graphql/schema.graphql')[\"default\"]\n};\nexports.graphqlAPI = graphqlAPI;\nvar accessControl = new _accesscontrol[\"default\"](_permissions[\"default\"]);\nexports.accessControl = accessControl;\nvar dates = datesLib;\nexports.dates = dates;\nvar util = utilLib;\nexports.util = util;\nvar permissions = _permissions[\"default\"];\nexports.permissions = permissions;","import React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { QRCode as QRCodeIcon, AppLogoSimple } from '@morphoto/icons';\nimport { AppContext } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    appBar: {\n      background: 'transparent'\n    },\n    toolbar: {\n      display: 'flex',\n      alignItems: 'center',\n      width: '100%',\n      padding: theme.spacing(0, 1),\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      borderBottom: \"2px solid \".concat(theme.palette.primary.main),\n      background: \"linear-gradient(90deg, \".concat(theme.palette.primary.main, \" 0%, \").concat(theme.palette.secondary.main, \" 100%)\")\n    },\n    searchIcon: {\n      opacity: 0.3,\n      marginRight: theme.spacing(1)\n    },\n    transparent: {\n      backgroundColor: 'transparent',\n      background: 'none',\n      color: theme.palette.text.primary,\n      borderBottom: \"2px solid transparent\"\n    },\n    noCamIcon: {\n      color: 'rgba(0, 0, 0, 0.26)'\n    },\n    logo: {\n      padding: theme.spacing(0, 0),\n      height: 40,\n      width: 40\n    },\n    transparentLogo: {\n      background: \"linear-gradient(90deg, \".concat(theme.palette.primary.main, \" 0%, \").concat(theme.palette.secondary.main, \" 100%)\"),\n      padding: theme.spacing(0.5, 0.5)\n    },\n    transparentLogoIcon: {\n      color: 'white',\n      height: 35,\n      width: 35\n    },\n    children: {\n      flexGrow: 1,\n      padding: theme.spacing(0, 1)\n    },\n    qrButton: {\n      padding: theme.spacing(0, 0)\n    },\n    qrButtonTransparent: {\n      background: 'white',\n      padding: theme.spacing(0.5, 0.5)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TopBar = function TopBar(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      isTransparent = _ref.isTransparent,\n      hideLogo = _ref.hideLogo,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device;\n\n  return React.createElement(AppBar, {\n    elevation: 0,\n    position: isTransparent ? 'absolute' : 'static',\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    className: classNames(classes.toolbar, className, isTransparent ? classes.transparent : null),\n    disableGutters: true\n  }, !hideLogo && React.createElement(IconButton, {\n    className: isTransparent ? classes.transparentLogo : classes.logo,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return actions.setDrawerOpen(true);\n    }\n  }, React.createElement(AppLogoSimple, {\n    className: isTransparent ? classes.transparentLogoIcon : classes.logo\n  })), React.createElement(\"div\", {\n    className: classes.children\n  }, children), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(!device.cameraAccess ? classes.noCamIcon : null, isTransparent ? classes.qrButtonTransparent : classes.qrButton),\n    \"aria-label\": \"Menu\",\n    onClick: actions.onQRClickWrapped\n  }, React.createElement(QRCodeIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nTopBar.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any,\n  isTransparent: PropTypes.bool,\n  hideLogo: PropTypes.bool,\n  actions: PropTypes.shape({\n    onQRClickWrapped: PropTypes.func,\n    setDrawerOpen: PropTypes.func.isRequred\n  })\n};\nexport default TopBar;","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport InfoIcon from '@material-ui/icons/Info';\nimport MobileScreenShare from '@material-ui/icons/MobileScreenShare';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { QRCode as QRCodeIcon } from '@morphoto/icons';\nimport { AppContext } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    drawerInner: {\n      width: 250,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    disableListItem: {\n      color: 'rgba(0, 0, 0, 0.26)'\n    },\n    avatar: {\n      height: theme.spacing(7),\n      width: theme.spacing(7),\n      border: \"3px solid \".concat(theme.palette.primary.main),\n      margin: theme.spacing(0, 1)\n    },\n    gravatarImg: {\n      width: '100%'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    fullList: {\n      width: 'auto'\n    }\n  };\n});\n\nvar SideDrawer = function SideDrawer(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      onOpen = _ref.onOpen,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      currentUser = _useContext.currentUser,\n      signedIn = _useContext.signedIn,\n      globalActions = _useContext.globalActions;\n\n  return React.createElement(SwipeableDrawer, {\n    open: open,\n    onClose: onClose,\n    onOpen: onOpen\n  }, React.createElement(\"div\", {\n    className: classes.drawerInner,\n    role: \"presentation\",\n    onClick: onClose,\n    onKeyDown: onClose\n  }, currentUser && currentUser.username && React.createElement(List, null, React.createElement(ListItem, {\n    className: classes.root,\n    onClick: function onClick() {},\n    disableGutters: true\n  }, React.createElement(Avatar, {\n    className: classes.avatar\n  }, signedIn && currentUser ? React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: currentUser.gravatar\n  }) : React.createElement(AccountCircleIcon, {\n    color: \"inherit\",\n    className: classes.loginButton\n  }))), React.createElement(ListItem, {\n    className: classes.root,\n    onClick: function onClick() {}\n  }, React.createElement(ListItemText, {\n    primary: currentUser.username\n  }))), React.createElement(Divider, null), React.createElement(List, null, React.createElement(ListItem, {\n    className: device.cameraAccess ? classes.disableListItem : null,\n    button: true,\n    onClick: !device.cameraAccess ? device.ios ? actions.onDisabledClick : function () {} : globalActions.onQRButtonClick\n  }, React.createElement(ListItemIcon, null, React.createElement(QRCodeIcon, null)), React.createElement(ListItemText, {\n    primary: 'Scan QR Code'\n  })), globalActions.addToHomeScreen && React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.addToHomeScreen\n  }, React.createElement(ListItemIcon, null, React.createElement(MobileScreenShare, null)), React.createElement(ListItemText, {\n    primary: 'Install this app',\n    secondary: 'It works better!'\n  })), React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.onOfflineMenuClick\n  }, React.createElement(ListItemIcon, null, React.createElement(CloudDownload, null)), React.createElement(ListItemText, {\n    primary: 'Offline Download'\n  }))), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Divider, null), React.createElement(List, null, React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.onSettingsClick\n  }, React.createElement(ListItemIcon, null, React.createElement(SettingsIcon, null)), React.createElement(ListItemText, {\n    primary: 'App Settings'\n  })), React.createElement(ListItem, {\n    button: true,\n    onClick: actions.onAboutClick\n  }, React.createElement(ListItemIcon, null, React.createElement(InfoIcon, null)), React.createElement(ListItemText, {\n    primary: 'About'\n  })), signedIn ? React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.signOut\n  }, React.createElement(ListItemIcon, null, React.createElement(ExitToAppIcon, null)), React.createElement(ListItemText, {\n    primary: 'Sign Out'\n  })) : React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.forceSignIn\n  }, React.createElement(ListItemIcon, null, React.createElement(AccountCircleIcon, null)), React.createElement(ListItemText, {\n    primary: 'Sign In'\n  })))));\n};\n\nSideDrawer.propTypes = {\n  open: PropTypes.bool,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  actions: PropTypes.shape({\n    onDisabledClick: PropTypes.func,\n    onAboutClick: PropTypes.func\n  })\n};\nexport default SideDrawer;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { FeatureDisabled } from '@morphoto/modals';\nimport { AboutApp } from '@morphoto/ui';\nimport SideDrawer from './SideDrawer';\nimport TopBar from './TopBar';\nimport { AppContext, config } from '@morphoto/client-common';\nimport { Typography } from '@material-ui/core';\nvar DIALOGS = {\n  APPLE_WARNING: 'APPLE_WARNING',\n  ABOUTAPP: 'ABOUTAPP'\n};\n\nvar TopBarWrapper = function TopBarWrapper(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      topBarProps = _objectWithoutProperties(_ref, [\"className\", \"children\"]);\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      globalActions = _useContext.globalActions;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dialogOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawerOpen = _useState4[0],\n      setDrawerOpen = _useState4[1];\n\n  var handleQRClick = device.ios ? function () {\n    return setDialogOpen(DIALOGS.APPLE_WARNING);\n  } : globalActions.onQRButtonClick;\n  return React.createElement(React.Fragment, null, React.createElement(TopBar, _extends({}, topBarProps, {\n    children: children,\n    actions: {\n      onQRClickWrapped: handleQRClick,\n      setDrawerOpen: setDrawerOpen\n    }\n  })), React.createElement(SideDrawer, {\n    open: drawerOpen,\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    },\n    actions: {\n      onDisabledClick: function onDisabledClick() {\n        return setDialogOpen(DIALOGS.APPLE_WARNING);\n      },\n      onAboutClick: function onAboutClick() {\n        return setDialogOpen(DIALOGS.ABOUTAPP);\n      }\n    }\n  }), device.ios && React.createElement(FeatureDisabled, {\n    open: dialogOpen === DIALOGS.APPLE_WARNING,\n    title: \"iOS Feature Disabled\",\n    message: React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, React.createElement(\"p\", null, \"This feature cannot function due to a bug in iOS 12 that prevents \", React.createElement(\"strong\", null, \"direct camera access from progressive web apps\"), \".\"), React.createElement(\"p\", null, \"There is good evidence iOS 13 has things sorted. ETA from Apple is mid-September 2019.\")),\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    }\n  }), React.createElement(AboutApp, {\n    open: dialogOpen === DIALOGS.ABOUTAPP,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    },\n    version: config.version\n  }));\n};\n\nTopBarWrapper.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any\n};\nexport default TopBarWrapper;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef, useEffect, useState, useContext } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nvar CHECKINTERVAL = 5000;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      background: 'black',\n      color: 'white',\n      textAlign: 'center'\n    }\n  };\n});\n\nvar OfflineBar = function OfflineBar() {\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      sinceStr = _useState2[0],\n      setSinceStr = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online,\n      signedIn = _useContext.signedIn;\n\n  var timerRef = useRef();\n\n  var calcSinceStr = function calcSinceStr() {\n    var newText = dates.formatDateAgo(online.offlineSince);\n    setSinceStr(newText);\n  };\n\n  var clearTimer = function clearTimer() {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n\n  useEffect(function () {\n    if (online.offlineSince && !timerRef.current) {\n      calcSinceStr();\n      timerRef.current = setInterval(calcSinceStr, CHECKINTERVAL);\n    } else if (!online.offlineSince) clearTimer();\n\n    return function () {\n      clearTimer();\n    };\n  }, [online.offlineSince]);\n  var loggedText = !signedIn ? 'You are not signed in.' : '';\n  var offlineText = !online.isOnline ? \"Offline (\".concat(sinceStr, \")\") : '';\n  if (online.isOnline && signedIn) return null;\n  return React.createElement(Typography, {\n    className: classes.root,\n    variant: \"caption\",\n    component: \"div\"\n  }, loggedText, \" \", offlineText);\n};\n\nexport default OfflineBar;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport HomeIcon from '@material-ui/icons/HomeOutlined';\nimport MapIcon from '@material-ui/icons/MapOutlined';\nimport SearchIcon from '@material-ui/icons/SearchOutlined';\nimport AddIcon from '@material-ui/icons/Add';\nimport PersonOutline from '@material-ui/icons/PersonOutline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { config, AppContext } from '@morphoto/client-common';\nimport { AddFab } from '@morphoto/ui';\nimport OfflineBar from './OfflineBar';\nvar STATES = config.home.AppStateTypes;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      borderTop: \"2px solid \".concat(theme.palette.secondary.main)\n    },\n    container: {\n      padding: 0,\n      display: 'flex'\n    },\n    toolbar: {\n      color: theme.palette.jet.main,\n      backgroundColor: theme.palette.papayawhip.main\n    },\n    text: {\n      padding: theme.spacing(2, 2, 0)\n    },\n    paper: {\n      paddingBottom: 50\n    },\n    list: {\n      marginBottom: theme.spacing(2)\n    },\n    subheader: {\n      backgroundColor: theme.palette.background.paper\n    },\n    grow: {\n      flexGrow: 1\n    },\n    addFab: {\n      position: 'absolute',\n      bottom: 0,\n      left: '50%',\n      transformOrigin: '0% 100%',\n      transform: 'translateY(-25%) translateX(-50%) translateZ(0)',\n      zIndex: 200\n    },\n    spacer: {\n      width: 40,\n      flexGrow: 1\n    }\n  };\n});\n\nvar BottomBar = function BottomBar(_ref) {\n  var className = _ref.className,\n      domain = _ref.domain;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions,\n      signedIn = _useContext.signedIn;\n\n  return React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.root, className)\n  }, React.createElement(Toolbar, {\n    className: classes.toolbar\n  }, React.createElement(Container, {\n    maxWidth: \"sm\",\n    className: classes.container\n  }, signedIn && React.createElement(Button, {\n    edge: \"start\",\n    className: classes.grow,\n    color: domain === STATES.FEED ? 'secondary' : 'inherit',\n    onClick: domain !== STATES.FEED ? function () {\n      return globalActions.setHomeState(STATES.FEED);\n    } : function () {}\n  }, React.createElement(HomeIcon, null)), React.createElement(Button, {\n    edge: \"start\",\n    className: classes.grow,\n    color: domain === STATES.MAP ? 'secondary' : 'inherit',\n    onClick: domain !== STATES.MAP ? function () {\n      return globalActions.setHomeState(STATES.MAP);\n    } : function () {}\n  }, React.createElement(MapIcon, null)), signedIn && React.createElement(AddFab, {\n    className: classes.addFab,\n    onCameraClick: globalActions.onCameraClick,\n    onLibraryClick: globalActions.onLibraryClick\n  }, React.createElement(AddIcon, null)), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: domain === STATES.SEARCH ? 'secondary' : 'inherit',\n    className: classes.grow,\n    onClick: domain !== STATES.SEARCH ? function () {\n      return globalActions.setHomeState(STATES.SEARCH);\n    } : function () {}\n  }, React.createElement(SearchIcon, null)), signedIn && React.createElement(Button, {\n    edge: \"end\",\n    color: domain === STATES.PROFILE ? 'secondary' : 'inherit',\n    className: classes.grow,\n    onClick: domain !== STATES.PROFILE ? function () {\n      return globalActions.setHomeState(STATES.PROFILE);\n    } : function () {}\n  }, React.createElement(PersonOutline, null)))));\n};\n\nBottomBar.propTypes = {\n  className: PropTypes.string,\n  domain: PropTypes.string,\n  signedIn: PropTypes.bool\n};\nexport default BottomBar;\nexport var BottomBarCosmosWrapper = function BottomBarCosmosWrapper(props) {\n  var classes = useWrapperStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(OfflineBar, _extends({}, props, {\n    offlineSince: Date.now() - 3600000\n  })), React.createElement(CssBaseline, null), \" \", React.createElement(Paper, {\n    className: classes.paper\n  }, React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"This is a dummy component.\")), React.createElement(BottomBar, props));\n};\n\nvar wrapperStyle = function wrapperStyle(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    paper: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useWrapperStyles = makeStyles(wrapperStyle);","export { default as TopBar } from './TopBar';\nexport { default as TopBarWrapper } from './TopBarWrapper';\nexport { default as BottomBar } from './BottomBar';\nexport { default as OfflineBar } from './OfflineBar';\nexport { default as SideDrawer } from './SideDrawer';","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Chip from '@material-ui/core/Chip';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport log from 'loglevel';\n\nvar style = function style(theme) {\n  return {\n    root: _objectSpread({}, theme.typography.caption, {\n      height: 22,\n      marginRight: theme.spacing(1) / 2,\n      marginTop: theme.spacing(1) / 2\n    }),\n    label: _objectSpread({}, theme.typography.caption),\n    deleteIcon: {\n      margin: 0\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagChip = function TagChip(_ref) {\n  var className = _ref.className,\n      edit = _ref.edit,\n      tag = _ref.tag,\n      color = _ref.color,\n      onDelete = _ref.onDelete,\n      props = _objectWithoutProperties(_ref, [\"className\", \"edit\", \"tag\", \"color\", \"onDelete\"]);\n\n  var classes = useStyles();\n  var theme = useTheme();\n  var deleteRef = useRef(false);\n\n  var stopBadness = function stopBadness(e) {\n    e.stopPropagation();\n  };\n\n  var deleteHelper = function deleteHelper(e) {\n    if (edit && !deleteRef.current) onDelete(tag);\n    deleteRef.current = true;\n  };\n\n  return React.createElement(Chip, _extends({\n    style: {\n      background: color || null,\n      color: color ? \"\".concat(theme.palette.getContrastText(color)) : null\n    },\n    classes: {\n      root: classNames(classes.root, className),\n      label: classes.label\n    },\n    onTouchStart: stopBadness,\n    onMouseDown: stopBadness,\n    label: tag.label,\n    onDelete: edit && onDelete ? function () {} : null,\n    deleteIcon: React.createElement(CancelIcon, {\n      className: classes.deleteIcon,\n      onClickCapture: deleteHelper,\n      onMouseDown: deleteHelper,\n      onTouchStart: deleteHelper,\n      style: {\n        opacity: 0.5,\n        color: color ? \"\".concat(theme.palette.getContrastText(color)) : null\n      }\n    })\n  }, props));\n};\n\nTagChip.propTypes = {\n  className: PropTypes.string,\n  color: PropTypes.string,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  onDelete: PropTypes.func\n};\nexport default TagChip;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagChip from './TagChip';\nimport log from 'loglevel';\n\nvar style = function style(theme) {\n  return {\n    suggestedContainer: {\n      margin: theme.spacing(1)\n    },\n    suggestedLink: {\n      color: theme.palette.text.secondary\n    },\n    loadPulse: {\n      animation: '$loadPulse linear infinite 3s'\n    },\n    '@keyframes loadPulse': {\n      '0%': {\n        color: 'white'\n      },\n      '50%': {\n        color: 'black'\n      },\n      '100%': {\n        color: 'white'\n      }\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nexport var SuggestedGroups = function SuggestedGroups(_ref) {\n  var suggestedObj = _ref.suggestedObj,\n      onSelectChange = _ref.onSelectChange,\n      loading = _ref.loading;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.suggestedContainer\n  }, suggestedObj['none'] && React.createElement(SuggestedGroup, {\n    title: \"Quick Suggestions:\",\n    tagLabels: suggestedObj['none'].slice(0, 5),\n    onSelectChange: onSelectChange\n  }), Object.keys(suggestedObj).filter(function (groupLabel) {\n    return groupLabel !== 'none';\n  }).map(function (groupLabel, idg) {\n    return React.createElement(SuggestedGroup, {\n      key: \"suggestedGroup-\".concat(idg),\n      title: groupLabel,\n      tagLabels: suggestedObj[groupLabel].slice(0, 5),\n      onSelectChange: onSelectChange\n    });\n  }), loading && React.createElement(Typography, {\n    className: classes.loadPulse,\n    variant: \"caption\",\n    color: \"inherit\"\n  }, \"Loading...\"));\n};\nSuggestedGroups.propTypes = {\n  suggestedObj: PropTypes.object.isRequired,\n  onSelectChange: PropTypes.func.isRequired,\n  loading: PropTypes.bool\n};\nexport var SuggestedGroup = function SuggestedGroup(_ref2) {\n  var title = _ref2.title,\n      tagLabels = _ref2.tagLabels,\n      onSelectChange = _ref2.onSelectChange;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.suggestedGroup\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\",\n    component: \"div\"\n  }, title), tagLabels.map(function (tagLabel, lid) {\n    return React.createElement(TagChip, {\n      key: \"suggestedGroup-\".concat(lid),\n      onClick: function onClick() {\n        return onSelectChange({\n          label: tagLabel,\n          __isNew__: true,\n          value: {}\n        }, {\n          action: 'create-option'\n        });\n      },\n      className: classes.suggestedChip,\n      tag: {\n        label: tagLabel\n      }\n    });\n  }));\n};\nSuggestedGroup.propTypes = {\n  title: PropTypes.string,\n  onSelectChange: PropTypes.func.isRequired,\n  tagLabels: PropTypes.array\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useMemo, useState, useEffect } from 'react';\nimport log from 'loglevel';\n\nvar useTagOptions = function useTagOptions(getValuePromiseArr) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      rawTagValues = _useState2[0],\n      setTagValues = _useState2[1];\n\n  var _useState3 = useState(getValuePromiseArr.map(function () {\n    return false;\n  })),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loadingArr = _useState4[0],\n      setLoadingArr = _useState4[1];\n\n  useEffect(function () {\n    if (getValuePromiseArr.length > 0) setLoadingArr(getValuePromiseArr.map(function () {\n      return true;\n    }));else return;\n    var loadingArr = getValuePromiseArr.map(function () {\n      return true;\n    });\n    getValuePromiseArr.forEach(function (pr, idx) {\n      pr().then(function (tags) {\n        loadingArr[idx] = false;\n        setLoadingArr(loadingArr.map(function (x, idxx) {\n          return idxx === idx ? false : x;\n        }));\n        setTagValues([].concat(_toConsumableArray(rawTagValues), _toConsumableArray(tags)));\n      }).catch(function (err) {\n        log.error(err);\n        loadingArr[idx] = false;\n        setLoadingArr(loadingArr.map(function (x, idxx) {\n          return idxx === idx ? false : x;\n        }));\n      });\n    });\n  }, [getValuePromiseArr]);\n  var hookMemo = useMemo(function () {\n    var tagReduce = rawTagValues.reduce(function (acc, _ref) {\n      var label = _ref.label,\n          group = _ref.group;\n      var finalGroup = group;\n      if (!group) finalGroup = 'none';\n      if (!acc[finalGroup]) acc[finalGroup] = {};\n      if (!acc[finalGroup][label]) acc[finalGroup][label] = {\n        count: 1\n      };else acc[finalGroup][label].count++;\n      return acc;\n    }, {});\n    Object.keys(tagReduce).forEach(function (g) {\n      var tlKeys = Object.keys(tagReduce[g]);\n      tlKeys.sort(function (tLabelA, tLabelB) {\n        if (tagReduce[g][tLabelA].count !== tagReduce[g][tLabelB].count) return tagReduce[g][tLabelA].count - tagReduce[g][tLabelB].count;\n        if (tLabelA.toLowerCase() < tLabelB.toLowerCase()) return -1;\n        if (tLabelA.toLowerCase() > tLabelB.toLowerCase()) return 1;\n        return 0;\n      });\n      tlKeys.forEach(function (tlk, idx) {\n        tagReduce[g][tlk].weight = idx;\n      });\n    });\n    var allAlph = rawTagValues.map(function (t) {\n      return t.label;\n    });\n    allAlph.sort(function (a, b) {\n      if (a.toLowerCase() < b.toLowerCase()) return -1;\n      if (a.toLowerCase() > b.toLowerCase()) return 1;\n      return 0;\n    });\n    return {\n      allAlph: _toConsumableArray(new Set(allAlph)),\n      tagReduce: tagReduce\n    };\n  }, [rawTagValues]);\n  return _objectSpread({}, hookMemo, {\n    rawTagValues: rawTagValues,\n    loading: loadingArr.some(function (x) {\n      return x;\n    })\n  });\n};\n\nexport default useTagOptions;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useMemo, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport uuid from 'uuid/v4';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport TagChip from './TagChip';\nimport { SuggestedGroups } from './suggested';\nimport useTagOptions from './useTagOptions';\nimport style from './TagControl.style';\nimport log from 'loglevel';\nvar useStyles = makeStyles(style);\n\nvar TagControl = function TagControl(_ref) {\n  var tags = _ref.tags,\n      onChange = _ref.onChange,\n      hint = _ref.hint,\n      tagType = _ref.tagType,\n      className = _ref.className,\n      isClearable = _ref.isClearable;\n  var classes = useStyles();\n  var tagsRef = useRef();\n\n  var _useTagOptions = useTagOptions(tagType.getValuePromiseArr),\n      tagReduce = _useTagOptions.tagReduce,\n      allAlph = _useTagOptions.allAlph,\n      loading = _useTagOptions.loading;\n\n  log.info('MARZIPAN', {\n    tags: tags,\n    tagReduce: tagReduce,\n    allAlph: allAlph,\n    loading: loading\n  });\n  var currTags = useMemo(function () {\n    var selected = tags.filter(function (tag) {\n      return tag.typeId === tagType.id && !tag.coords;\n    }).map(function (value, idx) {\n      return {\n        label: value.label,\n        value: value,\n        key: \"tagOpt-\".concat(uuid(), \"-\").concat(tagType.id)\n      };\n    });\n    var options = allAlph.map(function (label, idx) {\n      return {\n        label: label,\n        value: {\n          label: label,\n          typeId: tagType.id\n        },\n        key: \"tagOpt-\".concat(uuid(), \"-\").concat(tagType.id)\n      };\n    });\n    var remaining = options.filter(function (opVal) {\n      return !selected.find(function (s) {\n        return s.label === opVal.label;\n      });\n    });\n    var suggested = {};\n    Object.keys(tagReduce).forEach(function (groupName) {\n      var groupSuggest = Object.keys(tagReduce[groupName]).filter(function (opVal) {\n        return !selected.find(function (s) {\n          return s.label === opVal;\n        });\n      });\n      groupSuggest.sort(function (tla, tlb) {\n        return tagReduce[groupName][tla].weight - tagReduce[groupName][tlb].weight;\n      });\n      if (groupSuggest.length > 0) suggested[groupName] = groupSuggest;\n    });\n    return {\n      selected: selected,\n      options: options,\n      remaining: remaining,\n      suggested: suggested\n    };\n  }, [tags, allAlph]);\n  tagsRef.current = currTags;\n\n  var onSelectChange = function onSelectChange(tagArr, actionEvent) {\n    log.debug('onSelectChange', {\n      tags: tags,\n      tagArr: tagArr,\n      actionEvent: actionEvent,\n      curr: tagsRef.current\n    });\n\n    switch (actionEvent.action) {\n      case 'select-option':\n        return onChange([].concat(_toConsumableArray(tags), [actionEvent.option.value]));\n\n      case 'remove-value':\n        return onChange(tags.filter(function (_ref2) {\n          var label = _ref2.label;\n          return label !== actionEvent.removedValue.label;\n        }));\n\n      case 'pop-value':\n        return onChange(tags.filter(function (_ref3) {\n          var label = _ref3.label;\n          return label !== actionEvent.removedValue.label;\n        }));\n\n      case 'clear':\n        return onChange(tags.filter(function (_ref4) {\n          var typeId = _ref4.typeId;\n          return typeId !== tagType.id;\n        }));\n\n      case 'create-option':\n        var newTagArr = Array.isArray(tagArr) ? tagArr : [tagArr];\n        return onChange([].concat(_toConsumableArray(tags), _toConsumableArray(newTagArr.filter(function (_ref5) {\n          var __isNew__ = _ref5.__isNew__;\n          return __isNew__;\n        }).map(function (_ref6) {\n          var label = _ref6.label;\n          return {\n            label: label,\n            typeId: tagType.id\n          };\n        }))));\n\n      default:\n        break;\n    }\n  };\n\n  var MultiValue = function MultiValue(_ref7) {\n    var removeProps = _ref7.removeProps,\n        innerProps = _ref7.innerProps,\n        data = _ref7.data;\n    return React.createElement(TagChip, {\n      edit: true,\n      key: data.key,\n      tag: data.value,\n      onDelete: function onDelete(e) {\n        removeProps.onClick();\n      },\n      color: tagType.color\n    });\n  };\n\n  MultiValue.propTypes = {\n    removeProps: PropTypes.any,\n    innerProps: PropTypes.any,\n    data: PropTypes.any\n  };\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, tagType.label), !tagType.allowAdditions && React.createElement(Select, {\n    id: \"tagsSelect-\".concat(tagType.id),\n    options: currTags.remaining,\n    classes: classes,\n    getOptionValue: function getOptionValue(option) {\n      return option.key;\n    },\n    getLabelValue: function getLabelValue(option) {\n      return option.label;\n    },\n    isFocused: true,\n    components: {\n      MultiValue: MultiValue\n    },\n    deleteRemoves: true,\n    value: currTags.selected,\n    isClearable: false,\n    onChange: onSelectChange,\n    placeholder: \"Select Tags\",\n    isMulti: true,\n    isSearchable: true\n  }), tagType.allowAdditions && React.createElement(CreatableSelect, {\n    id: \"tagsSelect-\".concat(tagType.id),\n    classes: classes,\n    isFocused: true,\n    deleteRemoves: true,\n    components: {\n      MultiValue: MultiValue\n    },\n    options: currTags.remaining,\n    value: currTags.selected,\n    getOptionValue: function getOptionValue(option) {\n      return option.key;\n    },\n    getLabelValue: function getLabelValue(option) {\n      return option.label;\n    },\n    isClearable: isClearable,\n    onChange: onSelectChange,\n    placeholder: \"Select Tags\",\n    isMulti: true,\n    isSearchable: true\n  }), hint && React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.hint\n  }, hint), React.createElement(SuggestedGroups, {\n    suggestedObj: currTags.suggested,\n    onSelectChange: onSelectChange,\n    loading: loading\n  }));\n};\n\nTagControl.propTypes = {\n  className: PropTypes.string,\n  hint: PropTypes.string,\n  tags: PropTypes.array,\n  isClearable: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  tagType: PropTypes.object\n};\nexport default TagControl;","export default (function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    tagContainer: {},\n    formControl: {},\n    singleValue: {\n      fontSize: 16\n    },\n    valueContainer: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      flex: 1,\n      alignItems: 'center',\n      overflow: 'hidden'\n    },\n    paper: {}\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagControl from './TagControl';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dlgContent: {},\n    title: {\n      border: \"1px solid \".concat(theme.palette.grey[200]),\n      background: theme.palette.grey[100],\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagEdit = function TagEdit(_ref) {\n  var open = _ref.open,\n      title = _ref.title,\n      onOk = _ref.onOk,\n      onCancel = _ref.onCancel,\n      tags = _ref.tags,\n      tagType = _ref.tagType;\n  var classes = useStyles();\n\n  var _useState = useState(tags),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  return React.createElement(Dialog, {\n    className: classes.root,\n    scroll: \"paper\",\n    fullScreen: true,\n    open: open,\n    onClose: function onClose() {\n      return onOk(value);\n    }\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    className: classes.closeButton,\n    onClick: onCancel\n  }, React.createElement(CloseIcon, null))), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(TagControl, {\n    className: classes.field,\n    tags: value,\n    hint: \"Choose a tag or type to create a new one.\",\n    isClearable: true,\n    tagType: tagType,\n    onChange: setValue\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onCancel\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return setValue(tags);\n    }\n  }, \"Reset\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(value);\n    }\n  }, \"Ok\")));\n};\n\nTagEdit.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  onOk: PropTypes.func,\n  onCancel: PropTypes.func,\n  tags: PropTypes.array.isRequired,\n  tagType: PropTypes.object.isRequired\n};\nexport default TagEdit;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagChip from './TagChip';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    clickHelper: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagView = function TagView(_ref) {\n  var tags = _ref.tags,\n      label = _ref.label,\n      tagType = _ref.tagType,\n      className = _ref.className,\n      canEdit = _ref.canEdit,\n      onClick = _ref.onClick;\n  var classes = useStyles();\n  var tagValues = tags ? tags.filter(function (tag) {\n    return tag.typeId === tagType.id && !tag.coords;\n  }) : [];\n  if (!canEdit && tagValues.length === 0) return null;\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, tagType.label), React.createElement(\"div\", {\n    className: classes.tagContainer\n  }, tagValues.map(function (tag, idx) {\n    return React.createElement(TagChip, {\n      tag: tag,\n      key: \"tagchip\".concat(idx),\n      color: tagType.color\n    });\n  }), canEdit && onClick && React.createElement(Button, {\n    fullWidth: true,\n    variant: \"outlined\",\n    size: \"small\",\n    onClick: onClick,\n    className: classes.clickHelper\n  }, (!tagValues || tagValues.length === 0) && 'Add Tag(s)', tagValues && tagValues.length === 1 && 'Edit Tag', tagValues && tagValues.length > 1 && 'Edit Tags')));\n};\n\nTagView.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string,\n  tags: PropTypes.array,\n  tagType: PropTypes.object,\n  canEdit: PropTypes.bool,\n  onClick: PropTypes.func\n};\nexport default TagView;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport var tagChips = {\n  height: 22,\n  arrowRectSide: 11,\n  arrowRectHypot: 6.5,\n  flipHeight: -15\n};\nexport default (function (tagColor, hOffset, vFlip) {\n  return function (theme) {\n    return {\n      chipBucket: {\n        width: 1,\n        height: 1,\n        position: 'absolute',\n        '&:before': {\n          content: '\" \"',\n          position: 'absolute',\n          width: tagChips.arrowRectSide,\n          height: tagChips.arrowRectSide,\n          background: tagColor,\n          transform: 'rotate(45deg)',\n          transformOrigin: 'left top',\n          top: vFlip ? tagChips.flipHeight : 0\n        },\n        '&,&::after, &::before': {\n          userSelect: 'none',\n          cursor: 'default'\n        }\n      },\n      innerContainDrag: {\n        '&:before': {\n          background: theme.palette.warning.main\n        }\n      },\n      dragging: {\n        background: theme.palette.warning.main,\n        '&:focus, &:hover': {\n          color: theme.palette.getContrastText(tagColor),\n          background: tagColor\n        }\n      },\n      innercontainer: {\n        left: hOffset,\n        top: vFlip ? -tagChips.arrowRectHypot - tagChips.height : tagChips.arrowRectHypot,\n        position: 'absolute'\n      },\n      xyTagChip: _objectSpread({}, theme.typography.caption, {\n        background: tagColor,\n        color: theme.palette.getContrastText(tagColor),\n        height: 22,\n        margin: 0,\n        '&:focus, &:hover': {\n          color: theme.palette.getContrastText(tagColor),\n          background: tagColor\n        }\n      }),\n      label: _objectSpread({}, theme.typography.caption),\n      deleteIcon: {\n        margin: 0\n      }\n    };\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useRef, useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Draggable from 'react-draggable';\nimport Chip from '@material-ui/core/Chip';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport styleThunk, { tagChips } from './XYTagChip.style';\nimport log from 'loglevel';\n\nvar useStylesThunk = function useStylesThunk() {\n  return makeStyles(styleThunk.apply(void 0, arguments));\n};\n\nvar INSET = 14;\n\nvar XYTagChip = function XYTagChip(_ref) {\n  var color = _ref.color,\n      edit = _ref.edit,\n      tag = _ref.tag,\n      newSize = _ref.newSize,\n      onTagDragOver = _ref.onTagDragOver,\n      onTagDragStop = _ref.onTagDragStop,\n      onTagDelete = _ref.onTagDelete,\n      props = _objectWithoutProperties(_ref, [\"color\", \"edit\", \"tag\", \"newSize\", \"onTagDragOver\", \"onTagDragStop\", \"onTagDelete\"]);\n\n  var isReversed = tag.relCoords.x > newSize.newWidth / 2;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isDragging = _useState2[0],\n      setIsDragging = _useState2[1];\n\n  var _useState3 = useState([-INSET, false]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      _useState4$ = _slicedToArray(_useState4[0], 2),\n      hOffset = _useState4$[0],\n      vFlip = _useState4$[1],\n      setOffset = _useState4[1];\n\n  var classes = useStylesThunk(color, hOffset, vFlip)();\n  var tagRef = useRef();\n  var deleteRef = useRef(false);\n  useLayoutEffect(function () {\n    if (!tagRef.current) return;\n\n    var _tagRef$current$getBo = tagRef.current.getBoundingClientRect(),\n        tagWidth = _tagRef$current$getBo.width;\n\n    var newOffset = -tagWidth / 2;\n    var newVFlip = false;\n\n    if (tag.relCoords.x + newOffset + tagWidth > newSize.newWidth - INSET) {\n      newOffset = newSize.newWidth - tagWidth - tag.relCoords.x;\n      if (newOffset < -tagWidth + INSET) newOffset = -tagWidth + INSET;\n    } else if (tag.relCoords.x + newOffset <= INSET) {\n      newOffset = -tag.relCoords.x + INSET;\n      if (newOffset > -INSET) newOffset = -INSET;\n    }\n\n    if (tag.relCoords.y + tagChips.height + tagChips.arrowRectHypot + INSET >= newSize.newHeight) {\n      newVFlip = true;\n    }\n\n    setOffset([newOffset, newVFlip]);\n  }, [tagRef, tag.relCoords, newSize]);\n\n  var stopBadness = function stopBadness(e) {\n    e.stopPropagation();\n    return false;\n  };\n\n  var handleDrag = function handleDrag(e, data) {\n    stopBadness(e);\n    setIsDragging(true);\n    if (onTagDragOver) onTagDragOver(data, tag);\n  };\n\n  var handleStopDrag = function handleStopDrag(e, data) {\n    stopBadness(e);\n    setIsDragging(false);\n    if (onTagDragStop) onTagDragStop(data, tag);\n  };\n\n  var deleteHelper = function deleteHelper(e) {\n    if (edit && !deleteRef.current) onTagDelete(tag);\n    deleteRef.current = true;\n  };\n\n  return React.createElement(Draggable, {\n    disabled: !edit,\n    bounds: {\n      left: 10,\n      top: 10,\n      right: newSize.newWidth - 10,\n      bottom: newSize.newHeight - 10\n    },\n    position: {\n      x: tag.relCoords.x,\n      y: tag.relCoords.y\n    },\n    onDrag: handleDrag,\n    onStop: handleStopDrag,\n    onClick: stopBadness\n  }, React.createElement(\"div\", {\n    className: classNames(classes.chipBucket)\n  }, React.createElement(\"div\", {\n    ref: tagRef,\n    className: classNames(classes.innercontainer, isDragging ? classes.innerContainDrag : null)\n  }, React.createElement(Chip, _extends({\n    classes: {\n      root: classNames(classes.xyTagChip, isDragging && classes.dragging, edit && classes.editing),\n      label: classes.label\n    },\n    clickable: false,\n    color: edit ? 'secondary' : 'default',\n    label: tag.label,\n    onDelete: edit && onTagDelete ? function () {} : null,\n    deleteIcon: edit ? React.createElement(CancelIcon, {\n      className: classNames(classes.deleteIcon, isReversed && classes.reversedDelete),\n      onClickCapture: deleteHelper\n    }) : React.createElement(\"div\", null)\n  }, props)))));\n};\n\nXYTagChip.propTypes = {\n  color: PropTypes.string,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  newSize: PropTypes.object,\n  onTagDragOver: PropTypes.func,\n  onTagDragStop: PropTypes.func,\n  onTagDelete: PropTypes.func\n};\nexport default XYTagChip;","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport uuid from 'uuid/v4';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport useTagOptions from './useTagOptions';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport style from './XYTagSelect.style';\nimport { SuggestedGroups } from './suggested';\nimport log from 'loglevel';\nvar useStyles = makeStyles(style);\n\nvar XYTagSelect = function XYTagSelect(_ref) {\n  var tagType = _ref.tagType,\n      onChange = _ref.onChange;\n  var classes = useStyles();\n\n  var _useTagOptions = useTagOptions(tagType.getValuePromiseArr),\n      tagReduce = _useTagOptions.tagReduce,\n      allAlph = _useTagOptions.allAlph,\n      loading = _useTagOptions.loading;\n\n  var currTags = useMemo(function () {\n    var options = allAlph.map(function (label, idx) {\n      return {\n        label: label,\n        value: {\n          label: label,\n          typeId: tagType.id\n        },\n        key: \"tagOpt-\".concat(uuid(), \"-\").concat(tagType.id)\n      };\n    });\n    var suggested = {};\n    Object.keys(tagReduce).forEach(function (groupName) {\n      var groupSuggest = Object.keys(tagReduce[groupName]);\n      groupSuggest.sort(function (tla, tlb) {\n        return tagReduce[groupName][tla].weight - tagReduce[groupName][tlb].weight;\n      });\n      if (groupSuggest.length > 0) suggested[groupName] = groupSuggest;\n    });\n    return {\n      options: options,\n      suggested: suggested\n    };\n  }, [allAlph]);\n\n  var onSelectChange = function onSelectChange(tagVal, actionEvent) {\n    log.debug('onSelectChange', {\n      tagVal: tagVal,\n      actionEvent: actionEvent\n    });\n\n    switch (actionEvent.action) {\n      case 'select-option':\n        return onChange(tagVal.value);\n\n      case 'create-option':\n        return onChange({\n          label: tagVal.label,\n          typeId: tagType.id\n        });\n\n      default:\n        break;\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, !tagType.allowAdditions && React.createElement(Select, {\n    getOptionValue: function getOptionValue(option) {\n      return option.key;\n    },\n    getLabelValue: function getLabelValue(option) {\n      return option.label;\n    },\n    options: currTags.options,\n    classes: classes,\n    components: {},\n    value: null,\n    blurInputOnSelect: true,\n    isClearable: false,\n    onChange: onSelectChange,\n    placeholder: tagType.label,\n    isSearchable: true\n  }), tagType.allowAdditions && React.createElement(CreatableSelect, {\n    getOptionValue: function getOptionValue(option) {\n      return option.key;\n    },\n    getLabelValue: function getLabelValue(option) {\n      return option.label;\n    },\n    options: currTags.options,\n    classes: classes,\n    components: {},\n    value: null,\n    isClearable: false,\n    blurInputOnSelect: true,\n    onChange: onSelectChange,\n    placeholder: tagType.label,\n    isSearchable: true\n  }), React.createElement(SuggestedGroups, {\n    suggestedObj: currTags.suggested,\n    onSelectChange: onSelectChange,\n    loading: loading\n  }));\n};\n\nXYTagSelect.propTypes = {\n  tagType: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default XYTagSelect;","export default (function (theme) {\n  return {};\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport log from 'loglevel';\nimport XYTagSelect from './XYTagSelect';\nimport style from './XYTagChooser.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagChooser = function XYTagChooser(_ref) {\n  var relCoords = _ref.relCoords,\n      open = _ref.open,\n      onNewTag = _ref.onNewTag,\n      onClose = _ref.onClose,\n      title = _ref.title,\n      promptText = _ref.promptText,\n      tagConfigArr = _ref.tagConfigArr;\n  var classes = useStyles();\n  var xyTags = tagConfigArr.filter(function (t) {\n    return t.allowXY;\n  });\n  if (!relCoords) return null;\n  return React.createElement(Dialog, {\n    open: open,\n    scroll: \"paper\",\n    fullWidth: true,\n    classes: {\n      paperScrollPaper: classes.root\n    },\n    onClose: onClose,\n    \"aria-labelledby\": \"simple-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"simple-dialog-title\",\n    className: classes.header\n  }, title, React.createElement(IconButton, {\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, null))), React.createElement(\"div\", {\n    className: classes.dlgBody\n  }, promptText && React.createElement(Typography, {\n    variant: \"caption\"\n  }, promptText), xyTags.map(function (tagType, idx) {\n    return React.createElement(\"div\", {\n      className: classes.listItem,\n      key: \"tagSelect\".concat(idx)\n    }, React.createElement(XYTagSelect, {\n      tagType: tagType,\n      onChange: function onChange(data) {\n        return onNewTag(data, relCoords, tagType);\n      }\n    }));\n  })));\n};\n\nXYTagChooser.propTypes = {\n  open: PropTypes.bool.isRequired,\n  relCoords: PropTypes.object,\n  tagConfigArr: PropTypes.array.isRequired,\n  title: PropTypes.string,\n  promptText: PropTypes.string,\n  onClose: PropTypes.func.isRequired,\n  onNewTag: PropTypes.func.isRequired\n};\nexport default XYTagChooser;","export default (function (theme) {\n  return {\n    root: {\n      overflow: 'visible'\n    },\n    header: {\n      padding: theme.spacing(1) * 2\n    },\n    listItem: {\n      flexDirection: 'column',\n      marginBottom: theme.spacing(1)\n    },\n    dlgBody: {\n      paddingLeft: theme.spacing(1) * 2,\n      paddingRight: theme.spacing(1) * 2,\n      paddingBottom: theme.spacing(1) * 2\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useContext, useMemo } from 'react';\nimport { AppContext } from '@morphoto/client-common';\nimport XYTagChooser from './XYTagChooser';\nimport { Tags } from '@morphoto/common';\nimport log from 'loglevel';\n\nvar useXYTags = function useXYTags(photo, editing, newSize, onChange, setResizeActive) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isDragging = _useState2[0],\n      setIsDragging = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newTagDialog = _useState4[0],\n      setNewTagDialog = _useState4[1];\n\n  var _useContext = useContext(AppContext),\n      tagConfigArr = _useContext.tagConfigArr;\n\n  var tagObj = useMemo(function () {\n    var tagClass = new Tags(tagConfigArr, photo.tags);\n    var relXYTags = tagClass.getRelXYTags(newSize ? newSize.multiplier : null);\n    return {\n      tagClass: tagClass,\n      relXYTags: relXYTags\n    };\n  }, [photo.tags, newSize]);\n\n  var onNewTag = function onNewTag(data, relCoords, tagType) {\n    log.info('onNewTag', {\n      data: data,\n      relCoords: relCoords,\n      tagType: tagType\n    });\n    if (!newSize || !editing) return;\n    var addTag = tagObj.tagClass.createNewXYTagObj(data.label, tagType.id, relCoords, newSize.multiplier);\n    setNewTagDialog(null);\n    if (onChange) onChange([].concat(_toConsumableArray(photo.tags), [addTag]));\n  };\n\n  var onTagDelete = function onTagDelete(tag) {\n    log.debug('onTagDelete', {\n      tag: tag,\n      editing: editing\n    });\n    if (!editing) return;\n    var tags = photo.tags.filter(function (oldTag) {\n      return oldTag.label !== tag.label;\n    });\n\n    if (onChange) {\n      onChange(tags);\n    }\n  };\n\n  var onAddTagTrigger = function onAddTagTrigger(e) {\n    if (!editing) return;\n\n    if (!newTagDialog && newSize) {\n      var rect = e.target.getBoundingClientRect();\n      log.debug(_objectSpread({}, e));\n      log.info('onAddTagTrigger', {\n        e: e,\n        rect: rect,\n        type: e.type,\n        target: e.target,\n        clientEvent: [e.clientX, e.clientY],\n        window: [window.innerWidth, window.innerHeight],\n        newSize: newSize\n      });\n      setResizeActive(false);\n      setNewTagDialog({\n        x: parseInt(e.clientX - rect.left, 10),\n        y: parseInt(e.clientY - rect.top, 10)\n      });\n    }\n  };\n\n  var updateTagLocation = function updateTagLocation(_ref, tag) {\n    var x = _ref.x,\n        y = _ref.y;\n    var newTags = photo.tags.map(function (oldTag) {\n      if (oldTag.label !== tag.label) return oldTag;else {\n        if (!newSize) return oldTag;\n        var newX = parseInt(x / newSize.multiplier, 10);\n        var newY = parseInt(y / newSize.multiplier, 10);\n        return _objectSpread({}, oldTag, {\n          coords: {\n            x: newX,\n            y: newY\n          }\n        });\n      }\n    });\n    return newTags;\n  };\n\n  var onTagDragStop = function onTagDragStop(coords, tag) {\n    var tags = updateTagLocation(coords, tag);\n    setIsDragging(false);\n\n    if (onChange) {\n      onChange(tags);\n    }\n  };\n\n  var onTagDragOver = function onTagDragOver(coords, tag) {\n    updateTagLocation(coords, tag);\n    setIsDragging(true);\n  };\n\n  var XYTagChooserWrapper = function XYTagChooserWrapper(props) {\n    return React.createElement(XYTagChooser, _extends({\n      open: !isDragging && Boolean(newTagDialog),\n      relCoords: newTagDialog,\n      onNewTag: onNewTag,\n      onClose: function onClose() {\n        setNewTagDialog(null);\n        setResizeActive(true);\n      },\n      tagConfigArr: tagConfigArr\n    }, props));\n  };\n\n  return {\n    onNewTag: onNewTag,\n    onTagDelete: onTagDelete,\n    onAddTagTrigger: onAddTagTrigger,\n    onTagDragOver: onTagDragOver,\n    onTagDragStop: onTagDragStop,\n    XYTagChooserWrapper: XYTagChooserWrapper,\n    relXYTags: tagObj.relXYTags\n  };\n};\n\nexport default useXYTags;","export { default as TagChip } from './TagChip';\nexport { default as TagControl } from './TagControl';\nexport { default as TagEdit } from './TagEdit';\nexport { default as TagView } from './TagView';\nexport { default as XYTagChip } from './XYTagChip';\nexport { default as XYTagChooser } from './XYTagChooser';\nexport { default as XYTagSelect } from './XYTagSelect';\nexport { default as useXYTags } from './useXYTags';","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport log from 'loglevel';\n\nvar LoadFakeData = function LoadFakeData(_ref) {\n  var children = _ref.children,\n      delay = _ref.delay,\n      props = _objectWithoutProperties(_ref, [\"children\", \"delay\"]);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      mockData = _useState2[0],\n      setData = _useState2[1];\n\n  var dataRef = useRef();\n  var mountedRef = useRef();\n  dataRef.current = mockData;\n  useEffect(function () {\n    mountedRef.current = true;\n    var dirName = process.env.PUBLIC_URL.split('/').filter(function (d) {\n      return d.length > 0;\n    });\n    var dirPath = dirName.length === 0 ? 'data' : \"\".concat(dirName[0], \"/data\");\n    var finalPath = window.location.protocol + '//' + window.location.host + '/' + dirPath;\n    log.debug('PATH', {\n      finalPath: finalPath,\n      dirName: dirName,\n      protocol: window.location.protocol,\n      host: window.location.host\n    });\n    Object.keys(props).forEach(function (key) {\n      if (dataRef.current && !dataRef.current[key]) {\n        axios(\"\".concat(finalPath, \"/\").concat(props[key])).then(function (result) {\n          if (delay) {\n            log.debug('LoadFakeData::Start loading...');\n            setTimeout(function () {\n              if (!mountedRef.current) return;\n              log.debug('LoadFakeData::Loading done...');\n              setData(_objectSpread({}, dataRef.current, _defineProperty({}, key, result.data)));\n            }, delay);\n          } else {\n            if (!mountedRef.current) return;\n            setData(_objectSpread({}, dataRef.current, _defineProperty({}, key, result.data)));\n          }\n        }).catch(function (err) {\n          log.error('LoadFakeData::I AM AN ERROR', err);\n        });\n      }\n    });\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []);\n  var loaded = Object.keys(mockData).length;\n  var loading = Object.keys(props).length;\n\n  var context = mockData.context,\n      mockProps = _objectWithoutProperties(mockData, [\"context\"]);\n\n  var finalData = loaded !== loading ? {} : mockProps;\n  var finalRender = useMemo(function () {\n    return React.cloneElement(children, _objectSpread({}, children.props, {}, finalData));\n  }, [mockData]);\n  log.debug('LoadFakeData::finalData', finalData);\n  return finalRender;\n};\n\nLoadFakeData.propTypes = {\n  children: PropTypes.node.isRequired,\n  delay: PropTypes.number\n};\nexport default LoadFakeData;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar withContext = function withContext(ContextObj) {\n  var Inner = function Inner(_ref) {\n    var children = _ref.children,\n        props = _objectWithoutProperties(_ref, [\"children\"]);\n\n    return React.createElement(ContextObj.Provider, {\n      value: props\n    }, children);\n  };\n\n  Inner.propTypes = {\n    children: PropTypes.any.isRequired\n  };\n};\n\nexport default withContext;","import React, { useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport { List } from 'react-virtualized';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CircularProgress } from '@material-ui/core';\nimport { useComponentSize, AppContext } from '@morphoto/client-common';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport FeedEnder from './FeedEnder';\nimport FeedItem from './FeedItem';\nvar ROWHEIGHT = 300;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    container: {\n      padding: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1\n    },\n    listContainer: {\n      flexGrow: 1,\n      overflow: 'hidden'\n    },\n    vList: {\n      height: '100%',\n      width: '100%'\n    },\n    feedContainer: {\n      flexGrow: 1,\n      transform: 'translateZ(0)'\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n});\n\nvar MyFeed = function MyFeed(_ref) {\n  var events = _ref.events,\n      loading = _ref.loading,\n      actions = _ref.actions,\n      window = _ref.window;\n  var classes = useStyles();\n  var listRef = useRef();\n\n  var _useComponentSize = useComponentSize(listRef),\n      size = _useComponentSize.size;\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online;\n\n  var rowRenderer = function rowRenderer(_ref2) {\n    var index = _ref2.index,\n        isScrolling = _ref2.isScrolling,\n        isVisible = _ref2.isVisible,\n        key = _ref2.key,\n        parent = _ref2.parent,\n        style = _ref2.style;\n    var row = events[index];\n    var content;\n\n    if (index < events.length && row) {\n      content = React.createElement(FeedItem, {\n        event: events[index],\n        key: \"feedItem-\".concat(events[index]._id),\n        actions: actions\n      });\n    } else if (index === events.length) {\n      var wEnd = window && window[0] === 0;\n      content = React.createElement(FeedEnder, {\n        icon: React.createElement(CircularProgress, {\n          size: 30,\n          thickness: 2,\n          color: \"inherit\"\n        }),\n        text: \"Loading...\"\n      });\n      var almostAtEnd = ROWHEIGHT * 4 + parent.state.scrollTop > style.top;\n\n      if (!online.isOnline) {\n        content = React.createElement(FeedEnder, {\n          icon: React.createElement(ErrorIcon, null),\n          text: \"Cannot Refresh Offline\"\n        });\n      } else if (wEnd) {\n        content = React.createElement(FeedEnder, {\n          text: \"End of feed\"\n        });\n      } else if (!loading && almostAtEnd) {\n        actions.fetchMore();\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: classes.row,\n      key: key,\n      style: style\n    }, content);\n  };\n\n  rowRenderer.propTypes = {\n    index: PropTypes.any,\n    key: PropTypes.any,\n    style: PropTypes.any,\n    isScrolling: PropTypes.any,\n    isVisible: PropTypes.any,\n    parent: PropTypes.any\n  };\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(Typography, {\n    className: classes.grow\n  }, \"Home Feed\")), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, React.createElement(\"div\", {\n    className: classes.listContainer,\n    ref: listRef\n  }, React.createElement(List, {\n    height: size.height,\n    width: size.width,\n    className: classes.vList,\n    rowCount: events.length + 1,\n    rowHeight: ROWHEIGHT,\n    rowRenderer: rowRenderer\n  }))));\n};\n\nMyFeed.propTypes = {\n  events: PropTypes.array.isRequired,\n  loading: PropTypes.bool,\n  window: PropTypes.arrayOf(PropTypes.number),\n  actions: PropTypes.shape({\n    onImageClick: PropTypes.func.isRequired,\n    onProfileClick: PropTypes.func.isRequired,\n    onMapClick: PropTypes.func.isRequired,\n    fetchNewest: PropTypes.func.isRequired,\n    fetchMore: PropTypes.func.isRequired\n  })\n};\nexport default MyFeed;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    text: {\n      textAlign: 'center',\n      fontStyle: 'italic',\n      padding: theme.spacing(2, 1)\n    }\n  };\n});\n\nvar FeedEnder = function FeedEnder(_ref) {\n  var style = _ref.style,\n      icon = _ref.icon,\n      text = _ref.text;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), icon, React.createElement(Typography, {\n    className: classes.text,\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    component: \"div\",\n    style: style\n  }, text), React.createElement(\"div\", {\n    className: classes.grow\n  }));\n};\n\nFeedEnder.propTypes = {\n  style: PropTypes.object,\n  icon: PropTypes.any,\n  text: PropTypes.string\n};\nexport default FeedEnder;","export var CROP_MODES = [{\n  name: 'MATCH',\n  label: 'Match Reference Aspect'\n}, {\n  name: 'FULL',\n  label: 'Full Camera Resolution'\n}];\nexport var recalcRefState = function recalcRefState(previewSize, sensorSize, refImgRatio, cropMode, refImgRef) {\n  var newRefImgRatio = refImgRatio || sensorSize[1] / sensorSize[0];\n  var newPreviewSize = previewSize;\n  var cropModeObj = CROP_MODES[cropMode];\n  var imgScale = 1;\n\n  switch (cropModeObj.name) {\n    case 'MATCH':\n      var naturalWidth = refImgRef.naturalWidth,\n          naturalHeight = refImgRef.naturalHeight,\n          realImgHeight = refImgRef.height;\n\n      if (naturalHeight > 0 && naturalWidth > 0) {\n        imgScale = realImgHeight / naturalHeight;\n        newRefImgRatio = naturalHeight / naturalWidth;\n      }\n\n      newPreviewSize = [Math.round(Math.min(naturalHeight * imgScale / newRefImgRatio, sensorSize[0])), Math.round(Math.min(naturalWidth * imgScale * newRefImgRatio, sensorSize[1]))];\n      break;\n\n    case 'FULL':\n      imgScale = Math.min(window.innerHeight, window.innerWidth) / Math.min(sensorSize[0], sensorSize[1]);\n      newPreviewSize = [Math.round(sensorSize[0] * imgScale), Math.round(sensorSize[1] * imgScale)];\n      break;\n\n    default:\n      break;\n  }\n\n  return {\n    newRefImgRatio: newRefImgRatio,\n    newPreviewSize: newPreviewSize\n  };\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useLayoutEffect, useRef, useMemo, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Fab from '@material-ui/core/Fab';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport CameraIcon from '@material-ui/icons/Camera';\nimport CropIcon from '@material-ui/icons/Crop';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { RawImage, PhotoGrid, PhotoFadeSlider } from '@morphoto/photos';\nimport { useCamera } from '@morphoto/client-common';\nimport { CROP_MODES, recalcRefState } from './cameraHelpers';\nimport style from './CameraTool.style';\nvar useStyles = makeStyles(style);\n\nvar CameraTool = function CameraTool(_ref) {\n  var onCancel = _ref.onCancel,\n      onShutter = _ref.onShutter,\n      defaultRefPhotoId = _ref.defaultRefPhotoId,\n      photos = _ref.photos;\n  var classes = useStyles();\n\n  var _useState = useState(50),\n      _useState2 = _slicedToArray(_useState, 2),\n      slider = _useState2[0],\n      setSlider = _useState2[1];\n\n  var _useState3 = useState(defaultRefPhotoId ? 0 : 1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cropMode = _useState4[0],\n      setCropMode = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      imgRatio = _useState6[0],\n      setImgRatio = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      previewSize = _useState8[0],\n      setPreviewSize = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      cropSnack = _useState10[0],\n      setCropSnack = _useState10[1];\n\n  var snackTimer = useRef();\n  var refImgRef = useRef();\n  var rotClass = imgRatio && imgRatio > 1 ? classes.portraitRef : classes.landscapeRef;\n\n  var _useState11 = useState(defaultRefPhotoId),\n      _useState12 = _slicedToArray(_useState11, 2),\n      refPhotoId = _useState12[0],\n      setRefPhotoId = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      drawerOpen = _useState14[0],\n      setDrawerOpen = _useState14[1];\n\n  var incrementCropMode = useCallback(function () {\n    var newCropMode = (cropMode + 1) % CROP_MODES.length;\n    setCropMode(newCropMode);\n  }, [cropMode]);\n\n  var _useCamera = useCamera(function (data) {\n    return onShutter(data, refPhotoId || null);\n  }, previewSize),\n      cameraError = _useCamera.cameraError,\n      captureImage = _useCamera.captureImage,\n      cameraOnline = _useCamera.cameraOnline,\n      sensorSize = _useCamera.sensorSize;\n\n  useEffect(function () {\n    if (!cameraOnline) return;\n    if (snackTimer.current) clearTimeout(snackTimer.current);\n    setCropSnack(true);\n    snackTimer.current = setTimeout(function () {\n      return setCropSnack(false);\n    }, 1000);\n    recalcRefImg();\n  }, [cropMode, cameraOnline]);\n  useEffect(function () {\n    if (sensorSize && !previewSize) recalcRefImg();\n  }, [sensorSize]);\n  var refPhoto = useMemo(function () {\n    return photos.find(function (p) {\n      return p.id === refPhotoId;\n    });\n  }, [refPhotoId]);\n\n  var recalcRefImg = function recalcRefImg() {\n    if (!sensorSize) return;\n    var cropModeUse = refImgRef.current ? cropMode : CROP_MODES.findIndex(function (cm) {\n      return cm.name === 'FULL';\n    });\n    var newState = recalcRefState(previewSize, sensorSize, imgRatio, cropModeUse, refImgRef.current);\n    if (newState.newRefImgRatio !== imgRatio) setImgRatio(newState.newRefImgRatio);\n    if (newState.newPreviewSize !== previewSize) setPreviewSize(newState.newPreviewSize);\n  };\n\n  useEffect(function () {\n    setCropMode(defaultRefPhotoId ? 0 : 1);\n    setRefPhotoId(defaultRefPhotoId);\n  }, [defaultRefPhotoId]);\n\n  var handleTileClick = function handleTileClick(id) {\n    setRefPhotoId(photos.find(function (p) {\n      return p.id === id;\n    } || {}).id);\n    setDrawerOpen(false);\n    setCropMode(0);\n  };\n\n  useLayoutEffect(function () {\n    window.addEventListener('resize', recalcRefImg);\n    window.addEventListener('orientationchange', recalcRefImg);\n    return function () {\n      window.removeEventListener('resize', recalcRefImg);\n      window.removeEventListener('orientationchange', recalcRefImg);\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), !cameraError && Boolean(refPhotoId) && React.createElement(PhotoFadeSlider, {\n    className: classes.slider,\n    defaultValue: slider,\n    onChange: setSlider\n  }), cameraError && React.createElement(\"div\", {\n    className: classes.cameraErrorText\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\"\n  }, \"No Camera Access\"), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, \"Please enabled access in your settings.\")), Boolean(refPhotoId) && React.createElement(\"div\", {\n    className: classNames(classes.reference, rotClass)\n  }, React.createElement(RawImage, {\n    imgRef: refImgRef,\n    onLoad: recalcRefImg,\n    sizePriority: ['large', 'medium', 'thumb'],\n    style: {\n      opacity: 1 - slider / 100\n    },\n    photo: refPhoto\n  })), !cameraError && React.createElement(\"video\", {\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    id: \"webcam\",\n    width: window.innerWidth,\n    height: window.innerHeight,\n    className: classes.video\n  }), React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"Take Photo\",\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: cameraError || !cameraOnline,\n    className: classNames(classes.cameraFab, classes.buttonFab),\n    onClick: function onClick() {\n      return captureImage(imgRatio);\n    }\n  }, React.createElement(CameraIcon, {\n    className: classes.cameraIcon\n  })), React.createElement(Fab, {\n    \"aria-label\": \"Crop Toggle\",\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: cameraError || !cameraOnline || !refPhotoId,\n    className: classNames(classes.cropFab, classes.buttonFab),\n    onClick: incrementCropMode\n  }, React.createElement(CropIcon, {\n    className: classes.cropIcon\n  })), React.createElement(Fab, {\n    color: \"secondary\",\n    \"aria-label\": \"cancel\",\n    className: classNames(classes.cancelFab, classes.buttonFab),\n    onClick: onCancel,\n    classes: {\n      disabled: classes.disabledFab\n    }\n  }, React.createElement(CancelIcon, {\n    className: classes.cancelIcon\n  })), photos && React.createElement(Fab, {\n    \"aria-label\": \"library\",\n    className: classNames(classes.libraryFab, classes.buttonFab),\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: !photos || photos.length === 0,\n    onClick: function onClick() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    className: classes.libraryIcon\n  })), photos && React.createElement(SwipeableDrawer, {\n    anchor: \"left\",\n    open: drawerOpen,\n    classes: {\n      paperAnchorLeft: classes.swipeDrawer\n    },\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: classes.swipeDrawerContainer,\n    role: \"button\",\n    onClick: function onClick() {\n      return setDrawerOpen(false);\n    },\n    onKeyDown: function onKeyDown() {\n      return setDrawerOpen(false);\n    }\n  }, React.createElement(PhotoGrid, {\n    multiSelect: false,\n    columns: 1,\n    photos: photos,\n    onTileClick: handleTileClick\n  }))), React.createElement(Snackbar, {\n    open: cropSnack,\n    className: classes.cropSnack,\n    disableWindowBlurListener: true\n  }, React.createElement(SnackbarContent, {\n    classes: {\n      root: classes.cropSnackContent\n    },\n    message: CROP_MODES[cropMode].label\n  })));\n};\n\nCameraTool.propTypes = {\n  defaultRefPhotoId: PropTypes.string,\n  onCancel: PropTypes.func.isRequired,\n  onShutter: PropTypes.func.isRequired,\n  photos: PropTypes.array\n};\nexport default CameraTool;","import { green, blue } from '@material-ui/core/colors';\nexport default (function (theme) {\n  return {\n    root: {\n      background: 'black',\n      height: '100%',\n      width: '100%'\n    },\n    cameraErrorText: {\n      color: 'white',\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      width: '90%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      textAlign: 'center'\n    },\n    disabledFab: {\n      color: '#AAAAA!important',\n      background: '#DDDDDD!important',\n      opacity: 0.2\n    },\n    cameraFab: {\n      position: 'absolute',\n      color: green[500],\n      background: 'white',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '20px',\n        top: '50%',\n        transform: 'translateY(-50%)',\n        height: '25vh',\n        width: '25vh',\n        maxHeight: '100px',\n        maxWidth: '100px'\n      },\n      '@media (orientation: portrait)': {\n        bottom: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        height: '25vw',\n        width: '25vw',\n        maxHeight: '100px',\n        maxWidth: '100px'\n      }\n    },\n    slider: {\n      position: 'absolute',\n      '@media (orientation: landscape)': {\n        height: '80%',\n        bottom: '0%'\n      },\n      '@media (orientation: portrait)': {\n        left: '0',\n        transform: 'translateY(-50%)',\n        height: '75%',\n        top: '50%'\n      }\n    },\n    cameraIcon: {\n      height: '100%',\n      width: '100%'\n    },\n    cancelFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        top: '15px'\n      },\n      '@media (orientation: portrait)': {\n        right: '15px',\n        bottom: '15px'\n      }\n    },\n    cancelIcon: {\n      height: '100%',\n      width: '100%'\n    },\n    swipeDrawer: {\n      width: '50%'\n    },\n    libraryFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        left: '15px',\n        top: '15px'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        top: '15px'\n      }\n    },\n    cropFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        bottom: '15px'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        bottom: '15px'\n      }\n    },\n    myLocationFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        bottom: '15px'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        bottom: '15px'\n      }\n    },\n    myLocationIcon: {\n      height: '80%',\n      width: '80%'\n    },\n    captured: {},\n    reference: {\n      position: 'absolute',\n      zIndex: 2,\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    cropSnack: {\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    cropSnackPaper: {\n      border: '2px solid red'\n    },\n    cropSnackContent: {\n      background: 'black',\n      border: '2px solid white',\n      textAlign: 'center',\n      color: 'white',\n      '&>*': {\n        width: '100%'\n      }\n    },\n    video: {\n      position: 'absolute',\n      zIndex: 1,\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    portraitRef: {\n      '@media (orientation: landscape)': {\n        height: '100vw',\n        width: '100vh',\n        transform: 'rotate(90deg)',\n        transformOrigin: '0 0',\n        position: 'absolute',\n        left: '100%'\n      }\n    },\n    landscapeRef: {\n      '@media (orientation: portrait)': {\n        height: '100vw',\n        width: '100vh',\n        transform: 'rotate(90deg)',\n        transformOrigin: '0 0',\n        position: 'absolute',\n        left: '100%'\n      }\n    }\n  };\n});","import jsQR from 'jsqr';\nexport var jsQRFromBlob = function jsQRFromBlob(_ref) {\n  var data = _ref.data,\n      imageHeight = _ref.imageHeight,\n      imageWidth = _ref.imageWidth;\n  return new Promise(function (resolve, reject) {\n    try {\n      var qrCode = jsQR(data, imageWidth, imageHeight);\n      resolve(qrCode);\n    } catch (e) {\n      reject(e);\n    }\n  });\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { green, red } from '@material-ui/core/colors';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { QRCode as QRcodeIcon } from '@morphoto/icons';\nimport { jsQRFromBlob } from './QRUtil';\nimport { useCamera } from '@morphoto/client-common';\nimport log from 'loglevel';\nvar CAMERAWIDTH = 400;\nvar CAMERAHEIGHT = 400;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column'\n    },\n    qrIcon: {\n      border: '5px solid red',\n      padding: theme.spacing(2),\n      position: 'absolute',\n      color: 'white',\n      opacity: 0.4,\n      zIndex: 2,\n      width: '70%',\n      height: '70%',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    backupText: {\n      position: 'absolute',\n      color: 'white',\n      textAlign: 'center',\n      zIndex: 2,\n      width: '70%',\n      height: '70%',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    manualImg: {\n      position: 'absolute',\n      zIndex: 1\n    },\n    appBar: {},\n    inner: {\n      padding: theme.spacing(2),\n      height: '100%',\n      flexGrow: 1,\n      overflow: 'hidden'\n    },\n    tipPaper: {\n      padding: theme.spacing(2),\n      margin: theme.spacing(2)\n    },\n    docContainer: {\n      flexGrow: 1,\n      padding: theme.spacing(2)\n    },\n    cameraContainer: {\n      width: '80%',\n      margin: '0 auto',\n      position: 'relative',\n      '&::before': {\n        content: '\" \"',\n        display: 'block',\n        paddingTop: '100%'\n      }\n    },\n    cameraContainerError: {\n      background: 'black'\n    },\n    snackErr: {\n      background: red[500],\n      color: 'white'\n    },\n    snackSuccess: {\n      background: green[500],\n      color: 'white'\n    },\n    snackMsg: {},\n    video: {\n      height: '100%',\n      width: '100%',\n      verticalAlign: 'top',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 1\n    }\n  };\n});\n\nvar QRReader = function QRReader(_ref) {\n  var onMenuBack = _ref.onMenuBack,\n      onCapture = _ref.onCapture,\n      isIos = _ref.isIos;\n  var classes = useStyles();\n  var intervalRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      err = _useState2[0],\n      setErr = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      code = _useState4[0],\n      setCode = _useState4[1];\n\n  var readBlob = useCallback(function _callee(blob) {\n    var scannedCode, find, foundIdx, newData, decodedUrl;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            scannedCode = null;\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(jsQRFromBlob(blob));\n\n          case 4:\n            scannedCode = _context.sent;\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](1);\n            log.error(_context.t0);\n\n          case 10:\n            _context.prev = 10;\n\n            if (!(cameraError && !scannedCode)) {\n              _context.next = 13;\n              break;\n            }\n\n            throw new Error('Captured Image does not have a QR code');\n\n          case 13:\n            if (!scannedCode) {\n              _context.next = 24;\n              break;\n            }\n\n            find = '?fromqr=';\n            foundIdx = scannedCode.data.indexOf(find) + find.length;\n            newData = scannedCode.data.slice(foundIdx);\n            decodedUrl = JSON.parse(decodeURI(newData));\n\n            if (!(!decodedUrl.type || !decodedUrl.s)) {\n              _context.next = 20;\n              break;\n            }\n\n            throw new Error('Type or SeriesID missing from QR Code');\n\n          case 20:\n            setCode(decodedUrl);\n            if (intervalRef.current) clearInterval(intervalRef.current);\n            if (err) setErr(null);\n            log.info('QRCODE', scannedCode, decodedUrl);\n\n          case 24:\n            _context.next = 30;\n            break;\n\n          case 26:\n            _context.prev = 26;\n            _context.t1 = _context[\"catch\"](10);\n            if (!err) setErr('Not a valid QR Code');\n            log.error(_context.t1);\n\n          case 30:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 7], [10, 26]]);\n  });\n\n  var _useCamera = useCamera(readBlob, [CAMERAWIDTH, CAMERAHEIGHT]),\n      cameraError = _useCamera.cameraError,\n      captureRawData = _useCamera.captureRawData,\n      cameraOnline = _useCamera.cameraOnline;\n\n  useEffect(function () {\n    if (cameraOnline && captureRawData && !cameraError) {\n      intervalRef.current = setInterval(captureRawData, 100);\n    }\n\n    return function () {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [cameraOnline, cameraError]);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Capture QR Code\"))), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(Paper, {\n    className: classNames(classes.cameraContainer, cameraError ? classes.cameraContainerError : null)\n  }, React.createElement(QRcodeIcon, {\n    className: classes.qrIcon\n  }), React.createElement(\"video\", {\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    id: \"webcam\",\n    className: classes.video\n  })), React.createElement(Paper, {\n    className: classes.tipPaper\n  }, React.createElement(Typography, null, \"TIP: You can find the QR code for a series in the SHARE tab of that series\"))), React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: !!err,\n    autoHideDuration: 2000,\n    onClose: function onClose() {\n      setErr(null);\n    }\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackErr,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, err)\n  })), !isIos && React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: cameraError\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackErr,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, \"Camera Error. Check your device's permissions\")\n  })), React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: !!code,\n    autoHideDuration: 500,\n    onClose: function onClose() {\n      return onCapture(code.type, code.s, code.p);\n    }\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackSuccess,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, \"Valid QR Code found!\")\n  })));\n};\n\nQRReader.propTypes = {\n  onMenuBack: PropTypes.func.isRequired,\n  isIos: PropTypes.bool.isRequired,\n  onCapture: PropTypes.func.isRequired\n};\nexport default QRReader;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, Link } from '@material-ui/core';\nimport QRCode from 'qrcode';\nimport { config } from '@morphoto/client-common';\nimport { createShareUrl } from '@morphoto/common';\nimport log from 'loglevel';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    qrPaper: {\n      textAlign: 'center',\n      padding: theme.spacing(0, 2)\n    },\n    qrCode: {\n      width: '100%',\n      minHeight: 300,\n      maxHeight: 400\n    }\n  };\n});\n\nvar QRDisplay = function QRDisplay(_ref) {\n  var onClose = _ref.onClose,\n      open = _ref.open,\n      series = _ref.series,\n      photoId = _ref.photoId;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      qrCodeEl = _useState2[0],\n      setQRCodeEl = _useState2[1];\n\n  var _createShareUrl = createShareUrl(config.endpoints.share, series, photoId),\n      url = _createShareUrl.url,\n      ogShare = _createShareUrl.ogShare;\n\n  var canShare = ['OPEN', 'PUBLIC'].indexOf(series.access) > -1;\n  useLayoutEffect(function () {\n    QRCode.toString(url, function (err, svgStr) {\n      if (err) log.error(err);else setQRCodeEl(svgStr);\n    });\n  }, [series]);\n  useLayoutEffect(function () {\n    if (navigator.share && open && canShare) {\n      var text = 'MorPhoto Series';\n      if (series.note) text = series.note.length > 100 ? series.note.slice(100) + '...' : series.note;\n      navigator.share({\n        title: series.name,\n        text: text,\n        url: ogShare\n      }).then(function () {\n        return log.info('Successful share');\n      }).catch(function (error) {\n        return log.info('Error sharing', error);\n      });\n    }\n  }, [open]);\n  return React.createElement(Dialog, {\n    open: open,\n    fullWidth: true,\n    onClose: onClose,\n    className: classes.root\n  }, React.createElement(DialogTitle, {\n    className: classes.title\n  }, series.name), React.createElement(Paper, {\n    className: classes.qrPaper\n  }, canShare ? React.createElement(\"svg\", {\n    className: classes.qrCode,\n    dangerouslySetInnerHTML: {\n      __html: qrCodeEl\n    }\n  }) : React.createElement(Typography, {\n    variant: \"overline\",\n    color: \"error\"\n  }, \"You cannot share a private series.\"), canShare && React.createElement(Link, {\n    href: url\n  }, \"Share Link\"), series.coords && React.createElement(Typography, {\n    component: \"div\",\n    className: classes.coords,\n    variant: \"overline\"\n  }, \"coords: [ \", series.coords[0], \", \", series.coords[1], \" ]\")));\n};\n\nQRDisplay.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  series: PropTypes.object.isRequired,\n  photoId: PropTypes.string\n};\nexport default QRDisplay;","export { default as CameraTool } from './CameraTool';\nexport { default as QRReader } from './QRReader';\nexport { default as QRDisplay } from './QRDisplay';","export default {\n  s3Upload: require('./s3Upload').default,\n  getPhotoUrls: require('./getPhotoUrls').default,\n  graphql: {\n    APOLLOSTATES: require('./graphql/useGraphQL').APOLLOSTATES,\n    useGraphQL: require('./graphql/useGraphQL').default,\n    queries: require('./graphql/queries').default,\n    mutations: {\n      createPhoto: require('./graphql/mutations/createPhoto').default,\n      createSeries: require('./graphql/mutations/createSeries').default,\n      deletePhoto: require('./graphql/mutations/deletePhoto').default,\n      deleteSeries: require('./graphql/mutations/deleteSeries').default,\n      unwatch: require('./graphql/mutations/unwatch').default,\n      updatePhoto: require('./graphql/mutations/updatePhoto').default,\n      updateSeries: require('./graphql/mutations/updateSeries').default,\n      watch: require('./graphql/mutations/watch').default,\n      updateQueries: require('./graphql/mutations/updateQueries')\n    }\n  },\n  offline: require('./offline'),\n  redux: {\n    withReduxProvider: require('./redux/withReduxProvider').default,\n    actions: require('./redux/actions').default\n  }\n};","import { useRef, useEffect } from 'react';\nimport log from 'loglevel';\n\nvar useAuthCommon = function useAuthCommon() {\n  var containerRef = useRef();\n\n  var handleKeyPress = function handleKeyPress(event) {\n    if (event.key === 'Enter') {\n      if (containerRef.current) {\n        try {\n          var found = containerRef.current.getElementsByClassName('enterAction');\n          if (found && found[0]) found[0].click();\n        } catch (e) {\n          log.error('useAuthCommon::handleKeyPress', e);\n        }\n      }\n    }\n  };\n\n  useEffect(function () {\n    if (containerRef.current) {\n      try {\n        document.addEventListener('keypress', handleKeyPress, false);\n      } catch (e) {\n        log.error('useAuthCommon::useEffect', e);\n      }\n\n      return function () {\n        return document.removeEventListener('keypress', handleKeyPress, false);\n      };\n    }\n  }, []);\n  return containerRef;\n};\n\nexport default useAuthCommon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingContainer } from '@morphoto/ui';\nimport useAuthCommon from './useAuthCommon';\n\nvar AuthContainer = function AuthContainer(_ref) {\n  var children = _ref.children,\n      loading = _ref.loading;\n  var containerRef = useAuthCommon();\n  return React.createElement(\"div\", {\n    ref: containerRef,\n    style: {\n      height: '100%'\n    }\n  }, React.createElement(LoadingContainer, {\n    spin: loading\n  }, children));\n};\n\nAuthContainer.propTypes = {\n  children: PropTypes.any,\n  loading: PropTypes.bool\n};\nexport default AuthContainer;","export default (function (theme) {\n  return {\n    root: {},\n    spacer: {\n      flexGrow: 1\n    },\n    forgotPassword: {\n      width: '100%',\n      textAlign: 'right'\n    },\n    switch: {},\n    switchButton: {\n      flexGrow: 1,\n      '&:last-child': {\n        borderRadius: 0\n      },\n      '&:first-child': {\n        borderRadius: 0\n      }\n    },\n    phoneNumInner: {\n      marginTop: theme.spacing(1),\n      display: 'flex'\n    },\n    phoneNumDropdown: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    warnText: {\n      marginTop: theme.spacing(2),\n      fontStyle: 'italic'\n    },\n    noSignin: {\n      margin: theme.spacing(2, 0),\n      padding: theme.spacing(1),\n      textAlign: 'left',\n      border: \"1px solid #00000022\",\n      background: \"#0000000F\"\n    }\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport { Typography } from '@material-ui/core';\nvar useStyles = makeStyles(style);\n\nvar SignIn = function SignIn(_ref) {\n  var loading = _ref.loading,\n      handleSignup = _ref.handleSignup,\n      federated = _ref.federated,\n      handleForgotPassword = _ref.handleForgotPassword,\n      handleInputChange = _ref.handleInputChange,\n      handleBeAnonymous = _ref.handleBeAnonymous,\n      handleSignIn = _ref.handleSignIn,\n      props = _objectWithoutProperties(_ref, [\"loading\", \"handleSignup\", \"federated\", \"handleForgotPassword\", \"handleInputChange\", \"handleBeAnonymous\", \"handleSignIn\"]);\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"username\",\n    fullWidth: true,\n    key: \"username\",\n    name: \"username\",\n    label: \"Username\",\n    autoFocus: true,\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(TextField, {\n    fullWidth: true,\n    id: \"password\",\n    label: \"Password\",\n    key: \"password\",\n    name: \"password\",\n    type: \"password\",\n    className: classes.textField,\n    autoComplete: \"current-password\",\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    component: \"button\",\n    color: \"secondary\",\n    variant: \"contained\",\n    disabled: loading,\n    onClick: handleSignup\n  }, \"New Account\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    component: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    disabled: loading,\n    onClick: handleSignIn\n  }, \"Sign In\")), React.createElement(Button, {\n    color: \"primary\",\n    onClick: handleForgotPassword,\n    size: \"small\"\n  }, \"Forgot Password\"), React.createElement(\"div\", {\n    className: classes.noSignin\n  }, React.createElement(Button, {\n    fullWidth: true,\n    size: \"small\",\n    variant: 'outlined',\n    onClick: handleBeAnonymous,\n    color: \"inherit\"\n  }, \"Continue without logging in\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.warnText,\n    color: \"textSecondary\",\n    component: \"div\"\n  }, \"You will not be able to add content and many features will be unavailable.\")));\n};\n\nSignIn.propTypes = {\n  loading: PropTypes.bool,\n  federated: PropTypes.object,\n  handleSignup: PropTypes.func.isRequired,\n  handleForgotPassword: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  handleBeAnonymous: PropTypes.func.isRequired,\n  handleSignIn: PropTypes.func.isRequired\n};\nexport default SignIn;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Chip from '@material-ui/core/Chip';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { green } from '@material-ui/core/colors';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex'\n    },\n    chipContainer: {\n      flex: '1 1'\n    },\n    chip: {\n      height: theme.spacing(2.5)\n    },\n    label: {\n      padding: theme.spacing(0, 1, 0, 1)\n    },\n    ok: {\n      color: 'white',\n      background: green[500],\n      border: \"1px solid \".concat(green[500])\n    },\n    bad: {\n      color: theme.palette.error.main,\n      background: 'transparent',\n      border: \"1px solid \".concat(theme.palette.error.main)\n    }\n  };\n});\n\nvar PasswordHelper = function PasswordHelper(_ref) {\n  var pword = _ref.pword;\n  var classes = useStyles();\n  var hasUpper = pword ? !!pword.match(/[A-Z]/) : false;\n  var hasLower = pword ? !!pword.match(/[a-z]/) : false;\n  var hasNum = pword ? !!pword.match(/[0-9]/) : false;\n  var hasSpecial = pword ? !!pword.match(/[!@#$%^&*(),.?'\":;{}\\[\\]\\-_=+|/\\\\`~<>]/) : false;\n  var enoughChars = pword ? pword.length >= 8 : false;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(SpecialChip, {\n    ok: enoughChars,\n    label: \"8+\"\n  }), React.createElement(SpecialChip, {\n    ok: hasUpper,\n    label: \"A-Z\"\n  }), React.createElement(SpecialChip, {\n    ok: hasLower,\n    label: \"a-z\"\n  }), React.createElement(SpecialChip, {\n    ok: hasNum,\n    label: \"0-9\"\n  }), React.createElement(SpecialChip, {\n    ok: hasSpecial,\n    label: \"!@#$%^&*,.?\"\n  }));\n};\n\nPasswordHelper.propTypes = {\n  pword: PropTypes.string\n};\nexport default PasswordHelper;\n\nvar SpecialChip = function SpecialChip(_ref2) {\n  var ok = _ref2.ok,\n      props = _objectWithoutProperties(_ref2, [\"ok\"]);\n\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.chipContainer\n  }, React.createElement(Chip, _extends({\n    classes: {\n      root: classNames(classes.chip, ok ? classes.ok : classes.bad),\n      label: classes.label\n    }\n  }, props)));\n};\n\nSpecialChip.propTypes = {\n  ok: PropTypes.bool\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport PasswordHelper from './PasswordHelper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nvar useStyles = makeStyles(style);\n\nvar SignUp = function SignUp(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      signUpFields = _ref.signUpFields,\n      signUpFieldLabels = _ref.signUpFieldLabels,\n      signUpFieldPlaceholders = _ref.signUpFieldPlaceholders,\n      handleSignup = _ref.handleSignup,\n      handleBack = _ref.handleBack,\n      countryDialCodes = _ref.countryDialCodes,\n      defaultDialCode = _ref.defaultDialCode,\n      props = _objectWithoutProperties(_ref, [\"handleInputChange\", \"signUpFields\", \"signUpFieldLabels\", \"signUpFieldPlaceholders\", \"handleSignup\", \"handleBack\", \"countryDialCodes\", \"defaultDialCode\"]);\n\n  var _useState = useState(defaultDialCode),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectVal = _useState2[0],\n      setSelectVal = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pword = _useState4[0],\n      setPword = _useState4[1];\n\n  var pwordType = function pwordType(event) {\n    setPword(event.target.value);\n    handleInputChange(event);\n  };\n\n  var classes = useStyles();\n\n  var handleDialCodeChange = function handleDialCodeChange(e) {\n    handleInputChange(e);\n    setSelectVal(e.target.value);\n  };\n\n  return React.createElement(React.Fragment, null, signUpFields.map(function (field, idx) {\n    return field.key !== 'phone_number' ? React.createElement(React.Fragment, {\n      key: field.key\n    }, React.createElement(TextField, {\n      fullWidth: true,\n      autoFocus: signUpFields.findIndex(function (f) {\n        return f.key === field.key;\n      }) === 0,\n      type: field.type,\n      name: field.key,\n      placeholder: signUpFieldPlaceholders[idx],\n      label: signUpFieldLabels[idx],\n      className: classes.textField,\n      margin: \"normal\",\n      onChange: field.key === 'password' ? pwordType : handleInputChange\n    }), field.key === 'password' && React.createElement(PasswordHelper, {\n      pword: pword\n    })) : React.createElement(FormControl, {\n      className: classes.phoneNumDropdown,\n      fullWidth: true,\n      key: \"phonenum\"\n    }, React.createElement(InputLabel, {\n      htmlFor: \"dial_code\",\n      shrink: true\n    }, signUpFieldLabels[idx], field.required ? '*' : ''), React.createElement(\"div\", {\n      className: classes.phoneNumInner\n    }, React.createElement(Select, {\n      value: selectVal,\n      onChange: handleDialCodeChange,\n      inputProps: {\n        name: 'dial_code',\n        id: 'dial_code'\n      }\n    }, countryDialCodes.map(function (dialCode) {\n      return React.createElement(\"option\", {\n        key: dialCode,\n        value: dialCode\n      }, dialCode);\n    })), React.createElement(TextField, {\n      placeholder: signUpFieldPlaceholders[idx],\n      type: \"tel\",\n      fullWidth: true,\n      id: \"phone_line_number\",\n      key: \"phone_line_number\",\n      name: \"phone_line_number\",\n      onChange: handleInputChange\n    })));\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    component: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSignup\n  }, \"Create Account\")));\n};\n\nSignUp.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  signUpFields: PropTypes.array.isRequired,\n  signUpFieldLabels: PropTypes.array.isRequired,\n  signUpFieldPlaceholders: PropTypes.array.isRequired,\n  countryDialCodes: PropTypes.array.isRequired,\n  defaultDialCode: PropTypes.string.isRequired,\n  handleSignup: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired\n};\nexport default SignUp;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nvar useStyles = makeStyles(style);\n\nvar ConfirmSignIn = function ConfirmSignIn(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      handleBack = _ref.handleBack,\n      handleConfirm = _ref.handleConfirm;\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"mfaCode\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"MFA Code\",\n    name: \"code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleConfirm\n  }, \"Confirm\")));\n};\n\nConfirmSignIn.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleConfirm: PropTypes.func.isRequired\n};\nexport default ConfirmSignIn;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Typography from '@material-ui/core/Typography';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    checkEmailMsgIco: {\n      marginRight: theme.spacing(1)\n    },\n    checkEmailMsgTxt: {\n      textAlign: 'left',\n      flexGrow: 1\n    },\n    checkEmailMsg: {\n      display: 'flex'\n    }\n  };\n});\n\nvar CheckemailMsg = function CheckemailMsg(_ref) {\n  var onResend = _ref.onResend,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: open\n  }, React.createElement(SnackbarContent, {\n    className: classes.root,\n    message: React.createElement(\"div\", {\n      className: classes.checkEmailMsg\n    }, React.createElement(EmailIcon, {\n      className: classes.checkEmailMsgIco,\n      color: \"inherit\"\n    }), React.createElement(Typography, {\n      className: classes.checkEmailMsgTxt,\n      color: \"inherit\"\n    }, \"Code Sent Check your email\")),\n    action: onResend && [React.createElement(Button, {\n      key: \"undo\",\n      color: \"secondary\",\n      size: \"small\",\n      variant: \"contained\",\n      onClick: onResend\n    }, \"Resend\")]\n  }));\n};\n\nCheckemailMsg.propTypes = {\n  onResend: PropTypes.func,\n  open: PropTypes.bool\n};\nexport default CheckemailMsg;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\n\nvar ConfirmSignUp = function ConfirmSignUp(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      handleBack = _ref.handleBack,\n      handleResend = _ref.handleResend,\n      handleConfirm = _ref.handleConfirm;\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"username\",\n    fullWidth: true,\n    autoFocus: true,\n    name: \"username\",\n    label: \"Username\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(TextField, {\n    id: \"confirmationCode\",\n    fullWidth: true,\n    name: \"code\",\n    label: \"Confirmation Code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"If you can't find it in your inbox be sure to check your spam folder.\"), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: \"enterAction\",\n    onClick: handleConfirm\n  }, \"Confirm\")), React.createElement(CheckEmailMsg, {\n    open: true,\n    onResend: handleResend\n  }));\n};\n\nConfirmSignUp.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleResend: PropTypes.func.isRequired,\n  handleConfirm: PropTypes.func.isRequired\n};\nexport default ConfirmSignUp;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Link from '@material-ui/core/Link';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\n\nvar ForgotPassword = function ForgotPassword(_ref) {\n  var handleSubmit = _ref.handleSubmit,\n      handleInputChange = _ref.handleInputChange,\n      handleSendCode = _ref.handleSendCode,\n      handleBack = _ref.handleBack;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sent = _useState2[0],\n      setSent = _useState2[1];\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(Typography, null, \"Forgot Password\"), !sent && React.createElement(TextField, {\n    id: \"username\",\n    autoFocus: true,\n    fullWidth: true,\n    label: \"Username\",\n    name: \"username\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), sent && React.createElement(TextField, {\n    id: \"changecode\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Code\",\n    name: \"code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), sent && React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"If you can't find it in your inbox be sure to check your spam folder.\"), sent && React.createElement(TextField, {\n    id: \"newpassword\",\n    fullWidth: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    name: \"password\",\n    autoComplete: \"current-password\",\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), !sent && React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"Enter your username and you will be sent an email with a code to reset your password.\"), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: function onClick() {\n      sent ? setSent(false) : handleBack();\n    }\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), !sent && React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: \"enterAction\",\n    onClick: function onClick() {\n      setSent(true);\n      handleSendCode();\n    }\n  }, \"Send Code\"), sent && React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSubmit\n  }, \"Submit\")), React.createElement(CheckEmailMsg, {\n    open: sent,\n    onResend: handleSendCode\n  }));\n};\n\nForgotPassword.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  handleSendCode: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired\n};\nexport default ForgotPassword;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Typography } from '@material-ui/core';\n\nvar Loading = function Loading(_ref) {\n  var message = _ref.message;\n  return React.createElement(React.Fragment, null, React.createElement(Typography, {\n    variant: \"h3\"\n  }, \"Loading...\"), message && React.createElement(Typography, {\n    variant: \"overline\"\n  }, message));\n};\n\nLoading.propTypes = {\n  message: PropTypes.string\n};\nexport default Loading;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport PasswordHelper from './PasswordHelper';\nvar useStyles = makeStyles(style);\n\nvar RequireNewPassword = function RequireNewPassword(_ref) {\n  var change = _ref.change,\n      requiredAttributes = _ref.requiredAttributes,\n      placeholders = _ref.placeholders,\n      handleInputChange = _ref.handleInputChange;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      pword = _useState2[0],\n      setPword = _useState2[1];\n\n  var pwordType = function pwordType(event) {\n    setPword(event.target.value);\n    handleInputChange(event);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Typography, null, \"A new password is required\"), React.createElement(TextField, {\n    id: \"newassword\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    autoComplete: \"new-password\",\n    margin: \"normal\",\n    onChange: pwordType\n  }), React.createElement(PasswordHelper, {\n    pword: pword\n  }), requiredAttributes.map(function (attribute, idx) {\n    return React.createElement(TextField, {\n      fullWidth: true,\n      key: attribute,\n      name: attribute,\n      className: classes.textField,\n      placeholder: placeholders[idx],\n      type: \"text\",\n      margin: \"normal\",\n      onChange: handleInputChange\n    });\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\"\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: change,\n    className: \"enterAction\"\n  }, \"Change\")));\n};\n\nRequireNewPassword.propTypes = {\n  change: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  requiredAttributes: PropTypes.array,\n  placeholders: PropTypes.array\n};\nexport default RequireNewPassword;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport PhoneIcon from '@material-ui/icons/Phone';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\nvar RADIO = {\n  EMAIL: 0,\n  PHONE: 1\n};\n\nvar VerifyContact = function VerifyContact(_ref) {\n  var onBack = _ref.onBack,\n      hasEmail = _ref.hasEmail,\n      hasPhone = _ref.hasPhone,\n      handleSkip = _ref.handleSkip,\n      handleVerify = _ref.handleVerify,\n      handleSubmit = _ref.handleSubmit,\n      handleInputChange = _ref.handleInputChange;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sent = _useState2[0],\n      setSent = _useState2[1];\n\n  var _useState3 = useState(RADIO.EMAIL),\n      _useState4 = _slicedToArray(_useState3, 2),\n      radioVal = _useState4[0],\n      setRadioVal = _useState4[1];\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, !sent && React.createElement(React.Fragment, null, React.createElement(Typography, null, \"Verify your Contact\"), React.createElement(Typography, null, \"Account recovery requires verified contact information\"), React.createElement(Tabs, {\n    className: classes.switch,\n    indicatorColor: \"primary\",\n    value: radioVal,\n    onChange: function onChange(e, val) {\n      return setRadioVal(val);\n    },\n    textColor: \"primary\",\n    centered: true\n  }, React.createElement(Tab, {\n    icon: React.createElement(EmailIcon, null),\n    label: \"Email\"\n  }), React.createElement(Tab, {\n    icon: React.createElement(PhoneIcon, null),\n    label: \"Phone\"\n  })), radioVal === RADIO.EMAIL && React.createElement(TextField, {\n    id: \"email\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Email Address\",\n    className: classes.textField,\n    onChange: handleInputChange,\n    margin: \"normal\"\n  }), radioVal === RADIO.PHONE && React.createElement(TextField, {\n    id: \"phonenum\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Phone Number\",\n    className: classes.textField,\n    onChange: handleInputChange,\n    margin: \"normal\"\n  })), sent && React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Code\",\n    className: classes.textField,\n    placeholder: \"Code\",\n    key: \"code\",\n    name: \"code\",\n    autoComplete: \"off\",\n    onChange: handleInputChange,\n    margin: \"normal\"\n  }), sent && React.createElement(TextField, {\n    id: \"newpassword\",\n    fullWidth: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    autoComplete: \"current-password\",\n    margin: \"normal\"\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: function onClick() {\n      sent ? setSent(false) : onBack();\n    }\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: function onClick() {\n      return setSent(true);\n    }\n  }, \"Send Code\")), React.createElement(CheckEmailMsg, {\n    open: sent,\n    onResend: function onResend() {\n      return setSent(true);\n    }\n  }));\n};\n\nVerifyContact.defaultProps = {\n  hasEmail: true\n};\nVerifyContact.propTypes = {\n  onBack: PropTypes.func,\n  hasEmail: PropTypes.bool,\n  hasPhone: PropTypes.bool,\n  handleInputChange: PropTypes.func.isRequired,\n  handleSkip: PropTypes.func.isRequired,\n  handleVerify: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired\n};\nexport default VerifyContact;","export var utils = require('./utils');\nexport var CosmosBlackBackground = require('./CosmosBlackBackground').default;\nexport var MaterialUIWrap = require('./MaterialUIWrap').default;\nexport var LoadFakeData = require('./LoadFakeData').default;\nexport var withContext = require('./withContext').default;","import React from 'react';\nimport AuthContainer from './AuthContainer';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport ConfirmSignIn from './ConfirmSignIn';\nimport ConfirmSignUp from './ConfirmSignUp';\nimport ForgotPassword from './ForgotPassword';\nimport Loading from './Loading';\nimport RequireNewPassword from './RequireNewPassword';\nimport VerifyContact from './VerifyContact';\nimport { MaterialUIWrap } from '@morphoto/client-mock';\nimport themes from '@morphoto/themes';\nimport log from 'loglevel';\n\nvar wrap = function wrap(Wrapper, props) {\n  return function () {\n    return React.createElement(MaterialUIWrap, {\n      theme: themes.login\n    }, React.createElement(AuthContainer, null, Wrapper && React.createElement(Wrapper, props)));\n  };\n};\n\nexport default {\n  'Auth: container': wrap(),\n  'Auth: signIn': wrap(SignIn, {\n    authState: 'signIn',\n    loading: false,\n    federated: {\n      google_client_id: 'garbage'\n    },\n    handleBeAnonymous: function handleBeAnonymous() {\n      return alert('handleBeAnonymous');\n    },\n    handleForgotPassword: function handleForgotPassword() {\n      return alert('Forgot Password');\n    },\n    handleSignup: function handleSignup() {\n      return alert('Goto Signup');\n    },\n    handleInputChange: function handleInputChange() {\n      return log.info('inputchange');\n    },\n    handleSignIn: function handleSignIn() {\n      return alert('Sign In');\n    }\n  }),\n  'Auth: signUp': wrap(SignUp, {\n    handleInputChange: function handleInputChange() {\n      return log.info('inputchange');\n    },\n    signUpFields: [{\n      key: 'keyA',\n      type: 'text',\n      required: true\n    }, {\n      key: 'keyB',\n      type: 'number'\n    }, {\n      key: 'phone_number'\n    }],\n    signUpFieldLabels: ['Label for Text Field A', 'Label for Number Field B', 'Label for Phonenum Field C'],\n    signUpFieldPlaceholders: ['Placeholder for Field A', 'Placeholder for Field B', 'Placeholder for Field C'],\n    handleSignup: function handleSignup() {\n      return alert('Sign Up');\n    },\n    handleBack: function handleBack() {\n      return alert('Back');\n    },\n    countryDialCodes: ['+1', '+999'],\n    defaultDialCode: '+1'\n  }),\n  'Auth: confirmSignIn': wrap(ConfirmSignIn, {\n    handleInputChange: function handleInputChange(data) {\n      return log.info('handleInputChange', data);\n    },\n    handleBack: function handleBack(data) {\n      return log.info('handleBack', data);\n    },\n    handleConfirm: function handleConfirm(data) {\n      return log.info('handleConfirm', data);\n    }\n  }),\n  'Auth: confirmSignUp': wrap(ConfirmSignUp, {\n    handleInputChange: function handleInputChange(data) {\n      return log.info('handleInputChange', data);\n    },\n    handleBack: function handleBack(data) {\n      return log.info('handleBack', data);\n    },\n    handleResend: function handleResend(data) {\n      return log.info('handleResend', data);\n    },\n    handleConfirm: function handleConfirm(data) {\n      return log.info('handleConfirm', data);\n    }\n  }),\n  'Auth: ForgotPassword': wrap(ForgotPassword, {\n    handleSubmit: function handleSubmit(data) {\n      return log.info('handleSubmit', data);\n    },\n    handleInputChange: function handleInputChange(data) {\n      return log.info('handleInputChange', data);\n    },\n    handleSendCode: function handleSendCode(data) {\n      return log.info('handleSendCode', data);\n    },\n    handleBack: function handleBack(data) {\n      return log.info('handleBack', data);\n    }\n  }),\n  'Auth: RequireNewPassword': wrap(RequireNewPassword, {\n    change: function change() {\n      return alert('change');\n    },\n    handleInputChange: function handleInputChange() {\n      return log.info('handleInputChange');\n    },\n    requiredAttributes: ['attribA'],\n    placeholders: ['placeholder for attribA']\n  }),\n  'Auth: Loading': React.createElement(MaterialUIWrap, {\n    theme: themes.login\n  }, React.createElement(AuthContainer, {\n    loading: true\n  }, React.createElement(Loading, {\n    message: \"Something...\"\n  }))),\n  'Auth: VerifyContact': wrap(VerifyContact, {\n    hasEmail: true,\n    hasPhone: true\n  })\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useCallback } from 'react';\nimport Auth from '@aws-amplify/auth';\nimport { I18n, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport countryDialCodes from 'aws-amplify-react/lib/Auth/common/country-dial-codes';\nimport { Authenticator, SignIn as SignInOrig, SignUp as SignUpOrig, ConfirmSignIn as ConfirmSignInOrig, ConfirmSignUp as ConfirmSignUpOrig, RequireNewPassword as RequireNewPasswordOrig, Loading as LoadingOrig, VerifyContact as VerifyContactOrig, ForgotPassword as ForgotPasswordOrig } from 'aws-amplify-react';\nimport CompSignIn from './SignIn';\nimport AuthContainer from './AuthContainer';\nimport CompConfirmSignIn from './ConfirmSignIn';\nimport CompRequireNewPassword from './RequireNewPassword';\nimport CompSignUp from './SignUp';\nimport CompLoading from './Loading';\nimport CompConfirmSignUp from './ConfirmSignUp';\nimport CompForgotPassword from './ForgotPassword';\nimport { config } from '@morphoto/client-common';\nimport log from 'loglevel';\nAuth.configure(config.aws);\nvar defaultAuthState = {\n  authState: 'init',\n  authData: {},\n  signedIn: null\n};\nvar signUpConfig = {\n  header: 'My Customized Sign Up',\n  hiddenDefaults: ['username', 'email', 'phone_number', 'password'],\n  defaultCountryCode: '1',\n  signUpFields: [{\n    label: 'My user name',\n    key: 'username',\n    required: true,\n    displayOrder: 1,\n    type: 'string'\n  }, {\n    label: 'Password',\n    key: 'password',\n    required: true,\n    displayOrder: 3,\n    type: 'password'\n  }, {\n    label: 'Email',\n    key: 'email',\n    required: true,\n    displayOrder: 2,\n    type: 'string'\n  }]\n};\n\nvar useAuthentication = function useAuthentication() {\n  var _useState = useState(defaultAuthState),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      authState = _useState2$.authState,\n      authData = _useState2$.authData,\n      signedIn = _useState2$.signedIn,\n      setAuth = _useState2[1];\n\n  var handleAuthStateChange = useCallback(function (state, data) {\n    setAuth({\n      authState: state,\n      authData: data,\n      signedIn: !state || state.length === 0 ? null : state === 'signedIn' ? true : signedIn\n    });\n  }, [signedIn]);\n\n  var getCurrentToken = function getCurrentToken() {\n    var currSession;\n    return _regeneratorRuntime.async(function getCurrentToken$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Auth.currentSession());\n\n          case 2:\n            currSession = _context.sent;\n            log.info('here', currSession.accessToken);\n            return _context.abrupt(\"return\", currSession && currSession.accessToken ? currSession.accessToken : null);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var signOut = function signOut() {\n    return Auth.signOut().then(function (data) {\n      return log.info(data);\n    }).catch(function (err) {\n      return log.info(err);\n    });\n  };\n\n  var beAnonymous = function beAnonymous() {\n    setAuth({\n      authState: authState,\n      authData: authData,\n      signedIn: false\n    });\n  };\n\n  var authScreen = signedIn ? null : React.createElement(AuthContainer, null, React.createElement(Authenticator, {\n    onStateChange: handleAuthStateChange,\n    hideDefault: true,\n    signUpConfig: signUpConfig\n  }, React.createElement(SignIn, {\n    handleBeAnonymous: beAnonymous\n  }), React.createElement(Loading, {\n    message: \"Logging in\"\n  }), React.createElement(RequireNewPassword, null), React.createElement(ConfirmSignIn, null), React.createElement(ConfirmSignUp, null), React.createElement(VerifyContactOrig, null), React.createElement(ForgotPassword, null), React.createElement(SignUp, {\n    signUpConfig: signUpConfig\n  })));\n  var isGod = false;\n\n  try {\n    isGod = authData.signInUserSession.idToken.payload['cognito:groups'].indexOf('GodUsers') > -1;\n  } catch (e) {}\n\n  return {\n    authState: authState,\n    authData: authData,\n    isGod: isGod,\n    signOut: signOut,\n    getCurrentToken: getCurrentToken,\n    forceSignIn: function forceSignIn() {\n      return setAuth(defaultAuthState);\n    },\n    signedIn: signedIn,\n    authScreen: authScreen\n  };\n};\n\nexport default useAuthentication;\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_SignInOrig) {\n  _inherits(SignIn, _SignInOrig);\n\n  function SignIn() {\n    _classCallCheck(this, SignIn);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignIn).apply(this, arguments));\n  }\n\n  _createClass(SignIn, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this = this;\n\n      var loading = this.state.loading;\n\n      var newProps = _objectSpread({}, this.props, {\n        loading: loading,\n        handleForgotPassword: function handleForgotPassword() {\n          return _this.changeState('forgotPassword');\n        },\n        handleSignup: function handleSignup() {\n          return _this.changeState('signUp');\n        },\n        handleInputChange: this.handleInputChange,\n        handleSignIn: this.signIn\n      });\n\n      return React.createElement(CompSignIn, newProps);\n    }\n  }]);\n\n  return SignIn;\n}(SignInOrig);\n\nvar SignUp =\n/*#__PURE__*/\nfunction (_SignUpOrig) {\n  _inherits(SignUp, _SignUpOrig);\n\n  function SignUp() {\n    _classCallCheck(this, SignUp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignUp).apply(this, arguments));\n  }\n\n  _createClass(SignUp, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this2 = this;\n\n      var hide = this.props.hide;\n\n      if (hide && hide.includes(SignUp)) {\n        return null;\n      }\n\n      if (this.checkCustomSignUpFields()) {\n        this.signUpFields = this.props.signUpConfig.signUpFields;\n      }\n\n      this.sortFields();\n\n      var newProps = _objectSpread({}, this.props, {\n        countryDialCodes: countryDialCodes,\n        defaultDialCode: this.getDefaultDialCode(),\n        handleInputChange: this.handleInputChange,\n        signUpFields: this.signUpFields,\n        signUpFieldLabels: this.signUpFields.map(function (field) {\n          return I18n.get(field.label);\n        }),\n        signUpFieldPlaceholders: this.signUpFields.map(function (field) {\n          return I18n.get(field.placeholder);\n        }),\n        handleSignup: this.signUp,\n        handleBack: function handleBack() {\n          return _this2.changeState('signIn');\n        }\n      });\n\n      return React.createElement(CompSignUp, newProps);\n    }\n  }]);\n\n  return SignUp;\n}(SignUpOrig);\n\nvar ConfirmSignIn =\n/*#__PURE__*/\nfunction (_ConfirmSignInOrig) {\n  _inherits(ConfirmSignIn, _ConfirmSignInOrig);\n\n  function ConfirmSignIn() {\n    _classCallCheck(this, ConfirmSignIn);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ConfirmSignIn).apply(this, arguments));\n  }\n\n  _createClass(ConfirmSignIn, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this3 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this3.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm\n      });\n\n      return React.createElement(CompConfirmSignIn, newProps);\n    }\n  }]);\n\n  return ConfirmSignIn;\n}(ConfirmSignInOrig);\n\nvar ConfirmSignUp =\n/*#__PURE__*/\nfunction (_ConfirmSignUpOrig) {\n  _inherits(ConfirmSignUp, _ConfirmSignUpOrig);\n\n  function ConfirmSignUp() {\n    _classCallCheck(this, ConfirmSignUp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ConfirmSignUp).apply(this, arguments));\n  }\n\n  _createClass(ConfirmSignUp, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this4 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this4.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm,\n        handleResend: this.resend\n      });\n\n      return React.createElement(CompConfirmSignUp, newProps);\n    }\n  }]);\n\n  return ConfirmSignUp;\n}(ConfirmSignUpOrig);\n\nvar RequireNewPassword =\n/*#__PURE__*/\nfunction (_RequireNewPasswordOr) {\n  _inherits(RequireNewPassword, _RequireNewPasswordOr);\n\n  function RequireNewPassword() {\n    _classCallCheck(this, RequireNewPassword);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RequireNewPassword).apply(this, arguments));\n  }\n\n  _createClass(RequireNewPassword, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var user = this.props.authData;\n      var requiredAttributes = user.challengeParam.requiredAttributes;\n      var placeholders = Array.isArray(requiredAttributes) ? requiredAttributes.map(function (attribute) {\n        return I18n.get(convertToPlaceholder(attribute));\n      }) : [];\n\n      var newProps = _objectSpread({}, this.props, {\n        handleInputChange: this.handleInputChange,\n        requiredAttributes: requiredAttributes,\n        placeholders: placeholders,\n        change: this.change\n      });\n\n      return React.createElement(CompRequireNewPassword, newProps);\n    }\n  }]);\n\n  return RequireNewPassword;\n}(RequireNewPasswordOrig);\n\nvar Loading =\n/*#__PURE__*/\nfunction (_LoadingOrig) {\n  _inherits(Loading, _LoadingOrig);\n\n  function Loading() {\n    _classCallCheck(this, Loading);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Loading).apply(this, arguments));\n  }\n\n  _createClass(Loading, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      return React.createElement(CompLoading, this.props);\n    }\n  }]);\n\n  return Loading;\n}(LoadingOrig);\n\nvar ForgotPassword =\n/*#__PURE__*/\nfunction (_ForgotPasswordOrig) {\n  _inherits(ForgotPassword, _ForgotPasswordOrig);\n\n  function ForgotPassword() {\n    _classCallCheck(this, ForgotPassword);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ForgotPassword).apply(this, arguments));\n  }\n\n  _createClass(ForgotPassword, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this5 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this5.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm,\n        handleResend: this.send,\n        handleSubmit: this.submit,\n        handleSendCode: this.send\n      });\n\n      return React.createElement(CompForgotPassword, newProps);\n    }\n  }]);\n\n  return ForgotPassword;\n}(ForgotPasswordOrig);\n\nvar verifyLogger = new Logger('VerifyContact');\n\nfunction convertToPlaceholder(str) {\n  return str.split('_').map(function (part) {\n    return part.charAt(0).toUpperCase() + part.substr(1).toLowerCase();\n  }).join(' ');\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport { AppLogo } from '@morphoto/icons';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    content: {},\n    messageWrapper: {\n      display: 'flex'\n    },\n    logo: {\n      height: 50,\n      width: 50\n    },\n    paper: {\n      background: theme.palette.text.primary,\n      color: theme.palette.primary.contrastText,\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      boxShadow: \"0 0 0 0 \".concat(theme.palette.primary.main),\n      animation: '$installPulse 2s infinite',\n      padding: theme.spacing(2, 3),\n      width: '100%'\n    },\n    '@keyframes installPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(theme.palette.primary.main)\n      },\n      '50%': {\n        boxShadow: \"0 0 0 0px \".concat(theme.palette.primary.main)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 20px transparent\"\n      }\n    },\n    textWrapper: {\n      flexGrow: 1,\n      paddingLeft: theme.spacing(1)\n    },\n    buttons: {\n      display: 'flex'\n    },\n    spacer: {\n      flexGrow: 1\n    }\n  };\n});\n\nvar InstallPrompt = function InstallPrompt(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      onInstall = _ref.onInstall;\n  var classes = useStyles();\n  return React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: open,\n    onClose: onClose\n  }, React.createElement(Paper, {\n    className: classes.paper,\n    elevation: 24\n  }, React.createElement(\"div\", {\n    id: \"client-snackbar\",\n    className: classes.messageWrapper\n  }, React.createElement(AppLogo, {\n    className: classes.logo\n  }), React.createElement(\"div\", {\n    className: classes.textWrapper\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, \"Install MorPhoto\"), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\",\n    paragraph: true\n  }, \"This app can be installed and used on your device natively and offline if you would like.\"), React.createElement(\"div\", {\n    className: classes.buttons\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: onClose\n  }, \"No thanks\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: onInstall\n  }, \"Install\"))))));\n};\n\nInstallPrompt.propTypes = {\n  open: PropTypes.bool,\n  actions: PropTypes.shape({\n    onClose: PropTypes.func.isRequired,\n    onInstall: PropTypes.func.isRequired\n  })\n};\nexport default InstallPrompt;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { device } from '@morphoto/client-common';\nimport InstallPrompt from './InstallPrompt';\nimport log from 'loglevel';\n\nvar isInStandaloneMode = function isInStandaloneMode() {\n  return 'standalone' in window.navigator && window.navigator.standalone;\n};\n\nvar useShowAddToHome = function useShowAddToHome(showInstall, dismissInstall) {\n  var ios = device.ios;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      deferredPrompt = _useState2[0],\n      setPrompt = _useState2[1];\n\n  var handleBeforePrompt = function handleBeforePrompt(e) {\n    e.preventDefault();\n    setPrompt(e);\n  };\n\n  var installPrompt = useMemo(function () {\n    if (!showInstall || !deferredPrompt) return null;\n    return React.createElement(InstallPrompt, {\n      open: true,\n      onClose: dismissInstall,\n      onInstall: addToHomeScreen\n    });\n  }, [showInstall, deferredPrompt]);\n  useEffect(function () {\n    if (ios && !isInStandaloneMode()) {\n      log.info('I AM on IOS and I am NOT in standalone mode.');\n    }\n\n    window.addEventListener('beforeinstallprompt', handleBeforePrompt);\n    return function () {\n      window.removeEventListener('beforeinstallprompt', handleBeforePrompt);\n    };\n  }, []);\n\n  function addToHomeScreen() {\n    deferredPrompt.prompt();\n    deferredPrompt.userChoice.then(function (choiceResult) {\n      if (choiceResult.outcome === 'accepted') {\n        log.info('User accepted the A2HS prompt');\n        dismissInstall();\n      } else {\n        log.info('User dismissed the A2HS prompt');\n        dismissInstall();\n      }\n\n      setPrompt(null);\n    });\n  }\n\n  return {\n    installPrompt: installPrompt,\n    addToHomeScreen: installPrompt ? addToHomeScreen : null\n  };\n};\n\nexport default useShowAddToHome;","import React, { useMemo, useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { compose } from 'react-apollo'\nimport datastore from '@morphoto/datastore'\nimport { AppContext } from '@morphoto/client-common'\nimport log from 'loglevel'\n\nconst withUploadConnect = Wrapped => {\n  const Inner = ({ activeUpload, uploading, uploadOnline, updateUploadProgress, setUploaderOnline }) => {\n    const { online: { isOnline } } = useContext(AppContext)\n    // log.info('withUploadConnect::: RENDER', { isOnline, uploadOnline })\n\n    useEffect(() => {\n      log.info('withUploadConnect:::', { uploadOnline, isOnline })\n      if (uploadOnline !== isOnline) setUploaderOnline(isOnline)\n    }, [isOnline, setUploaderOnline, uploadOnline])\n\n    // This lurker waits for the s3 credentials to expire then it goes to get new ones.\n    const newS3Creds = useMemo(() => <NewS3Credentials onDone={updateUploadProgress} activeUpload={activeUpload} online={uploadOnline} />,\n      [updateUploadProgress, activeUpload, uploadOnline])\n\n    if (!activeUpload || !uploading) return newS3Creds\n    return (\n      <React.Fragment>\n        {newS3Creds}\n        <Wrapped text={'Uploading image'} progress={activeUpload.progress || 0} />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n  // All from redux\n    activeUpload: PropTypes.object,\n    uploading: PropTypes.bool,\n    uploadOnline: PropTypes.bool,\n    updateUploadProgress: PropTypes.func.isRequired,\n    setUploaderOnline: PropTypes.func.isRequired\n  }\n  return Inner\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { activeUpload, uploading, online: uploadOnline } = state.uploader\n  return { activeUpload, uploading, uploadOnline }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  updateUploadProgress: (newProgress) => {\n    dispatch(datastore.redux.actions.updateUploadProgress(newProgress))\n  },\n  setUploaderOnline: (bOnline) => {\n    dispatch(datastore.redux.actions.setUploaderOnline(bOnline))\n  }\n})\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withUploadConnect\n)\n\nconst NewS3Credentials = datastore.graphql.queries.withGetNewS3Credentials(() => null)\n","import React, { useContext, useMemo, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { compose } from 'react-apollo'\nimport { connect } from 'react-redux'\nimport ReactGA from 'react-ga'\n\nimport { NEW_PHOTO_MODES, SERIES_MODES } from '@morphoto/photoseries'\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\nimport log from 'loglevel'\n\nconst STATES = config.home.AppStateTypes\n\nconst withSeriesConnect = WrappedSeries => {\n  const InnerSeries = ({\n    series, loading, domain, activeSeries, initialPhoto,\n    onAfterSeriesDelete, queueUpload,\n    updateSeriesMutation, updatePhotoMutation,\n    deleteSeriesMutation, deletePhotoMutation,\n    createSeriesMutation, createPhotoMutation,\n    watchSeriesMutation, unWatchSeriesMutation,\n    onFindOnMap\n  }) => {\n    const { role, currentUser, signedIn, globalActions } = useContext(AppContext)\n\n    const inputMethod = domain === STATES.NEW_SERIES_CAMERA\n      ? NEW_PHOTO_MODES.CAMERA\n      : NEW_PHOTO_MODES.FILEPICKER\n\n    // log.info('SeriesConnect', { series, loading, currentState, activeSeries, role, currentUser })\n    let modeName = SERIES_MODES.SERIES_VIEW\n    if (domain !== STATES.SERIES) modeName = SERIES_MODES.NEWSERIES\n\n    // A little mutation here.\n    useMemo(() => {\n      if (series && series.photos) {\n        series.photos.sort((a, b) => parseInt(a.takenOn, 10) - parseInt(b.takenOn, 10))\n      }\n    }, [series])\n\n    useEffect(() => {\n      if (series && series.id) {\n        ReactGA.event({\n          category: `Series`,\n          action: 'View',\n          label: series.id\n        })\n      }\n    }, [series])\n\n    const seriesTags = useMemo(() => {\n      let sTags = []\n      if (series && series.photos) {\n        sTags = series.photos.reduce((acc, { tags }) => {\n          const newTags = tags.map(t => ({ ...t, group: 'Tags in this series' }))\n          return [...acc, ...newTags]\n        }, [])\n      }\n      // log.info('TAGS', sTags)\n      return sTags\n    }, [series])\n\n    let owned = false\n    try {\n      owned = currentUser.id === series.createdUser.id\n    }\n    catch (e) {}\n    const watching = signedIn && currentUser && currentUser.watching && currentUser.watching.indexOf(activeSeries) > -1\n\n    return (\n      <WrappedSeries\n        modeName={modeName}\n        inputMethod={inputMethod}\n\n        owned={owned}\n        watching={watching}\n\n        // Everything we need to determine access\n        currentUserId={signedIn ? currentUser.id : null}\n        currentUserRole={role}\n        loading={loading}\n        series={series}\n        initialPhoto={initialPhoto}\n        // TODO: Passing it in this way is a bit... weird\n        getValuePromiseArr={[\n          () => Promise.resolve(seriesTags)\n        ]}\n        actions={{\n          // Now some functions to handle actions we might take\n          onNewPhoto: async (newPhoto, newPhotoData) => {\n            log.info('onNewPhoto::', { series, newPhoto, newPhotoData })\n            // Write this blob to the imgStore so we can use it later\n            log.info('SET ITEM', newPhotoData)\n            await datastore.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData.file)\n            return createPhotoMutation(series, newPhoto, newPhotoData.ext)\n              .then(({ data }) => {\n                // Now we can add this photo to the upload queue\n                const photo = data.createPhoto.photo\n                if (data.createPhoto.preAuth) {\n                  const preAuth = JSON.parse(data.createPhoto.preAuth)\n\n                  queueUpload({\n                    id: photo.id,\n                    uploadToken: photo.uploadToken,\n                    seriesId: photo.seriesId,\n                    expires: Date.now() + (3300 * 1000),\n                    preAuth,\n                    ext: newPhotoData.ext,\n                    retry: 0\n                  })\n                }\n              })\n              .catch(err => {\n                log.error('onNewPhoto:: Graphql Error', err)\n              })\n          },\n\n          onChangePhoto: (photo, photoDelta) => updatePhotoMutation(series, photo, photoDelta)\n            .catch(err => {\n              log.error('onChangePhoto:: Graphql Error', err)\n            }),\n\n          onDeletePhoto: (photo) => deletePhotoMutation(photo.id)\n            .then((...data) => {\n              log.info('onDeletePhoto:: photo deleted', data)\n            })\n            .catch(err => {\n              log.error('onDeletePhoto:: Graphql Error', err)\n            }),\n\n          onChange: (series, seriesDelta) => updateSeriesMutation(series, seriesDelta)\n            .catch(err => {\n              log.error('onChange:: Graphql Error', err)\n            }),\n\n          onNewSeries: async (newSeries, newPhoto, newPhotoData) => {\n            log.info('Series.connect:: onNewSeries starting', { newSeries, newPhoto, newPhotoData })\n            log.info('SET ITEM', newPhotoData)\n            await datastore.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData.file)\n            return createSeriesMutation(newSeries, newPhoto, newPhotoData.ext)\n              .then(async ({ data }) => {\n                log.info('Series.connect::', data)\n                if (data.createSeries.preAuth) {\n                  // Now we can add this photo to the upload queue\n                  const photo = data.createSeries.series.photos[0]\n                  const preAuth = JSON.parse(data.createSeries.preAuth)\n\n                  queueUpload({\n                    id: photo.id,\n                    uploadToken: photo.uploadToken,\n                    seriesId: photo.seriesId,\n                    expires: Date.now() + (3300 * 1000),\n                    preAuth,\n                    ext: newPhotoData.ext,\n                    retry: 0\n                  })\n                }\n              })\n              .catch(err => {\n                log.error('onNewSeries:: Graphql Error', err)\n                // If the query explicitly fails maybe clean up the binary data.\n                // await datastore.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData.file)\n              })\n          },\n          onDelete: () => {\n            onAfterSeriesDelete() // UI Stuff, just bring us back to the feed\n            return deleteSeriesMutation()\n              .catch(err => {\n                log.error('onDelete:: Graphql Error', err)\n              })\n          },\n          onClose: globalActions.onMenuBack,\n          onFindOnMap: onFindOnMap,\n          onWatch: signedIn ? () => watchSeriesMutation(currentUser) : null,\n          onUnWatch: signedIn ? () => unWatchSeriesMutation(currentUser) : null\n        }}\n\n      />\n    )\n  }\n  InnerSeries.propTypes = {\n    domain: PropTypes.string,\n    activeSeries: PropTypes.string,\n    initialPhoto: PropTypes.string,\n\n    // From Redux\n    onAfterSeriesDelete: PropTypes.func,\n    queueUpload: PropTypes.func,\n\n    // Data from apollo\n    series: PropTypes.object,\n\n    // Functions From Apollo\n    loading: PropTypes.bool,\n\n    updateSeriesMutation: PropTypes.func,\n    updatePhotoMutation: PropTypes.func,\n    deleteSeriesMutation: PropTypes.func,\n    deletePhotoMutation: PropTypes.func,\n    createSeriesMutation: PropTypes.func,\n    createPhotoMutation: PropTypes.func,\n    watchSeriesMutation: PropTypes.func,\n    unWatchSeriesMutation: PropTypes.func,\n    onFindOnMap: PropTypes.func\n  }\n  return InnerSeries\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { current: { activeSeries, initialPhoto, domain } } = state.home\n  return { activeSeries, initialPhoto, domain, ...props }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  onAfterSeriesDelete: () => {\n    log.info('onAfterSeriesDelete')\n    dispatch(datastore.redux.actions.setHomeState(STATES.FEED, { activeSeries: null }))\n  },\n  queueUpload: (uploadObj) => {\n    dispatch(datastore.redux.actions.queueUpload(uploadObj))\n  },\n  // activeSeries is an id\n  doneCreatingSeries: (activeSeries) => {\n    log.info('doneCreatingSeries', activeSeries)\n    dispatch(datastore.redux.actions.setHomeState(STATES.SERIES, { activeSeries }))\n  },\n  // We need to swap out the L-dfgsdfgsdfg id on photos\n  doneCreatingPhoto: (initialPhoto) => {\n    log.info('doneCreatingPhoto', initialPhoto)\n    dispatch(datastore.redux.actions.setHomeState(STATES.SERIES, { initialPhoto }))\n  },\n  onFindOnMap: () => {\n    dispatch(datastore.redux.actions.setHomeState(STATES.MAP))\n  }\n})\n\n/**\n * Compose all our queries together. This is a bit of a mess but kind of necessary for now\n */\nexport default compose(\n  // connect first so that we can retrieve our seriesId\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  datastore.graphql.queries.withGetSelectedQuery,\n  datastore.graphql.mutations.createSeries.withMutation,\n  datastore.graphql.mutations.createPhoto.withMutation,\n  datastore.graphql.mutations.updateSeries.withMutation,\n  datastore.graphql.mutations.updatePhoto.withMutation,\n  datastore.graphql.mutations.deleteSeries.withMutation,\n  datastore.graphql.mutations.deletePhoto.withMutation,\n  datastore.graphql.mutations.watch.withMutation,\n  datastore.graphql.mutations.unwatch.withMutation,\n  withSeriesConnect\n)\n","import React, { useEffect, useState, useRef, useMemo } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { connect } from 'react-redux'\nimport { compose } from 'react-apollo'\n\nimport datastore from '@morphoto/datastore'\nimport { config } from '@morphoto/client-common'\nimport log from 'loglevel'\n\nconst POLL_INTERVAL = 20 // (seconds)\n\n/**\n * The outer component handles the lastCheck variable which, when changed will\n * cause the poll event\n */\nconst withHomeMap = Wrapped => {\n  const InnerHomeMap = ({\n    onSeriesNavigate,\n    onSeriesMapSelect,\n    onSearchClick,\n    popMapHistory,\n    pushMapHistory,\n    clearMapHistory,\n    initialActiveSeries,\n    initViewport\n  }) => {\n    const [seriesProps, setSeriesProps] = useState()\n    const [queryVersion, setVersion] = useState(0)\n    const timerRef = useRef()\n    const queryVersionRef = useRef()\n    const [lastCheck, setLastCheck] = useState(0)\n    queryVersionRef.current = queryVersion\n\n    // These are expensive queries so we render them memoized to prevent erroneous re-renders\n    const allSeriesQUERY = useMemo(() => <AllSeriesConnect setSeriesProps={setSeriesProps} />, [])\n    const pollSeriesQUERY = useMemo(\n      () => <PollQueryConnect lastCheck={lastCheck} seriesProps={seriesProps} updateIncrement={() => setVersion(queryVersionRef.current + 1)} />,\n      [lastCheck, seriesProps]\n    )\n    // log.info('withPollQuery (PARENT)', { lastCheck, seriesProps })\n    // Initiate the polling process. We simply update the timestamp every N seconds\n    useEffect(() => {\n      if (!seriesProps) return\n      function ping () {\n        if (timerRef.current) setLastCheck(String(Date.now() - POLL_INTERVAL * 1000))\n      }\n      if (!timerRef.current && seriesProps.readyForPolling) timerRef.current = setInterval(ping, POLL_INTERVAL * 1000)\n      return () => {\n        if (timerRef.current) {\n          log.info('clear poll timer')\n          clearInterval(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }, [seriesProps])\n    // log.info('withHomeMap', { seriesProps, queryVersion })\n\n    return (\n      <React.Fragment>\n        {allSeriesQUERY}\n        {pollSeriesQUERY}\n        <Wrapped\n          initialActiveSeries={initialActiveSeries}\n          initViewport={initViewport}\n          actions={{\n            onSeriesNavigate,\n            onSeriesMapSelect,\n            onSearchClick,\n            popMapHistory,\n            pushMapHistory,\n            clearMapHistory\n          }}\n          queryVersion={queryVersion}\n          seriesList={seriesProps && seriesProps.allSeries ? seriesProps.allSeries.seriesSummaries : []}\n          loading={!seriesProps || seriesProps.loading}\n        />\n      </React.Fragment>\n    )\n  }\n  InnerHomeMap.propTypes = {\n    onSeriesNavigate: PropTypes.func.isRequired,\n    onSeriesMapSelect: PropTypes.func.isRequired,\n    onSearchClick: PropTypes.func.isRequired,\n    popMapHistory: PropTypes.func.isRequired,\n    pushMapHistory: PropTypes.func.isRequired,\n    clearMapHistory: PropTypes.func.isRequired,\n    initialActiveSeries: PropTypes.string,\n    initViewport: PropTypes.object\n  }\n  // InnerHomeMap.whyDidYouRender = true\n  return InnerHomeMap\n}\n\n// We're using graphql() HOC because it's convenient but it doesn't need to render anything\nconst AllSeriesConnect = datastore.graphql.queries.withAllSeries(() => null)\nconst PollQueryConnect = datastore.graphql.queries.withPollQuery(() => null)\n\n// The only part of the state the main view caes about is teh window\nconst mapStateToProps = (state, props) => {\n  const { current: { activeSeries } } = state.home\n  const initViewport = state.map.slice(-1).pop()\n  return { initialActiveSeries: activeSeries, initViewport, ...props }\n}\n\nconst STATES = config.home.AppStateTypes\n\n// There are a few presentational actions the main window can use\nconst mapDispatchToProps = {\n  onSeriesNavigate: activeSeries => datastore.redux.actions.setHomeState(STATES.SERIES, { activeSeries }),\n  onSeriesMapSelect: datastore.redux.actions.setActiveSeries,\n  onSearchClick: () => datastore.redux.actions.setHomeState(STATES.SEARCH, { search: { tab: config.home.SEARCH_TABS.LOCATION, text: '' } }),\n  popMapHistory: datastore.redux.actions.popMapHistory,\n  pushMapHistory: datastore.redux.actions.pushMapHistory,\n  clearMapHistory: datastore.redux.actions.clearMapHistory\n}\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withHomeMap\n)\n","import React, { useState, useMemo, useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { compose } from 'react-apollo'\nimport ReactGA from 'react-ga'\n\nimport { connect } from 'react-redux'\nimport datastore from '@morphoto/datastore'\nimport { config, AppContext } from '@morphoto/client-common'\n// import log from 'loglevel'\n\nconst TABS = config.home.SEARCH_TABS\n\nconst withSearchConnect = Wrapped => {\n  const Inner = ({ defaultTab, defaultText, fetchMore }) => {\n    // log.info('withSearchConnect', { Wrapped, defaultTab, defaultText, fetchMore })\n    const [currentTab, setCurrentTab] = useState(defaultTab || TABS.TAG)\n    const { globalActions } = useContext(AppContext)\n    // We separate these because one of them needs to be immediate and the\n    const [searchText, setSearchText] = useState(defaultText || '')\n    const [contextChoice, setContextChoice] = useState(null)\n\n    useEffect(() => {\n      ReactGA.pageview('search')\n    }, [])\n\n    useEffect(() => {\n      if (contextChoice || searchText.length > 3) {\n        ReactGA.event({\n          category: `Search:${currentTab}`,\n          action: contextChoice ? 'Search Context Select' : 'Search Text Change',\n          label: contextChoice ? contextChoice.name : searchText\n        })\n      }\n    }, [searchText, currentTab, contextChoice])\n\n    const handleTabChange = (newTab) => {\n      setContextChoice(null)\n      setCurrentTab(newTab)\n    }\n    const handleContextChoiceChange = (newContextChoice) => {\n      setContextChoice(newContextChoice)\n    }\n    const handleSearchTextChange = (text) => {\n      setSearchText(text)\n      setContextChoice(null)\n    }\n\n    let withContextQuery = null\n    let withSearchQuery = null\n\n    switch (currentTab) {\n      case TABS.KEYWORD:\n        withContextQuery = (Wrapped) => Wrapped\n        withSearchQuery = datastore.graphql.queries.withKeywordSearch\n        break\n      case TABS.TAG:\n        withContextQuery = datastore.graphql.queries.withTagSearch\n        withSearchQuery = datastore.graphql.queries.withTagSeries\n        break\n      case TABS.LOCATION:\n        withContextQuery = datastore.graphql.queries.withGeoCode\n        // withSearchQuery = withGeoSearch\n        break\n      case TABS.USER:\n        withContextQuery = datastore.graphql.queries.withUserSearch\n        withSearchQuery = datastore.graphql.queries.withUserSeries\n        break\n      default:\n        break\n    }\n\n    const ComposedSearch = useMemo(() => withSearchQuery\n      ? compose(\n        withContextQuery,\n        withSearchQuery\n      )(Wrapped)\n      : withContextQuery(Wrapped), [withContextQuery, withSearchQuery])\n\n    return <ComposedSearch {...{ currentTab, searchText, contextChoice }}\n      actions={{\n        onMapClick: globalActions.jumpToMap,\n        onResultClick: globalActions.jumpToSeriesView,\n        setContextChoice: handleContextChoiceChange,\n        fetchMore: fetchMore,\n        setCurrentTab: handleTabChange,\n        setSearchText: handleSearchTextChange\n      }}\n    />\n  }\n  Inner.propTypes = {\n    searchResults: PropTypes.array,\n    contextResults: PropTypes.array,\n    defaultTab: PropTypes.any,\n    defaultText: PropTypes.string,\n    loading: PropTypes.bool,\n    fetchMore: PropTypes.func\n  }\n  return Inner\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { current: { search, activeSeries } } = state.home\n  return {\n    defaultTab: search ? search.tab : null,\n    defaultText: search ? search.text : null,\n    activeSeries\n  }\n}\n\nexport default compose(\n  connect(\n    mapStateToProps\n  ),\n  withSearchConnect\n)\n","import React, { useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport ReactGA from 'react-ga'\n// import log from 'loglevel'\n\nimport { compose } from 'react-apollo'\n// import { print } from 'graphql/language/printer'\nimport datastore from '@morphoto/datastore'\nimport { AppContext } from '@morphoto/client-common'\n\nconst withProfileConnect = Wrapped => {\n  const Inner = ({ data }) => {\n    const { seriesQ, watchedSeriesQ } = data\n    const { currentUser, globalActions } = useContext(AppContext)\n\n    const mySeries = seriesQ && seriesQ.userSeries && seriesQ.userSeries.seriesSummaries\n      ? seriesQ.userSeries.seriesSummaries.filter(s => s.seriesStatus !== 'deleted') || []\n      : []\n    const watchingSeries = watchedSeriesQ && watchedSeriesQ.arraySeries ? watchedSeriesQ.arraySeries : []\n    // log.info('ProfileConnect', { mySeries, watchedSeriesQ, watchingSeries })\n\n    const loading = Boolean(\n      (seriesQ && seriesQ.loading) ||\n    (watchedSeriesQ && watchedSeriesQ.loading)\n    )\n\n    useEffect(() => {\n      ReactGA.pageview('profile')\n    }, [])\n\n    return <Wrapped user={currentUser} {...{\n      loading,\n      mySeries,\n      watchingSeries,\n      actions: {\n        jumpToSeries: globalActions.jumpToSeriesView,\n        jumpToMap: globalActions.jumpToSeriesMap\n      }\n    }} />\n  }\n\n  Inner.propTypes = {\n    data: PropTypes.object, // from graphql\n    jumpToSeries: PropTypes.func, // from redux\n    jumpToMap: PropTypes.func // from redux\n  }\n  return Inner\n}\n\nexport default compose(\n  datastore.graphql.queries.withuserSeriesQuery,\n  // withMyPhotosQuery,\n  datastore.graphql.queries.withMyWatchedSeriesQuery,\n  withProfileConnect\n)\n","import React, { useRef, useState, useEffect, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { compose } from 'react-apollo'\nimport { AppContext } from '@morphoto/client-common'\nimport ReactGA from 'react-ga'\nimport datastore from '@morphoto/datastore'\n\n// import log from 'loglevel'\n\nconst POLL_INTERVAL = 20 // (seconds)\nconst FEED_LIMIT = 5 // (items to load)\n\nconst withFeedConnect = Wrapped => {\n  const Component = ({ data, loading, loadingNewest, loadingMore, gqlActions }) => {\n    const timerRef = useRef()\n    const lastCheckRef = useRef()\n    const [lastCheck, setLastCheck] = useState(null)\n    const { online, globalActions } = useContext(AppContext)\n    lastCheckRef.current = lastCheck\n\n    // Initiate the polling process. We simply update the timestamp every N seconds\n    useEffect(() => {\n      function ping () {\n        if (timerRef.current) {\n          // log.info('FeedConnect timerRef.current', timerRef.current, POLL_INTERVAL)\n          if (online.isOnline) gqlActions.fetchNewest()\n          setLastCheck(String(Date.now() - POLL_INTERVAL * 1000))\n        }\n      }\n      if (!timerRef.current) timerRef.current = setInterval(ping, POLL_INTERVAL * 1000)\n      return () => {\n        if (timerRef.current) {\n          // log.info('FeedConnect clear poll timer')\n          clearInterval(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }, [gqlActions, online.isOnline])\n\n    useEffect(() => {\n      ReactGA.pageview('feed')\n    }, [])\n\n    const events = data.myFeed ? data.myFeed.feed.filter(s => s.seriesStatus !== 'deleted') || [] : []\n    const window = data.myFeed ? data.myFeed.window.map(v => parseInt(v, 10)) || [null, null] : [null, null]\n\n    return (\n      <Wrapped {...{ events, loading, window }}\n        actions={{\n          onImageClick: globalActions.jumpToSeriesView,\n          onProfileClick: globalActions.jumpToUser,\n          onMapClick: globalActions.jumpToSeriesMap,\n          fetchMore: gqlActions.fetchMore,\n          fetchNewest: gqlActions.fetchNewest\n        }}\n      />\n    )\n  }\n  Component.propTypes = {\n    data: PropTypes.object, // from graphql\n    loading: PropTypes.bool, // from graphql\n    loadingNewest: PropTypes.bool, // from graphql\n    loadingMore: PropTypes.bool, // from graphql\n    gqlActions: PropTypes.shape({\n      fetchMore: PropTypes.func,\n      fetchNewest: PropTypes.func\n    })\n  }\n  return Component\n}\n\nexport default compose(\n  datastore.graphql.queries.withFeedQueryThunk(FEED_LIMIT),\n  withFeedConnect\n)\n","import React, { useState, useContext, useMemo, useRef, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Bottleneck from 'bottleneck'\nimport { compose } from 'react-apollo'\n\nimport { long2tile, lat2tile } from 'geotilehash'\n\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\nimport { OFFLINE_STATES } from '@morphoto/maps'\n// import log from 'loglevel'\n\nconst withOfflineData = Wrapped => {\n  const Inner = ({\n    lastMapViewport, completedDownload, viewport, setOfflineCompleted, setOfflineViewport\n  }) => {\n    const [toolState, setToolState] = useState(viewport && completedDownload ? OFFLINE_STATES.LOCKED : OFFLINE_STATES.NAVIGATING)\n    const limiterRef = useRef()\n    const { online, globalActions } = useContext(AppContext)\n\n    // Setting the bounds is what kicks off the whole process\n    const [bounds, setBounds] = useState(null)\n    // Series ids only get set when the geoQuery finishes\n    const [seriesIds, setSeriesIds] = useState(null)\n    // This is the current Series object we are putting through the query\n    const [activeSeriesId, setActiveSeriesId] = useState(null)\n    const [seriesPhotos, setSeriesPhotos] = useState([])\n\n    const [tileTick, setTileTick] = useState([0, 0])\n    const [seriesTick, setSeriesTick] = useState([0, 0])\n    const [seriesPhotoTick, setSeriesPhotoTick] = useState([0, 0])\n\n    // We're dealing in asynchronous so we need a ref to make sure we're usign the current values\n    const tileTickRef = useRef()\n    tileTickRef.current = { tileTick, seriesTick, seriesPhotoTick, seriesIds, seriesPhotos }\n\n    const onTileTick = () => setTileTick([tileTickRef.current.tileTick[0] + 1, tileTickRef.current.tileTick[1]])\n    const onTileAdd = (num) => setTileTick([tileTickRef.current.tileTick[0], tileTickRef.current.tileTick[1] + num])\n    const onSeriesPhotoTick = () => {\n      // LimiterRef is a good proxy for isComponentMounted\n      if (limiterRef.current) {\n        setSeriesPhotoTick([tileTickRef.current.seriesPhotoTick[0] + 1, tileTickRef.current.seriesPhotoTick[1]])\n      }\n    }\n    const onSeriesPhotoAdd = (num) => setSeriesPhotoTick([tileTickRef.current.seriesPhotoTick[0], tileTickRef.current.seriesPhotoTick[1] + num])\n\n    const onSeriesTick = useCallback((urls) => {\n      const theTick = tileTickRef.current.seriesTick\n      const theIds = tileTickRef.current.seriesIds.ids\n      const thePhotos = tileTickRef.current.seriesPhotos\n      if (urls) {\n        let addCount = 0\n        urls.forEach(url => {\n          if (thePhotos.indexOf(url) === -1) {\n            addCount++\n            setSeriesPhotos([...thePhotos, url])\n            limiterRef.current.schedule(() => makeRequest('GET', url))\n              .then(onSeriesPhotoTick)\n            // Maybe we should do something different on errors (but what?)\n              .catch(onSeriesPhotoTick)\n          }\n        })\n        onSeriesPhotoAdd(addCount)\n      }\n      // now kick off the next series\n      if (theTick && theIds[theTick[0]]) {\n        setActiveSeriesId(theIds[theTick[0] + 1])\n        setSeriesTick([theTick[0] + 1, theTick[1]])\n      }\n      else {\n      // We are done the series\n      }\n    }, [])\n\n    const finalState = useMemo(() => online.isOnline ? toolState : OFFLINE_STATES.OFFLINE, [online.isOnline, toolState])\n\n    const geoSeriesQuery = useMemo(() => <GeoQuery bounds={bounds} setSeriesIds={setSeriesIds} />, [bounds])\n    const wholeSeriesQuery = useMemo(() => <WholeSeriesConnect id={activeSeriesId} onDone={onSeriesTick} />, [activeSeriesId, onSeriesTick])\n\n    const onStart = (bounds, viewport) => {\n      setToolState(OFFLINE_STATES.DOWNLOADING)\n      setBounds(bounds)\n      setOfflineViewport(viewport)\n    }\n\n    const onDone = useCallback(() => {\n      setToolState(OFFLINE_STATES.LOCKED)\n      setOfflineCompleted(true)\n    }, [setOfflineCompleted])\n\n    const onCancel = () => {\n      setToolState(OFFLINE_STATES.CANCELED)\n      setBounds(null)\n      setSeriesIds(null)\n      setTileTick([0, 0])\n      setSeriesTick([0, 0])\n      setSeriesPhotoTick([0, 0])\n      setSeriesPhotos([])\n      if (limiterRef.current) {\n        limiterRef.current.stop({ dropWaitingJobs: true })\n        limiterRef.current = null\n        limiterRef.current = new Bottleneck({ maxConcurrent: 5 })\n      }\n    }\n\n    // Initialize the bottleNeck\n    useEffect(() => {\n      limiterRef.current = new Bottleneck({ maxConcurrent: 5 })\n      return () => {\n        limiterRef.current = null\n      }\n    }, [])\n\n    // This is a little taxing so we keep it async\n    useEffect(() => {\n      if (bounds) {\n        const tiles = getTiles(bounds, [0, config.home.Offline.highestOfflineTileZoom])\n        const length = tiles.length\n        if (length === 0) return\n        onTileAdd(length)\n        tiles.forEach(tile => {\n          if (limiterRef.current) {\n            limiterRef.current.schedule(() => makeRequest('GET', tile))\n              .then(onTileTick)\n            // Maybe we should do something different on errors (but what?)\n              .catch(onTileTick)\n          }\n        })\n      }\n    }, [bounds])\n\n    // If we see series then kick off that cascade\n    useEffect(() => {\n    // log.info('OfflineMap:: kicking off the series loading', { seriesTick, seriesIds })\n      if (seriesIds && seriesIds.ids) {\n      // Kick off the series loading\n        if (seriesIds.ids.length > 0) setActiveSeriesId(seriesIds.ids[0])\n        setSeriesTick([0, seriesIds.ids.length])\n        setSeriesPhotoTick([0, 0])\n      }\n    }, [seriesIds])\n\n    useEffect(() => {\n      const newTotal = [tileTick[0] + seriesTick[0] + seriesPhotoTick[0], tileTick[1] + seriesTick[1] + seriesPhotoTick[1]]\n      if (newTotal[1] > 0 && newTotal[0] === newTotal[1]) onDone()\n    }, [tileTick, seriesTick, seriesPhotoTick, onDone])\n\n    return (\n      <React.Fragment>\n        {wholeSeriesQuery}\n        {geoSeriesQuery}\n        <Wrapped\n          initViewport={viewport || lastMapViewport}\n          progress={{ tileTick, seriesTick, seriesPhotoTick }}\n          toolState={finalState}\n          actions={{\n            onMenuBack: () => {\n              onCancel()\n              globalActions.onMenuBack()\n            },\n            onStartDownload: onStart,\n            onCancel: onCancel,\n            onCancelComplete: () => {\n              setToolState(OFFLINE_STATES.NAVIGATING)\n            },\n            onUnlock: () => {\n              setToolState(OFFLINE_STATES.NAVIGATING)\n              setOfflineCompleted(false)\n            }\n          }}\n        />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n  // All from redux\n    lastMapViewport: PropTypes.object,\n    completedDownload: PropTypes.bool,\n    viewport: PropTypes.object,\n    setOfflineCompleted: PropTypes.func.isRequired,\n    setOfflineViewport: PropTypes.func.isRequired\n  }\n  return Inner\n}\n\n// We're using graphql() HOC because it's convenient but it doesn't need to render anything\nconst WholeSeriesConnect = datastore.graphql.queries.withGetSeriesForOffline(() => null)\nconst GeoQuery = datastore.graphql.queries.withGeoSearch(() => null)\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const lastMapViewport = state.map.slice(-1).pop()\n  const { completedDownload, viewport } = state.offline\n  return { lastMapViewport, completedDownload, viewport }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setOfflineCompleted: (bVal) => {\n    dispatch(datastore.redux.actions.setOfflineCompleted(bVal))\n  },\n  setOfflineViewport: (viewport) => {\n    dispatch(datastore.redux.actions.setOfflineViewport(viewport))\n  }\n})\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withOfflineData\n)\n\n/**\n * Promisify our XMLHttpRequests\n * @param {*} method\n * @param {*} url\n */\nfunction makeRequest (method, url) {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest()\n    xhr.open(method, url)\n    xhr.onload = () => {\n      if (xhr.status >= 200 && xhr.status < 300) resolve(xhr.response)\n      else reject(new Error(xhr.statusText))\n    }\n    xhr.onerror = () => {\n      reject(new Error(xhr.statusText))\n    }\n    xhr.send()\n  })\n}\n\nexport const getTileURL = (url, zoom, x, y) => {\n  const newUrl = url + `?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`\n  return newUrl.replace('{z}/{x}/{y}', `${zoom}/${x}/${y}`)\n}\n\n/**\n * Loop over all the tiles and zoom levels and build\n * us an array of URLs\n * @param {*} bounds\n * @param {*} right\n */\nexport function getTiles (bounds, zoomRange) {\n  const tiles = []\n\n  for (let zoom = zoomRange[0]; zoom <= zoomRange[1]; zoom++) {\n    const xtileLeft = long2tile(bounds[0], zoom)\n    const xtileRight = long2tile(bounds[2], zoom)\n\n    const ytileTop = lat2tile(bounds[1], zoom)\n    const ytileBottom = lat2tile(bounds[3], zoom)\n\n    for (let x = xtileLeft; x <= xtileRight; x++) {\n      for (let y = ytileTop; y <= ytileBottom; y++) {\n        // Push both tiles\n        tiles.push(getTileURL(process.env.REACT_APP_TILEURL_SAT, zoom, x, y))\n        tiles.push(getTileURL(process.env.REACT_APP_TILEURL_TOPO, zoom, x, y))\n      }\n    }\n  }\n  return tiles\n  // log.info('Starting Coords', { tiles, top, left, bottom, right })\n}\n","export default require('./MyFeed').default;\nexport { default as FeedItem } from './FeedItem';\nexport { default as FeedEnder } from './FeedEnder';","export default require('./MyProfile').default;","import React, { useState } from 'react'\n// import PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { ErrorScreen, ERROR_SEND_STATES } from '@morphoto/ui'\n// import { config } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\n// import log from 'loglevel'\n\nconst ErrorConnect = (props) => {\n  const [state, setState] = useState(ERROR_SEND_STATES.UNSENT)\n  // log.info('ErrorConnect props', props)\n  const Wrapped = datastore.graphql.queries.withReportBugMutation(ErrorScreen)\n  return <Wrapped {...props} setState={setState} sendState={state} />\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { map, home, uploader, ...other } = state\n  const newMap = map.slice(-5) // only the last 5 map states come through\n  // log.info('ErrorConnect mapStateToProps', { state, props })\n  return {\n    reduxState: {\n      ...other,\n      map: newMap,\n      home\n    }\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ErrorConnect)\n","import React, { useContext, useEffect, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport log from 'loglevel';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { AppSettings } from '@morphoto/ui';\nimport { BottomBar, OfflineBar } from '@morphoto/navigation';\nimport { QRReader } from '@morphoto/camera';\nimport { AppContext, config } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\nvar STATES = config.home.AppStateTypes;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    outerRoot: {\n      height: '100%',\n      overflow: 'hidden'\n    },\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    offlineBar: {\n      flex: '0 0'\n    },\n    activeWrapper: {\n      overflow: 'hidden',\n      flexGrow: 1,\n      flexShrink: 1,\n      height: '100%'\n    },\n    uploaderContainer: {\n      zIndex: 100,\n      flex: '0 0'\n    }\n  };\n});\n\nvar Home = function Home(_ref) {\n  var components = _ref.components,\n      domain = _ref.domain;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      signedIn = _useContext.signedIn,\n      globalActions = _useContext.globalActions,\n      device = _useContext.device,\n      currentUser = _useContext.currentUser;\n\n  var Upload = components.upload;\n  useEffect(function () {\n    if (!signedIn && [STATES.MAP, STATES.SEARCH, STATES.SERIES, STATES.QRCAPTURE, STATES.SETTINGS, STATES.OFFLINE_DOWNLOAD].indexOf(domain) < 0) globalActions.setHomeState(STATES.MAP);\n  }, [domain, globalActions.setHomeState, signedIn]);\n  var showBottomBar = true;\n  var activeProps = {};\n  useLayoutEffect(function () {\n    if (device.ios) {\n      log.info('Disabling Pinch on ios');\n\n      var touchMove = function touchMove(e) {\n        if (Math.abs(e.scale - 1) > 0.02) {\n          e.preventDefault();\n          document.body.style.zoom = 0.99;\n        }\n      };\n\n      document.addEventListener('touchmove', touchMove, false);\n      return function () {\n        document.removeEventListener('touchmove', touchMove, false);\n      };\n    }\n  }, [device.ios]);\n  var ActiveComponent = components.feed;\n  var theme = themes.home;\n\n  switch (domain) {\n    case STATES.FEED:\n      ActiveComponent = components.feed;\n      break;\n\n    case STATES.MAP:\n      ActiveComponent = components.map;\n      break;\n\n    case STATES.PROFILE:\n      activeProps = {\n        currentUser: currentUser\n      };\n      ActiveComponent = components.profile;\n      break;\n\n    case STATES.SEARCH:\n      ActiveComponent = components.search;\n      break;\n\n    case STATES.SERIES:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.NEW_SERIES_CAMERA:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.OFFLINE_DOWNLOAD:\n      ActiveComponent = components.offline;\n      showBottomBar = false;\n      break;\n\n    case STATES.NEW_SERIES_LIBRARY:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.QRCAPTURE:\n      ActiveComponent = QRReader;\n      showBottomBar = false;\n      activeProps = {\n        onCapture: globalActions.onQRCapture,\n        onMenuBack: globalActions.onMenuBack,\n        isIos: device.ios\n      };\n      break;\n\n    case STATES.SETTINGS:\n      ActiveComponent = AppSettings;\n      showBottomBar = false;\n      activeProps = {\n        onMenuBack: globalActions.onMenuBack\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ThemeProvider, {\n    theme: themes.home\n  }, React.createElement(\"div\", {\n    className: classes.outerRoot\n  }, React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(OfflineBar, {\n    className: classes.offlineBar\n  }), React.createElement(\"div\", {\n    className: classes.activeWrapper\n  }, React.createElement(ThemeProvider, {\n    theme: theme\n  }, React.createElement(ActiveComponent, activeProps))), showBottomBar && React.createElement(BottomBar, {\n    domain: domain\n  }), React.createElement(Upload, {\n    className: classes.uploaderContainer\n  }), components.installPrompt)));\n};\n\nHome.propTypes = {\n  domain: PropTypes.oneOf(Object.values(STATES)),\n  components: PropTypes.shape({\n    upload: PropTypes.any.isRequired,\n    series: PropTypes.any.isRequired,\n    map: PropTypes.any.isRequired,\n    search: PropTypes.any.isRequired,\n    profile: PropTypes.any.isRequired,\n    feed: PropTypes.any.isRequired,\n    offline: PropTypes.any.isRequired,\n    installPrompt: PropTypes.any\n  })\n};\nexport default Home;","import Home from './Home';\nexport default Home;","import React, { useEffect, useRef, useMemo, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { point, bbox as bboxFunc, buffer } from '@turf/turf'\nimport { Query, ApolloProvider, compose } from 'react-apollo'\nimport { connect } from 'react-redux'\n\nimport ReactGA from 'react-ga'\nimport themes from '@morphoto/themes'\nimport { ThemeProvider } from '@material-ui/styles'\n\nimport datastore from '@morphoto/datastore'\nimport { useAuthentication } from '@morphoto/client-auth'\nimport { useShowAddToHome } from '@morphoto/pwainstall'\nimport { AppContextProvider, ErrorBoundary, config } from '@morphoto/client-common'\nimport { decodeShareUrl, graphqlAPI } from '@morphoto/common'\n\nimport withUploadConnect from './withUploadConnect'\nimport withSeriesConnect from './withSeriesConnect'\nimport withHomeMap from './withHomeMap'\nimport withSearchConnect from './withSearchConnect'\nimport withProfileConnect from './withProfileConnect'\nimport withFeedConnect from './withFeedConnect'\nimport withOfflineData from './withOfflineData'\n\nimport MyFeed from '@morphoto/feed'\nimport { UploadControl, LoadingContainerThemed } from '@morphoto/ui'\nimport Search from '@morphoto/search'\nimport MyProfile from '@morphoto/profile'\nimport { HomeMap, OfflineMap } from '@morphoto/maps'\nimport PhotoSeries from '@morphoto/photoseries'\n\nimport ErrorConnect from './Error.connect'\n// import { IntlWrapper } from '../translations'\nimport Home from '@morphoto/home'\nimport log from 'loglevel'\n\nconst { home: homeConfig, tagColors } = config\n\n// Analytics.configure(config.aws)\n// Analytics.record('some-event-name')\n\n// Set up our google analytics\nconst gac = {}\nif (process.env.NODE_ENV !== 'production') {\n  gac.debug = false\n  gac.gaOptions = {\n    cookieDomain: 'none',\n    siteSpeedSampleRate: 100\n  }\n}\n// log.info('ReactGA.initialize', gac)\nReactGA.initialize(config.analytics.token, gac)\n\nconst components = {\n  upload: withUploadConnect(UploadControl),\n  series: withSeriesConnect(PhotoSeries),\n  map: withHomeMap(HomeMap),\n  search: withSearchConnect(Search),\n  profile: withProfileConnect(MyProfile),\n  feed: withFeedConnect(MyFeed),\n  offline: withOfflineData(OfflineMap)\n}\n\n/**\n * HOC for AppContext and ApolloProvider\n */\nexport const withApolloAuthProvider = Wrapped => {\n  const AuthProvider = ({ reduxProps, ...reduxActions }) => {\n    const flags = reduxProps.flags\n    // log.info('withApolloAuthProvider', props)\n    const { isGod, signedIn, authData, signOut, authScreen, forceSignIn } = useAuthentication(flags.useLoggedOut, reduxActions.setUseOffline)\n    const { client: apolloClient, done: apolloDone, currState: apolloState } = datastore.graphql.useGraphQL()\n\n    // This triggers all the PWA Goodness\n    const { installPrompt, addToHomeScreen } = useShowAddToHome(flags.install, reduxActions.dismissInstall)\n\n    // A little tracking goodness\n    useEffect(() => {\n      ReactGA.pageview('initial render')\n    }, [])\n\n    // If the user hasn't decided to be anonymous or sign in yet show them the login screen\n    // log.info('Rendering AppConnect', { flags, responsive, props, signedIn, isGod, authData })\n    useEffect(() => {\n      if (signedIn === true && flags.useLoggedOut) reduxActions.setUseOffline(false)\n      else if (signedIn === false && !flags.useLoggedOut) reduxActions.setUseOffline(true)\n    }, [flags.useLoggedOut, reduxActions, signedIn])\n\n    const retryRef = useRef()\n\n    // We need to hijack the browser's history object so that hitting the back button on android\n    // doesn't close the window\n    useEffect(() => {\n      function handleBackClick () {\n        window.history.pushState({}, '')\n        reduxActions.onMenuBack()\n      }\n      window.addEventListener('popstate', handleBackClick)\n      return () => window.removeEventListener('popstate', handleBackClick)\n    }, [reduxActions])\n\n    // One time only query param parse so we can redirect them to a shared url if necessary\n    useEffect(() => {\n      try {\n        const decodedObj = decodeShareUrl(window.location.search)\n        if (decodedObj && decodedObj.type && decodedObj.s) {\n          const { type, s, p } = decodedObj\n          log.info('REDIRECTING', { type, s, p })\n          ReactGA.event({\n            category: 'user',\n            action: 'share',\n            label: window.location.search\n          })\n          switch (type) {\n            case 'series':\n              const queryVars = { activeSeries: s, initialPhoto: p }\n              if (!signedIn) reduxActions.setUseOffline(true)\n              reduxActions.setHomeState(homeConfig.AppStateTypes.SERIES, queryVars)\n              break\n            default:\n              break\n          }\n        // TODO : I think this breaks the maifest file\n        // window.history.replaceState({}, 'MorPhoto', '/')\n        }\n      }\n      catch (e) {\n        log.error(e)\n      }\n\n      //  clean up our retry ref\n      if (retryRef.current) {\n        clearTimeout(retryRef.current)\n        retryRef.current = null\n      }\n    }, [reduxActions, signedIn])\n\n    const forceSignInWrapped = useCallback(() => {\n      // Analytics.record('FORCE_SIGNIN')\n      ReactGA.event({\n        category: 'User',\n        action: 'FORCE_SIGNIN'\n      })\n      reduxActions.setUseOffline(false)\n      forceSignIn()\n    }, [reduxActions, forceSignIn])\n\n    const resetApp = useCallback(() => {\n      // Analytics.record('RESET_APP')\n      log.warn('APP RESET STARTING')\n      ReactGA.event({\n        category: 'User',\n        action: 'RESET_APP'\n      })\n      datastore.offline.imgStore.clear()\n      apolloClient.resetStore()\n      datastore.offline.stateStore.clear()\n      reduxActions.resetAllState()\n      signOut()\n      log.info('APP RESET FINISHED')\n    }, [apolloClient, signOut, reduxActions])\n\n    const staticContext = useMemo(() => ({\n      metaConfig: {},\n      tagConfigArr: [\n        {\n          id: 'freeBothType',\n          label: '',\n          color: tagColors[0],\n          allowXY: true,\n          allowNonXY: true,\n          allowAdditions: true,\n          getValuePromiseArr: [] // need to do this deeper in the code\n        }\n      ]\n    }), [])\n\n    // These are the things the rest of the app needs to find:\n    const appContext = {\n      getPhotoUrls: datastore.getPhotoUrls,\n      signedIn: Boolean(signedIn),\n      role: !signedIn\n        ? 'nonuser'\n        : isGod\n          ? 'admin'\n          : 'user',\n      cognitoUser: authData, // TODO: Need this supported by a graphql query\n      globalActions: {\n        ...reduxActions,\n        addToHomeScreen,\n        signOut,\n        forceSignIn: forceSignInWrapped,\n        resetApp\n      },\n      ...staticContext\n    }\n\n    /**\n     * NO HOOKS BELOW HERE\n     *\n     *\n     *\n     */\n\n    if (!apolloDone) return <LoadingContainerThemed spin message={datastore.graphql.APOLLOSTATES[apolloState]} />\n\n    if (signedIn === null && !flags.useLoggedOut) {\n      ReactGA.event({\n        category: 'User',\n        action: 'LOGIN_PROMPT'\n      })\n      return (\n        <ThemeProvider theme={themes.login}>\n          {authScreen}\n        </ThemeProvider>\n      )\n    }\n\n    return (\n    // We wrap the outside in an error handler\n      <ApolloProvider client={apolloClient}>\n        <Query query={graphqlAPI.queries.getUser} skip={!signedIn}>\n          {({ loading, error, data, refetch }) => {\n            if (loading) return <LoadingContainerThemed spin message='Loading: UserData' />\n            if (error) {\n              log.error(error)\n            }\n            // If there's no record for this user in the DB there's nothing left to do\n            if (signedIn && (!data || !data.user)) {\n              log.info('NO USER DATA YET', { loading, error, data })\n              if (!retryRef.current) {\n                retryRef.current = setTimeout(() => {\n                  log.info('Retrying user query')\n                  refetch()\n                }, 5000)\n              }\n              return (\n                <LoadingContainerThemed spin message='Loading: UserData' />\n              )\n            }\n            // If we've changed users then wipe the old user's stuff\n            else if (signedIn && authData.attributes.sub !== data.user.id) {\n              log.info('USER CHANGE')\n              datastore.offline.imgStore.clear()\n              apolloClient.resetStore()\n              datastore.offline.stateStore.clear()\n              reduxActions.resetAllState()\n            }\n            else if (signedIn) appContext.currentUser = data.user\n\n            components.installPrompt = installPrompt\n\n            return (\n              <AppContextProvider value={appContext}>\n                <Wrapped domain={reduxProps.domain} components={components} />\n              </AppContextProvider>\n            )\n          }}\n        </Query>\n      </ApolloProvider>\n    )\n  }\n  AuthProvider.propTypes = {\n    reduxProps: PropTypes.object,\n    reduxActions: PropTypes.object\n  }\n  return AuthProvider\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { domain } = state.home.current\n  return {\n    reduxProps: {\n      domain,\n      flags: state.flags\n    }\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setHomeState: (newDomain, newParams) => {\n    dispatch(datastore.redux.actions.setHomeState(newDomain, newParams))\n  },\n  onCameraClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.NEW_SERIES_CAMERA, { activeSeries: null }))\n  },\n  onLibraryClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.NEW_SERIES_LIBRARY, { activeSeries: null }))\n  },\n  onOfflineMenuClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.OFFLINE_DOWNLOAD))\n  },\n  onSettingsClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SETTINGS))\n  },\n  jumpToSeriesView: (seriesId, photoId) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SERIES, { activeSeries: seriesId, initialPhoto: photoId }))\n  },\n  jumpToUser: (username) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SEARCH, { search: { tab: config.home.SEARCH_TABS.USER, text: username } }))\n  },\n  jumpToMap: ({ bbox, center }) => {\n    let bounds = bbox\n    if (!bounds && center) {\n      const bufferPts = buffer(point(center), 500, { units: 'meters' })\n      bounds = bboxFunc(bufferPts)\n    }\n\n    if (bounds) {\n      dispatch(datastore.redux.actions.pushMapHistory({\n        mode: config.home.MapModeTypes.FREE,\n        bounds: bounds\n      }))\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.MAP, { activeSeries: null, initialPhoto: null }))\n    }\n  },\n  jumpToSeriesMap: (seriesId, photoId) => {\n    dispatch(datastore.redux.actions.pushMapHistory({\n      mode: config.home.MapModeTypes.FREE\n    }))\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.MAP, { activeSeries: seriesId, initialPhoto: photoId }))\n  },\n  resetAllState: () => {\n    dispatch(datastore.redux.actions.resetAllState())\n  },\n  dismissInstall: () => {\n    dispatch(datastore.redux.actions.setFlag('install', false))\n  },\n  setUseOffline: (bVal) => {\n    dispatch(datastore.redux.actions.setFlag('useLoggedOut', bVal))\n  },\n  onQRButtonClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.QRCAPTURE))\n  },\n  onMenuBack: () => {\n    dispatch(datastore.redux.actions.homeStateBack())\n  },\n  onAvatarClick: (username) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SEARCH, {\n      search: { tab: homeConfig.SEARCH_TABS.USER, text: username }\n    }))\n  },\n  onQRCapture: (type, activeSeries, initialPhoto) => {\n    switch (type) {\n      case 'series':\n        dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SERIES, { activeSeries, initialPhoto }))\n        break\n      default:\n        break\n    }\n  }\n})\n\nconst withErrorBoundary = (Wrapped) => (props) => {\n  log.info('ErrorConnect withErrorBoundary', props)\n  return (\n    <ErrorBoundary fallback={ErrorConnect}>\n      <Wrapped {...props} />\n    </ErrorBoundary>\n  )\n}\n\n/**\n * Nearly everything we do depends on who you are as a user so we commit this to state\n */\n\n// The order we compose things here matters a lot\nconst AppConnect = compose(\n  // ORDER IS CRITICAL HERE\n  datastore.redux.withReduxProvider,\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withApolloAuthProvider,\n  withErrorBoundary\n  // withContext\n)(Home)\n\nexport default AppConnect\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      }\n      else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            }\n            else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      }\n      else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppConnect from './connectors/App.connect'\nimport * as serviceWorker from './serviceWorker'\n\n// Here's our global overrides css.\n// NOTE: we don't use the JSS compilations here because mapbox feaks\n// out even though it's probably fine\nimport '@morphoto/themes/baseline.css'\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport { devSetup } from '@morphoto/client-common'\n// This is the font we need\nrequire('typeface-roboto')\n\n// This does its own process.env.NODE_ENV check\n// In production it only presents a minimal set of tools\ndevSetup()\n\nReactDOM.render(<AppConnect />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n  window.history.pushState({}, '')\n})\n\n// This is our image worker to offline cache maptiles AND series photos\nif (navigator.serviceWorker) navigator.serviceWorker.register('imgCacheWorker.js')\n","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { Actions } from '../actions';\nimport { config } from '@morphoto/client-common';\nvar mapInit = [{\n  mode: config.home.MapModeTypes.FREE,\n  viewport: {\n    latitude: 36.80191008366581,\n    longitude: -111.63999999999784,\n    zoom: 11\n  }\n}];\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : mapInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.MAP_HISTORY_CLEAR:\n      var newClearerHistory = state.length > 0 ? [[state.length - 1]] : [];\n      return newClearerHistory;\n\n    case Actions.MAP_HISTORY_POP:\n      return state.slice(0, -1);\n\n    case Actions.MAP_HISTORY_PUSH:\n      return [].concat(_toConsumableArray(state), [data]).slice(-10);\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nimport { config } from '@morphoto/client-common';\nvar homeInit = {\n  history: [],\n  current: {\n    domain: config.home.AppStateTypes.FEED\n  }\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : homeInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n  var history = state.history,\n      current = state.current;\n\n  switch (type) {\n    case Actions.HOME_STATE_BACK:\n      var newStateHistory = _toConsumableArray(history);\n\n      var newCurrentState = newStateHistory.length > 0 ? newStateHistory.pop() : homeInit.current;\n      return _objectSpread({}, state, {\n        current: newCurrentState,\n        history: newStateHistory\n      });\n\n    case Actions.HOME_CHANGE_ACTIVE_SERIES:\n      var activeSeries = data.activeSeries,\n          initialPhoto = data.initialPhoto;\n      return _objectSpread({}, state, {\n        history: history,\n        current: _objectSpread({}, current, {\n          activeSeries: activeSeries || null,\n          initialPhoto: activeSeries && initialPhoto ? initialPhoto : null\n        })\n      });\n\n    case Actions.HOME_CHANGE_STATE:\n      var newDomain = data.newDomain,\n          params = data.params;\n      var newParams = params || {};\n      var skipSave = [config.home.AppStateTypes.QRCAPTURE, config.home.AppStateTypes.SETTINGS, config.home.AppStateTypes.OFFLINE_DOWNLOAD, config.home.AppStateTypes.NEW_SERIES_CAMERA, config.home.AppStateTypes.NEW_SERIES_LIBRARY].indexOf(current.domain) > -1;\n      var replaceState = current.domain === newDomain;\n      var newHistory = !skipSave && !replaceState ? [].concat(_toConsumableArray(history), [current]).slice(-10) : history;\n      return _objectSpread({}, state, {\n        history: newHistory,\n        current: _objectSpread({}, current, {\n          domain: newDomain\n        }, newParams)\n      });\n\n    default:\n      return state;\n  }\n});","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nexport var initState = {\n  store: [],\n  online: false,\n  uploading: false,\n  activeUpload: null\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n  var store = state.store,\n      activeUpload = state.activeUpload,\n      uploading = state.uploading;\n\n  switch (type) {\n    case Actions.UPLOADER_QUEUE:\n      if (!activeUpload) {\n        return _objectSpread({}, state, {\n          activeUpload: data\n        });\n      } else {\n        return _objectSpread({}, state, {\n          store: [].concat(_toConsumableArray(store), [data])\n        });\n      }\n\n    case Actions.UPLOADER_SET_ONLINE:\n      return _objectSpread({}, state, {\n        online: Boolean(data),\n        uploading: false,\n        activeUpload: data ? state.activeUpload : null\n      });\n\n    case Actions.UPLOADER_SET_UPLOADING:\n      if (uploading !== data) {\n        return _objectSpread({}, state, {\n          uploading: data\n        });\n      } else {\n        return state;\n      }\n\n    case Actions.UPLOADER_COMPLETE:\n      if (store.length === 0) {\n        return _objectSpread({}, state, {\n          activeUpload: null,\n          uploading: false\n        });\n      } else {\n        var newStore = _toConsumableArray(store);\n\n        var newActive = newStore.pop();\n        return _objectSpread({}, state, {\n          store: newStore,\n          activeUpload: newActive,\n          uploading: true\n        });\n      }\n\n    case Actions.UPLOADER_UPDATE_PROGRESS:\n      if (activeUpload && activeUpload.id) {\n        return _objectSpread({}, state, {\n          online: true,\n          uploading: true,\n          activeUpload: _objectSpread({}, activeUpload, {}, data)\n        });\n      } else {\n        return state;\n      }\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nimport { isIos } from '@morphoto/client-common';\nimport log from 'loglevel';\nvar defaultFlags = {\n  iOSWarning: isIos(),\n  install: true,\n  useLoggedOut: false\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultFlags;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  if (!action) return state;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.SETFLAG:\n      var flagName = data.flagName,\n          flagVal = data.flagVal;\n\n      if (Boolean(flagVal) !== flagVal) {\n        log.warn(\"flag: '\".concat(flagName, \"' must be a boolean\"));\n        return state;\n      }\n\n      return _objectSpread({}, state, _defineProperty({}, flagName, flagVal));\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nvar offlineInit = {\n  completedDownload: false,\n  viewport: null\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : offlineInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  if (!action) return state;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.OFFLINE_VIEWPORT_SAVE:\n      return _objectSpread({}, state, {\n        viewport: data\n      });\n\n    case Actions.OFFLINE_SET_STATUS:\n      return _objectSpread({}, state, {\n        completedDownload: data\n      });\n\n    default:\n      return state;\n  }\n});","import { combineReducers } from 'redux';\nimport map from './map';\nimport home from './home';\nimport uploader from './uploader';\nimport flags from './flags';\nimport offline from './offline';\nimport log from 'loglevel';\nvar appReducer = combineReducers({\n  map: map,\n  home: home,\n  uploader: uploader,\n  flags: flags,\n  offline: offline\n});\n\nvar rootReducer = function rootReducer(state, action) {\n  if (action.type === 'RESET_ALL_STATE') {\n    log.warn('RESETTING LOCAL REDUX STATE');\n    state = undefined;\n  }\n\n  return appReducer(state, action);\n};\n\nexport default rootReducer;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from './actions';\nimport { initState } from './reducers/uploader';\nimport s3Upload from '../s3Upload';\nimport log from 'loglevel';\nexport default (function (_ref) {\n  var getState = _ref.getState,\n      dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      var _getUploadState = getUploadState(getState),\n          online = _getUploadState.online,\n          uploading = _getUploadState.uploading,\n          activeUpload = _getUploadState.activeUpload;\n\n      log.info('queueMiddleware: INIT', {\n        online: online,\n        action: action,\n        uploading: uploading,\n        activeUpload: activeUpload,\n        state: getState()\n      });\n\n      if (action.type.indexOf('persist/REHYDRATE') === 0) {\n        try {\n          var newAction = _objectSpread({}, action);\n\n          action.payload.uploader.uploading = false;\n          action.payload.uploader.online = false;\n          log.info('queueMiddleware: REHYDRATE', {\n            action: action,\n            newAction: newAction\n          });\n          return next(newAction);\n        } catch (_unused) {\n          return next(action);\n        }\n      }\n\n      function kickoff(uploadObj) {\n        log.info('queueMiddleware: kickoff', {\n          uploadObj: uploadObj\n        });\n\n        var updateUploadProgress = function updateUploadProgress(newProgress) {\n          log.info('queueMiddleware: updateUploadProgress', {\n            online: online,\n            uploading: uploading,\n            activeUpload: activeUpload,\n            newProgress: newProgress\n          });\n          dispatch({\n            type: Actions.UPLOADER_UPDATE_PROGRESS,\n            data: newProgress\n          });\n        };\n\n        var completeActiveUpload = function completeActiveUpload() {\n          log.info('queueMiddleware completeActiveUpload', {\n            online: online,\n            uploading: uploading,\n            activeUpload: activeUpload\n          });\n          dispatch({\n            type: Actions.UPLOADER_COMPLETE\n          });\n        };\n\n        var failRetry = function failRetry() {\n          log.info('queueMiddleware: failRetry', {\n            online: online,\n            uploading: uploading,\n            activeUpload: activeUpload\n          });\n          var newState = getUploadState(getState);\n\n          if (newState.activeUpload) {\n            log.info('queueMiddleware: failRetry DISPATCHING', {\n              online: online,\n              uploading: uploading,\n              activeUpload: activeUpload\n            });\n            dispatch({\n              type: Actions.UPLOADER_COMPLETE\n            });\n            updateUploadProgress({\n              progress: 0,\n              retry: newState.activeUpload.retry > -1 ? newState.activeUpload.retry + 1 : 1\n            });\n          }\n        };\n\n        dispatch({\n          type: Actions.UPLOADER_SET_UPLOADING,\n          data: true\n        });\n        s3Upload(uploadObj, updateUploadProgress, completeActiveUpload, failRetry);\n      }\n\n      if (!uploading && action.type === Actions.UPLOADER_QUEUE && (!activeUpload || !activeUpload.id)) {\n        log.info('queueMiddleware: KICKOFF NEW', {\n          uploading: uploading,\n          activeUpload: activeUpload\n        });\n        kickoff(action.data);\n      } else if (!uploading && action.type === Actions.UPLOADER_SET_ONLINE && action.data === true) {\n        log.info('queueMiddleware: UPLOADER_SET_ONLINE', {\n          uploading: uploading,\n          activeUpload: activeUpload\n        });\n\n        if (!uploading && activeUpload && activeUpload.id && activeUpload.expires && Date.now() < activeUpload.expires) {\n          kickoff(activeUpload);\n        } else if (activeUpload && (!activeUpload.id || !activeUpload.expires)) {\n          log.info('queueMiddleware: UPLOADER_COMPLETE', {\n            uploading: uploading,\n            activeUpload: activeUpload\n          });\n          dispatch({\n            type: Actions.UPLOADER_COMPLETE\n          });\n        }\n      }\n\n      return next(action);\n    };\n  };\n});\n\nfunction getUploadState(getState) {\n  try {\n    var currState = getState();\n    var uploadState = currState['uploader'];\n    return uploadState || initState;\n  } catch (_unused2) {\n    return initState;\n  }\n}","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport { stateStore } from '../offline';\nimport queueMiddleware from './queueMiddleware';\nvar persistConfig = {\n  key: 'root',\n  storage: stateStore\n};\nvar persistedReducer = persistReducer(persistConfig, rootReducer);\n\nvar configureStoreDev = function configureStoreDev(preloadedState) {\n  var _require = require('redux-devtools-extension'),\n      devToolsEnhancer = _require.devToolsEnhancer;\n\n  var _require2 = require('redux-logger'),\n      createLogger = _require2.createLogger;\n\n  var store = createStore(persistedReducer, preloadedState, compose(applyMiddleware(thunk, queueMiddleware, createLogger()), devToolsEnhancer()));\n\n  if (module.hot) {\n    module.hot.accept('./reducers', function () {\n      store.replaceReducer(rootReducer);\n    });\n  }\n\n  return store;\n};\n\nvar configureStoreProd = function configureStoreProd(preloadedState) {\n  var store = createStore(persistedReducer, preloadedState, compose(applyMiddleware(thunk, queueMiddleware)));\n  return store;\n};\n\nexport default (function () {\n  var store = process.env.NODE_ENV === 'production' ? configureStoreProd() : configureStoreDev();\n  return {\n    store: store,\n    persistor: persistStore(store)\n  };\n});","import React from 'react';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { Provider } from 'react-redux';\nimport storeConfig from './storeConfig';\nimport { LoadingContainerThemed } from '@morphoto/ui';\n\nvar withReduxProvider = function withReduxProvider(BaseComponent) {\n  return function (props) {\n    var _storeConfig = storeConfig(),\n        store = _storeConfig.store,\n        persistor = _storeConfig.persistor;\n\n    return React.createElement(Provider, {\n      store: store\n    }, React.createElement(PersistGate, {\n      loading: React.createElement(LoadingContainerThemed, {\n        spin: true,\n        message: \"Loading State...\"\n      }),\n      persistor: persistor\n    }, React.createElement(BaseComponent, props)));\n  };\n};\n\nexport default withReduxProvider;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport log from 'loglevel';\nexport var withFeedQueryThunk = function withFeedQueryThunk(feedLimit) {\n  return graphql(graphqlAPI.queries.getMyFeed, {\n    props: function props(_ref) {\n      var data = _ref.data;\n      if (data.error) log.error(data.error);\n      var loadingNewest = false;\n      var loadingMore = false;\n      log.info('withFeedQuery', data);\n\n      var fetchNewest = function fetchNewest() {\n        loadingNewest = true;\n\n        if (data.myFeed && !data.loading) {\n          data.fetchMore({\n            variables: _objectSpread({}, data.variables, {\n              start: data.myFeed.window[1]\n            }),\n            updateQuery: function updateQuery(prev, _ref2) {\n              var fetchMoreResult = _ref2.fetchMoreResult;\n              loadingNewest = false;\n              return {\n                myFeed: _objectSpread({}, fetchMoreResult.myFeed, {\n                  feed: [].concat(_toConsumableArray(fetchMoreResult.myFeed.feed), _toConsumableArray(prev.myFeed.feed)),\n                  window: [prev.myFeed.window[0], fetchMoreResult.myFeed.window[1]]\n                })\n              };\n            }\n          });\n        }\n      };\n\n      var fetchMore = function fetchMore() {\n        loadingMore = true;\n\n        if (data.myFeed) {\n          data.fetchMore({\n            variables: _objectSpread({}, data.variables, {\n              end: data.myFeed.window[0]\n            }),\n            updateQuery: function updateQuery(prev, _ref3) {\n              var fetchMoreResult = _ref3.fetchMoreResult;\n              loadingMore = false;\n              return {\n                myFeed: _objectSpread({}, fetchMoreResult.myFeed, {\n                  feed: [].concat(_toConsumableArray(prev.myFeed.feed), _toConsumableArray(fetchMoreResult.myFeed.feed)),\n                  window: [fetchMoreResult.myFeed.window[0], prev.myFeed.window[1]]\n                })\n              };\n            }\n          });\n        }\n      };\n\n      return {\n        data: data,\n        loading: data.loading,\n        loadingMore: loadingMore,\n        loadingNewest: loadingNewest,\n        gqlActions: {\n          fetchNewest: fetchNewest,\n          fetchMore: fetchMore\n        }\n      };\n    },\n    options: function options(_ref4) {\n      var activeSeries = _ref4.activeSeries;\n      return {\n        variables: {\n          limit: feedLimit\n        }\n      };\n    }\n  });\n};","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport log from 'loglevel';\nimport { config } from '@morphoto/client-common';\nexport var withGetSeriesForOffline = graphql(graphqlAPI.queries.getWholeSeries, {\n  skip: function skip(_ref) {\n    var id = _ref.id;\n    return !id;\n  },\n  props: function props(_ref2) {\n    var data = _ref2.data,\n        ownProps = _ref2.ownProps;\n    if (data.error) log.error(data.error);\n    var series = null;\n\n    try {\n      if (!data.loading && !data.error) {\n        series = data.series;\n        var urls = [];\n        urls.push(series.createdUser.gravatar);\n        urls.push(series.updatedUser.gravatar);\n        series.photos.forEach(function (ph) {\n          urls.push(ph.createdUser.gravatar);\n          urls.push(ph.updatedUser.gravatar);\n          config.home.Offline.seriesImgsToCache.map(function (size) {\n            return urls.push(\"\".concat(ph.paths.base).concat(ph.paths[size]));\n          });\n        });\n        ownProps.onDone(_toConsumableArray(new Set(urls)));\n      }\n    } catch (e) {\n      log.info('OfflineMap::withGetSelectedQuery:: error', {\n        data: data,\n        e: e\n      });\n      log.error(e);\n    }\n\n    return {\n      data: data,\n      loading: data.loading,\n      series: series\n    };\n  },\n  options: function options(_ref3) {\n    var id = _ref3.id;\n    return {\n      variables: {\n        id: id\n      }\n    };\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport log from 'loglevel';\nexport var withGetNewS3Credentials = graphql(graphqlAPI.queries.getNewS3Credentials, {\n  skip: function skip(_ref) {\n    var online = _ref.online,\n        activeUpload = _ref.activeUpload,\n        props = _objectWithoutProperties(_ref, [\"online\", \"activeUpload\"]);\n\n    log.info('withGetNewS3Credentials:: skipcheck', _objectSpread({\n      online: online,\n      activeUpload: activeUpload\n    }, props));\n    return !online || !activeUpload || activeUpload.expires > Date.now();\n  },\n  props: function props(_ref2) {\n    var data = _ref2.data,\n        ownProps = _ref2.ownProps;\n    if (data.error) log.error(data.error);\n    log.info('withGetNewS3Credentials:: props', {\n      data: data,\n      ownProps: ownProps\n    });\n\n    if (!data.loading) {\n      ownProps.onDone(_objectSpread({}, ownProps.activeUpload, {\n        retry: ownProps.activeUpload.retry + 1,\n        expires: Date.now() + 3300 * 1000,\n        preAuth: JSON.parse(data.s3Credentials)\n      }));\n    }\n\n    return {\n      data: data\n    };\n  },\n  options: function options(_ref3) {\n    var activeUpload = _ref3.activeUpload;\n    return {\n      variables: {\n        seriesId: activeUpload.seriesId,\n        photoId: activeUpload.id,\n        ext: activeUpload.ext\n      }\n    };\n  }\n});","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI, dates } from '@morphoto/common';\nimport log from 'loglevel';\nexport var withTagSearch = graphql(graphqlAPI.queries.tagSearch, {\n  props: function props(_ref) {\n    var data = _ref.data;\n    if (data.error) log.error(data.error);\n    var series = null;\n\n    try {\n      if (!data.loading && !data.error) series = data.series;\n    } catch (e) {\n      log.error(data);\n      log.error(e);\n    }\n\n    var contextResults = data.tags ? data.tags.map(function (_ref2) {\n      var name = _ref2.name,\n          count = _ref2.count;\n      return {\n        name: name,\n        description: \"~ \".concat(count < 10 ? count : Math.ceil(count / 10) * 10, \" Photo series tagged\")\n      };\n    }) : [];\n    return {\n      contextResults: contextResults,\n      loading: data.loading,\n      series: series\n    };\n  },\n  options: function options(_ref3) {\n    var searchText = _ref3.searchText;\n    return {\n      variables: {\n        tag: !searchText || searchText.length < 3 ? '' : searchText,\n        limit: 10\n      }\n    };\n  }\n});\nexport var withUserSearch = graphql(graphqlAPI.queries.userSearch, {\n  props: function props(_ref4) {\n    var data = _ref4.data;\n    if (data.error) log.error(data.error);\n    var series = null;\n\n    try {\n      if (!data.loading && !data.error) series = data.series;\n    } catch (e) {\n      log.error(data);\n      log.error(e);\n    }\n\n    var contextResults = data.userSearch ? data.userSearch.map(function (_ref5) {\n      var username = _ref5.username,\n          gravatar = _ref5.gravatar,\n          createdOn = _ref5.createdOn,\n          id = _ref5.id;\n      return {\n        name: username,\n        id: id,\n        description: \"Joined \".concat(dates.formatDateAgo(createdOn)),\n        gravatar: gravatar\n      };\n    }) : [];\n    return {\n      contextResults: contextResults,\n      loading: data.loading,\n      series: series\n    };\n  },\n  skip: function skip(_ref6) {\n    var searchText = _ref6.searchText;\n    return !searchText || searchText.length < 3;\n  },\n  options: function options(_ref7) {\n    var searchText = _ref7.searchText;\n    return {\n      variables: {\n        searchStr: searchText,\n        limit: 10\n      }\n    };\n  }\n});\nexport var withGeoCode = graphql(graphqlAPI.queries.geocode, {\n  props: function props(_ref8) {\n    var data = _ref8.data;\n    if (data.error) log.error(data.error);\n    var series = null;\n\n    try {\n      if (!data.loading && !data.error) series = data.series;\n    } catch (e) {\n      log.error(data);\n      log.error(e);\n    }\n\n    var contextResults = data.geocoder ? data.geocoder.map(function (_ref9) {\n      var relevance = _ref9.relevance,\n          text = _ref9.text,\n          placeName = _ref9.placeName,\n          bbox = _ref9.bbox,\n          center = _ref9.center;\n      return {\n        name: text,\n        description: placeName,\n        bbox: bbox,\n        center: center,\n        relevance: relevance\n      };\n    }) : [];\n    return {\n      contextResults: contextResults,\n      loading: data.loading,\n      series: series\n    };\n  },\n  skip: function skip(_ref10) {\n    var searchText = _ref10.searchText;\n    return !searchText || searchText.length < 3;\n  },\n  options: function options(_ref11) {\n    var searchText = _ref11.searchText;\n    return {\n      variables: {\n        search: searchText\n      }\n    };\n  }\n});\nexport var withTagSeries = graphql(graphqlAPI.queries.seriesWithTag, {\n  props: function props(_ref12) {\n    var data = _ref12.data;\n    if (data.error) log.error(data.error);\n    var series = null;\n\n    try {\n      if (!data.loading && !data.error) series = data.series;\n    } catch (e) {\n      log.error(data);\n      log.error(e);\n    }\n\n    var fetchMore = data.loading || !data.tagSeries || !data.tagSeries.nextToken ? null : function () {\n      log.info('fetchMore', data);\n      data.fetchMore({\n        variables: _objectSpread({}, data.variables, {\n          nextToken: data.tagSeries.nextToken\n        }),\n        updateQuery: function updateQuery(prev, _ref13) {\n          var fetchMoreResult = _ref13.fetchMoreResult;\n          return {\n            tagSeries: _objectSpread({}, fetchMoreResult.tagSeries, {\n              seriesSummaries: [].concat(_toConsumableArray(prev.tagSeries.seriesSummaries), _toConsumableArray(fetchMoreResult.tagSeries.seriesSummaries)).filter(function (s) {\n                return s.seriesStatus !== 'deleted';\n              })\n            })\n          };\n        }\n      });\n    };\n    var searchResults = data.tagSeries && data.tagSeries.seriesSummaries ? data.tagSeries.seriesSummaries : [];\n    return {\n      searchResults: searchResults,\n      fetchMore: fetchMore,\n      loading: data.loading,\n      series: series\n    };\n  },\n  skip: function skip(_ref14) {\n    var contextChoice = _ref14.contextChoice;\n    return !contextChoice;\n  },\n  options: function options(_ref15) {\n    var contextChoice = _ref15.contextChoice;\n    return {\n      variables: {\n        tag: contextChoice.name,\n        limit: 10\n      }\n    };\n  }\n});\nexport var withUserSeries = graphql(graphqlAPI.queries.userSeries, {\n  props: function props(_ref16) {\n    var data = _ref16.data;\n    if (data.error) log.error(data.error);\n    var series = null;\n\n    try {\n      if (!data.loading && !data.error) series = data.series;\n    } catch (e) {\n      log.error(data);\n      log.error(e);\n    }\n\n    var fetchMore = data.loading || !data.userSeries || !data.userSeries.nextToken ? null : function () {\n      log.info('fetchMore', data);\n      data.fetchMore({\n        variables: _objectSpread({}, data.variables, {\n          nextToken: data.userSeries.nextToken\n        }),\n        updateQuery: function updateQuery(prev, _ref17) {\n          var fetchMoreResult = _ref17.fetchMoreResult;\n          return {\n            userSeries: _objectSpread({}, fetchMoreResult.userSeries, {\n              seriesSummaries: [].concat(_toConsumableArray(prev.userSeries.seriesSummaries), _toConsumableArray(fetchMoreResult.userSeries.seriesSummaries)).filter(function (s) {\n                return s.seriesStatus !== 'deleted';\n              })\n            })\n          };\n        }\n      });\n    };\n    var searchResults = data.userSeries && data.userSeries.seriesSummaries ? data.userSeries.seriesSummaries : [];\n    return {\n      searchResults: searchResults,\n      fetchMore: fetchMore,\n      loading: data.loading,\n      series: series\n    };\n  },\n  skip: function skip(_ref18) {\n    var contextChoice = _ref18.contextChoice;\n    return !contextChoice;\n  },\n  options: function options(_ref19) {\n    var contextChoice = _ref19.contextChoice;\n    return {\n      variables: {\n        createdBy: contextChoice.id,\n        limit: 10\n      }\n    };\n  }\n});\nexport var withKeywordSearch = graphql(graphqlAPI.queries.keywordSearch, {\n  props: function props(_ref20) {\n    var data = _ref20.data;\n    if (data.error) log.error(data.error);\n    var series = null;\n\n    try {\n      if (!data.loading && !data.error) series = data.series;\n    } catch (e) {\n      log.error(data);\n      log.error(e);\n    }\n\n    var fetchMore = data.loading || !data.keywordSearch || !data.keywordSearch.nextToken ? null : function () {\n      log.info('fetchMore', data);\n      data.fetchMore({\n        variables: _objectSpread({}, data.variables, {\n          nextToken: data.keywordSearch.nextToken\n        }),\n        updateQuery: function updateQuery(prev, _ref21) {\n          var fetchMoreResult = _ref21.fetchMoreResult;\n          return {\n            keywordSearch: _objectSpread({}, fetchMoreResult.keywordSearch, {\n              seriesSummaries: [].concat(_toConsumableArray(prev.keywordSearch.seriesSummaries), _toConsumableArray(fetchMoreResult.keywordSearch.seriesSummaries)).filter(function (s) {\n                return s.seriesStatus !== 'deleted';\n              })\n            })\n          };\n        }\n      });\n    };\n    var searchResults = data.keywordSearch && data.keywordSearch.seriesSummaries ? data.keywordSearch.seriesSummaries : [];\n    return {\n      searchResults: searchResults,\n      fetchMore: fetchMore,\n      loading: data.loading,\n      series: series\n    };\n  },\n  skip: function skip(_ref22) {\n    var searchText = _ref22.searchText;\n    return !searchText || searchText.length < 3;\n  },\n  options: function options(_ref23) {\n    var searchText = _ref23.searchText;\n    return {\n      variables: {\n        searchStr: searchText,\n        limit: 10\n      }\n    };\n  }\n});\nexport var withGeoSearch = graphql(graphqlAPI.queries.geoSeriesIdOnly, {\n  props: function props(_ref24) {\n    var data = _ref24.data,\n        ownProps = _ref24.ownProps;\n    if (data.error) log.error(data.error);\n    log.info('OfflineMap::withGeoSearch:: ', {\n      data: data,\n      ownProps: ownProps\n    });\n\n    try {\n      if (!data.loading && !data.error && data.seriesInGeoBounds && data.seriesInGeoBounds.seriesSummaries.length > 0 && data.seriesInGeoBounds.nextToken) {\n        ownProps.setSeriesIds({\n          ids: [],\n          loading: true\n        });\n        data.fetchMore({\n          variables: _objectSpread({}, data.variables, {\n            nextToken: data.seriesInGeoBounds.nextToken\n          }),\n          updateQuery: function updateQuery(prev, _ref25) {\n            var fetchMoreResult = _ref25.fetchMoreResult;\n            return {\n              seriesInGeoBounds: _objectSpread({}, fetchMoreResult.seriesInGeoBounds, {\n                seriesSummaries: [].concat(_toConsumableArray(prev.seriesInGeoBounds.seriesSummaries), _toConsumableArray(fetchMoreResult.seriesInGeoBounds.seriesSummaries))\n              })\n            };\n          }\n        });\n      } else if (data.loading || data.error) {\n        ownProps.setSeriesIds({\n          ids: [],\n          loading: true\n        });\n      } else {\n        log.info('OfflineMap::withGeoSearch::DONE');\n\n        if (data && data.seriesInGeoBounds) {\n          ownProps.setSeriesIds({\n            ids: data.seriesInGeoBounds.seriesSummaries.map(function (s) {\n              return s.id;\n            }),\n            loading: false\n          });\n        }\n      }\n    } catch (e) {\n      log.error(data);\n      log.error(e);\n    }\n\n    return {\n      data: data,\n      loading: data.loading\n    };\n  },\n  skip: function skip(_ref26) {\n    var bounds = _ref26.bounds;\n    return !bounds;\n  },\n  options: function options(_ref27) {\n    var bounds = _ref27.bounds;\n    return {\n      variables: {\n        bounds: bounds,\n        limit: 100\n      }\n    };\n  }\n});","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport log from 'loglevel';\nexport var withGetSelectedQuery = graphql(graphqlAPI.queries.getWholeSeries, {\n  props: function props(_ref) {\n    var data = _ref.data,\n        _props = _objectWithoutProperties(_ref, [\"data\"]);\n\n    if (data.error) log.error(data.error);\n    var series = null;\n\n    try {\n      if (!data.loading && !data.error) series = data.series;\n    } catch (e) {\n      log.error('getWholeSeries:: error', {\n        data: data,\n        e: e\n      });\n    }\n\n    return {\n      data: data,\n      loading: data.loading,\n      series: series\n    };\n  },\n  skip: function skip(_ref2) {\n    var activeSeries = _ref2.activeSeries,\n        isNewSeries = _ref2.isNewSeries;\n    return !activeSeries || isNewSeries;\n  },\n  options: function options(_ref3) {\n    var activeSeries = _ref3.activeSeries;\n    return {\n      variables: {\n        id: activeSeries\n      }\n    };\n  }\n});\nexport var withAllSeries = graphql(graphqlAPI.queries.allSeries, {\n  props: function props(_ref4) {\n    var data = _ref4.data,\n        ownProps = _ref4.ownProps;\n\n    if (!data.loading && !data.error && data.allSeries && data.allSeries.seriesSummaries.length > 0 && data.allSeries.nextToken) {\n      data.fetchMore({\n        variables: _objectSpread({}, data.variables, {\n          nextToken: data.allSeries.nextToken\n        }),\n        updateQuery: function updateQuery(prev, _ref5) {\n          var fetchMoreResult = _ref5.fetchMoreResult;\n          return {\n            allSeries: _objectSpread({}, fetchMoreResult.allSeries, {\n              seriesSummaries: [].concat(_toConsumableArray(prev.allSeries.seriesSummaries), _toConsumableArray(fetchMoreResult.allSeries.seriesSummaries))\n            })\n          };\n        }\n      });\n    } else if (data.loading || data.error) {\n      ownProps.setSeriesProps(data);\n    } else {\n      ownProps.setSeriesProps(_objectSpread({}, data, {\n        readyForPolling: true\n      }));\n    }\n\n    return null;\n  },\n  options: {\n    variables: {\n      limit: 100\n    }\n  }\n});\nexport var withPollQuery = graphql(graphqlAPI.queries.pollQuery, {\n  skip: function skip(_ref6) {\n    var lastCheck = _ref6.lastCheck,\n        online = _ref6.online;\n    return !lastCheck || !online;\n  },\n  props: function props(_ref7) {\n    var data = _ref7.data,\n        _ref7$ownProps = _ref7.ownProps,\n        seriesProps = _ref7$ownProps.seriesProps,\n        updateIncrement = _ref7$ownProps.updateIncrement;\n\n    if (data.error) {\n      log.info('POLL FAIL', data.error, data);\n      log.error(data.error);\n    } else {}\n\n    if (!data.loading && data.changedSeries && data.changedSeries.seriesSummaries) {\n      var newData = data.changedSeries.seriesSummaries;\n      var oldList = seriesProps.allSeries.seriesSummaries;\n\n      if (data.changedSeries) {\n        var newSeriesSummaries = seriesProps.allSeries.seriesSummaries;\n        newData.forEach(function (_ref8) {\n          var seriesStatus = _ref8.seriesStatus,\n              polledSeries = _objectWithoutProperties(_ref8, [\"seriesStatus\"]);\n\n          if (seriesStatus === 'deleted') {\n            log.info('Polling found a series to delete: ', polledSeries.id);\n            newSeriesSummaries = oldList.filter(function (s) {\n              return s.id !== polledSeries.id;\n            });\n          } else {\n            var idx = oldList.findIndex(function (ds) {\n              return ds.id === polledSeries.id;\n            });\n\n            if (idx >= 0) {\n              log.info('Polling found a series to Update: ', polledSeries.id);\n              newSeriesSummaries = oldList.map(function (oldSeries, oldId) {\n                return oldId === idx ? polledSeries : oldSeries;\n              });\n            } else {\n              log.info('Polling found a series to add: ', polledSeries.id);\n              newSeriesSummaries = [].concat(_toConsumableArray(oldList), [polledSeries]);\n            }\n          }\n\n          seriesProps.updateQuery(function (data, options) {\n            try {\n              var _newData = _objectSpread({}, data);\n\n              _newData.allSeries.seriesSummaries = newSeriesSummaries;\n              updateIncrement();\n              return data;\n            } catch (e) {\n              log.error(e);\n              return data;\n            }\n          });\n        });\n      }\n    }\n\n    return null;\n  },\n  options: function options(_ref9) {\n    var lastCheck = _ref9.lastCheck;\n    return {\n      variables: {\n        limit: 100,\n        lastCheck: lastCheck\n      }\n    };\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport log from 'loglevel';\nexport var withuserSeriesQuery = graphql(graphqlAPI.queries.userSeries, {\n  props: function props(_ref) {\n    var data = _ref.data,\n        ownProps = _ref.ownProps;\n    return {\n      data: _objectSpread({}, ownProps.data, {\n        seriesQ: data\n      })\n    };\n  }\n});\nexport var withMyWatchedSeriesQuery = graphql(graphqlAPI.queries.seriesFromList, {\n  props: function props(_ref2) {\n    var data = _ref2.data,\n        ownProps = _ref2.ownProps;\n    log.info('ProfileConnect withMyWatchedSeriesQuery', graphqlAPI.queries.seriesFromList, {\n      data: data,\n      ownProps: ownProps\n    });\n    return {\n      data: _objectSpread({}, ownProps.data, {\n        watchedSeriesQ: data\n      })\n    };\n  },\n  skip: function skip(_ref3) {\n    var data = _ref3.data,\n        currentUser = _ref3.currentUser;\n\n    try {\n      return currentUser.watching.length < 1;\n    } catch (e) {\n      return true;\n    }\n  },\n  options: function options(_ref4) {\n    var data = _ref4.data,\n        currentUser = _ref4.currentUser;\n    return {\n      variables: {\n        seriesList: currentUser.watching\n      }\n    };\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport log from 'loglevel';\nimport { ERROR_SEND_STATES } from '@morphoto/ui';\nimport * as feedQueries from './feedQueries';\nimport * as offlineQueries from './offlineQueries';\nimport * as s3Queries from './s3Queries';\nimport * as searchQueries from './searchQueries';\nimport * as seriesQueries from './seriesQueries';\nimport * as userQueries from './userQueries';\nvar withReportBugMutation = graphql(graphqlAPI.mutations.reportBug, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        _ref$ownProps = _ref.ownProps,\n        reduxState = _ref$ownProps.reduxState,\n        error = _ref$ownProps.error,\n        setState = _ref$ownProps.setState;\n    log.info('withReportBugMutation props', {\n      mutate: mutate,\n      reduxState: reduxState,\n      error: error\n    });\n    if (mutate.error) setState(ERROR_SEND_STATES.ERROR);\n    return {\n      reportError: function reportError(note) {\n        setState(ERROR_SEND_STATES.SENDING);\n        var reportJSON = '';\n        var extra = {};\n\n        try {\n          var _window$navigator = window.navigator,\n              userAgent = _window$navigator.userAgent,\n              appVersion = _window$navigator.appVersion,\n              languages = _window$navigator.languages,\n              language = _window$navigator.language,\n              platform = _window$navigator.platform,\n              onLine = _window$navigator.onLine;\n          extra = {\n            userAgent: userAgent,\n            appVersion: appVersion,\n            languages: languages,\n            language: language,\n            platform: platform,\n            onLine: onLine,\n            window: {\n              innerHeight: window.innerHeight,\n              innerWidth: window.innerWidth\n            }\n          };\n        } catch (e) {\n          log.error(e);\n        }\n\n        var errSubset = {};\n\n        try {\n          errSubset = {\n            message: error.message,\n            stack: error.stack\n          };\n        } catch (e) {\n          log.error(e);\n        }\n\n        var errObj = _objectSpread({\n          note: note,\n          reduxState: reduxState,\n          error: errSubset,\n          env: process.env\n        }, extra);\n\n        log.info('withReportBugMutation StartingError', errObj);\n\n        try {\n          reportJSON = JSON.stringify(errObj);\n        } catch (e) {\n          reportJSON = error.toString();\n        }\n\n        log.info('withReportBugMutation got through it', reportJSON);\n        return mutate({\n          variables: {\n            reportJSON: reportJSON\n          },\n          update: function update(store, _ref2) {\n            var data = _ref2.data;\n            log.info('withReportBugMutation update', data);\n            setState(ERROR_SEND_STATES.SENT);\n          }\n        });\n      }\n    };\n  }\n});\nexport default _objectSpread({}, seriesQueries, {}, feedQueries, {}, offlineQueries, {}, s3Queries, {}, searchQueries, {}, userQueries, {\n  withReportBugMutation: withReportBugMutation\n});","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport PersonIcon from '@material-ui/icons/Person';\nimport LabelIcon from '@material-ui/icons/Label';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      minHeight: 60\n    },\n    chosenItem: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.dark\n    },\n    avatar: {\n      background: theme.palette.primary.main\n    },\n    closeIcon: {\n      color: theme.palette.primary.contrastText,\n      paddingRight: 0\n    },\n    avatarImg: {\n      height: '100%',\n      width: '100%',\n      objectFit: 'cover'\n    }\n  };\n});\n\nvar SearchContextItem = function SearchContextItem(_ref) {\n  var className = _ref.className,\n      variant = _ref.variant,\n      name = _ref.name,\n      description = _ref.description,\n      gravatar = _ref.gravatar,\n      onClick = _ref.onClick,\n      onCancel = _ref.onCancel;\n  var classes = useStyles();\n  var TheIcon = PlaceIcon;\n\n  var getAvatar = function getAvatar(src) {\n    return function () {\n      return React.createElement(Avatar, {\n        className: classes.avatar\n      }, React.createElement(\"img\", {\n        className: classes.avatarImg,\n        alt: \"profile\",\n        src: src\n      }));\n    };\n  };\n\n  switch (variant) {\n    case 'tag':\n      TheIcon = LabelIcon;\n      break;\n\n    case 'location':\n      TheIcon = PlaceIcon;\n      break;\n\n    case 'user':\n      TheIcon = gravatar ? getAvatar(gravatar) : PersonIcon;\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ListItem, {\n    className: classNames(className, classes.root, onCancel ? classes.chosenItem : null),\n    button: !!onClick,\n    onClick: onClick\n  }, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.avatar\n  }, React.createElement(TheIcon, {\n    color: \"inherit\"\n  }))), React.createElement(ListItemText, {\n    disableTypography: true\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, name), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, description)), onCancel && React.createElement(ListItemIcon, null, React.createElement(IconButton, {\n    onClick: onCancel,\n    className: classes.closeIcon\n  }, React.createElement(CancelIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nSearchContextItem.propTypes = {\n  variant: PropTypes.oneOf(['tag', 'location', 'user']),\n  onClick: PropTypes.func,\n  gravatar: PropTypes.string,\n  className: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  onCancel: PropTypes.func\n};\nexport default SearchContextItem;\nexport var SearchContexItemCosmos = function SearchContexItemCosmos() {\n  return React.createElement(List, null, React.createElement(SearchContextItem, {\n    variant: \"tag\",\n    name: \"SomeTag\",\n    description: \"Some description of what I am\"\n  }), React.createElement(SearchContextItem, {\n    variant: \"location\",\n    name: \"Some Location\",\n    description: \"Some description of what I am\"\n  }), React.createElement(SearchContextItem, {\n    variant: \"user\",\n    name: \"User McUserSon\",\n    description: \"Some description of what I am\"\n  }));\n};","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport SearchContextItem from './SearchContextItem';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      flexGrow: 1\n    },\n    listSection: {\n      backgroundColor: 'inherit'\n    },\n    placeholderText: {\n      textAlign: 'center',\n      padding: theme.spacing(3, 1),\n      color: theme.palette.grey[400]\n    },\n    ul: {\n      backgroundColor: 'inherit',\n      padding: 0\n    }\n  };\n});\n\nvar SearchContextResults = function SearchContextResults(_ref) {\n  var variant = _ref.variant,\n      loading = _ref.loading,\n      contextResults = _ref.contextResults,\n      setContextChoice = _ref.setContextChoice;\n  var classes = useStyles();\n\n  if (loading) {\n    return React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h3\"\n    }, \"Searching...\");\n  } else if (!contextResults || contextResults.length === 0) {\n    return React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h4\"\n    }, \"No \", variant, \" results\");\n  }\n\n  return React.createElement(List, {\n    className: classes.root\n  }, contextResults.map(function (cr, idx) {\n    return React.createElement(SearchContextItem, _extends({\n      key: \"scr-\".concat(idx),\n      variant: variant,\n      onClick: function onClick() {\n        return setContextChoice(cr);\n      }\n    }, cr));\n  }));\n};\n\nSearchContextResults.propTypes = {\n  variant: PropTypes.oneOf(['keyword', 'tag', 'location', 'user']),\n  loading: PropTypes.bool,\n  contextResults: PropTypes.array.isRequired,\n  setContextChoice: PropTypes.func.isRequired\n};\nexport default SearchContextResults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      textAlign: 'center',\n      fontStyle: 'italic',\n      padding: theme.spacing(2, 1)\n    }\n  };\n});\n\nvar SearchEnder = function SearchEnder(_ref) {\n  var style = _ref.style,\n      icon = _ref.icon,\n      text = _ref.text;\n  var classes = useStyles();\n  return React.createElement(Typography, {\n    className: classes.root,\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    component: \"div\",\n    style: style\n  }, icon, text);\n};\n\nSearchEnder.propTypes = {\n  style: PropTypes.object,\n  icon: PropTypes.any,\n  text: PropTypes.string\n};\nexport default SearchEnder;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport SearchContextItem from './SearchContextItem';\nimport SearchEnder from './SearchEnder';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SeriesListItem } from '@morphoto/photoseries';\nimport { util } from '@morphoto/common';\nimport log from 'loglevel';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    ctxItem: {\n      flexGrow: 0\n    },\n    list: {\n      flexGrow: 1,\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    },\n    placeholderText: {\n      textAlign: 'center',\n      padding: theme.spacing(3, 1),\n      color: theme.palette.grey[400]\n    },\n    listSection: {\n      backgroundColor: 'inherit'\n    },\n    ul: {\n      backgroundColor: 'inherit',\n      padding: 0\n    }\n  };\n});\n\nvar SearchResults = function SearchResults(_ref) {\n  var variant = _ref.variant,\n      loading = _ref.loading,\n      seriesList = _ref.seriesList,\n      contextChoice = _ref.contextChoice,\n      onCancel = _ref.onCancel,\n      onResultClick = _ref.onResultClick,\n      fetchMore = _ref.fetchMore;\n  var classes = useStyles();\n  var listRef = useRef();\n  var enderRef = useRef();\n  var handleScroll = util.debounce(function () {\n    if (!loading && fetchMore && enderRef.current && listRef.current) {\n      var offsetTop = enderRef.current.offsetTop;\n      var _listRef$current = listRef.current,\n          scrollTop = _listRef$current.scrollTop,\n          offsetHeight = _listRef$current.offsetHeight;\n      var scrollBottom = offsetHeight + scrollTop;\n\n      if (offsetTop < scrollBottom * 2) {\n        log.info('SCROLL', {\n          offsetHeight: offsetHeight,\n          scrollTop: scrollTop,\n          offsetTop: offsetTop\n        });\n        fetchMore();\n      }\n    }\n  }, 500);\n  useEffect(handleScroll, [seriesList]);\n  var content = null;\n\n  if (loading) {\n    content = React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h3\"\n    }, \"Searching...\");\n  } else if (seriesList && seriesList.length > 0) {\n    content = seriesList.map(function (series, idx) {\n      return React.createElement(SeriesListItem, {\n        key: \"series-\".concat(idx),\n        series: series,\n        onClick: function onClick() {\n          return onResultClick(series.id);\n        },\n        showCreatedOn: true,\n        showLastPhoto: true\n      });\n    });\n    content.push(React.createElement(\"div\", {\n      key: \"ender\",\n      ref: enderRef\n    }, React.createElement(SearchEnder, {\n      text: fetchMore ? 'Loading...' : 'No More Results'\n    })));\n  } else {\n    content = React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h4\"\n    }, \"No series found\");\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, contextChoice && React.createElement(SearchContextItem, _extends({\n    className: classes.ctxItem\n  }, contextChoice, {\n    variant: variant,\n    onCancel: onCancel\n  })), React.createElement(List, {\n    className: classes.list,\n    subheader: React.createElement(\"li\", null),\n    onScroll: handleScroll,\n    innerRef: listRef\n  }, content));\n};\n\nSearchResults.propTypes = {\n  variant: PropTypes.oneOf(['keyword', 'tag', 'location', 'user']),\n  seriesList: PropTypes.array.isRequired,\n  loading: PropTypes.bool,\n  contextChoice: PropTypes.object,\n  onResultClick: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  fetchMore: PropTypes.func\n};\nexport default SearchResults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      padding: '10%',\n      display: 'flex',\n      flexDirection: 'column',\n      opacity: 0.3,\n      textAlign: 'center'\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      color: theme.palette.primary.light,\n      opacity: 0.5\n    },\n    primary: {\n      flex: '1 1 30%',\n      width: '100%'\n    },\n    secondary: {\n      flex: '1 1 30%',\n      width: '100%'\n    }\n  };\n});\n\nvar SearchPlaceholder = function SearchPlaceholder(_ref) {\n  var icon = _ref.icon,\n      primary = _ref.primary,\n      secondary = _ref.secondary;\n  var classes = useStyles();\n  var PlaceholderIcon = icon;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(PlaceholderIcon, {\n    className: classes.icon\n  }), primary && React.createElement(Typography, {\n    className: classes.primary,\n    variant: \"h3\"\n  }, primary), secondary && React.createElement(Typography, {\n    className: classes.secondary,\n    variant: \"h4\"\n  }, secondary));\n};\n\nSearchPlaceholder.propTypes = {\n  icon: PropTypes.object,\n  primary: PropTypes.string,\n  secondary: PropTypes.string\n};\nexport default SearchPlaceholder;","import React, { useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Container from '@material-ui/core/Container';\nimport PortableWifiOffIcon from '@material-ui/icons/PortableWifiOff';\nimport LabelIcon from '@material-ui/icons/Label';\nimport SearchIcon from '@material-ui/icons/Search';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport PersonIcon from '@material-ui/icons/Person';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchContextResults from './SearchContextResults';\nimport SearchResults from './SearchResults';\nimport SearchPlaceholder from './SearchPlaceholder';\nimport SearchInput from './SearchInput';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport { config, AppContext } from '@morphoto/client-common';\nvar TABS = config.home.SEARCH_TABS;\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    container: {\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column',\n      padding: 0,\n      flexGrow: 1\n    },\n    tabs: {},\n    ListWrapper: {\n      flexGrow: 1,\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    tab: {\n      flexGrow: 1\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Search = function Search(_ref) {\n  var currentTab = _ref.currentTab,\n      defaultText = _ref.defaultText,\n      searchText = _ref.searchText,\n      contextResults = _ref.contextResults,\n      searchResults = _ref.searchResults,\n      contextChoice = _ref.contextChoice,\n      loading = _ref.loading,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online;\n\n  useEffect(function () {\n    if (contextResults && !searchResults && contextResults.length === 1) {\n      actions.setContextChoice(contextResults[0]);\n    }\n  }, [contextResults]);\n  var placeholder = {};\n\n  switch (currentTab) {\n    case TABS.KEYWORD:\n      placeholder = {\n        primary: 'Keyword search',\n        secondary: 'example: \\'beaver...\\'',\n        icon: SearchIcon\n      };\n      break;\n\n    case TABS.TAG:\n      placeholder = {\n        primary: 'Tag search',\n        secondary: 'example: \\'beaver...\\'',\n        icon: LabelIcon\n      };\n      break;\n\n    case TABS.USER:\n      placeholder = {\n        primary: 'User search',\n        secondary: 'example: \\'SuperGreg123...\\'',\n        icon: PersonIcon\n      };\n      break;\n\n    case TABS.LOCATION:\n      placeholder = {\n        primary: 'Location Search',\n        secondary: 'example: \\'Vancouver...\\'',\n        icon: PlaceIcon\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  var content = null;\n\n  if (!online.isOnline) {\n    content = React.createElement(SearchPlaceholder, {\n      primary: \"Search Disabled\",\n      secondary: \"(Offline)\",\n      icon: PortableWifiOffIcon\n    });\n  } else if ((contextChoice || currentTab === TABS.KEYWORD) && searchResults) {\n    content = React.createElement(SearchResults, {\n      variant: currentTab,\n      loading: loading,\n      onResultClick: actions.onResultClick,\n      fetchMore: actions.fetchMore,\n      seriesList: searchResults,\n      contextChoice: contextChoice,\n      onCancel: function onCancel() {\n        return actions.setContextChoice(null);\n      }\n    });\n  } else if (contextResults) {\n    content = React.createElement(SearchContextResults, {\n      loading: loading,\n      variant: currentTab,\n      contextResults: contextResults,\n      setContextChoice: currentTab === TABS.LOCATION ? actions.onMapClick : actions.setContextChoice\n    });\n  } else if (defaultText.length > 0) {\n    content = React.createElement(Typography, null, \"Searching for \", \"'\".concat(searchText, \"'\") || '...');\n  } else {\n    content = React.createElement(SearchPlaceholder, placeholder);\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(SearchInput, {\n    disabled: !online.isOnline,\n    onChange: actions.setSearchText,\n    defaultValue: searchText\n  })), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, online.isOnline && React.createElement(Tabs, {\n    value: currentTab,\n    disabled: !online.isOnline,\n    onChange: function onChange(e, val) {\n      return actions.setCurrentTab(val);\n    },\n    indicatorColor: \"primary\",\n    classes: {\n      flexContainer: classes.tabs\n    },\n    centered: true\n  }, React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.TAG,\n    label: \"Tags\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.KEYWORD,\n    label: \"Keywords\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.LOCATION,\n    label: \"Places\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.USER,\n    label: \"Users\"\n  })), React.createElement(\"div\", {\n    className: classes.ListWrapper\n  }, content)));\n};\n\nSearch.propTypes = {\n  loading: PropTypes.bool,\n  currentTab: PropTypes.string.isRequired,\n  contextChoice: PropTypes.object,\n  defaultText: PropTypes.string.isRequired,\n  searchText: PropTypes.string.isRequired,\n  contextResults: PropTypes.array,\n  searchResults: PropTypes.array,\n  actions: PropTypes.shape({\n    setCurrentTab: PropTypes.func.isRequired,\n    setSearchText: PropTypes.func.isRequired,\n    setContextChoice: PropTypes.func.isRequired,\n    fetchMore: PropTypes.func,\n    onMapClick: PropTypes.func.isRequired,\n    onResultClick: PropTypes.func.isRequired\n  })\n};\nSearch.defaultProps = {\n  currentTab: TABS.TAGS,\n  defaultText: ''\n};\nexport default Search;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Badge from '@material-ui/core/Badge';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport LabelIcon from '@material-ui/icons/Label';\nimport PauseIcon from '@material-ui/icons/PauseCircleFilled';\nimport PlayIcon from '@material-ui/icons/PlayCircleFilled';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { Photo } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { useComponentSize } from '@morphoto/client-common';\nimport style from './Slideshow.style';\nvar useStyles = makeStyles(style);\n\nvar Slideshow = function Slideshow(_ref) {\n  var onCancel = _ref.onCancel,\n      photos = _ref.photos,\n      transition = _ref.transition;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useStepper = useStepper(photos.length, transition),\n      activeStep = _useStepper.activeStep,\n      lastStep = _useStepper.lastStep,\n      handleForward = _useStepper.handleForward,\n      handleBack = _useStepper.handleBack,\n      paused = _useStepper.paused,\n      pause = _useStepper.pause,\n      play = _useStepper.play;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showXYTags = _useState2[0],\n      setShowXYTags = _useState2[1];\n\n  var refImgWrap = useRef(null);\n\n  var _useComponentSize = useComponentSize(refImgWrap),\n      _useComponentSize$siz = _useComponentSize.size,\n      height = _useComponentSize$siz.height,\n      width = _useComponentSize$siz.width;\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(\"div\", {\n    ref: refImgWrap,\n    className: classes.slideContainer\n  }, photos.map(function (slide, idx) {\n    return React.createElement(GridListTile, {\n      key: \"slide-\".concat(idx),\n      className: classNames(classes.slide, activeStep === idx && classes.active, lastStep === idx && classes.last),\n      onClick: function onClick() {\n        return setShowXYTags(!showXYTags);\n      },\n      style: {\n        height: height,\n        width: width,\n        transition: theme.transitions.create(['opacity'], {\n          duration: 1 / 4 * transition\n        })\n      }\n    }, React.createElement(Photo, {\n      photo: slide,\n      className: classes.photo,\n      showTags: showXYTags\n    }), React.createElement(Typography, {\n      className: classes.labelBadge\n    }, \"Tags: \", showXYTags ? 'On ' : 'Off ', React.createElement(Badge, {\n      color: \"secondary\",\n      badgeContent: photos[activeStep].tags.filter(function (tag) {\n        return tag.coords;\n      }).length\n    }, React.createElement(LabelIcon, {\n      color: \"inherit\"\n    }))), React.createElement(GridListTileBar, {\n      className: classes.titleBar,\n      titlePosition: \"top\",\n      title: React.createElement(Typography, {\n        color: \"inherit\",\n        variant: \"caption\"\n      }, React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          return onCancel();\n        }\n      }, React.createElement(ArrowBackIcon, null)), dates.formatDate(slide.takenOn)),\n      subtitle: React.createElement(\"em\", null, paused ? 'Paused' : '    '),\n      actionIcon: paused ? React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          play();\n        }\n      }, React.createElement(PlayIcon, null)) : React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          pause();\n        }\n      }, React.createElement(PauseIcon, null))\n    }));\n  }), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualBack,\n    onClick: handleBack,\n    color: \"inherit\"\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null)), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualForward,\n    onClick: handleForward,\n    color: \"inherit\"\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null))), React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"static\",\n    activeStep: activeStep,\n    classes: {\n      root: classes.mobileStepper,\n      dotActive: classes.dotActive\n    },\n    nextButton: React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleForward,\n      disabled: activeStep === photos.length - 1\n    }, \"Next\", theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null)),\n    backButton: React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleBack,\n      disabled: activeStep === 0\n    }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null), \"Back\")\n  }));\n};\n\nSlideshow.propTypes = {\n  isFullScreen: PropTypes.bool,\n  photos: PropTypes.array.isRequired,\n  transition: PropTypes.number,\n  onCancel: PropTypes.func.isRequired\n};\nSlideshow.defaultProps = {\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n};\nexport default Slideshow;\n\nvar useStepper = function useStepper(num, interval) {\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeStep = _useState4[0],\n      setActiveStep = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      paused = _useState6[0],\n      setPaused = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      lastStep = _useState8[0],\n      setLastStep = _useState8[1];\n\n  var timerRef = useRef();\n\n  var handleForward = function handleForward() {\n    setLastStep(activeStep);\n    if (activeStep + 1 >= num) setActiveStep(0);else setActiveStep(activeStep + 1);\n\n    if (!paused) {\n      destroyTimer();\n      createTimer();\n    }\n  };\n\n  var handleBack = function handleBack() {\n    setLastStep(activeStep);\n    if (activeStep - 1 < 0) setActiveStep(num - 1);else setActiveStep(activeStep - 1);\n\n    if (!paused) {\n      destroyTimer();\n      createTimer();\n    }\n  };\n\n  var pause = function pause() {\n    destroyTimer();\n    setPaused(true);\n  };\n\n  var play = function play() {\n    setPaused(false);\n    destroyTimer();\n    createTimer();\n  };\n\n  var createTimer = function createTimer() {\n    timerRef.current = window.setInterval(function () {\n      return setActiveStep(function (oldStep) {\n        setLastStep(oldStep);\n        return oldStep + 1 >= num ? 0 : oldStep + 1;\n      });\n    }, interval);\n  };\n\n  var destroyTimer = function destroyTimer() {\n    if (timerRef.current) window.clearInterval(timerRef.current);\n  };\n\n  useEffect(function () {\n    createTimer();\n    return function () {\n      destroyTimer();\n    };\n  }, []);\n  return {\n    activeStep: activeStep,\n    lastStep: lastStep,\n    handleForward: handleForward,\n    handleBack: handleBack,\n    setActiveStep: setActiveStep,\n    paused: paused,\n    pause: pause,\n    play: play\n  };\n};","export default (function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    swipeAble: {\n      height: '100%'\n    },\n    slideContainer: {\n      flexGrow: 1\n    },\n    titleBar: {\n      padding: theme.spacing(0, 1),\n      height: '35px!important'\n    },\n    mobileStepper: {\n      flexGrow: 0,\n      background: theme.palette.grey[800],\n      color: theme.palette.getContrastText(theme.palette.grey[800])\n    },\n    slide: {\n      top: 0,\n      zIndex: 0,\n      opacity: 0,\n      position: 'absolute',\n      display: 'block',\n      overflow: 'hidden',\n      width: '100%',\n      height: '100%',\n      minHeight: 300\n    },\n    dotActive: {\n      background: 'white'\n    },\n    iconButton: {\n      color: 'white'\n    },\n    active: {\n      zIndex: 5,\n      opacity: 1\n    },\n    last: {\n      opacity: 1,\n      zIndex: 4\n    },\n    tagContainer: {},\n    labelBadge: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      right: theme.spacing(2),\n      bottom: theme.spacing(1),\n      opacity: 0.8\n    },\n    tagChip: {\n      marginRight: theme.spacing(1),\n      fontSize: 10,\n      height: theme.spacing(2),\n      padding: theme.spacing(0.5)\n    },\n    xyTagChip: {\n      position: 'absolute',\n      fontSize: theme.spacing(1),\n      height: theme.spacing(2)\n    },\n    manualBack: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      left: 0,\n      top: '50%'\n    },\n    manualForward: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      right: 0,\n      top: '50%'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SwipeableViews from 'react-swipeable-views';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport IconButton from '@material-ui/core/IconButton';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Badge from '@material-ui/core/Badge';\nimport LabelIcon from '@material-ui/icons/Label';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { Photo } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport style from './SwipeShow.style';\nvar useStyles = makeStyles(style);\n\nvar SwipeShow = function SwipeShow(_ref) {\n  var photos = _ref.photos,\n      onImageSelect = _ref.onImageSelect,\n      activePhotoId = _ref.activePhotoId,\n      setActivePhotoId = _ref.setActivePhotoId;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showTags = _useState2[0],\n      setShowTags = _useState2[1];\n\n  var singular = photos.length < 2;\n  var activePhotoIndex = photos.findIndex(function (p) {\n    return p.id === activePhotoId;\n  });\n  if (!(activePhotoIndex > 0)) activePhotoIndex = 0;\n  var activePhoto = activePhotoIndex > -1 ? photos[activePhotoIndex] : null;\n\n  var handleForward = function handleForward() {\n    return setActivePhotoId(activePhotoIndex >= photos.length - 1 ? photos[0].id : photos[activePhotoIndex + 1].id);\n  };\n\n  var handleBack = function handleBack() {\n    return setActivePhotoId(activePhotoIndex <= 0 ? photos[photos.length - 1].id : photos[activePhotoIndex - 1].id);\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(SwipeableViews, {\n    axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n    index: activePhotoIndex,\n    onChangeIndex: function onChangeIndex(val) {\n      return setActivePhotoId(photos[val] ? photos[val].id : photos[0].id);\n    },\n    enableMouseEvents: true\n  }, photos.map(function (photo, idx) {\n    return React.createElement(\"div\", {\n      className: classes.photoWrapper,\n      key: \"swipeshowpic-\".concat(idx),\n      onClick: function onClick() {\n        if (activePhoto && activePhoto.id && onImageSelect) {\n          onImageSelect(activePhoto.id);\n        }\n      }\n    }, React.createElement(Photo, {\n      photo: photo,\n      className: classes.photo,\n      showTags: showTags\n    }));\n  })), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualBack,\n    onClick: handleBack,\n    color: \"inherit\",\n    disabled: activePhotoIndex === 0\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null)), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualForward,\n    onClick: handleForward,\n    color: \"inherit\",\n    disabled: activePhotoIndex === photos.length - 1\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null)), React.createElement(GridListTileBar, {\n    title: singular ? 'Photo' : \"Photo (\".concat(activePhotoIndex + 1, \"/\").concat(photos.length, \")\"),\n    subtitle: activePhoto.takenOn && React.createElement(\"span\", null, dates.formatDate(activePhoto.takenOn)),\n    actionIcon: React.createElement(React.Fragment, null, React.createElement(IconButton, {\n      className: classes.tagButton,\n      onClick: function onClick() {\n        return setShowTags(!showTags);\n      }\n    }, React.createElement(Badge, {\n      color: showTags ? 'primary' : 'secondary',\n      badgeContent: activePhoto.tags ? activePhoto.tags.filter(function (tag) {\n        return tag.coords;\n      }).length : null\n    }, React.createElement(LabelIcon, null))))\n  })), !singular && React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"static\",\n    activeStep: activePhotoIndex,\n    classes: {\n      root: classes.mobileStepper,\n      dots: classes.dots\n    }\n  }));\n};\n\nSwipeShow.propTypes = {\n  photos: PropTypes.array,\n  transition: PropTypes.number,\n  activePhotoId: PropTypes.string,\n  setActivePhotoId: PropTypes.func.isRequired,\n  onImageSelect: PropTypes.func.isRequired\n};\nSwipeShow.defaultProps = {\n  activePhoto: 0,\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n};\nexport default SwipeShow;","export default (function (theme) {\n  return {\n    root: {\n      position: 'relative'\n    },\n    inner: {\n      position: 'relative'\n    },\n    photoWrapper: {\n      minHeight: 250,\n      height: 250\n    },\n    dateCaption: {\n      padding: theme.spacing(1),\n      background: theme.palette.primary.dark,\n      color: theme.palette.primary.contrastText,\n      textAlign: 'center'\n    },\n    mobileStepper: {},\n    manualBack: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      left: 0,\n      top: '50%'\n    },\n    manualForward: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      right: 0,\n      top: '50%'\n    },\n    tagButton: {\n      color: 'rgba(255, 255, 255, 0.54)'\n    },\n    slideshowButton: {\n      color: 'rgba(255, 255, 255, 0.54)'\n    },\n    dots: {\n      margin: '0 auto'\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      padding: 0\n    },\n    imgContainer: {\n      flex: '0 0 100px',\n      margin: theme.spacing(0, 1, 0, 0)\n    },\n    gravatarImg: {\n      verticalAlign: 'top'\n    }\n  };\n});\n\nvar MeCard = function MeCard(_ref) {\n  var user = _ref.user,\n      loading = _ref.loading,\n      onAvatarClick = _ref.onAvatarClick;\n  var classes = useStyles();\n  if (loading || !user) return 'LOADING...';\n  return React.createElement(ListItem, {\n    className: classes.root,\n    onClick: onAvatarClick,\n    disableGutters: true\n  }, React.createElement(ListItemIcon, {\n    className: classes.imgContainer\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: user.gravatar\n  })), React.createElement(ListItemText, {\n    primary: user.username,\n    secondary: \"Member since: \".concat(dates.formatDate(user.createdOn, 'LL'))\n  }));\n};\n\nMeCard.propTypes = {\n  user: PropTypes.object,\n  loading: PropTypes.bool,\n  onAvatarClick: PropTypes.func\n};\nexport default MeCard;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Divider from '@material-ui/core/Divider';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { SeriesListItem } from '@morphoto/photoseries';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport log from 'loglevel';\nimport MeCard from './MeCard';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      background: theme.palette.background.paper,\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    filterContainer: {\n      color: theme.palette.primary.secondary,\n      background: theme.palette.background.default,\n      textAlign: 'center',\n      padding: theme.spacing(1, 1)\n    },\n    container: {\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column',\n      flexGrow: 1,\n      padding: 0\n    },\n    filterChip: {},\n    seriesListItemWrap: {\n      margin: theme.spacing(1, 0.5)\n    },\n    seriesList: {\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    },\n    tabs: {},\n    tab: {\n      padding: theme.spacing(0, 1)\n    },\n    noneFound: {\n      color: theme.palette.text.secondary,\n      textAlign: 'center',\n      padding: theme.spacing(2)\n    }\n  };\n});\nvar SORT = {\n  ACTIVITY: 'Last Photo',\n  CREATED: 'Created',\n  NAME: 'Name'\n};\n\nvar MyProfile = function MyProfile(_ref) {\n  var mySeries = _ref.mySeries,\n      user = _ref.user,\n      watchingSeries = _ref.watchingSeries,\n      loading = _ref.loading,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentTab = _useState2[0],\n      setCurrentTab = _useState2[1];\n\n  var _useState3 = useState(SORT.ACTIVITY),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sortVal = _useState4[0],\n      setSort = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sortAsc = _useState6[0],\n      setSortAsc = _useState6[1];\n\n  var sortSetter = function sortSetter(newSort) {\n    if (newSort === sortVal) setSortAsc(!sortAsc);else setSort(newSort);\n  };\n\n  var tabFeed = currentTab === 0 ? mySeries : watchingSeries;\n  if (!tabFeed) tabFeed = [];\n  log.info('PROFILE CHECK', sortVal, sortAsc, tabFeed.map(function (_ref2) {\n    var latest = _ref2.latest;\n    return latest;\n  }));\n\n  switch (sortVal) {\n    case SORT.ACTIVITY:\n      tabFeed.sort(function (a, b) {\n        var aa = a.latest && a.latest.takenOn ? a.latest.takenOn : 0;\n        var bb = b.latest && b.latest.takenOn ? b.latest.takenOn : 0;\n        return sortAsc ? aa - bb : bb - aa;\n      });\n      break;\n\n    case SORT.CREATED:\n      if (sortAsc) tabFeed.sort(function (a, b) {\n        return a.createdOn - b.createdOn;\n      });else tabFeed.sort(function (a, b) {\n        return b.createdOn - a.createdOn;\n      });\n      break;\n\n    case SORT.NAME:\n      if (sortAsc) {\n        tabFeed.sort(function (a, b) {\n          if (a.name < b.name) {\n            return -1;\n          }\n\n          if (a.name > b.firstname) {\n            return 1;\n          }\n\n          return 0;\n        });\n      } else {\n        tabFeed.sort(function (a, b) {\n          if (b.name < a.name) {\n            return -1;\n          }\n\n          if (b.name > a.name) {\n            return 1;\n          }\n\n          return 0;\n        });\n      }\n\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(Typography, null, \"My Profile\")), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, React.createElement(MeCard, {\n    user: user\n  }), React.createElement(Tabs, {\n    value: currentTab,\n    onChange: function onChange(e, val) {\n      return setCurrentTab(val);\n    },\n    indicatorColor: \"primary\",\n    centered: true,\n    classes: {\n      flexContainer: classes.tabs\n    }\n  }, React.createElement(Tab, {\n    className: classes.tab,\n    value: 0,\n    label: \"My Series\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: 1,\n    label: \"Watching\"\n  })), React.createElement(Divider, null), React.createElement(\"div\", {\n    className: classes.filterContainer\n  }, React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.NAME,\n    onClick: function onClick() {\n      return sortSetter(SORT.NAME);\n    },\n    label: SORT.NAME\n  }), \"|\", React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.ACTIVITY,\n    onClick: function onClick() {\n      return sortSetter(SORT.ACTIVITY);\n    },\n    label: SORT.ACTIVITY\n  }), \"|\", React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.CREATED,\n    onClick: function onClick() {\n      return sortSetter(SORT.CREATED);\n    },\n    label: SORT.CREATED\n  })), React.createElement(Divider, null), React.createElement(\"div\", {\n    className: classes.seriesList\n  }, !loading && (!tabFeed || tabFeed.length === 0) && React.createElement(Typography, {\n    className: classes.noneFound,\n    component: \"div\"\n  }, \"No Series Found\"), loading && React.createElement(Typography, {\n    className: classes.noneFound,\n    component: \"div\"\n  }, \"Loading...\"), tabFeed.map(function (series, idx) {\n    return React.createElement(SeriesListItem, {\n      key: \"seriesListItem\".concat(series.id),\n      series: series,\n      showCreatedOn: true,\n      showLastPhoto: true,\n      onClick: function onClick() {\n        return actions.jumpToSeries(series.id);\n      }\n    });\n  }))));\n};\n\nMyProfile.propTypes = {\n  loading: PropTypes.bool,\n  user: PropTypes.object.isRequired,\n  mySeries: PropTypes.array.isRequired,\n  watchingSeries: PropTypes.array.isRequired,\n  actions: PropTypes.shape({\n    jumpToSeries: PropTypes.func.isRequired,\n    jumpToMap: PropTypes.func.isRequired\n  })\n};\nexport default MyProfile;\nvar useFilterStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      margin: theme.spacing(0, 0.75, 0, 0.75)\n    }\n  };\n});\n\nvar FilterSortItem = function FilterSortItem(_ref3) {\n  var active = _ref3.active,\n      asc = _ref3.asc,\n      onClick = _ref3.onClick,\n      label = _ref3.label;\n  var classes = useFilterStyles();\n  var arrow = asc === true ? '' : '';\n  return React.createElement(Button, {\n    size: \"small\",\n    className: classes.root,\n    onClick: onClick,\n    color: active ? 'secondary' : 'inherit'\n  }, label, React.createElement(\"span\", {\n    style: {\n      opacity: active ? 1 : 0\n    }\n  }, arrow));\n};\n\nFilterSortItem.propTypes = {\n  active: PropTypes.bool,\n  asc: PropTypes.bool,\n  onClick: PropTypes.func.isRequired,\n  label: PropTypes.string.isRequired\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.userKeys = exports.userFragment = exports.photoKeys = exports.photoFragment = exports.seriesKeys = exports.seriesFragment = exports.feedSeriesSummaryKeys = exports.feedSeriesSummaryFragment = exports.seriesSummaryKeys = exports.seriesSummaryFragment = exports.userSummaryKeys = exports.userSummaryFragment = exports.photoSummaryKeys = exports.photoSummaryFragment = void 0;\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nfragment userFragment on User {\\n  id\\n  username\\n  gravatar\\n  watching\\n  gravatarProfile\\n  meta\\n  createdOn\\n  updatedOn\\n  __typename\\n}\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nfragment photoFragment on Photo {\\n  id\\n  meta\\n  createdOn\\n  takenOn\\n  updatedOn\\n  coords\\n  note\\n  seriesId\\n  seriesCreatedBy\\n  createdBy\\n  updatedBy\\n  uploadToken\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  updatedUser {\\n    ...userSummaryFragment\\n  }\\n  tags {\\n    label\\n    typeId\\n    coords {\\n      x\\n      y\\n      __typename\\n    }\\n    __typename\\n  }\\n  paths {\\n    base\\n    large\\n    thumb\\n    medium\\n    __typename\\n  }\\n  __typename\\n}\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nfragment seriesFragment on Series {\\n  id\\n  name\\n  access\\n  note\\n  meta\\n  watchers\\n  seriesStatus\\n  createdOn\\n  updatedOn\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  updatedUser {\\n    ...userSummaryFragment\\n  }\\n  coords\\n  direction\\n  photoCount\\n  featured {\\n    ...photoSummaryFragment\\n  }\\n  latest {\\n    ...photoSummaryFragment\\n  }\\n  __typename\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nfragment feedSeriesSummaryFragment on FeedSeriesSummary {\\n  id\\n  name\\n  access\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  seriesStatus\\n  updatedOn\\n  createdOn\\n  photoCount\\n  coords\\n  direction\\n  watchers\\n  __typename\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nfragment seriesSummaryFragment on SeriesSummary {\\n  id\\n  name\\n  access\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  seriesStatus\\n  updatedOn\\n  createdOn\\n  photoCount\\n  coords\\n  direction\\n  watchers\\n  featured {\\n    ...photoSummaryFragment\\n  }\\n  latest {\\n    ...photoSummaryFragment\\n  }\\n  __typename\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nfragment userSummaryFragment on UserSummary {\\n  id\\n  gravatar\\n  gravatarProfile\\n  username\\n  __typename\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nfragment photoSummaryFragment on PhotoSummary {\\n  id\\n  takenOn\\n  seriesCreatedBy\\n  updatedOn\\n  createdOn\\n  seriesId\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  paths {\\n    base\\n    thumb\\n    medium\\n    large\\n    __typename\\n  }\\n  __typename\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar photoSummaryFragment = (0, _graphqlTag[\"default\"])(_templateObject());\nexports.photoSummaryFragment = photoSummaryFragment;\nvar photoSummaryKeys = ['id', 'takenOn', 'seriesCreatedBy', 'updatedOn', 'createdOn', 'seriesId', 'createdUser', 'paths'];\nexports.photoSummaryKeys = photoSummaryKeys;\nvar userSummaryFragment = (0, _graphqlTag[\"default\"])(_templateObject2());\nexports.userSummaryFragment = userSummaryFragment;\nvar userSummaryKeys = ['id', 'gravatar', 'gravatarProfile', 'username'];\nexports.userSummaryKeys = userSummaryKeys;\nvar seriesSummaryFragment = (0, _graphqlTag[\"default\"])(_templateObject3(), photoSummaryFragment, userSummaryFragment);\nexports.seriesSummaryFragment = seriesSummaryFragment;\nvar seriesSummaryKeys = ['id', 'name', 'access', 'createdUser', 'seriesStatus', 'updatedOn', 'createdOn', 'photoCount', 'coords', 'direction', 'watchers', 'featured', 'latest'];\nexports.seriesSummaryKeys = seriesSummaryKeys;\nvar feedSeriesSummaryFragment = (0, _graphqlTag[\"default\"])(_templateObject4(), userSummaryFragment);\nexports.feedSeriesSummaryFragment = feedSeriesSummaryFragment;\nvar feedSeriesSummaryKeys = ['id', 'name', 'access', 'createdUser', 'seriesStatus', 'updatedOn', 'createdOn', 'photoCount', 'coords', 'direction', 'watchers'];\nexports.feedSeriesSummaryKeys = feedSeriesSummaryKeys;\nvar seriesFragment = (0, _graphqlTag[\"default\"])(_templateObject5(), photoSummaryFragment, userSummaryFragment);\nexports.seriesFragment = seriesFragment;\nvar seriesKeys = ['id', 'name', 'access', 'note', 'meta', 'watchers', 'seriesStatus', 'createdOn', 'updatedOn', 'createdUser', 'updatedUser', 'coords', 'direction', 'photoCount', 'featured', 'latest'];\nexports.seriesKeys = seriesKeys;\nvar photoFragment = (0, _graphqlTag[\"default\"])(_templateObject6(), userSummaryFragment);\nexports.photoFragment = photoFragment;\nvar photoKeys = ['id', 'meta', 'createdOn', 'takenOn', 'updatedOn', 'note', 'coords', 'seriesId', 'seriesCreatedBy', 'createdBy', 'updatedBy', 'uploadToken', 'createdUser', 'updatedUser', 'tags', 'paths'];\nexports.photoKeys = photoKeys;\nvar userFragment = (0, _graphqlTag[\"default\"])(_templateObject7());\nexports.userFragment = userFragment;\nvar userKeys = ['id', 'username', 'gravatar', 'watching', 'gravatarProfile', 'meta', 'createdOn', 'updatedOn'];\nexports.userKeys = userKeys;","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport var RawSVG = React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M13.685,2.797c-0.44,1.273 0.852,3.525 -1.082,4.966c-1.247,0.93 -2.133,2.247 -2.743,4.167c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873c1.28,-2.034 -2.359,-1.862 -2.747,-3.307Z\"\n}), React.createElement(\"path\", {\n  d: \"M4.921,5.953c0.883,1.017 3.479,1.024 3.76,3.42c0.181,1.545 0.879,2.971 2.238,4.459c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066c-1.121,-2.126 -2.792,1.111 -4.238,0.725Z\"\n}), React.createElement(\"path\", {\n  d: \"M3.236,15.092c1.323,-0.256 2.627,-2.5 4.842,-1.546c1.428,0.615 3.013,0.724 4.98,0.292c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94c-2.402,-0.091 -0.433,2.974 -1.491,4.033Z\"\n}), React.createElement(\"path\", {\n  d: \"M10.309,21.121c0.439,-1.274 -0.852,-3.525 1.081,-4.967c1.247,-0.929 2.133,-2.246 2.743,-4.167c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873c-1.28,2.034 2.359,1.863 2.748,3.308Z\"\n}), React.createElement(\"path\", {\n  d: \"M19.066,18.01c-0.883,-1.017 -3.479,-1.024 -3.76,-3.42c-0.182,-1.544 -0.88,-2.971 -2.238,-4.459c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067c1.121,2.125 2.792,-1.112 4.238,-0.726Z\"\n}), React.createElement(\"path\", {\n  d: \"M20.751,8.871c-1.323,0.256 -2.627,2.501 -4.842,1.546c-1.429,-0.615 -3.013,-0.723 -4.98,-0.291c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94c2.401,0.092 0.433,-2.974 1.491,-4.033Z\"\n}));\nexport default createSvgIcon(RawSVG, 'AppLogo');","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport React, { useRef, useLayoutEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { util } from '@morphoto/common';\nvar useSearchBarStyles = makeStyles(function (theme) {\n  return {\n    root: _defineProperty({\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.3),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.5)\n      },\n      marginRight: theme.spacing(2),\n      marginLeft: 0,\n      width: '100%'\n    }, theme.breakpoints.up('sm'), {\n      marginLeft: theme.spacing(3),\n      width: 'auto'\n    }),\n    transparent: {\n      backgroundColor: fade(theme.palette.common.white, 0.7),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.9)\n      }\n    },\n    inputRoot: {\n      color: 'inherit',\n      width: '100%'\n    },\n    inputInput: _defineProperty({\n      padding: theme.spacing(1, 1, 1, 4),\n      transition: theme.transitions.create('width'),\n      width: '100%'\n    }, theme.breakpoints.up('md'), {\n      width: 200\n    }),\n    searchIcon: {\n      width: theme.spacing(4),\n      height: '100%',\n      position: 'absolute',\n      pointerEvents: 'none',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  };\n});\nexport var SearchInput = function SearchInput(_ref) {\n  var autoFocus = _ref.autoFocus,\n      disabled = _ref.disabled,\n      onChange = _ref.onChange,\n      onClick = _ref.onClick,\n      defaultValue = _ref.defaultValue,\n      isTransparent = _ref.isTransparent;\n  var inputRef = useRef();\n  var classes = useSearchBarStyles();\n  var debounceSearchText = useCallback(util.debounce(onChange, 500), [onChange]);\n  useLayoutEffect(function () {\n    if (inputRef.current && !autoFocus) {\n      inputRef.current.blur();\n    }\n  }, [autoFocus]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, isTransparent ? classes.transparent : null),\n    onClick: onClick\n  }, React.createElement(\"div\", {\n    className: classes.searchIcon\n  }, React.createElement(SearchIcon, null)), React.createElement(InputBase, {\n    autoFocus: !disabled && autoFocus,\n    inputProps: {\n      onBlur: function onBlur() {}\n    },\n    onChange: function onChange(e) {\n      debounceSearchText(e.target.value);\n    },\n    placeholder: \"Search\\u2026\",\n    disabled: disabled,\n    defaultValue: defaultValue,\n    inputRef: inputRef,\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    }\n  }));\n};\nSearchInput.propTypes = {\n  autoFocus: PropTypes.bool,\n  isTransparent: PropTypes.bool,\n  disabled: PropTypes.bool,\n  onChange: PropTypes.func,\n  defaultValue: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default SearchInput;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { FindOnMapButton } from '@morphoto/ui';\nimport { RawImage } from '@morphoto/photos';\nimport { Avatar } from '@material-ui/core';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(0)\n    },\n    imgContainer: {\n      overflow: 'hidden',\n      height: '100%',\n      position: 'relative',\n      borderRadius: 0\n    },\n    findOnMapButtonContainer: {\n      position: 'absolute',\n      opacity: 0.8,\n      bottom: theme.spacing(1),\n      right: theme.spacing(1)\n    },\n    titleContainer: {\n      borderTop: '2px solid #FFFFFF99',\n      background: '#444444AA',\n      textShadow: '1px 1px 10px black',\n      color: 'white',\n      position: 'absolute',\n      alignItems: 'center',\n      display: 'flex',\n      top: 0,\n      width: '100%',\n      paddingRight: theme.spacing(1)\n    },\n    avatar: {\n      border: '1px solid white',\n      margin: theme.spacing(0, 1)\n    },\n    title: {\n      flex: '1 1 50%',\n      overflow: 'hidden'\n    },\n    seriesName: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    img: {},\n    gravatarImg: {\n      width: '100%'\n    }\n  };\n});\nvar EVENT_VERBS = {\n  DELETE: 'Deleted',\n  ADD: 'Added'\n};\n\nvar FeedItem = function FeedItem(_ref) {\n  var event = _ref.event,\n      actions = _ref.actions;\n  var series = event.series,\n      photo = event.photo;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Paper, {\n    className: classes.imgContainer\n  }, React.createElement(RawImage, {\n    photo: photo,\n    sizePriority: ['medium', 'large', 'thumb'],\n    className: classes.img,\n    style: {\n      objectFit: 'cover'\n    },\n    onClick: function onClick() {\n      return actions.onImageClick(series.id, photo.id);\n    }\n  }), React.createElement(\"div\", {\n    className: classes.titleContainer\n  }, React.createElement(Avatar, {\n    onClick: function onClick() {\n      return actions.onProfileClick(photo.createdUser.username);\n    },\n    className: classes.avatar\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: photo.createdUser.gravatar\n  })), React.createElement(\"div\", {\n    className: classes.title\n  }, React.createElement(Typography, {\n    className: classes.seriesName,\n    variant: \"body1\",\n    color: \"inherit\"\n  }, series.name), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, photo.createdUser.username, \" \", EVENT_VERBS.ADD, \" a photo\"), React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.updatedOn))), React.createElement(FindOnMapButton, {\n    onClick: function onClick() {\n      return actions.onMapClick(series.id, photo.id);\n    }\n  }))));\n};\n\nFeedItem.propTypes = {\n  event: PropTypes.object.isRequired,\n  actions: PropTypes.shape({\n    onImageClick: PropTypes.func.isRequired,\n    onProfileClick: PropTypes.func.isRequired,\n    onMapClick: PropTypes.func.isRequired\n  })\n};\nexport default FeedItem;\nexport var FeedItemCosmos = function FeedItemCosmos(props) {\n  return React.createElement(\"div\", null, React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props));\n};\nFeedItemCosmos.propTypes = {\n  event: PropTypes.object.isRequired\n};","export default require('./Search').default;\nexport { default as SearchInput } from './SearchInput';","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.randomObjectElement = exports.randomArrayEl = exports.filledArray = exports.randomMap = exports.randomChance = exports.randomFloat = exports.randomInt = void 0;\n\nvar _random = _interopRequireDefault(require(\"lodash/random\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar randomInt = function randomInt(min, max) {\n  return (0, _random[\"default\"])(min, max);\n};\n\nexports.randomInt = randomInt;\n\nvar randomFloat = function randomFloat(min, max) {\n  return (0, _random[\"default\"])(min, max, true);\n};\n\nexports.randomFloat = randomFloat;\n\nvar randomChance = function randomChance(chance, inTimes) {\n  return (0, _random[\"default\"])(0, inTimes) <= chance;\n};\n\nexports.randomChance = randomChance;\n\nvar randomMap = function randomMap(low, high, func) {\n  return filledArray((0, _random[\"default\"])(low, high), null).map(func);\n};\n\nexports.randomMap = randomMap;\n\nvar filledArray = function filledArray(num) {\n  var fillval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return _toConsumableArray(Array(num).keys()).map(function () {\n    return fillval;\n  });\n};\n\nexports.filledArray = filledArray;\n\nvar randomArrayEl = function randomArrayEl(arr) {\n  return !arr || arr.length === 0 ? null : arr[(0, _random[\"default\"])(0, arr.length - 1)];\n};\n\nexports.randomArrayEl = randomArrayEl;\n\nvar randomObjectElement = function randomObjectElement(obj) {\n  var key = randomArrayEl(Object.keys(obj));\n  return [key, obj[key]];\n};\n\nexports.randomObjectElement = randomObjectElement;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport axios from 'axios';\nimport FormData from 'form-data';\nimport { imgStore } from './offline';\nimport log from 'loglevel';\naxios.interceptors.request.use(function (request) {\n  log.info('AXIOS:::: Starting Request', request);\n  return request;\n}, function (err) {\n  log.info('AXIOS:::: Starting Request ERROR', err);\n  return Promise.reject(err);\n});\naxios.interceptors.response.use(function (response) {\n  log.info('AXIOS:::: Response', response);\n  return response;\n}, function (err) {\n  log.info('AXIOS:::: Starting Response ERROR', err);\n  return Promise.reject(err);\n});\nexport default function s3Upload(activeUpload, updateUploadProgress, completeActiveUpload, failRetry) {\n  var formData, file, onUploadProgress, config;\n  return _regeneratorRuntime.async(function s3Upload$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          log.info('s3Upload::STARTING', {\n            activeUpload: activeUpload\n          });\n          formData = new FormData();\n          Object.keys(activeUpload.preAuth.fields).forEach(function (fieldkey) {\n            formData.append(fieldkey, activeUpload.preAuth.fields[fieldkey]);\n          });\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(imgStore.getItem(activeUpload.uploadToken));\n\n        case 5:\n          file = _context2.sent;\n          formData.append('file', file);\n\n          onUploadProgress = function onUploadProgress(progressEvent) {\n            log.info('s3Upload::PROGRESSEVENT', progressEvent);\n            var loaded = progressEvent.loaded,\n                total = progressEvent.total;\n            updateUploadProgress({\n              progress: Math.floor(100 * loaded / total)\n            });\n          };\n\n          config = {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            },\n            onUploadProgress: onUploadProgress\n          };\n          _context2.next = 11;\n          return _regeneratorRuntime.awrap(axios.post(activeUpload.preAuth.url, formData, config).then(function _callee(result) {\n            return _regeneratorRuntime.async(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.t0 = log;\n                    _context.next = 3;\n                    return _regeneratorRuntime.awrap(imgStore.keys());\n\n                  case 3:\n                    _context.t1 = _context.sent;\n\n                    _context.t0.info.call(_context.t0, 's3Upload:: upload done. cleaning up imgStore', _context.t1);\n\n                    _context.next = 7;\n                    return _regeneratorRuntime.awrap(imgStore.removeItem(activeUpload.uploadToken));\n\n                  case 7:\n                    _context.t2 = log;\n                    _context.next = 10;\n                    return _regeneratorRuntime.awrap(imgStore.keys());\n\n                  case 10:\n                    _context.t3 = _context.sent;\n\n                    _context.t2.info.call(_context.t2, 's3Upload:: Cleaned up img store', _context.t3);\n\n                    completeActiveUpload();\n\n                  case 13:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            });\n          }).catch(function (err) {\n            log.error('s3Upload::ERROR');\n            log.error(err);\n            failRetry();\n          }));\n\n        case 11:\n          log.info('s3Upload::COMPLETE');\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport { getWholeSeriesUpdate, allSeriesUpdate, feedUpdate, userSeriesUpdate } from './updateQueries';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport _ from 'lodash';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.createSeries;\nvar SERIES_KEYS = graphqlAPI.mutations.newSeriesKeys;\nvar PHOTO_KEYS = graphqlAPI.mutations.newPhotoKeys;\nvar createOptimisticResponse = graphqlAPI.optimistic.createSeriesResponse;\nexport var withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      createSeriesMutation: function createSeriesMutation(newSeries, newPhoto, ext) {\n        var _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n        return _regeneratorRuntime.async(function createSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                meUserSummary = {\n                  id: id,\n                  gravatar: gravatar,\n                  gravatarProfile: gravatarProfile,\n                  username: username,\n                  __typename: 'UserSummary'\n                };\n                if (!newSeries.access) newSeries.access = 'PRIVATE';\n                variables = {\n                  series: _.pick(newSeries, SERIES_KEYS),\n                  photo: _.pick(newPhoto, PHOTO_KEYS),\n                  ext: ext\n                };\n                optimisticResponse = createOptimisticResponse({\n                  meUserSummary: meUserSummary,\n                  newSeries: newSeries,\n                  newPhoto: newPhoto,\n                  ext: ext\n                });\n                _context.next = 7;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 7:\n                mutationStackId = _context.sent;\n                log.info('createSeriesMutation:: start', {\n                  newSeries: newSeries,\n                  newPhoto: newPhoto,\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  ext: ext\n                });\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  refetchQueries: [{\n                    query: graphqlAPI.queries.allSeries,\n                    variables: {\n                      limit: 100\n                    }\n                  }, {\n                    query: graphqlAPI.queries.userSeries\n                  }, {\n                    query: graphqlAPI.queries.getMyFeed\n                  }],\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({}, ownProps.doneCreatingSeries)\n                }).then(function (data) {\n                  log.info('createSeriesMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('createSeriesMutation::updateThunk', {\n      data: data\n    });\n    getWholeSeriesUpdate(store, data.createSeries.series);\n    userSeriesUpdate(store, data.createSeries.series);\n    allSeriesUpdate(store, data.createSeries.series);\n    feedUpdate(store, data.createSeries.series, data.createSeries.series.photos[0]);\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport { getWholeSeriesUpdate, allSeriesUpdate, feedUpdate } from './updateQueries';\nimport log from 'loglevel';\nimport _ from 'lodash';\nvar MUTATION = graphqlAPI.mutations.updateSeries;\nvar KEYS = graphqlAPI.mutations.updateSeriesKeys;\nvar createOptimisticResponse = graphqlAPI.optimistic.updateSeriesResponse;\nexport var withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      updateSeriesMutation: function updateSeriesMutation(series, seriesDelta) {\n        var _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n        return _regeneratorRuntime.async(function updateSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                meUserSummary = {\n                  id: id,\n                  gravatar: gravatar,\n                  gravatarProfile: gravatarProfile,\n                  username: username,\n                  __typename: 'UserSummary'\n                };\n                variables = {\n                  series: _.pick(seriesDelta, KEYS)\n                };\n                optimisticResponse = createOptimisticResponse({\n                  meUserSummary: meUserSummary,\n                  series: series,\n                  seriesDelta: seriesDelta\n                });\n                _context.next = 6;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 6:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  refetchQueries: [{\n                    query: graphqlAPI.queries.allSeries,\n                    variables: {\n                      limit: 100\n                    }\n                  }],\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    series: series\n                  })\n                }).then(function (data) {\n                  log.info('updateSeriesMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.debug('updateSeriesMutation::updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesUpdate(store, data.updateSeries);\n    allSeriesUpdate(store, data.updateSeries);\n    feedUpdate(store, data.updateSeries.series, context.series.photos[0]);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport { getWholeSeriesPhotoUpdate, allSeriesPhotoUpdate, feedUpdate } from './updateQueries';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport _ from 'lodash';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.createPhoto;\nvar KEYS = graphqlAPI.mutations.newPhotoKeys;\nvar createOptimisticResponse = graphqlAPI.optimistic.createPhotoResponse;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      createPhotoMutation: function createPhotoMutation(series, newPhoto, ext) {\n        var newPhotoInput, _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n        return _regeneratorRuntime.async(function createPhotoMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                newPhotoInput = _.cloneDeep(newPhoto);\n\n                if (!newPhotoInput.seriesId && ownProps.activeSeries) {\n                  newPhotoInput.seriesId = ownProps.activeSeries;\n                }\n\n                _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                meUserSummary = {\n                  id: id,\n                  gravatar: gravatar,\n                  gravatarProfile: gravatarProfile,\n                  username: username,\n                  __typename: 'UserSummary'\n                };\n                variables = {\n                  photo: _.pick(newPhotoInput, KEYS),\n                  ext: ext\n                };\n                optimisticResponse = createOptimisticResponse({\n                  meUserSummary: meUserSummary,\n                  series: series,\n                  newPhoto: newPhoto,\n                  ext: ext\n                });\n                _context.next = 8;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 8:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    series: series\n                  }, ownProps.doneCreatingPhoto)\n                }).then(function (data) {\n                  log.info('createPhotoMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.debug('createPhotoMutation::updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesPhotoUpdate(store, data.createPhoto.photo);\n    allSeriesPhotoUpdate(store, context.series, data.createPhoto.photo);\n    feedUpdate(store, context.series, data.createPhoto.photo);\n    if (cb) cb(data.createPhoto.photo.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport { getWholeSeriesPhotoUpdate, allSeriesPhotoUpdate, feedUpdate } from './updateQueries';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nimport _ from 'lodash';\nvar MUTATION = graphqlAPI.mutations.updatePhoto;\nvar KEYS = graphqlAPI.mutations.updatePhotoKeys;\nvar createOptimisticResponse = graphqlAPI.optimistic.updatePhotoResponse;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      updatePhotoMutation: function updatePhotoMutation(series, photo, photoDelta) {\n        var newUpdatePhoto, _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n        return _regeneratorRuntime.async(function updatePhotoMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                newUpdatePhoto = _.pick(photoDelta, KEYS);\n\n                if (newUpdatePhoto.tags && newUpdatePhoto.tags.length > 0) {\n                  newUpdatePhoto.tags = newUpdatePhoto.tags.map(function (t) {\n                    var newT = _.pick(t, ['label', 'typeId', 'coords']);\n\n                    if (newT.coords) newT.coords = _.pick(newT.coords, ['x', 'y']);\n                    return newT;\n                  });\n                }\n\n                _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                meUserSummary = {\n                  id: id,\n                  gravatar: gravatar,\n                  gravatarProfile: gravatarProfile,\n                  username: username,\n                  __typename: 'UserSummary'\n                };\n                variables = {\n                  photo: newUpdatePhoto\n                };\n                optimisticResponse = createOptimisticResponse({\n                  meUserSummary: meUserSummary,\n                  photo: photo,\n                  photoDelta: photoDelta\n                });\n                _context.next = 8;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 8:\n                mutationStackId = _context.sent;\n                log.info('optimisticresponse', {\n                  optimisticResponse: optimisticResponse,\n                  meUserSummary: meUserSummary,\n                  photo: photo,\n                  photoDelta: photoDelta\n                });\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    photo: photo,\n                    series: series\n                  })\n                }).then(function (data) {\n                  log.info('updatePhotoMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesPhotoUpdate(store, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    allSeriesPhotoUpdate(store, context.series, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    feedUpdate(store, context.series, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { allSeriesPhotoUpdate, feedUpdate, getWholeSeriesPhotoUpdate } from './updateQueries';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.deletePhoto;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      deletePhotoMutation: function deletePhotoMutation(photoId) {\n        var variables, optimisticResponse, mutationStackId;\n        return _regeneratorRuntime.async(function deletePhotoMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                variables = {\n                  seriesId: ownProps.series.id,\n                  photoId: photoId\n                };\n                optimisticResponse = {\n                  deletePhoto: photoId\n                };\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 4:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    series: ownProps.series\n                  })\n                }).then(function (data) {\n                  log.info('deletePhotoMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.debug('deletePhotoMutation::updateThunk', {\n      context: context,\n      data: data\n    });\n    allSeriesPhotoUpdate(store, null, {\n      id: data.deletePhoto\n    }, true);\n    getWholeSeriesPhotoUpdate(store, {\n      id: data.deletePhoto,\n      seriesId: context.series.id\n    }, true);\n    feedUpdate(store, context.series, {\n      id: data.deletePhoto,\n      seriesId: context.series.id\n    }, true);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { allSeriesUpdate, feedUpdate, userSeriesUpdate } from './updateQueries';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.deleteSeries;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      deleteSeriesMutation: function deleteSeriesMutation() {\n        var variables, optimisticResponse, mutationStackId;\n        return _regeneratorRuntime.async(function deleteSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                variables = {\n                  id: ownProps.activeSeries\n                };\n                optimisticResponse = {\n                  deleteSeries: ownProps.activeSeries\n                };\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 4:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  refetchQueries: [{\n                    query: graphqlAPI.queries.allSeries,\n                    variables: {\n                      limit: 100\n                    }\n                  }, {\n                    query: graphqlAPI.queries.userSeries\n                  }, {\n                    query: graphqlAPI.queries.getMyFeed\n                  }],\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk()\n                }).then(function (data) {\n                  log.info('deleteSeriesMutation:: done', {\n                    data: data,\n                    mutationStackId: mutationStackId\n                  });\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('deleteSeriesMutation::updateThunk', {\n      data: data\n    });\n    userSeriesUpdate(store, data.deleteSeries, true);\n    allSeriesUpdate(store, {\n      id: data.deleteSeries\n    }, true);\n    feedUpdate(store, {\n      id: data.deleteSeries\n    }, null, true);\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { watchUpdate } from './updateQueries';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.watchSeries;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      watchSeriesMutation: function watchSeriesMutation(currentUser) {\n        var variables, optimisticResponse, mutationStackId;\n        return _regeneratorRuntime.async(function watchSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                variables = {\n                  seriesId: ownProps.activeSeries\n                };\n                optimisticResponse = {\n                  watchSeries: ownProps.activeSeries\n                };\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 4:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  refetchQueries: [{\n                    query: graphqlAPI.queries.seriesFromList,\n                    variables: {\n                      seriesList: currentUser.watching\n                    }\n                  }, {\n                    query: graphqlAPI.queries.getMyFeed\n                  }],\n                  update: updateThunk({\n                    currentUser: currentUser\n                  })\n                }).then(function (data) {\n                  log.info('watchSeriesMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('watchSeriesMutation::updateThunk', {\n      context: context,\n      data: data\n    });\n    watchUpdate(store, data.watchSeries, context.currentUser.id, false);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { watchUpdate } from './updateQueries';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.unWatchSeries;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      unWatchSeriesMutation: function unWatchSeriesMutation(currentUser) {\n        var variables, optimisticResponse, mutationStackId;\n        return _regeneratorRuntime.async(function unWatchSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                variables = {\n                  seriesId: ownProps.activeSeries\n                };\n                optimisticResponse = {\n                  unWatchSeries: ownProps.activeSeries\n                };\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 4:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  refetchQueries: [{\n                    query: graphqlAPI.queries.seriesFromList,\n                    variables: {\n                      seriesList: currentUser.watching\n                    }\n                  }, {\n                    query: graphqlAPI.queries.getMyFeed\n                  }],\n                  update: updateThunk({\n                    currentUser: currentUser\n                  })\n                }).then(function (data) {\n                  log.info('unWatchSeriesMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.debug('unWatchSeriesMutation::updateThunk', {\n      context: context,\n      data: data\n    });\n    watchUpdate(store, data.unWatchSeries, context.currentUser.id, true);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport log from 'loglevel';\nexport var actionMaker = function actionMaker(actionArr, useConsole) {\n  return actionArr.reduce(function (acc, acStr) {\n    return _objectSpread({}, acc, _defineProperty({}, acStr, useConsole ? function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return log.info(acStr, args);\n    } : function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return alert(\"\".concat(acStr, \"::\") + JSON.stringify(args, null, 2));\n    }));\n  }, {});\n};\nexport var fakeGlobalActions = _objectSpread({}, actionMaker(['onQRButtonClick']), {}, actionMaker(['signOut', 'forceSignIn', 'addToHomeScreen', 'setHomeState', 'onCameraClick', 'onLibraryClick', 'onOfflineMenuClick', 'onSettingsClick', 'resetAllState', 'resetApp', 'dismissInstall', 'setUseOffline', 'onQRButtonClick', 'onMenuBack', 'onAvatarClick', 'onQRCapture'], true));","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _default = {\n  admin: {\n    series: {\n      'create:own': ['*'],\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    },\n    photo: {\n      'create:any': ['*'],\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    }\n  },\n  nonuser: {\n    photo: {\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    },\n    series_public: {\n      'read:any': ['*']\n    },\n    series_open: {\n      'read:any': ['*']\n    }\n  },\n  user: {\n    series: {\n      'create:own': ['*'],\n      'read:own': ['*'],\n      'update:own': ['*'],\n      'delete:own': ['*']\n    },\n    series_public: {\n      'read:any': ['*']\n    },\n    series_open: {\n      'read:any': ['*'],\n      'update:any': ['photos']\n    },\n    photo: {\n      'read:any': ['*'],\n      'create:own': ['*'],\n      'update:own': ['*'],\n      'delete:own': ['*']\n    }\n  }\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.timestampToHTML5Input = timestampToHTML5Input;\nexports.HTML5InputToTimestamp = HTML5InputToTimestamp;\nexports.convertJSDatetoTimestamp = exports.parseDate = exports.formatDateAgo = exports.fixParseDate = exports.formatDate = void 0;\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _util = require(\"./util\");\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar formatDate = function formatDate(utctimestamp) {\n  var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'LLLL';\n  if (utctimestamp && !(0, _util.isNumeric)(utctimestamp)) _loglevel[\"default\"].error('formatDate: utctimestamp must be numeric');\n  var val = utctimestamp || Date.now();\n  return (0, _moment[\"default\"])(val, 'x').format(format);\n};\n\nexports.formatDate = formatDate;\nvar EARLY_DATE = 344505600000;\n\nvar fixParseDate = function fixParseDate(inTimestamp) {\n  var isGMT = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var retVal = null;\n\n  if (inTimestamp !== null && inTimestamp !== undefined) {\n    var newInTimeStamp = inTimestamp;\n\n    if (typeof newInTimeStamp === 'string' && (0, _util.isNumeric)(newInTimeStamp)) {\n      newInTimeStamp = parseInt(newInTimeStamp, 10);\n    }\n\n    try {\n      var jsDate = new Date(newInTimeStamp);\n      retVal = jsDate.getTime();\n\n      if ((0, _util.isNumeric)(newInTimeStamp) && (!retVal || retVal < EARLY_DATE)) {\n        retVal = parseInt(newInTimeStamp, 10);\n        if (retVal > 0) retVal = retVal * 1000;\n\n        if (!isGMT) {\n          var tzOffset = jsDate.getTimezoneOffset();\n          retVal = retVal + tzOffset * 60 * 1000;\n        }\n      }\n\n      retVal = String(retVal);\n    } catch (e) {\n      _loglevel[\"default\"].error('fixParseDate: Error parsing datetime:' + newInTimeStamp);\n    }\n  }\n\n  return retVal;\n};\n\nexports.fixParseDate = fixParseDate;\n\nvar formatDateAgo = function formatDateAgo(utctimestamp) {\n  var val = utctimestamp || Date.now();\n  return (0, _moment[\"default\"])(val, 'x').fromNow();\n};\n\nexports.formatDateAgo = formatDateAgo;\n\nvar parseDate = function parseDate(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x');\n};\n\nexports.parseDate = parseDate;\n\nvar convertJSDatetoTimestamp = function convertJSDatetoTimestamp(jsDate) {\n  return _moment[\"default\"].utc(jsDate).format('x');\n};\n\nexports.convertJSDatetoTimestamp = convertJSDatetoTimestamp;\n\nfunction timestampToHTML5Input(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x').format('YYYY-MM-DDTkk:mm');\n}\n\nfunction HTML5InputToTimestamp(isoStr) {\n  return (0, _moment[\"default\"])(new Date(isoStr), 'YYYY-MM-DDTkk:mm').format('x');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatNum = formatNum;\nexports.clearSelection = clearSelection;\nexports.isObjectWithKeys = isObjectWithKeys;\nexports.makeDomArray = makeDomArray;\nexports.capitalizeFirstLetter = capitalizeFirstLetter;\nexports.numericArrayCompare = numericArrayCompare;\nexports.caseInsensitiveSort = caseInsensitiveSort;\nexports.decodeUnbufferedBase64 = decodeUnbufferedBase64;\nexports.encodeUnbufferedBase64 = encodeUnbufferedBase64;\nexports.isObject = isObject;\nexports.arrToObj = arrToObj;\nexports.getRandomArbitraryInt = getRandomArbitraryInt;\nexports.debounce = debounce;\nexports.chunkArray = exports.base64toJSON = exports.json2base64 = exports.urlizeb64 = exports.isNumeric = void 0;\n\nvar _numeral = _interopRequireDefault(require(\"numeral\"));\n\nvar _zlib = _interopRequireDefault(require(\"zlib\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar isNumeric = function isNumeric(num) {\n  try {\n    return !isNaN(parseFloat(num)) && isFinite(num);\n  } catch (e) {\n    return false;\n  }\n};\n\nexports.isNumeric = isNumeric;\n\nvar urlizeb64 = function urlizeb64(x) {\n  return x.replace('+', '-').replace('/', '_').replace(/=+$/, '');\n};\n\nexports.urlizeb64 = urlizeb64;\n\nfunction formatNum(num, precision) {\n  try {\n    var precstr = precision > 0 ? '.' + Array(precision + 1).join('0') : '';\n    var newprec = isNumeric(num) ? (0, _numeral[\"default\"])(num).format(\"0,0\".concat(precstr)) : num;\n    return newprec.replace(/(\\.(0{0,1}[1-9]*))0+$/, '$1');\n  } catch (e) {\n    return num;\n  }\n}\n\nfunction clearSelection() {\n  if (document.selection && document.selection.empty) {\n    document.selection.empty();\n  } else if (window.getSelection) {\n    var sel = window.getSelection();\n    sel.removeAllRanges();\n  }\n}\n\nfunction isObjectWithKeys(obj) {\n  return _typeof(obj) === 'object' && obj !== null && Object.keys(obj).length > 0;\n}\n\nfunction makeDomArray(domnode) {\n  if (!domnode) return [];\n  var keys = Object.keys(domnode);\n  if (keys.length > 1 || keys.length === 0) throw Error('Expected nester domnode structure.');\n  if (!domnode) return [];\n  if (!domnode[keys[0]]) return [];\n  return Array.isArray(domnode[keys[0]]) ? domnode[keys[0]] : [domnode[keys[0]]];\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction numericArrayCompare(arr1, arr2) {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) return false;\n  if (arr1.length !== arr2.length) return false;\n  return !arr1.some(function (el, idx) {\n    return el !== arr2[idx];\n  });\n}\n\nfunction caseInsensitiveSort(a, b) {\n  if (a.toLowerCase() < b.toLowerCase()) return -1;\n  if (a.toLowerCase() > b.toLowerCase()) return 1;\n  return 0;\n}\n\nfunction decodeUnbufferedBase64(hash) {\n  var missingPadding = hash.length % 4;\n\n  if (missingPadding !== 0) {\n    var newhash = hash + Array(4 - missingPadding).join('=');\n    return Buffer.from(newhash, 'base64').toString();\n  } else {\n    return Buffer.from(hash, 'base64').toString();\n  }\n}\n\nfunction encodeUnbufferedBase64(str) {\n  return urlizeb64(Buffer.from(str).toString('base64'));\n}\n\nfunction isObject(o) {\n  return o instanceof Object && o.constructor === Object;\n}\n\nfunction arrToObj(data) {\n  for (var key in data) {\n    if (data.hasOwnProperty(key)) {\n      var keyDat = data[key];\n\n      if (keyDat._) {\n        keyDat.val = keyDat._;\n        delete keyDat._;\n      }\n\n      if (keyDat.$) {\n        keyDat.attr = keyDat.$;\n        delete keyDat.$;\n      }\n\n      if (_typeof(keyDat) === 'object') {\n        data[key] = arrToObj(keyDat);\n\n        if (Array.isArray(keyDat) && keyDat.length === 1 && typeof keyDat[0] === 'string') {\n          if (isNumeric(keyDat[0])) data[key] = Number(keyDat[0]);else data[key] = keyDat[0].replace(/\\\\/g, '/');\n        } else if (Array.isArray(keyDat) && keyDat.length === 1 && isObject(keyDat[0]) && Object.keys(keyDat[0]).length === 1) {\n          data[key] = keyDat[0][Object.keys(keyDat[0])[0]];\n        }\n\n        if (_typeof(data[key]) && data[key].length === 0) {\n          delete data[key];\n        }\n\n        if (typeof data[key] === 'string' && isNumeric(data[key])) data[key] = Number(data[key]);\n      }\n    }\n  }\n\n  return data;\n}\n\nvar json2base64 = function json2base64(text) {\n  return new Promise(function (resolve, reject) {\n    _zlib[\"default\"].gzip(JSON.stringify(text), function (err, data) {\n      if (err) reject(err);else resolve(data.toString('base64'));\n    });\n  });\n};\n\nexports.json2base64 = json2base64;\n\nvar base64toJSON = function base64toJSON(b64String) {\n  var buff = Buffer.from(b64String, 'base64');\n  return new Promise(function (resolve, reject) {\n    _zlib[\"default\"].gunzip(buff, function (err, data) {\n      if (err) reject(err);else resolve(JSON.parse(data.toString()));\n    });\n  });\n};\n\nexports.base64toJSON = base64toJSON;\n\nvar chunkArray = function chunkArray(arr, chunkSize) {\n  var result = [];\n\n  for (var i = 0; i < arr.length; i += chunkSize) {\n    result.push(arr.slice(i, i + chunkSize));\n  }\n\n  return result;\n};\n\nexports.chunkArray = chunkArray;\n\nfunction getRandomArbitraryInt(min, max) {\n  return parseInt(Math.random() * (max - min) + min, 10);\n}\n\nfunction debounce(func, wait, immediate) {\n  var _this = this;\n\n  var timeout = null;\n  return function () {\n    for (var _len = arguments.length, innerArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      innerArgs[_key] = arguments[_key];\n    }\n\n    var context = _this;\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      timeout = null;\n\n      if (!immediate) {\n        func.apply(context, innerArgs);\n      }\n    }, wait);\n\n    if (callNow) {\n      func.apply(context, innerArgs);\n    }\n  };\n}\n\n;","export default {\n  '@global': {\n    '.mapboxgl-map': {\n      font: '12px/20px \\'Helvetica Neue\\', Arial, Helvetica, sans-serif',\n      overflow: 'hidden',\n      position: 'relative',\n      W: 'rgba(0, 0, 0, 0)'\n    },\n    '.mapboxgl-map:-webkit-full-screen': {\n      width: '100%',\n      height: '100%'\n    },\n    '.mapboxgl-canary': {\n      backgroundColor: 'salmon'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-interactive, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass': {\n      cursor: 'grab',\n      fallbacks: [{\n        M: 'none'\n      }, {\n        cursor: '-moz-grab'\n      }, {\n        cursor: '-webkit-grab'\n      }],\n      M: 'none',\n      W: 'none',\n      userSelect: 'none'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-interactive:active, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass:active': {\n      cursor: 'grabbing',\n      fallbacks: [{\n        cursor: '-moz-grabbing'\n      }, {\n        cursor: '-webkit-grabbing'\n      }]\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas': {\n      touchAction: 'pan-x pan-y'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas': {\n      touchAction: 'pinch-zoom'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas': {\n      touchAction: 'none'\n    },\n    '.mapboxgl-ctrl-top-left, .mapboxgl-ctrl-top-right, .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right': {\n      position: 'absolute',\n      pointerEvents: 'none',\n      zIndex: '2'\n    },\n    '.mapboxgl-ctrl-top-left': {\n      top: '0',\n      left: '0'\n    },\n    '.mapboxgl-ctrl-top-right': {\n      top: '0',\n      right: '0'\n    },\n    '.mapboxgl-ctrl-bottom-left': {\n      bottom: '0',\n      left: '0'\n    },\n    '.mapboxgl-ctrl-bottom-right': {\n      right: '0',\n      bottom: '0'\n    },\n    '.mapboxgl-ctrl': {\n      clear: 'both',\n      pointerEvents: 'auto',\n      transform: 'translate(0, 0)'\n    },\n    '.mapboxgl-ctrl-top-left .mapboxgl-ctrl': {\n      margin: '10px 0 0 10px',\n      float: 'left'\n    },\n    '.mapboxgl-ctrl-top-right .mapboxgl-ctrl': {\n      margin: '10px 10px 0 0',\n      float: 'right'\n    },\n    '.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl': {\n      margin: '0 0 10px 10px',\n      float: 'left'\n    },\n    '.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl': {\n      margin: '0 10px 10px 0',\n      float: 'right'\n    },\n    '.mapboxgl-ctrl-group': {\n      borderRadius: 4,\n      overflow: 'hidden',\n      background: '#fff'\n    },\n    '.mapboxgl-ctrl-group:not(:empty)': {\n      M: '0 0 2px rgba(0, 0, 0, 0.1)',\n      W: '0 0 2px rgba(0, 0, 0, 0.1)',\n      boxShadow: '0 0 0 2px rgba(0, 0, 0, 0.1)'\n    },\n    '.mapboxgl-ctrl-group > button': {\n      width: 30,\n      height: 30,\n      display: 'block',\n      padding: '0',\n      outline: 'none',\n      border: '0',\n      boxSizing: 'border-box',\n      backgroundColor: 'transparent',\n      cursor: 'pointer'\n    },\n    '.mapboxgl-ctrl-group > button + button': {\n      borderTop: '1px solid #ddd'\n    },\n    '.mapboxgl-ctrl > button::-moz-focus-inner': {\n      border: '0',\n      padding: '0'\n    },\n    '.mapboxgl-ctrl > button:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)'\n    },\n    '.mapboxgl-ctrl-icon, .mapboxgl-ctrl-icon > .mapboxgl-ctrl-compass-arrow': {\n      speak: 'none',\n      W: 'antialiased',\n      M: 'grayscale'\n    },\n    '.mapboxgl-ctrl-icon': {\n      padding: 5\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-icon-disabled': {\n      opacity: '0.25',\n      borderColor: '#373737'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23333333;\\' d=\\'m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23333333;\\' d=\\'M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23333\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23aaa\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%2333b5e5\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23e58978\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%2333b5e5\\'%3E %3Cpath d=\\'M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23e54e33\\'%3E %3Cpath d=\\'M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting': {\n      W: 'mapboxgl-spin 2s infinite linear',\n      M: 'mapboxgl-spin 2s infinite linear',\n      O: 'mapboxgl-spin 2s infinite linear',\n      fallbacks: [{\n        M: 'mapboxgl-spin 2s infinite linear'\n      }],\n      animation: 'mapboxgl-spin 2s infinite linear'\n    },\n    '@keyframes mapboxgl-spin': {\n      '0%': {\n        W: 'rotate(0deg)',\n        M: 'rotate(0deg)',\n        O: 'rotate(0deg)',\n        transform: 'rotate(0deg)'\n      },\n      '100%': {\n        W: 'rotate(360deg)',\n        M: 'rotate(360deg)',\n        O: 'rotate(360deg)',\n        transform: 'rotate(360deg)'\n      }\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath d=\\'M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z \\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23000000;\\' d=\\'M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z \\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass > .mapboxgl-ctrl-compass-arrow': {\n      width: 20,\n      height: 20,\n      margin: 5,\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpolygon fill=\\'%23333333\\' points=\\'6,9 10,1 14,9\\'/%3E %3Cpolygon fill=\\'%23CCCCCC\\' points=\\'6,11 10,19 14,11 \\'/%3E %3C/svg%3E\")',\n      backgroundRepeat: 'no-repeat',\n      display: 'inline-block'\n    },\n    'a.mapboxgl-ctrl-logo': {\n      width: 85,\n      height: 21,\n      margin: '0 0 -3px -3px',\n      display: 'block',\n      backgroundRepeat: 'no-repeat',\n      cursor: 'pointer',\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3C?xml version=\\'1.0\\' encoding=\\'utf-8\\'?%3E%3Csvg version=\\'1.1\\' id=\\'Layer_1\\' xmlns=\\'http://www.w3.org/2000/svg\\' xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' x=\\'0px\\' y=\\'0px\\' viewBox=\\'0 0 84.49 21\\' style=\\'enable-background:new 0 0 84.49 21;\\' xml:space=\\'preserve\\'%3E%3Cg%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z\\'/%3E %3Cpolygon class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' points=\\'14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 \\'/%3E%3C/g%3E%3C/svg%3E\")'\n    },\n    'a.mapboxgl-ctrl-logo.mapboxgl-compact': {\n      width: 21,\n      height: 21,\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3C?xml version=\\'1.0\\' encoding=\\'utf-8\\'?%3E %3Csvg version=\\'1.1\\' id=\\'Layer_1\\' xmlns=\\'http://www.w3.org/2000/svg\\' xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' x=\\'0px\\' y=\\'0px\\' viewBox=\\'0 0 21 21\\' style=\\'enable-background:new 0 0 21 21;\\' xml:space=\\'preserve\\'%3E%3Cg transform=\\'translate(0,0.01)\\'%3E%3Cpath d=\\'m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z\\' style=\\'opacity:0.9',\n      fill: '%23ffffff',\n      enableBackground: 'new\\' class=\\'st0\\'/%3E%3C/g%3E%3C/svg%3E\")',\n      fallbacks: [{\n        enableBackground: 'new\\' class=\\'st1\\'/%3E%3Cpolygon points=\\'11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 \\' style=\\'opacity:0.9'\n      }, {\n        fill: '%23ffffff'\n      }, {\n        enableBackground: 'new\\' class=\\'st1\\'/%3E%3Cpath d=\\'M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z\\' style=\\'opacity:0.35'\n      }, {\n        enableBackground: 'new\\' class=\\'st0\\'/%3E%3Cpath d=\\'M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z\\' style=\\'opacity:0.35'\n      }]\n    },\n    '.mapboxgl-ctrl.mapboxgl-ctrl-attrib': {\n      padding: '0 5px',\n      backgroundColor: 'rgba(255, 255, 255, 0.5)',\n      margin: '0'\n    },\n    '@media screen': {\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact': {\n        minHeight: 20,\n        padding: '0',\n        margin: 10,\n        position: 'relative',\n        backgroundColor: '#fff',\n        borderRadius: '3px 12px 12px 3px'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact:hover': {\n        padding: '2px 24px 2px 4px',\n        visibility: 'visible',\n        marginTop: 6\n      },\n      '.mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover, .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover': {\n        padding: '2px 4px 2px 24px',\n        borderRadius: '12px 3px 3px 12px'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner': {\n        display: 'none'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner': {\n        display: 'block'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        content: '\\'\\'',\n        cursor: 'pointer',\n        position: 'absolute',\n        backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath fill=\\'%23333333\\' fill-rule=\\'evenodd\\' d=\\'M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0\\'/%3E %3C/svg%3E\")',\n        backgroundColor: 'rgba(255, 255, 255, 0.5)',\n        width: 24,\n        height: 24,\n        boxSizing: 'border-box',\n        borderRadius: 12\n      },\n      '.mapboxgl-ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        bottom: '0',\n        right: '0'\n      },\n      '.mapboxgl-ctrl-top-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        top: '0',\n        right: '0'\n      },\n      '.mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        top: '0',\n        left: '0'\n      },\n      '.mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        bottom: '0',\n        left: '0'\n      }\n    },\n    '.mapboxgl-ctrl-attrib a': {\n      color: 'rgba(0, 0, 0, 0.75)',\n      textDecoration: 'none'\n    },\n    '.mapboxgl-ctrl-attrib a:hover': {\n      color: 'inherit',\n      textDecoration: 'underline'\n    },\n    '.mapboxgl-ctrl-attrib .mapbox-improve-map': {\n      fontWeight: 'bold',\n      marginLeft: 2\n    },\n    '.mapboxgl-attrib-empty': {\n      display: 'none'\n    },\n    '.mapboxgl-ctrl-scale': {\n      backgroundColor: 'rgba(255, 255, 255, 0.75)',\n      fontSize: 10,\n      borderWidth: 'medium 2px 2px',\n      borderStyle: 'none solid solid',\n      borderColor: '#333',\n      padding: '0 5px',\n      color: '#333',\n      boxSizing: 'border-box'\n    },\n    '.mapboxgl-popup': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-flex'\n      }],\n      willChange: 'transform',\n      pointerEvents: 'none'\n    },\n    '.mapboxgl-popup-anchor-top, .mapboxgl-popup-anchor-top-left, .mapboxgl-popup-anchor-top-right': {\n      W: 'column',\n      flexDirection: 'column'\n    },\n    '.mapboxgl-popup-anchor-bottom, .mapboxgl-popup-anchor-bottom-left, .mapboxgl-popup-anchor-bottom-right': {\n      W: 'column-reverse',\n      flexDirection: 'column-reverse'\n    },\n    '.mapboxgl-popup-anchor-left': {\n      W: 'row',\n      flexDirection: 'row'\n    },\n    '.mapboxgl-popup-anchor-right': {\n      W: 'row-reverse',\n      flexDirection: 'row-reverse'\n    },\n    '.mapboxgl-popup-tip': {\n      width: '0',\n      height: '0',\n      border: '10px solid transparent',\n      zIndex: '1'\n    },\n    '.mapboxgl-popup-anchor-top .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderTop: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip': {\n      W: 'flex-start',\n      alignSelf: 'flex-start',\n      borderTop: 'none',\n      borderLeft: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip': {\n      W: 'flex-end',\n      alignSelf: 'flex-end',\n      borderTop: 'none',\n      borderRight: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderBottom: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip': {\n      W: 'flex-start',\n      alignSelf: 'flex-start',\n      borderBottom: 'none',\n      borderLeft: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip': {\n      W: 'flex-end',\n      alignSelf: 'flex-end',\n      borderBottom: 'none',\n      borderRight: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-left .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderLeft: 'none',\n      borderRightColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-right .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderRight: 'none',\n      borderLeftColor: '#fff'\n    },\n    '.mapboxgl-popup-close-button': {\n      position: 'absolute',\n      right: '0',\n      top: '0',\n      border: '0',\n      borderRadius: '0 3px 0 0',\n      cursor: 'pointer',\n      backgroundColor: 'transparent'\n    },\n    '.mapboxgl-popup-close-button:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)'\n    },\n    '.mapboxgl-popup-content': {\n      position: 'relative',\n      background: '#fff',\n      borderRadius: 3,\n      boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)',\n      padding: '10px 10px 15px',\n      pointerEvents: 'auto'\n    },\n    '.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content': {\n      borderTopLeftRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content': {\n      borderTopRightRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content': {\n      borderBottomLeftRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content': {\n      borderBottomRightRadius: '0'\n    },\n    '.mapboxgl-marker': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      willChange: 'transform'\n    },\n    '.mapboxgl-user-location-dot': {\n      backgroundColor: '#1da1f2',\n      width: 15,\n      height: 15,\n      borderRadius: '50%',\n      boxShadow: '0 0 2px rgba(0, 0, 0, 0.25)'\n    },\n    '.mapboxgl-user-location-dot::before': {\n      backgroundColor: '#1da1f2',\n      content: '\\'\\'',\n      width: 15,\n      height: 15,\n      borderRadius: '50%',\n      position: 'absolute',\n      W: 'mapboxgl-user-location-dot-pulse 2s infinite',\n      M: 'mapboxgl-user-location-dot-pulse 2s infinite',\n      fallbacks: [{\n        M: 'mapboxgl-user-location-dot-pulse 2s infinite'\n      }],\n      animation: 'mapboxgl-user-location-dot-pulse 2s infinite'\n    },\n    '.mapboxgl-user-location-dot::after': {\n      borderRadius: '50%',\n      border: '2px solid #fff',\n      content: '\\'\\'',\n      height: 19,\n      left: -2,\n      position: 'absolute',\n      top: -2,\n      width: 19,\n      boxSizing: 'border-box'\n    },\n    '@keyframes mapboxgl-user-location-dot-pulse': {\n      '0%': {\n        W: 'scale(1)',\n        opacity: '1',\n        M: 'scale(1)',\n        transform: 'scale(1)'\n      },\n      '70%': {\n        W: 'scale(3)',\n        opacity: '0',\n        M: 'scale(3)',\n        transform: 'scale(3)'\n      },\n      '100%': {\n        W: 'scale(1)',\n        opacity: '0',\n        M: 'scale(1)',\n        transform: 'scale(1)'\n      }\n    },\n    '.mapboxgl-user-location-dot-stale': {\n      backgroundColor: '#aaa'\n    },\n    '.mapboxgl-user-location-dot-stale::after': {\n      display: 'none'\n    },\n    '.mapboxgl-crosshair, .mapboxgl-crosshair .mapboxgl-interactive, .mapboxgl-crosshair .mapboxgl-interactive:active': {\n      cursor: 'crosshair'\n    },\n    '.mapboxgl-boxzoom': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '0',\n      height: '0',\n      background: '#fff',\n      border: '2px dotted #202020',\n      opacity: '0.5'\n    },\n    '@media print': {\n      '.mapbox-improve-map': {\n        display: 'none'\n      }\n    }\n  }\n};","export default {\n  '@global': {\n    '@font-face': {\n      fontFamily: '\\'Roboto\\'',\n      fontStyle: 'italic',\n      fontDisplay: 'swap',\n      fontWeight: '900',\n      src: 'local(\\'Roboto Black italic\\'),\\n    local(\\'Roboto-Blackitalic\\'),\\n    url(\\'./files/roboto-latin-900italic.woff2\\') format(\\'woff2\\'), \\n    url(\\'./files/roboto-latin-900italic.woff\\') format(\\'woff\\')',\n      '': undefined\n    }\n  }\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { createHttpLink } from 'apollo-link-http';\nimport { setContext } from 'apollo-link-context';\nimport { RetryLink } from 'apollo-link-retry';\nimport { IntrospectionFragmentMatcher } from 'apollo-cache-inmemory';\nimport introspectionQueryResultData from './fragmentTypes.json';\nimport { config } from '@morphoto/client-common';\nimport Auth from '@aws-amplify/auth';\nimport { ApolloLink } from 'apollo-link';\nimport { stateStore, restoreRequests } from '../offline';\nimport { InMemoryCache, ApolloClient } from 'apollo-boost';\nimport { persistCache } from 'apollo-cache-persist';\nimport log from 'loglevel';\nvar endpoints = config.endpoints;\nvar LOCAL_STORAGE_TOKEN = 'apollo-token';\nexport var APOLLOSTATES = {\n  INITIALIZING: 'Initializing',\n  AUTHENTICATING: 'Authenticating',\n  LOADING: 'Loading State',\n  APPLY_MUTATIONS: 'Applying history',\n  ERROR: 'ERROR!',\n  DONE: 'DONE'\n};\n\nfunction useGraphQL() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      client = _useState2[0],\n      setClient = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      done = _useState4[0],\n      setDone = _useState4[1];\n\n  var _useState5 = useState(APOLLOSTATES.INITIALIZING),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currState = _useState6[0],\n      setCurrState = _useState6[1];\n\n  useEffect(function () {\n    createApolloClient(function (newClient, newState) {\n      setClient(newClient);\n      setDone((client || newClient) && newState === APOLLOSTATES.DONE);\n      setCurrState(newState);\n    });\n  }, []);\n  return {\n    client: client,\n    done: done,\n    currState: currState\n  };\n}\n\nexport default useGraphQL;\n\nvar getCurrentToken = function getCurrentToken() {\n  var currSession;\n  return _regeneratorRuntime.async(function getCurrentToken$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(Auth.currentSession());\n\n        case 3:\n          currSession = _context.sent;\n          return _context.abrupt(\"return\", currSession.accessToken.jwtToken);\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", null);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 7]]);\n};\n\nfunction createApolloClient(onChange) {\n  var cache, authLink, httpLink, retry, apolloClient;\n  return _regeneratorRuntime.async(function createApolloClient$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          cache = new InMemoryCache({\n            fragmentMatcher: new IntrospectionFragmentMatcher({\n              introspectionQueryResultData: introspectionQueryResultData\n            })\n          });\n          _context3.prev = 1;\n          onChange(null, APOLLOSTATES.LOADING);\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(persistCache({\n            cache: cache,\n            storage: stateStore\n          }));\n\n        case 5:\n          _context3.next = 12;\n          break;\n\n        case 7:\n          _context3.prev = 7;\n          _context3.t0 = _context3[\"catch\"](1);\n          log.error('Error restoring Apollo cache', _context3.t0);\n          onChange(null, APOLLOSTATES.ERROR);\n          return _context3.abrupt(\"return\");\n\n        case 12:\n          authLink = setContext(function _callee(_, _ref) {\n            var headers, token, newHeaders;\n            return _regeneratorRuntime.async(function _callee$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    headers = _ref.headers;\n                    _context2.next = 3;\n                    return _regeneratorRuntime.awrap(getCurrentToken());\n\n                  case 3:\n                    token = _context2.sent;\n                    newHeaders = _objectSpread({}, headers, {\n                      authorization: token ? \"Bearer \".concat(token) : ''\n                    });\n\n                    if (token && process.env.NODE_ENV === 'development' && process.env.REACT_APP_FAKE_USER) {\n                      newHeaders.auth_user = process.env.REACT_APP_FAKE_USER;\n                    }\n\n                    return _context2.abrupt(\"return\", {\n                      headers: newHeaders\n                    });\n\n                  case 7:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            });\n          });\n          httpLink = createHttpLink({\n            uri: endpoints.graphql\n          });\n          retry = new RetryLink({\n            attempts: {\n              max: Infinity,\n              retryIf: function retryIf(error, _operation) {\n                if (error.statusCode && error.statusCode >= 400) {\n                  log.error('GRAPHQL ERRORS (NO RETRY)', {\n                    error: error,\n                    _operation: _operation\n                  });\n                  return false;\n                }\n\n                log.error('GRAPHQL ERRORS (RETRY)', {\n                  error: error,\n                  _operation: _operation\n                });\n                return true;\n              }\n            }\n          });\n          apolloClient = new ApolloClient({\n            link: ApolloLink.from([retry, authLink, httpLink]),\n            tokenName: LOCAL_STORAGE_TOKEN,\n            addTypename: true,\n            cache: cache,\n            connectToDevTools: process.env.NODE_ENV === 'development'\n          });\n          onChange(null, APOLLOSTATES.APPLY_MUTATIONS);\n          _context3.next = 19;\n          return _regeneratorRuntime.awrap(restoreRequests(apolloClient));\n\n        case 19:\n          onChange(apolloClient, APOLLOSTATES.DONE);\n\n        case 20:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, [[1, 7]]);\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PlaceIcon from '@material-ui/icons/Place';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      textAlign: 'center'\n    },\n    placeAvatar: {\n      color: theme.palette.primary.contrastText,\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      background: theme.palette.text.primary,\n      margin: 'auto'\n    },\n    placeIcon: {}\n  };\n});\n\nvar FindOnMapButton = function FindOnMapButton(_ref) {\n  var _onClick = _ref.onClick;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Avatar, {\n    className: classes.placeAvatar\n  }, React.createElement(IconButton, {\n    color: \"inherit\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _onClick();\n    }\n  }, React.createElement(PlaceIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nFindOnMapButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default FindOnMapButton;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { RawSVG } from '@morphoto/icons/dist/AppLogo';\nimport { config } from '@morphoto/client-common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dialogContent: {\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      height: '100%'\n    },\n    iconContainer: {\n      flex: '1 1 10%',\n      textAlign: 'center',\n      padding: theme.spacing(1, 0, 1, 0)\n    },\n    icon: {\n      height: 200,\n      margin: '0 auto',\n      border: \"1px solid \".concat(theme.palette.grey[100]),\n      background: theme.palette.grey[100],\n      borderRadius: '50%',\n      '& path': {\n        fill: 'url(#my-cool-gradient) #447799;'\n      }\n    },\n    title: {\n      textAlign: 'center'\n    },\n    stop1: {\n      stopColor: theme.palette.rose.main\n    },\n    stop2: {\n      stopColor: theme.palette.redorange.main\n    },\n    spacer: {\n      flex: '1 1'\n    },\n    buttonIcon: {\n      marginRight: theme.spacing(1)\n    },\n    scrollText: {\n      flex: '1 1 60%',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar AboutApp = function AboutApp(_ref) {\n  var onClose = _ref.onClose,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    onClose: onClose,\n    fullWidth: true,\n    open: open,\n    PaperProps: {\n      style: {}\n    },\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogContent, {\n    className: classes.dialogContent\n  }, React.createElement(Container, {\n    maxWidth: \"xs\"\n  }, React.createElement(\"div\", {\n    className: classes.iconContainer\n  }, React.createElement(\"svg\", {\n    className: classes.icon,\n    focusable: \"false\",\n    viewBox: \"0 0 24 24\",\n    \"aria-hidden\": \"true\",\n    role: \"presentation\"\n  }, RawSVG), React.createElement(\"svg\", {\n    style: {\n      width: 0,\n      height: 0,\n      position: 'absolute'\n    },\n    \"aria-hidden\": \"true\",\n    focusable: \"false\"\n  }, React.createElement(\"linearGradient\", {\n    id: \"my-cool-gradient\",\n    x2: \"1\",\n    y2: \"1\"\n  }, React.createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: \"#447799\",\n    className: classes.stop1\n  }), React.createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: \"#112266\",\n    className: classes.stop2\n  })))), React.createElement(\"div\", {\n    className: classes.title\n  }, React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\"\n  }, \"MorPhoto\"), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\"\n  }, \"Version:  \", config.version, \" \", React.createElement(\"em\", null, \"BETA\"))), React.createElement(Typography, {\n    className: classes.scrollText,\n    component: \"div\",\n    variant: \"caption\"\n  }), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    fullWidth: true,\n    href: \"mailto:\".concat(config.contact),\n    color: \"primary\",\n    variant: \"outlined\"\n  }, React.createElement(EmailIcon, {\n    className: classes.buttonIcon\n  }), \"Get in touch\"))), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onClose,\n    color: \"inherit\"\n  }, \"Close\")));\n};\n\nAboutApp.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func.isRequired\n};\nexport default AboutApp;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport SettingsBackupRestore from '@material-ui/icons/SettingsBackupRestore';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { AppContext } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    nuclear: {\n      color: 'red'\n    }\n  };\n});\n\nvar AppSettings = function AppSettings(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      deleteOpen = _useState2[0],\n      setDeleteOpen = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions;\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Offline data manager\"))), React.createElement(\"div\", {\n    className: classes.mapWrapper\n  }, React.createElement(List, null, React.createElement(ListItem, {\n    button: true,\n    onClick: function onClick() {\n      return setDeleteOpen({\n        action: globalActions.resetAllState,\n        title: 'Reset App State',\n        message: 'Might resolve a temporary glitch. Unfortunately this will wipe your upload queue.'\n      });\n    }\n  }, React.createElement(ListItemIcon, null, React.createElement(SettingsBackupRestore, null)), React.createElement(ListItemText, {\n    primary: 'Reset app state',\n    secondary: 'Might resolve a temporary glitch.'\n  })), React.createElement(ListItem, {\n    button: true,\n    className: classes.nuclear,\n    onClick: function onClick() {\n      return setDeleteOpen({\n        action: globalActions.resetApp,\n        title: 'RESET ALL LOCAL DATA',\n        message: 'All local images and data will be reset and you will be logged out. BE VERY SURE ABOUT THIS'\n      });\n    }\n  }, React.createElement(ListItemIcon, {\n    color: \"inherit\"\n  }, React.createElement(WarningIcon, {\n    color: \"inherit\"\n  })), React.createElement(ListItemText, {\n    primary: 'RESET ALL LOCAL DATA',\n    secondary: 'All local images and data will be reset and you will be logged out'\n  })))), deleteOpen && React.createElement(DeleteDialog, {\n    open: !!deleteOpen,\n    title: deleteOpen && deleteOpen.title,\n    message: deleteOpen && deleteOpen.message,\n    onConfirm: function onConfirm(confirmed) {\n      if (confirmed) deleteOpen.action();\n      setDeleteOpen(null);\n    }\n  }));\n};\n\nAppSettings.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default AppSettings;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Fab from '@material-ui/core/Fab';\nimport Modal from '@material-ui/core/Modal';\nimport Zoom from '@material-ui/core/Zoom';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport AddIcon from '@material-ui/icons/Add';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  var pulseCol = fade(theme.palette.secondary.light, 0.4);\n  return {\n    root: {},\n    fab: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        borderRadius: 'inherit',\n        boxShadow: \"0 0 0 0 \".concat(pulseCol),\n        animation: '$fabPulse 4s',\n        animationIterationCount: 5,\n        animationTimingFunction: 'linear'\n      }\n    },\n    '@keyframes fabPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '90%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 10px transparent\"\n      }\n    },\n    directionUp: {},\n    actionsClosed: {\n      display: 'none'\n    },\n    modalContainer: {\n      position: 'absolute',\n      bottom: '0%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    subFabContainer: {\n      padding: theme.spacing(2)\n    },\n    subFab: {},\n    subFabIcon: {\n      margin: theme.spacing(1)\n    }\n  };\n});\n\nvar AddFab = function AddFab(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      onCameraClick = _ref.onCameraClick,\n      onLibraryClick = _ref.onLibraryClick;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      down = _useState4[0],\n      setDown = _useState4[1];\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      other = _objectWithoutProperties(_useContext, [\"device\"]);\n\n  var timerRef = useRef();\n  var classes = useStyles();\n  var downRef = useRef(down);\n  var elRef = useRef();\n  downRef.current = down;\n  var realChildren = children || (device.cameraAccess ? React.createElement(AddIcon, null) : React.createElement(PhotoLibraryIcon, null));\n  useEffect(function () {\n    return function () {\n      timerRef.current = null;\n      downRef.current = null;\n    };\n  }, []);\n\n  var startTimer = function startTimer(el) {\n    if (device.ios) return;\n    if (!elRef.current) return;\n    setDown(true);\n\n    if (!open && !timerRef.current) {\n      timerRef.current = setTimeout(function () {\n        if (downRef.current) setOpen(true);\n        timerRef.current = null;\n      }, 300);\n    }\n  };\n\n  var onDown = function onDown(e) {\n    startTimer(e.currentTarget);\n  };\n\n  var block = function block(e) {\n    if (e && e.stopPropagation) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  var cameraAction = function cameraAction(e) {\n    setOpen(false);\n    setDown(false);\n    onCameraClick();\n    block(e);\n  };\n\n  var libraryAction = function libraryAction(e) {\n    setOpen(false);\n    setDown(false);\n    onLibraryClick();\n    block(e);\n  };\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.rootContainer, className),\n    ref: elRef\n  }, React.createElement(Fab, {\n    className: classes.fab,\n    onMouseDown: onDown,\n    onTouchStart: onDown,\n    onClick: function onClick(e) {\n      block(e);\n      setDown(false);\n\n      if (!open) {\n        if (device.cameraAccess) onCameraClick();else onLibraryClick();\n      }\n    },\n    disableFocusRipple: true,\n    disableTouchRipple: true,\n    disableRipple: true,\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\"\n  }, realChildren), React.createElement(Modal, {\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    open: open,\n    onClose: function onClose() {\n      return setOpen(false);\n    }\n  }, React.createElement(\"div\", {\n    className: classes.modalContainer\n  }, React.createElement(Zoom, {\n    in: open,\n    timeout: 500,\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: classes.subFabContainer\n  }, React.createElement(Fab, {\n    className: classes.subFab,\n    disableFocusRipple: true,\n    variant: \"extended\",\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\",\n    onClick: function onClick() {\n      setOpen(false);\n      libraryAction();\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    color: \"inherit\",\n    className: classes.subFabIcon\n  }), \"Library\"))), React.createElement(Zoom, {\n    in: open,\n    timeout: 250,\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: classes.subFabContainer\n  }, React.createElement(Fab, {\n    className: classes.subFab,\n    disableFocusRipple: true,\n    variant: \"extended\",\n    size: \"large\",\n    disabled: !device.cameraAccess,\n    color: \"secondary\",\n    \"aria-label\": \"Add\",\n    onClick: function onClick() {\n      setOpen(false);\n      cameraAction();\n    }\n  }, React.createElement(AddCameraIcon, {\n    color: \"inherit\",\n    className: classes.subFabIcon\n  }), \"Camera\"))))));\n};\n\nAddFab.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any,\n  onCameraClick: PropTypes.func.isRequired,\n  onLibraryClick: PropTypes.func.isRequired\n};\nexport default AddFab;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\n\nvar ContextMenu = function ContextMenu(_ref) {\n  var anchorEl = _ref.anchorEl,\n      onClose = _ref.onClose,\n      menuItems = _ref.menuItems;\n  return React.createElement(Menu, {\n    anchorEl: anchorEl,\n    open: !!anchorEl,\n    onClose: onClose\n  }, menuItems.map(function (_ref2, idx) {\n    var icon = _ref2.icon,\n        color = _ref2.color,\n        text = _ref2.text,\n        hide = _ref2.hide,\n        disabled = _ref2.disabled,\n        action = _ref2.action,\n        divider = _ref2.divider;\n    var Icon = icon || null;\n    if (hide) return null;\n    if (divider) return React.createElement(Divider, {\n      key: \"contextMenu-\".concat(idx)\n    });\n    return React.createElement(MenuItem, {\n      button: true,\n      key: \"contextMenu-\".concat(idx),\n      disabled: disabled,\n      onClick: function onClick() {\n        onClose();\n        action();\n      }\n    }, Icon && React.createElement(ListItemIcon, null, React.createElement(Icon, {\n      color: disabled ? 'disabled' : undefined\n    })), React.createElement(ListItemText, {\n      primary: text,\n      primaryTypographyProps: {\n        color: color\n      }\n    }));\n  }));\n};\n\nContextMenu.propTypes = {\n  anchorEl: PropTypes.object,\n  onClose: PropTypes.func,\n  menuItems: PropTypes.arrayOf(PropTypes.shape({\n    text: PropTypes.string,\n    icon: PropTypes.any,\n    divider: PropTypes.any,\n    hide: PropTypes.bool,\n    disabled: PropTypes.bool,\n    color: PropTypes.string,\n    action: PropTypes.func\n  }))\n};\nexport default ContextMenu;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport CameraAltIcon from '@material-ui/icons/CameraAlt';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { useFileInput } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center',\n      background: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      border: \"20px solid \".concat(theme.palette.background.default)\n    },\n    icon: {\n      color: theme.palette.text.primary,\n      margin: 'auto',\n      flex: '1 1 50%',\n      height: '70%',\n      width: '70%'\n    },\n    button: {\n      margin: theme.spacing(2)\n    }\n  };\n});\n\nvar LibraryFilePicker = function LibraryFilePicker(_ref) {\n  var onLibraryAdd = _ref.onLibraryAdd,\n      onCancel = _ref.onCancel,\n      cameraPicker = _ref.cameraPicker;\n  var classes = useStyles();\n\n  var _useFileInput = useFileInput(onLibraryAdd, cameraPicker),\n      fileClickEl = _useFileInput.fileClickEl,\n      forceClick = _useFileInput.forceClick;\n\n  var cameraWords = 'Library';\n  var PlaceIcon = PhotoLibraryIcon;\n\n  if (cameraPicker) {\n    cameraWords = 'Camera';\n    PlaceIcon = CameraAltIcon;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, fileClickEl, React.createElement(PlaceIcon, {\n    className: classes.icon,\n    color: \"inherit\",\n    onClick: forceClick\n  }), React.createElement(Button, {\n    variant: \"contained\",\n    className: classes.button,\n    color: \"primary\",\n    onClick: forceClick\n  }, \"Import from \", cameraWords), React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.button,\n    color: \"secondary\",\n    onClick: onCancel\n  }, \"Cancel\"));\n};\n\nLibraryFilePicker.propTypes = {\n  onLibraryAdd: PropTypes.func.isRequired,\n  cameraPicker: PropTypes.bool,\n  onCancel: PropTypes.func.isRequired\n};\nexport default LibraryFilePicker;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      position: 'relative',\n      display: 'block',\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        bottom: 0,\n        width: '100%',\n        height: 100,\n        background: \"linear-gradient(180deg, rgba(255,255,255,0) 0%, \".concat(theme.palette.background.paper, \" 100%)\")\n      },\n      placeholder: {\n        color: theme.palette.text.secondary\n      }\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ShortLongText = function ShortLongText(_ref) {\n  var className = _ref.className,\n      label = _ref.label,\n      text = _ref.text,\n      height = _ref.height,\n      onClick = _ref.onClick,\n      placeholder = _ref.placeholder;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    onClick: onClick,\n    className: className\n  }, label && React.createElement(Typography, {\n    className: classes.formLabel,\n    variant: \"overline\"\n  }, label), !text && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\",\n    color: \"inherit\",\n    style: {\n      height: height\n    },\n    className: classNames(classes.placeholder)\n  }, placeholder || 'none'), text && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"body1\",\n    color: \"inherit\",\n    style: {\n      height: height\n    },\n    className: classNames(classes.root)\n  }, text));\n};\n\nShortLongText.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string,\n  text: PropTypes.string,\n  placeholder: PropTypes.string,\n  height: PropTypes.number,\n  onClick: PropTypes.func\n};\nShortLongText.defaultProps = {\n  height: 100\n};\nexport default ShortLongText;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar useNewImageMenu = function useNewImageMenu(cameraClick, libraryClick) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      menuEl = _useState2[0],\n      setMenuEl = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      series = _useState4[0],\n      setSeries = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      down = _useState6[0],\n      setDown = _useState6[1];\n\n  var downRef = useRef(down);\n  downRef.current = down;\n\n  var startTimer = function startTimer(el) {\n    setDown(true);\n    setTimeout(function () {\n      if (downRef && downRef.current) setMenuEl(el);\n    }, 300);\n  };\n\n  var onDownThunk = function onDownThunk(series) {\n    return function (e) {\n      setSeries(series);\n      startTimer(e.currentTarget);\n    };\n  };\n\n  var onUpThunk = function onUpThunk(series) {\n    return function (e) {\n      setSeries(series);\n      setDown(false);\n      cameraClick(series);\n    };\n  };\n\n  var onCamera = function onCamera(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    cameraClick(series);\n    setMenuEl(null);\n  };\n\n  var onLibrary = function onLibrary(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    libraryClick(series);\n    setMenuEl(null);\n  };\n\n  var onClose = function onClose(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    setMenuEl(null);\n  };\n\n  var onBlock = function onBlock(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  return {\n    onDownThunk: onDownThunk,\n    onUpThunk: onUpThunk,\n    onBlock: onBlock,\n    menu: React.createElement(CameraPopup, {\n      menuEl: menuEl,\n      onCamera: onCamera,\n      onLibrary: onLibrary,\n      onClose: onClose\n    })\n  };\n};\n\nexport default useNewImageMenu;\n\nvar CameraPopupUnstyled = function CameraPopupUnstyled(_ref) {\n  var menuEl = _ref.menuEl,\n      onCamera = _ref.onCamera,\n      onLibrary = _ref.onLibrary,\n      onClose = _ref.onClose;\n  var classes = useStyles();\n  return React.createElement(Menu, {\n    id: \"simple-menu\",\n    anchorEl: menuEl,\n    open: Boolean(menuEl),\n    className: classes.root,\n    onClose: onClose\n  }, React.createElement(MenuItem, {\n    onMouseUp: onCamera,\n    onTouchEnd: onCamera\n  }, React.createElement(AddCameraIcon, null), \"Add from camera\"), React.createElement(MenuItem, {\n    onMouseUp: onLibrary,\n    onTouchEnd: onLibrary\n  }, React.createElement(PhotoLibraryIcon, null), \" Add from Library\"));\n};\n\nCameraPopupUnstyled.propTypes = {\n  menuEl: PropTypes.object,\n  onCamera: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onLibrary: PropTypes.func.isRequired\n};\n\nvar style = function style(theme) {\n  return {\n    root: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\nexport var CameraPopup = CameraPopupUnstyled;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    bar: {\n      height: theme.spacing(2)\n    },\n    message: {},\n    msgContainer: {\n      padding: theme.spacing(0, 0.5),\n      zIndex: 3,\n      position: 'absolute',\n      display: 'flex',\n      width: '100%'\n    },\n    msgTextBright: {\n      color: 'white',\n      textShadow: '1px 1px 2px #00000066'\n    },\n    msgTextDark: {\n      color: theme.palette.jet ? theme.palette.jet.main : 'inherit',\n      textShadow: '1px 1px 2px #FFFFFF66'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    messageInner: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar UploadControlUnstyled = function UploadControlUnstyled(_ref) {\n  var className = _ref.className,\n      text = _ref.text,\n      progress = _ref.progress;\n  var classes = useStyles();\n  var finalProgress = progress > 0 ? progress : 0;\n  if (!text) return null;\n  var message = \"Uploading: \".concat(text);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(\"div\", {\n    className: classes.messageInner\n  }, React.createElement(\"div\", {\n    className: classNames(classes.msgContainer)\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: finalProgress > 30 ? classes.msgTextBright : classes.msgTextDark\n  }, message), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Typography, {\n    variant: \"caption\",\n    className: finalProgress > 90 ? classes.msgTextBright : classes.msgTextDark\n  }, finalProgress, \"%\")), React.createElement(LinearProgress, {\n    className: classes.bar,\n    color: \"primary\",\n    variant: \"determinate\",\n    value: finalProgress\n  })));\n};\n\nUploadControlUnstyled.propTypes = {\n  className: PropTypes.string,\n  text: PropTypes.string,\n  progress: PropTypes.number\n};\nvar UploadControl = UploadControlUnstyled;\nexport default UploadControl;\nexport var UploadControlCOSMOSWrapper = function UploadControlCOSMOSWrapper(_ref2) {\n  var text = _ref2.text,\n      progress = _ref2.progress;\n  var classes = useWrapperStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(Paper, {\n    className: classes.paper\n  }, React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"This is a dummy component.\")), React.createElement(UploadControl, {\n    text: text,\n    progress: progress\n  }));\n};\nUploadControlCOSMOSWrapper.propTypes = {\n  text: PropTypes.string,\n  progress: PropTypes.number\n};\n\nvar wrapperStyle = function wrapperStyle(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    paper: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useWrapperStyles = makeStyles(wrapperStyle);\nUploadControlCOSMOSWrapper.displayName = UploadControl.displayName;\nexport var UploadControlTest = UploadControlCOSMOSWrapper;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport themes from '@morphoto/themes';\nimport { AppLogo } from '@morphoto/icons';\nimport { config } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%'\n    },\n    bgSwoosh: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 0\n    },\n    logoSpin: {\n      animation: '$loadingSpin 4s linear infinite, $loadingFade 6s infinite'\n    },\n    '@keyframes loadingSpin': {\n      'from': {\n        transform: 'rotate(0deg) translateY(-50%) translateX(-50%)'\n      },\n      'to': {\n        transform: 'rotate(360deg) translateY(-50%) translateX(-50%)'\n      }\n    },\n    '@keyframes loadingFade': {\n      '0%': {\n        opacity: 0.1\n      },\n      '50%': {\n        opacity: 1\n      },\n      '100%': {\n        opacity: 0.1\n      }\n    },\n    spacer: {\n      flex: '1 1 5%'\n    },\n    logoContainer: {\n      overflow: 'hidden',\n      position: 'relative',\n      flex: '1 1 40%',\n      width: '100%',\n      minHeight: 90\n    },\n    logo: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '0% 0%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      width: '90%',\n      height: '90%'\n    },\n    inner: {\n      margin: '0 auto',\n      padding: theme.spacing(0, 1),\n      width: '100%',\n      height: '100%',\n      minWidth: 200,\n      maxWidth: 350,\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center'\n    }\n  };\n});\n\nvar LoadingContainer = function LoadingContainer(_ref) {\n  var children = _ref.children,\n      spin = _ref.spin,\n      noAppInfo = _ref.noAppInfo,\n      message = _ref.message;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(\"div\", {\n    className: classes.logoContainer\n  }, React.createElement(AppLogo, {\n    className: classNames(classes.logo, spin ? classes.logoSpin : null)\n  })), !noAppInfo && React.createElement(React.Fragment, null, React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\"\n  }, config.appName), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\"\n  }, config.versionText)), message && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"subtitle1\"\n  }, message), children, React.createElement(\"div\", {\n    className: classes.spacer\n  })));\n};\n\nLoadingContainer.propTypes = {\n  children: PropTypes.any,\n  spin: PropTypes.bool,\n  message: PropTypes.string,\n  noAppInfo: PropTypes.bool\n};\nexport default LoadingContainer;\nexport var LoadingContainerThemed = function LoadingContainerThemed(props) {\n  return React.createElement(ThemeProvider, {\n    theme: themes.login\n  }, React.createElement(LoadingContainer, props));\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { TextField, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    rootEdit: {},\n    formControl: {\n      width: '100%'\n    },\n    textBody: {\n      whiteSpace: 'pre-line'\n    },\n    actionButtons: {\n      textAlign: 'right'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar DateControl = function DateControl(_ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      hint = _ref.hint,\n      _onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, label), React.createElement(TextField, {\n    type: \"datetime-local\",\n    fullWidth: true,\n    value: dates.timestampToHTML5Input(value),\n    className: classes.textField,\n    onChange: function onChange(e) {\n      return _onChange(dates.HTML5InputToTimestamp(e.target.value));\n    }\n  }), hint && React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.hint\n  }, hint));\n};\n\nDateControl.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  hint: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func.isRequired\n};\nexport default DateControl;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    rootEdit: {},\n    formControl: {\n      width: '100%'\n    },\n    textBody: {\n      whiteSpace: 'pre-line'\n    },\n    actionButtons: {\n      textAlign: 'right'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar DateView = function DateView(_ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      className = _ref.className;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, label), React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.hint\n  }, value ? dates.formatDate(value) : ''));\n};\n\nDateView.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string\n};\nexport default DateView;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport TextField from '@material-ui/core/TextField';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\nimport log from 'loglevel';\nexport var ERROR_SEND_STATES = {\n  UNSENT: 'UNSENT',\n  SENDING: 'SENDING',\n  SENT: 'SENT',\n  ERROR: 'ERROR'\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n      padding: theme.spacing(1),\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center',\n      color: theme.palette.text.primary,\n      border: \"20px solid \".concat(theme.palette.text.secondary)\n    },\n    buttonGroup: {\n      display: 'flex'\n    },\n    button: {},\n    icon: {\n      opacity: 0.5,\n      margin: 'auto',\n      flex: '0 1 10%',\n      width: '50%'\n    },\n    text: {},\n    helperText: {\n      textAlign: 'left'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    stack: {\n      padding: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n      fontSize: '8px',\n      flexGrow: 1,\n      textAlign: 'left',\n      whiteSpace: 'pre-wrap',\n      overflow: 'scroll',\n      color: theme.palette.error.main,\n      fontFamily: 'Consolas, monaco, monospace'\n    }\n  };\n});\n\nvar ErrorScreen = function ErrorScreen(_ref) {\n  var error = _ref.error,\n      sendState = _ref.sendState,\n      reportError = _ref.reportError;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dlgOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions;\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      note = _useState4[0],\n      setNote = _useState4[1];\n\n  log.info('ERRORCOJNTEXT', {\n    reportError: reportError\n  });\n  var stackEl = React.createElement(\"div\", {\n    className: classes.spacer\n  });\n\n  try {\n    if (process.env.NODE_ENV === 'development') {\n      stackEl = React.createElement(Typography, {\n        className: classes.stack\n      }, error.stack);\n    }\n  } catch (e) {}\n\n  var buttonText = 'Report this bug';\n  var disabled = false;\n  var color = 'primary';\n\n  switch (sendState) {\n    case ERROR_SEND_STATES.UNSENT:\n      buttonText = 'Report this bug';\n      break;\n\n    case ERROR_SEND_STATES.SENDING:\n      disabled = true;\n      color = 'default';\n      buttonText = 'Sending...';\n      break;\n\n    case ERROR_SEND_STATES.SENT:\n      color = 'default';\n      disabled = true;\n      buttonText = 'Thank you for your feedback';\n      break;\n\n    case ERROR_SEND_STATES.ERROR:\n      color = 'secondary';\n      disabled = true;\n      buttonText = 'ERROR SENDING BUG REPORT';\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ThemeProvider, {\n    theme: themes.home\n  }, React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(ErrorIcon, {\n    className: classes.icon,\n    color: \"error\"\n  }), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.text,\n    color: \"inherit\"\n  }, \"Something went wrong\"), error && error.message && React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.text,\n    color: \"inherit\"\n  }, error.message), React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    disabled: disabled,\n    color: color,\n    onClick: function onClick() {\n      return setDialogOpen(true);\n    }\n  }, React.createElement(BugReportIcon, null), buttonText), stackEl, React.createElement(\"div\", {\n    className: classes.buttonGroup\n  }, React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: globalActions.resetAllState\n  }, React.createElement(DeleteIcon, null), \"Soft Reset\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: globalActions.resetApp\n  }, React.createElement(DeleteIcon, null), \"Hard Reset\")), React.createElement(Typography, {\n    className: classes.helperText,\n    variant: \"caption\",\n    color: \"inherit\",\n    component: \"div\"\n  }, React.createElement(\"strong\", null, \"Soft\"), \" will try to retain any queued uploads or pending edits.\"), React.createElement(Typography, {\n    className: classes.helperText,\n    variant: \"caption\",\n    color: \"inherit\",\n    component: \"div\"\n  }, React.createElement(\"strong\", null, \"Hard\"), \" will wipe any local data and then re-download it from the server.\"), React.createElement(Dialog, {\n    open: dlgOpen,\n    fullScreen: true,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    },\n    \"aria-labelledby\": \"form-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\"\n  }, \"Report a bug\"), React.createElement(DialogContent, null, React.createElement(DialogContentText, null, \"What were you trying to do when the error happened? (optional)\"), React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    multiline: true,\n    onChange: function onChange(e) {\n      return setNote(e.target.value);\n    },\n    rows: \"3\",\n    rowsMax: \"6\",\n    id: \"note\",\n    placeholder: \"I tried to X and then Y happened...\",\n    label: \"My report\",\n    fullWidth: true\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return setDialogOpen(false);\n    },\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      reportError(note);\n      setDialogOpen(false);\n    },\n    color: \"primary\"\n  }, \"Send\")))));\n};\n\nErrorScreen.propTypes = {\n  error: PropTypes.object,\n  sendState: PropTypes.string,\n  reportError: PropTypes.func.isRequired\n};\nexport default ErrorScreen;","export { default as FindOnMapButton } from './FindOnMapButton';\nexport { default as AboutApp } from './AboutApp';\nexport { default as AppSettings } from './AppSettings';\nexport { default as AddFab } from './AddFab';\nexport { default as ContextMenu } from './ContextMenu';\nexport { default as LibraryFilePicker } from './LibraryFilePicker';\nexport { default as ShortLongText } from './ShortLongText';\nexport { default as useNewImageMenu } from './useNewImageMenu';\nexport { default as UploadControl } from './UploadControl';\nexport { default as LoadingContainer, LoadingContainerThemed } from './LoadingContainer';\nexport { default as DateControl } from './DateControl';\nexport { default as DateView } from './DateView';\nexport { default as ErrorScreen, ERROR_SEND_STATES } from './ErrorScreen';","export default (function (theme) {\n  return {\n    '@global': {\n      '.mapboxgl-ctrl-group': {\n        position: 'absolute',\n        top: '70px',\n        left: '10px',\n        opacity: '0.8'\n      }\n    },\n    mapContainer: {\n      height: '100%',\n      width: '100%'\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport default require('./themes').default;\nexport var mapbox = require('./jss/mapbox.css').default;\nexport var roboto = require('./jss/typeface-roboto.css').default;\nexport var baseline = require('./jss/baseline.css').default;\nexport var globalStyle = {\n  '@global': _objectSpread({}, require('./jss/mapbox.css')['@global'], {}, require('./jss/typeface-roboto.css')['@global'])\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport localforage from 'localforage';\nimport createSeries from './graphql/mutations/createSeries';\nimport updateSeries from './graphql/mutations/updateSeries';\nimport createPhoto from './graphql/mutations/createPhoto';\nimport updatePhoto from './graphql/mutations/updatePhoto';\nimport deletePhoto from './graphql/mutations/deletePhoto';\nimport deleteSeries from './graphql/mutations/deleteSeries';\nimport watch from './graphql/mutations/watch';\nimport unWatch from './graphql/mutations/unwatch';\nimport uuidv4 from 'uuid/v4';\nimport log from 'loglevel';\nlocalforage.config({\n  storeName: 'MorPhoto',\n  description: 'image blobs'\n});\nexport var imgStore = localforage.createInstance({\n  name: 'imgStore'\n});\nexport var stateStore = localforage.createInstance({\n  name: 'stateStore'\n});\nvar OFFLINEMUTATIONS = 'offlineMutations';\n\nfunction getPendingMutations() {\n  return stateStore.getItem(OFFLINEMUTATIONS).then(function (mutations) {\n    log.debug('offline::getPendingPromise', JSON.parse(mutations) || []);\n    return JSON.parse(mutations) || [];\n  });\n}\n\nfunction setPendingPromise(mutations) {\n  log.debug('offline::setPendingPromise', mutations);\n  return stateStore.setItem(OFFLINEMUTATIONS, JSON.stringify(mutations));\n}\n\nexport function pushMutationPromise(params, mutation, context) {\n  var id = uuidv4();\n  return getPendingMutations().then(function (mutations) {\n    return mutations.concat({\n      id: id,\n      params: params,\n      mutation: mutation,\n      context: context\n    });\n  }).then(function (data) {\n    log.debug('offline::pushMutationPromise', data);\n    return data;\n  }).then(setPendingPromise).then(function () {\n    return id;\n  });\n}\nexport function popMutationPromise(id) {\n  return getPendingMutations().then(function (mutations) {\n    return mutations.filter(function (pm) {\n      return pm.id !== id;\n    });\n  }).then(function (data) {\n    log.debug('offline::popMutationPromise', data);\n    return data;\n  }).then(setPendingPromise);\n}\n\nfunction updateHandler(resp, context) {\n  log.debug('offline::updateHandler', {\n    resp: resp,\n    context: context\n  });\n  if (resp.data.createSeries) return createSeries.updateThunk(context);else if (resp.data.createPhoto) return createPhoto.updateThunk(context);else if (resp.data.updateSeries) return updateSeries.updateThunk(context);else if (resp.data.updatePhoto) return updatePhoto.updateThunk(context);else if (resp.data.deletePhoto) return deletePhoto.updateThunk(context);else if (resp.data.deleteSeries) return deleteSeries.updateThunk(context);else if (resp.data.watch) return watch.updateThunk(context);else if (resp.data.unWatch) return unWatch.updateThunk(context);else return function () {};\n}\n\nfunction proxyUpdateForId(id, context) {\n  return function (proxy, resp) {\n    updateHandler(resp, context)(proxy, resp);\n    if (!resp.data.__optimistic) return popMutationPromise(id);else return Promise.resolve();\n  };\n}\n\nexport function restoreRequests(client) {\n  return getPendingMutations().then(function _callee(mutations) {\n    var _loop, idx;\n\n    return _regeneratorRuntime.async(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _loop = function _loop(idx) {\n              var pendingMutation, id, params, mutation, context;\n              return _regeneratorRuntime.async(function _loop$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      pendingMutation = mutations[idx];\n                      log.debug('offline::restoreRequests', mutations, pendingMutation);\n                      id = pendingMutation.id, params = pendingMutation.params, mutation = pendingMutation.mutation, context = pendingMutation.context;\n                      params.optimisticResponse.__optimistic = true;\n                      params.update = proxyUpdateForId(id, context);\n                      params.mutation = mutation;\n                      _context.next = 8;\n                      return _regeneratorRuntime.awrap(client.mutate(params).then(function (data) {\n                        log.debug('restoreRequests:: Successfully restored', {\n                          params: params,\n                          data: data\n                        });\n                      }).catch(function (err) {\n                        log.debug('restoreRequests:: Error replaying mutation', {\n                          params: params,\n                          err: err\n                        });\n                      }));\n\n                    case 8:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              });\n            };\n\n            idx = 0;\n\n          case 2:\n            if (!(idx < mutations.length)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(_loop(idx));\n\n          case 5:\n            idx++;\n            _context2.next = 2;\n            break;\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  });\n}","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"FakeData\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"fakePastDate\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata.fakePastDate;\n  }\n});\nObject.defineProperty(exports, \"randomLocation\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata.randomLocation;\n  }\n});\nexports.random = void 0;\n\nvar _fakedata = _interopRequireWildcard(require(\"./fakedata\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nvar random = require('./random');\n\nexports.random = random;","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n      fragment myUserWatching on User {\\n        watching\\n        __typename\\n      }\\n    \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n      fragment myWatchers on Series {\\n        watchers\\n        __typename\\n      }\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphqlAPI } from '@morphoto/common';\nimport gql from 'graphql-tag';\nimport _ from 'lodash';\nimport log from 'loglevel';\nvar _graphqlAPI$queries = graphqlAPI.queries,\n    getWholeSeries = _graphqlAPI$queries.getWholeSeries,\n    allSeries = _graphqlAPI$queries.allSeries,\n    userSeries = _graphqlAPI$queries.userSeries,\n    getMyFeed = _graphqlAPI$queries.getMyFeed,\n    getUser = _graphqlAPI$queries.getUser;\nvar _graphqlAPI$fragments = graphqlAPI.fragments,\n    seriesSummaryKeys = _graphqlAPI$fragments.seriesSummaryKeys,\n    photoSummaryKeys = _graphqlAPI$fragments.photoSummaryKeys,\n    seriesSummaryFragment = _graphqlAPI$fragments.seriesSummaryFragment,\n    feedSeriesSummaryKeys = _graphqlAPI$fragments.feedSeriesSummaryKeys;\nexport var getWholeSeriesUpdate = function getWholeSeriesUpdate(store, seriesDelta) {\n  var variables = {\n    id: seriesDelta.id\n  };\n  var query = getWholeSeries;\n  var newData = {\n    series: {}\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::getWholeSeriesUpdate readQuery failed (but that\\'s fine)', {\n      newData: newData,\n      seriesDelta: seriesDelta\n    });\n  }\n\n  try {\n    newData.series = _objectSpread({}, newData.series, {}, seriesDelta);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    log.info('updateQueries::getWholeSeriesUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::getWholeSeriesUpdate writeQuery failed', {\n      newData: newData,\n      seriesDelta: seriesDelta\n    }, e);\n  }\n};\nexport var getUserUpdate = function getUserUpdate(store, userDelta) {\n  var variables = {\n    id: userDelta.id\n  };\n  var query = getUser;\n  var newData = {\n    user: {}\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::getUserUpdate readQuery failed (but that\\'s fine)', {\n      newData: newData,\n      userDelta: userDelta\n    });\n  }\n\n  try {\n    newData.user = _objectSpread({}, newData.user, {}, userDelta);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    log.info('updateQueries::getUserUpdate DONE', newData);\n  } catch (e) {\n    log.error('updateQueries::getUserUpdate writeQuery failed', {\n      newData: newData,\n      userDelta: userDelta\n    }, e);\n  }\n};\nexport var getWholeSeriesPhotoUpdate = function getWholeSeriesPhotoUpdate(store, photo) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var variables = {\n    id: photo.seriesId\n  };\n  var query = getWholeSeries;\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n\n    var newData = _.cloneDeep(qVal);\n\n    if (remove) {\n      newData.series.photos = newData.series.photos.filter(function (ph) {\n        return ph.id !== photo.id;\n      });\n    } else {\n      var idx = newData.series.photos.findIndex(function (ph) {\n        return ph.id === photo.id;\n      });\n\n      if (idx > -1) {\n        newData.series.photos = _toConsumableArray(newData.series.photos);\n        newData.series.photos[idx] = photo;\n      } else {\n        newData.series.photos = [].concat(_toConsumableArray(newData.series.photos), [photo]);\n      }\n    }\n\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    log.info('updateQueries::getWholeSeriesPhotoUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::getWholeSeriesPhotoUpdate WriteQuery failed', {\n      photo: photo,\n      remove: remove\n    }, e);\n  }\n};\n\nfunction updateSeriesSummaries(origArr, seriesDelta) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var newArr = [];\n\n  if (remove) {\n    newArr = origArr.filter(function (s) {\n      return s.id !== seriesDelta.id;\n    });\n  } else {\n    var seriesIndex = origArr.findIndex(function (s) {\n      return s.id === seriesDelta.id;\n    });\n    if (!seriesIndex) return origArr;\n\n    var newAllSeriesEntry = _objectSpread({}, origArr[seriesIndex], {}, _.pick(seriesDelta, seriesSummaryKeys), {\n      seriesStatus: null,\n      __typename: 'SeriesSummary'\n    });\n\n    if (seriesIndex > -1) {\n      newArr = origArr.map(function (s) {\n        return s.id === seriesDelta.id ? newAllSeriesEntry : s;\n      });\n    } else {\n      newArr = [].concat(_toConsumableArray(newArr), [newAllSeriesEntry]);\n    }\n  }\n\n  log.info('updateQueries::updateSeriesSummaries HELPER', {\n    origArr: origArr,\n    seriesDelta: seriesDelta,\n    newArr: newArr,\n    remove: remove\n  });\n  return newArr;\n}\n\nfunction updateFeedList(origArr, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var newArr = [];\n\n  if (remove) {\n    newArr = origArr.filter(function (fItem) {\n      if (photo) {\n        return fItem.photo.id !== photo.id;\n      } else {\n        return fItem.series.id === series.id;\n      }\n    });\n  } else {\n    var idx = origArr.findIndex(function (fitem) {\n      return fitem._id === photo.id;\n    });\n\n    var newFeedSeriesSummary = _.pick(series, feedSeriesSummaryKeys);\n\n    newFeedSeriesSummary.__typename = 'FeedSeriesSummary';\n\n    var newPhotoSummary = _.pick(photo, photoSummaryKeys);\n\n    newPhotoSummary.__typename = 'PhotoSummary';\n\n    if (idx > -1) {\n      newArr = _toConsumableArray(origArr);\n      newArr[idx].photo = newPhotoSummary;\n    } else {\n      newArr = [].concat(_toConsumableArray(origArr), [{\n        _id: newPhotoSummary.id,\n        series: newFeedSeriesSummary,\n        photo: newPhotoSummary,\n        relation: 'OWNED',\n        __typename: 'MyFeedResultItem'\n      }]);\n    }\n  }\n\n  log.info('updateQueries::updateFeedList HELPER', {\n    origArr: origArr,\n    series: series,\n    photo: photo,\n    newArr: newArr,\n    remove: remove\n  });\n  return newArr;\n}\n\nexport var allSeriesUpdate = function allSeriesUpdate(store, seriesDelta) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var variables = {\n    limit: 100\n  };\n  var query = allSeries;\n  var newData = {\n    allSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::allSeriesUpdate readQuery failed (but that\\'s fine)', {\n      seriesDelta: seriesDelta,\n      remove: remove,\n      newData: newData\n    });\n    return;\n  }\n\n  try {\n    newData.allSeries.seriesSummaries = updateSeriesSummaries(newData.allSeries.seriesSummaries, seriesDelta, remove);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    log.info('updateQueries::allSeriesUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::allSeriesUpdate writeQuery failed', {\n      seriesDelta: seriesDelta,\n      remove: remove,\n      newData: newData\n    }, e);\n  }\n};\nexport var allSeriesPhotoUpdate = function allSeriesPhotoUpdate(store, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var query = allSeries;\n  var newData = {\n    allSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: {\n        limit: 100\n      }\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::allSeriesPhotoUpdate:: allSeries readQuery failed (but that\\'s fine)', {\n      series: series,\n      remove: remove,\n      photo: photo,\n      newData: newData\n    });\n    return;\n  }\n\n  try {\n    newData.allSeries.seriesSummaries = newData.allSeries.seriesSummaries.map(function (s) {\n      if (s.id !== photo.seriesId) return s;else {\n        var newS = _.cloneDeep(s);\n\n        var photoIndex = series.photos.findIndex(function (ph) {\n          return ph.id === photo.id;\n        });\n\n        if (remove && series) {\n          if (newS.latest && newS.latest.id === photo.id) {\n            newS.latest = series.photos[series.photos.length - 1];\n          }\n\n          if (newS.featured && newS.featured.id === photo.id) {\n            newS.featured = series.photos[series.photos.length - 1];\n          }\n\n          newS.photoCount -= 1;\n        } else if (photoIndex === -1) {\n          var photoSummary = _.pick(photo, photoSummaryKeys);\n\n          photoSummary.__typename = 'PhotoSummary';\n          newS.latest = photoSummary;\n          newS.photoCount += 1;\n        } else {}\n\n        return newS;\n      }\n    });\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    log.info('updateQueries::allSeriesPhotoUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::createPhotoMutation:: allSeries read or write ERROR', {\n      series: series,\n      photo: photo,\n      remove: remove\n    }, e);\n  }\n};\nexport var userSeriesUpdate = function userSeriesUpdate(store, series) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var query = userSeries;\n  var newData = {\n    userSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::userSeriesUpdate readQuery failed (but that\\'s fine)', {\n      series: series,\n      remove: remove,\n      newData: newData\n    });\n  }\n\n  try {\n    newData.userSeries.seriesSummaries = updateSeriesSummaries(newData.userSeries.seriesSummaries, series, remove);\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    log.info('updateQueries::userSeriesUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::userSeriesUpdate writeQuery failed', {\n      series: series,\n      remove: remove,\n      newData: newData\n    }, e);\n  }\n};\nexport var feedUpdate = function feedUpdate(store, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var query = getMyFeed;\n  var newData = {\n    myFeed: {\n      feed: [],\n      window: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n    newData = _.cloneDeep(qVal);\n    log.info('updateQueries::feedUpdate got existing query', qVal);\n  } catch (e) {\n    log.info('updateQueries::feedUpdate readQuery failed (but that\\'s fine)', {\n      series: series,\n      photo: photo,\n      remove: remove,\n      newData: newData\n    });\n  }\n\n  try {\n    newData.myFeed.feed = updateFeedList(newData.myFeed.feed, series, photo, remove);\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    log.info('updateQueries::feedUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::feedUpdate writeQuery failed', {\n      series: series,\n      photo: photo,\n      remove: remove,\n      newData: newData\n    }, e);\n  }\n};\nexport var watchUpdate = function watchUpdate(store, seriesId, userId) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  try {\n    var newWatchers = 0;\n    var newWatching = [];\n    var seriesFragId = 'Series:' + seriesId;\n    var seriesFrag = gql(_templateObject());\n    var seriesWatchers = store.readFragment({\n      id: seriesFragId,\n      fragment: seriesFrag\n    });\n    log.info('watchUpdate:seriesWatchers readFragment', seriesId, seriesWatchers, userId);\n    var userFragId = 'User:' + userId;\n    var userFrag = gql(_templateObject2());\n    var userFragResult = store.readFragment({\n      id: userFragId,\n      fragment: userFrag\n    });\n    log.info('watchUpdate:userFragResult readFragment', seriesId, userFragResult);\n\n    if (seriesWatchers) {\n      newWatchers = seriesWatchers.watchers && seriesWatchers.watchers > -1 ? seriesWatchers.watchers : 0;\n      newWatchers += remove ? -1 : 1;\n      if (newWatchers < 0) newWatchers = 0;\n      newWatching = remove ? userFragResult.watching.filter(function (wid) {\n        return wid !== seriesId;\n      }) : _toConsumableArray(new Set([].concat(_toConsumableArray(userFragResult.watching), [seriesId])));\n      var seriesDelta = {\n        id: seriesId,\n        watchers: newWatchers\n      };\n      getWholeSeriesUpdate(store, seriesDelta);\n\n      _seriesSummaryFragmentUpdate(store, seriesDelta);\n\n      getUserUpdate(store, {\n        id: userId,\n        watching: newWatching\n      });\n      allSeriesUpdate(store, seriesDelta);\n      if (remove) feedUpdate(store, seriesDelta, null, remove);\n    }\n  } catch (e) {\n    log.error('watchUpdate', e);\n  }\n};\nexport var _seriesSummaryFragmentUpdate = function _seriesSummaryFragmentUpdate(store, seriesDelta) {\n  try {\n    var seriesSummaryFragId = 'SeriesSummary:' + seriesDelta.id;\n    var seriesSummaryFragResults = store.readFragment({\n      id: seriesSummaryFragId,\n      fragment: seriesSummaryFragment,\n      fragmentName: 'seriesSummaryFragment'\n    });\n    log.info('_seriesSummaryFragmentUpdate readFragment', seriesDelta.id, seriesSummaryFragResults);\n\n    if (seriesSummaryFragResults) {\n      store.writeFragment({\n        id: seriesSummaryFragId,\n        fragment: seriesSummaryFragment,\n        fragmentName: 'seriesSummaryFragment',\n        data: _objectSpread({}, seriesSummaryFragResults, {}, seriesDelta)\n      });\n    }\n  } catch (e) {\n    log.error('_seriesSummaryFragmentUpdate failed', {\n      seriesDelta: seriesDelta\n    }, e);\n  }\n};","export var Actions = {\n  HOME_CHANGE_STATE: 'HOME_CHANGE_STATE',\n  HOME_CHANGE_ACTIVE_SERIES: 'HOME_CHANGE_ACTIVE_SERIES',\n  HOME_STATE_BACK: 'HOME_STATE_BACK',\n  MAP_HISTORY_POP: 'MAP_HISTORY_POP',\n  MAP_HISTORY_PUSH: 'MAP_HISTORY_PUSH',\n  MAP_HISTORY_CLEAR: 'MAP_HISTORY_CLEAR',\n  UPLOADER_QUEUE: 'UPLOADER_QUEUE',\n  UPLOADER_COMPLETE: 'UPLOADER_COMPLETE',\n  UPLOADER_UPDATE_PROGRESS: 'UPLOADER_UPDATE_PROGRESS',\n  UPLOADER_SET_UPLOADING: 'UPLOADER_SET_UPLOADING',\n  UPLOADER_SET_ONLINE: 'UPLOADER_SET_ONLINE',\n  OFFLINE_VIEWPORT_SAVE: 'OFFLINE_VIEWPORT_SAVE',\n  OFFLINE_SET_STATUS: 'OFFLINE_SET_STATUS',\n  SETFLAG: 'SETFLAG',\n  RESET_ALL_STATE: 'RESET_ALL_STATE'\n};\nexport default {\n  setHomeState: function setHomeState(newDomain, params) {\n    return {\n      type: Actions.HOME_CHANGE_STATE,\n      data: {\n        newDomain: newDomain,\n        params: params\n      }\n    };\n  },\n  homeStateBack: function homeStateBack() {\n    return {\n      type: Actions.HOME_STATE_BACK\n    };\n  },\n  setActiveSeries: function setActiveSeries(activeSeries, initialPhoto) {\n    return {\n      type: Actions.HOME_CHANGE_ACTIVE_SERIES,\n      data: {\n        activeSeries: activeSeries,\n        initialPhoto: initialPhoto\n      }\n    };\n  },\n  setFlag: function setFlag(flagName, flagVal) {\n    return {\n      type: Actions.SETFLAG,\n      data: {\n        flagName: flagName,\n        flagVal: flagVal\n      }\n    };\n  },\n  setOfflineViewport: function setOfflineViewport(viewport) {\n    return {\n      type: Actions.OFFLINE_VIEWPORT_SAVE,\n      data: viewport\n    };\n  },\n  setOfflineCompleted: function setOfflineCompleted(bVal) {\n    return {\n      type: Actions.OFFLINE_SET_STATUS,\n      data: bVal\n    };\n  },\n  popMapHistory: function popMapHistory() {\n    return {\n      type: Actions.MAP_HISTORY_POP\n    };\n  },\n  pushMapHistory: function pushMapHistory(viewportSave) {\n    return {\n      type: Actions.MAP_HISTORY_PUSH,\n      data: viewportSave\n    };\n  },\n  clearMapHistory: function clearMapHistory() {\n    return {\n      type: Actions.MAP_HISTORY_CLEAR\n    };\n  },\n  resetAllState: function resetAllState() {\n    return {\n      type: Actions.RESET_ALL_STATE\n    };\n  },\n  queueUpload: function queueUpload(uploadObj) {\n    return {\n      type: Actions.UPLOADER_QUEUE,\n      data: uploadObj\n    };\n  },\n  setUploaderOnline: function setUploaderOnline(bOnline) {\n    return {\n      type: Actions.UPLOADER_SET_ONLINE,\n      data: bOnline\n    };\n  },\n  updateUploadProgress: function updateUploadProgress(newProgress) {\n    return {\n      type: Actions.UPLOADER_UPDATE_PROGRESS,\n      data: newProgress\n    };\n  }\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { fade, lighten, darken } from '@material-ui/core/styles/colorManipulator';\nimport { config } from '@morphoto/client-common';\nimport { indigo } from '@material-ui/core/colors';\nvar typography = {\n  useNextVariants: true\n};\nvar overrides = {\n  MuiDialog: {\n    paper: {\n      '@media (max-width:321px)': {\n        margin: 10\n      }\n    },\n    paperFullWidth: {\n      '@media (max-width:321px)': {\n        width: 'calc(100% - 20px)'\n      }\n    }\n  }\n};\nvar colors = {\n  indigo: indigo[500],\n  jet: '#3a3335',\n  rose: '#d81e5b',\n  redorange: '#f0544f',\n  papayawhip: '#FDF0D5',\n  cblue: '#C6D8D3'\n};\nvar home = {\n  palette: {\n    jet: {\n      main: '#3a3335'\n    },\n    rose: {\n      main: '#d81e5b'\n    },\n    redorange: {\n      main: '#f0544f'\n    },\n    papayawhip: {\n      main: '#FDF0D5'\n    },\n    cblue: {\n      main: '#C6D8D3'\n    },\n    primary: {\n      main: colors.redorange\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.jet,\n      secondary: fade(colors.jet, 0.7)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nvar homeTheme = createMuiTheme(home);\nvar access = Object.keys(config.ACCESS).reduce(function (acc, key) {\n  var accessObj = config.ACCESS[key];\n  var contrastTextPrimary = homeTheme.palette.getContrastText(accessObj.theme.primary);\n  var contrastTextSecondary = homeTheme.palette.getContrastText(accessObj.theme.secondary);\n  return _objectSpread({}, acc, _defineProperty({}, key, createMuiTheme({\n    palette: {\n      primary: {\n        main: accessObj.theme.primary\n      },\n      secondary: {\n        main: accessObj.theme.secondary\n      },\n      text: {\n        primary: contrastTextPrimary,\n        secondary: contrastTextSecondary\n      }\n    }\n  })));\n}, {});\nvar series = {\n  palette: {\n    primary: {\n      main: colors.indigo\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.jet,\n      secondary: fade(colors.jet, 0.7)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nvar login = {\n  palette: {\n    primary: {\n      main: colors.redorange\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.papayawhip,\n      secondary: fade(colors.papayawhip, 0.7)\n    },\n    background: {\n      default: colors.jet,\n      paper: darken(colors.jet, 0.2)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nexport default {\n  home: homeTheme,\n  login: createMuiTheme(login),\n  series: createMuiTheme(series),\n  access: access\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSeriesTags = exports[\"default\"] = void 0;\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Tags = function Tags(tagConfigArr, tags) {\n  var _this = this;\n\n  _classCallCheck(this, Tags);\n\n  _defineProperty(this, \"findTagByLabel\", function (typeId, tagLabel) {\n    return _this.getTagType(typeId).values.find(function (tt) {\n      return tt.label === tagLabel;\n    });\n  });\n\n  _defineProperty(this, \"getXYTags\", function () {\n    var xyTagTypeIds = _this.getXYTagTypes().map(function (tt) {\n      return tt.id;\n    });\n\n    return _this.tags.filter(function (tag) {\n      return xyTagTypeIds.find(function (ttID) {\n        return ttID === tag.typeId;\n      }) && tag.coords && tag.coords.x;\n    });\n  });\n\n  _defineProperty(this, \"getNonXYTags\", function () {\n    var NonXYTagLabels = _this.getNonXYTagTypes().map(function (tt) {\n      return tt.id;\n    });\n\n    return _this.tags.filter(function (tag) {\n      return NonXYTagLabels.indexOf(tag.typeId) > -1;\n    });\n  });\n\n  _defineProperty(this, \"createNewTagObj\", function (label, typeId) {\n    return {\n      label: label,\n      typeId: typeId\n    };\n  });\n\n  _defineProperty(this, \"createExistingTagObj\", function (label, typeId) {\n    return _objectSpread({}, _this.findTagByLabel(typeId, label), {\n      typeId: typeId\n    });\n  });\n\n  _defineProperty(this, \"createNewXYTagObj\", function (label, typeId, relCoords, multiplier) {\n    return {\n      label: label,\n      typeId: typeId,\n      relCoords: relCoords,\n      coords: {\n        x: parseInt(relCoords.x / multiplier, 10),\n        y: parseInt(relCoords.y / multiplier, 10)\n      }\n    };\n  });\n\n  _defineProperty(this, \"createExistingXYTagObj\", function (label, typeId, relCoords, multiplier) {\n    return _objectSpread({}, _this.findTagByLabel(typeId, label), {\n      typeId: typeId,\n      relCoords: relCoords,\n      coords: {\n        x: parseInt(relCoords.x / multiplier, 10),\n        y: parseInt(relCoords.y / multiplier, 10)\n      }\n    });\n  });\n\n  _defineProperty(this, \"getTagType\", function (typeId) {\n    return _this.tagConfigArr.find(function (tt) {\n      return tt.id === typeId;\n    });\n  });\n\n  _defineProperty(this, \"getTagTypeIndex\", function (typeId) {\n    return _this.tagConfigArr.findIndex(function (tt) {\n      return tt.id === typeId;\n    });\n  });\n\n  _defineProperty(this, \"getXYTagTypes\", function () {\n    return _this.tagConfigArr.filter(function (tt) {\n      return tt.allowXY;\n    });\n  });\n\n  _defineProperty(this, \"getNonXYTagTypes\", function () {\n    return _this.tagConfigArr.filter(function (tt) {\n      return tt.allowNonXY;\n    });\n  });\n\n  _defineProperty(this, \"getRelXYTags\", function (multiplier) {\n    if (!multiplier) return [];\n    return _this.getXYTags().map(function (tag) {\n      var tt = _this.getTagType(tag.typeId);\n\n      return _objectSpread({}, tag, {\n        color: tt.color,\n        relCoords: {\n          x: parseInt(tag.coords.x * multiplier, 10),\n          y: parseInt(tag.coords.y * multiplier, 10)\n        }\n      });\n    });\n  });\n\n  this.tags = tags;\n  this.tagConfigArr = tagConfigArr;\n};\n\nvar _default = Tags;\nexports[\"default\"] = _default;\n\nvar getSeriesTags = function getSeriesTags(series) {\n  var tags = {};\n\n  if (series && series.photos) {\n    series.photos.forEach(function (ph) {\n      ph.tags.forEach(function (tag) {\n        tags[tag.label] = tag;\n      });\n    });\n  }\n\n  return Object.keys(tags);\n};\n\nexports.getSeriesTags = getSeriesTags;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getExifPromise = void 0;\n\nvar _exifParser = _interopRequireDefault(require(\"exif-parser\"));\n\nvar _common = require(\"@morphoto/common\");\n\nvar _dates = require(\"./dates\");\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar getExifPromise = function () {\n  var _ref = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(imgData) {\n    var exif, exifDateTime, exifGPS, blobParser, find, foundIdx, newData, parser;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            exif = null;\n            exifDateTime = null;\n            exifGPS = null;\n\n            if (!(imgData instanceof Blob)) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.t0 = _exifParser[\"default\"];\n            _context.next = 7;\n            return new Response(imgData).arrayBuffer();\n\n          case 7:\n            _context.t1 = _context.sent;\n            blobParser = _context.t0.create.call(_context.t0, _context.t1);\n            exif = blobParser.parse();\n            _context.next = 13;\n            break;\n\n          case 12:\n            try {\n              find = 'base64,';\n              foundIdx = imgData.indexOf(find) + find.length;\n              newData = imgData.slice(foundIdx);\n              parser = _exifParser[\"default\"].create(Buffer.from(newData, 'base64'));\n              exif = parser.parse();\n            } catch (err) {\n              _loglevel[\"default\"].info('EXIF ERROR', err);\n            }\n\n          case 13:\n            if (exif && exif.tags) {\n              try {\n                if (exif.tags && exif.tags.DateTimeOriginal && String(exif.tags.DateTimeOriginal)) {\n                  exifDateTime = (0, _dates.fixParseDate)(exif.tags.DateTimeOriginal, false);\n                }\n              } catch (err) {\n                _loglevel[\"default\"].info('ERROR GETTING TIMESTAMP', {\n                  err: err,\n                  exif: exif\n                });\n              }\n\n              try {\n                if (exif.tags.GPSLatitude && _common.util.isNumeric(exif.tags.GPSLatitude) && exif.tags.GPSLongitude && _common.util.isNumeric(exif.tags.GPSLongitude)) {\n                  exifGPS = [exif.tags.GPSLongitude, exif.tags.GPSLatitude];\n                }\n              } catch (e) {\n                _loglevel[\"default\"].error('GPS Longitude and Latitude could not be determined');\n              }\n            }\n\n            return _context.abrupt(\"return\", {\n              exif: exif,\n              exifDateTime: exifDateTime,\n              exifGPS: exifGPS\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getExifPromise(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.getExifPromise = getExifPromise;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Series = function Series(metaConfig, series) {\n  var _this = this;\n\n  _classCallCheck(this, Series);\n\n  _defineProperty(this, \"getSeriesMeta\", function () {\n    return Object.keys(_this.metaConfig).filter(function (key) {\n      return _this.metaConfig[key].type === 'SERIES';\n    }).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, _this.series.meta[key][\"default\"]));\n    }, {});\n  });\n\n  _defineProperty(this, \"setMeta\", function () {\n    _this.series.meta = JSON.stringify(_this.getSeriesMeta());\n  });\n\n  _defineProperty(this, \"newSeries\", function () {\n    return {\n      id: \"L-\".concat((0, _v[\"default\"])()),\n      meta: JSON.stringify(_this.getSeriesMeta()),\n      photos: []\n    };\n  });\n\n  this.metaConfig = metaConfig;\n  if (series) this.series = series;else {\n    this.series = this.newSeries();\n  }\n};\n\nvar _default = Series;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _common = require(\"@morphoto/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Photo = function Photo(metaConfig, photo) {\n  var _this = this;\n\n  _classCallCheck(this, Photo);\n\n  _defineProperty(this, \"setMeta\", function () {\n    _this.photo.meta = JSON.stringify(_this.getPhotoMeta());\n  });\n\n  _defineProperty(this, \"getPhotoMeta\", function () {\n    return Object.keys(_this.metaConfig).filter(function (key) {\n      return _this.metaConfig[key].type === 'PHOTO';\n    }).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, _this.photo.meta[key][\"default\"]));\n    }, {});\n  });\n\n  _defineProperty(this, \"newPhoto\", function () {\n    return {\n      id: \"L-\".concat((0, _v[\"default\"])()),\n      uploadToken: (0, _v[\"default\"])(),\n      takenOn: _common.dates.convertJSDatetoTimestamp(new Date()),\n      meta: JSON.stringify(_this.getPhotoMeta()),\n      tags: []\n    };\n  });\n\n  this.metaConfig = metaConfig;\n  if (photo) this.photo = photo;else {\n    this.photo = this.newPhoto();\n  }\n};\n\nvar _default = Photo;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodeShareUrl = exports.createShareUrl = void 0;\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar createShareUrl = function createShareUrl(shareUrl, series, photoId) {\n  var noRoot = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  if (!series) return null;\n  var obj = {\n    type: 'series',\n    s: series.id,\n    p: photoId\n  };\n  var encodedId = encodeURI(JSON.stringify(obj));\n  var url = \"\".concat(window.location.origin).concat(process.env.PUBLIC_URL, \"/?fromqr=\").concat(encodedId);\n  var ogShare = \"\".concat(shareUrl, \"/\").concat(series.id, \"/\").concat(photoId || '');\n  return {\n    url: url,\n    ogShare: ogShare\n  };\n};\n\nexports.createShareUrl = createShareUrl;\n\nvar decodeShareUrl = function decodeShareUrl(search) {\n  try {\n    var find = '?fromqr=';\n    var foundIdx = search.indexOf(find);\n    if (foundIdx < 0) return null;\n    var newData = search.slice(foundIdx + find.length);\n    var decodedUrl = JSON.parse(decodeURI(newData));\n    return decodedUrl;\n  } catch (err) {\n    _loglevel[\"default\"].error(err);\n  }\n\n  return null;\n};\n\nexports.decodeShareUrl = decodeShareUrl;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _accesscontrol = _interopRequireDefault(require(\"accesscontrol\"));\n\nvar _permissions = _interopRequireDefault(require(\"./permissions\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar AccessHelper = function () {\n  function AccessHelper(userSub, role) {\n    var _this = this;\n\n    var permissionObj = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _permissions[\"default\"];\n\n    _classCallCheck(this, AccessHelper);\n\n    _defineProperty(this, \"ownOrAny\", function (obj) {\n      if (!obj || !obj.createdUser || !obj.createdUser.id) throw new Error(\"No Created user found\");\n\n      try {\n        return obj.createdUser.id === _this.userSub ? 'Own' : 'Any';\n      } catch (e) {\n        return 'Any';\n      }\n    });\n\n    _defineProperty(this, \"isOwner\", function (obj) {\n      if (!obj || !obj.createdUser || !obj.createdUser.id) throw new Error(\"No Created user found\");\n\n      try {\n        return obj.createdUser.id === _this.userSub;\n      } catch (e) {\n        return false;\n      }\n    });\n\n    _defineProperty(this, \"canUser\", function (action, obj, type, attrs) {\n      if (['series', 'photo'].indexOf(type) < 0) throw new Error(\"canUser: type not supported \".concat(type));\n\n      try {\n        var ownAny = _this.ownOrAny(obj);\n\n        var perm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)](type);\n\n        var otherPerm = null;\n\n        if (type === 'series') {\n          if (obj.access === 'PUBLIC') otherPerm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)]('series_public');else if (obj.access === 'OPEN') otherPerm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)]('series_open');\n        }\n\n        if (attrs) {\n          if (otherPerm) {\n            return !!perm.attributes.find(function (p) {\n              return p === '*' || attrs.indexOf(p) > -1;\n            }) || !!otherPerm.attributes.find(function (p) {\n              return p === '*' || attrs.indexOf(p) > -1;\n            });\n          } else return !!perm.attributes.find(function (p) {\n            return p === '*' || attrs.indexOf(p) > -1;\n          });\n        } else {\n          if (otherPerm) return perm.granted || otherPerm.granted;else return perm.granted;\n        }\n      } catch (e) {\n        _loglevel[\"default\"].error(e);\n\n        return false;\n      }\n    });\n\n    this.userSub = userSub;\n    this.role = role;\n    this.permissionObj = permissionObj;\n    this.ac = new _accesscontrol[\"default\"](permissionObj);\n  }\n\n  _createClass(AccessHelper, [{\n    key: \"toString\",\n    value: function toString() {\n      _loglevel[\"default\"].info('AccessHelper:', {\n        sub: this.userSub,\n        role: this.role\n      });\n    }\n  }]);\n\n  return AccessHelper;\n}();\n\nvar _default = AccessHelper;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNewS3Credentials = exports.getWholeSeries = exports.userSearch = exports.getMyFeed = exports.geocode = exports.getUser = exports.geoSeriesIdOnly = exports.geoSeries = exports.tagSearch = exports.seriesWithTag = exports.seriesFromList = exports.seriesSummaryFromList = exports.keywordSearch = exports.userSeries = exports.pollQuery = exports.allSeries = exports.initQuery = void 0;\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nvar _fragments = require(\"./fragments\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _templateObject17() {\n  var data = _taggedTemplateLiteral([\"\\n  query s3Credentials($seriesId: ID!, $photoId: ID!, $ext: String!)  {\\n    s3Credentials(seriesId: $seriesId, photoId: $photoId, ext: $ext)\\n  }\\n\"]);\n\n  _templateObject17 = function _templateObject17() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject16() {\n  var data = _taggedTemplateLiteral([\"\\nquery getWholeSeries($id: ID!) {\\n  series(id: $id) {\\n    ...seriesFragment\\n    photos {\\n      ...photoFragment\\n    }\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject16 = function _templateObject16() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject15() {\n  var data = _taggedTemplateLiteral([\"\\nquery userSearch($searchStr: String!, $limit: Int) {\\n  userSearch(searchStr: $searchStr, limit: $limit ){\\n    ...userSummaryFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject15 = function _templateObject15() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject14() {\n  var data = _taggedTemplateLiteral([\"\\nquery myFeed($start: String, $end: String, $limit: Int) {\\n  myFeed(start: $start, end: $end, limit: $limit) @connection(key: \\\"myFeed\\\"){\\n    feed {\\n      _id\\n      series {\\n        ...feedSeriesSummaryFragment\\n      }\\n      photo {\\n        ...photoSummaryFragment\\n      }\\n      relation\\n      __typename\\n    }\\n    window\\n    __typename\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject14 = function _templateObject14() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\nquery geocode($search: String!) {\\n  geocoder(search: $search) {\\n    relevance\\n    text\\n    placeName\\n    bbox\\n    center\\n    # geoType\\n    # context\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\nquery getUser($userId: ID) {\\n  user(id: $userId){\\n    ...userFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesInGeoBoundsIdOnly($bounds: [Float], $limit: Int, $nextToken: String) {\\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: \\\"seriesInGeoBoundsSHORT\\\", filter: [\\\"bounds\\\"]){\\n    seriesSummaries {\\n      id\\n      name\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesInGeoBounds($bounds: [Float], $limit: Int, $nextToken: String) {\\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: \\\"seriesInGeoBounds\\\", filter: [\\\"bounds\\\"]){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\nquery tagSearch($limit: Int, $tag: String, $nextToken:  String) {\\n  tags(limit: $limit, tag: $tag, nextToken: $nextToken ){\\n    _id\\n    name\\n    count\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesWithTag($tag: String!, $limit: Int, $nextToken: String){\\n  tagSeries(tag: $tag, limit: $limit, nextToken: $nextToken)  @connection(key: \\\"tagSeries\\\", filter: [\\\"tag\\\"]){\\n    seriesSummaries{\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesFromList($seriesList: [ID]) {\\n  arraySeries(seriesIds: $seriesList) {\\n    ...seriesFragment\\n    photos {\\n      ...photoFragment\\n    }\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesFromList($seriesList: [ID]) {\\n  arraySeries(seriesIds: $seriesList) {\\n    ...seriesFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nquery keywordSearch($searchStr: String, $limit: Int, $nextToken: String) {\\n  keywordSearch(searchStr: $searchStr, limit: $limit, nextToken: $nextToken) {\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nquery userSeries($createdBy: ID) {\\n  userSeries(createdBy: $createdBy ) {\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nquery pollQuery($lastCheck: String!, $limit: Int, $nextToken: String) {\\n  changedSeries(lastCheck: $lastCheck, limit: $limit, nextToken: $nextToken) @connection(key: \\\"changedSeries\\\"){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nquery allSeries($limit: Int, $nextToken: String) {\\n  allSeries(limit: $limit, nextToken: $nextToken) @connection(key: \\\"allSeries\\\"){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nquery init {\\n  init\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar initQuery = (0, _graphqlTag[\"default\"])(_templateObject());\nexports.initQuery = initQuery;\nvar allSeries = (0, _graphqlTag[\"default\"])(_templateObject2(), _fragments.seriesSummaryFragment);\nexports.allSeries = allSeries;\nvar pollQuery = (0, _graphqlTag[\"default\"])(_templateObject3(), _fragments.seriesSummaryFragment);\nexports.pollQuery = pollQuery;\nvar userSeries = (0, _graphqlTag[\"default\"])(_templateObject4(), _fragments.seriesSummaryFragment);\nexports.userSeries = userSeries;\nvar keywordSearch = (0, _graphqlTag[\"default\"])(_templateObject5(), _fragments.seriesSummaryFragment);\nexports.keywordSearch = keywordSearch;\nvar seriesSummaryFromList = (0, _graphqlTag[\"default\"])(_templateObject6(), _fragments.seriesFragment);\nexports.seriesSummaryFromList = seriesSummaryFromList;\nvar seriesFromList = (0, _graphqlTag[\"default\"])(_templateObject7(), _fragments.seriesFragment, _fragments.photoFragment);\nexports.seriesFromList = seriesFromList;\nvar seriesWithTag = (0, _graphqlTag[\"default\"])(_templateObject8(), _fragments.seriesSummaryFragment);\nexports.seriesWithTag = seriesWithTag;\nvar tagSearch = (0, _graphqlTag[\"default\"])(_templateObject9());\nexports.tagSearch = tagSearch;\nvar geoSeries = (0, _graphqlTag[\"default\"])(_templateObject10(), _fragments.seriesSummaryFragment);\nexports.geoSeries = geoSeries;\nvar geoSeriesIdOnly = (0, _graphqlTag[\"default\"])(_templateObject11());\nexports.geoSeriesIdOnly = geoSeriesIdOnly;\nvar getUser = (0, _graphqlTag[\"default\"])(_templateObject12(), _fragments.userFragment);\nexports.getUser = getUser;\nvar geocode = (0, _graphqlTag[\"default\"])(_templateObject13());\nexports.geocode = geocode;\nvar getMyFeed = (0, _graphqlTag[\"default\"])(_templateObject14(), _fragments.feedSeriesSummaryFragment, _fragments.photoSummaryFragment);\nexports.getMyFeed = getMyFeed;\nvar userSearch = (0, _graphqlTag[\"default\"])(_templateObject15(), _fragments.userSummaryFragment);\nexports.userSearch = userSearch;\nvar getWholeSeries = (0, _graphqlTag[\"default\"])(_templateObject16(), _fragments.seriesFragment, _fragments.photoFragment);\nexports.getWholeSeries = getWholeSeries;\nvar getNewS3Credentials = (0, _graphqlTag[\"default\"])(_templateObject17());\nexports.getNewS3Credentials = getNewS3Credentials;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.reportBug = exports.unWatchSeries = exports.watchSeries = exports.newSeriesKeys = exports.createSeries = exports.newPhotoKeys = exports.createPhoto = exports.updatePhotoKeys = exports.updatePhoto = exports.updateSeriesKeys = exports.updateSeries = exports.deleteSeries = exports.deletePhoto = void 0;\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nvar _fragments = require(\"./fragments\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\nmutation reportBug($reportJSON: String!) {\\n  reportBug(reportJSON: $reportJSON)\\n}\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\nmutation unWatch($seriesId: ID!) {\\n  unWatchSeries(seriesId: $seriesId)\\n}\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nmutation watch($seriesId: ID!) {\\n  watchSeries(seriesId: $seriesId)\\n}\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nmutation createSeries($series: NewSeriesInput!, $photo: NewPhotoInput!, $ext: String!) {\\n  createSeries(series: $series, photo: $photo, ext: $ext) {\\n    series {\\n      ...seriesFragment\\n      photos {\\n        ...photoFragment\\n      }\\n    }\\n    preAuth\\n    __typename\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nmutation createPhoto($photo: NewPhotoInput!, $ext: String!) {\\n  createPhoto(photo: $photo, ext: $ext) {\\n    photo {\\n      ...photoFragment\\n    }\\n    preAuth\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nmutation updatePhoto($photo: UpdatePhotoInput!) {\\n  updatePhoto(photo: $photo){\\n    ...photoFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nmutation updateSeries($series: UpdateSeriesInput!) {\\n  updateSeries(series: $series){\\n    ...seriesFragment\\n  }\\n\\n}\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nmutation deleteSeries($id: ID!) {\\n  deleteSeries(id: $id)\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nmutation deletePhoto($seriesId: ID!, $photoId: ID!) {\\n  deletePhoto(seriesId: $seriesId, photoId: $photoId)\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar deletePhoto = (0, _graphqlTag[\"default\"])(_templateObject());\nexports.deletePhoto = deletePhoto;\nvar deleteSeries = (0, _graphqlTag[\"default\"])(_templateObject2());\nexports.deleteSeries = deleteSeries;\nvar updateSeries = (0, _graphqlTag[\"default\"])(_templateObject3(), _fragments.seriesFragment);\nexports.updateSeries = updateSeries;\nvar updateSeriesKeys = ['id', 'access', 'name', 'note', 'coords', 'direction'];\nexports.updateSeriesKeys = updateSeriesKeys;\nvar updatePhoto = (0, _graphqlTag[\"default\"])(_templateObject4(), _fragments.photoFragment);\nexports.updatePhoto = updatePhoto;\nvar updatePhotoKeys = ['id', 'seriesId', 'takenOn', 'tags', 'note'];\nexports.updatePhotoKeys = updatePhotoKeys;\nvar createPhoto = (0, _graphqlTag[\"default\"])(_templateObject5(), _fragments.photoFragment);\nexports.createPhoto = createPhoto;\nvar newPhotoKeys = ['seriesId', 'takenOn', 'meta', 'rawData', 'coords', 'tags', 'note', 'uploadToken'];\nexports.newPhotoKeys = newPhotoKeys;\nvar createSeries = (0, _graphqlTag[\"default\"])(_templateObject6(), _fragments.seriesFragment, _fragments.photoFragment);\nexports.createSeries = createSeries;\nvar newSeriesKeys = ['access', 'name', 'note', 'coords', 'direction', 'meta'];\nexports.newSeriesKeys = newSeriesKeys;\nvar watchSeries = (0, _graphqlTag[\"default\"])(_templateObject7());\nexports.watchSeries = watchSeries;\nvar unWatchSeries = (0, _graphqlTag[\"default\"])(_templateObject8());\nexports.unWatchSeries = unWatchSeries;\nvar reportBug = (0, _graphqlTag[\"default\"])(_templateObject9());\nexports.reportBug = reportBug;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateSeriesResponse = exports.createSeriesResponse = exports.updatePhotoResponse = exports.createPhotoResponse = void 0;\n\nvar _fragments = require(\"./fragments\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar createPhotoResponse = function createPhotoResponse(_ref) {\n  var meUserSummary = _ref.meUserSummary,\n      series = _ref.series,\n      newPhoto = _ref.newPhoto,\n      ext = _ref.ext;\n  return {\n    createPhoto: {\n      photo: {\n        id: newPhoto.id,\n        meta: newPhoto.meta || null,\n        seriesId: series.id,\n        note: newPhoto.note || null,\n        createdOn: Date.now().toString(),\n        createdUser: meUserSummary,\n        updatedUser: meUserSummary,\n        createdBy: meUserSummary.id,\n        updatedBy: meUserSummary.id,\n        uploadToken: newPhoto.uploadToken,\n        updatedOn: Date.now().toString(),\n        seriesCreatedBy: series.createdUser.id,\n        takenOn: newPhoto.takenOn,\n        coords: newPhoto.coords || null,\n        tags: newPhoto.tags ? newPhoto.tags.map(function (t) {\n          return _objectSpread({}, t, {\n            coords: t.coords ? _objectSpread({}, t.coords, {\n              __typename: 'ImageCoords'\n            }) : null,\n            __typename: 'Tag'\n          });\n        }) : [],\n        paths: {\n          base: null,\n          large: null,\n          orig: null,\n          thumb: null,\n          medium: null,\n          __typename: 'Paths'\n        },\n        __typename: 'Photo'\n      },\n      preAuth: null,\n      __typename: 'NewPhoto'\n    }\n  };\n};\n\nexports.createPhotoResponse = createPhotoResponse;\n\nvar updatePhotoResponse = function updatePhotoResponse(_ref2) {\n  var meUserSummary = _ref2.meUserSummary,\n      photo = _ref2.photo,\n      photoDelta = _ref2.photoDelta;\n\n  if (photoDelta.tags) {\n    photoDelta.tags = photoDelta.tags.map(function (t) {\n      if (!t.__typename) t.__typename = 'Tag';\n      if (t.coords) t.coords.__typename = 'ImageCoords';else t.coords = null;\n      return t;\n    });\n  }\n\n  return {\n    updatePhoto: _objectSpread({}, photo, {}, photoDelta, {\n      updatedUser: meUserSummary,\n      updatedBy: meUserSummary.id,\n      __typename: 'Photo'\n    })\n  };\n};\n\nexports.updatePhotoResponse = updatePhotoResponse;\n\nvar createSeriesResponse = function createSeriesResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      newSeries = _ref3.newSeries,\n      newPhoto = _ref3.newPhoto,\n      ext = _ref3.ext;\n  var photoResponse = {\n    id: newPhoto.id,\n    meta: newPhoto.meta || null,\n    seriesId: newSeries.id,\n    createdOn: Date.now().toString(),\n    note: newPhoto.note || null,\n    createdUser: meUserSummary,\n    updatedUser: meUserSummary,\n    createdBy: meUserSummary.id,\n    updatedBy: meUserSummary.id,\n    uploadToken: newPhoto.uploadToken,\n    updatedOn: Date.now().toString(),\n    seriesCreatedBy: meUserSummary.id,\n    takenOn: newPhoto.takenOn,\n    coords: newPhoto.coords || null,\n    tags: newPhoto.tags || [],\n    paths: {\n      base: null,\n      large: null,\n      orig: null,\n      thumb: null,\n      medium: null,\n      __typename: 'Paths'\n    },\n    __typename: 'Photo'\n  };\n\n  var photoResponseSummary = _lodash[\"default\"].pick(photoResponse, _fragments.photoSummaryKeys);\n\n  return {\n    createSeries: {\n      series: {\n        id: newSeries.id,\n        name: newSeries.name,\n        note: newSeries.note || null,\n        access: newSeries.access,\n        meta: newSeries.meta || null,\n        featured: _objectSpread({}, photoResponseSummary, {\n          __typename: 'PhotoSummary'\n        }),\n        latest: _objectSpread({}, photoResponseSummary, {\n          __typename: 'PhotoSummary'\n        }),\n        seriesStatus: null,\n        coords: newSeries.coords || null,\n        direction: newSeries.direction || null,\n        photoCount: 1,\n        createdUser: meUserSummary,\n        updatedUser: meUserSummary,\n        createdBy: meUserSummary.id,\n        updatedBy: meUserSummary.id,\n        createdOn: Date.now().toString(),\n        updatedOn: Date.now().toString(),\n        watchers: 0,\n        photos: [photoResponse],\n        __typename: 'Series'\n      },\n      preAuth: null,\n      __typename: 'NewSeries'\n    }\n  };\n};\n\nexports.createSeriesResponse = createSeriesResponse;\n\nvar updateSeriesResponse = function updateSeriesResponse(_ref4) {\n  var meUserSummary = _ref4.meUserSummary,\n      series = _ref4.series,\n      seriesDelta = _ref4.seriesDelta;\n  return {\n    updateSeries: _objectSpread({}, series, {}, seriesDelta, {\n      updatedUser: meUserSummary,\n      updatedBy: meUserSummary.id,\n      __typename: 'Series'\n    })\n  };\n};\n\nexports.updateSeriesResponse = updateSeriesResponse;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n# Check out the cheat sheet:\\n# https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\nschema {\\n  query: Query\\n  mutation: Mutation\\n}\\n\\ntype Query { \\n  init: String\\n  series(id: ID!): Series\\n  allSeries(limit: Int, nextToken: String): PaginatedSeries\\n  userSeries(createdBy: ID, limit: Int, nextToken: String): PaginatedSeries\\n  contributedSeries(limit: Int, nextToken: String): PaginatedSeries\\n  arraySeries(seriesIds: [ID], limit: Int, nextToken: String): [Series]\\n  changedSeries(limit: Int, nextToken: String, lastCheck: String!): PaginatedSeries\\n  seriesInGeoBounds(bounds: [Float], limit: Int, nextToken: String): PaginatedSeries\\n  user(id: ID): User\\n  s3Credentials(seriesId: ID!, photoId: ID!, ext: String!): String\\n  geocoder(search: String!): [GeocodeResult]\\n\\n  # ES Search Queries REWRITE THESE\\n\\n  # This one is bad\\n  userSearch(searchStr: String!, limit: Int): [UserSummary]\\n  # This one isn't written yet\\n  # searchUser(userStr: String, limit: Int, nextToken: String): \\n  keywordSearch(searchStr: String, limit: Int, nextToken: String): PaginatedSeries\\n\\n  # These will be better when they are ES:\\n  tags(tag: String, limit: Int, nextToken: String): [TagSummary]\\n  tagSeries(tag: String, limit: Int, nextToken: String): PaginatedSeries\\n  \\n  # TODO: Thing\\n  myFeed(start: String, end: String, limit: Int): MyFeedResult!\\n}\\n\\n# this schema allows the following mutation:\\ntype Mutation {\\n  updateSeries(series: UpdateSeriesInput!): Series!\\n  updatePhoto(photo: UpdatePhotoInput!): Photo!\\n  createSeries(series: NewSeriesInput!, photo: NewPhotoInput!, ext: String!): NewSeries!\\n  createPhoto(photo: NewPhotoInput!, ext: String!): NewPhoto!\\n  deletePhoto(seriesId: ID!, photoId: ID!): ID!\\n  deleteSeries(id: ID!): ID!\\n  createUser(userInfo: NewUserInput!): User!\\n  updateUser(userInfo: UserInput!): User!\\n  \\n  deleteUser(userId: ID!): ID!\\n  watchSeries(seriesId: ID!): ID!\\n  unWatchSeries(seriesId: ID!): ID!\\n\\n  reportBug(reportJSON: String!): Boolean\\n}\\n\\ntype TagSummary {\\n  _id: ID, \\n  name: String!\\n  count: Int!\\n}\\n\\ntype MyFeedResult {\\n  feed: [MyFeedResultItem]\\n  window: [String]\\n}\\n\\ntype MyFeedResultItem {\\n    # The redundant ID is purely for caching on the client side\\n  _id: ID!\\n  series: FeedSeriesSummary!\\n  photo: PhotoSummary!\\n  relation: RelationENUM!\\n}\\n\\ntype FeedSeriesSummary {\\n  # The redundant ID is purely for caching on the client side\\n  id: ID!\\n  name: String\\n  createdUser: UserSummary!\\n  access: String!\\n  updatedOn: String!\\n  createdOn: String!\\n  coords: [Float]\\n  watchers: Int!\\n  photoCount: Int\\n  seriesStatus: String\\n  direction: Int\\n}\\n\\nenum RelationENUM {\\n  OWNED\\n  CONTRIBUTED\\n  WATCHING\\n}\\n\\ntype PaginatedTagSummary {\\n  tags: [TagSummary]\\n  nextToken: String\\n}\\n\\n# Series Connection allows us to implement pagination easily\\ntype PaginatedSeries {\\n  seriesSummaries: [SeriesSummary]\\n  nextToken: String\\n}\\n\\n# Tags belong to Photos\\ninput TagInput {\\n  label: String!\\n  typeId: String!\\n  coords: ImageCoordsInput\\n}\\n\\ninput ImageCoordsInput {\\n  x: Int\\n  y: Int\\n}\\n\\n# New Photo is a little different because it includes the s3 authorization to upload it\\ntype NewPhoto {\\n  photo: Photo!\\n  preAuth: String!\\n}\\n\\n# Like NewPhoto, newSeries needs a token for the first image\\ntype NewSeries {\\n  series: Series!\\n  preAuth: String!\\n}\\n\\ninput UpdateSeriesInput {\\n  id: ID!\\n  access: String\\n  name: String\\n  note: String\\n  coords: [Float]\\n  direction: Int\\n}\\n\\ninput NewSeriesInput {\\n  access: String!\\n  name: String!\\n  note: String\\n  coords: [Float]\\n  direction: Int\\n  meta: String\\n}\\n\\n# This is a sample Dynamo Schema\\ntype Series {\\n  id: ID!\\n  createdBy: ID!\\n  createdUser: UserSummary!\\n  updatedBy: ID!\\n  updatedUser: UserSummary!\\n  access: String!\\n  seriesStatus: String\\n  # dates come back as strings because graphql can't do 32-bit integers\\n  createdOn: String!\\n  updatedOn: String!\\n  name: String!\\n  watchers: Int!\\n  photos: [Photo]\\n  coords: [Float]\\n  direction: Int\\n  photoCount: Int!\\n  featured: PhotoSummary # for a brief moment when creating records this can be null\\n  latest: PhotoSummary # for a brief moment when creating records this can be null\\n  # These is a JSON string object\\n  meta: String\\n  note: String\\n}\\n\\n# This is a sample Dynamo Schema\\ntype SeriesSummary {\\n  id: ID!\\n  name: String\\n  createdUser: UserSummary!\\n  access: String!\\n  updatedOn: String!\\n  createdOn: String!\\n  coords: [Float]\\n  watchers: Int!\\n  featured: PhotoSummary\\n  latest: PhotoSummary\\n  photoCount: Int\\n  seriesStatus: String\\n  direction: Int\\n}\\n\\ntype Photo {\\n  id: ID!\\n  createdBy: ID!\\n  createdUser: UserSummary!\\n  updatedBy: ID!\\n  updatedUser: UserSummary!\\n  createdOn: String!\\n  updatedOn: String!\\n  takenOn: String!\\n  coords: [Float]\\n  note: String\\n  seriesId: ID!\\n  seriesCreatedBy: ID!\\n  meta: String\\n  tags: [Tag]\\n  paths: Paths\\n  # This is a tracking marker so we know when things are updated \\n  uploadToken: String \\n}\\n\\n# Featured or latest photo in a series\\ntype PhotoSummary {\\n  id: ID!\\n  createdUser: UserSummary!\\n  takenOn: String\\n  updatedOn: String\\n  createdOn: String\\n  seriesId: ID!\\n  seriesCreatedBy: ID!\\n  paths: Paths\\n}\\n\\ninput NewPhotoInput {\\n  # Series ID might not be there if this is a new series\\n  seriesId: ID\\n  takenOn: String!\\n  meta: String\\n  rawData: String\\n  coords: [Float]\\n  tags: [TagInput]\\n  note: String\\n  # This is a tracking marker so we know when things are updated \\n  uploadToken: String!\\n}\\n\\ninput UpdatePhotoInput {\\n  id: ID!\\n  seriesId: ID!\\n  takenOn: String\\n  tags: [TagInput]\\n  coords: [Float]\\n  note: String\\n  featured: Boolean\\n  # This is a tracking marker so we know when things are updated \\n  uploadToken: String \\n}\\n\\n\\n# Tags belong to Photos\\ntype Tag {\\n  label: String!\\n  typeId: String!\\n  coords: ImageCoords\\n}\\n\\ntype Paths {\\n  base: String\\n  thumb: String\\n  medium: String\\n  large: String\\n  orig: String\\n}\\n\\ntype ImageCoords {\\n  x: Int\\n  y: Int\\n}\\n\\n\\ntype User {\\n  id: ID!\\n  username: String\\n  gravatar: String\\n  watching: [ID]\\n  gravatarProfile: String\\n  meta: String\\n  createdOn: String!\\n  updatedOn: String!\\n}\\n\\ntype UserSummary {\\n  id: ID!\\n  gravatar: String\\n  gravatarProfile: String\\n  username: String\\n  createdOn: String!\\n}\\n\\ninput NewUserInput {\\n  id: ID!\\n  username: String!\\n  meta: String\\n}\\n\\ninput UserInput {\\n  id: ID!\\n  watching: [ID]\\n  meta: String\\n}\\n\\n# Geocode Result\\ntype GeocodeResult {\\n  relevance: Float\\n  text: String\\n  placeName: String\\n  bbox: [Float]\\n  center: [Float]\\n  geoType: String\\n  context: String\\n}\\n\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar _default = (0, _graphqlTag[\"default\"])(_templateObject());\n\nexports[\"default\"] = _default;","export default {\n  '@global': {\n    'body, #root': {\n      height: '100%'\n    },\n    'html, body': {\n      overflow: 'hidden',\n      position: 'fixed',\n      fallbacks: [{\n        overflow: 'hidden'\n      }],\n      overscrollBehavior: 'contain',\n      height: '100%',\n      width: '100%'\n    },\n    '.Section__container___3YYTG': {\n      height: '100%'\n    },\n    ':not(input):not(textarea), :not(input):not(textarea)::after, :not(input):not(textarea)::before': {\n      W: 'none',\n      userSelect: 'none',\n      cursor: 'default'\n    },\n    'input, button, textarea, :focus': {\n      outline: 'none'\n    }\n  }\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { imgStore } from './offline';\n\nvar getPhotoUrls = function getPhotoUrls(photo, sizePriority) {\n  var dbKeys, blob, urlCreator, imageUrl;\n  return _regeneratorRuntime.async(function getPhotoUrls$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n\n          if (!photo.uploadToken) {\n            _context.next = 17;\n            break;\n          }\n\n          _context.prev = 2;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(imgStore.keys());\n\n        case 5:\n          dbKeys = _context.sent;\n\n          if (!(dbKeys.indexOf(photo.uploadToken) > -1)) {\n            _context.next = 13;\n            break;\n          }\n\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(imgStore.getItem(photo.uploadToken));\n\n        case 9:\n          blob = _context.sent;\n          urlCreator = window.URL || window.webkitURL;\n          imageUrl = urlCreator.createObjectURL(blob);\n          return _context.abrupt(\"return\", [imageUrl]);\n\n        case 13:\n          _context.next = 17;\n          break;\n\n        case 15:\n          _context.prev = 15;\n          _context.t0 = _context[\"catch\"](2);\n\n        case 17:\n          return _context.abrupt(\"return\", sizePriority.map(function (sp) {\n            return \"\".concat(photo.paths.base).concat(photo.paths[sp]);\n          }));\n\n        case 20:\n          _context.prev = 20;\n          _context.t1 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", null);\n\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 20], [2, 15]]);\n};\n\nexport default getPhotoUrls;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport BrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(2),\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      opacity: 0.3,\n      textAlign: 'center',\n      color: theme.palette.getContrastText(theme.palette.text.primary),\n      background: theme.palette.text.primary\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      opacity: 0.5\n    },\n    primary: {\n      textAlign: 'center',\n      width: '100%'\n    }\n  };\n});\n\nvar BrokenImg = function BrokenImg(_ref) {\n  var text = _ref.text,\n      className = _ref.className,\n      style = _ref.style,\n      props = _objectWithoutProperties(_ref, [\"text\", \"className\", \"style\"]);\n\n  var classes = useStyles();\n  return React.createElement(\"div\", _extends({\n    className: classNames(classes.root, className),\n    style: style\n  }, props), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(BrokenImageIcon, {\n    className: classes.icon,\n    color: \"inherit\"\n  }), React.createElement(Typography, {\n    className: classes.primary,\n    color: \"inherit\"\n  }, text || 'Missing'), React.createElement(\"div\", {\n    className: classes.spacer\n  }));\n};\n\nBrokenImg.propTypes = {\n  text: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object\n};\nexport default BrokenImg;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(2),\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      opacity: 0.3,\n      textAlign: 'center',\n      color: theme.palette.getContrastText(theme.palette.text.primary),\n      background: theme.palette.text.primary\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      opacity: 0.5\n    },\n    circularProgress: {\n      margin: '0 auto'\n    },\n    primary: {\n      textAlign: 'center',\n      width: '100%'\n    },\n    secondary: {\n      flex: '1 1 30%',\n      width: '100%'\n    }\n  };\n});\n\nvar LoadingImg = function LoadingImg(_ref) {\n  var text = _ref.text,\n      className = _ref.className,\n      style = _ref.style;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className),\n    style: style\n  }, React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(CircularProgress, {\n    color: \"inherit\",\n    className: classes.circularProgress\n  }), React.createElement(Typography, {\n    className: classes.primary,\n    color: \"inherit\"\n  }, text || 'Loading'), React.createElement(\"div\", {\n    className: classes.spacer\n  }));\n};\n\nLoadingImg.propTypes = {\n  text: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object\n};\nexport default LoadingImg;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport BrokenImg from './BrokenImg';\nimport LoadingImg from './LoadingImg';\nimport log from 'loglevel';\nvar MAX_RETRIES = 3;\nvar IMG_STATES = {\n  LOADING: 'loading',\n  BROKEN: 'broken',\n  LOADED: 'loaded'\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      position: 'relative',\n      display: 'block',\n      height: '100%',\n      width: '100%'\n    },\n    img: {\n      display: 'block',\n      height: '100%',\n      width: '100%'\n    },\n    imgBroken: {\n      display: 'none'\n    }\n  };\n});\nexport var RawImage = function RawImage(_ref) {\n  var className = _ref.className,\n      sizePriority = _ref.sizePriority,\n      dataUrl = _ref.dataUrl,\n      _onLoad = _ref.onLoad,\n      photo = _ref.photo,\n      imgRef = _ref.imgRef,\n      style = _ref.style,\n      props = _objectWithoutProperties(_ref, [\"className\", \"sizePriority\", \"dataUrl\", \"onLoad\", \"photo\", \"imgRef\", \"style\"]);\n\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      imgUrls = _useState2[0],\n      setImgUrls = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      altIndex = _useState4[0],\n      setAltIndex = _useState4[1];\n\n  var _useState5 = useState({\n    state: IMG_STATES.LOADING,\n    retry: -1\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      imgState = _useState6[0],\n      setImgState = _useState6[1];\n\n  var _useContext = useContext(AppContext),\n      getPhotoUrls = _useContext.getPhotoUrls,\n      online = _useContext.online;\n\n  var mountedRef = useRef();\n  var imgPropRef = useRef();\n  imgPropRef.current = _objectSpread({\n    altIndex: altIndex\n  }, imgState);\n  useEffect(function () {\n    mountedRef.current = true;\n    return function () {\n      mountedRef.current = null;\n    };\n  }, []);\n  var dataAsUrl = null;\n  if (dataUrl) dataAsUrl = dataUrl;else if (photo && photo.dataUrl) dataAsUrl = photo.dataUrl;\n\n  var setBroken = function setBroken() {\n    setImgState({\n      state: IMG_STATES.BROKEN,\n      retry: -1\n    });\n  };\n\n  var isBroken = imgState.state === IMG_STATES.BROKEN;\n  var isLoading = imgState.state === IMG_STATES.LOADING;\n  useEffect(function () {\n    if (!photo) {\n      log.error('RawImage Missing photo record');\n      return setBroken();\n    }\n\n    if (dataAsUrl) return;\n\n    if (!getPhotoUrls || !photo || !photo.paths || Object.keys(photo.paths).length === 0) {\n      setBroken();\n    } else {\n      getPhotoUrls(photo, ['large', 'medium']).then(function (data) {\n        if (!imgUrls && mountedRef.current && data && data.length > 0) {\n          setImgUrls(data);\n          setImgState({\n            state: IMG_STATES.LOADING,\n            retry: 1\n          });\n        }\n      }).catch(function () {\n        if (mountedRef.current) {\n          setBroken();\n        }\n      });\n    }\n  }, [photo]);\n  var finalURL = '';\n  if (dataAsUrl) finalURL = dataAsUrl;else if (imgUrls && imgUrls[altIndex]) finalURL = imgUrls[altIndex];\n  if (!isBroken && imgState.retry > 1) finalURL = \"\".concat(finalURL, \"?retry=\").concat(imgState.retry);\n\n  if (isBroken) {\n    return React.createElement(BrokenImg, _extends({\n      className: className,\n      style: style\n    }, props));\n  }\n\n  return React.createElement(React.Fragment, null, isLoading && React.createElement(LoadingImg, {\n    className: className,\n    style: style\n  }), !isBroken && React.createElement(\"img\", _extends({\n    ref: imgRef,\n    className: classNames(className, classes.img),\n    alt: sizePriority[altIndex],\n    style: _objectSpread({\n      objectFit: 'contain',\n      display: isLoading ? 'none' : 'block'\n    }, style),\n    onLoad: function onLoad() {\n      setImgState({\n        state: IMG_STATES.LOADED,\n        retry: -1\n      });\n      if (_onLoad) _onLoad();\n    },\n    onError: function onError() {\n      if (!mountedRef.current) return;\n      if (dataAsUrl) setBroken();else if (!online.isOnline) {\n        if (imgUrls && imgPropRef.current.altIndex < imgUrls.length - 1) {\n          setAltIndex(imgPropRef.current.altIndex + 1);\n        } else {\n          if (mountedRef.current) {\n            setAltIndex(0);\n            setBroken();\n          }\n        }\n      } else if (online.isOnline) {\n        if (imgUrls && imgUrls.length > 0 && imgPropRef.current.retry > -1 && imgPropRef.current.retry < MAX_RETRIES) {\n          setTimeout(function () {\n            if (mountedRef.current) setImgState({\n              state: IMG_STATES.LOADING,\n              retry: imgPropRef.current.retry + 1\n            });\n          }, 1000);\n        } else {\n          setBroken();\n        }\n      }\n    },\n    src: finalURL\n  }, props)));\n};\nRawImage.propTypes = {\n  className: PropTypes.string,\n  sizePriority: PropTypes.arrayOf(PropTypes.string),\n  imgRef: PropTypes.any,\n  dataUrl: PropTypes.string,\n  onLoad: PropTypes.func,\n  photo: PropTypes.object,\n  style: PropTypes.object\n};\nRawImage.defaultProps = {\n  sizePriority: ['large', 'medium']\n};\nexport default RawImage;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useLayoutEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useComponentSize } from '@morphoto/client-common';\nimport { XYTagChip, useXYTags } from '@morphoto/tags';\nimport RawImage from './RawImage';\nimport style from './Photo.style';\nimport log from 'loglevel';\nvar useStyles = makeStyles(style);\n\nvar Photo = function Photo(_ref) {\n  var photo = _ref.photo,\n      editXYTags = _ref.editXYTags,\n      showTags = _ref.showTags,\n      onXYTagChange = _ref.onXYTagChange,\n      className = _ref.className;\n  var classes = useStyles();\n  var refImgWrap = useRef();\n  var imgRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      newSize = _useState2[0],\n      setNewSize = _useState2[1];\n\n  var _useComponentSize = useComponentSize(refImgWrap),\n      _useComponentSize$siz = _useComponentSize.size,\n      height = _useComponentSize$siz.height,\n      width = _useComponentSize$siz.width,\n      setResizeActive = _useComponentSize.setResizeActive;\n\n  var _useXYTags = useXYTags(photo, editXYTags, newSize, onXYTagChange, setResizeActive),\n      onAddTagTrigger = _useXYTags.onAddTagTrigger,\n      XYTagChooserWrapper = _useXYTags.XYTagChooserWrapper,\n      relXYTags = _useXYTags.relXYTags,\n      onTagDragOver = _useXYTags.onTagDragOver,\n      onTagDragStop = _useXYTags.onTagDragStop,\n      onTagDelete = _useXYTags.onTagDelete;\n\n  var handleNewSize = function handleNewSize() {\n    if (!imgRef.current) return;\n    var _imgRef$current = imgRef.current,\n        naturalHeight = _imgRef$current.naturalHeight,\n        naturalWidth = _imgRef$current.naturalWidth;\n\n    if (!(naturalWidth > 0 && naturalHeight > 0)) {\n      if (!refImgWrap.current) return;\n      log.info('Possible broken image');\n      var refWrapBounds = refImgWrap.current.getBoundingClientRect();\n      return setNewSize({\n        newWidth: refWrapBounds.width,\n        newHeight: refWrapBounds.height,\n        naturalWidth: refWrapBounds.width,\n        naturalHeight: refWrapBounds.height,\n        multiplier: 1,\n        broken: true\n      });\n    }\n\n    var multiplier = Math.min(height / naturalHeight, width / naturalWidth);\n    var newWidth = multiplier * naturalWidth;\n    var newHeight = multiplier * naturalHeight;\n    setNewSize({\n      newWidth: newWidth,\n      newHeight: newHeight,\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight,\n      multiplier: multiplier\n    });\n  };\n\n  useLayoutEffect(handleNewSize, [width, height]);\n  var xyTags = useMemo(function () {\n    return React.createElement(\"div\", {\n      className: classes.xyTags\n    }, relXYTags.map(function (tag, idx) {\n      return React.createElement(XYTagChip, _extends({\n        key: \"xytag-\".concat(idx),\n        color: tag.color,\n        edit: editXYTags\n      }, {\n        newSize: newSize,\n        tag: tag,\n        onTagDragOver: onTagDragOver,\n        onTagDragStop: onTagDragStop,\n        onTagDelete: onTagDelete\n      }));\n    }));\n  }, [relXYTags, showTags]);\n  var imgStyle = {};\n\n  if (newSize) {\n    imgStyle = {\n      height: newSize.newHeight,\n      width: newSize.newWidth\n    };\n  }\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className),\n    ref: refImgWrap\n  }, React.createElement(\"div\", {\n    className: classes.inner,\n    style: {\n      height: newSize ? newSize.newHeight : 1,\n      width: newSize ? newSize.newWidth : 1\n    },\n    onClick: onAddTagTrigger\n  }, (showTags || editXYTags) && newSize && !newSize.broken && xyTags, React.createElement(RawImage, {\n    className: classes.rawImage,\n    sizePriority: ['large', 'medium', 'thumb'],\n    photo: photo,\n    imgRef: imgRef,\n    onLoad: handleNewSize,\n    style: imgStyle\n  })), editXYTags && React.createElement(XYTagChooserWrapper, {\n    title: \"Choose Tag\"\n  }));\n};\n\nPhoto.propTypes = {\n  className: PropTypes.string,\n  photo: PropTypes.object.isRequired,\n  editXYTags: PropTypes.bool,\n  showTags: PropTypes.bool,\n  onXYTagChange: PropTypes.func\n};\nexport default Photo;","export default (function (theme) {\n  return {\n    root: {\n      display: 'block',\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      background: 'black',\n      overflow: 'hidden'\n    },\n    inner: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    xyTags: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    img: {\n      display: 'block'\n    },\n    brokenImg: {\n      display: 'none'\n    },\n    formControl: {\n      width: '100%'\n    }\n  };\n});","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { RawImage } from './RawImage';\nimport style from './PhotoGrid.style';\nimport { AppContext } from '@morphoto/client-common';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(style);\n\nvar PhotoGrid = function PhotoGrid(_ref) {\n  var photos = _ref.photos,\n      columns = _ref.columns,\n      multiSelect = _ref.multiSelect,\n      onDelete = _ref.onDelete,\n      onTileClick = _ref.onTileClick,\n      allowDelete = _ref.allowDelete;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectMode = _useState2[0],\n      setSelectMode = _useState2[1];\n\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      getPhotoUrls = _useContext.getPhotoUrls;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedItems = _useState4[0],\n      setSelectedItems = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      urls = _useState6[0],\n      setUrls = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      deleteConfirm = _useState8[0],\n      setDeleteConfirm = _useState8[1];\n\n  var handleAddToSelection = function handleAddToSelection(e, id) {\n    e.preventDefault();\n    e.stopPropagation();\n    setSelectMode(true);\n    toggleListItem(id);\n  };\n\n  var handleCancelSelection = function handleCancelSelection() {\n    setSelectMode(false);\n    setSelectedItems([]);\n  };\n\n  var onDeleteConfirm = function onDeleteConfirm(confirmation) {\n    setDeleteConfirm(false);\n    if (confirmation === true && selectedItems.length < photos.length) onDelete(selectedItems);\n    handleCancelSelection();\n  };\n\n  var toggleListItem = function toggleListItem(id) {\n    var index = selectedItems.indexOf(id);\n    if (index < 0) setSelectedItems([].concat(_toConsumableArray(selectedItems), [id]));else {\n      var remaining = selectedItems.filter(function (arrId) {\n        return arrId !== id;\n      });\n      if (remaining.length === 0) handleCancelSelection();\n      setSelectedItems(remaining);\n    }\n  };\n\n  useEffect(function () {\n    photos.forEach(function _callee(ph) {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = setUrls;\n              _context.t1 = _objectSpread;\n              _context.t2 = {};\n              _context.t3 = urls;\n              _context.t4 = _defineProperty;\n              _context.t5 = {};\n              _context.t6 = ph.id;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(getPhotoUrls(ph, ['thumb', 'medium']));\n\n            case 9:\n              _context.t7 = _context.sent;\n              _context.t8 = (0, _context.t4)(_context.t5, _context.t6, _context.t7);\n              _context.t9 = (0, _context.t1)(_context.t2, _context.t3, _context.t8);\n              (0, _context.t0)(_context.t9);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n  }, [photos]);\n\n  var handlePhotoTap = function handlePhotoTap(e, photo) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (allowDelete && selectMode) toggleListItem(photo.id);else onTileClick(photo.id);\n  };\n\n  return React.createElement(\"div\", null, React.createElement(GridList, {\n    cols: columns,\n    cellHeight: 200,\n    className: classes.root\n  }, photos.map(function (photo, idx) {\n    var selected = selectedItems.indexOf(photo.id) > -1;\n    return React.createElement(GridListTile, {\n      key: \"gridTile\".concat(idx, \"_\").concat(photo.id),\n      onClick: function onClick(e) {\n        return handlePhotoTap(e, photo);\n      },\n      classes: {\n        root: classes.root,\n        tile: classNames(classes.tile, selectMode && !allowDelete && classes.notDeleteable, selectMode && allowDelete && !selected && classes.unSelectedTile, selectMode && selected && classes.selectedTile)\n      }\n    }, React.createElement(RawImage, {\n      photo: photo,\n      style: {\n        objectFit: 'cover'\n      },\n      sizePriority: ['medium', 'thumb', 'large'],\n      className: classes.img\n    }), allowDelete && multiSelect && React.createElement(Fab, {\n      size: \"small\",\n      \"aria-label\": \"Add\",\n      disableFocusRipple: true,\n      className: !selectMode || !selected ? classes.addFab : classes.removeFab,\n      onClick: function onClick(e) {\n        return handleAddToSelection(e, photo.id);\n      }\n    }, !selectMode || !selected ? React.createElement(AddIcon, null) : React.createElement(RemoveIcon, null)), React.createElement(GridListTileBar, {\n      title: React.createElement(\"span\", null, dates.formatDate(photo.takenOn, 'll LT'))\n    }));\n  })), React.createElement(Snackbar, {\n    open: selectMode,\n    autoHideDuration: null,\n    ContentProps: {\n      'aria-describedby': 'snackbar-fab-message-id',\n      className: classes.snackbarContent\n    },\n    message: React.createElement(\"span\", {\n      id: \"snackbar-fab-message-id\"\n    }, selectedItems.length >= photos.length ? 'You can\\'t delete all the photos. delete the series instead.' : \"\".concat(selectedItems.length, \" Photos selected\")),\n    action: React.createElement(\"div\", null, React.createElement(Button, {\n      color: \"inherit\",\n      disabled: selectedItems.length >= photos.length,\n      size: \"small\",\n      onClick: function onClick() {\n        return setDeleteConfirm(true);\n      }\n    }, \"Delete\"), React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: function onClick() {\n        return handleCancelSelection();\n      }\n    }, \"Cancel\")),\n    className: classes.snackbar\n  }), React.createElement(DeleteDialog, {\n    open: deleteConfirm,\n    onConfirm: onDeleteConfirm,\n    title: \"Delete \".concat(selectedItems.length, \" Photos\"),\n    message: \"Are you sure you want to delete these photos?\"\n  }));\n};\n\nPhotoGrid.propTypes = {\n  photos: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  multiSelect: PropTypes.bool,\n  allowDelete: PropTypes.bool,\n  onDelete: PropTypes.func,\n  onTileClick: PropTypes.func.isRequired\n};\nPhotoGrid.defaultProps = {\n  multiSelect: true,\n  columns: 2\n};\nexport default PhotoGrid;","import { red } from '@material-ui/core/colors';\nexport default (function (theme) {\n  return {\n    root: {},\n    tile: {},\n    addFab: {\n      position: 'absolute',\n      zIndex: 10,\n      top: theme.spacing(1),\n      left: theme.spacing(1),\n      backgroundColor: '#99999988',\n      border: \"2px solid #FFFFFF99\",\n      color: '#FFFFFF'\n    },\n    removeFab: {\n      '&:hover': {\n        backgroundColor: theme.palette.error.dark\n      },\n      position: 'absolute',\n      zIndex: 10,\n      top: theme.spacing(1),\n      left: theme.spacing(1),\n      backgroundColor: theme.palette.error.main,\n      border: theme.palette.error.contrastText,\n      color: theme.palette.error.contrastText\n    },\n    notDeleteable: {\n      background: theme.palette.error.dark,\n      opacity: 0.1\n    },\n    unSelectedTile: {\n      '& img': {\n        opacity: 0.7\n      }\n    },\n    selectedTile: {\n      padding: \"\".concat(theme.spacing(2), \"px!important\"),\n      '& img': {\n        opacity: 1\n      }\n    },\n    img: {},\n    snackbarContent: {\n      backgroundColor: red[700]\n    },\n    snackbar: {}\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { util } from '@morphoto/common';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: 'white',\n      zIndex: 10,\n      display: 'flex',\n      flexDirection: 'column',\n      position: 'absolute',\n      '@media (orientation: landscape)': {\n        height: '80%',\n        bottom: '0%'\n      },\n      '@media (orientation: portrait)': {\n        left: '0',\n        transform: 'translateY(-50%)',\n        height: '75%',\n        top: '50%'\n      }\n    },\n    sliderLabel: {\n      display: 'block',\n      flexGrow: 1,\n      textAlign: 'center',\n      padding: theme.spacing(3, 0, 3, 0),\n      textShadow: '0 0 5px black, 0 0 5px black'\n    },\n    vertical: {\n      padding: '0px 31px!important',\n      width: '4px!important'\n    },\n    rail: {\n      width: \"4px!important\",\n      background: theme.palette.primary.dark,\n      boxShadow: '0 0 10px 5px black'\n    },\n    track: {\n      width: \"4px!important\",\n      background: theme.palette.primary.main\n    },\n    thumb: {\n      background: theme.palette.primary.main,\n      border: \"1px solid \".concat(theme.palette.primary.dark),\n      marginLeft: '-13px !important',\n      marginBottom: '-13px !important',\n      width: 30,\n      height: 30\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar PhotoFadeSlider = function PhotoFadeSlider(_ref) {\n  var defaultValue = _ref.defaultValue,\n      onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n\n  var _useState = useState(defaultValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      slider = _useState2[0],\n      setSlider = _useState2[1];\n\n  var debouncedOnChange = util.debounce(onChange, 200, true);\n\n  var onSliderMove = function onSliderMove(event, value) {\n    setSlider(value);\n    debouncedOnChange(value);\n  };\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    className: classes.sliderLabel,\n    color: \"inherit\",\n    variant: \"caption\"\n  }, \"New\"), React.createElement(Slider, {\n    classes: {\n      vertical: classes.vertical,\n      rail: classes.rail,\n      track: classes.track,\n      thumb: classes.thumb\n    },\n    color: \"secondary\",\n    value: slider,\n    \"aria-labelledby\": \"label\",\n    onChange: onSliderMove,\n    orientation: \"vertical\"\n  }), React.createElement(Typography, {\n    className: classes.sliderLabel,\n    color: \"inherit\",\n    variant: \"caption\"\n  }, \"Reference\"));\n};\n\nPhotoFadeSlider.propTypes = {\n  defaultValue: PropTypes.number,\n  className: PropTypes.string,\n  onChange: PropTypes.func\n};\nPhotoFadeSlider.defaultProps = {\n  defaultValue: 100,\n  onChange: function onChange() {}\n};\nexport default PhotoFadeSlider;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useLayoutEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { RawImage, PhotoGrid, PhotoFadeSlider } from '@morphoto/photos';\nimport { LoadingContainer } from '@morphoto/ui';\nimport style from './PhotoReviewTool.style';\nvar useStyles = makeStyles(style);\n\nvar PhotoReviewTool = function PhotoReviewTool(_ref) {\n  var photoBlob = _ref.photoBlob,\n      photos = _ref.photos,\n      defaultRefPhotoId = _ref.defaultRefPhotoId,\n      onConfirm = _ref.onConfirm,\n      onCancel = _ref.onCancel,\n      onRetry = _ref.onRetry,\n      inputMethod = _ref.inputMethod;\n  var classes = useStyles();\n  var imgRef = useRef();\n  var newRefPhoto = defaultRefPhotoId ? photos.find(function (p) {\n    return p.id === defaultRefPhotoId;\n  }) : photos && photos.length > 0 ? photos[0] : null;\n  useLayoutEffect(function () {\n    if (!photoBlob || !imgRef.current) return;\n    var urlCreator = window.URL || window.webkitURL;\n    var imageUrl = urlCreator.createObjectURL(photoBlob);\n    imgRef.current.src = imageUrl;\n  }, [photoBlob]);\n\n  var _useState = useState(newRefPhoto),\n      _useState2 = _slicedToArray(_useState, 2),\n      refPhoto = _useState2[0],\n      setRefPhoto = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawerOpen = _useState4[0],\n      setDrawerOpen = _useState4[1];\n\n  var _useState5 = useState(70),\n      _useState6 = _slicedToArray(_useState5, 2),\n      slider = _useState6[0],\n      setSlider = _useState6[1];\n\n  var handleTileClick = function handleTileClick(id) {\n    setRefPhoto(photos.find(function (p) {\n      return p.id === id;\n    }));\n    setDrawerOpen(false);\n  };\n\n  if (!photoBlob) {\n    return React.createElement(LoadingContainer, {\n      loading: true,\n      noAppInfo: true\n    }, React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"subtitle1\"\n    }, \"Processing Image...\"));\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), Boolean(refPhoto) && React.createElement(PhotoFadeSlider, {\n    className: classes.slider,\n    defaultValue: slider,\n    onChange: setSlider\n  }), Boolean(refPhoto) && React.createElement(\"div\", {\n    className: classes.reference\n  }, React.createElement(RawImage, {\n    sizePriority: ['large', 'medium', 'thumb'],\n    style: {\n      opacity: 1 - slider / 100\n    },\n    photo: refPhoto\n  })), React.createElement(\"div\", {\n    className: classes.canvasWrapper\n  }, React.createElement(\"img\", {\n    ref: imgRef,\n    className: classes.rawImage\n  })), React.createElement(Snackbar, {\n    open: true,\n    autoHideDuration: null,\n    ContentProps: {\n      'aria-describedby': 'snackbar-fab-message-id',\n      className: classes.snackbarContent\n    },\n    message: React.createElement(\"span\", {\n      id: \"snackbar-fab-message-id\"\n    }, \"Keep this photo?\"),\n    action: React.createElement(\"div\", null, React.createElement(Button, {\n      color: \"secondary\",\n      size: \"small\",\n      onClick: onCancel\n    }, \"Cancel\"), Boolean(onRetry) && React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onRetry\n    }, inputMethod === 'library' ? 'Choose Another' : 'Retry'), React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onConfirm\n    }, \"Keep\")),\n    className: classes.snackbar\n  }), photos && photos.length > 0 && React.createElement(Fab, {\n    \"aria-label\": \"library\",\n    className: classNames(classes.libraryFab, classes.buttonFab),\n    classes: {\n      disabled: classes.disabledFab\n    },\n    onClick: function onClick() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    className: classes.libraryIcon\n  })), photos && React.createElement(SwipeableDrawer, {\n    anchor: \"left\",\n    open: drawerOpen,\n    classes: {\n      paperAnchorLeft: classes.swipeDrawer\n    },\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: classes.swipeDrawerContainer,\n    role: \"button\",\n    onClick: function onClick() {\n      return setDrawerOpen(false);\n    },\n    onKeyDown: function onKeyDown() {\n      return setDrawerOpen(false);\n    }\n  }, React.createElement(PhotoGrid, {\n    multiSelect: false,\n    columns: 1,\n    photos: photos,\n    onTileClick: handleTileClick\n  }))));\n};\n\nPhotoReviewTool.propTypes = {\n  defaultRefPhotoId: PropTypes.string,\n  photoBlob: PropTypes.any,\n  photos: PropTypes.array,\n  inputMethod: PropTypes.string,\n  onConfirm: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onRetry: PropTypes.func\n};\nexport default PhotoReviewTool;","import { fade } from '@material-ui/core/styles/colorManipulator';\nexport default (function (theme) {\n  var pulseCol = fade(theme.palette.secondary.light, 0.4);\n  return {\n    root: {\n      background: 'rgb(150,150, 150)',\n      height: '100%',\n      width: '100%'\n    },\n    canvasWrapper: {\n      zIndex: 2,\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    },\n    rawImage: {\n      height: '100%',\n      width: '100%',\n      objectFit: 'contain'\n    },\n    reference: {\n      zIndex: 3,\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    },\n    libraryFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        left: '15px',\n        top: '15px'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        top: '15px'\n      }\n    },\n    slider: {\n      '@media (orientation: landscape)': {\n        position: 'absolute',\n        left: '0',\n        height: '79%',\n        top: '20%'\n      },\n      '@media (orientation: portrait)': {\n        position: 'absolute',\n        left: '0',\n        transform: 'translateY(-50%)',\n        height: '50%',\n        top: '45%'\n      }\n    },\n    snackbarContent: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        borderRadius: 'inherit',\n        boxShadow: \"0 0 0 0 \".concat(pulseCol),\n        animation: '$fabPulse 4s',\n        animationIterationCount: 5,\n        animationTimingFunction: 'linear'\n      }\n    },\n    '@keyframes fabPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '90%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 10px transparent\"\n      }\n    },\n    swipeDrawer: {\n      width: '50%'\n    },\n    referenceTextContainer: {\n      width: '100%',\n      display: 'flex',\n      color: 'white',\n      background: 'rgba(0,0,0,0.5)',\n      padding: theme.spacing(3),\n      position: 'absolute',\n      zIndex: 4,\n      top: 0\n    },\n    newText: {\n      flexGrow: 1,\n      color: 'white',\n      textShadow: '1 1 1 black',\n      textAlign: 'right'\n    },\n    refText: {\n      flexGrow: 1,\n      color: 'white',\n      textShadow: '1 1 1 black'\n    }\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport RawImage from './RawImage';\nimport { XYTagChip, useXYTags } from '@morphoto/tags';\nimport Hammer from 'react-hammerjs';\nimport log from 'loglevel';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      background: 'black',\n      height: '100%',\n      overflow: 'hidden',\n      position: 'relative'\n    },\n    inner: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar PhotoZoom = function PhotoZoom(_ref) {\n  var photo = _ref.photo,\n      showTags = _ref.showTags,\n      className = _ref.className,\n      onClose = _ref.onClose,\n      initZoom = _ref.initZoom;\n  var classes = useStyles();\n  var refImgWrap = useRef();\n  var imgRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      transform = _useState2[0],\n      setTransform = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      trOld = _useState4[0],\n      setTrOld = _useState4[1];\n\n  var newSize = transform ? {\n    multiplier: transform ? transform.scale : 1,\n    newWidth: transform.scaledWidth,\n    newHeight: transform.scaledHeight\n  } : {\n    newWidth: 0,\n    newHeight: 0,\n    naturalWidth: 0,\n    naturalHeight: 0,\n    multiplier: 1\n  };\n\n  var _useXYTags = useXYTags(photo, false, newSize, null, true),\n      relXYTags = _useXYTags.relXYTags;\n\n  var handleClose = function handleClose() {\n    onClose();\n  };\n\n  var xyTags = useMemo(function () {\n    return React.createElement(\"div\", {\n      className: classes.xyTags\n    }, relXYTags.map(function (tag, idx) {\n      return React.createElement(XYTagChip, _extends({\n        key: \"xytag-\".concat(idx),\n        color: tag.color\n      }, {\n        newSize: newSize,\n        tag: tag\n      }));\n    }));\n  }, [relXYTags]);\n\n  var handleNewSize = function handleNewSize() {\n    if (!imgRef.current || !refImgWrap.current) return;\n    if (!transform) disableImgEventHandlers(imgRef.current);\n\n    var _refImgWrap$current$p = refImgWrap.current.parentElement.getBoundingClientRect(),\n        containerWidth = _refImgWrap$current$p.width,\n        containerHeight = _refImgWrap$current$p.height;\n\n    var _imgRef$current = imgRef.current,\n        naturalHeight = _imgRef$current.naturalHeight,\n        naturalWidth = _imgRef$current.naturalWidth;\n\n    if (!(naturalWidth > 0 && naturalHeight > 0)) {\n      setTransform(null);\n    } else {\n      var minZoom = Math.min(containerWidth / naturalWidth, containerHeight / naturalHeight);\n      var maxZoom = Math.max(1.5, naturalWidth / containerWidth, naturalHeight / containerHeight);\n\n      var _initZoom = Math.max(containerWidth / naturalWidth, containerHeight / naturalHeight);\n\n      var scaledWidth = naturalWidth * _initZoom;\n      var scaledHeight = naturalHeight * _initZoom;\n\n      if (!transform || naturalHeight !== transform.naturalHeight || naturalWidth !== transform.naturalWidth) {\n        setTransform({\n          containerWidth: containerWidth,\n          containerHeight: containerHeight,\n          moving: false,\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          scaledWidth: scaledWidth,\n          scaledHeight: scaledHeight,\n          minZoom: minZoom,\n          maxZoom: maxZoom,\n          x: (containerWidth - scaledWidth) / 2,\n          y: (containerHeight - scaledHeight) / 2,\n          pinchCenter: null,\n          scale: _initZoom\n        });\n      }\n    }\n  };\n\n  var handlePinch = function handlePinch(_ref2) {\n    var scale = _ref2.scale,\n        center = _ref2.center;\n    if (!transform) return;\n    if (!trOld) setTrOld(transform);\n    var old = trOld || transform;\n    var pinchCenter = old.pinchCenter ? old.pinchCenter : center;\n    var newScaledWidth = old.naturalWidth * old.scale * scale;\n    var newScaledHeight = old.naturalHeight * old.scale * scale;\n    var centerFraction = {\n      x: (center.x - old.x) / old.scaledWidth,\n      y: (center.y - old.y) / old.scaledHeight\n    };\n    var newX = old.x + (old.scaledWidth - newScaledWidth) * centerFraction.x;\n    var newY = old.y + (old.scaledHeight - newScaledHeight) * centerFraction.y;\n    setTransform(_objectSpread({}, old, {\n      moving: true,\n      pinchCenter: pinchCenter,\n      scale: scale,\n      x: newX,\n      y: newY,\n      scaledWidth: newScaledWidth,\n      scaledHeight: newScaledHeight\n    }));\n  };\n\n  var rangeSnap = function rangeSnap(val, min, max) {\n    if (val > max) return max;else if (val < min) return min;else return val;\n  };\n\n  var handlePan = function handlePan(_ref3) {\n    var deltaX = _ref3.deltaX,\n        deltaY = _ref3.deltaY;\n    if (!transform) return;\n    if (!trOld) setTrOld(transform);\n    var old = trOld || transform;\n    setTransform(_objectSpread({}, old, {\n      moving: true,\n      x: old.x + deltaX,\n      y: old.y + deltaY\n    }));\n  };\n\n  var handleEnd = function handleEnd() {\n    if (!transform) return;\n\n    var moving = transform.moving,\n        ft = _objectWithoutProperties(transform, [\"moving\"]);\n\n    ft.pinchCenter = null;\n    if (ft.scale < ft.minZoom) return onClose();\n    ft.scale = rangeSnap(ft.scale, ft.minZoom, ft.maxZoom);\n    ft.scaledWidth = ft.naturalWidth * ft.scale;\n    ft.scaledHeight = ft.naturalHeight * ft.scale;\n    if (transform.containerWidth - ft.scaledWidth > 0) ft.x = (transform.containerWidth - ft.scaledWidth) / 2;else ft.x = rangeSnap(ft.x, transform.containerWidth - ft.scaledWidth, 0);\n    if (transform.containerHeight - ft.scaledHeight > 0) ft.y = (transform.containerHeight - ft.scaledHeight) / 2;else ft.y = rangeSnap(ft.y, transform.containerHeight - ft.scaledHeight, 0);\n    setTransform(ft);\n    setTrOld(null);\n  };\n\n  var handleCancel = function handleCancel() {\n    if (!transform) return;\n\n    var _ref4 = trOld || transform,\n        moving = _ref4.moving,\n        ft = _objectWithoutProperties(_ref4, [\"moving\"]);\n\n    setTransform(ft);\n    setTrOld(null);\n  };\n\n  var rawImg = useMemo(function () {\n    return React.createElement(RawImage, {\n      className: classes.rawImage,\n      sizePriority: ['large', 'medium', 'thumb'],\n      photo: photo,\n      imgRef: imgRef,\n      onLoad: handleNewSize\n    });\n  }, [photo]);\n  return React.createElement(Hammer, {\n    onDoubleTap: handleClose,\n    onPinch: handlePinch,\n    onPan: handlePan,\n    onPinchEnd: handleEnd,\n    onPanEnd: handleEnd,\n    onPinchCancel: handleCancel,\n    onPanCancel: handleCancel,\n    options: {\n      recognizers: {\n        pinch: {\n          enable: true\n        }\n      }\n    }\n  }, React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.inner,\n    ref: refImgWrap,\n    style: {\n      height: transform ? transform.scaledHeight : '100%',\n      width: transform ? transform.scaledWidth : '100%',\n      marginLeft: transform ? transform.x : 0,\n      marginTop: transform ? transform.y : 0\n    }\n  }, showTags && transform && !transform.moving && newSize && !newSize.broken && xyTags, rawImg)));\n};\n\nPhotoZoom.propTypes = {\n  className: PropTypes.string,\n  photo: PropTypes.object.isRequired,\n  showTags: PropTypes.bool,\n  initZoom: PropTypes.number,\n  onClose: PropTypes.func.isRequired\n};\nexport default PhotoZoom;\n\nvar disableImgEventHandlers = function disableImgEventHandlers(imgEl) {\n  var events = ['onclick', 'onmousedown', 'onmousemove', 'onmouseout', 'onmouseover', 'onmouseup', 'ondblclick', 'onfocus', 'onblur'];\n  events.forEach(function (event) {\n    imgEl[event] = function () {\n      return false;\n    };\n  });\n};","import themes from '@morphoto/themes';\nexport default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    appBar: {\n      flexGrow: 0,\n      color: function color(props) {\n        return themes.access[props.seriesAccess].palette.primary.contrastText;\n      },\n      background: function background(props) {\n        return themes.access[props.seriesAccess].palette.primary.main;\n      }\n    },\n    appBarEdit: {\n      color: function color(props) {\n        return themes.access[props.seriesAccess].palette.primary.contrastText;\n      },\n      background: function background(props) {\n        return themes.access[props.seriesAccess].palette.primary.main;\n      }\n    },\n    menuTextPadded: {\n      marginLeft: theme.spacing(2)\n    },\n    pulseIcon: {\n      animation: '$editPulse linear infinite 3s'\n    },\n    '@keyframes editPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px #FFFFFF66\"\n      },\n      '60%': {\n        boxShadow: \"0 0 0 0px #FFFFFF66\"\n      },\n      '100%': {\n        boxShadow: \"0 0 0 10px transparent\"\n      }\n    },\n    grow: {\n      flexGrow: 1\n    },\n    photoWrapper: {\n      height: '100%'\n    },\n    inner: {\n      flex: '1 1',\n      position: 'relative'\n    },\n    tabMenu: {\n      marginTop: theme.spacing(7)\n    },\n    tipChip: {\n      position: 'absolute',\n      zIndex: 11,\n      bottom: 20,\n      left: '50%',\n      opacity: 0.6,\n      transform: 'translateX(-50%)'\n    },\n    mobileStepper: {\n      background: 'none'\n    },\n    dots: {\n      margin: '0 auto'\n    },\n    dot: {\n      border: '1px solid #FFFFFF77'\n    },\n    dotActive: {\n      background: theme.palette.secondary.main\n    },\n    activeButton: {\n      color: theme.palette.primary.main,\n      opacity: 1\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport SwipeableViews from 'react-swipeable-views';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Button from '@material-ui/core/Button';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport Chip from '@material-ui/core/Chip';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport InfoIcon from '@material-ui/icons/Info';\nimport EditIcon from '@material-ui/icons/Edit';\nimport LabelIcon from '@material-ui/icons/Label';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { PhotoInfo } from '@morphoto/photoseries';\nimport Photo from './Photo';\nimport PhotoZoom from './PhotoZoom';\nimport { AppContext } from '@morphoto/client-common';\nimport { dates, Tags as TagClass } from '@morphoto/common';\nimport Hammer from 'react-hammerjs';\nimport style from './PhotoViewTool.style';\nimport log from 'loglevel';\nvar useStyles = makeStyles(style);\nvar MODES = {\n  SWIPING: 'SWIPING',\n  ZOOMING: 'ZOOMING',\n  SHOW_INFO: 'SHOW_INFO',\n  EDIT_TAGS: 'EDIT_TAGS'\n};\n\nvar PhotoViewTool = function PhotoViewTool(_ref) {\n  var photoId = _ref.photoId,\n      photos = _ref.photos,\n      seriesAccess = _ref.seriesAccess,\n      onMenuBack = _ref.onMenuBack,\n      onUpdatePhoto = _ref.onUpdatePhoto,\n      canUpdatePhotoArr = _ref.canUpdatePhotoArr;\n  var classes = useStyles({\n    seriesAccess: seriesAccess\n  });\n  var theme = useTheme();\n\n  var _useState = useState(photoId ? photos.findIndex(function (p) {\n    return p.id === photoId;\n  }) : 0),\n      _useState2 = _slicedToArray(_useState, 2),\n      activePhotoInd = _useState2[0],\n      setActivePhotoInd = _useState2[1];\n\n  var photo = photos[activePhotoInd];\n\n  var _useState3 = useState(photo && photo.tags ? photo.tags : []),\n      _useState4 = _slicedToArray(_useState3, 2),\n      tagDelta = _useState4[0],\n      setTagDelta = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showTags = _useState6[0],\n      setShowTags = _useState6[1];\n\n  var _useState7 = useState(MODES.SWIPING),\n      _useState8 = _slicedToArray(_useState7, 2),\n      mode = _useState8[0],\n      setMode = _useState8[1];\n\n  var _useContext = useContext(AppContext),\n      tagConfigArr = _useContext.tagConfigArr;\n\n  if (!photo) return null;\n  var tagsClass = new TagClass(tagConfigArr, tagDelta || photo.tags || []);\n  var canUpdatePhoto = canUpdatePhotoArr[activePhotoInd];\n\n  var onXYTagCommit = function onXYTagCommit() {\n    setShowTags(true);\n    onUpdatePhoto(photo, {\n      id: photo.id,\n      tags: tagDelta\n    });\n    setMode(MODES.SWIPING);\n  };\n\n  var onCancelTagEdit = function onCancelTagEdit() {\n    setShowTags(true);\n    setTagDelta(photo && photo.tags ? photo.tags : []);\n    setMode(MODES.SWIPING);\n  };\n\n  log.info('PhotoViewTool', mode, {\n    photo: photo,\n    tagDelta: tagDelta,\n    showTags: showTags,\n    canUpdatePhotoArr: canUpdatePhotoArr\n  });\n  var menuText = \"Photo View (\".concat(activePhotoInd + 1, \"/\").concat(photos.length, \")\");\n  if (mode === MODES.EDIT_TAGS) menuText = \"Edit Tags (\".concat(activePhotoInd + 1, \"/\").concat(photos.length, \")\");\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.appBar, mode !== MODES.EDIT_TAGS ? classes.appBarEdit : null)\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"Menu\",\n    onClick: function onClick() {\n      return onMenuBack();\n    }\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(\"div\", {\n    className: classNames(classes.grow)\n  }, React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, menuText), React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.takenOn, 'lll'))), mode === MODES.EDIT_TAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCancelTagEdit\n  }, \"Cancel\"), mode === MODES.EDIT_TAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onXYTagCommit\n  }, \"Save\"), canUpdatePhoto && showTags && mode !== MODES.EDIT_TAGS && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.pulseIcon,\n    onClick: function onClick() {\n      return setMode(MODES.EDIT_TAGS);\n    }\n  }, React.createElement(EditIcon, null)), mode !== MODES.EDIT_TAGS && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(classes.tagButton, showTags ? classes.activeButton : null, !showTags ? classes.pulseIcon : null),\n    onClick: function onClick() {\n      return setShowTags(!showTags);\n    }\n  }, React.createElement(Badge, {\n    className: classes.margin,\n    badgeContent: tagsClass.getXYTags().length,\n    color: \"primary\"\n  }, React.createElement(LabelIcon, {\n    color: \"inherit\"\n  }))), mode !== MODES.EDIT_TAGS && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(classes.infoButton, mode === MODES.SHOW_INFO && classes.activeButton),\n    onClick: function onClick() {\n      return setMode(mode === MODES.SHOWINFO ? MODES.SWIPING : MODES.SHOW_INFO);\n    }\n  }, React.createElement(InfoIcon, null)))), mode === MODES.SWIPING && React.createElement(Hammer, {\n    onDoubleTap: function onDoubleTap() {\n      if (mode === MODES.SWIPING) setMode(MODES.ZOOMING);\n    },\n    onPinch: function onPinch(data) {\n      if (data.scale > 1.01 && mode === MODES.SWIPING) setMode(MODES.ZOOMING);\n    },\n    options: {\n      recognizers: {\n        pinch: {\n          enable: true\n        }\n      }\n    }\n  }, React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(SwipeableViews, {\n    axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n    index: activePhotoInd,\n    containerStyle: {\n      height: '100%'\n    },\n    style: {\n      height: '100%'\n    },\n    onChangeIndex: function onChangeIndex(val) {\n      return setActivePhotoInd(val);\n    },\n    enableMouseEvents: true\n  }, photos.map(function (photoidx, idx) {\n    return idx === activePhotoInd ? React.createElement(\"div\", {\n      key: \"swipeshowpic-\".concat(idx),\n      className: classes.photoWrapper\n    }, React.createElement(Photo, {\n      showTags: showTags && idx === activePhotoInd,\n      photo: photoidx\n    })) : React.createElement(\"div\", {\n      key: \"swipeshowpic-\".concat(idx),\n      className: classes.photoWrapper\n    }, React.createElement(Photo, {\n      photo: photoidx\n    }));\n  })), mode === MODES.SWIPING && React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"bottom\",\n    activeStep: activePhotoInd,\n    classes: {\n      root: classes.mobileStepper,\n      dots: classes.dots,\n      dot: classes.dot,\n      dotActive: classes.dotActive\n    }\n  }))), mode === MODES.ZOOMING && React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(PhotoZoom, {\n    showTags: showTags,\n    photo: photo,\n    onClose: function onClose() {\n      return setMode(MODES.SWIPING);\n    }\n  })), mode === MODES.EDIT_TAGS && React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(Photo, {\n    photo: _objectSpread({}, photo, {\n      tags: tagDelta\n    }),\n    showTags: true,\n    editXYTags: true,\n    onXYTagChange: function onXYTagChange(tagD) {\n      return setTagDelta(tagD);\n    }\n  })), mode === MODES.SHOW_INFO && React.createElement(PhotoInfo, {\n    open: true,\n    photo: photo,\n    canEdit: canUpdatePhoto,\n    seriesAccess: seriesAccess,\n    onOk: function onOk(newDelta) {\n      onUpdatePhoto(photo, _objectSpread({\n        id: photo.id\n      }, newDelta));\n      setMode(MODES.SWIPING);\n    },\n    onCancel: function onCancel() {\n      return setMode(MODES.SWIPING);\n    }\n  }), mode === MODES.EDIT_TAGS && React.createElement(Chip, {\n    label: \"Tap to tag features...\",\n    onClick: function onClick() {},\n    className: classes.tipChip\n  }));\n};\n\nPhotoViewTool.propTypes = {\n  photoId: PropTypes.string.isRequired,\n  photos: PropTypes.array.isRequired,\n  seriesAccess: PropTypes.string,\n  onMenuBack: PropTypes.func.isRequired,\n  onUpdatePhoto: PropTypes.func.isRequired,\n  canUpdatePhotoArr: PropTypes.arrayOf(PropTypes.bool)\n};\nexport default PhotoViewTool;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Chip from '@material-ui/core/Chip';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Photo from './Photo';\nimport { dates } from '@morphoto/common';\nimport style from './PhotoViewTool.style';\nvar useStyles = makeStyles(style);\n\nvar NewPhotoViewTool = function NewPhotoViewTool(_ref) {\n  var photoId = _ref.photoId,\n      photos = _ref.photos,\n      seriesAccess = _ref.seriesAccess,\n      onMenuBack = _ref.onMenuBack,\n      onUpdatePhoto = _ref.onUpdatePhoto,\n      canUpdatePhotoArr = _ref.canUpdatePhotoArr;\n  var classes = useStyles({\n    seriesAccess: seriesAccess\n  });\n  var photo = photos[photoId ? photos.findIndex(function (p) {\n    return p.id === photoId;\n  }) : 0];\n\n  var _useState = useState(photo && photo.tags ? photo.tags : []),\n      _useState2 = _slicedToArray(_useState, 2),\n      tagDelta = _useState2[0],\n      setTagDelta = _useState2[1];\n\n  if (!photo) return null;\n\n  var onCommitTagsFirst = function onCommitTagsFirst() {\n    onUpdatePhoto(photo, {\n      id: photo.id,\n      tags: tagDelta\n    });\n    onMenuBack();\n  };\n\n  var menuText = \"Add tags to your photo\";\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.appBar, classes.appBarEdit)\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(\"div\", {\n    className: classNames(classes.grow, classes.menuTextPadded)\n  }, React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, menuText), React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.takenOn, 'lll'))), React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCommitTagsFirst\n  }, \"Next\"))), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(Photo, {\n    photo: _objectSpread({}, photo, {\n      tags: tagDelta\n    }),\n    showTags: true,\n    editXYTags: true,\n    onXYTagChange: function onXYTagChange(tagD) {\n      return setTagDelta(tagD);\n    }\n  })), React.createElement(Chip, {\n    label: \"Tap to tag features...\",\n    onClick: function onClick() {},\n    className: classes.tipChip\n  }));\n};\n\nNewPhotoViewTool.propTypes = {\n  photoId: PropTypes.string.isRequired,\n  photos: PropTypes.array.isRequired,\n  seriesAccess: PropTypes.string,\n  onMenuBack: PropTypes.func.isRequired,\n  onUpdatePhoto: PropTypes.func.isRequired,\n  canUpdatePhotoArr: PropTypes.arrayOf(PropTypes.bool)\n};\nexport default NewPhotoViewTool;","export { default as RawImage } from './RawImage';\nexport { default as Photo } from './Photo';\nexport { default as BrokenImg } from './BrokenImg';\nexport { default as PhotoGrid } from './PhotoGrid';\nexport { default as PhotoFadeSlider } from './PhotoFadeSlider';\nexport { default as PhotoReviewTool } from './PhotoReviewTool';\nexport { default as PhotoViewTool } from './PhotoViewTool';\nexport { default as NewPhotoViewTool } from './NewPhotoViewTool';","import React from 'react';\nimport PropTypes from 'prop-types';\nvar style = {\n  background: 'black',\n  height: '100%',\n  position: 'relative'\n};\n\nvar CosmosBlackBackground = function CosmosBlackBackground(_ref) {\n  var children = _ref.children;\n  return React.createElement(\"div\", {\n    style: style\n  }, children);\n};\n\nCosmosBlackBackground.propTypes = {\n  children: PropTypes.any.isRequired\n};\nexport default CosmosBlackBackground;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useMemo, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { makeStyles } from '@material-ui/core/styles';\nimport themes, { globalStyle } from '@morphoto/themes';\nimport { AppContextProvider, isIos } from '@morphoto/client-common';\nimport { FakeData } from '@morphoto/mock';\nimport { fakeGlobalActions } from './utils';\nimport whyDidYouRender from '@welldone-software/why-did-you-render';\nimport log from 'loglevel';\nlog.enableAll();\nwhyDidYouRender(React);\n\nvar style = function style(theme) {\n  return {\n    '@global': _objectSpread({}, globalStyle['@global'], {\n      'html, body, #root': {\n        minHeight: '10px',\n        minWidth: '10px',\n        height: '100%'\n      }\n    }),\n    boundBox: {\n      border: '5px dashed #777777',\n      margin: 20\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MaterialUIWrap = function MaterialUIWrap(_ref) {\n  var children = _ref.children,\n      context = _ref.context,\n      theme = _ref.theme,\n      outerTheme = _ref.outerTheme,\n      iOS = _ref.iOS,\n      noTheme = _ref.noTheme,\n      boundBoxStyle = _ref.boundBoxStyle;\n  var classes = useStyles();\n  var innerTheme = useMemo(function () {\n    return theme || themes.home;\n  }, [theme]);\n  var contextValue = useMemo(function () {\n    return _objectSpread({}, FakeData.fakeAppContext(), {\n      globalActions: fakeGlobalActions,\n      signedIn: true\n    }, context);\n  }, [context]);\n\n  if (noTheme) {\n    return React.createElement(AppContextProvider, {\n      value: contextValue\n    }, children);\n  }\n\n  useLayoutEffect(function () {\n    var viewport = document.querySelector('meta[name=viewport]');\n    viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no');\n  }, []);\n  useLayoutEffect(function () {\n    if (isIos()) {\n      log.info('Disabling Pinch on ios');\n\n      var touchMove = function touchMove(e) {\n        if (Math.abs(e.scale - 1) > 0.02) {\n          log.info('touchMove', e.scale);\n          e.preventDefault();\n        }\n      };\n\n      document.addEventListener('touchmove', touchMove, false);\n      return function () {\n        document.removeEventListener('touchmove', touchMove, false);\n      };\n    }\n  }, [contextValue.device]);\n  var newChildren = boundBoxStyle ? React.createElement(\"div\", {\n    className: classes.boundBox,\n    style: boundBoxStyle\n  }, children) : children;\n  return React.createElement(AppContextProvider, {\n    value: contextValue\n  }, React.createElement(ThemeProvider, {\n    theme: outerTheme || innerTheme\n  }, React.createElement(CssBaseline, null), React.createElement(ThemeProvider, {\n    theme: innerTheme\n  }, newChildren)));\n};\n\nMaterialUIWrap.propTypes = {\n  children: PropTypes.any.isRequired,\n  noTheme: PropTypes.bool,\n  boundBoxStyle: PropTypes.object,\n  theme: PropTypes.object,\n  iOS: PropTypes.bool,\n  outerTheme: PropTypes.object,\n  context: PropTypes.object\n};\nexport default MaterialUIWrap;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.randomLocation = exports.fakePastDate = void 0;\n\nvar _random = require(\"./random\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _turf = require(\"@turf/turf\");\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _faker = _interopRequireDefault(require(\"faker\"));\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _random2 = require(\"../dist/random\");\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar tagColors = ['#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B', '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'];\nvar EVENT_RELATIONS = ['OWNED', 'CONTRIBUTED', 'WATCHING'];\n\nvar fakePastDate = function fakePastDate() {\n  return _moment[\"default\"].utc(_faker[\"default\"].date.past()).format('x');\n};\n\nexports.fakePastDate = fakePastDate;\n\nvar randomLocation = function randomLocation(latLngsAarr) {\n  var coords = null;\n\n  if (latLngsAarr && latLngsAarr.length > 0) {\n    coords = (0, _random.randomArrayEl)(latLngsAarr);\n  } else {\n    coords = [_lodash[\"default\"].random(-180, 179, true), _lodash[\"default\"].random(-85, 85, true)];\n  }\n\n  var newPoint = (0, _turf.transformTranslate)((0, _turf.point)(coords), _lodash[\"default\"].random(0, 2, true), _lodash[\"default\"].random(0, 360, true), {\n    units: 'kilometers'\n  });\n  return newPoint.geometry.coordinates;\n};\n\nexports.randomLocation = randomLocation;\n\nvar FakeData = function FakeData(userPool, metaConfig, tagConfigArr) {\n  var _this = this;\n\n  _classCallCheck(this, FakeData);\n\n  _defineProperty(this, \"basicObj\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var createdUser = FakeData.userSummary(attribs.createdUser || (0, _random.randomArrayEl)(_this.userPool));\n    var updatedUser = FakeData.userSummary(attribs.updatedUser || createdUser);\n    return {\n      id: attribs.id || (0, _v[\"default\"])(),\n      createdBy: createdUser.id,\n      updatedBy: updatedUser.id,\n      createdUser: createdUser,\n      updatedUser: updatedUser,\n      createdOn: attribs.createdOn || fakePastDate(),\n      updatedOn: attribs.updatedOn || fakePastDate()\n    };\n  });\n\n  _defineProperty(this, \"getUser\", function (id) {\n    return _this.userPool.find(function (user) {\n      return user.id === id;\n    });\n  });\n\n  _defineProperty(this, \"series\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var basicAttribs = _this.basicObj(attribs);\n\n    var fakeWidth = 800 + _lodash[\"default\"].random(-3, 3);\n\n    var fakeHeight = 600 + _lodash[\"default\"].random(-3, 3);\n\n    var photoPlaceholderArr = attribs.numPhotos ? (0, _random2.filledArray)(attribs.numPhotos) : (0, _random.randomMap)(1, 10, function (val, idx) {\n      return idx;\n    });\n\n    var whichHighlight = _lodash[\"default\"].random(0, photoPlaceholderArr.length - 1);\n\n    var access = attribs.access || (0, _random.randomArrayEl)(['PRIVATE', 'OPEN', 'PUBLIC']);\n    var photos = attribs.photos || photoPlaceholderArr.map(function (val, idx) {\n      return _this.photo({\n        width: fakeWidth,\n        height: fakeHeight,\n        createdUser: access === 'OPEN' ? null : basicAttribs.createdUser,\n        updatedUser: access === 'OPEN' ? null : basicAttribs.updatedUser,\n        featured: idx === whichHighlight,\n        hasPaths: attribs.hasPaths !== false\n      });\n    });\n    photos.forEach(function (ph) {\n      ph.seriesId = basicAttribs.id;\n      ph.seriesCreatedBy = basicAttribs.createdBy;\n    });\n    var featured = attribs.featured;\n\n    if (!featured && photos && photos.length > 0) {\n      featured = !photos ? null : FakeData.photoSummary((0, _random.randomArrayEl)(photos));\n    }\n\n    var latest = attribs.featured;\n\n    if (!latest && photos && photos.length > 0) {\n      latest = !photos ? null : FakeData.photoSummary((0, _random.randomArrayEl)(photos));\n    }\n\n    return _objectSpread({}, basicAttribs, {\n      featured: featured,\n      latest: latest,\n      name: attribs.name || _faker[\"default\"].name.title(),\n      objType: 'SERIES',\n      access: access,\n      meta: JSON.stringify(attribs.meta || {\n        project: '926ff265-e22b-400d-ae00-a817d69d5042',\n        reach: '4f310e81-e1f8-45e7-9341-859e7f4e2208'\n      }),\n      watchers: 0,\n      note: attribs.nite || _faker[\"default\"].lorem.paragraphs(_lodash[\"default\"].random(3, 4)).replace('\\n', '\\n\\n'),\n      coords: attribs.coords || [-120.333379, 44.629701],\n      direction: attribs.direction || (0, _random.randomChance)(1, 2) ? _lodash[\"default\"].random(0, 359) : null,\n      photos: photos,\n      photoCount: photos.length\n    });\n  });\n\n  _defineProperty(this, \"event\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref = attribs.series || _this.series(),\n        photos = _ref.photos,\n        series = _objectWithoutProperties(_ref, [\"photos\"]);\n\n    var photo = (0, _random.randomArrayEl)(photos);\n    return {\n      series: FakeData.seriesSummary(series),\n      photo: FakeData.photoSummary(photo),\n      relation: (0, _random.randomArrayEl)(EVENT_RELATIONS)\n    };\n  });\n\n  _defineProperty(this, \"photo\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var basic = _this.basicObj(attribs);\n\n    var widthHeight = [attribs.width || 800, attribs.height || 600];\n\n    var templateObj = _objectSpread({}, basic, {\n      takenOn: basic.createdOn,\n      objType: 'PHOTO',\n      base64: null,\n      seriesId: attribs.seriesId || null,\n      seriesCreatedBy: attribs.seriesCreatedBy || null,\n      coords: attribs.coords || [-120.333379, 44.629701],\n      rawData: attribs.rawData || {\n        a: 1,\n        b: 2\n      },\n      note: attribs.note || _faker[\"default\"].lorem.paragraphs(_lodash[\"default\"].random(1, 4)),\n      meta: JSON.stringify(attribs.meta || {\n        user: '926ff265-e22b-400d-ae00-a817d69d5042'\n      }),\n      tags: attribs.tags || _this.tags({\n        width: widthHeight[0],\n        height: widthHeight[1]\n      })\n    });\n\n    if (attribs.hasPaths) templateObj.paths = _this.getImagePaths.apply(_this, widthHeight);\n    return templateObj;\n  });\n\n  _defineProperty(this, \"getImagePaths\", function () {\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 800;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 600;\n    var strict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    function getPath(w, h) {\n      var newHeight = strict ? h : _lodash[\"default\"].random(-3, 3) + h;\n      var newWidth = strict ? w : _lodash[\"default\"].random(-3, 3) + w;\n      return \"\".concat(newWidth, \"/\").concat(newHeight, \"/nature\");\n    }\n\n    if (width && height) {\n      return {\n        base: \"https://placeimg.com/\",\n        thumb: getPath(Math.round(width * 1 / 3), Math.round(height * 1 / 3)),\n        medium: getPath(Math.round(width * 2 / 3), Math.round(height * 2 / 3)),\n        large: getPath(width, height),\n        orig: getPath(width * 2, height * 2)\n      };\n    }\n\n    return {\n      base: \"https://placeimg.com/\",\n      thumb: getPath(200, 150),\n      medium: getPath(400, 300),\n      large: getPath(1024, 768),\n      orig: getPath(4000, 3000)\n    };\n  });\n\n  _defineProperty(this, \"tags\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return _this.appContext.tagConfigArr.reduce(function (acc, tagType) {\n      return [].concat(_toConsumableArray(acc), _toConsumableArray(_this._getTag(tagType, attribs)));\n    }, []);\n  });\n\n  _defineProperty(this, \"_getTag\", function (tagType, attribs) {\n    var pool = _lodash[\"default\"].shuffle(_toConsumableArray(tagType._values));\n\n    return (0, _random.randomMap)(1, pool.length, function (num, idt) {\n      var hasCoords = FakeData.tagIncludesCoords(tagType);\n      return FakeData.tag({\n        label: pool[idt].label,\n        id: pool[idt].id,\n        typeId: tagType.id,\n        width: hasCoords ? attribs.width : null,\n        height: hasCoords ? attribs.height : null\n      });\n    });\n  });\n\n  this.userPool = userPool || (0, _random.randomMap)(1, 10, function () {\n    return FakeData.user();\n  });\n  this.appContext = FakeData.fakeAppContext(metaConfig, tagConfigArr, this.userPool);\n};\n\n_defineProperty(FakeData, \"fakeAppContext\", function (metaConfig, tagConfigArr, userPool) {\n  var sampleUser = (0, _random.randomArrayEl)(userPool);\n  return {\n    metaConfig: metaConfig || {\n      user: {\n        objType: 'PHOTO',\n        label: 'User',\n        \"default\": sampleUser,\n        render: function render(key) {\n          return \"User 1: \".concat(sampleUser ? sampleUser.username : 'User 1');\n        }\n      }\n    },\n    currentUser: sampleUser,\n    getPhotoUrls: FakeData.getPhotoUrls,\n    onAvatarClick: function onAvatarClick(username) {\n      return _loglevel[\"default\"].info('onAvatarClick', username);\n    },\n    tagConfigArr: tagConfigArr || [FakeData.freeBothTags, FakeData.structureTags, FakeData.treeTags, FakeData.emotionTags, FakeData.seasonTags]\n  };\n});\n\n_defineProperty(FakeData, \"getPhotoUrls\", function () {\n  var _ref2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(photo, sizePriority) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n\n            if (!photo.dataUrl) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", photo.dataUrl);\n\n          case 5:\n            if (!(!photo.paths || photo.paths.length === 0)) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.reject(new Error('No Photos Found')));\n\n          case 7:\n            _loglevel[\"default\"].info('FAKEDATA: resolving image');\n\n            return _context.abrupt(\"return\", sizePriority.map(function (sp) {\n              return \"\".concat(photo.paths.base).concat(photo.paths[sp]);\n            }));\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\n_defineProperty(FakeData, \"photoSummary\", function (_ref3) {\n  var id = _ref3.id,\n      createdUser = _ref3.createdUser,\n      takenOn = _ref3.takenOn,\n      updatedOn = _ref3.updatedOn,\n      createdOn = _ref3.createdOn,\n      psid = _ref3.seriesId,\n      seriesCreatedBy = _ref3.seriesCreatedBy,\n      paths = _ref3.paths;\n  var templateObj = {\n    id: id,\n    createdUser: createdUser,\n    takenOn: takenOn,\n    updatedOn: updatedOn,\n    createdOn: createdOn,\n    seriesId: psid,\n    seriesCreatedBy: seriesCreatedBy,\n    paths: paths\n  };\n  return templateObj;\n});\n\n_defineProperty(FakeData, \"seriesSummary\", function (_ref4) {\n  var id = _ref4.id,\n      name = _ref4.name,\n      createdUser = _ref4.createdUser,\n      access = _ref4.access,\n      updatedOn = _ref4.updatedOn,\n      createdOn = _ref4.createdOn,\n      coords = _ref4.coords,\n      watchers = _ref4.watchers,\n      featured = _ref4.featured,\n      latest = _ref4.latest,\n      photoCount = _ref4.photoCount,\n      seriesStatus = _ref4.seriesStatus,\n      direction = _ref4.direction;\n  var templateObj = {\n    id: id,\n    name: name,\n    createdUser: createdUser,\n    access: access,\n    updatedOn: updatedOn,\n    createdOn: createdOn,\n    coords: coords,\n    watchers: watchers,\n    featured: featured,\n    latest: latest,\n    photoCount: photoCount,\n    seriesStatus: seriesStatus,\n    direction: direction\n  };\n  return templateObj;\n});\n\n_defineProperty(FakeData, \"userSummary\", function (_ref5) {\n  var id = _ref5.id,\n      gravatar = _ref5.gravatar,\n      gravatarProfile = _ref5.gravatarProfile,\n      username = _ref5.username;\n  return {\n    id: id,\n    gravatar: gravatar,\n    gravatarProfile: gravatarProfile,\n    username: username\n  };\n});\n\n_defineProperty(FakeData, \"tag\", function () {\n  var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    label: attribs.label,\n    typeId: attribs.typeId,\n    coords: attribs.width && attribs.height ? {\n      x: _lodash[\"default\"].random(20, attribs.width - 20),\n      y: _lodash[\"default\"].random(20, attribs.height - 20)\n    } : null\n  };\n});\n\n_defineProperty(FakeData, \"tagIncludesCoords\", function (tt) {\n  if (tt.allowNonXY && tt.allowXY) {\n    if (Math.random() >= 0.5) return true;else return false;\n  } else if (!tt.allowNonXY && !tt.allowXY) {\n    throw new Error('NOT ALLOWED allowNonX===false && allowXY === false');\n  } else if (tt.allowNonXY && !tt.allowXY) return false;else if (!tt.allowNonXY && tt.allowXY) return true;else return false;\n});\n\n_defineProperty(FakeData, \"user\", function () {\n  var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    id: (0, _v[\"default\"])(),\n    objType: 'USER',\n    createdOn: attribs.createdOn || fakePastDate(),\n    updatedOn: attribs.updatedOn || fakePastDate(),\n    username: attribs.username || \"\".concat(_faker[\"default\"].name.firstName(), \" \").concat(_faker[\"default\"].name.lastName()),\n    gravatar: attribs.avatarSrc || \"https://placeimg.com/\".concat(_lodash[\"default\"].random(80, 100), \"/\").concat(_lodash[\"default\"].random(80, 100), \"/people\"),\n    gravatarProfile: 'https://s.gravatar.com/b65e93508e1b7eae0af790ec9c65093b.json',\n    watching: [],\n    meta: JSON.stringify(attribs.meta || {})\n  };\n});\n\n_defineProperty(FakeData, \"_getSampleTags\", function (tagConfigArr) {\n  Promise.resolve(FakeData._freeBothTagsValues);\n});\n\n_defineProperty(FakeData, \"_freeBothTagsValues\", ['Groovy', 'Elbow', 'Boat', 'Anchovy', 'Garden', 'Sunday', 'Green#$@324', 'Beaver Stuff', '234Little Things', 'Spaceship', 'SAG', '(  Am I Right?    )', '{{{{\"\\'STEREO\\'\"}}}}}', 'mytag', 'XYTAGS', 'Generation', 'Frogs', 'randomTag', 'Januarry 2005', '2018'].map(function (label, idx) {\n  return {\n    label: label,\n    id: (0, _v[\"default\"])(),\n    count: idx * 31 + _lodash[\"default\"].random(1, 20)\n  };\n}));\n\n_defineProperty(FakeData, \"freeBothTags\", {\n  id: 'freeBothType',\n  label: 'Anything Goes Tag',\n  color: tagColors[8],\n  allowXY: true,\n  allowNonXY: true,\n  allowAdditions: true,\n  _values: FakeData._freeBothTagsValues,\n  getValuePromiseArr: [function () {\n    return Promise.resolve(FakeData._freeBothTagsValues);\n  }]\n});\n\n_defineProperty(FakeData, \"treeTagValues\", ['Elm', 'Birch', 'Palm', 'Cottonwood', 'Oak'].map(function (label, idx) {\n  return {\n    label: label,\n    id: (0, _v[\"default\"])()\n  };\n}));\n\n_defineProperty(FakeData, \"treeTags\", {\n  id: 'treetypes',\n  label: 'Tree Types',\n  color: tagColors[1],\n  allowXY: true,\n  allowNonXY: false,\n  allowAdditions: true,\n  _values: FakeData.treeTagValues,\n  getValuePromiseArr: [function () {\n    return Promise.resolve(FakeData.treeTagValues);\n  }]\n});\n\n_defineProperty(FakeData, \"structureTagValues\", (0, _random.randomMap)(10, 15, function (val, idx) {\n  return {\n    label: \"Structure-\".concat(idx)\n  };\n}));\n\n_defineProperty(FakeData, \"structureTags\", {\n  id: 'structures',\n  label: 'Structures',\n  color: tagColors[2],\n  allowXY: true,\n  allowNonXY: false,\n  allowAdditions: false,\n  _values: FakeData.structureTagValues,\n  getValuePromiseArr: [function () {\n    return Promise.resolve(FakeData.structureTagValues);\n  }]\n});\n\n_defineProperty(FakeData, \"emotionTagValues\", ['Indignation', 'Anger', 'Confusion', 'Ambivalence', 'Cautious'].map(function (label, idx) {\n  return {\n    label: label\n  };\n}));\n\n_defineProperty(FakeData, \"emotionTags\", {\n  id: 'emotions',\n  label: 'Emotions',\n  color: tagColors[3],\n  allowXY: false,\n  allowNonXY: true,\n  allowAdditions: true,\n  _values: FakeData.emotionTagValues,\n  getValuePromiseArr: [function () {\n    return Promise.resolve(FakeData.emotionTagValues);\n  }]\n});\n\n_defineProperty(FakeData, \"seasonTagValues\", ['Winter', 'Spring', 'Summer', 'Fall'].map(function (label, idx) {\n  return {\n    label: label\n  };\n}));\n\n_defineProperty(FakeData, \"seasonTags\", {\n  id: 'season',\n  label: 'Season',\n  color: tagColors[5],\n  allowXY: false,\n  allowNonXY: true,\n  allowAdditions: false,\n  _values: FakeData.seasonTagValues,\n  getValuePromiseArr: [function () {\n    return Promise.resolve(FakeData.seasonTagValues);\n  }]\n});\n\nvar _default = FakeData;\nexports[\"default\"] = _default;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {};\n};\n\nvar useStyles = makeStyles(style);\n\nvar DeleteDialog = function DeleteDialog(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onConfirm = _ref.onConfirm,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    disableBackdropClick: true,\n    open: open,\n    disableEscapeKeyDown: true,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\"\n  }, title), React.createElement(DialogContent, null, React.createElement(Typography, null, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(false);\n    },\n    color: \"primary\"\n  }, \"No\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(true);\n    },\n    color: \"primary\"\n  }, \"Yes\")));\n};\n\nDeleteDialog.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n};\nexport default DeleteDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {};\n};\n\nvar useStyles = makeStyles(style);\n\nvar CancelConfirm = function CancelConfirm(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onConfirm = _ref.onConfirm,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    disableBackdropClick: true,\n    fullWidth: true,\n    open: open,\n    disableEscapeKeyDown: true,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\"\n  }, title), React.createElement(DialogContent, null, React.createElement(Typography, null, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(false);\n    },\n    color: \"primary\"\n  }, \"No\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(true);\n    },\n    color: \"secondary\"\n  }, \"Yes\")));\n};\n\nCancelConfirm.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n};\nexport default CancelConfirm;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Apple as AppleIcon } from '@morphoto/icons';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    icon: {\n      height: 50,\n      width: '100%',\n      margin: '0 auto',\n      color: theme.palette.error.main\n    },\n    title: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar FeatureDisabled = function FeatureDisabled(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onClose = _ref.onClose,\n      open = _ref.open,\n      icon = _ref.icon;\n  var classes = useStyles();\n  var IconComp = icon || AppleIcon;\n  return React.createElement(Dialog, {\n    className: classes.root,\n    fullWidth: true,\n    open: open,\n    PaperProps: {\n      style: {\n        maxWidth: 'none'\n      }\n    },\n    onClose: onClose,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\",\n    className: classes.title\n  }, title), React.createElement(DialogContent, null, React.createElement(IconComp, {\n    className: classes.icon\n  }), React.createElement(Typography, {\n    component: \"div\"\n  }, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onClose,\n    color: \"primary\"\n  }, \"Ok\")));\n};\n\nFeatureDisabled.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  icon: PropTypes.any,\n  message: PropTypes.any,\n  onClose: PropTypes.func.isRequired\n};\nexport default FeatureDisabled;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    body: {\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar BigText = function BigText(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      title = _ref.title,\n      body = _ref.body;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    onClose: onClose,\n    \"aria-labelledby\": \"simple-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    color: \"inherit\"\n  }))), React.createElement(DialogContent, null, React.createElement(Typography, {\n    variant: \"body2\",\n    className: classes.body\n  }, body)));\n};\n\nBigText.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  title: PropTypes.string,\n  body: PropTypes.string\n};\nexport default BigText;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    body: {},\n    textArea: {\n      whiteSpace: 'pre-line',\n      padding: theme.spacing(1),\n      border: \"1px solid \".concat(theme.palette.grey[200]),\n      background: theme.palette.grey[100]\n    },\n    dlgContent: {\n      overflow: 'hidden'\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar BigTextEdit = function BigTextEdit(_ref) {\n  var open = _ref.open,\n      onOk = _ref.onOk,\n      title = _ref.title,\n      body = _ref.body,\n      multiline = _ref.multiline;\n  var classes = useStyles();\n\n  var _useState = useState(body || ''),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    onClose: function onClose() {\n      return onOk(value);\n    }\n  }, React.createElement(DialogTitle, {\n    className: classes.title\n  }, title), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(TextField, {\n    className: classes.body,\n    multiline: multiline,\n    inputProps: {\n      className: classes.textArea\n    },\n    autoFocus: true,\n    fullWidth: true,\n    rows: 6,\n    rowsMax: 6,\n    onChange: function onChange(e) {\n      return setValue(e.target.value);\n    },\n    defaultValue: body\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(body);\n    }\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(value);\n    }\n  }, \"Ok\")));\n};\n\nBigTextEdit.propTypes = {\n  open: PropTypes.bool,\n  multiline: PropTypes.bool,\n  onOk: PropTypes.func,\n  title: PropTypes.string,\n  body: PropTypes.string\n};\nexport default BigTextEdit;","export { default as DeleteDialog } from './DeleteDialog';\nexport { default as CancelConfirm } from './CancelConfirm';\nexport { default as FeatureDisabled } from './FeatureDisabled';\nexport { default as BigText } from './BigText';\nexport { default as BigTextEdit } from './BigTextEdit';","export default require('./Slideshow').default;","export default require('./SwipeShow').default;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    imgContainer: {},\n    gravatarImg: {\n      objectFit: 'cover',\n      height: '100%',\n      width: '100%'\n    }\n  };\n});\n\nvar UserListItem = function UserListItem(_ref) {\n  var user = _ref.user,\n      loading = _ref.loading,\n      onAvatarClick = _ref.onAvatarClick,\n      secondary = _ref.secondary,\n      props = _objectWithoutProperties(_ref, [\"user\", \"loading\", \"onAvatarClick\", \"secondary\"]);\n\n  var classes = useStyles();\n  if (loading || !user) return 'LOADING...';\n  return React.createElement(ListItem, _extends({\n    className: classes.root,\n    button: !!onAvatarClick,\n    onClick: onAvatarClick\n  }, props), React.createElement(ListItemAvatar, {\n    className: classes.imgContainer\n  }, React.createElement(Avatar, null, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: user.gravatar\n  }))), React.createElement(ListItemText, {\n    primary: user.username,\n    secondary: secondary\n  }));\n};\n\nUserListItem.propTypes = {\n  user: PropTypes.object,\n  loading: PropTypes.bool,\n  secondary: PropTypes.string,\n  onAvatarClick: PropTypes.func\n};\nexport default UserListItem;","import React from 'react';\nexport var SeriesContext = React.createContext({});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport Paper from '@material-ui/core/Paper';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport themes from '@morphoto/themes';\nimport { TagChip } from '@morphoto/tags';\nimport { ShortLongText } from '@morphoto/ui';\nimport { BigText } from '@morphoto/modals';\nimport { dates, Tags as TagClass } from '@morphoto/common';\nimport { AppContext, config } from '@morphoto/client-common';\nimport log from 'loglevel';\nimport UserListItem from '../UserListItem';\nimport { SeriesContext } from '../contexts';\nimport style from './SeriesInfo.style';\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEVIEW: 'NOTEVIEW'\n};\n\nvar SeriesInfo = function SeriesInfo() {\n  var classes = useStyles();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      watching = _useContext.watching;\n\n  var _useContext2 = useContext(AppContext),\n      tagConfigArr = _useContext2.tagConfigArr,\n      globalActions = _useContext2.globalActions;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var tagInst = new TagClass(tagConfigArr);\n  var newTags = series.photos.reduce(function (acc, _ref) {\n    var tags = _ref.tags;\n    tags.forEach(function (tag) {\n      if (!acc[tag.typeId]) {\n        acc[tag.typeId] = _defineProperty({}, tag.label, _objectSpread({}, tag, {\n          count: 1\n        }));\n      } else if (acc[tag.typeId][tag.label]) {\n        var existing = acc[tag.typeId][tag.label];\n        acc[tag.typeId][tag.label] = _objectSpread({}, existing, {\n          count: existing.count + 1\n        });\n      } else acc[tag.typeId][tag.label] = _objectSpread({}, tag, {\n        count: 1\n      });\n    });\n    return acc;\n  }, {});\n  var metaKeys = [];\n\n  try {\n    metaKeys = series.meta ? Object.keys(JSON.parse(series.meta)) : [];\n  } catch (e) {\n    log.error(e);\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.field\n  }, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Series Name\"), React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, series.name)), series.note && React.createElement(ShortLongText, {\n    label: \"Series Note\",\n    text: series.note,\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.NOTEVIEW);\n    }\n  }), React.createElement(Typography, {\n    className: classes.heading,\n    variant: \"subtitle1\"\n  }, \"Series Summary\"), React.createElement(Divider, null), React.createElement(AccessCard, {\n    seriesAccess: series.access\n  }), React.createElement(List, {\n    className: classes.list,\n    dense: true\n  }, series.createdUser && React.createElement(UserListItem, {\n    user: series.createdUser,\n    onAvatarClick: function onAvatarClick() {\n      return globalActions.onAvatarClick(series.createdUser.username);\n    },\n    secondary: \"created this series\",\n    disableGutters: true\n  }), React.createElement(ListItem, {\n    disableGutters: true\n  }, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.numPhotos\n  }, series.photos.length)), React.createElement(ListItemText, {\n    primary: series.photos.length > 1 ? 'Photos' : 'Photo',\n    secondary: series.photos.length > 0 && React.createElement(\"span\", null, dates.formatDate(series.photos[0].takenOn, 'LL'), React.createElement(\"span\", null, \"\\xA0\\xA0\"), \"to\", React.createElement(\"span\", null, \"\\xA0\\xA0\"), dates.formatDate(series.photos[series.photos.length - 1].takenOn, 'LL'))\n  })), React.createElement(ListItem, {\n    disableGutters: true\n  }, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.watchers\n  }, series.watchers || '0')), React.createElement(ListItemText, {\n    primary: \"Users Watching \".concat(watching ? '(including you)' : '')\n  })), React.createElement(ListItem, {\n    disableGutters: true\n  }, React.createElement(ListItemText, null, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Tags in use (across all photos)\"), Object.keys(newTags).length === 0 && React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"textSecondary\"\n  }, \"No photos in this series have tags\"), Object.keys(newTags).map(function (tagKey, idtk) {\n    return React.createElement(\"div\", {\n      key: \"tagchipkey\".concat(idtk),\n      className: classes.tagListItem\n    }, React.createElement(Typography, {\n      className: classes.subheading,\n      variant: \"overline\"\n    }, tagInst.getTagType(tagKey).label), React.createElement(Divider, null), Object.values(newTags[tagKey]).length > 0 ? Object.values(newTags[tagKey]).map(function (tag, idx) {\n      return React.createElement(TagChip, {\n        key: \"tagchip-\".concat(idtk, \"-\").concat(tag, \"-\").concat(idx),\n        tag: tag,\n        color: tagInst.getTagType(tagKey).color\n      });\n    }) : React.createElement(Typography, {\n      variant: \"caption\"\n    }, \"No photos in this series have tags\"));\n  })))), series.meta && metaKeys.length > 0 && Object.keys(series.meta).length > 0 && React.createElement(React.Fragment, null, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Metadata\"), React.createElement(Divider, null), React.createElement(List, {\n    className: classes.list\n  }, metaKeys.map(function (key, idx) {\n    return series.meta[key] ? React.createElement(ListItem, {\n      key: \"metadata\".concat(idx)\n    }, React.createElement(ListItemText, {\n      primary: series.meta[key].label,\n      secondary: series.meta[key].render(series.meta[key])\n    })) : null;\n  }))), activeDialog === DIALOGS.NOTEVIEW && React.createElement(BigText, {\n    open: true,\n    multiline: true,\n    onClose: function onClose() {\n      return setActiveDialog(null);\n    },\n    title: \"Series Note\",\n    body: series.note\n  }));\n};\n\nSeriesInfo.propTypes = {};\nexport default SeriesInfo;\n\nvar accessStyle = function accessStyle(theme) {\n  return {\n    root: {\n      padding: theme.spacing(1, 2),\n      background: function background(_ref2) {\n        var seriesAccess = _ref2.seriesAccess;\n        return themes.access[seriesAccess].palette.primary.main;\n      },\n      color: function color(_ref3) {\n        var seriesAccess = _ref3.seriesAccess;\n        return themes.access[seriesAccess].palette.primary.contrastText;\n      }\n    }\n  };\n};\n\nvar useStylesAccess = makeStyles(accessStyle);\n\nvar AccessCard = function AccessCard(_ref4) {\n  var seriesAccess = _ref4.seriesAccess;\n  var classes = useStylesAccess({\n    seriesAccess: seriesAccess\n  });\n  return React.createElement(Paper, {\n    className: classNames(classes.root)\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, \"Series is \".concat(config.ACCESS[seriesAccess].label)), React.createElement(Typography, {\n    variant: \"caption\"\n  }, config.ACCESS[seriesAccess].description));\n};\n\nAccessCard.propTypes = {\n  seriesAccess: PropTypes.string\n};","export default (function (theme) {\n  return {\n    root: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.background.paper,\n      paddingBottom: 60\n    },\n    field: {\n      marginBottom: theme.spacing(1)\n    },\n    list: {\n      padding: theme.spacing(1)\n    },\n    heading: {\n      marginTop: theme.spacing(1)\n    },\n    watchers: {},\n    numPhotos: {\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    tagListItem: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(2)\n    },\n    chip: {\n      margin: theme.spacing(0.5)\n    }\n  };\n});","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    appBar: {\n      flexGrow: 0\n    },\n    inner: {\n      position: 'relative',\n      flexGrow: 1,\n      overflowY: 'scroll',\n      '-webkit-overflow-scrolling': 'touch'\n    },\n    tabMenu: {\n      marginTop: theme.spacing(7)\n    },\n    mapWrap: {\n      position: 'absolute',\n      height: '100%',\n      width: '100%',\n      top: 0,\n      left: 0\n    },\n    toolbarTitle: {\n      flexGrow: 1,\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    AddFab: {\n      position: 'absolute',\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      zIndex: 500\n    },\n    grow: {\n      flexGrow: 1\n    },\n    gridList: {\n      flexWrap: 'nowrap',\n      transform: 'translateZ(0)'\n    },\n    titleBar: {\n      display: 'flex',\n      padding: theme.spacing(1)\n    },\n    menuButton: {},\n    placeholderInner: {\n      position: 'relative',\n      flexGrow: 1,\n      overflow: 'hidden',\n      textAlign: 'center',\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column'\n    },\n    progressWrapper: {\n      textAlign: 'center',\n      marginBottom: theme.spacing(4)\n    },\n    placeholderText: {\n      opacity: 0.4\n    },\n    placeholder: {},\n    progress: {\n      color: theme.palette.grey[300]\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport AddAlertIcon from '@material-ui/icons/AddAlert';\nimport SlideshowIcon from '@material-ui/icons/Slideshow';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { QRDisplay } from '@morphoto/camera';\nimport { PhotoGrid } from '@morphoto/photos';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { AddFab, ContextMenu } from '@morphoto/ui';\nimport SwipeShow from '@morphoto/swipeshow';\nimport { ThemeProvider } from '@material-ui/styles';\nimport themes from '@morphoto/themes';\nimport SeriesInfo from './SeriesInfo';\nimport { SeriesContext } from '../contexts';\nimport style from '../SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesView = function SeriesView(_ref) {\n  var onSlideshowStart = _ref.onSlideshowStart,\n      onChange = _ref.onChange,\n      onEditSeries = _ref.onEditSeries,\n      onDeletePhotos = _ref.onDeletePhotos,\n      onCameraAdd = _ref.onCameraAdd,\n      onDeleteSeries = _ref.onDeleteSeries,\n      onLibraryAdd = _ref.onLibraryAdd,\n      onTileClick = _ref.onTileClick,\n      onMenuBack = _ref.onMenuBack,\n      onWatch = _ref.onWatch,\n      onUnWatch = _ref.onUnWatch,\n      initialPhoto = _ref.initialPhoto,\n      onFindOnMap = _ref.onFindOnMap;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      contextEl = _useState2[0],\n      setContextEl = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showQR = _useState4[0],\n      setShowQR = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      deleteConfirm = _useState6[0],\n      setDeleteConfirm = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      listTypeTab = _useState8[0],\n      setListTypeTab = _useState8[1];\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      ac = _useContext.ac,\n      watching = _useContext.watching,\n      owned = _useContext.owned;\n\n  var _useState9 = useState(initialPhoto),\n      _useState10 = _slicedToArray(_useState9, 2),\n      activePhotoId = _useState10[0],\n      setActivePhotoId = _useState10[1];\n\n  var onDeleteConfirm = function onDeleteConfirm(confirmation) {\n    setDeleteConfirm(false);\n    if (confirmation === true) onDeleteSeries(series.id);\n  };\n\n  var viewport = {\n    zoom: 16\n  };\n\n  if (series && series.coords && series.coords.length === 2) {\n    viewport.longitude = series.coords[0];\n    viewport.latitude = series.coords[1];\n  }\n\n  useEffect(function () {\n    if (series.photos.length > 0 && !series.photos.find(function (p) {\n      return p.id === activePhotoId;\n    })) setActivePhotoId(series.photos[series.photos.length - 1].id);\n  }, [series.photos]);\n  var activePhoto = series.photos && series.photos.find(function (p) {\n    return p.id === activePhotoId;\n  });\n  var can = {\n    update: ac.canUser('update', series, 'series', '*'),\n    delete: ac.canUser('delete', series, 'series', '*'),\n    contribute: ac.canUser('update', series, 'series', ['photos'])\n  };\n  var dialogOpen = deleteConfirm || showQR;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(ThemeProvider, {\n    theme: themes.access[series.access]\n  }, React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, series.name || 'Series'), React.createElement(IconButton, {\n    \"aria-haspopup\": \"true\",\n    color: \"inherit\",\n    onClick: function onClick(event) {\n      return setContextEl(event.currentTarget);\n    }\n  }, React.createElement(MoreIcon, null)), React.createElement(ThemeProvider, {\n    theme: themes.series\n  }, React.createElement(ContextMenu, {\n    anchorEl: contextEl,\n    onClose: function onClose() {\n      return setContextEl(null);\n    },\n    menuItems: [{\n      text: 'Find on map',\n      icon: PlaceIcon,\n      hide: !onFindOnMap,\n      action: onFindOnMap\n    }, {\n      text: 'Watch Series',\n      icon: AddAlertIcon,\n      hide: !onWatch || owned || watching,\n      action: onWatch\n    }, {\n      text: 'Unwatch Series',\n      icon: AddAlertIcon,\n      hide: !onUnWatch || owned || !watching,\n      action: onUnWatch\n    }, {\n      text: 'Share series',\n      color: series.access === 'PRIVATE' ? 'textSecondary' : undefined,\n      icon: ShareIcon,\n      action: function action() {\n        return setShowQR(true);\n      }\n    }, {\n      text: 'Start Slideshow',\n      icon: SlideshowIcon,\n      hide: !onSlideshowStart,\n      action: onSlideshowStart\n    }, {\n      divider: true\n    }, {\n      text: 'Edit Series',\n      icon: EditIcon,\n      hide: !onEditSeries || !can.update,\n      action: onEditSeries\n    }, {\n      text: 'Delete Series',\n      icon: DeleteIcon,\n      hide: !setDeleteConfirm || !can.delete,\n      color: 'error',\n      action: function action() {\n        return setDeleteConfirm(true);\n      }\n    }]\n  }))), React.createElement(Tabs, {\n    variant: \"fullWidth\",\n    value: listTypeTab,\n    onChange: function onChange(e, value) {\n      return setListTypeTab(value);\n    }\n  }, React.createElement(Tab, {\n    label: \"Series\"\n  }), React.createElement(Tab, {\n    label: \"Photos\"\n  })))), React.createElement(\"div\", {\n    className: classes.inner\n  }, listTypeTab === 0 && React.createElement(React.Fragment, null, series.photos && series.photos.length > 0 && React.createElement(SwipeShow, {\n    photos: series.photos,\n    activePhotoId: activePhotoId,\n    setActivePhotoId: setActivePhotoId,\n    onImageSelect: onTileClick\n  }), React.createElement(SeriesInfo, {\n    onChange: onChange\n  })), series.photos && listTypeTab === 1 && React.createElement(PhotoGrid, {\n    photos: series.photos,\n    onTileClick: onTileClick,\n    onDelete: onDeletePhotos,\n    allowDelete: can.delete\n  })), listTypeTab === 0 && can.contribute && React.createElement(AddFab, {\n    className: classes.AddFab,\n    disabled: !dialogOpen,\n    onCameraClick: onCameraAdd,\n    onLibraryClick: onLibraryAdd\n  }, React.createElement(AddCameraIcon, null)), activePhoto && React.createElement(QRDisplay, {\n    open: showQR,\n    onClose: function onClose() {\n      return setShowQR(false);\n    },\n    series: series,\n    photoId: activePhoto.id\n  }), React.createElement(DeleteDialog, {\n    open: deleteConfirm,\n    onConfirm: onDeleteConfirm,\n    title: \"Delete Series\",\n    message: \"Are you sure you want to delete this series? The record and all images associated with it will be gone forever.\"\n  }));\n};\n\nSeriesView.propTypes = {\n  initialPhoto: PropTypes.string,\n  onSlideshowStart: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onFindOnMap: PropTypes.func.isRequired,\n  onDeletePhotos: PropTypes.func.isRequired,\n  onDeleteSeries: PropTypes.func.isRequired,\n  onCameraAdd: PropTypes.func.isRequired,\n  onEditSeries: PropTypes.func.isRequired,\n  onLibraryAdd: PropTypes.func.isRequired,\n  onTileClick: PropTypes.func.isRequired,\n  onMenuBack: PropTypes.func.isRequired,\n  onWatch: PropTypes.func,\n  onUnWatch: PropTypes.func\n};\nexport default SeriesView;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Typography from '@material-ui/core/Typography';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { MapDirPicker, MapDot } from '@morphoto/maps';\nimport { BigTextEdit } from '@morphoto/modals';\nimport { ShortLongText } from '@morphoto/ui';\nimport { config } from '@morphoto/client-common';\nimport style from './SeriesEditInner.style';\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  MAPPICK: 'mapPicker',\n  NOTEEDIT: 'noteEdit'\n};\n\nvar SeriesEditInner = function SeriesEditInner(_ref) {\n  var series = _ref.series,\n      delta = _ref.delta,\n      _onChange = _ref.onChange,\n      disabled = _ref.disabled;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var viewport = {\n    zoom: 18\n  };\n  viewport.longitude = series.coords[0];\n  viewport.latitude = series.coords[1];\n\n  if (delta.coords && delta.coords.length === 2) {\n    viewport.longitude = delta.coords[0];\n    viewport.latitude = delta.coords[1];\n  }\n\n  var access = delta.access || series.access || 'PRIVATE';\n  var name = typeof delta.name === 'string' ? delta.name : series.name || '';\n  var note = typeof delta.note === 'string' ? delta.note : series.note || '';\n  var nameError = !name || name.length < 3;\n  return React.createElement(\"div\", null, React.createElement(TextField, {\n    label: \"Series Name \".concat(nameError ? '(Required)' : ''),\n    fullWidth: true,\n    disabled: disabled,\n    error: nameError,\n    placeholder: \"New Series\",\n    className: classes.field,\n    value: name,\n    onChange: function onChange(e) {\n      return _onChange(_objectSpread({}, delta, {\n        name: e.target.value\n      }));\n    }\n  }), React.createElement(\"div\", {\n    className: classes.mapWrapper,\n    onClick: function onClick() {\n      return !disabled ? setActiveDialog(DIALOGS.MAPPICK) : {};\n    }\n  }, React.createElement(FormLabel, {\n    className: classes.mapFormLabel\n  }, \"Location\"), React.createElement(\"div\", {\n    className: classes.mapInnerWrap\n  }, React.createElement(MapDot, {\n    staticMap: true,\n    className: classes.map,\n    direction: delta.direction || series.direction,\n    viewport: viewport\n  }))), React.createElement(\"div\", {\n    className: classes.field\n  }, React.createElement(FormLabel, null, \"Series Access\"), React.createElement(\"div\", {\n    className: classes.access\n  }, React.createElement(FormControlLabel, {\n    className: classes.accessRadio,\n    disabled: disabled,\n    control: React.createElement(Switch, {\n      checked: ['OPEN', 'PUBLIC'].indexOf(access) > -1,\n      onChange: function onChange(e) {\n        _onChange(_objectSpread({}, delta, {\n          access: e.target.checked ? 'PUBLIC' : 'PRIVATE'\n        }));\n      },\n      value: 'PUBLIC'\n    }),\n    label: React.createElement(\"div\", null, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, config.ACCESS.PUBLIC.label), React.createElement(Typography, {\n      variant: \"caption\",\n      color: \"textSecondary\",\n      component: \"div\"\n    }, config.ACCESS.PUBLIC.description))\n  }), React.createElement(FormControlLabel, {\n    className: classes.accessRadio,\n    disabled: disabled || ['PRIVATE'].indexOf(access) > -1,\n    control: React.createElement(Switch, {\n      checked: ['OPEN'].indexOf(access) > -1,\n      onChange: function onChange(e) {\n        return _onChange(_objectSpread({}, delta, {\n          access: e.target.checked ? 'OPEN' : 'PUBLIC'\n        }));\n      },\n      value: 'OPEN'\n    }),\n    label: React.createElement(\"div\", null, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, config.ACCESS.OPEN.label), React.createElement(Typography, {\n      variant: \"caption\",\n      color: \"textSecondary\",\n      component: \"div\"\n    }, config.ACCESS.OPEN.description))\n  }))), React.createElement(ShortLongText, {\n    onClick: function onClick() {\n      return !disabled ? setActiveDialog(DIALOGS.NOTEEDIT) : {};\n    },\n    className: classes.field,\n    label: \"Series Note\",\n    placeholder: 'Click to edit',\n    text: note\n  }), !disabled && activeDialog === DIALOGS.MAPPICK && React.createElement(MapDirPicker, {\n    open: true,\n    title: \"Series Location & Direction\",\n    latitude: delta.latitude || series.coords[1],\n    longitude: delta.longitude || series.coords[0],\n    direction: delta.direction || series.direction,\n    onOk: function onOk(data) {\n      _onChange(_objectSpread({}, delta, {}, data));\n\n      setActiveDialog(null);\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog(null);\n    }\n  }), !disabled && activeDialog === DIALOGS.NOTEEDIT && React.createElement(BigTextEdit, {\n    open: true,\n    title: \"Series Note\",\n    body: note,\n    multiline: true,\n    onOk: function onOk(newNote) {\n      _onChange(_objectSpread({}, delta, {\n        note: newNote\n      }));\n\n      setActiveDialog(null);\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog(null);\n    }\n  }), React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\",\n    className: classes.tagWarning\n  }, React.createElement(\"strong\", null, \"Changing tags:\"), \" Tags are changed on individual photos.\"));\n};\n\nSeriesEditInner.propTypes = {\n  series: PropTypes.object.isRequired,\n  delta: PropTypes.object.isRequired,\n  disabled: PropTypes.bool,\n  onChange: PropTypes.func.isRequired\n};\nexport default SeriesEditInner;","export default (function (theme) {\n  return {\n    root: {},\n    inner: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    dlgTitle: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    access: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    accessRadio: {\n      margin: theme.spacing(2, 1)\n    },\n    grow: {\n      flexGrow: 1\n    },\n    field: {\n      flexGrow: 0,\n      marginBottom: theme.spacing(1) * 2\n    },\n    slider: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '100%'\n    },\n    formLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapFormLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapInnerWrap: {\n      flexGrow: 1,\n      height: '200px',\n      minHeight: '200px'\n    },\n    mapWrapper: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      paddingBottom: theme.spacing(1) * 2\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    tagWarning: {}\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SeriesContext } from '../contexts';\nimport { ThemeProvider } from '@material-ui/styles';\nimport themes from '@morphoto/themes';\nimport style from './SeriesEdit.style';\nimport SeriesEditInner from './SeriesEditInner';\nimport log from 'loglevel';\nvar useStyles = makeStyles(style);\n\nvar SeriesEdit = function SeriesEdit(_ref) {\n  var onOk = _ref.onOk,\n      onCancel = _ref.onCancel;\n  var classes = useStyles();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      delta = _useState2[0],\n      setDelta = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      submitted = _useState4[0],\n      setSubmitted = _useState4[1];\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    className: classes.root,\n    fullScreen: true,\n    open: true,\n    onClose: onCancel\n  }, React.createElement(CssBaseline, null), React.createElement(ThemeProvider, {\n    theme: themes.access[delta.access || series.access]\n  }, React.createElement(DialogTitleThemed, null)), React.createElement(DialogContent, {\n    className: classes.inner\n  }, React.createElement(SeriesEditInner, {\n    series: series,\n    delta: delta,\n    onChange: setDelta\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    disabled: submitted,\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return setDelta({});\n    },\n    \"aria-label\": \"Menu\"\n  }, \"Reset\"), React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onCancel,\n    \"aria-label\": \"Menu\"\n  }, \"Cancel\"), React.createElement(Button, {\n    disabled: submitted,\n    className: classes.menuButton,\n    onClick: function onClick() {\n      if (submitted) return;\n      setSubmitted(true);\n      onOk(_objectSpread({\n        id: series.id\n      }, delta));\n    },\n    \"aria-label\": \"Menu\"\n  }, submitted ? 'Processing...' : 'Ok')));\n};\n\nSeriesEdit.propTypes = {\n  onOk: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired\n};\nexport default SeriesEdit;\n\nvar styleTitle = function styleTitle(theme) {\n  return {\n    dlgTitle: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useTitleStyles = makeStyles(styleTitle);\n\nvar DialogTitleThemed = function DialogTitleThemed(props) {\n  var classes = useTitleStyles();\n  return React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitle\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.grow\n  }, \"Edit Series Details\"));\n};","export default (function (theme) {\n  return {\n    root: {},\n    inner: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    field: {\n      flexGrow: 0,\n      marginBottom: theme.spacing(2)\n    },\n    slider: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '100%'\n    },\n    formLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapFormLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapInnerWrap: {\n      flexGrow: 1\n    },\n    mapWrapper: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      paddingBottom: theme.spacing(2)\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TagView, TagEdit } from '@morphoto/tags';\nimport { DateControl, DateView, ShortLongText } from '@morphoto/ui';\nimport { Tags as TagClass } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nimport { BigTextEdit, BigText } from '@morphoto/modals';\nimport { SeriesContext } from '../contexts';\nimport UserListItem from '../UserListItem';\nimport log from 'loglevel';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '90%',\n      width: '85%'\n    },\n    dlgTitleContainer: {\n      display: 'flex',\n      padding: 0\n    },\n    catTagTitle: {\n      marginTop: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEEDIT: 'noteEdit',\n  NOTEVIEW: 'noteView',\n  PHOTOTAKEN: 'taken',\n  TAGEDIT: 'tag',\n  CANCEL: 'cancel'\n};\n\nvar PhotoInfo = function PhotoInfo(_ref) {\n  var canEdit = _ref.canEdit,\n      photo = _ref.photo,\n      delta = _ref.delta,\n      _onChange = _ref.onChange,\n      hideUser = _ref.hideUser;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      tagConfigArr = _useContext.tagConfigArr;\n\n  var _useContext2 = useContext(SeriesContext),\n      getValuePromiseArr = _useContext2.getValuePromiseArr;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      activeDialog = _useState2$.activeDialog,\n      activeDialogContext = _useState2$.activeDialogContext,\n      setActiveDialog = _useState2[1];\n\n  var note = typeof delta.note === 'string' ? delta.note : photo.note || '';\n  var tagMemo = useMemo(function () {\n    var tagInst = new TagClass(tagConfigArr, delta.tags || photo.tags);\n    return {\n      nonXYTagTypes: tagInst.getNonXYTagTypes(),\n      numTags: tagInst.getNonXYTags().length\n    };\n  }, [photo.tags]);\n  var metaKeys = [];\n\n  try {\n    metaKeys = photo.meta ? Object.keys(JSON.parse(photo.meta)) : [];\n  } catch (e) {\n    log.error(e);\n  }\n\n  return React.createElement(\"div\", null, !hideUser && photo.createdUser && React.createElement(React.Fragment, null, React.createElement(UserListItem, {\n    user: photo.createdUser,\n    secondary: \"uploaded this photo\",\n    dense: true,\n    disableGutters: true\n  }), React.createElement(Divider, null)), canEdit ? React.createElement(DateControl, {\n    className: classes.field,\n    label: \"Photo taken on\",\n    value: delta.takenOn || photo.takenOn,\n    onChange: function onChange(takenOn) {\n      return _onChange({\n        takenOn: takenOn\n      });\n    },\n    canEdit: canEdit\n  }) : React.createElement(DateView, {\n    className: classes.field,\n    label: \"Photo taken on\",\n    value: delta.takenOn || photo.takenOn\n  }), (canEdit || photo.note) && React.createElement(ShortLongText, {\n    label: \"Photo Note\",\n    className: classes.field,\n    placeholder: canEdit ? 'Click to edit' : 'None',\n    text: note,\n    onClick: function onClick() {\n      if (canEdit) setActiveDialog({\n        activeDialog: DIALOGS.NOTEEDIT\n      });else setActiveDialog({\n        activeDialog: DIALOGS.NOTEVIEW\n      });\n    }\n  }), (canEdit || tagMemo.numTags > 0) && React.createElement(React.Fragment, null, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.catTagTitle\n  }, \"Category tags\"), React.createElement(Divider, null), tagMemo.nonXYTagTypes.map(function (tt, idx) {\n    return React.createElement(TagView, {\n      key: \"tagtype-\".concat(idx),\n      className: classes.field,\n      label: tt.label,\n      tags: delta.tags || photo.tags,\n      canEdit: canEdit,\n      onClick: function onClick() {\n        return setActiveDialog({\n          activeDialog: DIALOGS.TAGEDIT,\n          activeDialogContext: tt\n        });\n      },\n      tagType: _objectSpread({}, tt, {\n        getValuePromiseArr: getValuePromiseArr\n      })\n    });\n  })), metaKeys.length > 0 && Object.keys(photo.meta).length > 0 && React.createElement(React.Fragment, null, React.createElement(Typography, {\n    className: classes.heading\n  }, \"Metadata\"), React.createElement(Divider, null), React.createElement(List, {\n    className: classes.list\n  }, metaKeys.map(function (key, idx) {\n    return photo.meta[key] ? React.createElement(ListItem, {\n      key: \"metadata\".concat(idx)\n    }, React.createElement(ListItemText, {\n      primary: photo.meta[key].label,\n      secondary: photo.meta[key].render(photo.meta[key])\n    })) : null;\n  }))), activeDialog && activeDialog === DIALOGS.NOTEEDIT && React.createElement(BigTextEdit, {\n    open: true,\n    multiline: true,\n    onOk: function onOk(note) {\n      _onChange({\n        note: note\n      });\n\n      setActiveDialog({});\n    },\n    title: \"Edit Photo Note\",\n    body: note\n  }), activeDialog && activeDialog === DIALOGS.NOTEVIEW && React.createElement(BigText, {\n    open: true,\n    multiline: true,\n    onClose: function onClose() {\n      return setActiveDialog({});\n    },\n    title: \"Photo Note\",\n    body: note\n  }), activeDialog && activeDialog === DIALOGS.TAGEDIT && React.createElement(TagEdit, {\n    open: true,\n    title: \"Edit Photo Tags: \".concat(activeDialogContext.label),\n    onOk: function onOk(tags) {\n      setActiveDialog({});\n\n      _onChange({\n        tags: tags\n      });\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog({});\n    },\n    tags: delta.tags || photo.tags || [],\n    tagType: _objectSpread({}, activeDialogContext, {\n      getValuePromiseArr: getValuePromiseArr\n    })\n  }));\n};\n\nPhotoInfo.propTypes = {\n  canEdit: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  hideUser: PropTypes.bool,\n  photo: PropTypes.object.isRequired,\n  delta: PropTypes.object.isRequired\n};\nexport default PhotoInfo;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Dialog from '@material-ui/core/Dialog';\nimport Divider from '@material-ui/core/Divider';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SeriesEditInner from './SeriesEditInner';\nimport PhotoInfoInner from './PhotoInfoInner';\nimport style from './NewPhotoInfo.style';\nvar useStyles = makeStyles(style);\n\nvar NewPhotoInfo = function NewPhotoInfo(_ref) {\n  var photo = _ref.photo,\n      newSeries = _ref.newSeries,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      submitted = _useState2[0],\n      setSubmitted = _useState2[1];\n\n  var _useState3 = useState(newSeries || {}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      seriesDelta = _useState4[0],\n      setSeriesDelta = _useState4[1];\n\n  var _useState5 = useState(photo),\n      _useState6 = _slicedToArray(_useState5, 2),\n      photoDelta = _useState6[0],\n      setPhotoDelta = _useState6[1];\n\n  var validName = !newSeries || seriesDelta.name && seriesDelta.name.length >= 3;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(Dialog, {\n    fullScreen: true,\n    scroll: \"paper\",\n    disableBackdropClick: true,\n    disableEscapeKeyDown: true,\n    onClose: actions.onCancel,\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: true\n  }, React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitleContainer\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.dlgTitle\n  }, newSeries ? 'New Series Details' : 'New Photo Details')), React.createElement(DialogContent, null, !!newSeries && React.createElement(SeriesEditInner, {\n    series: newSeries,\n    delta: seriesDelta,\n    disabled: submitted,\n    onChange: setSeriesDelta\n  }), !!newSeries && React.createElement(\"div\", null, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.photoTitle\n  }, \"New photo details\"), React.createElement(Divider, null)), React.createElement(PhotoInfoInner, {\n    photo: photo,\n    canEdit: !submitted,\n    hideUser: true,\n    delta: photoDelta,\n    onChange: function onChange(newAttr) {\n      return setPhotoDelta(_objectSpread({}, photoDelta, {}, newAttr));\n    }\n  })), React.createElement(DialogActions, null, !submitted && React.createElement(Button, {\n    onClick: actions.onCancel,\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    disabled: !validName || submitted,\n    onClick: function onClick() {\n      if (submitted) return;\n      setSubmitted(true);\n      actions.onSave(seriesDelta, photoDelta);\n    },\n    color: \"primary\"\n  }, submitted ? 'Processing...' : 'Next'))));\n};\n\nNewPhotoInfo.propTypes = {\n  photo: PropTypes.object.isRequired,\n  newSeries: PropTypes.object,\n  actions: PropTypes.shape({\n    onCancel: PropTypes.func.isRequired,\n    onSave: PropTypes.func\n  })\n};\nexport default NewPhotoInfo;","export default (function (theme) {\n  return {\n    root: {},\n    formLabel: {\n      color: theme.palette.text.secondary\n    },\n    dlgTitleContainer: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    mapFormLabel: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(1),\n      color: theme.palette.text.secondary\n    },\n    map: {\n      marginBottom: theme.spacing(2)\n    },\n    mapWrapper: {\n      marginBottom: theme.spacing(2)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n});","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Series as SeriesClass, Photo as PhotoClass } from '@morphoto/common';\nimport { CameraTool } from '@morphoto/camera';\nimport { ThemeProvider } from '@material-ui/styles';\nimport NewPhotoInfo from './NewPhotoInfo';\nimport { PhotoReviewTool } from '@morphoto/photos';\nimport { LibraryFilePicker } from '@morphoto/ui';\nimport themes from '@morphoto/themes';\nimport { SeriesContext } from '../contexts';\nimport { AppContext, useDeviceOrientation, useGeolocation } from '@morphoto/client-common';\nimport log from 'loglevel';\nexport var NEW_PHOTO_MODES = {\n  CAMERA: 'camera',\n  FILEPICKER: 'library',\n  PHOTOREVIEW: 'photoreview',\n  PHOTOINFOEDIT: 'photoinfoedit'\n};\n\nvar NewPhoto = function NewPhoto(_ref) {\n  var inputMethod = _ref.inputMethod,\n      isNewSeries = _ref.isNewSeries,\n      actions = _ref.actions;\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var _useContext2 = useContext(AppContext),\n      device = _useContext2.device;\n\n  var geoRef = useRef();\n\n  var _useContext3 = useContext(AppContext),\n      metaConfig = _useContext3.metaConfig;\n\n  var _useState = useState(isNewSeries ? new SeriesClass(metaConfig).series : series),\n      _useState2 = _slicedToArray(_useState, 2),\n      newSeries = _useState2[0],\n      setNewSeries = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newPhoto = _useState4[0],\n      setNewPhoto = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      photoRefId = _useState6[0],\n      setPhotoRefId = _useState6[1];\n\n  var _useState7 = useState({\n    current: inputMethod,\n    history: []\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      mode = _useState8[0],\n      _changeMode = _useState8[1];\n\n  var orientation = useDeviceOrientation();\n  var geo = useGeolocation();\n  geoRef.current = geo;\n  var photos = !isNewSeries && series && series.photos ? series.photos : [];\n\n  var changeMode = function changeMode(newModeName) {\n    log.info('NEWPHOTO changeMode', mode, newModeName);\n\n    _changeMode({\n      current: newModeName,\n      history: [].concat(_toConsumableArray(mode.history), [mode.current])\n    });\n  };\n\n  var lastMode = function lastMode() {\n    if (mode.history.length > 0) {\n      var oldHistory = _toConsumableArray(mode.history);\n\n      var oldMode = oldHistory.pop();\n\n      _changeMode({\n        current: oldMode,\n        history: oldHistory\n      });\n    } else {\n      actions.onCancel();\n    }\n  };\n\n  var onLibraryAdd = function onLibraryAdd(data) {\n    var _data$exifObj, exif, exifDateTime, exifGPS, coords, date, _geoRef$current, latitude, longitude, beginnerObj, _newPhoto;\n\n    return _regeneratorRuntime.async(function onLibraryAdd$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            log.info('onLibraryAdd Debug GOT DATA', {\n              isNewSeries: isNewSeries\n            });\n            _data$exifObj = data.exifObj, exif = _data$exifObj.exif, exifDateTime = _data$exifObj.exifDateTime, exifGPS = _data$exifObj.exifGPS;\n            coords = exifGPS;\n            log.info('EXIF Debug', {\n              exif: exif,\n              exifDateTime: exifDateTime,\n              exifGPS: exifGPS\n            });\n            date = exifDateTime || String(Date.now());\n\n            if (!coords) {\n              if (geoRef.current && geoRef.current.latitude && geoRef.current.longitude) {\n                _geoRef$current = geoRef.current, latitude = _geoRef$current.latitude, longitude = _geoRef$current.longitude;\n                coords = [longitude, latitude];\n              } else {\n                coords = [-123.1398254, 49.3050394];\n              }\n            }\n\n            if (isNewSeries) setNewSeries(_objectSpread({}, newSeries, {\n              coords: coords\n            }));\n            beginnerObj = new PhotoClass(metaConfig).photo;\n            _newPhoto = _objectSpread({}, beginnerObj, {\n              takenOn: date,\n              coords: coords,\n              rawData: JSON.stringify({\n                exif: exif,\n                sensors: {\n                  orientation: orientation,\n                  geo: geo\n                }\n              })\n            });\n            setNewPhoto({\n              captureObj: data,\n              photoObj: _newPhoto\n            });\n            log.info('onLibraryAdd', {\n              _newPhoto: _newPhoto,\n              newSeries: _objectSpread({}, newSeries, {\n                coords: coords\n              })\n            });\n            changeMode(NEW_PHOTO_MODES.PHOTOREVIEW);\n            log.info('onLibraryAdd FINISHED');\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var onShutter = function onShutter(data, refId) {\n    var _data$exifObj2, exif, exifGPS, date, coords, _geoRef$current2, latitude, longitude, beginnerObj, _newPhoto;\n\n    return _regeneratorRuntime.async(function onShutter$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            log.info('onShutter Debug GOT DATA', {\n              isNewSeries: isNewSeries\n            });\n            _data$exifObj2 = data.exifObj, exif = _data$exifObj2.exif, exifGPS = _data$exifObj2.exifGPS;\n            date = String(Date.now());\n            coords = [-123.1398254, 49.3050394];\n\n            if (geoRef.current && geoRef.current.latitude && geoRef.current.longitude) {\n              _geoRef$current2 = geoRef.current, latitude = _geoRef$current2.latitude, longitude = _geoRef$current2.longitude;\n              coords = [longitude, latitude];\n            } else if (exifGPS) {\n              coords = exifGPS;\n            }\n\n            if (isNewSeries) setNewSeries(_objectSpread({}, newSeries, {\n              coords: coords\n            }));\n            beginnerObj = new PhotoClass(metaConfig).photo;\n            _newPhoto = _objectSpread({}, beginnerObj, {\n              takenOn: date,\n              coords: coords,\n              rawData: JSON.stringify({\n                exif: exif,\n                sensors: {\n                  orientation: orientation,\n                  geo: geo\n                }\n              })\n            });\n            setNewPhoto({\n              captureObj: data,\n              photoObj: _newPhoto\n            });\n            log.info('onShutter', {\n              _newPhoto: _newPhoto,\n              newSeries: _objectSpread({}, newSeries, {\n                coords: coords\n              })\n            });\n            setPhotoRefId(refId);\n            changeMode(NEW_PHOTO_MODES.PHOTOREVIEW);\n            log.info('onShutter FINISHED');\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  var onFinalCreate = function onFinalCreate(seriesDelta, photoDelta) {\n    return actions.onCreate(seriesDelta, photoDelta, newPhoto.captureObj);\n  };\n\n  var component = null;\n\n  switch (mode.current) {\n    case NEW_PHOTO_MODES.CAMERA:\n      component = device.ios ? React.createElement(ThemeProvider, {\n        theme: themes.login\n      }, React.createElement(LibraryFilePicker, {\n        onCancel: actions.onCancel,\n        cameraPicker: true,\n        onLibraryAdd: onLibraryAdd\n      })) : React.createElement(CameraTool, {\n        photos: photos,\n        onShutter: onShutter,\n        onCancel: actions.onCancel\n      });\n      break;\n\n    case NEW_PHOTO_MODES.FILEPICKER:\n      component = React.createElement(ThemeProvider, {\n        theme: themes.login\n      }, React.createElement(LibraryFilePicker, {\n        onCancel: actions.onCancel,\n        onLibraryAdd: onLibraryAdd\n      }));\n      break;\n\n    case NEW_PHOTO_MODES.PHOTOREVIEW:\n      component = React.createElement(PhotoReviewTool, {\n        defaultRefPhotoId: photoRefId,\n        photoBlob: newPhoto.captureObj.file,\n        inputMethod: inputMethod,\n        photos: photos,\n        onConfirm: function onConfirm() {\n          return changeMode(NEW_PHOTO_MODES.PHOTOINFOEDIT);\n        },\n        onCancel: actions.onCancel,\n        onRetry: lastMode\n      });\n      break;\n\n    case NEW_PHOTO_MODES.PHOTOINFOEDIT:\n      component = React.createElement(NewPhotoInfo, {\n        photo: newPhoto.photoObj,\n        newSeries: isNewSeries ? newSeries : null,\n        actions: {\n          onSave: onFinalCreate,\n          onCancel: actions.onCancel\n        }\n      });\n      break;\n\n    default:\n      log.info('NEWPHOTO: default state. you should NEVER see this', mode);\n      actions.onCancel();\n  }\n\n  return component;\n};\n\nNewPhoto.propTypes = {\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  isNewSeries: PropTypes.bool,\n  photos: PropTypes.array,\n  actions: PropTypes.shape({\n    onCreate: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired\n  })\n};\nexport default NewPhoto;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesNotFound = function SeriesNotFound(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Series\"))), React.createElement(\"div\", {\n    className: classes.placeholderInner\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), React.createElement(Typography, {\n    className: classes.placeholderText,\n    variant: \"h3\"\n  }, \"Series not found\"), React.createElement(\"div\", {\n    className: classes.grow\n  })));\n};\n\nSeriesNotFound.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default SeriesNotFound;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Slideshow from '@morphoto/slideshow';\nimport { AccessHelper } from '@morphoto/common';\nimport { PhotoViewTool, NewPhotoViewTool } from '@morphoto/photos';\nimport SeriesView from './views/SeriesView';\nimport SeriesEdit from './views/SeriesEdit';\nimport NewPhoto from './views/NewPhoto';\nimport SeriesNotFound from './SeriesNotFound';\nimport { LoadingContainerThemed } from '@morphoto/ui';\nimport { SeriesContext } from './contexts';\nimport log from 'loglevel';\nexport var SERIES_MODES = {\n  SERIES_VIEW: 'series',\n  SERIES_EDIT: 'editseries',\n  NEWPHOTO: 'newphoto',\n  NEWSERIES: 'newseries',\n  REVIEW: 'review',\n  PHOTO_VIEW: 'photoviewer',\n  PHOTO_VIEW_NEW: 'newphotoviewer',\n  SLIDESHOW: 'slideshow'\n};\nvar VIEW_ONLY_MODES = [SERIES_MODES.SERIES_VIEW, SERIES_MODES.PHOTO_VIEW, SERIES_MODES.SLIDESHOW];\nvar VALID_STARTMODES = [SERIES_MODES.SERIES_VIEW, SERIES_MODES.NEWPHOTO, SERIES_MODES.NEWSERIES, SERIES_MODES.PHOTO_REVIEW, SERIES_MODES.PHOTO_VIEW];\n\nvar RepeatablePhotos = function RepeatablePhotos(_ref) {\n  var modeName = _ref.modeName,\n      series = _ref.series,\n      inputMethodINIT = _ref.inputMethod,\n      currentUserId = _ref.currentUserId,\n      currentUserRole = _ref.currentUserRole,\n      initialPhoto = _ref.initialPhoto,\n      loading = _ref.loading,\n      watching = _ref.watching,\n      owned = _ref.owned,\n      actions = _ref.actions,\n      getValuePromiseArr = _ref.getValuePromiseArr;\n\n  var _useState = useState(series),\n      _useState2 = _slicedToArray(_useState, 2),\n      seriesContextState = _useState2[0],\n      setSeriesContextState = _useState2[1];\n\n  var _useState3 = useState({\n    current: {\n      name: modeName || SERIES_MODES.SERIES_VIEW,\n      pid: initialPhoto,\n      inputMethod: inputMethodINIT\n    },\n    history: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mode = _useState4[0],\n      setMode = _useState4[1];\n\n  var ac = new AccessHelper(currentUserId, currentUserRole);\n  useEffect(function () {\n    log.debug('RepeatablePhotos::Something changed', {\n      series: series,\n      initialPhoto: initialPhoto,\n      inputMethodINIT: inputMethodINIT,\n      modeName: modeName,\n      seriesContextState: seriesContextState\n    });\n\n    if (series && !seriesContextState || series && seriesContextState && series.id !== seriesContextState.id) {\n      log.debug('RepeatablePhotos::Something changed RESET', {\n        modeName: modeName,\n        initialPhoto: initialPhoto,\n        inputMethodINIT: inputMethodINIT\n      });\n      setMode({\n        current: {\n          name: modeName || SERIES_MODES.SERIES_VIEW,\n          pid: initialPhoto,\n          inputMethod: inputMethodINIT\n        },\n        history: []\n      });\n    } else if (mode.current.pid !== initialPhoto) {\n      log.debug('RepeatablePhotos::Something changed NO RESET', {\n        mode: mode,\n        modeName: modeName,\n        initialPhoto: initialPhoto\n      });\n      setMode(_objectSpread({}, mode, {\n        current: _objectSpread({}, mode.current, {\n          name: modeName || SERIES_MODES.SERIES_VIEW,\n          pid: initialPhoto\n        })\n      }));\n    }\n\n    setSeriesContextState(series);\n  }, [series, initialPhoto, inputMethodINIT, modeName]);\n\n  var onUpdatePhoto = function onUpdatePhoto(photo, photoDelta) {\n    actions.onChangePhoto(photo, _objectSpread({}, photoDelta, {\n      seriesId: seriesContextState.id\n    }));\n  };\n\n  var onApprovePhoto = function onApprovePhoto(newSeries, newPhoto, newPhotoData) {\n    return _regeneratorRuntime.async(function onApprovePhoto$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            log.info('RepeatablePhotos: waiting for photo ID', {\n              newSeries: newSeries,\n              newPhoto: newPhoto,\n              newPhotoData: newPhotoData\n            });\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(actions.onNewPhoto(newPhoto, newPhotoData));\n\n          case 3:\n            setSeriesContextState(_objectSpread({}, series, {\n              photos: [].concat(_toConsumableArray(series.photos), [newPhoto])\n            }));\n            changeMode(SERIES_MODES.PHOTO_VIEW_NEW, newPhoto.id);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var onDeletePhotos = function onDeletePhotos(photoIdArr) {\n    series.photos.filter(function (sp) {\n      return photoIdArr.indexOf(sp.id) > -1;\n    }).forEach(function (p) {\n      return actions.onDeletePhoto(p);\n    });\n  };\n\n  var changeMode = function changeMode(newModeName, newPid, newInputMethod) {\n    var canUpdate = ac.canUser('update', series, 'series');\n    if (seriesContextState === null) actions.onClose();\n\n    if (!canUpdate && VIEW_ONLY_MODES.indexOf(newModeName) < 0) {\n      log.error('ILLEGAL MODE CHANGE!!!!!', {\n        from: mode.current,\n        to: newModeName,\n        canUpdate: canUpdate\n      });\n    } else {\n      setMode({\n        current: {\n          name: newModeName,\n          pid: newPid,\n          inputMethod: newInputMethod\n        },\n        history: [].concat(_toConsumableArray(mode.history), [mode.current])\n      });\n    }\n  };\n\n  var lastMode = function lastMode() {\n    if (mode.history.length > 0) {\n      var oldHistory = _toConsumableArray(mode.history);\n\n      var oldMode = oldHistory.pop();\n      setMode({\n        current: oldMode,\n        history: oldHistory\n      });\n    } else {\n      actions.onClose();\n    }\n  };\n\n  var viewPhoto = function viewPhoto(pid) {\n    changeMode(SERIES_MODES.PHOTO_VIEW, pid);\n  };\n\n  var component = null;\n\n  if (loading) {\n    return React.createElement(LoadingContainerThemed, {\n      spin: true,\n      noAppInfo: true\n    }, React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"subtitle1\"\n    }, \"Loading Series...\"));\n  } else if (!seriesContextState && mode.current.name !== SERIES_MODES.NEWSERIES) return React.createElement(SeriesNotFound, {\n    onMenuBack: actions.onClose\n  });\n\n  switch (mode.current.name) {\n    case SERIES_MODES.SERIES_VIEW:\n      component = React.createElement(SeriesView, {\n        onSlideshowStart: function onSlideshowStart() {\n          return changeMode(SERIES_MODES.SLIDESHOW);\n        },\n        onChange: function onChange() {\n          log.info('onChange NOT IMPLEMENTED');\n        },\n        initialPhoto: initialPhoto,\n        onDeletePhotos: onDeletePhotos,\n        onDeleteSeries: actions.onDelete,\n        onFindOnMap: actions.onFindOnMap,\n        onCameraAdd: function onCameraAdd() {\n          return changeMode(SERIES_MODES.NEWPHOTO, null, 'camera');\n        },\n        onEditSeries: function onEditSeries() {\n          return changeMode(SERIES_MODES.SERIES_EDIT);\n        },\n        onLibraryAdd: function onLibraryAdd() {\n          return changeMode(SERIES_MODES.NEWPHOTO, null, 'library');\n        },\n        onTileClick: viewPhoto,\n        onMenuBack: actions.onClose,\n        onWatch: actions.onWatch,\n        onUnWatch: actions.onUnWatch\n      });\n      break;\n\n    case SERIES_MODES.SERIES_EDIT:\n      component = React.createElement(SeriesEdit, {\n        onCancel: function onCancel() {\n          return changeMode(SERIES_MODES.SERIES_VIEW);\n        },\n        onOk: function onOk(seriesDelta) {\n          actions.onChange(series, _objectSpread({}, seriesDelta, {\n            id: series.id\n          }));\n          changeMode(SERIES_MODES.SERIES_VIEW);\n        }\n      });\n      break;\n\n    case SERIES_MODES.PHOTO_VIEW:\n      var canUpdatePhotoArr = series.photos.map(function (ph) {\n        return ac.canUser('update', series, 'series') || ac.canUser('update', ph, 'photo');\n      });\n      component = React.createElement(PhotoViewTool, {\n        photoId: mode.current.pid,\n        photos: series.photos,\n        seriesAccess: series.access,\n        onMenuBack: lastMode,\n        onUpdatePhoto: onUpdatePhoto,\n        canUpdatePhotoArr: canUpdatePhotoArr\n      });\n      break;\n\n    case SERIES_MODES.PHOTO_VIEW_NEW:\n      component = React.createElement(NewPhotoViewTool, {\n        photoId: initialPhoto,\n        photos: series.photos,\n        seriesAccess: series.access,\n        onMenuBack: function onMenuBack() {\n          return changeMode(SERIES_MODES.SERIES_VIEW);\n        },\n        onUpdatePhoto: onUpdatePhoto\n      });\n      break;\n\n    case SERIES_MODES.SLIDESHOW:\n      component = React.createElement(Slideshow, {\n        photos: seriesContextState.photos,\n        onCancel: lastMode\n      });\n      break;\n\n    case SERIES_MODES.NEWPHOTO:\n      component = React.createElement(NewPhoto, {\n        inputMethod: mode.current.inputMethod,\n        photos: series ? series.photos : null,\n        actions: {\n          onCreate: onApprovePhoto,\n          onCancel: lastMode\n        }\n      });\n      break;\n\n    case SERIES_MODES.NEWSERIES:\n      component = React.createElement(NewPhoto, {\n        inputMethod: mode.current.inputMethod,\n        isNewSeries: true,\n        actions: {\n          onCreate: actions.onNewSeries,\n          onCancel: lastMode\n        }\n      });\n      break;\n\n    default:\n      log.info('REPEATABLEPHOTO: default state. you should NEVER see this', seriesContextState);\n      component = null;\n  }\n\n  var finalContext = {\n    series: seriesContextState,\n    getValuePromiseArr: getValuePromiseArr,\n    watching: watching,\n    owned: owned,\n    ac: ac\n  };\n  return React.createElement(SeriesContext.Provider, {\n    value: finalContext\n  }, component);\n};\n\nRepeatablePhotos.propTypes = {\n  modeName: PropTypes.oneOf(VALID_STARTMODES),\n  watching: PropTypes.bool,\n  owned: PropTypes.bool,\n  currentUserId: PropTypes.string,\n  currentUserRole: PropTypes.string,\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  series: PropTypes.object,\n  initialPhoto: PropTypes.string,\n  loading: PropTypes.bool,\n  getValuePromiseArr: PropTypes.arrayOf(PropTypes.func),\n  actions: PropTypes.shape({\n    onChange: PropTypes.func.isRequired,\n    onFindOnMap: PropTypes.func.isRequired,\n    onChangePhoto: PropTypes.func.isRequired,\n    onDeletePhoto: PropTypes.func.isRequired,\n    onNewPhoto: PropTypes.func.isRequired,\n    onNewSeries: PropTypes.func.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onWatch: PropTypes.func,\n    onUnWatch: PropTypes.func\n  })\n};\nRepeatablePhotos.defaultProps = {\n  mode: SERIES_MODES.SERIES_VIEW\n};\nexport default RepeatablePhotos;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Fab from '@material-ui/core/Fab';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesList.style';\nimport { dates } from '@morphoto/common';\nimport { RawImage } from '@morphoto/photos';\nimport { useNewImageMenu } from '@morphoto/ui';\nvar useStyles = makeStyles(style);\n\nvar SeriesList = function SeriesList(_ref) {\n  var seriesList = _ref.seriesList,\n      canEdit = _ref.canEdit,\n      tileClick = _ref.tileClick,\n      columns = _ref.columns,\n      cameraClick = _ref.cameraClick,\n      libraryClick = _ref.libraryClick;\n  var classes = useStyles();\n\n  var _useNewImageMenu = useNewImageMenu(cameraClick, libraryClick),\n      onDownThunk = _useNewImageMenu.onDownThunk,\n      onUpThunk = _useNewImageMenu.onUpThunk,\n      onBlock = _useNewImageMenu.onBlock,\n      menu = _useNewImageMenu.menu;\n\n  return React.createElement(GridList, {\n    cols: columns || 1,\n    cellHeight: 200,\n    className: classes.root\n  }, seriesList.map(function (seriesItem, idx) {\n    var photo = seriesItem.photos[0];\n    return React.createElement(GridListTile, {\n      key: \"gridTile\".concat(idx),\n      onClick: function onClick() {\n        return tileClick(seriesItem);\n      }\n    }, photo && React.createElement(RawImage, {\n      sizePriority: ['medium', 'thumb', 'large'],\n      photo: photo\n    }), canEdit && React.createElement(Fab, {\n      onClick: onBlock,\n      onMouseDown: onDownThunk(seriesItem),\n      onMouseUp: onUpThunk(seriesItem),\n      onTouchStart: onDownThunk(seriesItem),\n      onTouchEnd: onUpThunk(seriesItem),\n      color: \"secondary\",\n      className: classes.fab\n    }, React.createElement(AddCameraIcon, null)), menu, React.createElement(GridListTileBar, {\n      title: seriesItem.name,\n      subtitle: React.createElement(\"span\", null, seriesItem.photos.length, \" photos \", React.createElement(\"strong\", null, \"Last Photo\"), \": \", dates.formatDate(seriesItem.photos[0].takenOn, 'llll'))\n    }));\n  }));\n};\n\nSeriesList.propTypes = {\n  seriesList: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  canEdit: PropTypes.bool,\n  tileClick: PropTypes.func.isRequired,\n  cameraClick: PropTypes.func.isRequired,\n  libraryClick: PropTypes.func.isRequired\n};\nexport default SeriesList;","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'space-around',\n      overflow: 'hidden',\n      backgroundColor: theme.palette.background.paper\n    },\n    fab: {\n      position: 'absolute',\n      top: 10,\n      right: 10,\n      height: theme.spacing(5),\n      width: theme.spacing(5)\n    },\n    fab2: {\n      position: 'absolute',\n      top: 10,\n      left: 10,\n      height: theme.spacing(5),\n      width: theme.spacing(5)\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { CircularProgress } from '@material-ui/core';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { RawImage } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { config } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      margin: 0,\n      padding: theme.spacing(1)\n    },\n    rootSm: {\n      margin: 0,\n      padding: theme.spacing(0, 0, 1, 0)\n    },\n    chipContainer: {\n      display: 'flex',\n      width: '100%'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    accessLabel: {\n      padding: theme.spacing(0.5, 0.5)\n    },\n    img: {},\n    text: {\n      height: '115px',\n      margin: 0,\n      padding: theme.spacing(0, 1),\n      alignSelf: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    textSm: {\n      height: '75px',\n      margin: 0,\n      padding: theme.spacing(0, 1),\n      alignSelf: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    titleText: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    createdUserText: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    dateContainer: {\n      display: 'flex',\n      maxWidth: '400px'\n    },\n    dateLabel: {\n      fontWeight: 'bold',\n      flex: '1 1 50px'\n    },\n    dateText: {},\n    imgContainer: {\n      position: 'relative',\n      flex: '0 0 115px',\n      alignSelf: 'flex-start',\n      overflow: 'hidden',\n      '&::before': {\n        content: '\" \"',\n        display: 'block',\n        paddingTop: '100%'\n      }\n    },\n    imgContainerSm: {\n      position: 'relative',\n      flex: '0 0 100px',\n      alignSelf: 'flex-start',\n      overflow: 'hidden',\n      '&::before': {\n        content: '\" \"',\n        display: 'block',\n        paddingTop: '100%'\n      }\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar SeriesListItem = function SeriesListItem(_ref) {\n  var series = _ref.series,\n      loading = _ref.loading,\n      onClick = _ref.onClick,\n      children = _ref.children,\n      showCreatedOn = _ref.showCreatedOn,\n      showLastPhoto = _ref.showLastPhoto;\n  var classes = useStyles();\n  var isSmall = useMediaQuery('(max-width:375px)');\n  if (loading || !series) return React.createElement(SeriesListItemLoading, null);\n  var accessLabel = config.ACCESS.PRIVATE.label;\n  accessLabel = series.access ? config.ACCESS[series.access].label : config.ACCESS.PRIVATE.label;\n  return React.createElement(ListItem, {\n    className: isSmall ? classes.rootSm : classes.root,\n    button: true,\n    component: \"div\",\n    disableGutters: true,\n    onClick: onClick\n  }, React.createElement(ListItemIcon, {\n    className: isSmall ? classes.imgContainerSm : classes.imgContainer\n  }, React.createElement(RawImage, {\n    photo: series.featured,\n    sizePriority: ['thumb', 'medium', 'large'],\n    className: classes.img,\n    style: {\n      objectFit: 'cover',\n      position: 'absolute',\n      width: '100%',\n      height: '100%'\n    }\n  })), React.createElement(ListItemText, {\n    className: classes.text,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    component: \"div\",\n    className: classes.titleText\n  }, series.name || loading), React.createElement(Typography, {\n    variant: \"body2\",\n    component: \"div\",\n    className: classes.createdUserText\n  }, React.createElement(\"strong\", null, \"Created by:\"), \" \", series.createdUser.username), series.access && React.createElement(ThemeProvider, {\n    theme: themes.access[series.access]\n  }, React.createElement(Typography, {\n    className: classNames(classes.accessLabel),\n    variant: \"caption\",\n    component: \"div\"\n  }, \"\".concat(series.photoCount || 0, \" Photos\"), React.createElement(\"em\", null, \"(\", accessLabel, \")\"))), React.createElement(\"div\", {\n    className: classes.grow\n  }), showCreatedOn && React.createElement(\"div\", {\n    className: classes.dateContainer\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateLabel\n  }, \"Created:\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateText\n  }, dates.formatDate(series.createdOn, isSmall ? 'll' : 'lll'))), showLastPhoto && series.latest && React.createElement(\"div\", {\n    className: classes.dateContainer\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateLabel\n  }, \"Last Photo:\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateText\n  }, dates.formatDate(series.latest.takenOn, isSmall ? 'll' : 'lll')))), children);\n};\n\nSeriesListItem.propTypes = {\n  series: PropTypes.object,\n  loading: PropTypes.bool,\n  showCreatedOn: PropTypes.bool,\n  showLastPhoto: PropTypes.bool,\n  onClick: PropTypes.func,\n  children: PropTypes.array\n};\nexport default SeriesListItem;\n\nvar SeriesListItemLoading = function SeriesListItemLoading() {\n  var classes = useStyles();\n  return React.createElement(ListItem, {\n    className: classes.root,\n    button: true,\n    component: \"div\",\n    disableGutters: true\n  }, React.createElement(ListItemAvatar, null, React.createElement(CircularProgress, {\n    color: \"primary\"\n  })), React.createElement(ListItemText, null, React.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, \"Loading...\")));\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { List } from '@material-ui/core';\nimport SeriesListItem from './SeriesListItem';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    },\n    list: {\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ViewListDialog = function ViewListDialog(_ref) {\n  var title = _ref.title,\n      seriesList = _ref.seriesList,\n      onSelect = _ref.onSelect,\n      onClose = _ref.onClose,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    fullWidth: true,\n    open: open,\n    onClose: onClose,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    color: \"inherit\"\n  }))), React.createElement(List, {\n    className: classes.list,\n    dense: true,\n    disablePadding: true\n  }, seriesList.map(function (series) {\n    return React.createElement(SeriesListItem, {\n      key: \"series\".concat(series.id),\n      series: series,\n      onClick: function onClick() {\n        return onSelect(series.id);\n      }\n    });\n  })));\n};\n\nViewListDialog.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  seriesList: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default ViewListDialog;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport themes from '@morphoto/themes';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CancelConfirm } from '@morphoto/modals';\nimport PhotoInfoInner from './PhotoInfoInner';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '90%',\n      width: '85%'\n    },\n    dlgTitleContainer: {\n      color: function color(props) {\n        return themes.access[props.seriesAccess].palette.primary.contrastText;\n      },\n      background: function background(props) {\n        return themes.access[props.seriesAccess].palette.primary.main;\n      },\n      display: 'flex',\n      padding: 0\n    },\n    dlgTitle: {\n      flexGrow: 1,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEEDIT: 'noteEdit',\n  NOTEVIEW: 'noteView',\n  PHOTOTAKEN: 'taken',\n  TAGEDIT: 'tag',\n  CANCEL: 'cancel'\n};\n\nvar PhotoInfo = function PhotoInfo(_ref) {\n  var canEdit = _ref.canEdit,\n      photo = _ref.photo,\n      seriesAccess = _ref.seriesAccess,\n      onCancel = _ref.onCancel,\n      onOk = _ref.onOk,\n      open = _ref.open;\n  var classes = useStyles({\n    seriesAccess: seriesAccess\n  });\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      delta = _useState4[0],\n      setDelta = _useState4[1];\n\n  var dirty = delta && Object.keys(delta).length > 0;\n  return React.createElement(Dialog, {\n    fullScreen: true,\n    onClose: function onClose() {\n      if (dirty) setActiveDialog(DIALOGS.CANCEL);else onCancel();\n    },\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: open\n  }, React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitleContainer\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.dlgTitle\n  }, \"Photo Properties\"), React.createElement(IconButton, {\n    onClick: onCancel,\n    color: \"inherit\"\n  }, React.createElement(CloseIcon, null))), React.createElement(DialogContent, null, React.createElement(PhotoInfoInner, {\n    photo: photo,\n    delta: delta,\n    onChange: function onChange(newDelta) {\n      return setDelta(_objectSpread({}, delta, {}, newDelta));\n    },\n    canEdit: canEdit\n  })), React.createElement(DialogActions, null, !canEdit && React.createElement(Button, {\n    onClick: onCancel,\n    color: \"primary\"\n  }, \"Ok\"), canEdit && !dirty && React.createElement(Button, {\n    onClick: onCancel,\n    color: \"primary\"\n  }, \"Back\"), canEdit && dirty && React.createElement(React.Fragment, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.CANCEL);\n    },\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return setDelta({});\n    },\n    color: \"primary\"\n  }, \"Reset\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(delta);\n    },\n    color: \"primary\"\n  }, \"Ok\"))), activeDialog && activeDialog === DIALOGS.CANCEL && React.createElement(CancelConfirm, {\n    open: true,\n    title: \"Lose unsaved changes?\",\n    message: \"You will lose any changes you made to this form\",\n    onConfirm: function onConfirm(confirm) {\n      setActiveDialog(null);\n      if (confirm) onCancel();\n    }\n  }));\n};\n\nPhotoInfo.propTypes = {\n  canEdit: PropTypes.bool,\n  onCancel: PropTypes.func.isRequired,\n  onOk: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  seriesAccess: PropTypes.string,\n  photo: PropTypes.object.isRequired\n};\nexport default PhotoInfo;","import PhotoSeries from './PhotoSeries';\nexport default PhotoSeries;\nexport { SERIES_MODES } from './PhotoSeries';\nexport { default as SeriesList } from './SeriesList';\nexport { default as SeriesListItem } from './SeriesListItem';\nexport { default as ViewListDialog } from './ViewListDialog';\nexport { default as NewPhoto, NEW_PHOTO_MODES } from './views/NewPhoto';\nexport { default as PhotoInfo } from './views/PhotoInfo';","import Satellite from './SatStreets.json';\nimport TopoMap from './TopoMap.json';\nimport { Satellite as SatIcon, SatelliteOutlined, Terrain, TerrainOutlined } from '@material-ui/icons';\nexport default [{\n  toolTip: 'Sat',\n  Icon: SatelliteOutlined,\n  ActiveIcon: SatIcon,\n  color: 'green',\n  style: Satellite\n}, {\n  toolTip: 'Topo',\n  Icon: TerrainOutlined,\n  ActiveIcon: Terrain,\n  color: 'blue',\n  style: TopoMap\n}];","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      width: 1,\n      height: 1,\n      zIndex: 1\n    },\n    svgDot: {\n      width: 20,\n      height: 20,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    svgAccuracyDot: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MyLocation = function MyLocation(_ref) {\n  var position = _ref.position,\n      projection = _ref.projection;\n  var classes = useStyles();\n  var accuracy = 20;\n  var accHeight = projection.pixelsPerMeter[0] * accuracy;\n  var accWidth = projection.pixelsPerMeter[1] * accuracy;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"svg\", {\n    style: {\n      height: accHeight,\n      width: accWidth\n    },\n    className: classes.svgAccuracyDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 100, 100\"\n  }, React.createElement(\"circle\", {\n    cx: \"50\",\n    cy: \"50\",\n    r: 49,\n    stroke: \"#8888FF\",\n    fillOpacity: \"0.4\",\n    strokeWidth: \"1\",\n    fill: \"#AAAAFF\"\n  })), React.createElement(\"svg\", {\n    className: classes.svgDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 10, 10\"\n  }, React.createElement(\"circle\", {\n    cx: \"5\",\n    cy: \"5\",\n    r: \"4\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: \"1\",\n    fill: \"#4444FF\"\n  })));\n};\n\nMyLocation.propTypes = {\n  position: PropTypes.object,\n  projection: PropTypes.object\n};\nexport default MyLocation;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      zIndex: 10,\n      position: 'absolute'\n    },\n    speedDialFab: {\n      border: '2px solid',\n      background: theme.palette.text.primary,\n      color: theme.palette.primary.contrastText,\n      width: 40,\n      height: 40\n    },\n    speedDialAction: {},\n    speedDialIcon: {},\n    speedDialLabel: {\n      background: 'black',\n      color: 'white'\n    },\n    actionsClosed: {\n      display: 'none'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar StyleButtons = function StyleButtons(_ref) {\n  var controlPadding = _ref.controlPadding,\n      currStyle = _ref.currStyle,\n      mapStyles = _ref.mapStyles,\n      setCurrStyle = _ref.setCurrStyle;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var noEventSetOpen = function noEventSetOpen(e, state) {\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(state);\n  };\n\n  if (!mapStyles || !Array.isArray(mapStyles) || mapStyles.length < 2 || !mapStyles[currStyle]) return null;\n  var currStyleObj = mapStyles[currStyle];\n  var ActiveIcon = currStyleObj.ActiveIcon;\n  return React.createElement(\"div\", {\n    className: classes.root,\n    style: {\n      top: controlPadding.top ? controlPadding.top : theme.spacing(2),\n      right: controlPadding.right ? controlPadding.right : theme.spacing(2)\n    }\n  }, mapStyles.length > 1 && React.createElement(SpeedDial, {\n    ariaLabel: \"SpeedDial\",\n    className: classes.speedDial,\n    classes: {\n      fab: classes.speedDialFab,\n      actionsClosed: classes.actionsClosed\n    },\n    icon: React.createElement(ActiveIcon, {\n      className: classes.icon\n    }),\n    onClick: function onClick(e) {\n      return noEventSetOpen(e, !open);\n    },\n    onClose: function onClose(e) {\n      return noEventSetOpen(e, false);\n    },\n    open: open,\n    direction: \"left\"\n  }, mapStyles.map(function (_ref2, idx) {\n    var Icon = _ref2.Icon,\n        ActiveIcon = _ref2.ActiveIcon,\n        toolTip = _ref2.toolTip;\n    return React.createElement(SpeedDialAction, {\n      key: \"stylebutton\".concat(idx),\n      icon: React.createElement(Icon, {\n        className: classes.speedDialIcon\n      }),\n      tooltipOpen: false,\n      tooltipPlacement: \"bottom\",\n      tooltipTitle: toolTip,\n      onClick: function onClick() {\n        setCurrStyle(idx);\n        setOpen(false);\n      }\n    });\n  })));\n};\n\nStyleButtons.propTypes = {\n  controlPadding: PropTypes.object,\n  currStyle: PropTypes.number,\n  mapStyles: PropTypes.array,\n  setCurrStyle: PropTypes.func\n};\nStyleButtons.defaultProps = {\n  controlPadding: {}\n};\nexport default StyleButtons;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Fab from '@material-ui/core/Fab';\nimport MyLocationIcon from '@material-ui/icons/MyLocation';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      border: '1px solid',\n      background: theme.palette.grey[100],\n      color: 'black',\n      width: 40,\n      height: 40,\n      zIndex: 10,\n      position: 'absolute'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MyLocationButton = function MyLocationButton(_ref) {\n  var onClick = _ref.onClick,\n      controlPadding = _ref.controlPadding,\n      disabled = _ref.disabled;\n  var classes = useStyles();\n  var theme = useTheme();\n  return React.createElement(Fab, {\n    disabled: disabled,\n    style: {\n      top: 56 + (controlPadding.top ? controlPadding.top : theme.spacing(2)),\n      right: controlPadding.right ? controlPadding.right : theme.spacing(2)\n    },\n    \"aria-label\": \"myLocation\",\n    className: classes.root,\n    onClick: onClick\n  }, React.createElement(MyLocationIcon, null));\n};\n\nMyLocationButton.propTypes = {\n  controlPadding: PropTypes.object,\n  onClick: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\nexport default MyLocationButton;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo, useEffect } from 'react';\nimport ReactMapGL, { NavigationControl, Marker, FlyToInterpolator } from 'react-map-gl';\nimport PropTypes from 'prop-types';\nimport { easeCubic } from 'd3-ease';\nimport WebMercatorViewport, { getDistanceScales } from 'viewport-mercator-project';\nimport mapStyles from './mapStyles';\nimport MyLocation from './markers/MyLocation';\nimport StyleButtons from './controls/StyleButtons';\nimport MyLocationButton from './controls/MyLocationButton';\nimport log from 'loglevel';\nimport { useGeolocation, useComponentSize, config } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nvar useStyles = makeStyles(require('./BaseMap.style').default);\n\nvar BaseMap = function BaseMap(props) {\n  var classes = useStyles();\n\n  var showMe = props.showMe,\n      children = props.children,\n      mapStyles = props.mapStyles,\n      controlPadding = props.controlPadding,\n      initViewport = props.viewport,\n      bounds = props.bounds,\n      lockToBounds = props.lockToBounds,\n      lockPan = props.lockPan,\n      initStyle = props.initStyle,\n      incomingOnViewportChange = props.onViewportChange,\n      incomingOnTransitionStart = props.onTransitionStart,\n      incomingOnTransitionEnd = props.onTransitionEnd,\n      transitions = props.transitions,\n      onMapDataEvent = props.onMapDataEvent,\n      stylechooser = props.stylechooser,\n      passthroughProps = _objectWithoutProperties(props, [\"showMe\", \"children\", \"mapStyles\", \"controlPadding\", \"viewport\", \"bounds\", \"lockToBounds\", \"lockPan\", \"initStyle\", \"onViewportChange\", \"onTransitionStart\", \"onTransitionEnd\", \"transitions\", \"onMapDataEvent\", \"stylechooser\"]);\n\n  var mapContainerRef = useRef(null);\n  var mapBoxRef = useRef(null);\n  var innerTransitionsRef = useRef(null);\n\n  var _useComponentSize = useComponentSize(mapContainerRef),\n      size = _useComponentSize.size;\n\n  var _useState = useState(initStyle),\n      _useState2 = _slicedToArray(_useState, 2),\n      currStyle = _useState2[0],\n      setCurrStyle = _useState2[1];\n\n  var _useState3 = useState(_objectSpread({}, defaultViewVals, {}, initViewport)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewport = _useState4[0],\n      setViewport = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isTransitioning = _useState6[0],\n      setIsTransitioning = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      projection = _useState8[0],\n      setProjection = _useState8[1];\n\n  var myPosition = {};\n  myPosition = useGeolocation();\n  var geoMarker = myPosition.latitude && myPosition.longitude ? React.createElement(Marker, {\n    key: \"myPos\",\n    className: \"myPosMarker\",\n    captureDrag: false,\n    latitude: myPosition.latitude,\n    longitude: myPosition.longitude,\n    style: {\n      zIndex: 1\n    }\n  }, React.createElement(MyLocation, {\n    position: myPosition,\n    projection: projection\n  })) : null;\n  useMemo(function () {\n    if (!size || size.width < 10 || size.height < 10) return;\n    if (mapStyles.length <= currStyle) setCurrStyle(initStyle);\n\n    try {\n      var _projection = getDistanceScales(viewport);\n\n      setProjection(_projection);\n    } catch (e) {\n      log.error(e);\n    }\n  }, [viewport.zoom, size]);\n\n  var flyToMe = function flyToMe() {\n    if (!myPosition.latitude || !myPosition.longitude) return;\n    var transitionTime = 2000;\n    innerTransitionsRef.current = {\n      transitionDuration: transitionTime,\n      transitionInterpolator: new FlyToInterpolator(),\n      transitionEasing: easeCubic\n    };\n    setTimeout(function () {\n      if (innerTransitionsRef.current) innerTransitionsRef.current = null;\n    }, transitionTime);\n    setViewport(_objectSpread({}, viewport, {\n      latitude: myPosition.latitude,\n      longitude: myPosition.longitude,\n      zoom: viewport.zoom > 10 ? viewport.zoom : 12\n    }));\n  };\n\n  var _onViewportChange = function onViewportChange(viewportChange) {\n    var newViewport = _objectSpread({}, viewportChange);\n\n    if (bounds && lockToBounds) {\n      if (newViewport.longitude < bounds[0]) newViewport.longitude = bounds[0];else if (newViewport.longitude > bounds[2]) newViewport.longitude = bounds[2];\n      if (newViewport.latitude < bounds[1]) newViewport.latitude = bounds[1];else if (newViewport.latitude > bounds[3]) newViewport.latitude = bounds[3];\n    }\n\n    if (lockPan) {\n      newViewport.latitude = viewport.latitude;\n      newViewport.longitude = viewport.longitude;\n    }\n\n    if (!isTransitioning && typeof incomingOnViewportChange === 'function') {\n      incomingOnViewportChange({\n        viewport: newViewport,\n        size: size,\n        projection: projection,\n        map: mapBoxRef.current && mapBoxRef.current.getMap()\n      });\n    }\n\n    setViewport(newViewport);\n  };\n\n  var recalcZoomBounds = function recalcZoomBounds() {\n    if (!mapContainerRef.current) return;\n    if (!bounds || !size || size.width < 10 || size.height < 10 || isTransitioning) return;\n\n    var _bounds = _slicedToArray(bounds, 4),\n        minlng = _bounds[0],\n        minlat = _bounds[1],\n        maxlng = _bounds[2],\n        maxlat = _bounds[3];\n\n    try {\n      var _fitBounds = new WebMercatorViewport(_objectSpread({}, size, {}, viewport)).fitBounds([[minlng, minlat], [maxlng, maxlat]], {\n        padding: 40,\n        offset: [0, 0]\n      }),\n          longitude = _fitBounds.longitude,\n          latitude = _fitBounds.latitude,\n          zoom = _fitBounds.zoom;\n\n      setViewport(_objectSpread({}, viewport, {\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      }));\n    } catch (e) {\n      log.warn('recalcZoomBounds', e);\n    }\n  };\n\n  var handleTransitionStart = function handleTransitionStart() {\n    setIsTransitioning(true);\n    if (typeof incomingOnTransitionStart === 'function') incomingOnTransitionStart();\n  };\n\n  var handleTransitionEnd = function handleTransitionEnd() {\n    setIsTransitioning(false);\n    innerTransitionsRef.current = null;\n    if (incomingOnTransitionEnd) incomingOnTransitionEnd();\n\n    if (typeof incomingOnViewportChange === 'function') {\n      incomingOnViewportChange({\n        viewport: viewport,\n        size: size,\n        projection: projection,\n        map: mapBoxRef.current && mapBoxRef.current.getMap()\n      });\n    }\n  };\n\n  useMemo(recalcZoomBounds, [size, bounds]);\n  useEffect(function () {\n    setViewport(_objectSpread({}, viewport, {}, initViewport));\n  }, [initViewport]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.mapContainer, props.className),\n    ref: mapContainerRef\n  }, size.height > 0 && size.width > 0 && React.createElement(ReactMapGL, _extends({}, viewport, innerTransitionsRef.current || transitions, {\n    ref: function ref(map) {\n      mapBoxRef.current = map;\n    },\n    height: size.height,\n    width: size.width,\n    mapStyle: currStyle < mapStyles.length ? mapStyles[currStyle].style : mapStyles[0].style,\n    onData: onMapDataEvent,\n    onTransitionStart: handleTransitionStart,\n    onTransitionEnd: handleTransitionEnd,\n    dragPan: !lockPan,\n    onViewportChange: _onViewportChange,\n    mapboxApiAccessToken: config.mapConfig.mapBoxToken\n  }, passthroughProps), children && Array.isArray(children) ? children.map(function (c, idx) {\n    return c ? React.cloneElement(handleChild(c, viewport, size.height, size.width, projection), {\n      key: \"mapChild-\".concat(idx)\n    }) : null;\n  }) : handleChild(children, viewport, size.height, size.width, projection), stylechooser && React.createElement(StyleButtons, {\n    controlPadding: controlPadding,\n    currStyle: currStyle,\n    mapStyles: mapStyles,\n    setCurrStyle: setCurrStyle\n  }), !props.hideNavControls && React.createElement(NavigationControl, {\n    onViewportChange: function onViewportChange(viewport) {\n      return _onViewportChange(_objectSpread({}, viewport, {}, size));\n    },\n    showZoom: !props.touchZoom === false && !props.scrollZoom === false,\n    showCompass: !props.touchRotate === false && !props.dragRotate === false\n  }), showMe && !lockPan && React.createElement(React.Fragment, null, geoMarker, React.createElement(MyLocationButton, {\n    disabled: !myPosition || !myPosition.latitude,\n    controlPadding: controlPadding,\n    onClick: flyToMe\n  }))));\n};\n\nBaseMap.propTypes = {\n  children: PropTypes.any,\n  data: PropTypes.array,\n  controlPadding: PropTypes.object,\n  showMe: PropTypes.bool,\n  className: PropTypes.string,\n  touchZoom: PropTypes.bool,\n  scrollZoom: PropTypes.bool,\n  touchRotate: PropTypes.bool,\n  dragRotate: PropTypes.bool,\n  transitions: PropTypes.object,\n  viewport: PropTypes.object,\n  initStyle: PropTypes.number,\n  stylechooser: PropTypes.bool,\n  lockPan: PropTypes.bool,\n  lockRotation: PropTypes.bool,\n  lockZoom: PropTypes.bool,\n  lockToBounds: PropTypes.bool,\n  hideNavControls: PropTypes.bool,\n  bounds: PropTypes.array,\n  mapStyles: PropTypes.array,\n  onMapDataEvent: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  onTransitionStart: PropTypes.func,\n  onTransitionEnd: PropTypes.func\n};\nBaseMap.defaultProps = {\n  controlPadding: {},\n  stylechooser: true,\n  initStyle: 0,\n  lockToBounds: false,\n  mapStyles: mapStyles\n};\nexport default BaseMap;\nvar defaultViewVals = {\n  latitude: 49.3050394,\n  longitude: -123.1398254,\n  bearing: 0,\n  pitch: 0,\n  zoom: 12\n};\n\nfunction handleChild(child, viewport, height, width, projection) {\n  return typeof child === 'function' ? child(viewport, height, width, projection) : child;\n}","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport uuid from 'uuid/v4';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport rbush from 'rbush';\nimport { point, centroid, featureCollection } from '@turf/turf';\nimport { util } from '@morphoto/common';\nimport log from 'loglevel';\n\nvar useClusteredData = function useClusteredData(data, filterBounds, currentZoom, viewport, sizeScale, queryVersion, isTransitioning) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clusteredData = _useState2[0],\n      setClusteredData = _useState2[1];\n\n  var mountedRef = useRef();\n\n  var _useState3 = useState({\n    single: [],\n    cluster: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredData = _useState4[0],\n      setFilteredData = _useState4[1];\n\n  useEffect(function () {\n    mountedRef.current = true;\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []);\n  var updateDataDebounce = useCallback(util.debounce(function _callee() {\n    var updatedData,\n        _args = arguments;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (mountedRef.current) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(updateData.apply(void 0, _args));\n\n          case 4:\n            updatedData = _context.sent;\n            setClusteredData(updatedData);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  }, 1000), []);\n  var filterDataDebounce = useCallback(util.debounce(function _callee2() {\n    var filtered,\n        _args2 = arguments;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (mountedRef.current) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(filterData.apply(void 0, _args2));\n\n          case 4:\n            filtered = _context2.sent;\n            setFilteredData(filtered);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }, 300), []);\n  useEffect(function () {\n    updateDataDebounce(data, sizeScale, viewport);\n  }, [data.length, queryVersion]);\n  useEffect(function () {\n    if (!isTransitioning) filterDataDebounce(clusteredData, filteredData, filterBounds, currentZoom);\n  }, [clusteredData, currentZoom, filterBounds, queryVersion, isTransitioning]);\n  return {\n    filteredClusteredData: filteredData\n  };\n};\n\nexport default useClusteredData;\n\nvar updateData = function updateData(data, sizeScale, viewport) {\n  if (!data) {\n    return [];\n  }\n\n  var tree = rbush(9, ['.x', '.y', '.x', '.y']);\n  var transform = new WebMercatorViewport(_objectSpread({}, viewport, {\n    zoom: 0\n  }));\n  var newData = data.map(function (p) {\n    var screenCoords = [0, 0];\n\n    try {\n      screenCoords = transform.project(p.coords);\n    } catch (e) {\n      log.error(e);\n    }\n\n    var longitude = p.longitude,\n        latitude = p.latitude,\n        properties = _objectWithoutProperties(p, [\"longitude\", \"latitude\"]);\n\n    return {\n      x: screenCoords[0],\n      y: screenCoords[1],\n      photoCount: properties.photoCount,\n      zoomLevels: [],\n      geoJSON: p.coords ? point(p.coords, _objectSpread({}, properties)) : null\n    };\n  });\n  tree.clear();\n  tree.load(newData);\n\n  var _loop = function _loop(z) {\n    var radius = sizeScale / Math.sqrt(2) / Math.pow(2, z);\n    newData.forEach(function (p) {\n      if (p.zoomLevels[z] === undefined) {\n        var x = p.x,\n            y = p.y;\n        var neighbors = tree.search({\n          minX: x - radius,\n          minY: y - radius,\n          maxX: x + radius,\n          maxY: y + radius\n        }).filter(function (neighbor) {\n          return neighbor.zoomLevels[z] === undefined;\n        });\n        neighbors.forEach(function (neighbor) {\n          if (neighbor === p) {\n            var newGeoJSON = neighbors.length === 1 ? p.geoJSON : centroid(featureCollection(neighbors.map(function (n) {\n              return n.geoJSON;\n            })));\n            newGeoJSON.properties = _objectSpread({}, newGeoJSON.properties, {\n              id: newGeoJSON.properties.id || uuid(),\n              count: neighbors.length,\n              reducedPhotoCount: neighbors.reduce(function (acc, _ref2) {\n                var photoCount = _ref2.photoCount;\n                return photoCount ? acc + photoCount : acc;\n              }, 0),\n              points: neighbors.map(function (n) {\n                return n.geoJSON;\n              })\n            });\n            p.zoomLevels[z] = newGeoJSON;\n          } else {\n            neighbor.zoomLevels[z] = null;\n          }\n        });\n      }\n    });\n  };\n\n  for (var z = 0; z <= 20; z++) {\n    _loop(z);\n  }\n\n  return newData.map(function (_ref) {\n    var zoomLevels = _ref.zoomLevels;\n    return zoomLevels;\n  });\n};\n\nfunction filterData(clusteredData, filteredData, filterBounds, newZ) {\n  return clusteredData.filter(function (d) {\n    return !!d[newZ];\n  }).reduce(function (acc, zoomLevels) {\n    var geoJSON = zoomLevels[newZ];\n    var coords = geoJSON.geometry.coordinates;\n    var count = geoJSON.properties.count;\n\n    if (!filterBounds || filterBounds.length < 4 || filterBounds[0] < coords[0] && filterBounds[1] < coords[1] && filterBounds[2] > coords[0] && filterBounds[3] > coords[1]) {\n      if (count > 1) acc.cluster.push(geoJSON);else acc.single.push(geoJSON);\n    }\n\n    return acc;\n  }, {\n    single: [],\n    cluster: []\n  });\n}","export default (function (theme) {\n  return {\n    root: {\n      position: 'relative',\n      height: '100%',\n      '& .myPosMarker': {\n        zIndex: 1\n      },\n      '& .singleMarker': {\n        zIndex: 3\n      },\n      '& .clusterMarker': {\n        zIndex: 2\n      }\n    },\n    fab: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText\n    },\n    topBar: {\n      position: 'absolute',\n      zIndex: 100,\n      top: 0\n    },\n    loadingWrapper: {\n      position: 'absolute',\n      color: theme.palette.text.primary,\n      opacity: 0.5,\n      zIndex: 90,\n      textAlign: 'center',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    zoomOutFab: {\n      margin: theme.spacing(0.5),\n      padding: theme.spacing(0.5),\n      border: '2px solid',\n      borderRadius: theme.spacing(1),\n      background: theme.palette.common.white,\n      fontSize: 20,\n      position: 'absolute',\n      zIndex: 80,\n      bottom: theme.spacing(2),\n      right: theme.spacing(10)\n    },\n    selectedPopup: {\n      width: '90%',\n      maxWidth: 400,\n      zIndex: 100,\n      position: 'absolute',\n      bottom: theme.spacing(1),\n      left: '50%',\n      transformOrigin: '0% 50%',\n      transform: 'translateY(0%) translateX(-50%)'\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ZoomOutMapIcon from '@material-ui/icons/ZoomOutMap';\nimport ViewListIcon from '@material-ui/icons/ViewList';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport log from 'loglevel';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    listItemText: {\n      textAlign: 'center'\n    },\n    iconButton: {\n      background: theme.palette.grey[200]\n    },\n    compoundButton: {\n      textAlign: 'center'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ClusterSelected = function ClusterSelected(_ref) {\n  var seriesCount = _ref.seriesCount,\n      reducedPhotoCount = _ref.reducedPhotoCount,\n      actions = _ref.actions;\n  var classes = useStyles();\n  log.info('cluster selected', {\n    seriesCount: seriesCount,\n    reducedPhotoCount: reducedPhotoCount\n  });\n  return React.createElement(List, null, React.createElement(ListItem, {\n    className: classes.root\n  }, React.createElement(ListItemIcon, null, React.createElement(\"div\", {\n    className: classes.compoundButton\n  }, React.createElement(IconButton, {\n    onClick: actions.onZoomTo,\n    className: classes.iconButton\n  }, React.createElement(ZoomOutMapIcon, null)), React.createElement(Typography, {\n    variant: \"caption\",\n    component: \"div\"\n  }, \"Zoom In\"))), React.createElement(ListItemText, {\n    className: classes.listItemText,\n    onClick: actions.onZoomTo,\n    primary: \"\".concat(seriesCount, \" Photo series\"),\n    secondary: \"containing \".concat(reducedPhotoCount, \" individual photo\").concat(reducedPhotoCount === 1 ? '' : 's')\n  }), React.createElement(ListItemIcon, null, React.createElement(\"div\", {\n    className: classes.compoundButton\n  }, React.createElement(IconButton, {\n    onClick: actions.onViewList,\n    className: classes.iconButton\n  }, React.createElement(ViewListIcon, null)), React.createElement(Typography, {\n    variant: \"caption\",\n    component: \"div\"\n  }, \"List\")))));\n};\n\nClusterSelected.propTypes = {\n  seriesCount: PropTypes.number.isRequired,\n  reducedPhotoCount: PropTypes.number.isRequired,\n  actions: PropTypes.shape({\n    onZoomTo: PropTypes.func.isRequired,\n    onViewList: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired\n  })\n};\nexport default ClusterSelected;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport Avatar from '@material-ui/core/Avatar';\nimport Camera from '@material-ui/icons/Camera';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: theme.palette.primary.contrastText,\n      width: 150,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    rootActive: {\n      zIndex: 60\n    },\n    icon: {},\n    avatar: {\n      position: 'relative',\n      margin: '0 auto',\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      height: 40,\n      width: 40,\n      zIndex: 61,\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    avatarActive: {\n      background: '#FFFF00',\n      color: 'black',\n      border: \"2px solid black\"\n    },\n    badge: {\n      zIndex: 62,\n      color: theme.palette.secondary.contrastText,\n      background: theme.palette.secondary.main,\n      transform: 'scale(1) translate(30%, -30%)'\n    },\n    badgeActive: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    directionIndicator: {\n      position: 'absolute',\n      top: 20,\n      left: '50%',\n      zIndex: 59\n    },\n    name: {\n      color: 'white',\n      fontWeight: 'bold',\n      textShadow: \"\\n        0px 0px 4px #000000, \\n        0px 0px 4px #000000 \\n    \",\n      zIndex: 60,\n      position: 'relative'\n    },\n    nameActive: {\n      color: 'black',\n      textShadow: \"\\n    0px 0px 2px #FFFFFF, \\n    0px 0px 2px #FFFFFF,\\n    0px 0px 4px #FFFFFF \\n\"\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Single = function Single(_ref) {\n  var name = _ref.name,\n      onClick = _ref.onClick,\n      active = _ref.active,\n      photoCount = _ref.photoCount,\n      direction = _ref.direction;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, active ? classes.rootActive : null)\n  }, React.createElement(Badge, {\n    classes: {\n      badge: classNames(classes.badge, active ? classes.badgeActive : null)\n    },\n    badgeContent: photoCount\n  }, React.createElement(Avatar, {\n    className: classNames(classes.avatar, active ? classes.avatarActive : null),\n    onClick: onClick\n  }, React.createElement(Camera, {\n    className: classes.icon,\n    color: \"inherit\"\n  }))), direction && direction >= 0 ? React.createElement(\"div\", {\n    className: classes.directionIndicator\n  }, React.createElement(\"svg\", {\n    className: classes.svgArc,\n    version: \"1.1\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0, 0, 100, 100\",\n    style: {\n      transform: \"translateY(-50%) translateX(-50%) rotateZ(\".concat(direction, \"deg)\")\n    }\n  }, React.createElement(\"path\", {\n    d: \"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z\",\n    fill: \"#009DC1\",\n    fillOpacity: \"0.444\",\n    strokeWidth: \"1\",\n    strokeOpacity: \"0.6\",\n    stroke: \"#FFFFFF\"\n  }))) : null, React.createElement(Typography, {\n    variant: \"body1\",\n    className: classNames(classes.name, active ? classes.nameActive : null)\n  }, name));\n};\n\nSingle.propTypes = {\n  name: PropTypes.string,\n  photoCount: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n  direction: PropTypes.number,\n  active: PropTypes.bool\n};\nexport default Single;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport numeral from 'numeral';\n\nvar style = function style(theme) {\n  return {\n    avatar: {\n      background: theme.palette.grey[900],\n      border: \"2px solid \".concat(theme.palette.grey[100]),\n      color: theme.palette.grey[100]\n    },\n    avatarActive: {\n      background: '#FFFF00',\n      border: \"2px solid black\",\n      color: 'black',\n      zIndex: 50\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Cluster = function Cluster(_ref) {\n  var seriesCount = _ref.seriesCount,\n      active = _ref.active,\n      onClick = _ref.onClick;\n  var classes = useStyles();\n  return React.createElement(Avatar, {\n    onClick: onClick,\n    className: classNames(classes.avatar, active ? classes.avatarActive : null)\n  }, numeral(seriesCount).format('0,0'));\n};\n\nCluster.propTypes = {\n  seriesCount: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n  active: PropTypes.bool\n};\nexport default Cluster;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { FlyToInterpolator, LinearInterpolator, Marker } from 'react-map-gl';\nimport { easeCubic } from 'd3-ease';\nimport { bbox, featureCollection, buffer, point } from '@turf/turf';\nimport Paper from '@material-ui/core/Paper';\nimport { CircularProgress } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport { SearchInput } from '@morphoto/Search';\nimport { SeriesListItem, ViewListDialog } from '@morphoto/photoseries';\nimport BaseMap from './BaseMap';\nimport MapStyles from './mapStyles';\nimport useClusteredData from './lib/useClusteredData';\nimport style from './HomeMap.style';\nimport log from 'loglevel';\nimport ClusterSelected from './ClusterSelected';\nimport SingleMarker from './markers/Single';\nimport ClusterMarker from './markers/Cluster';\nimport themes from '@morphoto/themes';\nvar useStyles = makeStyles(style);\nvar defaultView = {\n  zoom: 4,\n  latitude: 44.629701,\n  longitude: -120.333379\n};\nvar SIZESCALE = 80;\n\nvar HomeMap = function HomeMap(_ref) {\n  var seriesList = _ref.seriesList,\n      initViewport = _ref.initViewport,\n      loading = _ref.loading,\n      initialActiveSeries = _ref.initialActiveSeries,\n      queryVersion = _ref.queryVersion,\n      actions = _ref.actions;\n\n  var _useState = useState({\n    viewport: _objectSpread({}, defaultView, {}, initViewport.viewport),\n    bounds: initViewport.bounds,\n    filterBounds: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      mapViewObj = _useState2[0],\n      setMapViewObj = _useState2[1];\n\n  var classes = useStyles();\n  var mapViewRef = useRef();\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isTransitioning = _useState4[0],\n      setIsTransitioning = _useState4[1];\n\n  var homeMapContainerRef = useRef();\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentZoom = _useState6[0],\n      setCurrentZoom = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showViewList = _useState8[0],\n      setShowViewList = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      transitions = _useState10[0],\n      setTransitions = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedItem = _useState12[0],\n      setSelectedItem = _useState12[1];\n\n  var _useClusteredData = useClusteredData(seriesList || [], mapViewObj.filterBounds, currentZoom, mapViewObj.viewport, SIZESCALE, queryVersion, isTransitioning),\n      filteredClusteredData = _useClusteredData.filteredClusteredData;\n\n  useEffect(function () {\n    if (!initialActiveSeries || !seriesList || selectedItem) return;\n\n    try {\n      var selected = seriesList.find(function (s) {\n        return s.id === initialActiveSeries;\n      });\n\n      if (selected && selected.coords) {\n        var bufferPts = buffer(point(selected.coords), 10, {\n          units: 'meters'\n        });\n        var bounds = bbox(bufferPts);\n        setMapViewObj(_objectSpread({}, mapViewObj, {\n          bounds: bounds\n        }));\n      }\n    } catch (e) {\n      log.error(e);\n    }\n  }, [seriesList]);\n  useEffect(function () {\n    if (!initialActiveSeries || !filteredClusteredData.single || selectedItem) return;\n\n    try {\n      var selected = filteredClusteredData.single.find(function (s) {\n        return s.properties.id === initialActiveSeries;\n      });\n      if (selected && homeMapContainerRef.current) setSelectedItem(selected);\n    } catch (e) {\n      log.error(e);\n    }\n  }, [filteredClusteredData.single]);\n\n  var saveMap = function saveMap(delay) {\n    var _ref2 = mapViewRef.current ? mapViewRef.current : mapViewObj.viewport,\n        transitionDuration = _ref2.transitionDuration,\n        transitionInterpolator = _ref2.transitionInterpolator,\n        transitionInterruption = _ref2.transitionInterruption,\n        maxZoom = _ref2.maxZoom,\n        minZoom = _ref2.minZoom,\n        maxPitch = _ref2.maxPitch,\n        minPitch = _ref2.minPitch,\n        newView = _objectWithoutProperties(_ref2, [\"transitionDuration\", \"transitionInterpolator\", \"transitionInterruption\", \"maxZoom\", \"minZoom\", \"maxPitch\", \"minPitch\"]);\n\n    var saveObj = {\n      viewport: newView\n    };\n    if (!delay) actions.pushMapHistory(saveObj);else {\n      setTimeout(function () {\n        return actions.pushMapHistory(saveObj);\n      }, delay);\n    }\n  };\n\n  var updateSelectedItem = function updateSelectedItem(item) {\n    setSelectedItem(item);\n    if (item && item.properties.count === 1) actions.onSeriesMapSelect(item.properties.id);else actions.onSeriesMapSelect();\n    saveMap();\n  };\n\n  var _onZoomTo = function onZoomTo(object) {\n    try {\n      var pts = featureCollection(object.properties.points);\n      var bounds = bbox(pts);\n\n      if (bounds[0] === bounds[2] && bounds[1] === bounds[3]) {\n        var paddedPoint = buffer(point([bounds[0], bounds[1]]), 10, {\n          units: 'meters'\n        });\n        bounds = bbox(paddedPoint);\n      }\n\n      var lngBuff = (bounds[2] - bounds[0]) * 0.2;\n      var latBuff = (bounds[3] - bounds[1]) * 0.2;\n      var buffBounds = [bounds[0] - lngBuff, bounds[1] - latBuff, bounds[2] + lngBuff, bounds[3] + latBuff];\n      setTransitions({\n        transitionDuration: 2000,\n        transitionInterpolator: new FlyToInterpolator(),\n        transitionEasing: easeCubic\n      });\n      setMapViewObj(_objectSpread({}, mapViewObj, {\n        bounds: buffBounds\n      }));\n      if (object.properties.count > 1) setTimeout(function () {\n        return updateSelectedItem(null);\n      }, 2000);\n    } catch (e) {\n      log.error(e);\n    }\n  };\n\n  var onViewportChange = function onViewportChange(_ref3) {\n    var viewport = _ref3.viewport,\n        map = _ref3.map;\n    mapViewRef.current = viewport;\n    var viewZoom = Math.floor(viewport.zoom);\n\n    if (!isTransitioning && map && map.getBounds) {\n      var _map$getBounds = map.getBounds(),\n          _map$getBounds$_sw = _map$getBounds._sw,\n          minLng = _map$getBounds$_sw.lng,\n          minLat = _map$getBounds$_sw.lat,\n          _map$getBounds$_ne = _map$getBounds._ne,\n          maxLng = _map$getBounds$_ne.lng,\n          maxLat = _map$getBounds$_ne.lat;\n\n      var _ref4 = mapViewObj.filterBounds || [minLng, minLat, maxLng, maxLat],\n          _ref5 = _slicedToArray(_ref4, 4),\n          oldMinLng = _ref5[0],\n          oldMinLat = _ref5[1],\n          oldMaxLng = _ref5[2],\n          oldMaxLat = _ref5[3];\n\n      if (viewZoom !== currentZoom || oldMinLng >= minLng || oldMinLat >= minLat || oldMaxLng <= maxLng || oldMaxLat <= maxLat) {\n        var filterBounds = [minLng - (maxLng - minLng) / 2, minLat - (maxLat - minLat) / 2, maxLng + (maxLng - minLng) / 2, maxLat + (maxLat - minLat) / 2];\n        setMapViewObj(_objectSpread({}, mapViewObj, {\n          filterBounds: filterBounds\n        }));\n      }\n    }\n\n    if (viewZoom !== currentZoom) {\n      setCurrentZoom(viewZoom);\n    }\n  };\n\n  var lock = {};\n\n  var onMarkerClick = function onMarkerClick(obj) {\n    if (selectedItem && selectedItem.properties.id === obj.properties.id) {\n      _onZoomTo(selectedItem);\n    } else {\n      setTransitions({\n        transitionDuration: 500,\n        transitionInterpolator: new LinearInterpolator(),\n        transitionEasing: easeCubic\n      });\n      setMapViewObj({\n        viewport: {\n          longitude: obj.geometry.coordinates[0],\n          latitude: obj.geometry.coordinates[1]\n        }\n      });\n    }\n\n    updateSelectedItem(obj);\n  };\n\n  var markersRendered = useMemo(function () {\n    return [].concat(_toConsumableArray(filteredClusteredData.single.filter(function (obj) {\n      return !isTransitioning || selectedItem && selectedItem.properties.id === obj.properties.id;\n    }).map(function (obj) {\n      return React.createElement(Marker, {\n        className: 'singleMarker',\n        key: \"single-\".concat(obj.properties.id),\n        latitude: obj.geometry.coordinates[1],\n        longitude: obj.geometry.coordinates[0],\n        offsetLeft: 0,\n        offsetTop: -20\n      }, React.createElement(ThemeProvider, {\n        theme: themes.access[obj.properties.access]\n      }, React.createElement(SingleMarker, {\n        name: obj.properties.name,\n        photoCount: obj.properties.photoCount,\n        onClick: function onClick() {\n          return onMarkerClick(obj);\n        },\n        direction: currentZoom > 10 && obj.properties.direction ? obj.properties.direction : null,\n        active: selectedItem && selectedItem.properties.id === obj.properties.id\n      })));\n    })), _toConsumableArray(filteredClusteredData.cluster.filter(function (obj) {\n      return !isTransitioning || selectedItem && selectedItem.properties.id === obj.properties.id && selectedItem.properties.count === obj.properties.count;\n    }).map(function (obj) {\n      return React.createElement(Marker, {\n        className: \"clusterMarker\",\n        key: \"cluster-\".concat(obj.properties.id),\n        latitude: obj.geometry.coordinates[1],\n        longitude: obj.geometry.coordinates[0],\n        offsetLeft: -20,\n        offsetTop: -20\n      }, React.createElement(ClusterMarker, {\n        seriesCount: obj.properties.count,\n        photoCount: obj.properties.reducedPhotoCount,\n        onClick: function onClick() {\n          return onMarkerClick(obj);\n        },\n        active: selectedItem && selectedItem.properties.id === obj.properties.id && selectedItem.properties.count === obj.properties.count\n      }));\n    })));\n  }, [filteredClusteredData, selectedItem, isTransitioning]);\n  var selectedItemRender = useMemo(function () {\n    return !!selectedItem && React.createElement(Paper, {\n      className: classes.selectedPopup\n    }, selectedItem.properties.count === 1 ? React.createElement(SeriesListItem, {\n      series: selectedItem.properties,\n      showCreatedOn: true,\n      showLastPhoto: true,\n      onClick: function onClick() {\n        return actions.onSeriesNavigate(selectedItem.properties.id);\n      }\n    }) : React.createElement(ClusterSelected, {\n      seriesCount: selectedItem.properties.count,\n      reducedPhotoCount: selectedItem.properties.reducedPhotoCount,\n      actions: {\n        onViewList: function onViewList() {\n          return setShowViewList(true);\n        },\n        onClose: function onClose() {\n          return updateSelectedItem(null);\n        },\n        onZoomTo: function onZoomTo() {\n          return _onZoomTo(selectedItem);\n        }\n      }\n    }));\n  }, [selectedItem]);\n  return React.createElement(\"div\", {\n    className: classes.root,\n    ref: homeMapContainerRef\n  }, React.createElement(TopBarWrapper, {\n    isTransparent: true\n  }, React.createElement(SearchInput, {\n    isTransparent: true,\n    onClick: actions.onSearchClick,\n    defaultValue: ''\n  })), loading && React.createElement(\"div\", {\n    className: classes.loadingWrapper\n  }, React.createElement(CircularProgress, {\n    size: 80,\n    thickness: 7,\n    color: \"inherit\"\n  })), React.createElement(BaseMap, _extends({\n    showMe: true,\n    viewport: mapViewObj.viewport,\n    transitions: transitions,\n    mapStyles: MapStyles,\n    controlPadding: {\n      top: 56\n    },\n    initStyle: MapStyles.length > 1 ? 0 : 1\n  }, lock, {\n    onTransitionStart: function onTransitionStart() {\n      setIsTransitioning(true);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      setIsTransitioning(false);\n      setTransitions(null);\n    },\n    bounds: mapViewObj.bounds,\n    maxZoom: 20,\n    minZoom: 1,\n    onViewportChange: onViewportChange,\n    onNativeClick: function onNativeClick() {\n      if (selectedItem) updateSelectedItem(null);\n    }\n  }), markersRendered), selectedItem && selectedItem.properties.count > 1 && React.createElement(ViewListDialog, {\n    open: showViewList,\n    title: \"\".concat(selectedItem.properties.count, \" Series\"),\n    onClose: function onClose() {\n      return setShowViewList(false);\n    },\n    onSelect: actions.onSeriesNavigate,\n    seriesList: selectedItem.properties.points.map(function (p) {\n      return p.properties;\n    })\n  }), selectedItemRender);\n};\n\nHomeMap.propTypes = {\n  seriesList: PropTypes.array,\n  queryVersion: PropTypes.number,\n  initialActiveSeries: PropTypes.string,\n  initViewport: PropTypes.object,\n  loading: PropTypes.bool,\n  actions: PropTypes.shape({\n    onSearchClick: PropTypes.func,\n    onSeriesNavigate: PropTypes.func,\n    onSeriesMapSelect: PropTypes.func,\n    popMapHistory: PropTypes.func,\n    pushMapHistory: PropTypes.func,\n    clearMapHistory: PropTypes.func\n  })\n};\nexport default HomeMap;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo } from 'react';\nimport { StaticMap } from 'react-map-gl';\nimport PropTypes from 'prop-types';\nimport { getDistanceScales } from 'viewport-mercator-project';\nimport StyleButtons from './controls/StyleButtons';\nimport { useComponentSize, config } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport mapStyles from './mapStyles';\nimport log from 'loglevel';\nimport classNames from 'classnames';\nvar useStyles = makeStyles(require('./BaseMap.style').default);\n\nvar BaseStaticMap = function BaseStaticMap(props) {\n  var classes = useStyles();\n\n  var className = props.className,\n      controlPadding = props.controlPadding,\n      viewport = props.viewport,\n      children = props.children,\n      mapStyles = props.mapStyles,\n      onMapDataEvent = props.onMapDataEvent,\n      passthroughProps = _objectWithoutProperties(props, [\"className\", \"controlPadding\", \"viewport\", \"children\", \"mapStyles\", \"onMapDataEvent\"]);\n\n  var mapRef = useRef(null);\n  var mapBoxRef = useRef();\n\n  var _useComponentSize = useComponentSize(mapRef, {\n    width: 100,\n    height: 50\n  }),\n      size = _useComponentSize.size;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      currStyle = _useState2[0],\n      setCurrStyle = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      projection = _useState4[0],\n      setProjection = _useState4[1];\n\n  var recalcProjection = function recalcProjection() {\n    if (!size || size.width < 10 || size.height < 10) return;\n\n    try {\n      var _projection = getDistanceScales(viewport);\n\n      setProjection(_projection);\n    } catch (e) {\n      log.warn('recalcZoomBounds', e);\n    }\n  };\n\n  if (!projection) recalcProjection();\n  useMemo(recalcProjection, [size]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.baseStaticMap, className),\n    ref: mapRef,\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, React.createElement(StaticMap, _extends({}, viewport, {\n    height: size.height,\n    width: size.width,\n    mapStyle: mapStyles[currStyle].style,\n    onData: onMapDataEvent,\n    mapboxApiAccessToken: config.mapConfig.mapBoxToken\n  }, passthroughProps, {\n    ref: function ref(map) {\n      mapBoxRef.current = map;\n    }\n  }), mapStyles && mapStyles.length > 1 ? React.createElement(StyleButtons, {\n    controlPadding: controlPadding,\n    currStyle: currStyle,\n    mapStyles: mapStyles,\n    setCurrStyle: setCurrStyle\n  }) : null, children && Array.isArray(children) ? children.map(function (c) {\n    return handleChild(c, mapBoxRef, size.height, size.width, projection);\n  }) : handleChild(children, mapBoxRef, size.height, size.width, projection)));\n};\n\nfunction handleChild(child, mapBoxRef, height, width, projection) {\n  var viewport = {};\n  return typeof child === 'function' ? child(viewport, height, width, projection) : child;\n}\n\nBaseStaticMap.propTypes = {\n  children: PropTypes.any,\n  deckelements: PropTypes.array,\n  data: PropTypes.array,\n  controlPadding: PropTypes.object,\n  minPitch: PropTypes.number,\n  maxPitch: PropTypes.number,\n  pitch: PropTypes.number,\n  className: PropTypes.string,\n  viewport: PropTypes.object,\n  bounds: PropTypes.array,\n  zoomBounds: PropTypes.array,\n  InnerBounds: PropTypes.array,\n  mapStyles: PropTypes.array,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  zoom: PropTypes.number,\n  onMapDataEvent: PropTypes.func\n};\nBaseStaticMap.defaultProps = {\n  controlPadding: {},\n  stylechooser: true,\n  initStyle: 0,\n  mapStyles: mapStyles\n};\nexport default BaseStaticMap;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: theme.palette.primary.main,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      zIndex: 1\n    },\n    rootActive: {\n      zIndex: 60\n    },\n    svgDot: {\n      zIndex: 61,\n      width: 20,\n      height: 20,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    dot: {\n      stroke: theme.palette.secondary.contrastText,\n      strokeWidth: '1',\n      fill: theme.palette.secondary.main\n    },\n    directionIndicator: {\n      position: 'absolute',\n      left: '50%',\n      zIndex: 59\n    },\n    name: {\n      color: 'white',\n      fontWeight: 'bold',\n      textShadow: \"\\n        0px 0px 4px #000000, \\n        0px 0px 4px #000000 \\n    \",\n      zIndex: 60,\n      position: 'relative'\n    },\n    nameActive: {\n      color: theme.palette.secondary.dark,\n      textShadow: \"\\n    0px 0px 2px #FFFFFF, \\n    0px 0px 2px #FFFFFF,\\n    0px 0px 4px #FFFFFF \\n\"\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Single = function Single(_ref) {\n  var direction = _ref.direction;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"svg\", {\n    className: classes.svgDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 10, 10\"\n  }, React.createElement(\"circle\", {\n    cx: \"5\",\n    cy: \"5\",\n    r: \"4\",\n    className: classes.dot\n  })), direction && direction >= 0 ? React.createElement(\"div\", {\n    className: classes.directionIndicator\n  }, React.createElement(\"svg\", {\n    className: classes.svgArc,\n    version: \"1.1\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0, 0, 100, 100\",\n    style: {\n      transform: \"translateY(-50%) translateX(-50%) rotateZ(\".concat(direction, \"deg)\")\n    }\n  }, React.createElement(\"path\", {\n    d: \"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z\",\n    fill: \"#009DC1\",\n    fillOpacity: \"0.444\",\n    strokeWidth: \"0.5\",\n    strokeOpacity: \"0.6\",\n    stroke: \"#FFFFFF\"\n  }))) : null);\n};\n\nSingle.propTypes = {\n  direction: PropTypes.number\n};\nexport default Single;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Marker } from 'react-map-gl';\nimport BaseMap from './BaseMap';\nimport Dot from './markers/Dot';\nimport BaseStaticMap from './BaseStaticMap';\n\nvar MapDot = function MapDot(_ref) {\n  var staticMap = _ref.staticMap,\n      editable = _ref.editable,\n      latitude = _ref.latitude,\n      longitude = _ref.longitude,\n      onChange = _ref.onChange,\n      direction = _ref.direction,\n      props = _objectWithoutProperties(_ref, [\"staticMap\", \"editable\", \"latitude\", \"longitude\", \"onChange\", \"direction\"]);\n\n  var Map = staticMap ? BaseStaticMap : BaseMap;\n  var mapProps = staticMap ? {} : {\n    touchRotate: false,\n    dragRotate: false,\n    showMe: editable,\n    lockPan: !editable,\n    onViewportChange: onChange\n  };\n  return React.createElement(Map, _extends({}, mapProps, props), latitude && longitude ? React.createElement(Marker, {\n    className: 'singleMarker',\n    latitude: latitude,\n    longitude: longitude\n  }, React.createElement(Dot, {\n    direction: direction\n  })) : React.createElement(Dot, {\n    direction: direction\n  }));\n};\n\nMapDot.propTypes = {\n  direction: PropTypes.number,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  editable: PropTypes.bool,\n  staticMap: PropTypes.bool,\n  onChange: PropTypes.func\n};\nexport default MapDot;","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    rectContents: {\n      color: theme.palette.common.white,\n      textShadow: \"5px 6px 6px \".concat(theme.palette.common.black),\n      position: 'absolute',\n      padding: theme.spacing(2),\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    areaLabel: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      transform: 'translateY(-110%)'\n    },\n    rectContentsDownloading: {\n      textShadow: 'none',\n      color: theme.palette.primary.contrastText\n    },\n    rectIcon: {\n      position: 'absolute',\n      opacity: 0.4,\n      width: '50%',\n      height: '50%',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    tooBig: {\n      color: theme.palette.error.contrastText\n    },\n    tickText: {},\n    svgRect: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: -1,\n      height: '100%',\n      width: '100%'\n    },\n    svgCutout: {\n      stroke: 'none',\n      fill: '#00000099'\n    },\n    svgBorder: {\n      fill: 'none',\n      stroke: 'none'\n    },\n    svgBorderNavigating: {\n      stroke: '#44444499'\n    },\n    svgBorderLocked: {\n      fill: '#66666666',\n      stroke: '#44444499'\n    },\n    svgBorderTooBig: {\n      opacity: 0.5,\n      fill: theme.palette.error.main,\n      stroke: theme.palette.error.dark\n    },\n    svgBorderDownloading: {\n      opacity: 0.7,\n      fill: theme.palette.primary.main,\n      stroke: '#44444499'\n    },\n    downloadingProgress: {},\n    downloadingProgressCircle: {\n      margin: theme.spacing(2)\n    },\n    snackError: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    mapWrapper: {\n      flex: '1 1',\n      overflow: 'hidden',\n      position: 'relative'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef, useState, useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport AppBar from '@material-ui/core/AppBar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport LockIcon from '@material-ui/icons/Lock';\nimport SignalWifiOffIcon from '@material-ui/icons/SignalWifiOff';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { Button } from '@material-ui/core';\nimport { config } from '@morphoto/client-common';\nimport numeral from 'numeral';\nimport { util } from '@morphoto/common';\nimport BaseMap from './BaseMap';\nimport useStyles from './OfflineMap.style';\nexport var OFFLINE_STATES = {\n  LOCKED: 'Locked',\n  OFFLINE: 'Offline',\n  NAVIGATING: 'Navigating',\n  ERROR: 'Error',\n  DOWNLOADING: 'Downloading',\n  CANCELED: 'Canceled'\n};\n\nvar OfflineMap = function OfflineMap(_ref) {\n  var initViewport = _ref.initViewport,\n      progress = _ref.progress,\n      toolState = _ref.toolState,\n      actions = _ref.actions;\n  var classes = useStyles();\n  var mapWrapperRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      bounds = _useState2[0],\n      setBounds = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewState = _useState4[0],\n      setViewport = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      area = _useState6[0],\n      setArea = _useState6[1];\n\n  var tooBig = area > config.home.Offline.maxMapTileArea;\n\n  var classWithState = function classWithState(name) {\n    if (!toolState) return classes[name];else return classNames(classes[name], classes[\"\".concat(name).concat(toolState)], tooBig ? classes[\"\".concat(name, \"TooBig\")] : null);\n  };\n\n  var setGeoState = useCallback(util.debounce(function (newViewport, projection, rectSide) {\n    if (!mapWrapperRef.current) return;\n    var longitude = newViewport.longitude,\n        latitude = newViewport.latitude;\n    var newArea = projection ? Math.abs(projection.metersPerPixel[0] * rectSide * projection.metersPerPixel[1] * rectSide / (1000 * 1000)) : 0;\n    var dx = rectSide / 2 * projection.degreesPerPixel[0];\n    var dy = rectSide / 2 * projection.degreesPerPixel[1];\n    var newBounds = [longitude - dx, latitude - dy, longitude + dx, latitude + dy];\n    if (newArea !== area) setArea(newArea);\n    if (newBounds !== bounds) setBounds(newBounds);\n    setViewport(newViewport);\n  }, 500), []);\n  var snack = null;\n\n  var onSnackClose = function onSnackClose() {};\n\n  var snackTimeout = null;\n\n  switch (toolState) {\n    case OFFLINE_STATES.NAVIGATING:\n      snack = tooBig ? null : React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Place the square around the area you wish to download for later use',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"inherit\",\n          disabled: area > config.home.Offline.maxMapTileArea,\n          onClick: function onClick() {\n            return actions.onStartDownload(bounds, viewState);\n          }\n        }, \"Start Download\")]\n      });\n      break;\n\n    case OFFLINE_STATES.DOWNLOADING:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Downloading...',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"inherit\",\n          onClick: actions.onCancel\n        }, \"Cancel\")]\n      });\n      break;\n\n    case OFFLINE_STATES.LOCKED:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'This is the area you downloaded last',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"secondary\",\n          onClick: actions.onUnlock\n        }, \"Download a new Area\")]\n      });\n      break;\n\n    case OFFLINE_STATES.OFFLINE:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'You cannot download content when you are offline.'\n      });\n      break;\n\n    case OFFLINE_STATES.CANCELED:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snackError,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Cancelling...'\n      });\n      onSnackClose = actions.onCancelComplete;\n      snackTimeout = 2000;\n      break;\n\n    default:\n      break;\n  }\n\n  var unlocked = toolState === OFFLINE_STATES.NAVIGATING;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: actions.onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Offline data manager\"))), React.createElement(\"div\", {\n    className: classes.mapWrapper,\n    ref: mapWrapperRef\n  }, React.createElement(BaseMap, {\n    hideNavControls: true,\n    showMe: unlocked,\n    dragPan: unlocked,\n    dragRotate: false,\n    scrollZoom: unlocked,\n    doubleClickZoom: false,\n    touchZoom: unlocked,\n    touchRotate: false,\n    viewport: initViewport\n  }, function (viewport, height, width, projection) {\n    var rectSide = Math.min(height, width) * 0.6;\n    var rectStyle = {\n      height: rectSide,\n      width: rectSide\n    };\n    var boxCorners = {\n      x: width / 2 - rectSide / 2,\n      y: height / 2 - rectSide / 2\n    };\n    var totalProgress = progress.tileTick && progress.seriesTick && progress.seriesPhotoTick ? [progress.tileTick[0] + progress.seriesTick[0] + progress.seriesPhotoTick[0], progress.tileTick[1] + progress.seriesTick[1] + progress.seriesPhotoTick[1]] : [0, 1];\n    if (totalProgress[1] === 0) totalProgress[1] = 1;\n    setGeoState(viewport, projection, rectSide);\n    return React.createElement(\"div\", {\n      style: {\n        height: height,\n        width: width\n      }\n    }, React.createElement(\"div\", {\n      className: classWithState('rectContents'),\n      style: rectStyle\n    }, toolState !== OFFLINE_STATES.DOWNLOADING && React.createElement(Typography, {\n      className: classNames(classes.areaLabel, tooBig ? classes.tooBig : null),\n      color: \"inherit\",\n      variant: \"h5\",\n      component: \"div\"\n    }, numeral(area).format('0,0'), \" km\\xB2\"), toolState === OFFLINE_STATES.NAVIGATING && !tooBig && React.createElement(CheckCircleOutlineIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\",\n      onClick: function onClick() {\n        return actions.onStartDownload(bounds, viewState);\n      }\n    }), toolState === OFFLINE_STATES.NAVIGATING && tooBig ? React.createElement(\"div\", null, React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"> \", config.home.Offline.maxMapTileArea, \" km\\xB2\"), React.createElement(ErrorIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    }), React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body2\",\n      component: \"div\"\n    }, \"Window too big. Try zooming in.\")) : null, toolState === OFFLINE_STATES.DOWNLOADING && React.createElement(\"div\", {\n      className: classes.downloadingProgress\n    }, React.createElement(Typography, {\n      className: \"areaLabel\",\n      color: \"inherit\",\n      variant: \"h5\"\n    }, \"Downloading...\"), React.createElement(CircularProgress, {\n      className: classes.downloadingProgressCircle,\n      variant: \"determinate\",\n      size: rectSide * 0.4,\n      thickness: rectSide * 0.013,\n      value: Math.floor(100 * totalProgress[0] / totalProgress[1]),\n      color: \"inherit\"\n    }), progress.tileTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Map Tiles: \", progress.tileTick[0], \" of \", progress.tileTick[1]), progress.seriesTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Series: \", progress.seriesTick[0], \" of \", progress.seriesTick[1]), progress.seriesPhotoTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Series Photos: \", progress.seriesPhotoTick[0], \" of \", progress.seriesPhotoTick[1])), toolState === OFFLINE_STATES.LOCKED && React.createElement(\"div\", null, React.createElement(LockIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    })), toolState === OFFLINE_STATES.OFFLINE && React.createElement(\"div\", null, React.createElement(SignalWifiOffIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    }))), React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        height: height,\n        width: width\n      }\n    }, React.createElement(\"defs\", null, React.createElement(\"path\", {\n      id: \"Triangle\",\n      d: \"M 16,0 L -8,9 v-18 z\",\n      fill: \"black\",\n      stroke: \"none\"\n    })), React.createElement(\"g\", {\n      fillRule: \"evenodd\",\n      className: classWithState('svgCutout')\n    }, React.createElement(\"path\", {\n      d: \"\\n                            M 0 0 L \".concat(width, \" \", 0, \" L \").concat(width, \" \").concat(height, \"  L \", 0, \" \").concat(height, \" Z\\n                             M \").concat(boxCorners.x, \" \").concat(boxCorners.y, \" \\n                             L \").concat(width - boxCorners.x, \" \").concat(boxCorners.y, \"\\n                             L \").concat(width - boxCorners.x, \" \").concat(height - boxCorners.y, \" \\n                             L \").concat(boxCorners.x, \" \").concat(height - boxCorners.y, \" Z\\n                             \")\n    })), React.createElement(\"g\", {\n      fillRule: \"evenodd\",\n      className: classWithState('svgBorder')\n    }, React.createElement(\"path\", {\n      d: \"\\n                             M \".concat(boxCorners.x, \" \").concat(boxCorners.y, \" \\n                             L \").concat(width - boxCorners.x, \" \").concat(boxCorners.y, \"\\n                             L \").concat(width - boxCorners.x, \" \").concat(height - boxCorners.y, \" \\n                             L \").concat(boxCorners.x, \" \").concat(height - boxCorners.y, \" Z\\n                             \")\n    }))));\n  }), snack && React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: true,\n    onClose: onSnackClose,\n    autoHideDuration: snackTimeout\n  }, snack)));\n};\n\nOfflineMap.propTypes = {\n  toolState: PropTypes.oneOf(Object.values(OFFLINE_STATES)),\n  initViewport: PropTypes.object,\n  progress: PropTypes.shape({\n    tileTick: PropTypes.array,\n    seriesTick: PropTypes.array,\n    seriesPhotoTick: PropTypes.array\n  }),\n  actions: PropTypes.shape({\n    onMenuBack: PropTypes.func.isRequired,\n    onStartDownload: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onCancelComplete: PropTypes.func.isRequired,\n    onUnlock: PropTypes.func.isRequired\n  })\n};\nexport default OfflineMap;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Slider from '@material-ui/core/Slider';\nimport MapDot from './MapDot';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dlgContent: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 0\n    },\n    mapWrapper: {\n      flexGrow: 1\n    },\n    sliderWrapper: {\n      padding: '20px'\n    },\n    slider: {},\n    sliderRoot: {},\n    body: {\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      margin: 0,\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MapDirPicker = function MapDirPicker(_ref) {\n  var open = _ref.open,\n      onOk = _ref.onOk,\n      onCancel = _ref.onCancel,\n      title = _ref.title,\n      initLat = _ref.latitude,\n      initLong = _ref.longitude,\n      initDir = _ref.direction;\n  var classes = useStyles();\n\n  var _useState = useState({\n    longitude: initLong,\n    latitude: initLat\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      longitude = _useState2$.longitude,\n      latitude = _useState2$.latitude,\n      setCoords = _useState2[1];\n\n  var _useState3 = useState(initDir),\n      _useState4 = _slicedToArray(_useState3, 2),\n      direction = _useState4[0],\n      setRotation = _useState4[1];\n\n  var initViewport = useMemo(function () {\n    return {\n      zoom: 18,\n      latitude: initLat,\n      longitude: initLong\n    };\n  }, [initLat, initLong]);\n\n  var mapChange = function mapChange(_ref2) {\n    var _ref2$viewport = _ref2.viewport,\n        longitude = _ref2$viewport.longitude,\n        latitude = _ref2$viewport.latitude;\n    return setCoords({\n      longitude: longitude,\n      latitude: latitude\n    });\n  };\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    fullScreen: true,\n    onClose: onCancel\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    color: \"inherit\"\n  }, title)), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(\"div\", {\n    className: classes.mapWrapper\n  }, React.createElement(MapDot, {\n    editable: true,\n    className: classes.map,\n    direction: direction > 0 ? direction : null,\n    viewport: initViewport,\n    onChange: mapChange\n  })), React.createElement(\"div\", {\n    className: classes.sliderWrapper\n  }, React.createElement(FormLabel, {\n    className: classes.mapFormLabel\n  }, \"Direction \", direction > -1 ? '' : '(off)'), React.createElement(Slider, {\n    classes: {\n      root: classes.sliderRoot\n    },\n    value: direction || -1,\n    min: -1,\n    max: 360,\n    step: 1,\n    onChange: function onChange(e, value) {\n      return setRotation(value);\n    }\n  }))), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onCancel\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk({\n        coords: [longitude, latitude],\n        direction: direction\n      });\n    }\n  }, \"Ok\")));\n};\n\nMapDirPicker.propTypes = {\n  open: PropTypes.bool,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  direction: PropTypes.number,\n  onOk: PropTypes.func,\n  onCancel: PropTypes.func,\n  title: PropTypes.string\n};\nexport default MapDirPicker;","export { default as HomeMap } from './HomeMap';\nexport { default as BaseMap } from './BaseMap';\nexport { default as BaseStaticMap } from './BaseStaticMap';\nexport { default as MapDot } from './MapDot';\nexport { default as OfflineMap, OFFLINE_STATES } from './OfflineMap';\nexport { default as MapDirPicker } from './MapDirPicker';\nexport { default as ClusterSelected } from './ClusterSelected';"],"sourceRoot":""}