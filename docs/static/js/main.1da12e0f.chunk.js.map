{"version":3,"sources":["../../components/slideshow/dist/index.js","../../components/swipeshow/dist/index.js","../../components/photoseries/dist/UserListItem.js","../../components/photoseries/dist/contexts.js","../../components/photoseries/dist/views/SeriesInfo.js","../../components/photoseries/dist/views/SeriesInfo.style.js","../../components/photoseries/dist/SeriesView.style.js","../../components/photoseries/dist/views/SeriesView.js","../../components/photoseries/dist/views/SeriesEditInner.js","../../components/photoseries/dist/views/SeriesEditInner.style.js","../../components/photoseries/dist/views/SeriesEdit.js","../../components/photoseries/dist/views/SeriesEdit.style.js","../../components/photoseries/dist/views/PhotoInfoInner.js","../../components/photoseries/dist/views/PhotoInfo.js","../../components/photoseries/dist/views/PhotoViewTool.js","../../components/photoseries/dist/views/PhotoViewTool.style.js","../../components/photoseries/dist/views/NewPhotoInfo.js","../../components/photoseries/dist/views/NewPhotoInfo.style.js","../../components/photoseries/dist/views/PhotoReviewTool.js","../../components/photoseries/dist/views/PhotoReviewTool.style.js","../../components/photoseries/dist/views/NewPhoto.js","../../components/photoseries/dist/SeriesNotFound.js","../../components/photoseries/dist/SeriesLoading.js","../../components/photoseries/dist/PhotoSeries.js","../../components/photoseries/dist/SeriesList.js","../../components/photoseries/dist/SeriesList.style.js","../../components/photoseries/dist/SeriesListItem.js","../../components/photoseries/dist/ViewListDialog.js","../../components/photoseries/dist/index.js","../../icons/dist/BDA.js","../../icons/dist/AppLogoSimple.js","../../icons/dist/QRCode.js","../../icons/dist/Apple.js","../../icons/dist/index.js","../../components/navigation/dist/TopBar.js","../../components/navigation/dist/SideDrawer.js","../../components/navigation/dist/TopBarWrapper.js","../../components/navigation/dist/OfflineBar.js","../../components/navigation/dist/BottomBar.js","../../components/navigation/dist/index.js","../../components/tags/dist/TagChip.js","../../components/tags/dist/TagControl.style.js","../../components/tags/dist/TagControl.js","../../components/tags/dist/TagEdit.js","../../components/tags/dist/TagView.js","../../components/tags/dist/XYTagChip.style.js","../../components/tags/dist/XYTagChip.js","../../components/tags/dist/XYTagSelect.js","../../components/tags/dist/XYTagSelect.style.js","../../components/tags/dist/XYTagChooser.style.js","../../components/tags/dist/XYTagChooser.js","../../components/tags/dist/useXYTags.js","../../components/tags/dist/index.js","../../client-mock/dist/LoadFakeData.js","../../client-mock/dist/withContext.js","../../components/client-auth/dist/useAuthCommon.js","../../components/client-auth/dist/AuthContainer.js","../../components/client-auth/dist/auth.style.js","../../components/client-auth/dist/SignIn.js","../../components/client-auth/dist/PasswordHelper.js","../../components/client-auth/dist/SignUp.js","../../components/client-auth/dist/ConfirmSignIn.js","../../components/client-auth/dist/CheckemailMsg.js","../../components/client-auth/dist/ConfirmSignUp.js","../../components/client-auth/dist/ForgotPassword.js","../../components/client-auth/dist/Loading.js","../../components/client-auth/dist/RequireNewPassword.js","../../components/client-auth/dist/VerifyContact.js","../../client-mock/dist/index.js","../../components/client-auth/dist/auth.fixture.js","../../components/client-auth/dist/useAuthentication.js","../../components/client-auth/dist/index.js","../../components/feed/dist/MyFeed.js","../../components/feed/dist/FeedEnder.js","../../components/camera/dist/CameraTool.js","../../components/camera/dist/CameraTool.style.js","../../components/camera/dist/QRUtil.js","../../components/camera/dist/QRReader.js","../../components/camera/dist/QRDisplay.js","../../components/camera/dist/index.js","../../datastore/dist/index.js","../../components/pwainstall/dist/InstallPrompt.js","../../components/pwainstall/dist/useShowAddToHome.js","connectors/Error.connect.js","translations.js","../../components/home/dist/Home.js","../../components/home/dist/index.js","connectors/withUploadConnect.js","connectors/withSeriesConnect.js","connectors/withHomeMap.js","connectors/withSearchConnect.js","connectors/withProfileConnect.js","connectors/withFeedConnect.js","connectors/withOfflineData.js","../../components/feed/dist/index.js","../../components/profile/dist/index.js","App.jsx","connectors/App.connect.js","serviceWorker.js","index.js","../../datastore/dist/redux/reducers/map.js","../../datastore/dist/redux/reducers/home.js","../../datastore/dist/redux/reducers/uploader.js","../../datastore/dist/redux/reducers/flags.js","../../datastore/dist/redux/reducers/offline.js","../../datastore/dist/redux/reducers/index.js","../../datastore/dist/redux/storeConfig.js","../../datastore/dist/redux/withReduxProvider.js","../../components/search/dist/SearchContextItem.js","../../components/search/dist/SearchContextResults.js","../../components/search/dist/SearchEnder.js","../../components/search/dist/SearchResults.js","../../components/search/dist/SearchPlaceholder.js","../../components/search/dist/Search.js","../../components/slideshow/dist/Slideshow.js","../../components/slideshow/dist/Slideshow.style.js","../../components/profile/dist/MeCard.js","../../components/profile/dist/MyProfile.js","../../components/swipeshow/dist/SwipeShow.js","../../components/swipeshow/dist/SwipeShow.style.js","../../../packages/common/dist/index.js","../../icons/dist/AppLogo.js","../../components/search/dist/SearchInput.js","../../components/feed/dist/FeedItem.js","../../components/search/dist/index.js","../../../packages/mock/dist/random.js","../../datastore/dist/graphql/mutations/createSeries.js","../../client-mock/dist/utils.js","../../datastore/dist/graphql/useGraphQL.js","../../../packages/common/dist/accesscontrol/permissions.js","../../themes/dist/jss/mapbox.css.js","../../themes/dist/jss/typeface-roboto.css.js","../../components/maps/dist/BaseMap.style.js","../../../packages/mock/dist/index.js","../../datastore/dist/graphql/offline.js","../../components/ui/dist/FindOnMapButton.js","../../components/ui/dist/AboutApp.js","../../components/ui/dist/AppSettings.js","../../components/ui/dist/AddFab.js","../../components/ui/dist/ContextMenu.js","../../components/ui/dist/LibraryFilePicker.js","../../components/ui/dist/ShortLongText.js","../../components/ui/dist/useNewImageMenu.js","../../components/ui/dist/UploadControl.js","../../components/ui/dist/DateControl.js","../../components/ui/dist/DateView.js","../../components/ui/dist/ErrorScreen.js","../../components/ui/dist/index.js","../../datastore/dist/graphql/fragments.js","../../datastore/dist/s3Upload.js","../../datastore/dist/graphql/mutations/updateQueries.js","../../datastore/dist/graphql/mutations.js","../../../packages/common/dist/dates.js","../../../packages/common/dist/util.js","../../../packages/common/dist/Tags.js","../../../packages/common/dist/exif.js","../../../packages/common/dist/Series.js","../../../packages/common/dist/Photo.js","../../../packages/common/dist/accesscontrol/AccessHelper.js","../../components/photos/dist/BrokenImg.js","../../components/photos/dist/RawImage.js","../../components/photos/dist/Photo.js","../../components/photos/dist/Photo.style.js","../../components/photos/dist/PhotoGrid.js","../../components/photos/dist/PhotoGrid.style.js","../../components/photos/dist/PhotoFadeSlider.js","../../components/photos/dist/index.js","../../datastore/dist/graphql/mutations/createPhoto.js","../../datastore/dist/graphql/mutations/deletePhoto.js","../../datastore/dist/graphql/mutations/deleteSeries.js","../../datastore/dist/graphql/mutations/unwatch.js","../../datastore/dist/graphql/mutations/updatePhoto.js","../../datastore/dist/graphql/mutations/updateSeries.js","../../datastore/dist/graphql/mutations/watch.js","../../themes/dist/themes.js","../../themes/dist/jss/baseline.css.js","../../client-mock/dist/CosmosBlackBackground.js","../../client-mock/dist/MaterialUIWrap.js","../../../packages/mock/dist/fakedata.js","../../themes/dist/index.js","../../datastore/dist/redux/actions.js","../../components/modals/dist/DeleteDialog.js","../../components/modals/dist/CancelConfirm.js","../../components/modals/dist/FeatureDisabled.js","../../components/modals/dist/BigText.js","../../components/modals/dist/BigTextEdit.js","../../components/modals/dist/index.js","../../datastore/dist/graphql/queries.js","../../client-common/dist/config.js","../../client-common/dist/share.js","../../client-common/dist/useCamera.js","../../client-common/dist/useComponentSize.js","../../client-common/dist/useFileInput.js","../../client-common/dist/useOnline.js","../../client-common/dist/useResponsive.js","../../client-common/dist/ErrorBoundary.js","../../client-common/dist/useOSDetect.js","../../client-common/dist/appContext.js","../../client-common/dist/useSensors.js","../../client-common/dist/index.js","../../components/maps/dist/mapStyles/index.js","../../components/maps/dist/markers/MyLocation.js","../../components/maps/dist/controls/StyleButtons.js","../../components/maps/dist/controls/MyLocationButton.js","../../components/maps/dist/BaseMap.js","../../components/maps/dist/lib/useClusteredData.js","../../components/maps/dist/HomeMap.style.js","../../components/maps/dist/ClusterSelected.js","../../components/maps/dist/markers/Single.js","../../components/maps/dist/markers/Cluster.js","../../components/maps/dist/HomeMap.js","../../components/maps/dist/BaseStaticMap.js","../../components/maps/dist/markers/Dot.js","../../components/maps/dist/MapDot.js","../../components/maps/dist/OfflineMap.style.js","../../components/maps/dist/OfflineMap.js","../../components/maps/dist/MapDirPicker.js","../../components/maps/dist/index.js"],"names":["useStyles","makeStyles","theme","root","imgContainer","gravatarImg","objectFit","height","width","_ref","user","loading","onAvatarClick","secondary","classes","createElement","ListItem","className","button","onClick","ListItemAvatar","Avatar","alt","src","gravatar","ListItemText","primary","username","propTypes","object","bool","string","func","SeriesContext","createContext","ownKeys","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","margin","spacing","backgroundColor","palette","background","paper","paddingBottom","field","marginBottom","list","padding","heading","marginTop","watchers","numPhotos","main","color","contrastText","tagListItem","chip","access","DIALOGS","series","_useContext2","tagConfig","globalActions","_useState","_useState2","activeDialog","setActiveDialog","tagInst","newTags","photos","reduce","acc","tags","tag","typeId","label","existing","count","metaKeys","meta","JSON","parse","e","console","error","FormLabel","formLabel","Typography","variant","name","note","text","Divider","ThemeProvider","Paper","concat","ACCESS","description","List","dense","createdUser","formatDate","takenOn","map","tagKey","idtk","subheading","getTagType","values","idx","Fragment","render","open","multiline","onClose","title","body","display","flexDirection","overflow","appBar","flexGrow","inner","position","overflowY","tabMenu","mapWrap","top","left","toolbarTitle","textOverflow","whiteSpace","AddFab","bottom","right","zIndex","grow","gridList","flexWrap","transform","titleBar","menuButton","placeholderInner","textAlign","progressWrapper","placeholderText","opacity","placeholder","progress","grey","onSlideshowStart","onChange","onEditSeries","onDeletePhotos","onCameraAdd","onDeleteSeries","onLibraryAdd","onTileClick","onMenuBack","onWatch","onUnWatch","initialPhoto","onFindOnMap","watching","owned","contextEl","setContextEl","_useState3","_useState4","showQR","setShowQR","_useState5","_useState6","deleteConfirm","setDeleteConfirm","_useState7","_useState8","listTypeTab","setListTypeTab","_useContext","ac","initPhotoIndex","findIndex","p","id","_useState9","_useState10","activePhoto","setActivePhoto","viewport","zoom","coords","longitude","latitude","can","update","canUser","delete","contribute","dialogOpen","CssBaseline","AppBar","Toolbar","disableGutters","IconButton","event","currentTarget","anchorEl","menuItems","icon","hide","action","divider","Tabs","value","Tab","onImageSelect","onDelete","allowDelete","disabled","onCameraClick","onLibraryClick","photoId","onConfirm","confirmation","message","isRequired","dlgTitle","accessRadio","slider","paddingLeft","paddingRight","textField","marginLeft","marginRight","mapFormLabel","mapInnerWrap","minHeight","mapWrapper","formControl","minWidth","chips","delta","_onChange","nameError","TextField","fullWidth","staticMap","direction","FormControlLabel","control","Switch","checked","indexOf","component","PUBLIC","OPEN","onOk","data","onCancel","newNote","setDelta","Dialog","scroll","fullScreen","DialogTitle","disableTypography","DialogContent","DialogActions","Button","dlgTitleContainer","catTagTitle","paddingTop","canEdit","photo","hideUser","_useState2$","activeDialogContext","getNonXYTagTypes","tt","dirty","PhotoInfoInner","newDelta","confirm","appBarEdit","photoWrapper","flex","tipChip","mobileStepper","dots","dot","border","dotActive","activeButton","STATES","initPhotoId","onUpdatePhoto","newPhoto","useTheme","current","last","mode","setMode","tagsClass","changeMode","desired","onCommitTags","tagButton","Badge","badgeContent","getXYTags","infoButton","axis","index","containerStyle","style","onChangeIndex","val","enableMouseEvents","photoidx","showTags","edit","MobileStepper","steps","activeStep","Chip","array","newSeries","actions","seriesDelta","setSeriesDelta","photoDelta","setPhotoDelta","validName","disableBackdropClick","disableEscapeKeyDown","photoTitle","newAttr","onSave","shape","captured","reference","libraryFab","swipeDrawer","referenceTextContainer","newText","textShadow","refText","defaultRefPhotoId","onRetry","dataUrl","newRefPhoto","find","refPhoto","setRefPhoto","drawerOpen","setDrawerOpen","setSlider","Boolean","defaultValue","sizePriority","Snackbar","autoHideDuration","ContentProps","snackbarContent","size","snackbar","Fab","buttonFab","disabledFab","libraryIcon","SwipeableDrawer","anchor","paperAnchorLeft","onOpen","tabIndex","swipeDrawerContainer","role","onKeyDown","multiSelect","columns","NEW_PHOTO_MODES","CAMERA","FILEPICKER","PHOTOREVIEW","PHOTOINFOEDIT","inputMethod","isNewSeries","device","geoRef","newPhotoData","setNewPhotoData","metaConfig","setNewSeries","setNewPhoto","photoRefId","setPhotoRefId","history","_changeMode","orientation","geo","newModeName","log","_getExif","exif","exifDateTime","exifGPS","date","String","Date","now","_geoRef$current","_newPhoto","rawData","stringify","sensors","ios","cameraPicker","onShutter","refId","_getExif2","_geoRef$current2","oldHistory","oldMode","pop","onCreate","oneOf","CircularProgress","thickness","SERIES_MODES","SERIES_VIEW","SERIES_EDIT","NEWPHOTO","NEWSERIES","REVIEW","PHOTO_VIEW","PHOTO_VIEW_NEW","SLIDESHOW","VIEW_ONLY_MODES","VALID_STARTMODES","PHOTO_REVIEW","modeName","inputMethodINIT","currentUserId","currentUserRole","seriesContextState","setSeriesContextState","pid","ph","onChangePhoto","seriesId","onApprovePhoto","_ref2","mark","_callee","wrap","_context","prev","next","onNewPhoto","stop","_x","_x2","_x3","this","newPid","newInputMethod","canUpdate","from","to","lastMode","photoIdArr","sp","onDeletePhoto","onNewSeries","Provider","defaultProps","justifyContent","fab","fab2","seriesList","tileClick","cameraClick","libraryClick","_useNewImageMenu","onDownThunk","onUpThunk","onBlock","menu","GridList","cols","cellHeight","seriesItem","GridListTile","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","GridListTileBar","subtitle","number","chipContainer","accessLabel","img","verticalAlign","alignSelf","textSm","titleText","dateContainer","dateLabel","fontWeight","dateText","imgFiller","imgContainerSm","children","showCreatedOn","showLastPhoto","small","PRIVATE","featured","photoCount","createdOn","latest","closeButton","overflowX","onSelect","maxWidth","disablePadding","d","fillRule","x","y","toolbar","alignItems","borderBottom","searchIcon","transparent","iOsIcon","logo","transparentLogo","transparentLogoIcon","qrButton","qrButtonTransparent","isTransparent","hideLogo","elevation","onQRClickWrapped","any","isRequred","drawerInner","disableListItem","avatar","spacer","fullList","currentUser","signedIn","loginButton","onDisabledClick","onQRButtonClick","ListItemIcon","addToHomeScreen","onOfflineMenuClick","onSettingsClick","onAboutClick","signOut","forceSignIn","_extends","assign","prototype","hasOwnProperty","call","topBarProps","setDialogOpen","handleQRClick","version","sinceStr","setSinceStr","online","timerRef","calcSinceStr","fromNow","offlineSince","clearTimer","clearInterval","setInterval","loggedText","offlineText","isOnline","home","AppStateTypes","borderTop","container","jet","papayawhip","subheader","addFab","transformOrigin","domain","Container","edge","FEED","setHomeState","MAP","SEARCH","PROFILE","tagChips","fontSize","deleteIcon","chipAvatar","props","getContrastText","tagContainer","singleValue","valueContainer","hint","onSelectChange","inputValue","removedValue","option","iv","xyCoords","tagValues","selectOptions","remainingTags","t","fieldTitle","allowAdditions","options","isFocused","components","deleteRemoves","isClearable","isMulti","isSearchable","dlgContent","setValue","xyTagChip","cursor","editing","reversedChip","chipAvatarIcon","reversedDelete","chipBucket","reversedChipBucket","newSize","onTagDragOver","onTagDragStop","onTagDelete","onNewTag","isReversed","relCoords","newWidth","stopBadness","preventDefault","stopPropagation","bounds","newHeight","onDrag","onStop","noOptionsMessage","input","tc","Control","Menu","NoOptionsMessage","Option","Placeholder","ValueContainer","blurInputOnSelect","InputProps","inputComponent","inputProps","selectProps","inputRef","innerRef","innerProps","textFieldProps","_ref3","square","_ref4","ref","_ref5","isSelected","MenuItem","buttonRef","selected","_ref6","header","listItem","dlgBody","_onClose","xyTags","allowXY","paperScrollPaper","tagType","setResizeActive","isDragging","setIsDragging","newTagDialog","setNewTagDialog","tagClass","addTag","__isNew__","createNewXYTagObj","createExistingXYTagObj","updateTagLocation","oldTag","parseInt","multiplier","onAddTagTrigger","pageX","window","innerWidth","pageY","innerHeight","TagChooser","getRelXYTags","LoadFakeData","delay","mockData","setData","dataRef","dirName","split","dirPath","finalPath","location","protocol","host","then","result","setTimeout","catch","err","loaded","mockProps","context","finalData","finalRender","cloneElement","node","ContextObj","containerRef","handleKeyPress","found","getElementsByClassName","click","document","addEventListener","removeEventListener","bgSwoosh","animation","logoContainer","login","forgotPassword","switch","switchButton","borderRadius","phoneNumInner","phoneNumDropdown","warnText","fontStyle","noSignin","handleSignup","handleForgotPassword","federated","handleInputChange","handleBeAnonymous","handleSignIn","autoFocus","type","autoComplete","ok","green","bad","pword","hasUpper","match","hasLower","hasNum","hasSpecial","enoughChars","signUpFields","signUpFieldLabels","signUpFieldPlaceholders","handleBack","countryDialCodes","defaultDialCode","selectVal","setSelectVal","setPword","pwordType","handleDialCodeChange","f","FormControl","InputLabel","htmlFor","shrink","required","Select","dialCode","handleConfirm","checkEmailMsgIco","checkEmailMsgTxt","checkEmailMsg","onResend","anchorOrigin","vertical","horizontal","SnackbarContent","handleResend","handleSubmit","handleSendCode","sent","setSent","change","requiredAttributes","placeholders","attribute","RADIO","onBack","hasEmail","hasPhone","handleSkip","handleVerify","radioVal","setRadioVal","indicatorColor","textColor","centered","MaterialUIWrap","default","Wrapper","noTheme","authState","google_client_id","alert","configure","aws","defaultAuthState","authData","signUpConfig","hiddenDefaults","defaultCountryCode","displayOrder","setAuth","getCurrentToken","currSession","currentSession","accessToken","abrupt","authScreen","onStateChange","state","hideDefault","isGod","signInUserSession","idToken","payload","_SignInOrig","SignIn","_this","newProps","changeState","signIn","_SignUpOrig","SignUp","_this2","includes","checkCustomSignUpFields","sortFields","getDefaultDialCode","get","signUp","_ConfirmSignInOrig","ConfirmSignIn","_this3","_ConfirmSignUpOrig","ConfirmSignUp","_this4","resend","_RequireNewPasswordOr","RequireNewPassword","challengeParam","Array","isArray","part","charAt","toUpperCase","substr","toLowerCase","join","_LoadingOrig","Loading","_ForgotPasswordOrig","ForgotPassword","_this5","send","submit","listContainer","vList","feedContainer","MyFeed","events","listRef","rowRenderer","content","isScrolling","isVisible","parent","row","wEnd","almostAtEnd","ROWHEIGHT","scrollTop","fetchMore","rowCount","rowHeight","arrayOf","onImageClick","onProfileClick","onMapClick","fetchNewest","FeedEnder","cameraErrorText","cameraFab","cameraIcon","cancelFab","cancelIcon","myLocationFab","myLocationIcon","video","refImgRef","setSize","_useCamera","cameraError","captureImage","cameraOnline","handleResize","imgRef","autoPlay","playsInline","muted","imageHeight","imageWidth","Promise","resolve","reject","qrIcon","backupText","manualImg","tipPaper","docContainer","cameraContainer","cameraContainerError","snackErr","red","snackSuccess","snackMsg","onCapture","isIos","capturedBlob","setCapturedBlob","setErr","code","setCode","captureRawData","captureFunc","debounce","scan","scannedCode","foundIdx","newData","decodedUrl","t0","Error","slice","decodeURI","t1","s","qrPaper","qrCode","maxHeight","qrCodeEl","setQRCodeEl","_createShareUrl","url","ogShare","canShare","toString","svgStr","navigator","share","dangerouslySetInnerHTML","__html","Link","href","s3Upload","graphql","APOLLOSTATES","useGraphQL","queries","mutations","createPhoto","createSeries","deletePhoto","deleteSeries","unwatch","updatePhoto","updateSeries","watch","updateQueries","offline","redux","withReduxProvider","messageWrapper","boxShadow","textWrapper","buttons","onInstall","paragraph","showInstall","dismissInstall","deferredPrompt","setPrompt","_useOSDetect","handleBeforePrompt","phone","installPrompt","prompt","userChoice","choiceResult","outcome","standalone","withReportBugMutation","datastore","reportBug","mutate","ownProps","reduxState","setState","ERROR_SEND_STATES","ERROR","reportError","SENDING","reportJSON","extra","userAgent","appVersion","languages","language","platform","onLine","errSubset","stack","errObj","env","process","variables","store","SENT","connect","uploader","useState","UNSENT","Wrapped","ErrorScreen","sendState","addLocaleData","frLocaleData","React","IntlWrapper","locale","outerRoot","offlineBar","activeWrapper","flexShrink","uploaderContainer","responsive","Upload","upload","SERIES","QRCAPTURE","SETTINGS","OFFLINE_DOWNLOAD","showBottomBar","activeProps","ActiveComponent","feed","profile","search","NEW_SERIES_CAMERA","NEW_SERIES_LIBRARY","onQRCapture","windowSize","pwaInstall","NewS3Credentials","getNewS3Credentials","skip","qItem","onDone","retry","preAuth","s3Credentials","ext","withGetNewS3Credentials","compose","activeUpload","dispatch","completeActiveUpload","updateUploadProgress","newProgress","uploadingRef","useRef","setQItem","useContext","AppContext","newS3","useMemo","useEffect","config","withGetSelectedQuery","getWholeSeries","activeSeries","onAfterSeriesDelete","queueUpload","uploadObj","doneCreatingSeries","withMutation","WrappedSeries","updateSeriesMutation","updatePhotoMutation","deleteSeriesMutation","deletePhotoMutation","createSeriesMutation","createPhotoMutation","watchSeriesMutation","unWatchSeriesMutation","sort","a","b","ReactGA","category","imgStore","setItem","uploadToken","POLL_INTERVAL","withAllSeries","allSeries","seriesSummaries","nextToken","updateQuery","fetchMoreResult","setSeriesProps","readyForPolling","limit","withPollQuery","pollQuery","lastCheck","seriesProps","updateIncrement","changedSeries","oldList","newSeriesSummaries","seriesStatus","polledSeries","ds","oldSeries","oldId","AllSeriesConnect","PollQueryConnect","onSeriesNavigate","onSeriesMapSelect","setActiveSeries","onSearchClick","tab","SEARCH_TABS","LOCATION","popMapHistory","pushMapHistory","viewportSave","clearMapHistory","queryVersion","setVersion","queryVersionRef","setLastCheck","allSeriesQUERY","pollSeriesQUERY","initialActiveSeries","initViewport","TABS","withTagSearch","tagSearch","contextResults","Math","ceil","searchText","withUserSearch","userSearch","dates","formatDatAgo","searchStr","withGeoCode","geocode","geocoder","relevance","placeName","bbox","center","withTagSeries","seriesWithTag","tagSeries","searchResults","contextChoice","withUserSeries","userSeries","createdBy","withKeywordSearch","keywordSearch","defaultTab","defaultText","TAG","currentTab","setCurrentTab","setSearchText","setContextChoice","pageview","withContextQuery","withSearchQuery","KEYWORD","USER","ComposedSearch","jumpToMap","onResultClick","jumpToSeriesView","newContextChoice","newTab","withuserSeriesQuery","seriesQ","withMyWatchedSeriesQuery","seriesFromList","watchedSeriesQ","mySeries","watchingSeries","arraySeries","jumpToSeries","jumpToSeriesMap","withFeedQuery","getMyFeed","loadingNewest","loadingMore","gqlActions","myFeed","start","end","lastCheckRef","v","jumpToUser","withGeoSearch","geoSeriesIdOnly","seriesInGeoBounds","setSeriesIds","ids","WholeSeriesConnect","urls","updatedUser","Offline","seriesImgsToCache","paths","base","Set","GeoQuery","lastMapViewport","completedDownload","setOfflineCompleted","bVal","setOfflineViewport","OFFLINE_STATES","LOCKED","NAVIGATING","toolState","setToolState","limiterRef","setBounds","seriesIds","activeSeriesId","setActiveSeriesId","seriesPhotos","setSeriesPhotos","tileTick","setTileTick","seriesTick","setSeriesTick","seriesPhotoTick","setSeriesPhotoTick","tileTickRef","onTileTick","onSeriesPhotoTick","onSeriesTick","useCallback","num","theTick","theIds","thePhotos","addCount","schedule","makeRequest","finalState","OFFLINE","geoSeriesQuery","wholeSeriesQuery","CANCELED","dropWaitingJobs","Bottleneck","maxConcurrent","tiles","zoomRange","xtileLeft","long2tile","xtileRight","ytileTop","lat2tile","ytileBottom","getTileURL","getTiles","highestOfflineTileZoom","tile","newTotal","onStartDownload","DOWNLOADING","onCancelComplete","onUnlock","method","xhr","XMLHttpRequest","onload","status","response","statusText","onerror","replace","App","withUploadConnect","UploadControl","withSeriesConnect","PhotoSeries","withHomeMap","HomeMap","withSearchConnect","Search","withProfileConnect","MyProfile","withFeedConnect","withOfflineData","OfflineMap","homeConfig","tagColors","initialize","analytics","token","reduxProps","flags","reduxActions","newDomain","newParams","bufferPts","buffer","point","units","bboxFunc","MapModeTypes","FREE","resetAllState","setFlag","setUseOffline","homeStateBack","useAuthentication","useLoggedOut","apolloClient","client","apolloDone","done","apolloState","currState","useShowAddToHome","install","retryRef","handleBackClick","pushState","decodedObj","decodeShareUrl","queryVars","clearTimeout","appContext","getPhotoUrls","getItem","cognitoUser","resetApp","clear","resetStore","stateStore","allowNonXY","getTags","query","getUser","refetch","attributes","sub","fallback","ErrorConnect","isLocalhost","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","require","ReactDOM","getElementById","URL","origin","fetch","contentType","headers","ready","unregister","reload","checkValidServiceWorker","mapInit","homeInit","initState","defaultFlags","iOSWarning","offlineInit","appReducer","undefined","MAP_HISTORY_CLEAR","newClearerHistory","MAP_HISTORY_POP","MAP_HISTORY_PUSH","HOME_STATE_BACK","newStateHistory","newCurrentState","HOME_CHANGE_ACTIVE_SERIES","HOME_CHANGE_STATE","params","skipSave","replaceState","newHistory","UPLOADER_START","UPLOADER_COMPLETE","newStore","newActive","UPLOADER_UPDATE_PROGRESS","SETFLAG","flagName","flagVal","OFFLINE_VIEWPORT_SAVE","OFFLINE_SET_STATUS","persistConfig","storage","persistedReducer","preloadedState","persistor","BaseComponent","_storeConfig","storeConfig","chosenItem","dark","closeIcon","avatarImg","TheIcon","listSection","ul","cr","ctxItem","enderRef","handleScroll","offsetTop","_listRef$current","offsetHeight","onScroll","light","PlaceholderIcon","tabs","ListWrapper","SearchInput","flexContainer","TAGS","swipeAble","slideContainer","slide","iconButton","active","labelBadge","tagChip","manualBack","manualForward","transition","_useStepper","lastStep","handleForward","paused","pause","play","showXYTags","setShowXYTags","refImgWrap","_useComponentSize$siz","transitions","create","duration","titlePosition","actionIcon","nextButton","backButton","isFullScreen","slides","interval","setActiveStep","setPaused","setLastStep","createTimer","oldStep","destroyTimer","filterContainer","filterChip","seriesListItemWrap","noneFound","SORT","sortVal","setSort","sortAsc","setSortAsc","sortSetter","newSort","tabFeed","firstname","asc","useFilterStyles","arrow","dateCaption","slideshowButton","setShowTags","singular","_typeof","obj","Symbol","iterator","constructor","exports","_Tags","_exif","getExif","_Series","_Photo","_AccessHelper","permissions","util","accessControl","_accesscontrol","_interopRequireDefault","_permissions","datesLib","_interopRequireWildcard","utilLib","_getRequireWildcardCache","WeakMap","cache","__esModule","has","newObj","hasPropertyDescriptor","desc","set","RawSVG","useSearchBarStyles","common","white","breakpoints","up","inputRoot","inputInput","pointerEvents","debounceSearchText","blur","onBlur","findOnMapButtonContainer","titleContainer","seriesName","EVENT_VERBS","FeedItem","cover","updatedOn","randomObjectElement","randomArrayEl","filledArray","randomMap","randomChance","randomFloat","randomInt","_random","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","_iterableToArray","TypeError","_nonIterableSpread","min","max","chance","inTimes","low","high","fillval","_createSeriesMutation","_ownProps$currentUser","gravatarProfile","meUserSummary","optimisticResponse","mutationStackId","__typename","pick","createOptimisticResponse","refetchQueries","updateThunk","cb","photoResponse","updatedBy","seriesCreatedBy","large","orig","thumb","medium","photoResponseSummary","actionMaker","actionArr","useConsole","acStr","_len","args","_key","_len2","_key2","fakeGlobalActions","endpoints","LOCAL_STORAGE_TOKEN","INITIALIZING","AUTHENTICATING","LOADING","APPLY_MUTATIONS","DONE","setClient","setDone","setCurrState","_createApolloClient","createApolloClient","newClient","newState","jwtToken","_callee3","authLink","httpLink","_context3","_callee2","_","newHeaders","_context2","authorization","uri","attempts","Infinity","retryIf","_operation","link","tokenName","addTypename","connectToDevTools","admin","nonuser","series_public","series_open","font","W","fallbacks","M","userSelect","touchAction","float","outline","boxSizing","speak","borderColor","backgroundImage","O","backgroundRepeat","fill","enableBackground","visibility","textDecoration","borderWidth","borderStyle","willChange","borderBottomColor","borderLeft","borderRight","borderTopColor","borderRightColor","borderLeftColor","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","fontFamily","fontDisplay","mapContainer","_fakedata","fakePastDate","randomLocation","random","storeName","createInstance","OFFLINEMUTATIONS","getPendingPromise","setPendingPromise","pushMutationPromise","mutation","popMutationPromise","pm","proxyUpdateForId","proxy","resp","updateHandler","__optimistic","restoreRequests","pendingMutation","placeAvatar","placeIcon","_onClick","dialogContent","iconContainer","stop1","stopColor","rose","stop2","redorange","buttonIcon","scrollText","PaperProps","focusable","viewBox","x2","y2","offset","contact","nuclear","deleteOpen","setDeleteOpen","confirmed","pulseCol","animationIterationCount","animationTimingFunction","directionUp","actionsClosed","modalContainer","subFabContainer","subFab","subFabIcon","setOpen","down","setDown","downRef","elRef","onDown","block","rootContainer","disableFocusRipple","disableTouchRipple","disableRipple","Modal","Zoom","in","timeout","unmountOnExit","Icon","primaryTypographyProps","_useFileInput","fileClickEl","forceClick","cameraWords","PlaceIcon","menuEl","setMenuEl","setSeries","el","CameraPopup","onCamera","onLibrary","msgText","messageInner","LinearProgress","useWrapperStyles","displayName","rootEdit","textBody","actionButtons","timestampToHTML5Input","HTML5InputToTimestamp","dlgOpen","setNote","stackEl","buttonText","DialogContentText","rows","rowsMax","_templateObject6","_templateObject5","_templateObject4","_templateObject3","_templateObject2","_templateObject","photoSummaryFragment","photoSummaryKeys","userSummaryFragment","seriesSummaryFragment","seriesSummaryKeys","seriesFragment","seriesKeys","photoFragment","userFragment","doUpload","_x4","_doUpload","restartUpload","formData","file","fields","fieldkey","substring","append","dataURLtoFile","onUploadProgress","progressEvent","total","floor","post","removeItem","t2","t3","dataurl","filename","mime","bstr","atob","n","u8arr","Uint8Array","charCodeAt","File","interceptors","request","use","getWholeSeriesUpdate","qVal","readQuery","cloneDeep","warn","writeQuery","warerrorn","getWholeSeriesPhotoUpdate","remove","updateSeriesSummaries","origArr","newArr","seriesIndex","newAllSeriesEntry","updateFeedList","fItem","fitem","_id","newSeriesSummary","newPhotoSummary","relation","allSeriesUpdate","allSeriesPhotoUpdate","newS","photoIndex","photoSummary","userSeriesUpdate","feedUpdate","watchUpdate","seriesFrag","readFragment","fragment","writeFragment","sid","_templateObject9","_templateObject8","_templateObject7","updateSeriesKeys","updatePhotoKeys","newPhotoKeys","newSeriesKeys","watchSeries","unWatchSeries","utctimestamp","_moment","format","isoStr","convertJSDatetoTimestamp","parseDate","timeAgo","jsDate","utc","formatNum","precision","precstr","isNumeric","_numeral","clearSelection","selection","empty","getSelection","removeAllRanges","isObjectWithKeys","makeDomArray","domnode","capitalizeFirstLetter","numericArrayCompare","arr1","some","decodeUnbufferedBase64","hash","missingPadding","newhash","Buffer","encodeUnbufferedBase64","str","urlizeb64","isObject","arrToObj","keyDat","$","attr","Number","getRandomArbitraryInt","wait","immediate","innerArgs","callNow","chunkArray","base64toJSON","json2base64","_zlib","isNaN","parseFloat","isFinite","o","gzip","b64String","buff","gunzip","chunkSize","_defineProperty","configurable","writable","_default","Tags","instance","Constructor","_classCallCheck","tagLabel","xyTagLabels","getXYTagTypes","NonXYTagLabels","findTagByLabel","group","getTagTypeIndex","_exifParser","_common","DateTimeOriginal","GPSLatitude","GPSLongitude","_v","Series","getSeriesMeta","Photo","getPhotoMeta","_defineProperties","descriptor","AccessHelper","userSub","permissionObj","attrs","ownAny","ownOrAny","perm","otherPerm","granted","protoProps","staticProps","circularProgress","imgBroken","imgUrls","setImgUrls","altImgRef","altIndex","setAltIndex","broken","setBroken","finalURl","onError","brokenImg","setNewSize","_useComponentSize","_useXYTags","_imgRef$current","naturalHeight","naturalWidth","handleNewSize","rawImage","notDeleteable","unSelectedTile","selectedTile","selectMode","setSelectMode","selectedItems","setSelectedItems","setUrls","handleCancelSelection","toggleListItem","remaining","arrId","t4","t5","t6","t7","t8","t9","handlePhotoTap","handleAddToSelection","sliderLabel","rail","track","Slider","_createPhotoMutation","newPhotoInput","_deletePhotoMutation","_deleteSeriesMutation","_unWatchSeriesMutation","_updatePhotoMutation","newUpdatePhoto","newT","_updateSeriesMutation","_watchSeriesMutation","typography","useNextVariants","overrides","MuiDialog","paperFullWidth","colors","cblue","homeTheme","accessObj","overscrollBehavior","CosmosBlackBackground","outerTheme","iOS","innerTheme","deviceOverride","contextValue","fakeAppContext","_regeneratorRuntime","_lodash","_turf","_faker","_random2","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","EVENT_RELATIONS","past","latLngsAarr","transformTranslate","geometry","coordinates","FakeData","userPool","attribs","userSummary","basicAttribs","basicObj","fakeWidth","fakeHeight","photoPlaceholderArr","whichHighlight","hasPaths","objType","project","reach","nite","lorem","paragraphs","seriesSummary","basic","templateObj","base64","getImagePaths","strict","pool","shuffle","newItems","idt","sampleUser","freeBothTags","structureTags","treeTags","emotionTags","seasonTags","async","firstName","lastName","avatarSrc","_freeBothTagsValues","globalStyle","Actions","RESET_ALL_STATE","IconComp","textArea","_templateObject17","_templateObject16","_templateObject15","_templateObject14","_templateObject13","_templateObject12","_templateObject11","_templateObject10","initQuery","seriesSummaryFromList","geoSeries","REACT_APP_BASEURL","mandatoryEnv","REACT_APP_MAPBOX_TOKEN","REACT_APP_VERSION","REACT_APP_CONTACT_EMAIL","REACT_APP_GRAPHQL","REACT_APP_AWS_REGION","REACT_APP_COGNITO_USER_POOL_ID","REACT_APP_COGNITO_CLIENT_ID","keyname","mapConfig","mapBoxToken","blue","maxMapTileArea","PROJECT","Auth","region","userPoolId","userPoolWebClientId","mandatorySignIn","cookieStorage","expires","secure","AWSPinpoint","appId","encodedId","encodeURI","Webcam","webcamElement","canvasElement","mediaDevices","getUserMedia","_destroy","srcObject","getTracks","_setup","audio","facingMode","ideal","mediaStream","createObjectURL","onloadedmetadata","onplaying","videoWidth","videoHeight","getContext","drawImage","_this$_drawImage","_drawImage","getImageData","quality","mediaStreamTrack","getVideoTracks","imageCapture","ImageCapture","getPhotoCapabilities","takePhoto","blob","fr","FileReader","Image","readAsDataURL","_this$_drawImage2","toDataURL","setCameraError","setCameraOnline","camRef","setup","destroy","imgData","_unused","capturedData","takeDataURLPhoto","takeImageData","getSize","minSize","defaultSize","offsetWidth","resizeActiveRef","resizeActive","setComponentSize","handleResizeDebounced","ResizeObserver","resizeObserver","observe","disconnect","preferCamera","initialClick","anyFile","clickRef","element","accept","capture","handleChange","evt","files","reader","onloadend","getExtFromFile","fileBlob","newDate","getState","_window","_window$screen","screen","abs","screenSize","mediaQueries","activeElement","tagName","_React$Component","ErrorBoundary","hasError","info","_this$state","FallbackUI","Component","test","vendor","opera","isPhone","finalValue","isrequired","accuracy","altitude","altitudeAccuracy","speed","timestamp","mountedRef","watchIdRef","onEvent","geolocation","getCurrentPosition","watchPosition","clearWatch","useDeviceOrientation","absolute","alpha","beta","gamma","deviceOrientation","setDeviceOrientation","handleDeviceOrientation","toolTip","SatelliteOutlined","ActiveIcon","Satellite","TerrainOutlined","Terrain","TopoMap","svgDot","svgAccuracyDot","projection","accHeight","pixelsPerMeter","accWidth","cx","cy","r","stroke","fillOpacity","strokeWidth","speedDialFab","speedDialAction","speedDialIcon","speedDialLabel","controlPadding","currStyle","mapStyles","setCurrStyle","noEventSetOpen","SpeedDial","ariaLabel","speedDial","SpeedDialAction","tooltipOpen","tooltipPlacement","tooltipTitle","myPosition","showMe","lockToBounds","lockPan","initStyle","incomingOnViewportChange","onViewportChange","incomingOnTransitionStart","onTransitionStart","incomingOnTransitionEnd","onTransitionEnd","onMapDataEvent","stylechooser","passthroughProps","mapContainerRef","mapBoxRef","innerTransitionsRef","defaultViewVals","setViewport","isTransitioning","setIsTransitioning","setProjection","geoMarker","captureDrag","_projection","_onViewportChange","viewportChange","newViewport","getMap","_bounds","minlng","minlat","maxlng","maxlat","_fitBounds","fitBounds","mapStyle","onData","dragPan","mapboxApiAccessToken","c","handleChild","hideNavControls","showZoom","touchZoom","scrollZoom","showCompass","touchRotate","dragRotate","transitionDuration","transitionInterpolator","transitionEasing","lockRotation","lockZoom","bearing","pitch","child","filterBounds","currentZoom","sizeScale","clusteredData","setClusteredData","single","cluster","filteredData","setFilteredData","updateDataDebounce","updatedData","_args","filterDataDebounce","filtered","_args2","filterData","filteredClusteredData","tree","screenCoords","properties","zoomLevels","geoJSON","load","_loop","z","radius","sqrt","pow","neighbors","minX","minY","maxX","maxY","neighbor","newGeoJSON","reducedPhotoCount","points","newZ","listItemText","compoundButton","seriesCount","onZoomTo","onViewList","rootActive","avatarActive","badge","badgeActive","directionIndicator","nameActive","svgArc","strokeOpacity","topBar","loadingWrapper","zoomOutFab","selectedPopup","defaultView","mapViewObj","setMapViewObj","mapViewRef","homeMapContainerRef","setCurrentZoom","showViewList","setShowViewList","setTransitions","_useState11","_useState12","selectedItem","setSelectedItem","updateSelectedItem","item","_onZoomTo","pts","paddedPoint","lngBuff","latBuff","buffBounds","onMarkerClick","markersRendered","offsetLeft","selectedItemRender","maxZoom","minZoom","viewZoom","getBounds","_map$getBounds","_map$getBounds$_sw","_sw","minLng","lng","minLat","lat","_map$getBounds$_ne","_ne","maxLng","maxLat","oldMinLng","oldMinLat","oldMaxLng","oldMaxLat","onNativeClick","mapRef","recalcProjection","baseStaticMap","deckelements","minPitch","maxPitch","zoomBounds","InnerBounds","editable","Map","mapProps","Dot","rectContents","black","areaLabel","rectContentsDownloading","rectIcon","tooBig","tickText","svgRect","svgCutout","svgBorder","svgBorderNavigating","svgBorderLocked","svgBorderTooBig","svgBorderDownloading","downloadingProgress","downloadingProgressCircle","snackError","mapWrapperRef","viewState","area","setArea","classWithState","setGeoState","rectSide","newArea","metersPerPixel","dx","degreesPerPixel","dy","newBounds","snack","onSnackClose","snackTimeout","unlocked","doubleClickZoom","rectStyle","boxCorners","totalProgress","xmlns","sliderWrapper","sliderRoot","initLat","initLong","initDir","setCoords","setRotation","_ref2$viewport","step"],"mappings":"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","file":"static/js/main.1da12e0f.chunk.js","sourcesContent":["export default require('./Slideshow').default;","export default require('./SwipeShow').default;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    imgContainer: {},\n    gravatarImg: {\n      objectFit: 'cover',\n      height: '100%',\n      width: '100%'\n    }\n  };\n});\n\nvar UserListItem = function UserListItem(_ref) {\n  var user = _ref.user,\n      loading = _ref.loading,\n      onAvatarClick = _ref.onAvatarClick,\n      secondary = _ref.secondary;\n  var classes = useStyles();\n  if (loading || !user) return 'LOADING...';\n  return React.createElement(ListItem, {\n    className: classes.root,\n    button: !!onAvatarClick,\n    onClick: onAvatarClick\n  }, React.createElement(ListItemAvatar, {\n    className: classes.imgContainer\n  }, React.createElement(Avatar, null, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: user.gravatar\n  }))), React.createElement(ListItemText, {\n    primary: user.username,\n    secondary: secondary\n  }));\n};\n\nUserListItem.propTypes = {\n  user: PropTypes.object,\n  loading: PropTypes.bool,\n  secondary: PropTypes.string,\n  onAvatarClick: PropTypes.func\n};\nexport default UserListItem;","import React from 'react';\nexport var SeriesContext = React.createContext({});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport classNames from 'classnames';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport Paper from '@material-ui/core/Paper';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport themes from '@morphoto/themes';\nimport { TagChip } from '@morphoto/tags';\nimport { ShortLongText } from '@morphoto/ui';\nimport { BigText } from '@morphoto/modals';\nimport { dates, Tags as TagClass } from '@morphoto/common';\nimport { AppContext, config } from '@morphoto/client-common';\nimport UserListItem from '../UserListItem';\nimport { SeriesContext } from '../contexts';\nimport style from './SeriesInfo.style';\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEVIEW: 'NOTEVIEW'\n};\n\nvar SeriesInfo = function SeriesInfo() {\n  var classes = useStyles();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var _useContext2 = useContext(AppContext),\n      tagConfig = _useContext2.tagConfig,\n      globalActions = _useContext2.globalActions;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var tagInst = new TagClass(tagConfig);\n  var newTags = series.photos.reduce(function (acc, _ref) {\n    var tags = _ref.tags;\n    tags.forEach(function (tag) {\n      if (!acc[tag.typeId]) {\n        acc[tag.typeId] = _defineProperty({}, tag.label, _objectSpread({}, tag, {\n          count: 1\n        }));\n      } else if (acc[tag.typeId][tag.label]) {\n        var existing = acc[tag.typeId][tag.label];\n        acc[tag.typeId][tag.label] = _objectSpread({}, existing, {\n          count: existing.count + 1\n        });\n      } else acc[tag.typeId][tag.label] = _objectSpread({}, tag, {\n        count: 1\n      });\n    });\n    return acc;\n  }, {});\n  var metaKeys = [];\n\n  try {\n    metaKeys = series.meta ? Object.keys(JSON.parse(series.meta)) : [];\n  } catch (e) {\n    console.error(e);\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.field\n  }, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Series Name\"), React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, series.name)), series.note && React.createElement(ShortLongText, {\n    label: \"Series Note\",\n    text: series.note,\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.NOTEVIEW);\n    }\n  }), React.createElement(Typography, {\n    className: classes.heading,\n    variant: \"subtitle1\"\n  }, \"Series Summary\"), React.createElement(Divider, null), React.createElement(ThemeProvider, {\n    theme: themes.access[series.access]\n  }, React.createElement(Paper, {\n    className: classNames(classes.access)\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, \"Series is \".concat(config.ACCESS[series.access].label)), React.createElement(Typography, {\n    variant: \"caption\"\n  }, config.ACCESS[series.access].description))), React.createElement(List, {\n    className: classes.list,\n    dense: true\n  }, series.createdUser && React.createElement(UserListItem, {\n    user: series.createdUser,\n    onAvatarClick: function onAvatarClick() {\n      return globalActions.onAvatarClick(series.createdUser.username);\n    },\n    secondary: \"created this series\"\n  }), React.createElement(ListItem, null, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.numPhotos\n  }, series.photos.length)), React.createElement(ListItemText, {\n    primary: series.photos.length > 1 ? 'Photos' : 'Photo',\n    secondary: series.photos.length > 0 && React.createElement(\"span\", null, dates.formatDate(series.photos[0].takenOn, 'LL'), React.createElement(\"span\", null, \"\\xA0\\xA0\"), \"to\", React.createElement(\"span\", null, \"\\xA0\\xA0\"), dates.formatDate(series.photos[series.photos.length - 1].takenOn, 'LL'))\n  })), React.createElement(ListItem, null, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.watchers\n  }, series.watchers || '0')), React.createElement(ListItemText, {\n    primary: \"Users Watching\"\n  })), React.createElement(ListItem, null, React.createElement(ListItemText, null, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Tags in use (across all photos)\"), React.createElement(Divider, null), Object.keys(newTags).length === 0 && React.createElement(Typography, {\n    variant: \"caption\"\n  }, \"No photos in this series have tags\"), Object.keys(newTags).map(function (tagKey, idtk) {\n    return React.createElement(\"div\", {\n      key: \"tagchipkey\".concat(idtk),\n      className: classes.tagListItem\n    }, React.createElement(Typography, {\n      className: classes.subheading,\n      variant: \"overline\"\n    }, tagInst.getTagType(tagKey).label), React.createElement(Divider, null), Object.values(newTags[tagKey]).length > 0 ? Object.values(newTags[tagKey]).map(function (tag, idx) {\n      return React.createElement(TagChip, {\n        key: \"tagchip-\".concat(idtk, \"-\").concat(idx),\n        tag: tag,\n        color: tagInst.getTagType(tagKey).color\n      });\n    }) : React.createElement(Typography, {\n      variant: \"caption\"\n    }, \"No photos in this series have tags\"));\n  })))), series.meta && metaKeys.length > 0 && Object.keys(series.meta).length > 0 && React.createElement(React.Fragment, null, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Metadata\"), React.createElement(Divider, null), React.createElement(List, {\n    className: classes.list\n  }, metaKeys.map(function (key, idx) {\n    return series.meta[key] ? React.createElement(ListItem, {\n      key: \"metadata\".concat(idx)\n    }, React.createElement(ListItemText, {\n      primary: series.meta[key].label,\n      secondary: series.meta[key].render(series.meta[key])\n    })) : null;\n  }))), activeDialog === DIALOGS.NOTEVIEW && React.createElement(BigText, {\n    open: true,\n    multiline: true,\n    onClose: function onClose() {\n      return setActiveDialog(null);\n    },\n    title: \"Series Note\",\n    body: series.note\n  }));\n};\n\nSeriesInfo.propTypes = {};\nexport default SeriesInfo;","export default (function (theme) {\n  return {\n    root: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.background.paper,\n      paddingBottom: 60\n    },\n    field: {\n      marginBottom: theme.spacing(1)\n    },\n    list: {\n      padding: theme.spacing(1)\n    },\n    heading: {\n      marginTop: theme.spacing(1)\n    },\n    watchers: {},\n    numPhotos: {\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    tagListItem: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(2)\n    },\n    chip: {\n      margin: theme.spacing(0.5)\n    },\n    access: {\n      padding: theme.spacing(1, 2)\n    }\n  };\n});","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    appBar: {\n      flexGrow: 0\n    },\n    inner: {\n      position: 'relative',\n      flexGrow: 1,\n      overflowY: 'scroll',\n      '-webkit-overflow-scrolling': 'touch'\n    },\n    tabMenu: {\n      marginTop: theme.spacing(7)\n    },\n    mapWrap: {\n      position: 'absolute',\n      height: '100%',\n      width: '100%',\n      top: 0,\n      left: 0\n    },\n    toolbarTitle: {\n      flexGrow: 1,\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    AddFab: {\n      position: 'absolute',\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      zIndex: 500\n    },\n    grow: {\n      flexGrow: 1\n    },\n    gridList: {\n      flexWrap: 'nowrap',\n      transform: 'translateZ(0)'\n    },\n    titleBar: {\n      display: 'flex',\n      padding: theme.spacing(1)\n    },\n    menuButton: {},\n    placeholderInner: {\n      position: 'relative',\n      flexGrow: 1,\n      overflow: 'hidden',\n      textAlign: 'center',\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column'\n    },\n    progressWrapper: {\n      textAlign: 'center',\n      marginBottom: theme.spacing(4)\n    },\n    placeholderText: {\n      opacity: 0.4\n    },\n    placeholder: {},\n    progress: {\n      color: theme.palette.grey[300]\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport AddAlertIcon from '@material-ui/icons/AddAlert';\nimport SlideshowIcon from '@material-ui/icons/Slideshow';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { QRDisplay } from '@morphoto/camera';\nimport { PhotoGrid } from '@morphoto/photos';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { AddFab, ContextMenu } from '@morphoto/ui';\nimport SwipeShow from '@morphoto/swipeshow';\nimport SeriesInfo from './SeriesInfo';\nimport { SeriesContext } from '../contexts';\nimport style from '../SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesView = function SeriesView(_ref) {\n  var onSlideshowStart = _ref.onSlideshowStart,\n      onChange = _ref.onChange,\n      onEditSeries = _ref.onEditSeries,\n      onDeletePhotos = _ref.onDeletePhotos,\n      onCameraAdd = _ref.onCameraAdd,\n      onDeleteSeries = _ref.onDeleteSeries,\n      onLibraryAdd = _ref.onLibraryAdd,\n      onTileClick = _ref.onTileClick,\n      onMenuBack = _ref.onMenuBack,\n      onWatch = _ref.onWatch,\n      onUnWatch = _ref.onUnWatch,\n      initialPhoto = _ref.initialPhoto,\n      onFindOnMap = _ref.onFindOnMap,\n      watching = _ref.watching,\n      owned = _ref.owned;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      contextEl = _useState2[0],\n      setContextEl = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showQR = _useState4[0],\n      setShowQR = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      deleteConfirm = _useState6[0],\n      setDeleteConfirm = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      listTypeTab = _useState8[0],\n      setListTypeTab = _useState8[1];\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      ac = _useContext.ac;\n\n  var initPhotoIndex = initialPhoto ? series.photos.findIndex(function (p) {\n    return p.id === initialPhoto;\n  }) || 0 : 0;\n\n  var _useState9 = useState(initPhotoIndex >= 0 ? initPhotoIndex : 0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      activePhoto = _useState10[0],\n      setActivePhoto = _useState10[1];\n\n  var onDeleteConfirm = function onDeleteConfirm(confirmation) {\n    setDeleteConfirm(false);\n    if (confirmation === true) onDeleteSeries(series.id);\n  };\n\n  var viewport = {\n    zoom: 16\n  };\n\n  if (series && series.coords && series.coords.length === 2) {\n    viewport.longitude = series.coords[0];\n    viewport.latitude = series.coords[1];\n  }\n\n  var can = {\n    update: ac.canUser('update', series, 'series', '*'),\n    delete: ac.canUser('delete', series, 'series', '*'),\n    contribute: ac.canUser('update', series, 'series', ['photos'])\n  };\n  var dialogOpen = deleteConfirm || showQR;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, series.name || 'Series'), React.createElement(IconButton, {\n    \"aria-haspopup\": \"true\",\n    color: \"inherit\",\n    onClick: function onClick(event) {\n      return setContextEl(event.currentTarget);\n    }\n  }, React.createElement(MoreIcon, null)), React.createElement(ContextMenu, {\n    anchorEl: contextEl,\n    onClose: function onClose() {\n      return setContextEl(null);\n    },\n    menuItems: [{\n      text: 'Find on map',\n      icon: PlaceIcon,\n      hide: !onFindOnMap,\n      action: onFindOnMap\n    }, {\n      text: 'Watch Series',\n      icon: AddAlertIcon,\n      hide: !onWatch || owned || watching,\n      action: onWatch\n    }, {\n      text: 'Unwatch Series',\n      icon: AddAlertIcon,\n      hide: !onUnWatch || owned || !watching,\n      action: onUnWatch\n    }, {\n      text: 'Share series',\n      icon: ShareIcon,\n      action: function action() {\n        return setShowQR(true);\n      }\n    }, {\n      text: 'Start Slideshow',\n      icon: SlideshowIcon,\n      hide: !onSlideshowStart,\n      action: onSlideshowStart\n    }, {\n      divider: true\n    }, {\n      text: 'Edit Series',\n      icon: EditIcon,\n      hide: !onEditSeries || !can.update,\n      action: onEditSeries\n    }, {\n      text: 'Delete Series',\n      icon: DeleteIcon,\n      hide: !setDeleteConfirm || !can.delete,\n      color: 'error',\n      action: function action() {\n        return setDeleteConfirm(true);\n      }\n    }]\n  })), React.createElement(Tabs, {\n    variant: \"fullWidth\",\n    value: listTypeTab,\n    onChange: function onChange(e, value) {\n      return setListTypeTab(value);\n    }\n  }, React.createElement(Tab, {\n    label: \"Series\"\n  }), React.createElement(Tab, {\n    label: \"Photos\"\n  }))), React.createElement(\"div\", {\n    className: classes.inner\n  }, listTypeTab === 0 && React.createElement(React.Fragment, null, series.photos && series.photos.length > 0 && React.createElement(SwipeShow, {\n    photos: series.photos,\n    activePhoto: activePhoto,\n    setActivePhoto: setActivePhoto,\n    onImageSelect: onTileClick\n  }), React.createElement(SeriesInfo, {\n    onChange: onChange\n  })), series.photos && listTypeTab === 1 && React.createElement(PhotoGrid, {\n    photos: series.photos,\n    onTileClick: onTileClick,\n    onDelete: onDeletePhotos,\n    allowDelete: can.delete\n  })), listTypeTab === 0 && can.contribute && React.createElement(AddFab, {\n    className: classes.AddFab,\n    disabled: !dialogOpen,\n    onCameraClick: onCameraAdd,\n    onLibraryClick: onLibraryAdd\n  }, React.createElement(AddCameraIcon, null)), series.photos[activePhoto] && React.createElement(QRDisplay, {\n    open: showQR,\n    onClose: function onClose() {\n      return setShowQR(false);\n    },\n    series: series,\n    photoId: series.photos[activePhoto].id\n  }), React.createElement(DeleteDialog, {\n    open: deleteConfirm,\n    onConfirm: onDeleteConfirm,\n    title: \"Delete Series\",\n    message: \"Are you sure you want to delete this series? The record and all images associated with it will be gone forever.\"\n  }));\n};\n\nSeriesView.propTypes = {\n  initialPhoto: PropTypes.string,\n  watching: PropTypes.bool,\n  owned: PropTypes.bool,\n  onSlideshowStart: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onFindOnMap: PropTypes.func.isRequired,\n  onDeletePhotos: PropTypes.func.isRequired,\n  onDeleteSeries: PropTypes.func.isRequired,\n  onCameraAdd: PropTypes.func.isRequired,\n  onEditSeries: PropTypes.func.isRequired,\n  onLibraryAdd: PropTypes.func.isRequired,\n  onTileClick: PropTypes.func.isRequired,\n  onMenuBack: PropTypes.func.isRequired,\n  onWatch: PropTypes.func,\n  onUnWatch: PropTypes.func\n};\nexport default SeriesView;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Typography from '@material-ui/core/Typography';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { MapDirPicker, MapDot } from '@morphoto/maps';\nimport { BigTextEdit } from '@morphoto/modals';\nimport { ShortLongText } from '@morphoto/ui';\nimport { config } from '@morphoto/client-common';\nimport style from './SeriesEditInner.style';\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  MAPPICK: 'mapPicker',\n  NOTEEDIT: 'noteEdit'\n};\n\nvar SeriesEditInner = function SeriesEditInner(_ref) {\n  var series = _ref.series,\n      delta = _ref.delta,\n      _onChange = _ref.onChange;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var viewport = {\n    zoom: 18\n  };\n\n  if ((delta.latitude || series.coords[1]) && (delta.longitude || series.coords[0])) {\n    viewport.longitude = delta.longitude || series.coords[0];\n    viewport.latitude = delta.latitude || series.coords[1];\n  }\n\n  var access = delta.access || series.access || 'PRIVATE';\n  var name = typeof delta.name === 'string' ? delta.name : series.name || '';\n  var note = typeof delta.note === 'string' ? delta.note : series.note || '';\n  var nameError = !name || name.length < 3;\n  return React.createElement(\"div\", null, React.createElement(TextField, {\n    label: \"Series Name \".concat(nameError ? '(Required)' : ''),\n    fullWidth: true,\n    error: nameError,\n    placeholder: \"New Series\",\n    className: classes.field,\n    value: name,\n    onChange: function onChange(e) {\n      return _onChange(_objectSpread({}, delta, {\n        name: e.target.value\n      }));\n    }\n  }), React.createElement(\"div\", {\n    className: classes.mapWrapper,\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.MAPPICK);\n    }\n  }, React.createElement(FormLabel, {\n    className: classes.mapFormLabel\n  }, \"Location\"), React.createElement(\"div\", {\n    className: classes.mapInnerWrap\n  }, React.createElement(MapDot, {\n    staticMap: true,\n    className: classes.map,\n    direction: delta.direction || series.direction,\n    viewport: viewport\n  }))), React.createElement(\"div\", {\n    className: classes.field\n  }, React.createElement(FormLabel, null, \"Series Access\"), React.createElement(\"div\", {\n    className: classes.access\n  }, React.createElement(FormControlLabel, {\n    className: classes.accessRadio,\n    control: React.createElement(Switch, {\n      checked: ['OPEN', 'PUBLIC'].indexOf(access) > -1,\n      onChange: function onChange(e) {\n        _onChange(_objectSpread({}, delta, {\n          access: e.target.checked ? 'PUBLIC' : 'PRIVATE'\n        }));\n      },\n      value: 'PUBLIC'\n    }),\n    label: React.createElement(\"div\", null, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, config.ACCESS.PUBLIC.label), React.createElement(Typography, {\n      variant: \"caption\",\n      color: \"textSecondary\",\n      component: \"div\"\n    }, config.ACCESS.PUBLIC.description))\n  }), React.createElement(FormControlLabel, {\n    className: classes.accessRadio,\n    disabled: ['PRIVATE'].indexOf(access) > -1,\n    control: React.createElement(Switch, {\n      checked: ['OPEN'].indexOf(access) > -1,\n      onChange: function onChange(e) {\n        return _onChange(_objectSpread({}, delta, {\n          access: e.target.checked ? 'OPEN' : 'PUBLIC'\n        }));\n      },\n      value: 'OPEN'\n    }),\n    label: React.createElement(\"div\", null, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, config.ACCESS.OPEN.label), React.createElement(Typography, {\n      variant: \"caption\",\n      color: \"textSecondary\",\n      component: \"div\"\n    }, config.ACCESS.OPEN.description))\n  }))), React.createElement(ShortLongText, {\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.NOTEEDIT);\n    },\n    className: classes.field,\n    label: \"Series Note\",\n    placeholder: 'Click to edit',\n    text: note\n  }), activeDialog === DIALOGS.MAPPICK && React.createElement(MapDirPicker, {\n    open: true,\n    title: \"Series Location & Direction\",\n    latitude: delta.latitude || series.coords[1],\n    longitude: delta.longitude || series.coords[0],\n    direction: delta.direction || series.direction,\n    onOk: function onOk(data) {\n      _onChange(_objectSpread({}, delta, {}, data));\n\n      setActiveDialog(null);\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog(null);\n    }\n  }), activeDialog === DIALOGS.NOTEEDIT && React.createElement(BigTextEdit, {\n    open: true,\n    title: \"Series Note\",\n    body: note,\n    multiline: true,\n    onOk: function onOk(newNote) {\n      _onChange(_objectSpread({}, delta, {\n        note: newNote\n      }));\n\n      setActiveDialog(null);\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog(null);\n    }\n  }));\n};\n\nSeriesEditInner.propTypes = {\n  series: PropTypes.object.isRequired,\n  delta: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default SeriesEditInner;","export default (function (theme) {\n  return {\n    root: {},\n    inner: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    dlgTitle: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    access: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    accessRadio: {\n      margin: theme.spacing(2, 1)\n    },\n    grow: {\n      flexGrow: 1\n    },\n    field: {\n      flexGrow: 0,\n      marginBottom: theme.spacing(1) * 2\n    },\n    slider: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '100%'\n    },\n    formLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapFormLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapInnerWrap: {\n      flexGrow: 1,\n      height: '200px',\n      minHeight: '200px'\n    },\n    mapWrapper: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      paddingBottom: theme.spacing(1) * 2\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SeriesContext } from '../contexts';\nimport style from './SeriesEdit.style';\nimport SeriesEditInner from './SeriesEditInner';\nvar useStyles = makeStyles(style);\n\nvar SeriesEdit = function SeriesEdit(_ref) {\n  var onOk = _ref.onOk,\n      onCancel = _ref.onCancel;\n  var classes = useStyles();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      delta = _useState2[0],\n      setDelta = _useState2[1];\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    className: classes.root,\n    fullScreen: true,\n    open: true,\n    onClose: onCancel\n  }, React.createElement(CssBaseline, null), React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitle\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.grow\n  }, \"Edit Series Details\")), React.createElement(DialogContent, {\n    className: classes.inner\n  }, React.createElement(SeriesEditInner, {\n    series: series,\n    delta: delta,\n    onChange: setDelta\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return setDelta({});\n    },\n    \"aria-label\": \"Menu\"\n  }, \"Reset\"), React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onCancel,\n    \"aria-label\": \"Menu\"\n  }, \"Cancel\"), React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return onOk(_objectSpread({\n        id: series.id\n      }, delta));\n    },\n    \"aria-label\": \"Menu\"\n  }, \"Ok\")));\n};\n\nSeriesEdit.propTypes = {\n  onOk: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired\n};\nexport default SeriesEdit;","export default (function (theme) {\n  return {\n    root: {},\n    inner: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    dlgTitle: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    grow: {\n      flexGrow: 1\n    },\n    field: {\n      flexGrow: 0,\n      marginBottom: theme.spacing(2)\n    },\n    slider: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '100%'\n    },\n    formLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapFormLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapInnerWrap: {\n      flexGrow: 1\n    },\n    mapWrapper: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      paddingBottom: theme.spacing(2)\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TagView, TagEdit } from '@morphoto/tags';\nimport { DateControl, DateView, ShortLongText } from '@morphoto/ui';\nimport { Tags as TagClass } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nimport { BigTextEdit, BigText } from '@morphoto/modals';\nimport UserListItem from '../UserListItem';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '90%',\n      width: '85%'\n    },\n    dlgTitleContainer: {\n      display: 'flex',\n      padding: 0\n    },\n    catTagTitle: {\n      marginTop: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEEDIT: 'noteEdit',\n  NOTEVIEW: 'noteView',\n  PHOTOTAKEN: 'taken',\n  TAGEDIT: 'tag',\n  CANCEL: 'cancel'\n};\n\nvar PhotoInfo = function PhotoInfo(_ref) {\n  var canEdit = _ref.canEdit,\n      photo = _ref.photo,\n      delta = _ref.delta,\n      _onChange = _ref.onChange,\n      hideUser = _ref.hideUser;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      activeDialog = _useState2$.activeDialog,\n      activeDialogContext = _useState2$.activeDialogContext,\n      setActiveDialog = _useState2[1];\n\n  var note = typeof delta.note === 'string' ? delta.note : photo.note || '';\n  var tagInst = new TagClass(tagConfig, delta.tags || photo.tags);\n  var metaKeys = [];\n\n  try {\n    metaKeys = photo.meta ? Object.keys(JSON.parse(photo.meta)) : [];\n  } catch (e) {\n    console.error(e);\n  }\n\n  return React.createElement(\"div\", null, !hideUser && photo.createdUser && React.createElement(React.Fragment, null, React.createElement(UserListItem, {\n    user: photo.createdUser,\n    secondary: \"uploaded this photo\"\n  }), React.createElement(Divider, null)), canEdit ? React.createElement(DateControl, {\n    className: classes.field,\n    label: \"Photo taken on\",\n    value: delta.takenOn || photo.takenOn,\n    onChange: function onChange(takenOn) {\n      return _onChange({\n        takenOn: takenOn\n      });\n    },\n    canEdit: canEdit\n  }) : React.createElement(DateView, {\n    label: \"Photo taken on\",\n    value: delta.takenOn || photo.takenOn\n  }), (canEdit || photo.note) && React.createElement(ShortLongText, {\n    label: \"Photo Note\",\n    placeholder: canEdit ? 'Click to edit' : 'None',\n    text: note,\n    onClick: function onClick() {\n      if (canEdit) setActiveDialog({\n        activeDialog: DIALOGS.NOTEEDIT\n      });else setActiveDialog({\n        activeDialog: DIALOGS.NOTEVIEW\n      });\n    }\n  }), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.catTagTitle\n  }, \"Category tags\"), React.createElement(Divider, null), tagInst.getNonXYTagTypes().map(function (tt, idx) {\n    return React.createElement(\"div\", {\n      key: \"tagtype-\".concat(idx),\n      onClick: function onClick() {\n        return canEdit ? setActiveDialog({\n          activeDialog: DIALOGS.TAGEDIT,\n          activeDialogContext: tt\n        }) : null;\n      }\n    }, React.createElement(TagView, {\n      className: classes.field,\n      label: tt.label,\n      tags: delta.tags || photo.tags,\n      tagConfig: tt\n    }));\n  }), metaKeys.length > 0 && Object.keys(photo.meta).length > 0 && React.createElement(React.Fragment, null, React.createElement(Typography, {\n    className: classes.heading\n  }, \"Metadata\"), React.createElement(Divider, null), React.createElement(List, {\n    className: classes.list\n  }, metaKeys.map(function (key, idx) {\n    return photo.meta[key] ? React.createElement(ListItem, {\n      key: \"metadata\".concat(idx)\n    }, React.createElement(ListItemText, {\n      primary: photo.meta[key].label,\n      secondary: photo.meta[key].render(photo.meta[key])\n    })) : null;\n  }))), activeDialog && activeDialog === DIALOGS.NOTEEDIT && React.createElement(BigTextEdit, {\n    open: true,\n    multiline: true,\n    onOk: function onOk(note) {\n      _onChange({\n        note: note\n      });\n\n      setActiveDialog({});\n    },\n    title: \"Edit Photo Note\",\n    body: note\n  }), activeDialog && activeDialog === DIALOGS.NOTEVIEW && React.createElement(BigText, {\n    open: true,\n    multiline: true,\n    onClose: function onClose() {\n      return setActiveDialog({});\n    },\n    title: \"Photo Note\",\n    body: note\n  }), activeDialog && activeDialog === DIALOGS.TAGEDIT && React.createElement(TagEdit, {\n    open: true,\n    title: \"Edit Tags: \".concat(activeDialogContext.label),\n    onOk: function onOk(tags) {\n      setActiveDialog({});\n\n      _onChange({\n        tags: tags\n      });\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog({});\n    },\n    tags: delta.tags || photo.tags,\n    tagConfig: activeDialogContext\n  }));\n};\n\nPhotoInfo.propTypes = {\n  canEdit: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  hideUser: PropTypes.bool,\n  photo: PropTypes.object.isRequired,\n  delta: PropTypes.object.isRequired\n};\nexport default PhotoInfo;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CancelConfirm } from '@morphoto/modals';\nimport PhotoInfoInner from './PhotoInfoInner';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '90%',\n      width: '85%'\n    },\n    dlgTitleContainer: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main,\n      display: 'flex',\n      padding: 0\n    },\n    dlgTitle: {\n      flexGrow: 1,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEEDIT: 'noteEdit',\n  NOTEVIEW: 'noteView',\n  PHOTOTAKEN: 'taken',\n  TAGEDIT: 'tag',\n  CANCEL: 'cancel'\n};\n\nvar PhotoInfo = function PhotoInfo(_ref) {\n  var canEdit = _ref.canEdit,\n      photo = _ref.photo,\n      onCancel = _ref.onCancel,\n      onOk = _ref.onOk,\n      open = _ref.open;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      delta = _useState4[0],\n      setDelta = _useState4[1];\n\n  var dirty = delta && Object.keys(delta).length > 0;\n  return React.createElement(Dialog, {\n    fullScreen: true,\n    onClose: function onClose() {\n      if (dirty) setActiveDialog(DIALOGS.CANCEL);else onCancel();\n    },\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: open\n  }, React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitleContainer\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.dlgTitle\n  }, \"Photo Properties\"), React.createElement(IconButton, {\n    onClick: onCancel,\n    color: \"inherit\"\n  }, React.createElement(CloseIcon, null))), React.createElement(DialogContent, null, React.createElement(PhotoInfoInner, {\n    photo: photo,\n    delta: delta,\n    onChange: function onChange(newDelta) {\n      return setDelta(_objectSpread({}, delta, {}, newDelta));\n    },\n    canEdit: canEdit\n  })), React.createElement(DialogActions, null, !canEdit && React.createElement(Button, {\n    onClick: onCancel,\n    color: \"primary\"\n  }, \"Ok\"), canEdit && !dirty && React.createElement(Button, {\n    onClick: onCancel,\n    color: \"primary\"\n  }, \"Back\"), canEdit && dirty && React.createElement(React.Fragment, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.CANCEL);\n    },\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return setDelta({});\n    },\n    color: \"primary\"\n  }, \"Reset\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(delta);\n    },\n    color: \"primary\"\n  }, \"Ok\"))), activeDialog && activeDialog === DIALOGS.CANCEL && React.createElement(CancelConfirm, {\n    open: true,\n    title: \"Lose unsaved changes?\",\n    message: \"You will lose any changes you made to this form\",\n    onConfirm: function onConfirm(confirm) {\n      setActiveDialog(null);\n      if (confirm) onCancel();\n    }\n  }));\n};\n\nPhotoInfo.propTypes = {\n  canEdit: PropTypes.bool,\n  onCancel: PropTypes.func.isRequired,\n  onOk: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  photo: PropTypes.object.isRequired\n};\nexport default PhotoInfo;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport SwipeableViews from 'react-swipeable-views';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Button from '@material-ui/core/Button';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport Chip from '@material-ui/core/Chip';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport InfoIcon from '@material-ui/icons/Info';\nimport LabelIcon from '@material-ui/icons/Label';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport PhotoInfo from './PhotoInfo';\nimport { SeriesContext } from '../contexts';\nimport { Photo } from '@morphoto/photos';\nimport { AppContext } from '@morphoto/client-common';\nimport { dates, Tags as TagClass } from '@morphoto/common';\nimport style from './PhotoViewTool.style';\nvar useStyles = makeStyles(style);\nvar STATES = {\n  VIEWPIC: 0,\n  SHOWINFO: 1,\n  SHOWTAGS: 2,\n  EDITTAGS: 3,\n  FIRSTAGEDIT: 4\n};\n\nvar PhotoViewTool = function PhotoViewTool(_ref) {\n  var photos = _ref.photos,\n      initPhotoId = _ref.initPhotoId,\n      onMenuBack = _ref.onMenuBack,\n      onUpdatePhoto = _ref.onUpdatePhoto,\n      newPhoto = _ref.newPhoto;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      ac = _useContext.ac;\n\n  var _useState = useState(initPhotoId ? photos.findIndex(function (p) {\n    return p.id === initPhotoId;\n  }) : 0),\n      _useState2 = _slicedToArray(_useState, 2),\n      activePhoto = _useState2[0],\n      setActivePhoto = _useState2[1];\n\n  var photo = photos[activePhoto];\n\n  var _useState3 = useState(newPhoto ? photo : {}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      delta = _useState4[0],\n      setDelta = _useState4[1];\n\n  var _useState5 = useState({\n    current: newPhoto ? STATES.FIRSTAGEDIT : STATES.VIEWPIC,\n    last: null\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      mode = _useState6[0],\n      setMode = _useState6[1];\n\n  var _useContext2 = useContext(AppContext),\n      tagConfig = _useContext2.tagConfig;\n\n  var tagsClass = new TagClass(tagConfig, delta.tags || photo.tags);\n\n  var changeMode = function changeMode(desired) {\n    setMode({\n      current: desired,\n      last: mode.current\n    });\n  };\n\n  var onCommitTags = function onCommitTags() {\n    changeMode(STATES.SHOWTAGS);\n    onUpdatePhoto(photo, _objectSpread({\n      id: photo.id\n    }, delta));\n  };\n\n  var onCommitTagsFirst = function onCommitTagsFirst() {\n    onUpdatePhoto(photo, _objectSpread({\n      id: photo.id\n    }, delta));\n    onMenuBack();\n  };\n\n  var onCancelTagEdit = function onCancelTagEdit() {\n    changeMode(STATES.SHOWTAGS);\n    setDelta(photo);\n  };\n\n  var photoClick = function photoClick(e) {\n    if (mode.current === STATES.VIEWPIC) {\n      e.preventDefault();\n      e.stopPropagation();\n      changeMode(STATES.SHOWINFO);\n    }\n  };\n\n  var can = {\n    update: ac.canUser('update', series, 'series') || ac.canUser('update', photo, 'photo')\n  };\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.appBar, mode.current !== STATES.VIEWPIC ? classes.appBarEdit : null)\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"Menu\",\n    onClick: function onClick() {\n      return onMenuBack();\n    }\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(\"div\", {\n    className: classes.grow\n  }, React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, newPhoto ? 'Add Tags' : \"Photo View (\".concat(activePhoto + 1, \"/\").concat(photos.length, \")\")), React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.takenOn, 'lll'))), mode.current === STATES.EDITTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCancelTagEdit\n  }, \"Cancel\"), mode.current === STATES.EDITTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCommitTags\n  }, \"Save\"), mode.current === STATES.FIRSTAGEDIT && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCommitTagsFirst\n  }, \"Next\"), can.update && mode.current === STATES.SHOWTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: function onClick() {\n      return changeMode(STATES.EDITTAGS);\n    }\n  }, \"Edit\"), mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(classes.tagButton, mode.current === STATES.SHOWTAGS && classes.activeButton),\n    onClick: function onClick() {\n      return changeMode(mode.current === STATES.SHOWTAGS ? STATES.VIEWPIC : STATES.SHOWTAGS);\n    }\n  }, React.createElement(Badge, {\n    className: classes.margin,\n    badgeContent: tagsClass.getXYTags().length,\n    color: \"primary\"\n  }, React.createElement(LabelIcon, {\n    color: \"inherit\"\n  }))), mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(classes.infoButton, mode.current === STATES.SHOWINFO && classes.activeButton),\n    onClick: function onClick() {\n      return changeMode(mode.current === STATES.SHOWINFO ? STATES.VIEWPIC : STATES.SHOWINFO);\n    }\n  }, React.createElement(InfoIcon, null)))), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(SwipeableViews, {\n    axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n    index: activePhoto,\n    containerStyle: {\n      height: '100%'\n    },\n    style: {\n      height: '100%'\n    },\n    disabled: mode.current !== STATES.VIEWPIC,\n    onChangeIndex: function onChangeIndex(val) {\n      return setActivePhoto(val);\n    },\n    enableMouseEvents: true\n  }, photos.map(function (photoidx, idx) {\n    return React.createElement(\"div\", {\n      className: classes.photoWrapper,\n      key: \"swipeshowpic-\".concat(idx)\n    }, React.createElement(Photo, {\n      showTags: mode.current === STATES.SHOWTAGS,\n      photo: _objectSpread({}, photoidx, {}, delta),\n      edit: can.update && (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT),\n      onChange: setDelta,\n      onCommitTags: onCommitTags\n    }));\n  })), mode.current === STATES.VIEWPIC && React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"bottom\",\n    activeStep: activePhoto,\n    classes: {\n      root: classes.mobileStepper,\n      dots: classes.dots,\n      dot: classes.dot,\n      dotActive: classes.dotActive\n    }\n  })), React.createElement(PhotoInfo, {\n    open: mode.current === STATES.SHOWINFO,\n    photo: photo,\n    canEdit: can.update,\n    onOk: function onOk(newDelta) {\n      onUpdatePhoto(photo, _objectSpread({\n        id: photo.id\n      }, newDelta));\n      changeMode(mode.last);\n    },\n    onCancel: function onCancel() {\n      return changeMode(mode.last);\n    }\n  }), (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT) && React.createElement(Chip, {\n    label: \"Tap to tag features...\",\n    onClick: function onClick() {},\n    className: classes.tipChip\n  }));\n};\n\nPhotoViewTool.propTypes = {\n  photos: PropTypes.array.isRequired,\n  initPhotoId: PropTypes.string,\n  newPhoto: PropTypes.bool,\n  onMenuBack: PropTypes.func.isRequired,\n  onUpdatePhoto: PropTypes.func.isRequired\n};\nexport default PhotoViewTool;","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    appBar: {\n      flexGrow: 0\n    },\n    appBarEdit: {\n      color: theme.palette.secondary.contrastText,\n      background: theme.palette.secondary.main\n    },\n    grow: {\n      flexGrow: 1\n    },\n    photoWrapper: {\n      height: '100%'\n    },\n    inner: {\n      flex: '1 1',\n      position: 'relative'\n    },\n    tabMenu: {\n      marginTop: theme.spacing(7)\n    },\n    tipChip: {\n      position: 'absolute',\n      zIndex: 11,\n      bottom: 20,\n      left: '50%',\n      opacity: 0.6,\n      transform: 'translateX(-50%)'\n    },\n    mobileStepper: {\n      background: 'none'\n    },\n    dots: {\n      margin: '0 auto'\n    },\n    dot: {\n      border: '1px solid #FFFFFF77'\n    },\n    dotActive: {\n      background: theme.palette.secondary.main\n    },\n    activeButton: {\n      color: theme.palette.primary.main,\n      opacity: 1\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Dialog from '@material-ui/core/Dialog';\nimport Divider from '@material-ui/core/Divider';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SeriesEditInner from './SeriesEditInner';\nimport PhotoInfoInner from './PhotoInfoInner';\nimport style from './NewPhotoInfo.style';\nvar useStyles = makeStyles(style);\n\nvar NewPhotoInfo = function NewPhotoInfo(_ref) {\n  var photo = _ref.photo,\n      newSeries = _ref.newSeries,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useState = useState(newSeries || {}),\n      _useState2 = _slicedToArray(_useState, 2),\n      seriesDelta = _useState2[0],\n      setSeriesDelta = _useState2[1];\n\n  var _useState3 = useState(photo),\n      _useState4 = _slicedToArray(_useState3, 2),\n      photoDelta = _useState4[0],\n      setPhotoDelta = _useState4[1];\n\n  var validName = !newSeries || seriesDelta.name && seriesDelta.name.length >= 3;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(Dialog, {\n    fullScreen: true,\n    scroll: \"paper\",\n    disableBackdropClick: true,\n    disableEscapeKeyDown: true,\n    onClose: actions.onCancel,\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: true\n  }, React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitleContainer\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.dlgTitle\n  }, newSeries ? 'New Series Details' : 'New Photo Details')), React.createElement(DialogContent, null, !!newSeries && React.createElement(SeriesEditInner, {\n    series: newSeries,\n    delta: seriesDelta,\n    onChange: setSeriesDelta\n  }), !!newSeries && React.createElement(\"div\", null, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.photoTitle\n  }, \"New photo details\"), React.createElement(Divider, null)), React.createElement(PhotoInfoInner, {\n    photo: photo,\n    canEdit: true,\n    hideUser: true,\n    delta: photoDelta,\n    onChange: function onChange(newAttr) {\n      return setPhotoDelta(_objectSpread({}, photoDelta, {}, newAttr));\n    }\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: actions.onCancel,\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return actions.onSave(seriesDelta, photoDelta);\n    },\n    disabled: !validName,\n    color: \"primary\"\n  }, \"Next\"))));\n};\n\nNewPhotoInfo.propTypes = {\n  photo: PropTypes.object.isRequired,\n  newSeries: PropTypes.object,\n  actions: PropTypes.shape({\n    onCancel: PropTypes.func.isRequired,\n    onSave: PropTypes.func\n  })\n};\nexport default NewPhotoInfo;","export default (function (theme) {\n  return {\n    root: {},\n    formLabel: {\n      color: theme.palette.text.secondary\n    },\n    dlgTitleContainer: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    mapFormLabel: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(1),\n      color: theme.palette.text.secondary\n    },\n    map: {\n      marginBottom: theme.spacing(2)\n    },\n    mapWrapper: {\n      marginBottom: theme.spacing(2)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { RawImage, PhotoGrid, PhotoFadeSlider } from '@morphoto/photos';\nimport { SeriesContext } from '../contexts';\nimport style from './PhotoReviewTool.style';\nvar useStyles = makeStyles(style);\n\nvar PhotoReviewTool = function PhotoReviewTool(_ref) {\n  var captured = _ref.captured,\n      defaultRefPhotoId = _ref.defaultRefPhotoId,\n      onConfirm = _ref.onConfirm,\n      onCancel = _ref.onCancel,\n      onRetry = _ref.onRetry,\n      dataUrl = _ref.dataUrl;\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var photos = series && series.photos ? series.photos : null;\n  var classes = useStyles();\n  var newRefPhoto = defaultRefPhotoId ? photos.find(function (p) {\n    return p.id === defaultRefPhotoId;\n  }) : photos && photos.length > 0 ? photos[0] : null;\n\n  var _useState = useState(newRefPhoto),\n      _useState2 = _slicedToArray(_useState, 2),\n      refPhoto = _useState2[0],\n      setRefPhoto = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawerOpen = _useState4[0],\n      setDrawerOpen = _useState4[1];\n\n  var _useState5 = useState(100),\n      _useState6 = _slicedToArray(_useState5, 2),\n      slider = _useState6[0],\n      setSlider = _useState6[1];\n\n  var handleTileClick = function handleTileClick(id) {\n    setRefPhoto(series.photos.find(function (p) {\n      return p.id === id;\n    }));\n    setDrawerOpen(false);\n  };\n\n  if (!captured) return 'Loading...';\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), Boolean(refPhoto) && React.createElement(PhotoFadeSlider, {\n    defaultValue: 100,\n    onChange: setSlider\n  }), React.createElement(\"div\", {\n    className: classes.captured\n  }, React.createElement(RawImage, {\n    sizePriority: ['large', 'medium', 'thumb'],\n    style: {\n      opacity: slider / 100\n    },\n    dataUrl: dataUrl,\n    photo: captured\n  })), Boolean(refPhoto) && React.createElement(\"div\", {\n    className: classes.reference\n  }, React.createElement(RawImage, {\n    sizePriority: ['large', 'medium', 'thumb'],\n    photo: refPhoto\n  })), React.createElement(Snackbar, {\n    open: true,\n    autoHideDuration: null,\n    ContentProps: {\n      'aria-describedby': 'snackbar-fab-message-id',\n      className: classes.snackbarContent\n    },\n    message: React.createElement(\"span\", {\n      id: \"snackbar-fab-message-id\"\n    }, \"Keep this photo?\"),\n    action: React.createElement(\"div\", null, React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onCancel\n    }, \"Cancel\"), Boolean(onRetry) && React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onRetry\n    }, \"Retry\"), React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onConfirm\n    }, \"Keep\")),\n    className: classes.snackbar\n  }), series && series.photos && React.createElement(Fab, {\n    \"aria-label\": \"library\",\n    className: classNames(classes.libraryFab, classes.buttonFab),\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: !series || !series.photos || series.photos.length === 0,\n    onClick: function onClick() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    className: classes.libraryIcon\n  })), series && series.photos && React.createElement(SwipeableDrawer, {\n    anchor: \"left\",\n    open: drawerOpen,\n    classes: {\n      paperAnchorLeft: classes.swipeDrawer\n    },\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: classes.swipeDrawerContainer,\n    role: \"button\",\n    onClick: function onClick() {\n      return setDrawerOpen(false);\n    },\n    onKeyDown: function onKeyDown() {\n      return setDrawerOpen(false);\n    }\n  }, React.createElement(PhotoGrid, {\n    multiSelect: false,\n    columns: 1,\n    photos: series.photos,\n    onTileClick: handleTileClick\n  }))));\n};\n\nPhotoReviewTool.propTypes = {\n  defaultRefPhotoId: PropTypes.string,\n  captured: PropTypes.object,\n  dataUrl: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onRetry: PropTypes.func\n};\nexport default PhotoReviewTool;","export default (function (theme) {\n  return {\n    root: {\n      background: 'rgb(150,150, 150)',\n      height: '100%',\n      width: '100%'\n    },\n    captured: {\n      zIndex: 3,\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    },\n    reference: {\n      zIndex: 2,\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    },\n    libraryFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        left: '15px',\n        top: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        top: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    swipeDrawer: {\n      width: '50%'\n    },\n    referenceTextContainer: {\n      width: '100%',\n      display: 'flex',\n      color: 'white',\n      background: 'rgba(0,0,0,0.5)',\n      padding: theme.spacing(3),\n      position: 'absolute',\n      zIndex: 4,\n      top: 0\n    },\n    newText: {\n      flexGrow: 1,\n      color: 'white',\n      textShadow: '1 1 1 black',\n      textAlign: 'right'\n    },\n    refText: {\n      flexGrow: 1,\n      color: 'white',\n      textShadow: '1 1 1 black'\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { CameraTool } from '@morphoto/camera';\nimport NewPhotoInfo from './NewPhotoInfo';\nimport PhotoReviewTool from './PhotoReviewTool';\nimport { LibraryFilePicker } from '@morphoto/ui';\nimport { getExif, Series as SeriesClass, Photo as PhotoClass } from '@morphoto/common';\nimport { SeriesContext } from '../contexts';\nimport { AppContext, useDeviceOrientation, useGeolocation } from '@morphoto/client-common';\nexport var NEW_PHOTO_MODES = {\n  CAMERA: 'camera',\n  FILEPICKER: 'library',\n  PHOTOREVIEW: 'photoreview',\n  PHOTOINFOEDIT: 'photoinfoedit'\n};\n\nvar NewPhoto = function NewPhoto(_ref) {\n  var inputMethod = _ref.inputMethod,\n      isNewSeries = _ref.isNewSeries,\n      actions = _ref.actions;\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      device = _useContext.device;\n\n  var geoRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      newPhotoData = _useState2[0],\n      setNewPhotoData = _useState2[1];\n\n  var _useContext2 = useContext(AppContext),\n      metaConfig = _useContext2.metaConfig;\n\n  var _useState3 = useState(isNewSeries ? new SeriesClass(metaConfig).series : series),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newSeries = _useState4[0],\n      setNewSeries = _useState4[1];\n\n  var _useState5 = useState(new PhotoClass(metaConfig).photo),\n      _useState6 = _slicedToArray(_useState5, 2),\n      newPhoto = _useState6[0],\n      setNewPhoto = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      photoRefId = _useState8[0],\n      setPhotoRefId = _useState8[1];\n\n  var _useState9 = useState({\n    current: inputMethod,\n    history: []\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      mode = _useState10[0],\n      _changeMode = _useState10[1];\n\n  var orientation = useDeviceOrientation();\n  var geo = useGeolocation();\n  geoRef.current = geo;\n  var photos = !isNewSeries && series && series.photos ? series.photos : [];\n\n  var changeMode = function changeMode(newModeName) {\n    console.log('NEWPHOTO changeMode', mode, newModeName);\n\n    _changeMode({\n      current: newModeName,\n      history: [].concat(_toConsumableArray(mode.history), [mode.current])\n    });\n  };\n\n  var lastMode = function lastMode() {\n    if (mode.history.length > 0) {\n      var oldHistory = _toConsumableArray(mode.history);\n\n      var oldMode = oldHistory.pop();\n\n      _changeMode({\n        current: oldMode,\n        history: oldHistory\n      });\n    } else {\n      actions.onCancel();\n    }\n  };\n\n  var onLibraryAdd = function onLibraryAdd(data) {\n    console.log('onLibraryAdd Debug GOT DATA', {\n      data: data,\n      isNewSeries: isNewSeries\n    });\n    setNewPhotoData(data);\n\n    var _getExif = getExif(data.dataUrl),\n        exif = _getExif.exif,\n        exifDateTime = _getExif.exifDateTime,\n        exifGPS = _getExif.exifGPS;\n\n    var coords = exifGPS;\n    var date = exifDateTime || String(Date.now());\n\n    if (!coords) {\n      if (geoRef.current && geoRef.current.latitude && geoRef.current.longitude) {\n        var _geoRef$current = geoRef.current,\n            latitude = _geoRef$current.latitude,\n            longitude = _geoRef$current.longitude;\n        coords = [longitude, latitude];\n      } else {\n        coords = [-123.1398254, 49.3050394];\n      }\n    }\n\n    if (isNewSeries) setNewSeries(_objectSpread({}, newSeries, {\n      coords: coords\n    }));\n    console.log('LATLONG FOR LIB PICK', {\n      coords: coords,\n      exifGPS: exifGPS,\n      geo: geo\n    });\n\n    var _newPhoto = _objectSpread({}, newPhoto, {\n      takenOn: date,\n      coords: coords,\n      rawData: JSON.stringify({\n        exif: exif,\n        sensors: {\n          orientation: orientation,\n          geo: geo\n        }\n      })\n    });\n\n    setNewPhoto(_newPhoto);\n    console.log('onLibraryAdd', _newPhoto);\n    changeMode(NEW_PHOTO_MODES.PHOTOREVIEW);\n    console.log('onLibraryAdd FINISHED', _newPhoto);\n  };\n\n  var onShutter = function onShutter(data, refId) {\n    console.log('onShutter Debug GOT DATA', {\n      data: data\n    });\n    setNewPhotoData(data);\n\n    var _getExif2 = getExif(data.dataUrl),\n        exif = _getExif2.exif,\n        exifGPS = _getExif2.exifGPS;\n\n    var date = String(Date.now());\n    var coords = [-123.1398254, 49.3050394];\n\n    if (geoRef.current && geoRef.current.latitude && geoRef.current.longitude) {\n      var _geoRef$current2 = geoRef.current,\n          latitude = _geoRef$current2.latitude,\n          longitude = _geoRef$current2.longitude;\n      coords = [longitude, latitude];\n    } else if (exifGPS) {\n      coords = exifGPS;\n    }\n\n    if (isNewSeries) setNewSeries(_objectSpread({}, newSeries, {\n      coords: coords\n    }));\n\n    var _newPhoto = _objectSpread({}, newPhoto, {\n      takenOn: date,\n      coords: coords,\n      rawData: JSON.stringify({\n        exif: exif,\n        sensors: {\n          orientation: orientation,\n          geo: geo\n        }\n      })\n    });\n\n    setNewPhoto(_newPhoto);\n    console.log('onShutter', {\n      _newPhoto: _newPhoto,\n      newSeries: _objectSpread({}, newSeries, {\n        coords: coords\n      })\n    });\n    setPhotoRefId(refId);\n    changeMode(NEW_PHOTO_MODES.PHOTOREVIEW);\n  };\n\n  var onFinalCreate = function onFinalCreate(seriesDelta, photoDelta) {\n    return actions.onCreate(seriesDelta, photoDelta, newPhotoData);\n  };\n\n  var component = null;\n\n  switch (mode.current) {\n    case NEW_PHOTO_MODES.CAMERA:\n      component = device.ios ? React.createElement(LibraryFilePicker, {\n        onCancel: actions.onCancel,\n        cameraPicker: true,\n        onLibraryAdd: onLibraryAdd\n      }) : React.createElement(CameraTool, {\n        photos: photos,\n        onShutter: onShutter,\n        onCancel: actions.onCancel\n      });\n      break;\n\n    case NEW_PHOTO_MODES.FILEPICKER:\n      component = React.createElement(LibraryFilePicker, {\n        onCancel: actions.onCancel,\n        onLibraryAdd: onLibraryAdd\n      });\n      break;\n\n    case NEW_PHOTO_MODES.PHOTOREVIEW:\n      component = React.createElement(PhotoReviewTool, {\n        defaultRefPhotoId: photoRefId,\n        photos: photos,\n        captured: newPhoto,\n        dataUrl: newPhotoData.dataUrl,\n        onConfirm: function onConfirm() {\n          return changeMode(NEW_PHOTO_MODES.PHOTOINFOEDIT);\n        },\n        onCancel: actions.onCancel,\n        onRetry: lastMode\n      });\n      break;\n\n    case NEW_PHOTO_MODES.PHOTOINFOEDIT:\n      component = React.createElement(NewPhotoInfo, {\n        photo: newPhoto,\n        newSeries: isNewSeries ? newSeries : null,\n        actions: {\n          onSave: onFinalCreate,\n          onCancel: actions.onCancel\n        }\n      });\n      break;\n\n    default:\n      console.log('NEWPHOTO: default state. you should NEVER see this', mode);\n      actions.onCancel();\n  }\n\n  return component;\n};\n\nNewPhoto.propTypes = {\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  isNewSeries: PropTypes.bool,\n  photos: PropTypes.array,\n  actions: PropTypes.shape({\n    onCreate: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired\n  })\n};\nexport default NewPhoto;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesNotFound = function SeriesNotFound(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Series\"))), React.createElement(\"div\", {\n    className: classes.placeholderInner\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), React.createElement(Typography, {\n    className: classes.placeholderText,\n    variant: \"h3\"\n  }, \"Series not found\"), React.createElement(\"div\", {\n    className: classes.grow\n  })));\n};\n\nSeriesNotFound.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default SeriesNotFound;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesLoading = function SeriesLoading(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Series\"))), React.createElement(\"div\", {\n    className: classes.placeholderInner\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), React.createElement(\"div\", {\n    className: classes.progressWrapper\n  }, React.createElement(CircularProgress, {\n    className: classes.progress,\n    color: \"inherit\",\n    size: 150,\n    thickness: 5\n  })), React.createElement(Typography, {\n    className: classes.placeholderText,\n    variant: \"h4\"\n  }, \"Loading...\"), React.createElement(\"div\", {\n    className: classes.grow\n  })));\n};\n\nSeriesLoading.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default SeriesLoading;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Slideshow from '@morphoto/slideshow';\nimport { AccessHelper } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nimport SeriesView from './views/SeriesView';\nimport SeriesEdit from './views/SeriesEdit';\nimport PhotoViewTool from './views/PhotoViewTool';\nimport NewPhoto from './views/NewPhoto';\nimport SeriesNotFound from './SeriesNotFound';\nimport SeriesLoading from './SeriesLoading';\nimport { SeriesContext } from './contexts';\nexport var SERIES_MODES = {\n  SERIES_VIEW: 'series',\n  SERIES_EDIT: 'editseries',\n  NEWPHOTO: 'newphoto',\n  NEWSERIES: 'newseries',\n  REVIEW: 'review',\n  PHOTO_VIEW: 'photoviewer',\n  PHOTO_VIEW_NEW: 'newphotoviewer',\n  SLIDESHOW: 'slideshow'\n};\nvar VIEW_ONLY_MODES = [SERIES_MODES.SERIES_VIEW, SERIES_MODES.PHOTO_VIEW, SERIES_MODES.SLIDESHOW];\nvar VALID_STARTMODES = [SERIES_MODES.SERIES_VIEW, SERIES_MODES.NEWPHOTO, SERIES_MODES.NEWSERIES, SERIES_MODES.PHOTO_REVIEW, SERIES_MODES.PHOTO_VIEW];\n\nvar RepeatablePhotos = function RepeatablePhotos(_ref) {\n  var modeName = _ref.modeName,\n      series = _ref.series,\n      inputMethodINIT = _ref.inputMethod,\n      currentUserId = _ref.currentUserId,\n      currentUserRole = _ref.currentUserRole,\n      initialPhoto = _ref.initialPhoto,\n      loading = _ref.loading,\n      watching = _ref.watching,\n      owned = _ref.owned,\n      actions = _ref.actions;\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device;\n\n  var _useState = useState({\n    series: series,\n    device: device,\n    ac: new AccessHelper(currentUserId, currentUserRole)\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      seriesContextState = _useState2[0],\n      setSeriesContextState = _useState2[1];\n\n  var _useState3 = useState({\n    current: {\n      name: modeName || SERIES_MODES.SERIES_VIEW,\n      pid: initialPhoto,\n      inputMethod: inputMethodINIT\n    },\n    history: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mode = _useState4[0],\n      setMode = _useState4[1];\n\n  useEffect(function () {\n    setSeriesContextState(_objectSpread({}, seriesContextState, {\n      series: series\n    }));\n    setMode({\n      current: {\n        name: modeName || SERIES_MODES.SERIES_VIEW,\n        pid: initialPhoto,\n        inputMethod: inputMethodINIT\n      },\n      history: []\n    });\n  }, [series]);\n\n  var onUpdatePhoto = function onUpdatePhoto(photo, photoDelta) {\n    var newSeries = _objectSpread({}, seriesContextState.series);\n\n    newSeries.photos = newSeries.photos.map(function (ph) {\n      return ph.id === photoDelta.id ? _objectSpread({}, ph, {}, photoDelta) : ph;\n    });\n    actions.onChangePhoto(photo, _objectSpread({}, photoDelta, {\n      seriesId: newSeries.id\n    }));\n  };\n\n  var onApprovePhoto =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(newSeries, newPhoto, newPhotoData) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('RepeatablePhotos: waiting for photo ID', {\n                newSeries: newSeries,\n                newPhoto: newPhoto,\n                newPhotoData: newPhotoData\n              });\n              _context.next = 3;\n              return actions.onNewPhoto(newPhoto, newPhotoData);\n\n            case 3:\n              setSeriesContextState(_objectSpread({}, seriesContextState, {\n                series: _objectSpread({}, series, {\n                  photos: [].concat(_toConsumableArray(series.photos), [newPhoto])\n                })\n              }));\n              changeMode(SERIES_MODES.PHOTO_VIEW_NEW, newPhoto.id);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onApprovePhoto(_x, _x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onDeletePhotos = function onDeletePhotos(photoIdArr) {\n    series.photos.filter(function (sp) {\n      return photoIdArr.indexOf(sp.id) > -1;\n    }).forEach(function (p) {\n      return actions.onDeletePhoto(p);\n    });\n  };\n\n  var changeMode = function changeMode(newModeName, newPid, newInputMethod) {\n    var canUpdate = seriesContextState.ac.canUser('update', series, 'series');\n    if (seriesContextState === null) actions.onClose();\n\n    if (!canUpdate && VIEW_ONLY_MODES.indexOf(newModeName) < 0) {\n      console.error('ILLEGAL MODE CHANGE!!!!!', {\n        from: mode.current,\n        to: newModeName,\n        canUpdate: canUpdate\n      });\n    } else {\n      setMode({\n        current: {\n          name: newModeName,\n          pid: newPid,\n          inputMethod: newInputMethod\n        },\n        history: [].concat(_toConsumableArray(mode.history), [mode.current])\n      });\n    }\n  };\n\n  var lastMode = function lastMode() {\n    if (mode.history.length > 0) {\n      var oldHistory = _toConsumableArray(mode.history);\n\n      var oldMode = oldHistory.pop();\n      setMode({\n        current: oldMode,\n        history: oldHistory\n      });\n    } else {\n      actions.onClose();\n    }\n  };\n\n  var viewPhoto = function viewPhoto(pid) {\n    changeMode(SERIES_MODES.PHOTO_VIEW, pid);\n  };\n\n  var component = null;\n  if (loading) return React.createElement(SeriesLoading, {\n    onMenuBack: actions.onClose\n  });else if (!seriesContextState.series && mode.current.name !== SERIES_MODES.NEWSERIES) return React.createElement(SeriesNotFound, {\n    onMenuBack: actions.onClose\n  });\n\n  switch (mode.current.name) {\n    case SERIES_MODES.SERIES_VIEW:\n      component = React.createElement(SeriesView, {\n        onSlideshowStart: function onSlideshowStart() {\n          return changeMode(SERIES_MODES.SLIDESHOW);\n        },\n        onChange: function onChange() {\n          console.log('onChange NOT IMPLEMENTED');\n        },\n        watching: watching,\n        owned: owned,\n        initialPhoto: initialPhoto,\n        onDeletePhotos: onDeletePhotos,\n        onDeleteSeries: actions.onDelete,\n        onFindOnMap: actions.onFindOnMap,\n        onCameraAdd: function onCameraAdd() {\n          return changeMode(SERIES_MODES.NEWPHOTO, null, 'camera');\n        },\n        onEditSeries: function onEditSeries() {\n          return changeMode(SERIES_MODES.SERIES_EDIT);\n        },\n        onLibraryAdd: function onLibraryAdd() {\n          return changeMode(SERIES_MODES.NEWPHOTO, null, 'library');\n        },\n        onTileClick: viewPhoto,\n        onMenuBack: actions.onClose,\n        onWatch: actions.onWatch,\n        onUnWatch: actions.onUnWatch\n      });\n      break;\n\n    case SERIES_MODES.SERIES_EDIT:\n      component = React.createElement(SeriesEdit, {\n        onCancel: function onCancel() {\n          return changeMode(SERIES_MODES.SERIES_VIEW);\n        },\n        onOk: function onOk(seriesDelta) {\n          actions.onChange(series, _objectSpread({}, seriesDelta, {\n            id: series.id\n          }));\n          changeMode(SERIES_MODES.SERIES_VIEW);\n        }\n      });\n      break;\n\n    case SERIES_MODES.PHOTO_VIEW:\n      component = React.createElement(PhotoViewTool, {\n        photos: seriesContextState.series.photos,\n        initPhotoId: mode.current.pid,\n        onMenuBack: lastMode,\n        onUpdatePhoto: onUpdatePhoto\n      });\n      break;\n\n    case SERIES_MODES.PHOTO_VIEW_NEW:\n      component = React.createElement(PhotoViewTool, {\n        photos: seriesContextState.series.photos,\n        initPhotoId: mode.current.pid,\n        newPhoto: true,\n        onMenuBack: function onMenuBack() {\n          return changeMode(SERIES_MODES.SERIES_VIEW);\n        },\n        onUpdatePhoto: onUpdatePhoto\n      });\n      break;\n\n    case SERIES_MODES.SLIDESHOW:\n      component = React.createElement(Slideshow, {\n        photos: seriesContextState.series.photos,\n        onCancel: lastMode\n      });\n      break;\n\n    case SERIES_MODES.NEWPHOTO:\n      component = React.createElement(NewPhoto, {\n        inputMethod: mode.current.inputMethod,\n        photos: series ? series.photos : null,\n        actions: {\n          onCreate: onApprovePhoto,\n          onCancel: lastMode\n        }\n      });\n      break;\n\n    case SERIES_MODES.NEWSERIES:\n      component = React.createElement(NewPhoto, {\n        inputMethod: mode.current.inputMethod,\n        isNewSeries: true,\n        actions: {\n          onCreate: actions.onNewSeries,\n          onCancel: lastMode\n        }\n      });\n      break;\n\n    default:\n      console.log('REPEATABLEPHOTO: default state. you should NEVER see this', seriesContextState);\n      component = null;\n  }\n\n  return React.createElement(SeriesContext.Provider, {\n    value: seriesContextState\n  }, component);\n};\n\nRepeatablePhotos.propTypes = {\n  modeName: PropTypes.oneOf(VALID_STARTMODES),\n  watching: PropTypes.bool,\n  owned: PropTypes.bool,\n  currentUserId: PropTypes.string,\n  currentUserRole: PropTypes.string,\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  series: PropTypes.object,\n  initialPhoto: PropTypes.string,\n  loading: PropTypes.bool,\n  actions: PropTypes.shape({\n    onChange: PropTypes.func.isRequired,\n    onFindOnMap: PropTypes.func.isRequired,\n    onChangePhoto: PropTypes.func.isRequired,\n    onDeletePhoto: PropTypes.func.isRequired,\n    onNewPhoto: PropTypes.func.isRequired,\n    onNewSeries: PropTypes.func.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onWatch: PropTypes.func,\n    onUnWatch: PropTypes.func\n  })\n};\nRepeatablePhotos.defaultProps = {\n  mode: SERIES_MODES.SERIES_VIEW\n};\nexport default RepeatablePhotos;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Fab from '@material-ui/core/Fab';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesList.style';\nimport { dates } from '@morphoto/common';\nimport { RawImage } from '@morphoto/photos';\nimport { useNewImageMenu } from '@morphoto/ui';\nvar useStyles = makeStyles(style);\n\nvar SeriesList = function SeriesList(_ref) {\n  var seriesList = _ref.seriesList,\n      canEdit = _ref.canEdit,\n      tileClick = _ref.tileClick,\n      columns = _ref.columns,\n      cameraClick = _ref.cameraClick,\n      libraryClick = _ref.libraryClick;\n  var classes = useStyles();\n\n  var _useNewImageMenu = useNewImageMenu(cameraClick, libraryClick),\n      onDownThunk = _useNewImageMenu.onDownThunk,\n      onUpThunk = _useNewImageMenu.onUpThunk,\n      onBlock = _useNewImageMenu.onBlock,\n      menu = _useNewImageMenu.menu;\n\n  return React.createElement(GridList, {\n    cols: columns || 1,\n    cellHeight: 200,\n    className: classes.root\n  }, seriesList.map(function (seriesItem, idx) {\n    var photo = seriesItem.photos[0];\n    return React.createElement(GridListTile, {\n      key: \"gridTile\".concat(idx),\n      onClick: function onClick() {\n        return tileClick(seriesItem);\n      }\n    }, photo && React.createElement(RawImage, {\n      sizePriority: ['medium', 'thumb', 'large'],\n      photo: photo\n    }), canEdit && React.createElement(Fab, {\n      onClick: onBlock,\n      onMouseDown: onDownThunk(seriesItem),\n      onMouseUp: onUpThunk(seriesItem),\n      onTouchStart: onDownThunk(seriesItem),\n      onTouchEnd: onUpThunk(seriesItem),\n      color: \"secondary\",\n      className: classes.fab\n    }, React.createElement(AddCameraIcon, null)), menu, React.createElement(GridListTileBar, {\n      title: seriesItem.name,\n      subtitle: React.createElement(\"span\", null, seriesItem.photos.length, \" photos \", React.createElement(\"strong\", null, \"Last Photo\"), \": \", dates.formatDate(seriesItem.photos[0].takenOn, 'llll'))\n    }));\n  }));\n};\n\nSeriesList.propTypes = {\n  seriesList: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  canEdit: PropTypes.bool,\n  tileClick: PropTypes.func.isRequired,\n  cameraClick: PropTypes.func.isRequired,\n  libraryClick: PropTypes.func.isRequired\n};\nexport default SeriesList;","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'space-around',\n      overflow: 'hidden',\n      backgroundColor: theme.palette.background.paper\n    },\n    fab: {\n      position: 'absolute',\n      top: 10,\n      right: 10,\n      height: theme.spacing(5),\n      width: theme.spacing(5)\n    },\n    fab2: {\n      position: 'absolute',\n      top: 10,\n      left: 10,\n      height: theme.spacing(5),\n      width: theme.spacing(5)\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { ThemeProvider } from '@material-ui/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { RawImage } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { config } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      margin: 0,\n      padding: theme.spacing(1)\n    },\n    chipContainer: {\n      display: 'flex',\n      width: '100%'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    accessLabel: {\n      padding: theme.spacing(0.5, 0.5)\n    },\n    img: {\n      verticalAlign: 'top',\n      objectFit: 'cover',\n      height: '100%',\n      width: '100%'\n    },\n    text: {\n      height: '115px',\n      margin: 0,\n      padding: theme.spacing(0, 1),\n      alignSelf: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    textSm: {\n      height: '75px',\n      margin: 0,\n      padding: theme.spacing(0, 1),\n      alignSelf: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    titleText: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    dateContainer: {\n      display: 'flex'\n    },\n    dateLabel: {\n      fontWeight: 'bold',\n      flex: '1 1 50px'\n    },\n    dateText: {},\n    imgFiller: {\n      flexGrow: 1,\n      background: theme.palette.text.primary,\n      overflow: 'hidden'\n    },\n    imgContainer: {\n      flex: '0 0 115px',\n      alignSelf: 'flex-start',\n      height: 115,\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    imgContainerSm: {\n      flex: '0 0 75px',\n      alignSelf: 'flex-start',\n      height: 75,\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar SeriesListItem = function SeriesListItem(_ref) {\n  var series = _ref.series,\n      loading = _ref.loading,\n      onClick = _ref.onClick,\n      children = _ref.children,\n      showCreatedOn = _ref.showCreatedOn,\n      showLastPhoto = _ref.showLastPhoto,\n      small = _ref.small;\n  var classes = useStyles();\n  if (loading || !series) return 'LOADING...';\n  var accessLabel = config.ACCESS.PRIVATE.label;\n  accessLabel = series.access ? config.ACCESS[series.access].label : config.ACCESS.PRIVATE.label;\n  return React.createElement(ListItem, {\n    className: classes.root,\n    button: true,\n    component: \"div\",\n    disableGutters: true\n  }, React.createElement(\"div\", {\n    className: small ? classes.imgContainerSm : classes.imgContainer,\n    onClick: onClick\n  }, React.createElement(\"div\", {\n    className: classes.imgFiller\n  }, React.createElement(RawImage, {\n    photo: series.featured,\n    sizePriority: ['thumb', 'medium', 'large'],\n    className: classes.img\n  })), series.access && React.createElement(ThemeProvider, {\n    theme: themes.access[series.access]\n  }, React.createElement(Typography, {\n    className: classNames(classes.accessLabel),\n    variant: \"caption\",\n    component: \"div\"\n  }, \"\".concat(series.photoCount || 0, \" Photos\"), !small && React.createElement(\"em\", null, \"(\", accessLabel, \")\")))), React.createElement(ListItemText, {\n    className: small ? classes.textSm : classes.text,\n    disableTypography: true,\n    onClick: onClick\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    component: \"div\",\n    className: classes.titleText\n  }, series.name || loading), React.createElement(Typography, {\n    variant: \"body2\",\n    component: \"div\"\n  }, React.createElement(\"strong\", null, \"Created by:\"), \" \", series.createdUser.username), React.createElement(\"div\", {\n    className: classes.grow\n  }), showCreatedOn && React.createElement(\"div\", {\n    className: classes.dateContainer\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateLabel\n  }, \"Created:\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateText\n  }, dates.formatDate(series.createdOn, 'lll'))), showLastPhoto && series.latest && React.createElement(\"div\", {\n    className: classes.dateContainer\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateLabel\n  }, \"Last Photo:\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateText\n  }, dates.formatDate(series.latest.takenOn, 'lll')))), children);\n};\n\nSeriesListItem.propTypes = {\n  series: PropTypes.object,\n  loading: PropTypes.bool,\n  small: PropTypes.bool,\n  showCreatedOn: PropTypes.bool,\n  showLastPhoto: PropTypes.bool,\n  onClick: PropTypes.func,\n  children: PropTypes.array\n};\nexport default SeriesListItem;\nexport var SeriesListItemCosmos = function SeriesListItemCosmos(props) {\n  return React.createElement(List, {\n    disablePadding: true,\n    dense: true\n  }, React.createElement(SeriesListItem, props));\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { List } from '@material-ui/core';\nimport SeriesListItem from './SeriesListItem';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    },\n    list: {\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ViewListDialog = function ViewListDialog(_ref) {\n  var title = _ref.title,\n      seriesList = _ref.seriesList,\n      onSelect = _ref.onSelect,\n      onClose = _ref.onClose,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    fullWidth: true,\n    open: open,\n    onClose: onClose,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    color: \"inherit\"\n  }))), React.createElement(List, {\n    className: classes.list,\n    dense: true,\n    disablePadding: true\n  }, seriesList.map(function (series) {\n    return React.createElement(SeriesListItem, {\n      key: \"series\".concat(series.id),\n      series: series,\n      small: true,\n      onClick: function onClick() {\n        return onSelect(series.id);\n      }\n    });\n  })));\n};\n\nViewListDialog.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  seriesList: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default ViewListDialog;","import PhotoSeries from './PhotoSeries';\nexport default PhotoSeries;\nexport { SERIES_MODES } from './PhotoSeries';\nexport { default as SeriesList } from './SeriesList';\nexport { default as SeriesListItem } from './SeriesListItem';\nexport { default as ViewListDialog } from './ViewListDialog';\nexport { default as PhotoReviewTool } from './views/PhotoReviewTool';\nexport { default as NewPhoto, NEW_PHOTO_MODES } from './views/NewPhoto';","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \" M 16 8 L 16 8.938 L 14 8.938 L 14 10.938 L 16 10.938 L 16 12 L 16 14 L 16 14 L 16 15 L 14 15 L 14 17 L 16 17 L 16 17 L 16 18 L 12.969 18 L 12.969 14 L 15 14 L 15 12 L 12.969 12 L 12.969 7.969 L 12.969 7.969 L 12.969 7.969 C 12.969 7.417 12.521 6.969 11.969 6.969 C 11.417 6.969 10.969 7.417 10.969 7.969 L 10.969 12 L 9 12 L 9 14 L 10.969 14 L 10.969 18 L 8 18 L 8 17 L 10 17 L 10 15 L 8 15 L 8 15 L 8 14 L 8 14 L 8 12 L 8 10.938 L 8 10.938 L 10 10.938 L 10 8.938 L 8 8.938 L 8 8 C 8 7.448 7.552 7 7 7 C 6.448 7 6 7.448 6 8 L 6 8 L 6 8.938 L 5 8.938 L 5 10.938 L 6 10.938 L 6 12 L 4 12 L 4 8 C 4 7.448 3.552 7 3 7 C 2.448 7 2 7.448 2 8 L 2 10.4 L 2 12 L 2 14 L 2 16 L 2 17.6 C 2 18.925 3.075 20 4.4 20 L 19.6 20 C 20.925 20 22 18.925 22 17.6 L 22 16 L 22 14 L 22 12 L 22 10.4 L 22 10.4 L 22 8 C 22 7.448 21.552 7 21 7 C 20.448 7 20 7.448 20 8 L 20 12 L 18 12 L 18 10.938 L 18 10.938 L 19 10.938 L 19 8.938 L 18 8.938 L 18 8 C 18 7.448 17.552 7 17 7 C 16.448 7 16 7.448 16 8 Z  M 6 15 L 6 14 L 6 14 L 6 14 L 6 14 L 4 14 L 4 15.69 C 4 16.86 4.871 17.828 6 17.979 L 6 17 L 5 17 L 5 15 L 6 15 L 6 15 L 6 15 L 6 15 L 6 15 Z  M 18 15 L 18 14 L 18 14 L 18 14 L 20 14 L 20 15.69 C 20 16.86 19.129 17.828 18 17.979 L 18 17 L 19 17 L 19 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 Z \",\n  fillRule: \"evenodd\"\n})), 'BDA');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M16.432,6.104c-2.671,-1.06 -6.842,4.123 -6.572,5.826c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873Z\"\n}), React.createElement(\"path\", {\n  d: \"M9.159,5.228c-2.254,1.782 0.149,7.986 1.76,8.604c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066Z\"\n}), React.createElement(\"path\", {\n  d: \"M4.727,11.059c0.417,2.844 6.991,3.864 8.331,2.779c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94Z\"\n}), React.createElement(\"path\", {\n  d: \"M7.561,17.813c2.671,1.061 6.842,-4.122 6.572,-5.826c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873Z\"\n}), React.createElement(\"path\", {\n  d: \"M14.828,18.736c2.254,-1.783 -0.149,-7.987 -1.76,-8.605c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067Z\"\n}), React.createElement(\"path\", {\n  d: \"M19.26,12.904c-0.417,-2.843 -6.991,-3.864 -8.331,-2.778c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94Z\"\n})), 'AppLogoSimple');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M22,2l0,20l-20,0l0,-20l20,0Zm-2,2l-16,0l0,16l16,0l0,-16Z\"\n}), React.createElement(\"rect\", {\n  x: \"5\",\n  y: \"5\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"15\",\n  y: \"5\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"5\",\n  y: \"15\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"10\",\n  width: \"1\",\n  height: \"5\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"10\",\n  width: \"6\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"12\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"13\",\n  y: \"7\",\n  width: \"1\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"14\",\n  y: \"9\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"8\",\n  y: \"10\",\n  width: \"1\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"7\",\n  y: \"11\",\n  width: \"1\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"9\",\n  y: \"11\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"6\",\n  width: \"2\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"12\",\n  y: \"7\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"15\",\n  y: \"14\",\n  width: \"2\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"14\",\n  y: \"14\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"17\",\n  y: \"15\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"16\",\n  width: \"1\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"12\",\n  y: \"15\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"18\",\n  width: \"1\",\n  height: \"1\"\n})), 'QRCode');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M21.229,18.388c-0.346,0.799 -0.756,1.535 -1.23,2.211c-0.647,0.922 -1.176,1.56 -1.584,1.914c-0.632,0.582 -1.31,0.88 -2.036,0.897c-0.521,0 -1.149,-0.148 -1.88,-0.449c-0.734,-0.299 -1.408,-0.448 -2.025,-0.448c-0.646,0 -1.34,0.149 -2.081,0.448c-0.743,0.301 -1.342,0.457 -1.799,0.473c-0.696,0.03 -1.39,-0.277 -2.082,-0.921c-0.442,-0.385 -0.995,-1.046 -1.657,-1.982c-0.71,-0.999 -1.294,-2.158 -1.752,-3.48c-0.49,-1.427 -0.735,-2.809 -0.735,-4.147c0,-1.533 0.331,-2.855 0.994,-3.963c0.521,-0.89 1.215,-1.591 2.083,-2.107c0.868,-0.515 1.806,-0.778 2.816,-0.794c0.553,0 1.278,0.17 2.179,0.506c0.898,0.338 1.474,0.509 1.727,0.509c0.189,0 0.83,-0.2 1.916,-0.599c1.027,-0.369 1.894,-0.522 2.604,-0.462c1.924,0.155 3.37,0.914 4.331,2.28c-1.721,1.043 -2.572,2.503 -2.555,4.377c0.016,1.459 0.545,2.674 1.585,3.638c0.472,0.447 0.999,0.793 1.584,1.039c-0.127,0.368 -0.261,0.721 -0.403,1.06Zm-4.413,-17.366c0,1.144 -0.418,2.212 -1.251,3.2c-1.005,1.176 -2.221,1.855 -3.54,1.748c-0.017,-0.138 -0.026,-0.282 -0.026,-0.434c0,-1.098 0.478,-2.273 1.327,-3.234c0.423,-0.486 0.962,-0.891 1.616,-1.214c0.652,-0.318 1.269,-0.493 1.85,-0.523c0.016,0.152 0.024,0.305 0.024,0.457l0,0Z\"\n})), 'Apple');","export { default as BDA } from './BDA';\nexport { default as AppLogo } from './AppLogo';\nexport { default as AppLogoSimple } from './AppLogoSimple';\nexport { default as QRCode } from './QRCode';\nexport { default as Apple } from './Apple';","import React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { QRCode as QRCodeIcon, AppLogoSimple } from '@morphoto/icons';\nimport { AppContext } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    appBar: {\n      background: 'transparent'\n    },\n    toolbar: {\n      display: 'flex',\n      alignItems: 'center',\n      width: '100%',\n      padding: theme.spacing(0, 1),\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      borderBottom: \"2px solid \".concat(theme.palette.primary.main),\n      background: \"linear-gradient(90deg, \".concat(theme.palette.primary.main, \" 0%, \").concat(theme.palette.secondary.main, \" 100%)\")\n    },\n    searchIcon: {\n      opacity: 0.3,\n      marginRight: theme.spacing(1)\n    },\n    transparent: {\n      backgroundColor: 'transparent',\n      background: 'none',\n      color: theme.palette.text.primary,\n      borderBottom: \"2px solid transparent\"\n    },\n    iOsIcon: {\n      color: 'rgba(0, 0, 0, 0.26)'\n    },\n    logo: {\n      padding: theme.spacing(0, 0),\n      height: 40,\n      width: 40\n    },\n    transparentLogo: {\n      background: \"linear-gradient(90deg, \".concat(theme.palette.primary.main, \" 0%, \").concat(theme.palette.secondary.main, \" 100%)\"),\n      padding: theme.spacing(0.5, 0.5)\n    },\n    transparentLogoIcon: {\n      color: 'white',\n      height: 35,\n      width: 35\n    },\n    children: {\n      flexGrow: 1,\n      padding: theme.spacing(0, 1)\n    },\n    qrButton: {\n      padding: theme.spacing(0, 0)\n    },\n    qrButtonTransparent: {\n      background: 'white',\n      padding: theme.spacing(0.5, 0.5)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TopBar = function TopBar(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      isTransparent = _ref.isTransparent,\n      hideLogo = _ref.hideLogo,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device;\n\n  return React.createElement(AppBar, {\n    elevation: 0,\n    position: isTransparent ? 'absolute' : 'static',\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    className: classNames(classes.toolbar, className, isTransparent ? classes.transparent : null),\n    disableGutters: true\n  }, !hideLogo && React.createElement(IconButton, {\n    className: isTransparent ? classes.transparentLogo : classes.logo,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return actions.setDrawerOpen(true);\n    }\n  }, React.createElement(AppLogoSimple, {\n    className: isTransparent ? classes.transparentLogoIcon : classes.logo\n  })), React.createElement(\"div\", {\n    className: classes.children\n  }, children), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(device.ios ? classes.iOsIcon : null, isTransparent ? classes.qrButtonTransparent : classes.qrButton),\n    \"aria-label\": \"Menu\",\n    onClick: actions.onQRClickWrapped\n  }, React.createElement(QRCodeIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nTopBar.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any,\n  isTransparent: PropTypes.bool,\n  hideLogo: PropTypes.bool,\n  actions: PropTypes.shape({\n    onQRClickWrapped: PropTypes.func,\n    setDrawerOpen: PropTypes.func.isRequred\n  })\n};\nexport default TopBar;","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport InfoIcon from '@material-ui/icons/Info';\nimport MobileScreenShare from '@material-ui/icons/MobileScreenShare';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { QRCode as QRCodeIcon } from '@morphoto/icons';\nimport { AppContext } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    drawerInner: {\n      width: 250,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    disableListItem: {\n      color: 'rgba(0, 0, 0, 0.26)'\n    },\n    avatar: {\n      height: theme.spacing(7),\n      width: theme.spacing(7),\n      border: \"3px solid \".concat(theme.palette.primary.main),\n      margin: theme.spacing(0, 1)\n    },\n    gravatarImg: {\n      width: '100%'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    fullList: {\n      width: 'auto'\n    }\n  };\n});\n\nvar SideDrawer = function SideDrawer(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      onOpen = _ref.onOpen,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      currentUser = _useContext.currentUser,\n      signedIn = _useContext.signedIn,\n      globalActions = _useContext.globalActions;\n\n  return React.createElement(SwipeableDrawer, {\n    open: open,\n    onClose: onClose,\n    onOpen: onOpen\n  }, React.createElement(\"div\", {\n    className: classes.drawerInner,\n    role: \"presentation\",\n    onClick: onClose,\n    onKeyDown: onClose\n  }, currentUser && currentUser.username && React.createElement(List, null, React.createElement(ListItem, {\n    className: classes.root,\n    onClick: function onClick() {},\n    disableGutters: true\n  }, React.createElement(Avatar, {\n    className: classes.avatar\n  }, signedIn && currentUser ? React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: currentUser.gravatar\n  }) : React.createElement(AccountCircleIcon, {\n    color: \"inherit\",\n    className: classes.loginButton\n  }))), React.createElement(ListItem, {\n    className: classes.root,\n    onClick: function onClick() {}\n  }, React.createElement(ListItemText, {\n    primary: currentUser.username\n  }))), React.createElement(Divider, null), React.createElement(List, null, React.createElement(ListItem, {\n    className: device.ios ? classes.disableListItem : null,\n    button: true,\n    onClick: device.ios ? actions.onDisabledClick : globalActions.onQRButtonClick\n  }, React.createElement(ListItemIcon, null, React.createElement(QRCodeIcon, null)), React.createElement(ListItemText, {\n    primary: 'Scan QR Code'\n  })), globalActions.addToHomeScreen && React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.addToHomeScreen\n  }, React.createElement(ListItemIcon, null, React.createElement(MobileScreenShare, null)), React.createElement(ListItemText, {\n    primary: 'Install this app',\n    secondary: 'It works better!'\n  })), React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.onOfflineMenuClick\n  }, React.createElement(ListItemIcon, null, React.createElement(CloudDownload, null)), React.createElement(ListItemText, {\n    primary: 'Offline Download'\n  }))), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Divider, null), React.createElement(List, null, React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.onSettingsClick\n  }, React.createElement(ListItemIcon, null, React.createElement(SettingsIcon, null)), React.createElement(ListItemText, {\n    primary: 'App Settings'\n  })), React.createElement(ListItem, {\n    button: true,\n    onClick: actions.onAboutClick\n  }, React.createElement(ListItemIcon, null, React.createElement(InfoIcon, null)), React.createElement(ListItemText, {\n    primary: 'About'\n  })), signedIn ? React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.signOut\n  }, React.createElement(ListItemIcon, null, React.createElement(ExitToAppIcon, null)), React.createElement(ListItemText, {\n    primary: 'Sign Out'\n  })) : React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.forceSignIn\n  }, React.createElement(ListItemIcon, null, React.createElement(AccountCircleIcon, null)), React.createElement(ListItemText, {\n    primary: 'Sign In'\n  })))));\n};\n\nSideDrawer.propTypes = {\n  open: PropTypes.bool,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  actions: PropTypes.shape({\n    onDisabledClick: PropTypes.func,\n    onAboutClick: PropTypes.func\n  })\n};\nexport default SideDrawer;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { FeatureDisabled } from '@morphoto/modals';\nimport { AboutApp } from '@morphoto/ui';\nimport SideDrawer from './SideDrawer';\nimport TopBar from './TopBar';\nimport { AppContext, config } from '@morphoto/client-common';\nimport { Typography } from '@material-ui/core';\nvar DIALOGS = {\n  APPLE_WARNING: 'APPLE_WARNING',\n  ABOUTAPP: 'ABOUTAPP'\n};\n\nvar TopBarWrapper = function TopBarWrapper(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      topBarProps = _objectWithoutProperties(_ref, [\"className\", \"children\"]);\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      globalActions = _useContext.globalActions;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dialogOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawerOpen = _useState4[0],\n      setDrawerOpen = _useState4[1];\n\n  var handleQRClick = device.ios ? function () {\n    return setDialogOpen(DIALOGS.APPLE_WARNING);\n  } : globalActions.onQRButtonClick;\n  return React.createElement(React.Fragment, null, React.createElement(TopBar, _extends({}, topBarProps, {\n    children: children,\n    actions: {\n      onQRClickWrapped: handleQRClick,\n      setDrawerOpen: setDrawerOpen\n    }\n  })), React.createElement(SideDrawer, {\n    open: drawerOpen,\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    },\n    actions: {\n      onDisabledClick: function onDisabledClick() {\n        return setDialogOpen(DIALOGS.APPLE_WARNING);\n      },\n      onAboutClick: function onAboutClick() {\n        return setDialogOpen(DIALOGS.ABOUTAPP);\n      }\n    }\n  }), device.ios && React.createElement(FeatureDisabled, {\n    open: dialogOpen === DIALOGS.APPLE_WARNING,\n    title: \"iOS Feature Disabled\",\n    message: React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, React.createElement(\"p\", null, \"This feature cannot function due to a bug in iOS 12 that prevents \", React.createElement(\"strong\", null, \"direct camera access from progressive web apps\"), \".\"), React.createElement(\"p\", null, \"There is good evidence iOS 13 has things sorted. ETA from Apple is mid-September 2019.\")),\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    }\n  }), React.createElement(AboutApp, {\n    open: dialogOpen === DIALOGS.ABOUTAPP,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    },\n    version: config.version\n  }));\n};\n\nTopBarWrapper.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any\n};\nexport default TopBarWrapper;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef, useEffect, useState, useContext } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nvar CHECKINTERVAL = 5000;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      background: 'black',\n      color: 'white',\n      textAlign: 'center'\n    }\n  };\n});\n\nvar OfflineBar = function OfflineBar() {\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      sinceStr = _useState2[0],\n      setSinceStr = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online,\n      signedIn = _useContext.signedIn;\n\n  var timerRef = useRef();\n\n  var calcSinceStr = function calcSinceStr() {\n    var newText = dates.fromNow(online.offlineSince);\n    setSinceStr(newText);\n  };\n\n  var clearTimer = function clearTimer() {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n\n  useEffect(function () {\n    if (online.offlineSince && !timerRef.current) {\n      calcSinceStr();\n      timerRef.current = setInterval(calcSinceStr, CHECKINTERVAL);\n    } else if (!online.offlineSince) clearTimer();\n\n    return function () {\n      clearTimer();\n    };\n  }, [online.offlineSince]);\n  var loggedText = !signedIn ? 'You are not signed in.' : '';\n  var offlineText = !online.isOnline ? \"Offline (\".concat(sinceStr, \")\") : '';\n  if (online.isOnline && signedIn) return null;\n  return React.createElement(Typography, {\n    className: classes.root,\n    variant: \"caption\",\n    component: \"div\"\n  }, loggedText, \" \", offlineText);\n};\n\nexport default OfflineBar;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport HomeIcon from '@material-ui/icons/HomeOutlined';\nimport MapIcon from '@material-ui/icons/MapOutlined';\nimport SearchIcon from '@material-ui/icons/SearchOutlined';\nimport AddIcon from '@material-ui/icons/Add';\nimport PersonOutline from '@material-ui/icons/PersonOutline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { config, AppContext } from '@morphoto/client-common';\nimport { AddFab } from '@morphoto/ui';\nimport OfflineBar from './OfflineBar';\nvar STATES = config.home.AppStateTypes;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      borderTop: \"2px solid \".concat(theme.palette.secondary.main)\n    },\n    container: {\n      padding: 0,\n      display: 'flex'\n    },\n    toolbar: {\n      color: theme.palette.jet.main,\n      backgroundColor: theme.palette.papayawhip.main\n    },\n    text: {\n      padding: theme.spacing(2, 2, 0)\n    },\n    paper: {\n      paddingBottom: 50\n    },\n    list: {\n      marginBottom: theme.spacing(2)\n    },\n    subheader: {\n      backgroundColor: theme.palette.background.paper\n    },\n    grow: {\n      flexGrow: 1\n    },\n    addFab: {\n      position: 'absolute',\n      bottom: 0,\n      left: '50%',\n      transformOrigin: '0% 100%',\n      transform: 'translateY(-25%) translateX(-50%) translateZ(0)',\n      zIndex: 200\n    },\n    spacer: {\n      width: 40,\n      flexGrow: 1\n    }\n  };\n});\n\nvar BottomBar = function BottomBar(_ref) {\n  var className = _ref.className,\n      domain = _ref.domain;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions,\n      signedIn = _useContext.signedIn;\n\n  return React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.root, className)\n  }, React.createElement(Toolbar, {\n    className: classes.toolbar\n  }, React.createElement(Container, {\n    maxWidth: \"sm\",\n    className: classes.container\n  }, signedIn && React.createElement(Button, {\n    edge: \"start\",\n    className: classes.grow,\n    color: domain === STATES.FEED ? 'secondary' : 'inherit',\n    onClick: domain !== STATES.FEED ? function () {\n      return globalActions.setHomeState(STATES.FEED);\n    } : function () {}\n  }, React.createElement(HomeIcon, null)), React.createElement(Button, {\n    edge: \"start\",\n    className: classes.grow,\n    color: domain === STATES.MAP ? 'secondary' : 'inherit',\n    onClick: domain !== STATES.MAP ? function () {\n      return globalActions.setHomeState(STATES.MAP);\n    } : function () {}\n  }, React.createElement(MapIcon, null)), signedIn && React.createElement(AddFab, {\n    className: classes.addFab,\n    onCameraClick: globalActions.onCameraClick,\n    onLibraryClick: globalActions.onLibraryClick\n  }, React.createElement(AddIcon, null)), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: domain === STATES.SEARCH ? 'secondary' : 'inherit',\n    className: classes.grow,\n    onClick: domain !== STATES.SEARCH ? function () {\n      return globalActions.setHomeState(STATES.SEARCH);\n    } : function () {}\n  }, React.createElement(SearchIcon, null)), signedIn && React.createElement(Button, {\n    edge: \"end\",\n    color: domain === STATES.PROFILE ? 'secondary' : 'inherit',\n    className: classes.grow,\n    onClick: domain !== STATES.PROFILE ? function () {\n      return globalActions.setHomeState(STATES.PROFILE);\n    } : function () {}\n  }, React.createElement(PersonOutline, null)))));\n};\n\nBottomBar.propTypes = {\n  className: PropTypes.string,\n  domain: PropTypes.string,\n  signedIn: PropTypes.bool\n};\nexport default BottomBar;\nexport var BottomBarCosmosWrapper = function BottomBarCosmosWrapper(props) {\n  var classes = useWrapperStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(OfflineBar, _extends({}, props, {\n    offlineSince: Date.now() - 3600000\n  })), React.createElement(CssBaseline, null), \" \", React.createElement(Paper, {\n    className: classes.paper\n  }, React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"This is a dummy component.\")), React.createElement(BottomBar, props));\n};\n\nvar wrapperStyle = function wrapperStyle(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    paper: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useWrapperStyles = makeStyles(wrapperStyle);","export { default as TopBar } from './TopBar';\nexport { default as TopBarWrapper } from './TopBarWrapper';\nexport { default as BottomBar } from './BottomBar';\nexport { default as OfflineBar } from './OfflineBar';\nexport { default as SideDrawer } from './SideDrawer';","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Chip from '@material-ui/core/Chip';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nexport var tagChips = {\n  height: 20\n};\n\nvar style = function style(theme) {\n  return {\n    root: {\n      fontSize: '0.6em',\n      height: tagChips.height,\n      marginRight: theme.spacing(1) / 2,\n      marginTop: theme.spacing(1) / 2\n    },\n    deleteIcon: {\n      width: tagChips.height - 1,\n      height: tagChips.height - 1\n    },\n    chipAvatar: {\n      width: tagChips.height,\n      height: tagChips.height\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagChip = function TagChip(_ref) {\n  var edit = _ref.edit,\n      tag = _ref.tag,\n      color = _ref.color,\n      onDelete = _ref.onDelete,\n      props = _objectWithoutProperties(_ref, [\"edit\", \"tag\", \"color\", \"onDelete\"]);\n\n  var classes = useStyles();\n  var theme = useTheme();\n  return React.createElement(Chip, _extends({\n    style: {\n      background: color || null,\n      color: color ? \"\".concat(theme.palette.getContrastText(color)) : null\n    },\n    label: tag.label,\n    data: tag.id,\n    onDelete: edit ? function () {\n      return onDelete(tag);\n    } : null,\n    deleteIcon: React.createElement(CancelIcon, {\n      className: classes.deleteIcon,\n      onClick: function onClick(e) {\n        console.log('this click');\n      },\n      style: {\n        opacity: 0.5,\n        color: color ? \"\".concat(theme.palette.getContrastText(color)) : null\n      }\n    }),\n    className: classes.root\n  }, props));\n};\n\nTagChip.propTypes = {\n  color: PropTypes.string.isRequired,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  onDelete: PropTypes.func\n};\nexport default TagChip;","export default (function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    tagContainer: {},\n    formControl: {},\n    singleValue: {\n      fontSize: 16\n    },\n    valueContainer: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      flex: 1,\n      alignItems: 'center',\n      overflow: 'hidden'\n    },\n    paper: {}\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport TagChip from './TagChip';\nimport style from './TagControl.style';\nvar useStyles = makeStyles(style);\n\nvar TagControl = function TagControl(_ref) {\n  var tags = _ref.tags,\n      onChange = _ref.onChange,\n      hint = _ref.hint,\n      tagConfig = _ref.tagConfig,\n      className = _ref.className;\n  var classes = useStyles();\n\n  var onSelectChange = function onSelectChange(inputValue, _ref2) {\n    var action = _ref2.action,\n        removedValue = _ref2.removedValue,\n        option = _ref2.option;\n    onChange(inputValue.map(function (iv) {\n      return {\n        typeId: tagConfig.id,\n        label: iv.label,\n        xyCoords: null\n      };\n    }));\n  };\n\n  var MultiValue = function MultiValue(_ref3) {\n    var removeProps = _ref3.removeProps,\n        innerProps = _ref3.innerProps,\n        data = _ref3.data,\n        props = _objectWithoutProperties(_ref3, [\"removeProps\", \"innerProps\", \"data\"]);\n\n    return React.createElement(TagChip, {\n      tag: data,\n      onDelete: function onDelete(e) {\n        removeProps.onClick();\n      },\n      color: tagConfig.color,\n      edit: true\n    });\n  };\n\n  MultiValue.propTypes = {\n    removeProps: PropTypes.any,\n    innerProps: PropTypes.any,\n    data: PropTypes.any\n  };\n  var tagValues = tags.filter(function (tag) {\n    return tag.typeId === tagConfig.id && !tag.coords;\n  });\n  var selectOptions = tagValues.map(function (val) {\n    return {\n      label: val.label,\n      value: val.val\n    };\n  });\n  var remainingTags = tagConfig.values.filter(function (val) {\n    return tagValues.map(function (t) {\n      return t.label;\n    }).indexOf(val) === -1;\n  }).map(function (val) {\n    return {\n      label: val,\n      value: val\n    };\n  });\n  console.log('TAG DEBUG', {\n    tags: tags,\n    tagConfig: tagConfig,\n    tagValues: tagValues,\n    selectOptions: selectOptions,\n    remainingTags: remainingTags\n  });\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, tagConfig.label), !tagConfig.allowAdditions && React.createElement(Select, {\n    options: remainingTags,\n    classes: classes,\n    isFocused: true,\n    components: {},\n    deleteRemoves: true,\n    value: selectOptions,\n    isClearable: false,\n    onChange: onSelectChange,\n    placeholder: \"Select Tags\",\n    isMulti: true,\n    isSearchable: true\n  }), tagConfig.allowAdditions && React.createElement(CreatableSelect, {\n    options: remainingTags,\n    classes: classes,\n    isFocused: true,\n    deleteRemoves: true,\n    components: {},\n    value: selectOptions,\n    isClearable: false,\n    onChange: onSelectChange,\n    placeholder: \"Select Tags\",\n    isMulti: true,\n    isSearchable: true\n  }), hint && React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.hint\n  }, hint));\n};\n\nTagControl.propTypes = {\n  className: PropTypes.string,\n  hint: PropTypes.string,\n  tags: PropTypes.array,\n  onChange: PropTypes.func.isRequired,\n  tagConfig: PropTypes.object\n};\nexport default TagControl;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagControl from './TagControl';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dlgContent: {},\n    title: {\n      border: \"1px solid \".concat(theme.palette.grey[200]),\n      background: theme.palette.grey[100],\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagEdit = function TagEdit(_ref) {\n  var open = _ref.open,\n      title = _ref.title,\n      onOk = _ref.onOk,\n      onCancel = _ref.onCancel,\n      tags = _ref.tags,\n      tagConfig = _ref.tagConfig;\n  var classes = useStyles();\n\n  var _useState = useState(tags),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  return React.createElement(Dialog, {\n    className: classes.root,\n    scroll: \"paper\",\n    fullScreen: true,\n    open: open,\n    onClose: function onClose() {\n      return onOk(value);\n    }\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    className: classes.closeButton,\n    onClick: onCancel\n  }, React.createElement(CloseIcon, null))), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(TagControl, {\n    className: classes.field,\n    tags: value,\n    tagConfig: tagConfig,\n    onChange: setValue\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onCancel\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return setValue(tags);\n    }\n  }, \"Reset\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(value);\n    }\n  }, \"Ok\")));\n};\n\nTagEdit.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  onOk: PropTypes.func,\n  onCancel: PropTypes.func,\n  tags: PropTypes.array.isRequired,\n  tagConfig: PropTypes.object.isRequired\n};\nexport default TagEdit;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagChip from './TagChip';\nimport style from './TagControl.style';\nvar useStyles = makeStyles(style);\n\nvar TagControl = function TagControl(_ref) {\n  var tags = _ref.tags,\n      label = _ref.label,\n      tagConfig = _ref.tagConfig,\n      className = _ref.className;\n  var classes = useStyles();\n  var tagValues = tags.filter(function (tag) {\n    return tag.typeId === tagConfig.id && !tag.coords;\n  });\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, tagConfig.label), React.createElement(\"div\", {\n    className: classes.tagContainer\n  }, tagValues.map(function (tag, idx) {\n    return React.createElement(TagChip, {\n      tag: tag,\n      key: \"tagchip\".concat(idx),\n      color: tagConfig.color\n    });\n  })));\n};\n\nTagControl.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string,\n  tags: PropTypes.array,\n  tagConfig: PropTypes.object\n};\nexport default TagControl;","var tagChips = {\n  height: 20\n};\nexport default (function (theme) {\n  return {\n    xyTagChip: {\n      cursor: 'pointer',\n      color: 'white',\n      fontSize: '0.6em',\n      background: '#444444',\n      height: tagChips.height,\n      position: 'absolute',\n      left: -tagChips.height / 2,\n      top: -tagChips.height / 2\n    },\n    editing: {},\n    reversedChip: {\n      flexDirection: 'row-reverse',\n      left: 'unset',\n      right: -tagChips.height / 2\n    },\n    deleteIcon: {\n      width: tagChips.height - 1,\n      height: tagChips.height - 1\n    },\n    chipAvatarIcon: {\n      color: 'white',\n      width: tagChips.height - 4,\n      height: tagChips.height - 4\n    },\n    chipAvatar: {\n      background: 'inherit',\n      width: tagChips.height,\n      height: tagChips.height\n    },\n    reversedDelete: {\n      margin: \"0 -\".concat(tagChips.height / 8, \"px 0 \").concat(tagChips.height / 8, \"px\")\n    },\n    chipBucket: {\n      width: 1,\n      height: 1,\n      display: 'flex',\n      flexDirection: 'row',\n      position: 'absolute'\n    },\n    reversedChipBucket: {\n      flexDirection: 'row-reverse'\n    }\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Draggable from 'react-draggable';\nimport Chip from '@material-ui/core/Chip';\nimport Avatar from '@material-ui/core/Avatar';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport MyLocation from '@material-ui/icons/MyLocation';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport style from './XYTagChip.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagChip = function XYTagChip(_ref) {\n  var color = _ref.color,\n      edit = _ref.edit,\n      tag = _ref.tag,\n      newSize = _ref.newSize,\n      onTagDragOver = _ref.onTagDragOver,\n      onTagDragStop = _ref.onTagDragStop,\n      onNewTag = _ref.onNewTag,\n      onTagDelete = _ref.onTagDelete,\n      props = _objectWithoutProperties(_ref, [\"color\", \"edit\", \"tag\", \"newSize\", \"onTagDragOver\", \"onTagDragStop\", \"onNewTag\", \"onTagDelete\"]);\n\n  var isReversed = tag.relCoords.x > newSize.newWidth / 2;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var stopBadness = function stopBadness(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  var handleDrag = function handleDrag(e, data) {\n    stopBadness(e);\n    onTagDragOver(data, tag);\n  };\n\n  var handleStopDrag = function handleStopDrag(e, data) {\n    stopBadness(e);\n    onTagDragStop(data, tag);\n  };\n\n  return React.createElement(Draggable, {\n    disabled: !edit,\n    bounds: {\n      left: 10,\n      top: 10,\n      right: newSize.newWidth - 10,\n      bottom: newSize.newHeight - 10\n    },\n    position: {\n      x: tag.relCoords.x,\n      y: tag.relCoords.y\n    },\n    onDrag: handleDrag,\n    onStop: handleStopDrag,\n    onClick: stopBadness\n  }, React.createElement(\"div\", {\n    className: classNames(classes.chipBucket, isReversed && classes.reversedChipBucket)\n  }, React.createElement(Chip, _extends({\n    style: {\n      background: color ? \"\".concat(color, \"!important\") : null,\n      color: color ? \"\".concat(theme.palette.getContrastText(color), \"!important\") : null\n    },\n    color: edit ? 'secondary' : 'default',\n    label: tag.label,\n    data: tag.id,\n    onClick: stopBadness,\n    onDelete: edit ? onTagDelete(tag) : null,\n    deleteIcon: edit ? React.createElement(CancelIcon, {\n      className: classNames(classes.deleteIcon, isReversed && classes.reversedDelete)\n    }) : React.createElement(\"div\", null),\n    className: classNames(classes.xyTagChip, isReversed && classes.reversedChip, edit && classes.editing)\n  }, props, {\n    avatar: React.createElement(Avatar, {\n      className: classNames(classes.chipAvatar, edit && classes.editing)\n    }, React.createElement(MyLocation, {\n      className: classNames(classes.chipAvatarIcon, edit && classes.editing)\n    }))\n  }))));\n};\n\nXYTagChip.propTypes = {\n  color: PropTypes.string,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  newSize: PropTypes.object,\n  onTagDragOver: PropTypes.func,\n  onTagDragStop: PropTypes.func,\n  onNewTag: PropTypes.func,\n  onTagDelete: PropTypes.func\n};\nexport default XYTagChip;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport style from './XYTagSelect.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagSelect = function XYTagSelect(_ref) {\n  var tagConfig = _ref.tagConfig,\n      onChange = _ref.onChange;\n  var classes = useStyles();\n  var options = tagConfig.values.map(function (tc) {\n    return {\n      label: tc.label,\n      value: tc.id\n    };\n  });\n  console.log('XYTagSelect', tagConfig);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, !tagConfig.allowAdditions && React.createElement(Select, {\n    options: options,\n    classes: classes,\n    components: {\n      Control: Control,\n      Menu: Menu,\n      NoOptionsMessage: NoOptionsMessage,\n      Option: Option,\n      Placeholder: Placeholder,\n      ValueContainer: ValueContainer\n    },\n    value: null,\n    blurInputOnSelect: true,\n    isClearable: false,\n    onChange: onChange,\n    placeholder: tagConfig.label,\n    isSearchable: true\n  }), tagConfig.allowAdditions && React.createElement(CreatableSelect, {\n    options: options,\n    classes: classes,\n    components: {\n      Control: Control,\n      Menu: Menu,\n      NoOptionsMessage: NoOptionsMessage,\n      Option: Option,\n      Placeholder: Placeholder,\n      ValueContainer: ValueContainer\n    },\n    value: null,\n    isClearable: false,\n    blurInputOnSelect: true,\n    onChange: onChange,\n    placeholder: tagConfig.label,\n    isSearchable: true\n  }));\n};\n\nXYTagSelect.propTypes = {\n  tagConfig: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default XYTagSelect;\n\nfunction Control(props) {\n  return React.createElement(TextField, _extends({\n    fullWidth: true,\n    InputProps: {\n      inputComponent: inputComponent,\n      inputProps: _objectSpread({\n        className: props.selectProps.classes.input,\n        inputRef: props.innerRef,\n        children: props.children\n      }, props.innerProps)\n    }\n  }, props.selectProps.textFieldProps));\n}\n\nvar NoOptionsMessage = function NoOptionsMessage(_ref2) {\n  var innerProps = _ref2.innerProps,\n      selectProps = _ref2.selectProps,\n      children = _ref2.children;\n  return React.createElement(Typography, _extends({\n    color: \"textSecondary\",\n    className: selectProps.classes.noOptionsMessage\n  }, innerProps), children);\n};\n\nvar Menu = function Menu(_ref3) {\n  var selectProps = _ref3.selectProps,\n      innerProps = _ref3.innerProps,\n      children = _ref3.children;\n  return React.createElement(Paper, _extends({\n    square: true,\n    className: selectProps.classes.paper\n  }, innerProps), children);\n};\n\nvar inputComponent = function inputComponent(_ref4) {\n  var inputRef = _ref4.inputRef,\n      props = _objectWithoutProperties(_ref4, [\"inputRef\"]);\n\n  return React.createElement(\"div\", _extends({\n    ref: inputRef\n  }, props));\n};\n\nvar Placeholder = function Placeholder(props) {\n  return React.createElement(Typography, _extends({\n    color: \"textSecondary\",\n    className: props.selectProps.classes.placeholder\n  }, props.innerProps), props.children);\n};\n\nvar Option = function Option(_ref5) {\n  var innerRef = _ref5.innerRef,\n      isFocused = _ref5.isFocused,\n      isSelected = _ref5.isSelected,\n      innerProps = _ref5.innerProps,\n      children = _ref5.children;\n  return React.createElement(MenuItem, _extends({\n    buttonRef: innerRef,\n    selected: isFocused,\n    component: \"div\",\n    style: {\n      fontWeight: isSelected ? 500 : 400\n    }\n  }, innerProps), children);\n};\n\nvar ValueContainer = function ValueContainer(_ref6) {\n  var selectProps = _ref6.selectProps,\n      children = _ref6.children;\n  return React.createElement(\"div\", {\n    className: selectProps.classes.valueContainer\n  }, children);\n};\n\nValueContainer.propTypes = {\n  selectProps: PropTypes.object.isRequired,\n  children: PropTypes.any\n};","export default (function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    noOptionsMessage: {\n      padding: \"\".concat(theme.spacing(1), \"px \").concat(theme.spacing(1) * 2, \"px\")\n    },\n    singleValue: {\n      fontSize: 16\n    },\n    placeholder: {\n      position: 'absolute',\n      left: 2,\n      fontSize: 16\n    },\n    input: {\n      display: 'flex',\n      padding: 0\n    },\n    valueContainer: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      flex: 1,\n      alignItems: 'center',\n      overflow: 'hidden'\n    },\n    paper: {\n      position: 'absolute',\n      zIndex: 100,\n      marginTop: theme.spacing(1),\n      left: 0,\n      right: 0\n    }\n  };\n});","export default (function (theme) {\n  return {\n    root: {\n      overflow: 'visible'\n    },\n    header: {\n      padding: theme.spacing(1) * 2\n    },\n    listItem: {\n      flexDirection: 'column'\n    },\n    dlgBody: {\n      paddingLeft: theme.spacing(1) * 2,\n      paddingRight: theme.spacing(1) * 2,\n      paddingBottom: theme.spacing(1) * 2\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n});","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport XYTagSelect from './XYTagSelect';\nimport style from './XYTagChooser.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagChooser = function XYTagChooser(_ref) {\n  var coords = _ref.coords,\n      open = _ref.open,\n      onNewTag = _ref.onNewTag,\n      _onClose = _ref.onClose;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      tags = _useContext.tags;\n\n  var xyTags = tags.filter(function (t) {\n    return t.allowXY;\n  });\n  if (!coords) return null;\n  return React.createElement(Dialog, {\n    open: open,\n    scroll: \"paper\",\n    fullScreen: true,\n    classes: {\n      paperScrollPaper: classes.root\n    },\n    onClose: function onClose() {\n      return _onClose();\n    },\n    \"aria-labelledby\": \"simple-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"simple-dialog-title\",\n    className: classes.header\n  }, \"New Tag:\", React.createElement(IconButton, {\n    className: classes.closeButton,\n    onClick: _onClose\n  }, React.createElement(CloseIcon, null))), React.createElement(\"div\", {\n    className: classes.dlgBody\n  }, xyTags.length > 1 && React.createElement(Typography, {\n    variant: \"caption\"\n  }, \"What kind of tag would you like to create?\"), xyTags.map(function (tagType, idx) {\n    return React.createElement(\"div\", {\n      className: classes.listItem,\n      key: \"tagSelect\".concat(idx)\n    }, React.createElement(XYTagSelect, {\n      tagConfig: tagType,\n      onChange: onNewTag(coords, tagType)\n    }));\n  })));\n};\n\nXYTagChooser.propTypes = {\n  open: PropTypes.bool.isRequired,\n  coords: PropTypes.object,\n  onClose: PropTypes.func.isRequired,\n  onNewTag: PropTypes.func.isRequired\n};\nexport default XYTagChooser;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport { AppContext } from '@morphoto/client-common';\nimport XYTagChooser from './XYTagChooser';\nimport { Tags } from '@morphoto/common';\n\nvar useXYTags = function useXYTags(photo, newSize, onChange, setResizeActive) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isDragging = _useState2[0],\n      setIsDragging = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newTagDialog = _useState4[0],\n      setNewTagDialog = _useState4[1];\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  var tagClass = new Tags(tagConfig, photo.tags);\n\n  var onNewTag = function onNewTag(coords, tagType) {\n    return function (_ref) {\n      var value = _ref.value,\n          isNew = _ref.__isNew__;\n      var addTag = isNew ? tagClass.createNewXYTagObj(value, tagType.id, coords) : tagClass.createExistingXYTagObj(value, tagType.id, coords);\n      setNewTagDialog(null);\n      onChange(_objectSpread({}, photo, {\n        tags: [].concat(_toConsumableArray(photo.tags), [addTag])\n      }));\n    };\n  };\n\n  var onTagDelete = function onTagDelete(tag) {\n    return function () {\n      var tags = photo.tags.filter(function (oldTag) {\n        return oldTag.label !== tag.label;\n      });\n      onChange(_objectSpread({}, photo, {\n        tags: tags\n      }));\n    };\n  };\n\n  var onAddTagTrigger = function onAddTagTrigger(e) {\n    if (!newTagDialog) {\n      setResizeActive(false);\n      setNewTagDialog({\n        x: parseInt(e.pageX - (window.innerWidth - newSize.newWidth) / 2 * newSize.multiplier, 10),\n        y: parseInt(e.pageY - (window.innerHeight - newSize.newHeight) / 2 * newSize.multiplier, 10)\n      });\n    }\n  };\n\n  var updateTagLocation = function updateTagLocation(_ref2, tag) {\n    var x = _ref2.x,\n        y = _ref2.y;\n    var newTags = photo.tags.map(function (oldTag) {\n      if (oldTag.label !== tag.label) return oldTag;else {\n        var newX = parseInt(x / newSize.multiplier, 10);\n        var newY = parseInt(y / newSize.multiplier, 10);\n        return _objectSpread({}, oldTag, {\n          coords: {\n            x: newX,\n            y: newY\n          }\n        });\n      }\n    });\n    return newTags;\n  };\n\n  var onTagDragStop = function onTagDragStop(coords, tag) {\n    var tags = updateTagLocation(coords, tag);\n    setIsDragging(false);\n    onChange(_objectSpread({}, photo, {\n      tags: tags\n    }));\n  };\n\n  var onTagDragOver = function onTagDragOver(coords, tag) {\n    updateTagLocation(coords, tag);\n    setIsDragging(true);\n  };\n\n  var TagChooser = function TagChooser() {\n    return React.createElement(XYTagChooser, {\n      open: !isDragging && Boolean(newTagDialog),\n      coords: newTagDialog,\n      onNewTag: onNewTag,\n      onClose: function onClose() {\n        setNewTagDialog(null);\n        setResizeActive(true);\n      }\n    });\n  };\n\n  return {\n    onNewTag: onNewTag,\n    onTagDelete: onTagDelete,\n    onAddTagTrigger: onAddTagTrigger,\n    onTagDragOver: onTagDragOver,\n    onTagDragStop: onTagDragStop,\n    TagChooser: TagChooser,\n    getRelXYTags: tagClass.getRelXYTags\n  };\n};\n\nexport default useXYTags;","export { default as TagChip } from './TagChip';\nexport { default as TagControl } from './TagControl';\nexport { default as TagEdit } from './TagEdit';\nexport { default as TagView } from './TagView';\nexport { default as XYTagChip } from './XYTagChip';\nexport { default as XYTagChooser } from './XYTagChooser';\nexport { default as XYTagSelect } from './XYTagSelect';\nexport { default as useXYTags } from './useXYTags';","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\n\nvar LoadFakeData = function LoadFakeData(_ref) {\n  var children = _ref.children,\n      delay = _ref.delay,\n      props = _objectWithoutProperties(_ref, [\"children\", \"delay\"]);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      mockData = _useState2[0],\n      setData = _useState2[1];\n\n  var dataRef = useRef();\n  dataRef.current = mockData;\n  useEffect(function () {\n    var dirName = process.env.PUBLIC_URL.split('/').filter(function (d) {\n      return d.length > 0;\n    });\n    var dirPath = dirName.length === 0 ? 'data' : \"\".concat(dirName[0], \"/data\");\n    var finalPath = window.location.protocol + '//' + window.location.host + '/' + dirPath;\n    console.log('PATH', {\n      finalPath: finalPath,\n      dirName: dirName,\n      protocol: window.location.protocol,\n      host: window.location.host\n    });\n    Object.keys(props).forEach(function (key) {\n      if (dataRef.current && !dataRef.current[key]) {\n        axios(\"\".concat(finalPath, \"/\").concat(props[key])).then(function (result) {\n          if (delay) {\n            console.log('LoadFakeData::Start loading...');\n            setTimeout(function () {\n              console.log('LoadFakeData::Loading done...');\n              setData(_objectSpread({}, dataRef.current, _defineProperty({}, key, result.data)));\n            }, delay);\n          } else setData(_objectSpread({}, dataRef.current, _defineProperty({}, key, result.data)));\n        }).catch(function (err) {\n          console.error('LoadFakeData::I AM AN ERROR', err);\n        });\n      }\n    });\n  }, []);\n  var loaded = Object.keys(mockData).length;\n  var loading = Object.keys(props).length;\n\n  var context = mockData.context,\n      mockProps = _objectWithoutProperties(mockData, [\"context\"]);\n\n  var finalData = loaded !== loading ? {} : mockProps;\n  var finalRender = useMemo(function () {\n    return React.cloneElement(children, _objectSpread({}, children.props, {}, finalData));\n  }, [mockData]);\n  console.log('LoadFakeData::finalData', finalData);\n  return finalRender;\n};\n\nLoadFakeData.propTypes = {\n  children: PropTypes.node.isRequired,\n  delay: PropTypes.number\n};\nexport default LoadFakeData;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar withContext = function withContext(ContextObj) {\n  var Inner = function Inner(_ref) {\n    var children = _ref.children,\n        props = _objectWithoutProperties(_ref, [\"children\"]);\n\n    return React.createElement(ContextObj.Provider, {\n      value: props\n    }, children);\n  };\n\n  Inner.propTypes = {\n    children: PropTypes.any.isRequired\n  };\n};\n\nexport default withContext;","import { useRef, useEffect } from 'react';\n\nvar useAuthCommon = function useAuthCommon() {\n  var containerRef = useRef();\n\n  var handleKeyPress = function handleKeyPress(event) {\n    if (event.key === 'Enter') {\n      if (containerRef.current) {\n        try {\n          var found = containerRef.current.getElementsByClassName('enterAction');\n          if (found && found[0]) found[0].click();\n        } catch (e) {\n          console.error('useAuthCommon::handleKeyPress', e);\n        }\n      }\n    }\n  };\n\n  useEffect(function () {\n    if (containerRef.current) {\n      try {\n        document.addEventListener('keypress', handleKeyPress, false);\n      } catch (e) {\n        console.error('useAuthCommon::useEffect', e);\n      }\n\n      return function () {\n        return document.removeEventListener('keypress', handleKeyPress, false);\n      };\n    }\n  }, []);\n  return containerRef;\n};\n\nexport default useAuthCommon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useAuthCommon from './useAuthCommon';\nimport { AppLogo } from '@morphoto/icons';\nimport { config } from '@morphoto/client-common';\nimport { ThemeProvider } from '@material-ui/styles';\nimport themes from '@morphoto/themes';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%'\n    },\n    bgSwoosh: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 0\n    },\n    loading: {\n      animation: '$loadingSpin 4s linear infinite, $loadingFade 6s infinite'\n    },\n    '@keyframes loadingSpin': {\n      'from': {\n        transform: 'rotate(0deg) translateY(-50%) translateX(-50%)'\n      },\n      'to': {\n        transform: 'rotate(360deg) translateY(-50%) translateX(-50%)'\n      }\n    },\n    '@keyframes loadingFade': {\n      '0%': {\n        opacity: 0.1\n      },\n      '50%': {\n        opacity: 1\n      },\n      '100%': {\n        opacity: 0.1\n      }\n    },\n    spacer: {\n      flex: '1 1 5%'\n    },\n    logoContainer: {\n      overflow: 'hidden',\n      position: 'relative',\n      flex: '1 1 40%',\n      width: '100%',\n      minHeight: 90\n    },\n    logo: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '0% 0%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      width: '90%',\n      height: '90%'\n    },\n    inner: {\n      margin: '0 auto',\n      width: '100%',\n      height: '100%',\n      minWidth: 200,\n      maxWidth: 350,\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center'\n    }\n  };\n});\n\nvar AuthContainer = function AuthContainer(_ref) {\n  var children = _ref.children,\n      loading = _ref.loading;\n  var containerRef = useAuthCommon();\n  var classes = useStyles();\n  return React.createElement(ThemeProvider, {\n    theme: themes.login\n  }, React.createElement(\"div\", {\n    ref: containerRef,\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(\"div\", {\n    className: classes.logoContainer\n  }, React.createElement(AppLogo, {\n    className: classNames(classes.logo, loading ? classes.loading : null)\n  })), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\"\n  }, \"MorPhoto\"), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\"\n  }, \"Version:  \", config.version, \" \", React.createElement(\"em\", null, \"BETA\")), children, React.createElement(\"div\", {\n    className: classes.spacer\n  }))));\n};\n\nAuthContainer.propTypes = {\n  children: PropTypes.any,\n  loading: PropTypes.bool\n};\nexport default AuthContainer;","export default (function (theme) {\n  return {\n    root: {},\n    spacer: {\n      flexGrow: 1\n    },\n    forgotPassword: {\n      width: '100%',\n      textAlign: 'right'\n    },\n    switch: {},\n    switchButton: {\n      flexGrow: 1,\n      '&:last-child': {\n        borderRadius: 0\n      },\n      '&:first-child': {\n        borderRadius: 0\n      }\n    },\n    phoneNumInner: {\n      marginTop: theme.spacing(1),\n      display: 'flex'\n    },\n    phoneNumDropdown: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    warnText: {\n      marginTop: theme.spacing(2),\n      fontStyle: 'italic'\n    },\n    noSignin: {\n      margin: theme.spacing(2, 0),\n      padding: theme.spacing(1),\n      textAlign: 'left',\n      border: \"1px solid #00000022\",\n      background: \"#0000000F\"\n    }\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport { Typography } from '@material-ui/core';\nvar useStyles = makeStyles(style);\n\nvar SignIn = function SignIn(_ref) {\n  var loading = _ref.loading,\n      handleSignup = _ref.handleSignup,\n      federated = _ref.federated,\n      handleForgotPassword = _ref.handleForgotPassword,\n      handleInputChange = _ref.handleInputChange,\n      handleBeAnonymous = _ref.handleBeAnonymous,\n      handleSignIn = _ref.handleSignIn,\n      props = _objectWithoutProperties(_ref, [\"loading\", \"handleSignup\", \"federated\", \"handleForgotPassword\", \"handleInputChange\", \"handleBeAnonymous\", \"handleSignIn\"]);\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"username\",\n    fullWidth: true,\n    key: \"username\",\n    name: \"username\",\n    label: \"Username\",\n    autoFocus: true,\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(TextField, {\n    fullWidth: true,\n    id: \"password\",\n    label: \"Password\",\n    key: \"password\",\n    name: \"password\",\n    type: \"password\",\n    className: classes.textField,\n    autoComplete: \"current-password\",\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    component: \"button\",\n    color: \"secondary\",\n    variant: \"contained\",\n    disabled: loading,\n    onClick: handleSignup\n  }, \"New Account\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    component: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    disabled: loading,\n    onClick: handleSignIn\n  }, \"Sign In\")), React.createElement(Button, {\n    color: \"primary\",\n    onClick: handleForgotPassword,\n    size: \"small\"\n  }, \"Forgot Password\"), React.createElement(\"div\", {\n    className: classes.noSignin\n  }, React.createElement(Button, {\n    fullWidth: true,\n    size: \"small\",\n    variant: 'outlined',\n    onClick: handleBeAnonymous,\n    color: \"inherit\"\n  }, \"Continue without logging in\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.warnText,\n    color: \"textSecondary\",\n    component: \"div\"\n  }, \"You will not be able to add content and many features will be unavailable.\")));\n};\n\nSignIn.propTypes = {\n  loading: PropTypes.bool,\n  federated: PropTypes.object,\n  handleSignup: PropTypes.func.isRequired,\n  handleForgotPassword: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  handleBeAnonymous: PropTypes.func.isRequired,\n  handleSignIn: PropTypes.func.isRequired\n};\nexport default SignIn;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Chip from '@material-ui/core/Chip';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { green } from '@material-ui/core/colors';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex'\n    },\n    chipContainer: {\n      flex: '1 1'\n    },\n    chip: {\n      height: theme.spacing(2.5)\n    },\n    label: {\n      padding: theme.spacing(0, 1, 0, 1)\n    },\n    ok: {\n      color: 'white',\n      background: green[500],\n      border: \"1px solid \".concat(green[500])\n    },\n    bad: {\n      color: theme.palette.error.main,\n      background: 'transparent',\n      border: \"1px solid \".concat(theme.palette.error.main)\n    }\n  };\n});\n\nvar PasswordHelper = function PasswordHelper(_ref) {\n  var pword = _ref.pword;\n  var classes = useStyles();\n  var hasUpper = pword ? !!pword.match(/[A-Z]/) : false;\n  var hasLower = pword ? !!pword.match(/[a-z]/) : false;\n  var hasNum = pword ? !!pword.match(/[0-9]/) : false;\n  var hasSpecial = pword ? !!pword.match(/[!@#$%^&*(),.?'\":;{}\\[\\]\\-_=+|/\\\\`~<>]/) : false;\n  var enoughChars = pword ? pword.length >= 8 : false;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(SpecialChip, {\n    ok: enoughChars,\n    label: \"8+\"\n  }), React.createElement(SpecialChip, {\n    ok: hasUpper,\n    label: \"A-Z\"\n  }), React.createElement(SpecialChip, {\n    ok: hasLower,\n    label: \"a-z\"\n  }), React.createElement(SpecialChip, {\n    ok: hasNum,\n    label: \"0-9\"\n  }), React.createElement(SpecialChip, {\n    ok: hasSpecial,\n    label: \"!@#$%^&*,.?\"\n  }));\n};\n\nPasswordHelper.propTypes = {\n  pword: PropTypes.string\n};\nexport default PasswordHelper;\n\nvar SpecialChip = function SpecialChip(_ref2) {\n  var ok = _ref2.ok,\n      props = _objectWithoutProperties(_ref2, [\"ok\"]);\n\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.chipContainer\n  }, React.createElement(Chip, _extends({\n    classes: {\n      root: classNames(classes.chip, ok ? classes.ok : classes.bad),\n      label: classes.label\n    }\n  }, props)));\n};\n\nSpecialChip.propTypes = {\n  ok: PropTypes.bool\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport PasswordHelper from './PasswordHelper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nvar useStyles = makeStyles(style);\n\nvar SignUp = function SignUp(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      signUpFields = _ref.signUpFields,\n      signUpFieldLabels = _ref.signUpFieldLabels,\n      signUpFieldPlaceholders = _ref.signUpFieldPlaceholders,\n      handleSignup = _ref.handleSignup,\n      handleBack = _ref.handleBack,\n      countryDialCodes = _ref.countryDialCodes,\n      defaultDialCode = _ref.defaultDialCode,\n      props = _objectWithoutProperties(_ref, [\"handleInputChange\", \"signUpFields\", \"signUpFieldLabels\", \"signUpFieldPlaceholders\", \"handleSignup\", \"handleBack\", \"countryDialCodes\", \"defaultDialCode\"]);\n\n  var _useState = useState(defaultDialCode),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectVal = _useState2[0],\n      setSelectVal = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pword = _useState4[0],\n      setPword = _useState4[1];\n\n  var pwordType = function pwordType(event) {\n    setPword(event.target.value);\n    handleInputChange(event);\n  };\n\n  var classes = useStyles();\n\n  var handleDialCodeChange = function handleDialCodeChange(e) {\n    handleInputChange(e);\n    setSelectVal(e.target.value);\n  };\n\n  return React.createElement(React.Fragment, null, signUpFields.map(function (field, idx) {\n    return field.key !== 'phone_number' ? React.createElement(React.Fragment, {\n      key: field.key\n    }, React.createElement(TextField, {\n      fullWidth: true,\n      autoFocus: signUpFields.findIndex(function (f) {\n        return f.key === field.key;\n      }) === 0,\n      type: field.type,\n      name: field.key,\n      placeholder: signUpFieldPlaceholders[idx],\n      label: signUpFieldLabels[idx],\n      className: classes.textField,\n      margin: \"normal\",\n      onChange: field.key === 'password' ? pwordType : handleInputChange\n    }), field.key === 'password' && React.createElement(PasswordHelper, {\n      pword: pword\n    })) : React.createElement(FormControl, {\n      className: classes.phoneNumDropdown,\n      fullWidth: true,\n      key: \"phonenum\"\n    }, React.createElement(InputLabel, {\n      htmlFor: \"dial_code\",\n      shrink: true\n    }, signUpFieldLabels[idx], field.required ? '*' : ''), React.createElement(\"div\", {\n      className: classes.phoneNumInner\n    }, React.createElement(Select, {\n      value: selectVal,\n      onChange: handleDialCodeChange,\n      inputProps: {\n        name: 'dial_code',\n        id: 'dial_code'\n      }\n    }, countryDialCodes.map(function (dialCode) {\n      return React.createElement(\"option\", {\n        key: dialCode,\n        value: dialCode\n      }, dialCode);\n    })), React.createElement(TextField, {\n      placeholder: signUpFieldPlaceholders[idx],\n      type: \"tel\",\n      fullWidth: true,\n      id: \"phone_line_number\",\n      key: \"phone_line_number\",\n      name: \"phone_line_number\",\n      onChange: handleInputChange\n    })));\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    component: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSignup\n  }, \"Create Account\")));\n};\n\nSignUp.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  signUpFields: PropTypes.array.isRequired,\n  signUpFieldLabels: PropTypes.array.isRequired,\n  signUpFieldPlaceholders: PropTypes.array.isRequired,\n  countryDialCodes: PropTypes.array.isRequired,\n  defaultDialCode: PropTypes.string.isRequired,\n  handleSignup: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired\n};\nexport default SignUp;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nvar useStyles = makeStyles(style);\n\nvar ConfirmSignIn = function ConfirmSignIn(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      handleBack = _ref.handleBack,\n      handleConfirm = _ref.handleConfirm;\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"mfaCode\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"MFA Code\",\n    name: \"code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleConfirm\n  }, \"Confirm\")));\n};\n\nConfirmSignIn.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleConfirm: PropTypes.func.isRequired\n};\nexport default ConfirmSignIn;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Typography from '@material-ui/core/Typography';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    checkEmailMsgIco: {\n      marginRight: theme.spacing(1)\n    },\n    checkEmailMsgTxt: {\n      textAlign: 'left',\n      flexGrow: 1\n    },\n    checkEmailMsg: {\n      display: 'flex'\n    }\n  };\n});\n\nvar CheckemailMsg = function CheckemailMsg(_ref) {\n  var onResend = _ref.onResend,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: open\n  }, React.createElement(SnackbarContent, {\n    className: classes.root,\n    message: React.createElement(\"div\", {\n      className: classes.checkEmailMsg\n    }, React.createElement(EmailIcon, {\n      className: classes.checkEmailMsgIco,\n      color: \"inherit\"\n    }), React.createElement(Typography, {\n      className: classes.checkEmailMsgTxt,\n      color: \"inherit\"\n    }, \"Code Sent Check your email\")),\n    action: onResend && [React.createElement(Button, {\n      key: \"undo\",\n      color: \"secondary\",\n      size: \"small\",\n      variant: \"contained\",\n      onClick: onResend\n    }, \"Resend\")]\n  }));\n};\n\nCheckemailMsg.propTypes = {\n  onResend: PropTypes.func,\n  open: PropTypes.bool\n};\nexport default CheckemailMsg;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\n\nvar ConfirmSignUp = function ConfirmSignUp(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      handleBack = _ref.handleBack,\n      handleResend = _ref.handleResend,\n      handleConfirm = _ref.handleConfirm;\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"username\",\n    fullWidth: true,\n    autoFocus: true,\n    name: \"username\",\n    label: \"Username\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(TextField, {\n    id: \"confirmationCode\",\n    fullWidth: true,\n    name: \"code\",\n    label: \"Confirmation Code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"If you can't find it in your inbox be sure to check your spam folder.\"), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: \"enterAction\",\n    onClick: handleConfirm\n  }, \"Confirm\")), React.createElement(CheckEmailMsg, {\n    open: true,\n    onResend: handleResend\n  }));\n};\n\nConfirmSignUp.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleResend: PropTypes.func.isRequired,\n  handleConfirm: PropTypes.func.isRequired\n};\nexport default ConfirmSignUp;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Link from '@material-ui/core/Link';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\n\nvar ForgotPassword = function ForgotPassword(_ref) {\n  var handleSubmit = _ref.handleSubmit,\n      handleInputChange = _ref.handleInputChange,\n      handleSendCode = _ref.handleSendCode,\n      handleBack = _ref.handleBack;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sent = _useState2[0],\n      setSent = _useState2[1];\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(Typography, null, \"Forgot Password\"), !sent && React.createElement(TextField, {\n    id: \"username\",\n    autoFocus: true,\n    fullWidth: true,\n    label: \"Username\",\n    name: \"username\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), sent && React.createElement(TextField, {\n    id: \"changecode\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Code\",\n    name: \"code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), sent && React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"If you can't find it in your inbox be sure to check your spam folder.\"), sent && React.createElement(TextField, {\n    id: \"newpassword\",\n    fullWidth: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    name: \"password\",\n    autoComplete: \"current-password\",\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), !sent && React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"Enter your username and you will be sent an email with a code to reset your password.\"), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: function onClick() {\n      sent ? setSent(false) : handleBack();\n    }\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), !sent && React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: \"enterAction\",\n    onClick: function onClick() {\n      setSent(true);\n      handleSendCode();\n    }\n  }, \"Send Code\"), sent && React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSubmit\n  }, \"Submit\")), React.createElement(CheckEmailMsg, {\n    open: sent,\n    onResend: handleSendCode\n  }));\n};\n\nForgotPassword.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  handleSendCode: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired\n};\nexport default ForgotPassword;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Typography } from '@material-ui/core';\nimport AuthContainer from './AuthContainer';\n\nvar Loading = function Loading(_ref) {\n  var message = _ref.message;\n  return React.createElement(React.Fragment, null, React.createElement(Typography, {\n    variant: \"h3\"\n  }, \"Loading...\"), message && React.createElement(Typography, {\n    variant: \"overline\"\n  }, message));\n};\n\nLoading.propTypes = {\n  message: PropTypes.string\n};\nexport default Loading;\nexport var LoadingWrapped = function LoadingWrapped(props) {\n  return React.createElement(AuthContainer, {\n    loading: true\n  }, React.createElement(Loading, props));\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport PasswordHelper from './PasswordHelper';\nvar useStyles = makeStyles(style);\n\nvar RequireNewPassword = function RequireNewPassword(_ref) {\n  var change = _ref.change,\n      requiredAttributes = _ref.requiredAttributes,\n      placeholders = _ref.placeholders,\n      handleInputChange = _ref.handleInputChange;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      pword = _useState2[0],\n      setPword = _useState2[1];\n\n  var pwordType = function pwordType(event) {\n    setPword(event.target.value);\n    handleInputChange(event);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Typography, null, \"A new password is required\"), React.createElement(TextField, {\n    id: \"newassword\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    autoComplete: \"new-password\",\n    margin: \"normal\",\n    onChange: pwordType\n  }), React.createElement(PasswordHelper, {\n    pword: pword\n  }), requiredAttributes.map(function (attribute, idx) {\n    return React.createElement(TextField, {\n      fullWidth: true,\n      key: attribute,\n      name: attribute,\n      className: classes.textField,\n      placeholder: placeholders[idx],\n      type: \"text\",\n      margin: \"normal\",\n      onChange: handleInputChange\n    });\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\"\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: change,\n    className: \"enterAction\"\n  }, \"Change\")));\n};\n\nRequireNewPassword.propTypes = {\n  change: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  requiredAttributes: PropTypes.array,\n  placeholders: PropTypes.array\n};\nexport default RequireNewPassword;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport PhoneIcon from '@material-ui/icons/Phone';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\nvar RADIO = {\n  EMAIL: 0,\n  PHONE: 1\n};\n\nvar VerifyContact = function VerifyContact(_ref) {\n  var onBack = _ref.onBack,\n      hasEmail = _ref.hasEmail,\n      hasPhone = _ref.hasPhone,\n      handleSkip = _ref.handleSkip,\n      handleVerify = _ref.handleVerify,\n      handleSubmit = _ref.handleSubmit,\n      handleInputChange = _ref.handleInputChange;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sent = _useState2[0],\n      setSent = _useState2[1];\n\n  var _useState3 = useState(RADIO.EMAIL),\n      _useState4 = _slicedToArray(_useState3, 2),\n      radioVal = _useState4[0],\n      setRadioVal = _useState4[1];\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, !sent && React.createElement(React.Fragment, null, React.createElement(Typography, null, \"Verify your Contact\"), React.createElement(Typography, null, \"Account recovery requires verified contact information\"), React.createElement(Tabs, {\n    className: classes.switch,\n    indicatorColor: \"primary\",\n    value: radioVal,\n    onChange: function onChange(e, val) {\n      return setRadioVal(val);\n    },\n    textColor: \"primary\",\n    centered: true\n  }, React.createElement(Tab, {\n    icon: React.createElement(EmailIcon, null),\n    label: \"Email\"\n  }), React.createElement(Tab, {\n    icon: React.createElement(PhoneIcon, null),\n    label: \"Phone\"\n  })), radioVal === RADIO.EMAIL && React.createElement(TextField, {\n    id: \"email\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Email Address\",\n    className: classes.textField,\n    onChange: handleInputChange,\n    margin: \"normal\"\n  }), radioVal === RADIO.PHONE && React.createElement(TextField, {\n    id: \"phonenum\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Phone Number\",\n    className: classes.textField,\n    onChange: handleInputChange,\n    margin: \"normal\"\n  })), sent && React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Code\",\n    className: classes.textField,\n    placeholder: \"Code\",\n    key: \"code\",\n    name: \"code\",\n    autoComplete: \"off\",\n    onChange: handleInputChange,\n    margin: \"normal\"\n  }), sent && React.createElement(TextField, {\n    id: \"newpassword\",\n    fullWidth: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    autoComplete: \"current-password\",\n    margin: \"normal\"\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: function onClick() {\n      sent ? setSent(false) : onBack();\n    }\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: function onClick() {\n      return setSent(true);\n    }\n  }, \"Send Code\")), React.createElement(CheckEmailMsg, {\n    open: sent,\n    onResend: function onResend() {\n      return setSent(true);\n    }\n  }));\n};\n\nVerifyContact.defaultProps = {\n  hasEmail: true\n};\nVerifyContact.propTypes = {\n  onBack: PropTypes.func,\n  hasEmail: PropTypes.bool,\n  hasPhone: PropTypes.bool,\n  handleInputChange: PropTypes.func.isRequired,\n  handleSkip: PropTypes.func.isRequired,\n  handleVerify: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired\n};\nexport default VerifyContact;","export var utils = require('./utils');\nexport var CosmosBlackBackground = require('./CosmosBlackBackground').default;\nexport var MaterialUIWrap = require('./MaterialUIWrap').default;\nexport var LoadFakeData = require('./LoadFakeData').default;\nexport var withContext = require('./withContext').default;","import React from 'react';\nimport AuthContainer from './AuthContainer';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport ConfirmSignIn from './ConfirmSignIn';\nimport ConfirmSignUp from './ConfirmSignUp';\nimport ForgotPassword from './ForgotPassword';\nimport Loading, { LoadingWrapped } from './Loading';\nimport RequireNewPassword from './RequireNewPassword';\nimport VerifyContact from './VerifyContact';\nimport { MaterialUIWrap } from '@morphoto/client-mock';\n\nvar wrap = function wrap(Wrapper, props) {\n  return function () {\n    return React.createElement(MaterialUIWrap, {\n      noTheme: true\n    }, React.createElement(AuthContainer, null, Wrapper && React.createElement(Wrapper, props)));\n  };\n};\n\nexport default {\n  'Auth: container': wrap(),\n  'Auth: signIn': wrap(SignIn, {\n    authState: 'signIn',\n    loading: false,\n    federated: {\n      google_client_id: 'garbage'\n    },\n    handleBeAnonymous: function handleBeAnonymous() {\n      return alert('handleBeAnonymous');\n    },\n    handleForgotPassword: function handleForgotPassword() {\n      return alert('Forgot Password');\n    },\n    handleSignup: function handleSignup() {\n      return alert('Goto Signup');\n    },\n    handleInputChange: function handleInputChange() {\n      return console.log('inputchange');\n    },\n    handleSignIn: function handleSignIn() {\n      return alert('Sign In');\n    }\n  }),\n  'Auth: signUp': wrap(SignUp, {\n    handleInputChange: function handleInputChange() {\n      return console.log('inputchange');\n    },\n    signUpFields: [{\n      key: 'keyA',\n      type: 'text',\n      required: true\n    }, {\n      key: 'keyB',\n      type: 'number'\n    }, {\n      key: 'phone_number'\n    }],\n    signUpFieldLabels: ['Label for Text Field A', 'Label for Number Field B', 'Label for Phonenum Field C'],\n    signUpFieldPlaceholders: ['Placeholder for Field A', 'Placeholder for Field B', 'Placeholder for Field C'],\n    handleSignup: function handleSignup() {\n      return alert('Sign Up');\n    },\n    handleBack: function handleBack() {\n      return alert('Back');\n    },\n    countryDialCodes: ['+1', '+999'],\n    defaultDialCode: '+1'\n  }),\n  'Auth: confirmSignIn': wrap(ConfirmSignIn, {\n    handleInputChange: function handleInputChange(data) {\n      return console.log('handleInputChange', data);\n    },\n    handleBack: function handleBack(data) {\n      return console.log('handleBack', data);\n    },\n    handleConfirm: function handleConfirm(data) {\n      return console.log('handleConfirm', data);\n    }\n  }),\n  'Auth: confirmSignUp': wrap(ConfirmSignUp, {\n    handleInputChange: function handleInputChange(data) {\n      return console.log('handleInputChange', data);\n    },\n    handleBack: function handleBack(data) {\n      return console.log('handleBack', data);\n    },\n    handleResend: function handleResend(data) {\n      return console.log('handleResend', data);\n    },\n    handleConfirm: function handleConfirm(data) {\n      return console.log('handleConfirm', data);\n    }\n  }),\n  'Auth: ForgotPassword': wrap(ForgotPassword, {\n    handleSubmit: function handleSubmit(data) {\n      return console.log('handleSubmit', data);\n    },\n    handleInputChange: function handleInputChange(data) {\n      return console.log('handleInputChange', data);\n    },\n    handleSendCode: function handleSendCode(data) {\n      return console.log('handleSendCode', data);\n    },\n    handleBack: function handleBack(data) {\n      return console.log('handleBack', data);\n    }\n  }),\n  'Auth: RequireNewPassword': wrap(RequireNewPassword, {\n    change: function change() {\n      return alert('change');\n    },\n    handleInputChange: function handleInputChange() {\n      return console.log('handleInputChange');\n    },\n    requiredAttributes: ['attribA'],\n    placeholders: ['placeholder for attribA']\n  }),\n  'Auth: Loading': wrap(Loading, {}),\n  'Auth: LoadingWrapped': React.createElement(MaterialUIWrap, {\n    noTheme: true\n  }, React.createElement(LoadingWrapped, {\n    message: \"Something is happening...\"\n  })),\n  'Auth: VerifyContact': wrap(VerifyContact, {\n    hasEmail: true,\n    hasPhone: true\n  })\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport Auth from '@aws-amplify/auth';\nimport { I18n } from '@aws-amplify/core';\nimport countryDialCodes from 'aws-amplify-react/lib/Auth/common/country-dial-codes';\nimport { Authenticator, SignIn as SignInOrig, SignUp as SignUpOrig, ConfirmSignIn as ConfirmSignInOrig, ConfirmSignUp as ConfirmSignUpOrig, RequireNewPassword as RequireNewPasswordOrig, Loading as LoadingOrig, VerifyContact as VerifyContactOrig, ForgotPassword as ForgotPasswordOrig } from 'aws-amplify-react';\nimport CompSignIn from './SignIn';\nimport AuthContainer from './AuthContainer';\nimport CompConfirmSignIn from './ConfirmSignIn';\nimport CompRequireNewPassword from './RequireNewPassword';\nimport CompSignUp from './SignUp';\nimport CompLoading from './Loading';\nimport CompConfirmSignUp from './ConfirmSignUp';\nimport CompForgotPassword from './ForgotPassword';\nimport { config } from '@morphoto/client-common';\nAuth.configure(config.aws);\nvar defaultAuthState = {\n  authState: 'init',\n  authData: {},\n  signedIn: null\n};\nvar signUpConfig = {\n  header: 'My Customized Sign Up',\n  hiddenDefaults: ['username', 'email', 'phone_number', 'password'],\n  defaultCountryCode: '1',\n  signUpFields: [{\n    label: 'My user name',\n    key: 'username',\n    required: true,\n    displayOrder: 1,\n    type: 'string'\n  }, {\n    label: 'Password',\n    key: 'password',\n    required: true,\n    displayOrder: 3,\n    type: 'password'\n  }, {\n    label: 'Email',\n    key: 'email',\n    required: true,\n    displayOrder: 2,\n    type: 'string'\n  }]\n};\n\nvar useAuthentication = function useAuthentication() {\n  var _useState = useState(defaultAuthState),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      authState = _useState2$.authState,\n      authData = _useState2$.authData,\n      signedIn = _useState2$.signedIn,\n      setAuth = _useState2[1];\n\n  var handleAuthStateChange = function handleAuthStateChange(state, data) {\n    console.log('handleAuthStateChange', {\n      state: state,\n      data: data\n    });\n    setAuth({\n      authState: state,\n      authData: data,\n      signedIn: !state || state.length === 0 ? null : state === 'signedIn' ? true : signedIn\n    });\n  };\n\n  var getCurrentToken =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var currSession;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Auth.currentSession();\n\n            case 2:\n              currSession = _context.sent;\n              console.log('here', currSession.accessToken);\n              return _context.abrupt(\"return\", currSession && currSession.accessToken ? currSession.accessToken : null);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getCurrentToken() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var signOut = function signOut() {\n    return Auth.signOut().then(function (data) {\n      return console.log(data);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  var beAnonymous = function beAnonymous() {\n    setAuth({\n      authState: authState,\n      authData: authData,\n      signedIn: false\n    });\n  };\n\n  var authScreen = signedIn ? null : React.createElement(AuthContainer, null, React.createElement(Authenticator, {\n    onStateChange: handleAuthStateChange,\n    hideDefault: true,\n    signUpConfig: signUpConfig\n  }, React.createElement(SignIn, {\n    handleBeAnonymous: beAnonymous\n  }), React.createElement(Loading, {\n    message: \"Logging in\"\n  }), React.createElement(RequireNewPassword, null), React.createElement(ConfirmSignIn, null), React.createElement(ConfirmSignUp, null), React.createElement(VerifyContactOrig, null), React.createElement(ForgotPassword, null), React.createElement(SignUp, {\n    signUpConfig: signUpConfig\n  })));\n  var isGod = false;\n\n  try {\n    isGod = authData.signInUserSession.idToken.payload['cognito:groups'].indexOf('GodUsers') > -1;\n  } catch (e) {}\n\n  return {\n    authState: authState,\n    authData: authData,\n    isGod: isGod,\n    signOut: signOut,\n    getCurrentToken: getCurrentToken,\n    forceSignIn: function forceSignIn() {\n      return setAuth(defaultAuthState);\n    },\n    signedIn: signedIn,\n    authScreen: authScreen\n  };\n};\n\nexport default useAuthentication;\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_SignInOrig) {\n  _inherits(SignIn, _SignInOrig);\n\n  function SignIn() {\n    _classCallCheck(this, SignIn);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignIn).apply(this, arguments));\n  }\n\n  _createClass(SignIn, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this = this;\n\n      var loading = this.state.loading;\n\n      var newProps = _objectSpread({}, this.props, {\n        loading: loading,\n        handleForgotPassword: function handleForgotPassword() {\n          return _this.changeState('forgotPassword');\n        },\n        handleSignup: function handleSignup() {\n          return _this.changeState('signUp');\n        },\n        handleInputChange: this.handleInputChange,\n        handleSignIn: this.signIn\n      });\n\n      return React.createElement(CompSignIn, newProps);\n    }\n  }]);\n\n  return SignIn;\n}(SignInOrig);\n\nvar SignUp =\n/*#__PURE__*/\nfunction (_SignUpOrig) {\n  _inherits(SignUp, _SignUpOrig);\n\n  function SignUp() {\n    _classCallCheck(this, SignUp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignUp).apply(this, arguments));\n  }\n\n  _createClass(SignUp, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this2 = this;\n\n      var hide = this.props.hide;\n\n      if (hide && hide.includes(SignUp)) {\n        return null;\n      }\n\n      if (this.checkCustomSignUpFields()) {\n        this.signUpFields = this.props.signUpConfig.signUpFields;\n      }\n\n      this.sortFields();\n\n      var newProps = _objectSpread({}, this.props, {\n        countryDialCodes: countryDialCodes,\n        defaultDialCode: this.getDefaultDialCode(),\n        handleInputChange: this.handleInputChange,\n        signUpFields: this.signUpFields,\n        signUpFieldLabels: this.signUpFields.map(function (field) {\n          return I18n.get(field.label);\n        }),\n        signUpFieldPlaceholders: this.signUpFields.map(function (field) {\n          return I18n.get(field.placeholder);\n        }),\n        handleSignup: this.signUp,\n        handleBack: function handleBack() {\n          return _this2.changeState('signIn');\n        }\n      });\n\n      return React.createElement(CompSignUp, newProps);\n    }\n  }]);\n\n  return SignUp;\n}(SignUpOrig);\n\nvar ConfirmSignIn =\n/*#__PURE__*/\nfunction (_ConfirmSignInOrig) {\n  _inherits(ConfirmSignIn, _ConfirmSignInOrig);\n\n  function ConfirmSignIn() {\n    _classCallCheck(this, ConfirmSignIn);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ConfirmSignIn).apply(this, arguments));\n  }\n\n  _createClass(ConfirmSignIn, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this3 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this3.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm\n      });\n\n      return React.createElement(CompConfirmSignIn, newProps);\n    }\n  }]);\n\n  return ConfirmSignIn;\n}(ConfirmSignInOrig);\n\nvar ConfirmSignUp =\n/*#__PURE__*/\nfunction (_ConfirmSignUpOrig) {\n  _inherits(ConfirmSignUp, _ConfirmSignUpOrig);\n\n  function ConfirmSignUp() {\n    _classCallCheck(this, ConfirmSignUp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ConfirmSignUp).apply(this, arguments));\n  }\n\n  _createClass(ConfirmSignUp, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this4 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this4.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm,\n        handleResend: this.resend\n      });\n\n      return React.createElement(CompConfirmSignUp, newProps);\n    }\n  }]);\n\n  return ConfirmSignUp;\n}(ConfirmSignUpOrig);\n\nvar RequireNewPassword =\n/*#__PURE__*/\nfunction (_RequireNewPasswordOr) {\n  _inherits(RequireNewPassword, _RequireNewPasswordOr);\n\n  function RequireNewPassword() {\n    _classCallCheck(this, RequireNewPassword);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RequireNewPassword).apply(this, arguments));\n  }\n\n  _createClass(RequireNewPassword, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var user = this.props.authData;\n      var requiredAttributes = user.challengeParam.requiredAttributes;\n      var placeholders = Array.isArray(requiredAttributes) ? requiredAttributes.map(function (attribute) {\n        return I18n.get(convertToPlaceholder(attribute));\n      }) : [];\n\n      var newProps = _objectSpread({}, this.props, {\n        handleInputChange: this.handleInputChange,\n        requiredAttributes: requiredAttributes,\n        placeholders: placeholders,\n        change: this.change\n      });\n\n      return React.createElement(CompRequireNewPassword, newProps);\n    }\n  }]);\n\n  return RequireNewPassword;\n}(RequireNewPasswordOrig);\n\nvar Loading =\n/*#__PURE__*/\nfunction (_LoadingOrig) {\n  _inherits(Loading, _LoadingOrig);\n\n  function Loading() {\n    _classCallCheck(this, Loading);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Loading).apply(this, arguments));\n  }\n\n  _createClass(Loading, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      return React.createElement(CompLoading, this.props);\n    }\n  }]);\n\n  return Loading;\n}(LoadingOrig);\n\nvar ForgotPassword =\n/*#__PURE__*/\nfunction (_ForgotPasswordOrig) {\n  _inherits(ForgotPassword, _ForgotPasswordOrig);\n\n  function ForgotPassword() {\n    _classCallCheck(this, ForgotPassword);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ForgotPassword).apply(this, arguments));\n  }\n\n  _createClass(ForgotPassword, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this5 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this5.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm,\n        handleResend: this.send,\n        handleSubmit: this.submit,\n        handleSendCode: this.send\n      });\n\n      return React.createElement(CompForgotPassword, newProps);\n    }\n  }]);\n\n  return ForgotPassword;\n}(ForgotPasswordOrig);\n\nfunction convertToPlaceholder(str) {\n  return str.split('_').map(function (part) {\n    return part.charAt(0).toUpperCase() + part.substr(1).toLowerCase();\n  }).join(' ');\n}","export { default as fixtures } from './auth.fixture';\nexport { default as AuthContainer } from './AuthContainer';\nexport { default as Loading, LoadingWrapped } from './Loading';\nexport { default as SignIn } from './SignIn';\nexport { default as useAuthentication } from './useAuthentication';","import React, { useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport { List } from 'react-virtualized';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CircularProgress } from '@material-ui/core';\nimport { useComponentSize, AppContext } from '@morphoto/client-common';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport FeedEnder from './FeedEnder';\nimport FeedItem from './FeedItem';\nvar ROWHEIGHT = 300;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    container: {\n      padding: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1\n    },\n    listContainer: {\n      flexGrow: 1,\n      overflow: 'hidden'\n    },\n    vList: {\n      height: '100%',\n      width: '100%'\n    },\n    feedContainer: {\n      flexGrow: 1,\n      transform: 'translateZ(0)'\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n});\n\nvar MyFeed = function MyFeed(_ref) {\n  var events = _ref.events,\n      loading = _ref.loading,\n      actions = _ref.actions,\n      window = _ref.window;\n  var classes = useStyles();\n  var listRef = useRef();\n\n  var _useComponentSize = useComponentSize(listRef),\n      size = _useComponentSize.size;\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online;\n\n  var rowRenderer = function rowRenderer(_ref2) {\n    var index = _ref2.index,\n        isScrolling = _ref2.isScrolling,\n        isVisible = _ref2.isVisible,\n        key = _ref2.key,\n        parent = _ref2.parent,\n        style = _ref2.style;\n    var row = events[index];\n    var content;\n\n    if (index < events.length && row) {\n      content = React.createElement(FeedItem, {\n        event: events[index],\n        actions: actions\n      });\n    } else if (index === events.length) {\n      var wEnd = window && window[0] === 0;\n      content = React.createElement(FeedEnder, {\n        icon: React.createElement(CircularProgress, {\n          size: 30,\n          thickness: 2,\n          color: \"inherit\"\n        }),\n        text: \"Loading...\"\n      });\n      var almostAtEnd = ROWHEIGHT * 4 + parent.state.scrollTop > style.top;\n\n      if (!online.isOnline) {\n        content = React.createElement(FeedEnder, {\n          icon: React.createElement(ErrorIcon, null),\n          text: \"Cannot Refresh Offline\"\n        });\n      } else if (wEnd) {\n        content = React.createElement(FeedEnder, {\n          text: \"End of feed\"\n        });\n      } else if (!loading && almostAtEnd) {\n        actions.fetchMore();\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: classes.row,\n      key: key,\n      style: style\n    }, content);\n  };\n\n  rowRenderer.propTypes = {\n    index: PropTypes.any,\n    key: PropTypes.any,\n    style: PropTypes.any,\n    isScrolling: PropTypes.any,\n    isVisible: PropTypes.any,\n    parent: PropTypes.any\n  };\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(Typography, {\n    className: classes.grow\n  }, \"Home Feed\")), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, React.createElement(\"div\", {\n    className: classes.listContainer,\n    ref: listRef\n  }, React.createElement(List, {\n    height: size.height,\n    width: size.width,\n    className: classes.vList,\n    rowCount: events.length + 1,\n    rowHeight: ROWHEIGHT,\n    rowRenderer: rowRenderer\n  }))));\n};\n\nMyFeed.propTypes = {\n  events: PropTypes.array.isRequired,\n  loading: PropTypes.bool,\n  window: PropTypes.arrayOf(PropTypes.number),\n  actions: PropTypes.shape({\n    onImageClick: PropTypes.func.isRequired,\n    onProfileClick: PropTypes.func.isRequired,\n    onMapClick: PropTypes.func.isRequired,\n    fetchNewest: PropTypes.func.isRequired,\n    fetchMore: PropTypes.func.isRequired\n  })\n};\nexport default MyFeed;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    text: {\n      textAlign: 'center',\n      fontStyle: 'italic',\n      padding: theme.spacing(2, 1)\n    }\n  };\n});\n\nvar FeedEnder = function FeedEnder(_ref) {\n  var style = _ref.style,\n      icon = _ref.icon,\n      text = _ref.text;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), icon, React.createElement(Typography, {\n    className: classes.text,\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    component: \"div\",\n    style: style\n  }, text), React.createElement(\"div\", {\n    className: classes.grow\n  }));\n};\n\nFeedEnder.propTypes = {\n  style: PropTypes.object,\n  icon: PropTypes.any,\n  text: PropTypes.string\n};\nexport default FeedEnder;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useLayoutEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Fab from '@material-ui/core/Fab';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport CameraIcon from '@material-ui/icons/Camera';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { RawImage, PhotoGrid, PhotoFadeSlider } from '@morphoto/photos';\nimport { useCamera } from '@morphoto/client-common';\nimport style from './CameraTool.style';\nvar useStyles = makeStyles(style);\n\nvar CameraTool = function CameraTool(_ref) {\n  var onCancel = _ref.onCancel,\n      onShutter = _ref.onShutter,\n      defaultRefPhotoId = _ref.defaultRefPhotoId,\n      photos = _ref.photos;\n  var classes = useStyles();\n\n  var _useState = useState(50),\n      _useState2 = _slicedToArray(_useState, 2),\n      slider = _useState2[0],\n      setSlider = _useState2[1];\n\n  var refImgRef = useRef();\n\n  var _useState3 = useState([window.innerWidth, window.innerHeight]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      size = _useState4[0],\n      setSize = _useState4[1];\n\n  console.log('cameraTool', {\n    defaultRefPhotoId: defaultRefPhotoId,\n    photos: photos\n  });\n  var newRefPhoto = defaultRefPhotoId ? photos.find(function (p) {\n    return p.id === defaultRefPhotoId;\n  }) : photos && photos.length > 0 ? photos[0] : null;\n\n  var _useState5 = useState(newRefPhoto),\n      _useState6 = _slicedToArray(_useState5, 2),\n      refPhoto = _useState6[0],\n      setRefPhoto = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      drawerOpen = _useState8[0],\n      setDrawerOpen = _useState8[1];\n\n  var _useCamera = useCamera(function (data) {\n    return onShutter(data, refPhoto ? refPhoto.id : null);\n  }, size[0], size[1]),\n      cameraError = _useCamera.cameraError,\n      captureImage = _useCamera.captureImage,\n      cameraOnline = _useCamera.cameraOnline;\n\n  var handleTileClick = function handleTileClick(id) {\n    setRefPhoto(photos.find(function (p) {\n      return p.id === id;\n    }));\n    setDrawerOpen(false);\n  };\n\n  var handleResize = function handleResize() {\n    console.log('RESIZE', [window.innerWidth, window.innerHeight]);\n    setSize([window.innerWidth, window.innerHeight]);\n  };\n\n  useLayoutEffect(function () {\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return function () {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), !cameraError && Boolean(refPhoto) && React.createElement(PhotoFadeSlider, {\n    defaultValue: slider,\n    onChange: setSlider\n  }), cameraError && React.createElement(\"div\", {\n    className: classes.cameraErrorText\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\"\n  }, \"No Camera Access\"), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, \"Please enabled access in your settings.\")), Boolean(refPhoto) && React.createElement(\"div\", {\n    className: classes.reference\n  }, React.createElement(RawImage, {\n    imgRef: refImgRef,\n    sizePriority: ['large', 'medium', 'thumb'],\n    style: {\n      opacity: slider / 100\n    },\n    photo: refPhoto\n  })), !cameraError && React.createElement(\"video\", {\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    id: \"webcam\",\n    width: window.innerWidth,\n    height: window.innerHeight,\n    className: classes.video\n  }), React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"Take Photo\",\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: cameraError || !cameraOnline,\n    className: classNames(classes.cameraFab, classes.buttonFab),\n    onClick: captureImage\n  }, React.createElement(CameraIcon, {\n    className: classes.cameraIcon\n  })), React.createElement(Fab, {\n    color: \"secondary\",\n    \"aria-label\": \"cancel\",\n    onClick: onCancel,\n    classes: {\n      disabled: classes.disabledFab\n    },\n    className: classNames(classes.cancelFab, classes.buttonFab)\n  }, React.createElement(CancelIcon, {\n    className: classes.cancelIcon\n  })), photos && React.createElement(Fab, {\n    \"aria-label\": \"library\",\n    className: classNames(classes.libraryFab, classes.buttonFab),\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: !photos || photos.length === 0,\n    onClick: function onClick() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    className: classes.libraryIcon\n  })), photos && React.createElement(SwipeableDrawer, {\n    anchor: \"left\",\n    open: drawerOpen,\n    classes: {\n      paperAnchorLeft: classes.swipeDrawer\n    },\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: classes.swipeDrawerContainer,\n    role: \"button\",\n    onClick: function onClick() {\n      return setDrawerOpen(false);\n    },\n    onKeyDown: function onKeyDown() {\n      return setDrawerOpen(false);\n    }\n  }, React.createElement(PhotoGrid, {\n    multiSelect: false,\n    columns: 1,\n    photos: photos,\n    onTileClick: handleTileClick\n  }))));\n};\n\nCameraTool.propTypes = {\n  defaultRefPhotoId: PropTypes.string,\n  onCancel: PropTypes.func.isRequired,\n  onShutter: PropTypes.func.isRequired,\n  photos: PropTypes.array\n};\nexport default CameraTool;","export default (function (theme) {\n  return {\n    root: {\n      background: 'black',\n      height: '100%',\n      width: '100%'\n    },\n    cameraErrorText: {\n      color: 'white',\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      width: '90%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      textAlign: 'center'\n    },\n    disabledFab: {\n      color: '#AAAAA!important',\n      background: '#DDDDDD!important',\n      opacity: 0.2\n    },\n    cameraFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '20px',\n        top: '50%',\n        transform: 'translateY(-50%)',\n        height: '25vh',\n        width: '25vh'\n      },\n      '@media (orientation: portrait)': {\n        bottom: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        height: '25vw',\n        width: '25vw'\n      }\n    },\n    cameraIcon: {\n      height: '100%',\n      width: '100%'\n    },\n    cancelFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        top: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        right: '15px',\n        bottom: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    cancelIcon: {\n      height: '100%',\n      width: '100%'\n    },\n    swipeDrawer: {\n      width: '50%'\n    },\n    libraryFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        left: '15px',\n        top: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        top: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    myLocationFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        bottom: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        bottom: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    myLocationIcon: {\n      height: '80%',\n      width: '80%'\n    },\n    captured: {},\n    reference: {\n      position: 'absolute',\n      zIndex: 2,\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    video: {\n      position: 'absolute',\n      zIndex: 1,\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    }\n  };\n});","import jsQR from 'jsqr';\nexport var jsQRFromBlob = function jsQRFromBlob(_ref) {\n  var data = _ref.data,\n      imageHeight = _ref.imageHeight,\n      imageWidth = _ref.imageWidth;\n  return new Promise(function (resolve, reject) {\n    try {\n      var qrCode = jsQR(data, imageWidth, imageHeight);\n      resolve(qrCode);\n    } catch (e) {\n      reject(e);\n    }\n  });\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { green, red } from '@material-ui/core/colors';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { QRCode as QRcodeIcon } from '@morphoto/icons';\nimport { jsQRFromBlob } from './QRUtil';\nimport { util } from '@morphoto/common';\nimport { useCamera } from '@morphoto/client-common';\nvar CAMERAWIDTH = 400;\nvar CAMERAHEIGHT = 400;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column'\n    },\n    qrIcon: {\n      border: '5px solid red',\n      padding: theme.spacing(2),\n      position: 'absolute',\n      color: 'white',\n      opacity: 0.4,\n      zIndex: 2,\n      width: '70%',\n      height: '70%',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    backupText: {\n      position: 'absolute',\n      color: 'white',\n      textAlign: 'center',\n      zIndex: 2,\n      width: '70%',\n      height: '70%',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    manualImg: {\n      position: 'absolute',\n      zIndex: 1\n    },\n    appBar: {},\n    inner: {\n      padding: theme.spacing(2),\n      height: '100%',\n      flexGrow: 1,\n      overflow: 'hidden'\n    },\n    tipPaper: {\n      padding: theme.spacing(2),\n      margin: theme.spacing(2)\n    },\n    docContainer: {\n      flexGrow: 1,\n      padding: theme.spacing(2)\n    },\n    cameraContainer: {\n      width: '80%',\n      margin: '0 auto',\n      position: 'relative',\n      '&::before': {\n        content: ' ',\n        display: 'block',\n        paddingTop: '100%'\n      }\n    },\n    cameraContainerError: {\n      background: 'black'\n    },\n    snackErr: {\n      background: red[500],\n      color: 'white'\n    },\n    snackSuccess: {\n      background: green[500],\n      color: 'white'\n    },\n    snackMsg: {},\n    video: {\n      height: '100%',\n      width: '100%',\n      verticalAlign: 'top'\n    }\n  };\n});\n\nvar QRReader = function QRReader(_ref) {\n  var onMenuBack = _ref.onMenuBack,\n      onCapture = _ref.onCapture,\n      isIos = _ref.isIos;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      capturedBlob = _useState2[0],\n      setCapturedBlob = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      err = _useState4[0],\n      setErr = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      code = _useState6[0],\n      setCode = _useState6[1];\n\n  var _useCamera = useCamera(setCapturedBlob, CAMERAWIDTH, CAMERAHEIGHT),\n      cameraError = _useCamera.cameraError,\n      captureRawData = _useCamera.captureRawData,\n      cameraOnline = _useCamera.cameraOnline;\n\n  var captureFunc = useCallback(util.debounce(captureRawData, 100), [cameraOnline, cameraError]);\n  useEffect(function () {\n    var scan =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var scannedCode, find, foundIdx, newData, decodedUrl;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                scannedCode = null;\n                _context.prev = 1;\n                _context.next = 4;\n                return jsQRFromBlob(capturedBlob);\n\n              case 4:\n                scannedCode = _context.sent;\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](1);\n                console.error(_context.t0);\n\n              case 10:\n                _context.prev = 10;\n\n                if (!(cameraError && !scannedCode)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                throw new Error('Captured Image does not have a QR code');\n\n              case 13:\n                if (!scannedCode) {\n                  _context.next = 23;\n                  break;\n                }\n\n                find = '?fromqr=';\n                foundIdx = scannedCode.data.indexOf(find) + find.length;\n                newData = scannedCode.data.slice(foundIdx);\n                decodedUrl = JSON.parse(decodeURI(newData));\n\n                if (!(!decodedUrl.type || !decodedUrl.id)) {\n                  _context.next = 20;\n                  break;\n                }\n\n                throw new Error('Type or ID missing from QR Code');\n\n              case 20:\n                setCode(decodedUrl);\n                setErr(null);\n                console.log('QRCODE', scannedCode);\n\n              case 23:\n                _context.next = 29;\n                break;\n\n              case 25:\n                _context.prev = 25;\n                _context.t1 = _context[\"catch\"](10);\n                setErr('Not a valid QR Code');\n                console.error(_context.t1);\n\n              case 29:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 7], [10, 25]]);\n      }));\n\n      return function scan() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    if (cameraOnline && !cameraError && !err && !code) {\n      if (!capturedBlob || !capturedBlob.data) captureFunc();else {\n        scan();\n        captureFunc();\n      }\n    }\n  }, [cameraOnline, capturedBlob, err, code]);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Capture QR Code\"))), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(Paper, {\n    className: classNames(classes.cameraContainer, cameraError ? classes.cameraContainerError : null)\n  }, React.createElement(QRcodeIcon, {\n    className: classes.qrIcon\n  }), React.createElement(\"video\", {\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    id: \"webcam\",\n    className: classes.video\n  })), React.createElement(Paper, {\n    className: classes.tipPaper\n  }, React.createElement(Typography, null, \"TIP: You can find the QR code for a series in the SHARE tab of that series\"))), React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: !!err,\n    autoHideDuration: 2000,\n    onClose: function onClose() {\n      setErr(null);\n      setCapturedBlob(null);\n    }\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackErr,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, err)\n  })), !isIos && React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: cameraError\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackErr,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, \"Camera Error. Check your device's permissions\")\n  })), React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: !!code,\n    autoHideDuration: 500,\n    onClose: function onClose() {\n      return onCapture(code.type, code.s, code.p);\n    }\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackSuccess,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, \"Valid QR Code found!\")\n  })));\n};\n\nQRReader.propTypes = {\n  onMenuBack: PropTypes.func.isRequired,\n  isIos: PropTypes.bool.isRequired,\n  onCapture: PropTypes.func.isRequired\n};\nexport default QRReader;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, Link } from '@material-ui/core';\nimport QRCode from 'qrcode';\nimport { createShareUrl } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    qrPaper: {\n      textAlign: 'center',\n      padding: theme.spacing(0, 2)\n    },\n    qrCode: {\n      width: '100%',\n      minHeight: 300,\n      maxHeight: 400\n    }\n  };\n});\n\nvar QRDisplay = function QRDisplay(_ref) {\n  var onClose = _ref.onClose,\n      open = _ref.open,\n      series = _ref.series,\n      photoId = _ref.photoId;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      qrCodeEl = _useState2[0],\n      setQRCodeEl = _useState2[1];\n\n  var _createShareUrl = createShareUrl(series, photoId),\n      url = _createShareUrl.url,\n      ogShare = _createShareUrl.ogShare;\n\n  var canShare = ['OPEN', 'PUBLIC'].indexOf(series.access) > -1;\n  useLayoutEffect(function () {\n    QRCode.toString(url, function (err, svgStr) {\n      if (err) console.error(err);else setQRCodeEl(svgStr);\n    });\n  }, [series]);\n  useLayoutEffect(function () {\n    if (navigator.share && open && canShare) {\n      var text = 'MorPhoto Series';\n      if (series.note) text = series.note.length > 100 ? series.note.slice(100) + '...' : series.note;\n      navigator.share({\n        title: series.name,\n        text: text,\n        url: ogShare\n      }).then(function () {\n        return console.log('Successful share');\n      }).catch(function (error) {\n        return console.log('Error sharing', error);\n      });\n    }\n  }, [open]);\n  return React.createElement(Dialog, {\n    open: open,\n    fullWidth: true,\n    onClose: onClose,\n    className: classes.root\n  }, React.createElement(DialogTitle, {\n    className: classes.title\n  }, series.name), React.createElement(Paper, {\n    className: classes.qrPaper\n  }, canShare ? React.createElement(\"svg\", {\n    className: classes.qrCode,\n    dangerouslySetInnerHTML: {\n      __html: qrCodeEl\n    }\n  }) : React.createElement(Typography, {\n    variant: \"\",\n    color: \"error\"\n  }, \"You cannot share a private series.\"), canShare && React.createElement(Link, {\n    href: url\n  }, \"Share Link\"), series.coords && React.createElement(Typography, {\n    component: \"div\",\n    className: classes.coords,\n    variant: \"overline\"\n  }, \"coords: [ \", series.coords[0], \", \", series.coords[1], \" ]\")));\n};\n\nQRDisplay.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  series: PropTypes.object.isRequired,\n  photoId: PropTypes.string\n};\nexport default QRDisplay;","export { default as CameraTool } from './CameraTool';\nexport { default as QRReader } from './QRReader';\nexport { default as QRDisplay } from './QRDisplay';","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport default {\n  s3Upload: require('./s3Upload').default,\n  graphql: {\n    APOLLOSTATES: require('./graphql/useGraphQL').APOLLOSTATES,\n    useGraphQL: require('./graphql/useGraphQL').default,\n    queries: require('./graphql/queries'),\n    mutations: _objectSpread({}, require('./graphql/mutations'), {\n      createPhoto: require('./graphql/mutations/createPhoto').default,\n      createSeries: require('./graphql/mutations/createSeries').default,\n      deletePhoto: require('./graphql/mutations/deletePhoto').default,\n      deleteSeries: require('./graphql/mutations/deleteSeries').default,\n      unwatch: require('./graphql/mutations/unwatch').default,\n      updatePhoto: require('./graphql/mutations/updatePhoto').default,\n      updateSeries: require('./graphql/mutations/updateSeries').default,\n      watch: require('./graphql/mutations/watch').default,\n      updateQueries: require('./graphql/mutations/updateQueries')\n    }),\n    offline: require('./graphql/offline')\n  },\n  redux: {\n    withReduxProvider: require('./redux/withReduxProvider').default,\n    actions: require('./redux/actions').default\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport { AppLogo } from '@morphoto/icons';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    content: {},\n    messageWrapper: {\n      display: 'flex'\n    },\n    logo: {\n      height: 50,\n      width: 50\n    },\n    paper: {\n      background: theme.palette.text.primary,\n      color: theme.palette.primary.contrastText,\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      boxShadow: \"0 0 0 0 \".concat(theme.palette.primary.main),\n      animation: '$installPulse 2s infinite',\n      padding: theme.spacing(2, 3),\n      width: '100%'\n    },\n    '@keyframes installPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(theme.palette.primary.main)\n      },\n      '50%': {\n        boxShadow: \"0 0 0 0px \".concat(theme.palette.primary.main)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 20px transparent\"\n      }\n    },\n    textWrapper: {\n      flexGrow: 1,\n      paddingLeft: theme.spacing(1)\n    },\n    buttons: {\n      display: 'flex'\n    },\n    spacer: {\n      flexGrow: 1\n    }\n  };\n});\n\nvar InstallPrompt = function InstallPrompt(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      onInstall = _ref.onInstall;\n  var classes = useStyles();\n  return React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: open,\n    onClose: onClose\n  }, React.createElement(Paper, {\n    className: classes.paper,\n    elevation: 24\n  }, React.createElement(\"div\", {\n    id: \"client-snackbar\",\n    className: classes.messageWrapper\n  }, React.createElement(AppLogo, {\n    className: classes.logo\n  }), React.createElement(\"div\", {\n    className: classes.textWrapper\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, \"Install MorPhoto\"), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\",\n    paragraph: true\n  }, \"This app can be installed and used on your device natively and offline if you would like.\"), React.createElement(\"div\", {\n    className: classes.buttons\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: onClose\n  }, \"No thanks\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: onInstall\n  }, \"Install\"))))));\n};\n\nInstallPrompt.propTypes = {\n  open: PropTypes.bool,\n  actions: PropTypes.shape({\n    onClose: PropTypes.func.isRequired,\n    onInstall: PropTypes.func.isRequired\n  })\n};\nexport default InstallPrompt;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useOSDetect } from '@morphoto/client-common';\nimport InstallPrompt from './InstallPrompt';\n\nvar isInStandaloneMode = function isInStandaloneMode() {\n  return 'standalone' in window.navigator && window.navigator.standalone;\n};\n\nvar useShowAddToHome = function useShowAddToHome(showInstall, dismissInstall) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      deferredPrompt = _useState2[0],\n      setPrompt = _useState2[1];\n\n  var _useOSDetect = useOSDetect(),\n      ios = _useOSDetect.ios,\n      phone = _useOSDetect.phone;\n\n  var handleBeforePrompt = function handleBeforePrompt(e) {\n    e.preventDefault();\n    setPrompt(e);\n  };\n\n  var installPrompt = useMemo(function () {\n    if (!showInstall || !deferredPrompt) return null;\n    return React.createElement(InstallPrompt, {\n      open: true,\n      onClose: dismissInstall,\n      onInstall: addToHomeScreen\n    });\n  }, [showInstall, deferredPrompt]);\n  useEffect(function () {\n    if (ios && !isInStandaloneMode()) {\n      console.log('I AM on IOS and I am NOT in standalone mode.');\n    }\n\n    window.addEventListener('beforeinstallprompt', handleBeforePrompt);\n    return function () {\n      window.removeEventListener('beforeinstallprompt', handleBeforePrompt);\n    };\n  }, []);\n\n  function addToHomeScreen() {\n    deferredPrompt.prompt();\n    deferredPrompt.userChoice.then(function (choiceResult) {\n      if (choiceResult.outcome === 'accepted') {\n        console.log('User accepted the A2HS prompt');\n        dismissInstall();\n      } else {\n        console.log('User dismissed the A2HS prompt');\n        dismissInstall();\n      }\n\n      setPrompt(null);\n    });\n  }\n\n  return {\n    installPrompt: installPrompt,\n    addToHomeScreen: installPrompt ? addToHomeScreen : null\n  };\n};\n\nexport default useShowAddToHome;","import React, { useState } from 'react'\n// import PropTypes from 'prop-types'\nimport { graphql } from 'react-apollo'\nimport { connect } from 'react-redux'\n\nimport { ErrorScreen, ERROR_SEND_STATES } from '@morphoto/ui'\n// import { config } from '@morphoto/client-common'\n\nimport datastore from '@morphoto/datastore'\n\nconst ErrorConnect = (props) => {\n  const [state, setState] = useState(ERROR_SEND_STATES.UNSENT)\n  const Wrapped = withReportBugMutation(ErrorScreen)\n  return <Wrapped {...props} setState={setState} sendState={state} />\n}\n\nconst withReportBugMutation = graphql(datastore.graphql.mutations.reportBug, {\n  props: ({ mutate, ownProps: { reduxState, error, setState } }) => {\n    console.log('withReportBugMutation props', { mutate, reduxState, error })\n    if (mutate.error) setState(ERROR_SEND_STATES.ERROR)\n    return {\n      reportError: (note) => {\n        setState(ERROR_SEND_STATES.SENDING)\n        let reportJSON = ''\n        // attempt to get some userAgent info\n        let extra = {}\n        try {\n          const { userAgent, appVersion, languages, language, platform, onLine } = window.navigator\n          extra = {\n            userAgent,\n            appVersion,\n            languages,\n            language,\n            platform,\n            onLine,\n            window: {\n              innerHeight: window.innerHeight,\n              innerWidth: window.innerWidth\n            }\n          }\n        }\n        catch (e) {\n          console.error(e)\n        }\n        let errSubset = {}\n        try {\n          errSubset = {\n            message: error.message,\n            stack: error.stack\n          }\n        }\n        catch (e) {\n          console.error(e)\n        }\n\n        const errObj = { note, reduxState, error: errSubset, env: process.env, ...extra }\n        console.log('withReportBugMutation StartingError', errObj)\n        try {\n          reportJSON = JSON.stringify(errObj)\n        }\n        catch (e) {\n          reportJSON = error.toString()\n        }\n        console.log('withReportBugMutation got through it', reportJSON)\n        return mutate({\n          variables: { reportJSON },\n          update: (store, { data }) => {\n            console.log('withReportBugMutation update', data)\n            setState(ERROR_SEND_STATES.SENT)\n          }\n        })\n      }\n    }\n  }\n})\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { map, home, uploader, ...other } = state\n  const newMap = map.slice(-5) // only the last 5 map states come through\n\n  return {\n    reduxState: {\n      ...other,\n      map: newMap,\n      home\n    }\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ErrorConnect)\n","// https://medium.com/@shalkam/create-react-app-i18n-the-easy-way-b05536c594cb\nimport React, { useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { IntlProvider, addLocaleData } from 'react-intl'\nimport frLocaleData from 'react-intl/locale-data/fr'\n\naddLocaleData(frLocaleData)\n\nexport const IntlContext = React.createContext({})\n\n// the format message hook\nexport const useIntl = () => {\n  const intl = useContext(IntlContext)\n  return intl.formatMessage\n}\n\nexport const IntlWrapper = ({ children }) => (\n  <IntlProvider locale='en'>\n    {children}\n  </IntlProvider>\n)\nIntlWrapper.propTypes = {\n  children: PropTypes.any\n}\n","import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { AppSettings } from '@morphoto/ui';\nimport { BottomBar, OfflineBar } from '@morphoto/navigation';\nimport { QRReader } from '@morphoto/camera';\nimport { AppContext, config } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\nvar STATES = config.home.AppStateTypes;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    outerRoot: {\n      height: '100%',\n      overflow: 'hidden'\n    },\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    offlineBar: {\n      flex: '0 0'\n    },\n    activeWrapper: {\n      overflow: 'hidden',\n      flexGrow: 1,\n      flexShrink: 1,\n      height: '100%'\n    },\n    uploaderContainer: {\n      zIndex: 100,\n      flex: '0 0'\n    }\n  };\n});\n\nvar Home = function Home(_ref) {\n  var domain = _ref.domain,\n      components = _ref.components;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      signedIn = _useContext.signedIn,\n      responsive = _useContext.responsive,\n      globalActions = _useContext.globalActions,\n      device = _useContext.device,\n      currentUser = _useContext.currentUser;\n\n  var Upload = components.upload;\n  useEffect(function () {\n    if (!signedIn && [STATES.MAP, STATES.SEARCH, STATES.SERIES, STATES.QRCAPTURE, STATES.SETTINGS, STATES.OFFLINE_DOWNLOAD].indexOf(domain) < 0) globalActions.setHomeState(STATES.MAP);\n  }, [domain, globalActions.setHomeState, signedIn]);\n  var showBottomBar = true;\n  var activeProps = {};\n  var ActiveComponent = components.feed;\n  var theme = themes.home;\n\n  switch (domain) {\n    case STATES.FEED:\n      ActiveComponent = components.feed;\n      break;\n\n    case STATES.MAP:\n      ActiveComponent = components.map;\n      break;\n\n    case STATES.PROFILE:\n      ActiveComponent = components.profile;\n      break;\n\n    case STATES.SEARCH:\n      ActiveComponent = components.search;\n      break;\n\n    case STATES.SERIES:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.NEW_SERIES_CAMERA:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.OFFLINE_DOWNLOAD:\n      ActiveComponent = components.offline;\n      showBottomBar = false;\n      break;\n\n    case STATES.NEW_SERIES_LIBRARY:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.QRCAPTURE:\n      ActiveComponent = QRReader;\n      showBottomBar = false;\n      activeProps = {\n        onCapture: globalActions.onQRCapture,\n        onMenuBack: globalActions.onMenuBack,\n        isIos: device.ios\n      };\n      break;\n\n    case STATES.SETTINGS:\n      ActiveComponent = AppSettings;\n      showBottomBar = false;\n      activeProps = {\n        onMenuBack: globalActions.onMenuBack\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ThemeProvider, {\n    theme: theme\n  }, React.createElement(\"div\", {\n    className: classes.outerRoot\n  }, React.createElement(\"div\", {\n    className: classes.root,\n    style: {\n      width: responsive.windowSize.width,\n      height: responsive.windowSize.height\n    }\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(OfflineBar, {\n    className: classes.offlineBar\n  }), React.createElement(\"div\", {\n    className: classes.activeWrapper\n  }, React.createElement(ActiveComponent, activeProps)), showBottomBar && React.createElement(BottomBar, {\n    domain: domain\n  }), React.createElement(Upload, {\n    className: classes.uploaderContainer\n  }), components.pwaInstall)));\n};\n\nHome.propTypes = {\n  domain: PropTypes.string.isRequired,\n  components: PropTypes.shape({\n    upload: PropTypes.any.isRequired,\n    series: PropTypes.any.isRequired,\n    map: PropTypes.any.isRequired,\n    search: PropTypes.any.isRequired,\n    profile: PropTypes.any.isRequired,\n    feed: PropTypes.any.isRequired,\n    offline: PropTypes.any.isRequired,\n    pwaInstall: PropTypes.any\n  })\n};\nexport default Home;","import Home from './Home';\nexport default Home;","import React, { useRef, useEffect, useContext, useMemo, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { graphql, compose } from 'react-apollo'\n\nimport { AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\n\nconst withUploadConnect = Wrapped => {\n  const Inner = ({\n    activeUpload,\n    completeActiveUpload,\n    updateUploadProgress,\n    ...props\n  }) => {\n    const uploadingRef = useRef()\n    const [qItem, setQItem] = useState()\n    const { online } = useContext(AppContext)\n\n    uploadingRef.current = activeUpload ? `${activeUpload.id}__retry${activeUpload.retry}` : null\n\n    const newS3 = useMemo(() => <NewS3Credentials onDone={updateUploadProgress} qItem={qItem} />, [qItem, updateUploadProgress])\n\n    useEffect(() => {\n      console.log('UPLOADDEBUG::::', { uploadingRef, activeUpload, online })\n      if (online.isOnline && activeUpload && uploadingRef.current) {\n      // if the upload fails the failed qItem gets set in the state\n        datastore.s3Upload(activeUpload, updateUploadProgress, completeActiveUpload, setQItem)\n      }\n    }, [activeUpload, completeActiveUpload, online, updateUploadProgress])\n\n    if (!activeUpload) return null\n    return (\n      <React.Fragment>\n        {newS3}\n        <Wrapped text={'Uploading image'} progress={activeUpload.progress || 0} {...props} />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n  // All from redux\n    activeUpload: PropTypes.object,\n    completeActiveUpload: PropTypes.func.isRequired,\n    updateUploadProgress: PropTypes.func.isRequired\n  }\n\n  return Inner\n}\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetNewS3Credentials = graphql(datastore.graphql.queries.getNewS3Credentials, {\n  skip: ({ online, qItem }) => !online || !qItem,\n  props: ({ data, ownProps }) => {\n    if (data.error) console.error(data.error)\n    console.log('getWholeSeries:: ', { data })\n\n    // If we get backa  valid auth code then create a new queue object\n    // and send it back\n    if (!data.loading) {\n      ownProps.onDone({\n        ...ownProps.qItem,\n        retry: ownProps.qItem.retry + 1,\n        preAuth: JSON.parse(data.s3Credentials)\n      })\n    }\n    return {\n      data\n    }\n  },\n  options: ({ qItem }) => ({\n    variables: { seriesId: qItem.seriesId, photoId: qItem.id, ext: qItem.ext }\n  })\n})\nconst NewS3Credentials = withGetNewS3Credentials(() => null)\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { activeUpload } = state.uploader\n  return { activeUpload }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  completeActiveUpload: () => {\n    dispatch(datastore.redux.actions.completeActiveUpload())\n  },\n  updateUploadProgress: (newProgress) => {\n    dispatch(datastore.redux.actions.updateUploadProgress(newProgress))\n  }\n})\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withUploadConnect\n)\n","import React, { useContext, useMemo, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport { connect } from 'react-redux'\nimport ReactGA from 'react-ga'\n\nimport { NEW_PHOTO_MODES, SERIES_MODES } from '@morphoto/photoseries'\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\n\nconst STATES = config.home.AppStateTypes\n\nconst withSeriesConnect = WrappedSeries => {\n  const InnerSeries = ({\n    series, loading, domain, activeSeries, initialPhoto,\n    onAfterSeriesDelete, queueUpload,\n    updateSeriesMutation, updatePhotoMutation,\n    deleteSeriesMutation, deletePhotoMutation,\n    createSeriesMutation, createPhotoMutation,\n    watchSeriesMutation, unWatchSeriesMutation,\n    onFindOnMap\n  }) => {\n    const { role, currentUser, signedIn, globalActions } = useContext(AppContext)\n\n    const inputMethod = domain === STATES.NEW_SERIES_CAMERA\n      ? NEW_PHOTO_MODES.CAMERA\n      : NEW_PHOTO_MODES.FILEPICKER\n\n    // console.log('SeriesConnect', { series, loading, currentState, activeSeries, role, currentUser })\n    let modeName = SERIES_MODES.SERIES_VIEW\n    if (domain !== STATES.SERIES) modeName = SERIES_MODES.NEWSERIES\n\n    // A little mutation here.\n    useMemo(() => {\n      if (series && series.photos) {\n        series.photos.sort((a, b) => parseInt(a.takenOn, 10) - parseInt(b.takenOn, 10))\n      }\n    }, [series])\n\n    useEffect(() => {\n      if (series && series.id) {\n        ReactGA.event({\n          category: `Series`,\n          action: 'View',\n          label: series.id\n        })\n      }\n    }, [series])\n\n    let owned = false\n    try {\n      owned = currentUser.id === series.createdUser.id\n    }\n    catch (e) {}\n    // console.log('[SERIESCONNECT_RENDER]', { activeSeries, series, loading, owned, currentUser })\n\n    return (\n      <WrappedSeries\n        modeName={modeName}\n        inputMethod={inputMethod}\n\n        owned={owned}\n        watching={signedIn && currentUser && currentUser.watching && currentUser.watching.indexOf(activeSeries) > -1}\n\n        // Everything we need to determine access\n        currentUserId={signedIn ? currentUser.id : null}\n        currentUserRole={role}\n        loading={loading}\n        series={series}\n        initialPhoto={initialPhoto}\n\n        actions={{\n          // Now some functions to handle actions we might take\n          onNewPhoto: async (newPhoto, newPhotoData) => {\n            console.log('onNewPhoto::', { series, newPhoto, newPhotoData })\n            // Write this blob to the imgStore so we can use it later\n            await datastore.graphql.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData)\n            return createPhotoMutation(series, newPhoto, newPhotoData.ext)\n              .then(({ data }) => {\n                // Now we can add this photo to the upload queue\n                const photo = data.createPhoto.photo\n                if (data.createPhoto.preAuth) {\n                  const preAuth = JSON.parse(data.createPhoto.preAuth)\n\n                  queueUpload({\n                    id: photo.id,\n                    uploadToken: photo.uploadToken,\n                    seriesId: photo.seriesId,\n                    preAuth,\n                    ext: newPhotoData.ext,\n                    retry: 0\n                  })\n                }\n              })\n              .catch(err => {\n                console.log('onNewPhoto:: Graphql Error', err.stack)\n                console.error(err)\n              })\n          },\n\n          onChangePhoto: (photo, photoDelta) => updatePhotoMutation(series, photo, photoDelta)\n            .catch(err => {\n              console.log('onChangePhoto:: Graphql Error', err.stack)\n              console.error(err)\n            }),\n\n          onDeletePhoto: (photo) => deletePhotoMutation(photo.id)\n            .then((...data) => {\n              console.log('onDeletePhoto:: photo deleted', data)\n            })\n            .catch(err => {\n              console.log('onDeletePhoto:: Graphql Error', err.stack)\n              console.error(err)\n            }),\n\n          onChange: (series, seriesDelta) => updateSeriesMutation(series, seriesDelta)\n            .catch(err => {\n              console.log('onChange:: Graphql Error', err.stack)\n              console.error(err)\n            }),\n\n          onNewSeries: async (newSeries, newPhoto, newPhotoData) => {\n            console.log('Series.connect:: onNewSeries starting', { newSeries, newPhoto, newPhotoData })\n            await datastore.graphql.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData)\n            return createSeriesMutation(newSeries, newPhoto, newPhotoData.ext)\n              .then(async ({ data }) => {\n                if (data.createSeries.preAuth) {\n                  // Now we can add this photo to the upload queue\n                  const photo = data.createSeries.series.photos[0]\n                  const preAuth = JSON.parse(data.createSeries.preAuth)\n\n                  queueUpload({\n                    id: photo.id,\n                    uploadToken: photo.uploadToken,\n                    seriesId: photo.seriesId,\n                    preAuth,\n                    ext: newPhotoData.ext,\n                    retry: 0\n                  })\n                }\n              })\n              .catch(err => {\n                console.log('onNewSeries:: Graphql Error', err.stack)\n                console.error(err)\n              })\n          },\n          onDelete: () => {\n            onAfterSeriesDelete() // UI Stuff, just bring us back to the feed\n            return deleteSeriesMutation()\n              .catch(err => {\n                console.log('onDelete:: Graphql Error', err.stack)\n                console.error(err)\n              })\n          },\n          onClose: globalActions.onMenuBack,\n          onFindOnMap: onFindOnMap,\n          onWatch: signedIn ? watchSeriesMutation : null,\n          onUnWatch: signedIn ? unWatchSeriesMutation : null\n        }}\n\n      />\n    )\n  }\n  InnerSeries.propTypes = {\n    domain: PropTypes.string,\n    activeSeries: PropTypes.string,\n    initialPhoto: PropTypes.string,\n\n    // From Redux\n    onAfterSeriesDelete: PropTypes.func,\n    queueUpload: PropTypes.func,\n\n    // Data from apollo\n    series: PropTypes.object,\n\n    // Functions From Apollo\n    loading: PropTypes.bool,\n\n    updateSeriesMutation: PropTypes.func,\n    updatePhotoMutation: PropTypes.func,\n    deleteSeriesMutation: PropTypes.func,\n    deletePhotoMutation: PropTypes.func,\n    createSeriesMutation: PropTypes.func,\n    createPhotoMutation: PropTypes.func,\n    watchSeriesMutation: PropTypes.func,\n    unWatchSeriesMutation: PropTypes.func,\n    onFindOnMap: PropTypes.func\n  }\n  return InnerSeries\n}\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetSelectedQuery = graphql(datastore.graphql.queries.getWholeSeries, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    console.log('getWholeSeries:: ', { data })\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.log('getWholeSeries:: error', { data, e })\n      console.error(e)\n    }\n    return {\n      data,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ activeSeries, isNewSeries }) => !activeSeries || isNewSeries,\n  options: ({ activeSeries }) => ({\n    variables: {\n      id: activeSeries\n    }\n  })\n})\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { current: { activeSeries, initialPhoto, domain } } = state.home\n  return { activeSeries, initialPhoto, domain, ...props }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  onAfterSeriesDelete: () => {\n    console.log('onAfterSeriesDelete')\n    dispatch(datastore.redux.actions.setHomeState(STATES.FEED, { activeSeries: null }))\n  },\n  queueUpload: (uploadObj) => {\n    dispatch(datastore.redux.actions.queueUpload(uploadObj))\n  },\n  doneCreatingSeries: (activeSeries) => {\n    console.log('doneCreatingSeries', activeSeries)\n    dispatch(datastore.redux.actions.setHomeState(STATES.SERIES, { activeSeries }))\n  },\n  onFindOnMap: () => {\n    dispatch(datastore.redux.actions.setHomeState(STATES.MAP))\n  }\n})\n\n/**\n * Compose all our queries together. This is a bit of a mess but kind of necessary for now\n */\nexport default compose(\n  // connect first so that we can retrieve our seriesId\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withGetSelectedQuery,\n  datastore.graphql.mutations.createSeries.withMutation,\n  datastore.graphql.mutations.createPhoto.withMutation,\n  datastore.graphql.mutations.updateSeries.withMutation,\n  datastore.graphql.mutations.updatePhoto.withMutation,\n  datastore.graphql.mutations.deleteSeries.withMutation,\n  datastore.graphql.mutations.deletePhoto.withMutation,\n  datastore.graphql.mutations.watch.withMutation,\n  datastore.graphql.mutations.unwatch.withMutation,\n  withSeriesConnect\n)\n","import React, { useEffect, useState, useRef, useMemo } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { connect } from 'react-redux'\nimport { graphql, compose } from 'react-apollo'\n\nimport datastore from '@morphoto/datastore'\nimport { config } from '@morphoto/client-common'\n\nconst POLL_INTERVAL = 20 // (seconds)\n\n/**\n * The outer component handles the lastCheck variable which, when changed will\n * cause the poll event\n */\nconst withHomeMap = Wrapped => {\n  const Inner = ({ activeSeries, viewport, ...props }) => {\n    const [seriesProps, setSeriesProps] = useState()\n    const [queryVersion, setVersion] = useState(0)\n    const timerRef = useRef()\n    const queryVersionRef = useRef()\n    const [lastCheck, setLastCheck] = useState(0)\n    queryVersionRef.current = queryVersion\n\n    // These are expensive queries so we render them memoized to prevent erroneous re-renders\n    const allSeriesQUERY = useMemo(() => <AllSeriesConnect setSeriesProps={setSeriesProps} />, [])\n    const pollSeriesQUERY = useMemo(\n      () => <PollQueryConnect lastCheck={lastCheck} seriesProps={seriesProps} updateIncrement={() => setVersion(queryVersionRef.current + 1)} />,\n      [lastCheck, seriesProps]\n    )\n    // console.log('withPollQuery (PARENT)', { lastCheck, seriesProps })\n    // Initiate the polling process. We simply update the timestamp every N seconds\n    useEffect(() => {\n      if (!seriesProps) return\n      function ping () {\n        if (timerRef.current) setLastCheck(String(Date.now() - POLL_INTERVAL * 1000))\n      }\n      if (!timerRef.current && seriesProps.readyForPolling) timerRef.current = setInterval(ping, POLL_INTERVAL * 1000)\n      return () => {\n        if (timerRef.current) {\n          console.log('clear poll timer')\n          clearInterval(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }, [seriesProps])\n    console.log('withHomeMap', { seriesProps, props, queryVersion })\n\n    return (\n      <React.Fragment>\n        {allSeriesQUERY}\n        {pollSeriesQUERY}\n        <Wrapped\n          {...props}\n          initialActiveSeries={activeSeries}\n          initViewport={viewport}\n          queryVersion={queryVersion}\n          seriesList={seriesProps && seriesProps.allSeries ? seriesProps.allSeries.seriesSummaries : []}\n          loading={!seriesProps || seriesProps.loading}\n        />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n    activeSeries: PropTypes.string, // from redux\n    viewport: PropTypes.object // from redux\n  }\n  return Inner\n}\n\nconst withAllSeries = graphql(datastore.graphql.queries.allSeries, {\n  props: ({ data, ownProps }) => {\n    // console.log('withAllSeries', { data, ownProps })\n    // If there's more data to load we should go get another batch\n    if (!data.loading && !data.error && data.allSeries && data.allSeries.seriesSummaries.length > 0 && data.allSeries.nextToken) {\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.allSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            allSeries: {\n              ...fetchMoreResult.allSeries,\n              seriesSummaries: [ ...prev.allSeries.seriesSummaries, ...fetchMoreResult.allSeries.seriesSummaries ]\n            }\n          }\n        }\n      })\n    }\n    else if (data.loading || data.error) {\n      ownProps.setSeriesProps(data)\n    }\n    else {\n      // console.log('withAllSeries polling done')\n      ownProps.setSeriesProps({ ...data, readyForPolling: true })\n    }\n    return null\n  },\n  options: {\n    variables: { limit: 100 }\n  }\n})\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withPollQuery = graphql(datastore.graphql.queries.pollQuery, {\n  skip: ({ lastCheck, online }) => !lastCheck || !online,\n  props: ({ data, ownProps: { seriesProps, updateIncrement } }) => {\n    if (data.error) {\n      console.log('POLL FAIL', data.error, data)\n      console.error(data.error)\n    }\n    else {\n      // console.log('withPollQuery', { data, seriesProps, updateIncrement })\n    }\n    if (!data.loading && data.changedSeries && data.changedSeries.seriesSummaries) {\n      // console.log('POLLING', { data, seriesProps })\n      const newData = data.changedSeries.seriesSummaries\n      const oldList = seriesProps.allSeries.seriesSummaries\n\n      // If the polling has begun and we have some good polling data back then\n      // Process it and decide if we need to incorporate it\n      if (data.changedSeries) {\n        let newSeriesSummaries = seriesProps.allSeries.seriesSummaries\n        newData.forEach(({ seriesStatus, ...polledSeries }) => {\n          if (seriesStatus === 'deleted') {\n            console.log('Polling found a series to delete: ', polledSeries.id)\n            newSeriesSummaries = oldList.filter(s => s.id !== polledSeries.id)\n          }\n          else {\n            const idx = oldList.findIndex(ds => ds.id === polledSeries.id)\n            if (idx >= 0) {\n              console.log('Polling found a series to Update: ', polledSeries.id)\n              newSeriesSummaries = oldList.map((oldSeries, oldId) => oldId === idx ? polledSeries : oldSeries)\n            }\n            else {\n              console.log('Polling found a series to add: ', polledSeries.id)\n              newSeriesSummaries = [...oldList, polledSeries]\n            }\n          }\n          seriesProps.updateQuery((data, options) => {\n            try {\n              const newData = { ...data }\n              newData.allSeries.seriesSummaries = newSeriesSummaries\n              updateIncrement()\n              return data\n            }\n            catch (e) {\n              console.error(e)\n              return data\n            }\n          })\n        })\n      }\n    }\n    return null\n  },\n  options: ({ lastCheck }) => ({\n    variables: {\n      limit: 100,\n      lastCheck\n    }\n  })\n})\n\n// We're using graphql() HOC because it's convenient but it doesn't need to render anything\nconst AllSeriesConnect = withAllSeries(() => null)\nconst PollQueryConnect = withPollQuery(() => null)\n\n// The only part of the state the main view caes about is teh window\nconst mapStateToProps = (state, props) => {\n  const { current: { activeSeries } } = state.home\n  const viewport = state.map.slice(-1).pop()\n  return { activeSeries, viewport, ...props }\n}\n\nconst STATES = config.home.AppStateTypes\n\n// There are a few presentational actions the main window can use\nconst mapDispatchToProps = dispatch => ({\n  actions: {\n    onSeriesNavigate: (activeSeries) => {\n      dispatch(datastore.redux.actions.setHomeState(STATES.SERIES, { activeSeries }))\n    },\n    onSeriesMapSelect: (activeSeries) => {\n      dispatch(datastore.redux.actions.setActiveSeries(activeSeries))\n    },\n    onSearchClick: () => {\n      dispatch(datastore.redux.actions.setHomeState(STATES.SEARCH, { search: { tab: config.home.SEARCH_TABS.LOCATION, text: '' } }))\n    },\n    popMapHistory: () => {\n      dispatch(datastore.redux.actions.popMapHistory())\n    },\n    pushMapHistory: (viewportSave) => {\n      dispatch(datastore.redux.actions.pushMapHistory(viewportSave))\n    },\n    clearMapHistory: () => {\n      dispatch(datastore.redux.actions.clearMapHistory())\n    }\n  }\n})\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withHomeMap\n)\n","import React, { useState, useMemo, useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport ReactGA from 'react-ga'\n\nimport { connect } from 'react-redux'\n\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\n\nimport { dates } from '@morphoto/common'\n\nconst TABS = config.home.SEARCH_TABS\n\nconst withSearchConnect = Wrapped => {\n  const Inner = ({ defaultTab, defaultText, fetchMore }) => {\n    console.log('withSearchConnect', { Wrapped, defaultTab, defaultText, fetchMore })\n    const [currentTab, setCurrentTab] = useState(defaultTab || TABS.TAG)\n    const { globalActions } = useContext(AppContext)\n    // We separate these because one of them needs to be immediate and the\n    const [searchText, setSearchText] = useState(defaultText || '')\n    const [contextChoice, setContextChoice] = useState(null)\n\n    useEffect(() => {\n      ReactGA.pageview('search')\n    }, [])\n\n    useEffect(() => {\n      if (contextChoice || searchText.length > 3) {\n        ReactGA.event({\n          category: `Search:${currentTab}`,\n          action: contextChoice ? 'Search Context Select' : 'Search Text Change',\n          label: contextChoice ? contextChoice.name : searchText\n        })\n      }\n    }, [searchText, currentTab, contextChoice])\n\n    const handleTabChange = (newTab) => {\n      setContextChoice(null)\n      setCurrentTab(newTab)\n    }\n    const handleContextChoiceChange = (newContextChoice) => {\n      setContextChoice(newContextChoice)\n    }\n    const handleSearchTextChange = (text) => {\n      setSearchText(text)\n      setContextChoice(null)\n    }\n\n    let withContextQuery = null\n    let withSearchQuery = null\n\n    switch (currentTab) {\n      case TABS.KEYWORD:\n        withContextQuery = (Wrapped) => Wrapped\n        withSearchQuery = withKeywordSearch\n        break\n      case TABS.TAG:\n        withContextQuery = withTagSearch\n        withSearchQuery = withTagSeries\n        break\n      case TABS.LOCATION:\n        withContextQuery = withGeoCode\n        // withSearchQuery = withGeoSearch\n        break\n      case TABS.USER:\n        withContextQuery = withUserSearch\n        withSearchQuery = withUserSeries\n        break\n      default:\n        break\n    }\n\n    const ComposedSearch = useMemo(() => withSearchQuery\n      ? compose(\n        withContextQuery,\n        withSearchQuery\n      )(Wrapped)\n      : withContextQuery(Wrapped), [withContextQuery, withSearchQuery])\n\n    return <ComposedSearch {...{ currentTab, searchText, contextChoice }}\n      actions={{\n        onMapClick: globalActions.jumpToMap,\n        onResultClick: globalActions.jumpToSeriesView,\n        setContextChoice: handleContextChoiceChange,\n        fetchMore: fetchMore,\n        setCurrentTab: handleTabChange,\n        setSearchText: handleSearchTextChange\n      }}\n    />\n  }\n  Inner.propTypes = {\n    searchResults: PropTypes.array,\n    contextResults: PropTypes.array,\n    defaultTab: PropTypes.any,\n    defaultText: PropTypes.string,\n    loading: PropTypes.bool,\n    fetchMore: PropTypes.func\n  }\n  return Inner\n}\n/*****************************************************************\n *  PART 1: SEARCH QUERIES\n *****************************************************************/\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withTagSearch = graphql(datastore.graphql.queries.tagSearch, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withTagSearch', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n    const contextResults = data.tags ? data.tags.map(({ name, count }) => ({\n      name,\n      description: `~ ${count < 10 ? count : Math.ceil(count / 10) * 10} Photo series tagged`\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  // skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      tag: !searchText || searchText.length < 3 ? '' : searchText,\n      limit: 10\n    }\n  })\n})\n\nconst withUserSearch = graphql(datastore.graphql.queries.userSearch, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withUserSearch', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    const contextResults = data.userSearch ? data.userSearch.map(({ username, gravatar, createdOn, id }) => ({\n      name: username,\n      id,\n      description: `Joined ${dates.formatDatAgo(createdOn)}`,\n      gravatar\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      searchStr: searchText,\n      limit: 10\n    }\n  })\n})\n\nconst withGeoCode = graphql(datastore.graphql.queries.geocode, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withGeoCode', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    const contextResults = data.geocoder ? data.geocoder.map(({ relevance, text, placeName, bbox, center }) => ({\n      name: text,\n      description: placeName,\n      bbox,\n      center,\n      relevance\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      search: searchText\n      // limit: 10\n    }\n  })\n})\n\n/*****************************************************************\n * PART 2: SERIES SEARCH QUERIES\n *****************************************************************/\n\nconst withTagSeries = graphql(datastore.graphql.queries.seriesWithTag, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withTagSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.tagSeries || !data.tagSeries.nextToken ? null : () => {\n      console.log('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.tagSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            tagSeries: {\n              ...fetchMoreResult.tagSeries,\n              seriesSummaries: [ ...prev.tagSeries.seriesSummaries, ...fetchMoreResult.tagSeries.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.tagSeries && data.tagSeries.seriesSummaries\n      ? data.tagSeries.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ contextChoice }) => !contextChoice,\n  options: ({ contextChoice }) => ({\n    variables: {\n      tag: contextChoice.name,\n      limit: 10\n    }\n  })\n})\n\nconst withUserSeries = graphql(datastore.graphql.queries.userSeries, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withUserSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.userSeries || !data.userSeries.nextToken ? null : () => {\n      console.log('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.userSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            userSeries: {\n              ...fetchMoreResult.userSeries,\n              seriesSummaries: [ ...prev.userSeries.seriesSummaries, ...fetchMoreResult.userSeries.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.userSeries && data.userSeries.seriesSummaries\n      ? data.userSeries.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ contextChoice }) => !contextChoice,\n  options: ({ contextChoice }) => ({\n    variables: {\n      createdBy: contextChoice.id,\n      limit: 10\n    }\n  })\n})\n\nconst withKeywordSearch = graphql(datastore.graphql.queries.keywordSearch, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withUserSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.keywordSearch || !data.keywordSearch.nextToken ? null : () => {\n      console.log('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.keywordSearch.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            keywordSearch: {\n              ...fetchMoreResult.keywordSearch,\n              seriesSummaries: [ ...prev.keywordSearch.seriesSummaries, ...fetchMoreResult.keywordSearch.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.keywordSearch && data.keywordSearch.seriesSummaries\n      ? data.keywordSearch.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      searchStr: searchText,\n      limit: 10\n    }\n  })\n})\n\n// const withGeoSearch = graphql(geoSeries, {\n//   props: ({ data }) => {\n//     if (data.error) console.error(data.error)\n//     // console.log('HERE', data)\n//     let series = null\n//     try {\n//       if (!data.loading && !data.error) series = data.series\n//     }\n//     catch (e) {\n//       console.error(data)\n//       console.error(e)\n//     }\n//     return {\n//       data,\n//       loading: data.loading,\n//       series\n//     }\n//   },\n//   skip: ({ contextChoice }) => !contextChoice,\n//   options: ({ contextChoice }) => ({\n//     variables: {\n//       bounds: contextChoice.bbox\n//       // limit: 10\n//       // nextToken\n//     }\n//   })\n// })\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { current: { search, activeSeries, domain } } = state.home\n  return {\n    defaultTab: search ? search.tab : null,\n    defaultText: search ? search.text : null,\n    activeSeries,\n    domain\n  }\n}\n\nexport default compose(\n  connect(\n    mapStateToProps\n  ),\n  withSearchConnect\n)\n","import React, { useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport ReactGA from 'react-ga'\n\nimport { graphql, compose } from 'react-apollo'\n// import { print } from 'graphql/language/printer'\n\nimport { AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\n\nconst withProfileConnect = Wrapped => {\n  const Inner = ({ data }) => {\n    const { seriesQ, watchedSeriesQ } = data\n    const { currentUser, globalActions } = useContext(AppContext)\n\n    const mySeries = seriesQ && seriesQ.userSeries && seriesQ.userSeries.seriesSummaries\n      ? seriesQ.userSeries.seriesSummaries.filter(s => s.seriesStatus !== 'deleted') || []\n      : []\n    const watchingSeries = watchedSeriesQ && watchedSeriesQ.arraySeries ? watchedSeriesQ.arraySeries : []\n    // console.log('ProfileConnect', { mySeries, watchedSeriesQ, watchingSeries })\n\n    const loading = Boolean(\n      (seriesQ && seriesQ.loading) ||\n    (watchedSeriesQ && watchedSeriesQ.loading)\n    )\n\n    useEffect(() => {\n      ReactGA.pageview('profile')\n    }, [])\n\n    return <Wrapped user={currentUser} {...{\n      loading,\n      mySeries,\n      watchingSeries,\n      actions: {\n        jumpToSeries: globalActions.jumpToSeriesView,\n        jumpToMap: globalActions.jumpToSeriesMap\n      }\n    }} />\n  }\n\n  Inner.propTypes = {\n    data: PropTypes.object, // from graphql\n    jumpToSeries: PropTypes.func, // from redux\n    jumpToMap: PropTypes.func // from redux\n  }\n  return Inner\n}\n\nconst withuserSeriesQuery = graphql(datastore.graphql.queries.userSeries, {\n  props: ({ data, ownProps }) => {\n    // print(datastore.graphql.queries.userSeries)\n    console.log('ProfileConnect withuserSeriesQuery', { data, ownProps })\n    return { data: { ...ownProps.data, seriesQ: data } }\n  }\n})\n\nconst withMyWatchedSeriesQuery = graphql(datastore.graphql.queries.seriesFromList, {\n  props: ({ data, ownProps }) => {\n    console.log('ProfileConnect withMyWatchedSeriesQuery', datastore.graphql.queries.seriesFromList, { data, ownProps })\n    return { data: { ...ownProps.data, watchedSeriesQ: data } }\n  },\n  skip: ({ data, user }) => {\n    try {\n      return user.watching.length < 1\n    }\n    catch (e) {\n      return true\n    }\n  },\n  options: ({ data, user }) => {\n    return {\n      variables: { seriesList: user.watching }\n    }\n  }\n})\n\nexport default compose(\n  withuserSeriesQuery,\n  // withMyPhotosQuery,\n  withMyWatchedSeriesQuery,\n  withProfileConnect\n)\n","import React, { useRef, useState, useEffect, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport { AppContext } from '@morphoto/client-common'\nimport ReactGA from 'react-ga'\n\nimport datastore from '@morphoto/datastore'\n\nconst POLL_INTERVAL = 20 // (seconds)\nconst FEED_LIMIT = 5 // (items to load)\n\nconst withFeedConnect = Wrapped => {\n  const Component = ({ data, loading, loadingNewest, loadingMore, gqlActions }) => {\n    const timerRef = useRef()\n    const lastCheckRef = useRef()\n    const [lastCheck, setLastCheck] = useState(null)\n    const { online, globalActions } = useContext(AppContext)\n    lastCheckRef.current = lastCheck\n\n    // Initiate the polling process. We simply update the timestamp every N seconds\n    useEffect(() => {\n      function ping () {\n        if (timerRef.current) {\n          console.log('FeedConnect timerRef.current', timerRef.current, POLL_INTERVAL)\n          if (online.isOnline) gqlActions.fetchNewest()\n          setLastCheck(String(Date.now() - POLL_INTERVAL * 1000))\n        }\n      }\n      if (!timerRef.current) timerRef.current = setInterval(ping, POLL_INTERVAL * 1000)\n      return () => {\n        if (timerRef.current) {\n          console.log('FeedConnect clear poll timer')\n          clearInterval(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }, [gqlActions, online.isOnline])\n\n    useEffect(() => {\n      ReactGA.pageview('feed')\n    }, [])\n\n    const events = data.myFeed ? data.myFeed.feed.filter(s => s.seriesStatus !== 'deleted') || [] : []\n    const window = data.myFeed ? data.myFeed.window.map(v => parseInt(v, 10)) || [null, null] : [null, null]\n\n    return (\n      <Wrapped {...{ events, loading, window }}\n        actions={{\n          onImageClick: globalActions.jumpToSeriesView,\n          onProfileClick: globalActions.jumpToUser,\n          onMapClick: globalActions.jumpToSeriesMap,\n          fetchMore: gqlActions.fetchMore,\n          fetchNewest: gqlActions.fetchNewest\n        }}\n      />\n    )\n  }\n  Component.propTypes = {\n    data: PropTypes.object, // from graphql\n    loading: PropTypes.bool, // from graphql\n    loadingNewest: PropTypes.bool, // from graphql\n    loadingMore: PropTypes.bool, // from graphql\n    gqlActions: PropTypes.shape({\n      fetchMore: PropTypes.func,\n      fetchNewest: PropTypes.func\n    })\n  }\n  return Component\n}\nconst withFeedQuery = graphql(datastore.graphql.queries.getMyFeed, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n\n    // TODO: Not sure this will propagate correctly. Test it.\n    let loadingNewest = false\n    let loadingMore = false\n\n    // console.log('withFeedQuery', data)\n\n    // One Thunk function designed for getting everything since the last check\n    const fetchNewest = () => {\n      loadingNewest = true\n      console.log('fetchNewest', data)\n      if (data.myFeed && !data.loading) {\n        console.log('DEBUG fetchNewest1', { ...data.variables, start: data.myFeed.window[1] })\n        data.fetchMore({\n          variables: { ...data.variables, start: data.myFeed.window[1] },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            console.log('DEBUG fetchNewest2', { prev, fetchMoreResult })\n            loadingNewest = false\n            return {\n              myFeed: {\n                ...fetchMoreResult.myFeed,\n                // put the newest stuff first\n                feed: [ ...fetchMoreResult.myFeed.feed, ...prev.myFeed.feed ],\n                window: [prev.myFeed.window[0], fetchMoreResult.myFeed.window[1]]\n              }\n            }\n          }\n        })\n      }\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = () => {\n      loadingMore = true\n      console.log('fetchMore', data)\n      if (data.myFeed) {\n        data.fetchMore({\n          variables: { ...data.variables, end: data.myFeed.window[0] },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            loadingMore = false\n            return {\n              myFeed: {\n                ...fetchMoreResult.myFeed,\n                feed: [ ...prev.myFeed.feed, ...fetchMoreResult.myFeed.feed ],\n                window: [fetchMoreResult.myFeed.window[0], prev.myFeed.window[1]]\n              }\n            }\n          }\n        })\n      }\n    }\n\n    return {\n      data,\n      loading: data.loading,\n      loadingMore,\n      loadingNewest,\n      gqlActions: {\n        fetchNewest, // This is the poll we do every n seconds\n        fetchMore // This is when we scroll to the bottom of the list\n      }\n    }\n  },\n  // skip: ({ activeSeries, isNewSeries }) => !activeSeries || isNewSeries,\n  options: ({ activeSeries }) => ({\n    variables: {\n      limit: FEED_LIMIT\n    }\n  })\n})\n\nexport default compose(\n  withFeedQuery,\n  withFeedConnect\n)\n","import React, { useState, useContext, useMemo, useRef, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Bottleneck from 'bottleneck'\nimport { graphql, compose } from 'react-apollo'\n\nimport { long2tile, lat2tile } from 'geotilehash'\n\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\nimport { OFFLINE_STATES } from '@morphoto/maps'\n\nconst withOfflineData = Wrapped => {\n  const Inner = ({\n    lastMapViewport, completedDownload, viewport, setOfflineCompleted, setOfflineViewport\n  }) => {\n    const [toolState, setToolState] = useState(viewport && completedDownload ? OFFLINE_STATES.LOCKED : OFFLINE_STATES.NAVIGATING)\n    const limiterRef = useRef()\n    const { online, globalActions } = useContext(AppContext)\n\n    // Setting the bounds is what kicks off the whole process\n    const [bounds, setBounds] = useState(null)\n    // Series ids only get set when the geoQuery finishes\n    const [seriesIds, setSeriesIds] = useState(null)\n    // This is the current Series object we are putting through the query\n    const [activeSeriesId, setActiveSeriesId] = useState(null)\n    const [seriesPhotos, setSeriesPhotos] = useState([])\n\n    const [tileTick, setTileTick] = useState([0, 0])\n    const [seriesTick, setSeriesTick] = useState([0, 0])\n    const [seriesPhotoTick, setSeriesPhotoTick] = useState([0, 0])\n\n    // We're dealing in asynchronous so we need a ref to make sure we're usign the current values\n    const tileTickRef = useRef()\n    tileTickRef.current = { tileTick, seriesTick, seriesPhotoTick, seriesIds, seriesPhotos }\n\n    const onTileTick = () => setTileTick([tileTickRef.current.tileTick[0] + 1, tileTickRef.current.tileTick[1]])\n    const onTileAdd = (num) => setTileTick([tileTickRef.current.tileTick[0], tileTickRef.current.tileTick[1] + num])\n    const onSeriesPhotoTick = () => {\n      setSeriesPhotoTick([tileTickRef.current.seriesPhotoTick[0] + 1, tileTickRef.current.seriesPhotoTick[1]])\n    }\n    const onSeriesPhotoAdd = (num) => setSeriesPhotoTick([tileTickRef.current.seriesPhotoTick[0], tileTickRef.current.seriesPhotoTick[1] + num])\n\n    const onSeriesTick = useCallback((urls) => {\n      const theTick = tileTickRef.current.seriesTick\n      const theIds = tileTickRef.current.seriesIds.ids\n      const thePhotos = tileTickRef.current.seriesPhotos\n      if (urls) {\n        let addCount = 0\n        urls.forEach(url => {\n          if (thePhotos.indexOf(url) === -1) {\n            addCount++\n            setSeriesPhotos([...thePhotos, url])\n            limiterRef.current.schedule(() => makeRequest('GET', url))\n              .then(onSeriesPhotoTick)\n            // Maybe we should do something different on errors (but what?)\n              .catch(onSeriesPhotoTick)\n          }\n        })\n        onSeriesPhotoAdd(addCount)\n      }\n      // now kick off the next series\n      if (theTick && theIds[theTick[0]]) {\n        setActiveSeriesId(theIds[theTick[0] + 1])\n        setSeriesTick([theTick[0] + 1, theTick[1]])\n      }\n      else {\n      // We are done the series\n      }\n    }, [])\n\n    const finalState = useMemo(() => online.isOnline ? toolState : OFFLINE_STATES.OFFLINE, [online.isOnline, toolState])\n\n    const geoSeriesQuery = useMemo(() => <GeoQuery bounds={bounds} setSeriesIds={setSeriesIds} />, [bounds])\n    const wholeSeriesQuery = useMemo(() => <WholeSeriesConnect id={activeSeriesId} onDone={onSeriesTick} />, [activeSeriesId, onSeriesTick])\n\n    const onStart = (bounds, viewport) => {\n      setToolState(OFFLINE_STATES.DOWNLOADING)\n      setBounds(bounds)\n      setOfflineViewport(viewport)\n    }\n\n    const onDone = useCallback(() => {\n      setToolState(OFFLINE_STATES.LOCKED)\n      setOfflineCompleted(true)\n    }, [setOfflineCompleted])\n\n    const onCancel = () => {\n      setToolState(OFFLINE_STATES.CANCELED)\n      setBounds(null)\n      setSeriesIds(null)\n      setTileTick([0, 0])\n      setSeriesTick([0, 0])\n      setSeriesPhotoTick([0, 0])\n      setSeriesPhotos([])\n      limiterRef.current.stop({ dropWaitingJobs: true })\n      limiterRef.current = null\n      limiterRef.current = new Bottleneck({ maxConcurrent: 5 })\n    }\n\n    // Initialize the bottleNeck\n    useEffect(() => {\n      limiterRef.current = new Bottleneck({ maxConcurrent: 5 })\n    }, [])\n\n    // This is a little taxing so we keep it async\n    useEffect(() => {\n      if (bounds) {\n        const tiles = getTiles(bounds, [0, config.home.Offline.highestOfflineTileZoom])\n        const length = tiles.length\n        if (length === 0) return\n        onTileAdd(length)\n        tiles.forEach(tile => {\n          limiterRef.current.schedule(() => makeRequest('GET', tile))\n            .then(onTileTick)\n          // Maybe we should do something different on errors (but what?)\n            .catch(onTileTick)\n        })\n      }\n    }, [bounds])\n\n    // If we see series then kick off that cascade\n    useEffect(() => {\n    // console.log('OfflineMap:: kicking off the series loading', { seriesTick, seriesIds })\n      if (seriesIds && seriesIds.ids) {\n      // Kick off the series loading\n        if (seriesIds.ids.length > 0) setActiveSeriesId(seriesIds.ids[0])\n        setSeriesTick([0, seriesIds.ids.length])\n        setSeriesPhotoTick([0, 0])\n      }\n    }, [seriesIds])\n\n    useEffect(() => {\n      const newTotal = [tileTick[0] + seriesTick[0] + seriesPhotoTick[0], tileTick[1] + seriesTick[1] + seriesPhotoTick[1]]\n      if (newTotal[1] > 0 && newTotal[0] === newTotal[1]) onDone()\n    }, [tileTick, seriesTick, seriesPhotoTick, onDone])\n\n    return (\n      <React.Fragment>\n        {wholeSeriesQuery}\n        {geoSeriesQuery}\n        <Wrapped\n          initViewport={viewport || lastMapViewport}\n          progress={{ tileTick, seriesTick, seriesPhotoTick }}\n          toolState={finalState}\n          actions={{\n            onMenuBack: () => {\n              onCancel()\n              globalActions.onMenuBack()\n            },\n            onStartDownload: onStart,\n            onCancel: onCancel,\n            onCancelComplete: () => {\n              setToolState(OFFLINE_STATES.NAVIGATING)\n            },\n            onUnlock: () => {\n              setToolState(OFFLINE_STATES.NAVIGATING)\n              setOfflineCompleted(false)\n            }\n          }}\n        />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n  // All from redux\n    lastMapViewport: PropTypes.object,\n    completedDownload: PropTypes.bool,\n    viewport: PropTypes.object,\n    setOfflineCompleted: PropTypes.func.isRequired,\n    setOfflineViewport: PropTypes.func.isRequired\n  }\n  return Inner\n}\n\nconst withGeoSearch = graphql(datastore.graphql.queries.geoSeriesIdOnly, {\n  props: ({ data, ownProps }) => {\n    if (data.error) console.error(data.error)\n    console.log('OfflineMap::withGeoSearch:: ', { data, ownProps })\n    try {\n      // Fetch until we have everything\n      if (!data.loading && !data.error && data.seriesInGeoBounds && data.seriesInGeoBounds.seriesSummaries.length > 0 && data.seriesInGeoBounds.nextToken) {\n        ownProps.setSeriesIds({ ids: [], loading: true })\n        // console.log('OfflineMap::withGeoSearch::fetchMore', { ...data.variables, nextToken: data.seriesInGeoBounds.nextToken })\n        data.fetchMore({\n          variables: { ...data.variables, nextToken: data.seriesInGeoBounds.nextToken },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            // console.log('OfflineMap::withGeoSearch::updateQuery', { prev, fetchMoreResult })\n            return {\n              seriesInGeoBounds: {\n                ...fetchMoreResult.seriesInGeoBounds,\n                seriesSummaries: [ ...prev.seriesInGeoBounds.seriesSummaries, ...fetchMoreResult.seriesInGeoBounds.seriesSummaries ]\n              }\n            }\n          }\n        })\n      }\n      else if (data.loading || data.error) {\n        // console.log('OfflineMap::withGeoSearch::loading or errir')\n        ownProps.setSeriesIds({ ids: [], loading: true })\n      }\n      else {\n        console.log('OfflineMap::withGeoSearch::DONE')\n        if (data && data.seriesInGeoBounds) {\n          ownProps.setSeriesIds({ ids: data.seriesInGeoBounds.seriesSummaries.map(s => s.id), loading: false })\n        }\n      }\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n    return {\n      data,\n      loading: data.loading\n    }\n  },\n  skip: ({ bounds }) => !bounds,\n  options: ({ bounds }) => ({\n    variables: {\n      bounds,\n      limit: 100\n      // nextToken\n    }\n  })\n})\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetSelectedQuery = graphql(datastore.graphql.queries.getWholeSeries, {\n  skip: ({ id }) => !id,\n  props: ({ data, ownProps }) => {\n    if (data.error) console.error(data.error)\n    // console.log('OfflineMap::withGetSelectedQuery:: ', { data })\n    let series = null\n    try {\n      if (!data.loading && !data.error) {\n        series = data.series\n        // console.log('OfflineMap::withGetSelectedQuery::series', series)\n        const urls = []\n        urls.push(series.createdUser.gravatar)\n        urls.push(series.updatedUser.gravatar)\n        series.photos.forEach(ph => {\n          urls.push(ph.createdUser.gravatar)\n          urls.push(ph.updatedUser.gravatar)\n          // Skip medium for size sake\n          config.home.Offline.seriesImgsToCache\n            .map(size => urls.push(`${ph.paths.base}${ph.paths[size]}`))\n        })\n        // Remove duplicates and send it back\n        ownProps.onDone([...new Set(urls)])\n      }\n    }\n    catch (e) {\n      console.log('OfflineMap::withGetSelectedQuery:: error', { data, e })\n      console.error(e)\n    }\n    return {\n      data,\n      loading: data.loading,\n      series\n    }\n  },\n  options: ({ id }) => ({\n    variables: {\n      id\n    }\n  })\n})\n// We're using graphql() HOC because it's convenient but it doesn't need to render anything\nconst WholeSeriesConnect = withGetSelectedQuery(() => null)\nconst GeoQuery = withGeoSearch(() => null)\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const lastMapViewport = state.map.slice(-1).pop()\n  const { completedDownload, viewport } = state.offline\n  return { lastMapViewport, completedDownload, viewport }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setOfflineCompleted: (bVal) => {\n    dispatch(datastore.redux.actions.setOfflineCompleted(bVal))\n  },\n  setOfflineViewport: (viewport) => {\n    dispatch(datastore.redux.actions.setOfflineViewport(viewport))\n  }\n})\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withOfflineData\n)\n\n/**\n * Promisify our XMLHttpRequests\n * @param {*} method\n * @param {*} url\n */\nfunction makeRequest (method, url) {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest()\n    xhr.open(method, url)\n    xhr.onload = () => {\n      if (xhr.status >= 200 && xhr.status < 300) resolve(xhr.response)\n      else reject(new Error(xhr.statusText))\n    }\n    xhr.onerror = () => {\n      reject(new Error(xhr.statusText))\n    }\n    xhr.send()\n  })\n}\n\nexport const getTileURL = (url, zoom, x, y) => {\n  const newUrl = url + `?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`\n  return newUrl.replace('{z}/{x}/{y}', `${zoom}/${x}/${y}`)\n}\n\n/**\n * Loop over all the tiles and zoom levels and build\n * us an array of URLs\n * @param {*} bounds\n * @param {*} right\n */\nexport function getTiles (bounds, zoomRange) {\n  const tiles = []\n\n  for (let zoom = zoomRange[0]; zoom <= zoomRange[1]; zoom++) {\n    const xtileLeft = long2tile(bounds[0], zoom)\n    const xtileRight = long2tile(bounds[2], zoom)\n\n    const ytileTop = lat2tile(bounds[1], zoom)\n    const ytileBottom = lat2tile(bounds[3], zoom)\n\n    for (let x = xtileLeft; x <= xtileRight; x++) {\n      for (let y = ytileTop; y <= ytileBottom; y++) {\n        // Push both tiles\n        tiles.push(getTileURL(process.env.REACT_APP_TILEURL_SAT, zoom, x, y))\n        tiles.push(getTileURL(process.env.REACT_APP_TILEURL_TOPO, zoom, x, y))\n      }\n    }\n  }\n  return tiles\n  // console.log('Starting Coords', { tiles, top, left, bottom, right })\n}\n","export default require('./MyFeed').default;\nexport { default as FeedItem } from './FeedItem';\nexport { default as FeedEnder } from './FeedEnder';","export default require('./MyProfile').default;","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Home from '@morphoto/home'\n\nimport withUploadConnect from './connectors/withUploadConnect'\nimport withSeriesConnect from './connectors/withSeriesConnect'\nimport withHomeMap from './connectors/withHomeMap'\nimport withSearchConnect from './connectors/withSearchConnect'\nimport withProfileConnect from './connectors/withProfileConnect'\nimport withFeedConnect from './connectors/withFeedConnect'\nimport withOfflineData from './connectors/withOfflineData'\n\nimport MyFeed from '@morphoto/feed'\nimport { UploadControl } from '@morphoto/ui'\nimport Search from '@morphoto/search'\nimport MyProfile from '@morphoto/profile'\nimport { HomeMap, OfflineMap } from '@morphoto/maps'\nimport PhotoSeries from '@morphoto/photoseries'\n\nimport {} from '@morphoto/pwainstall'\n// import { withFederated } from 'aws-amplify-react'\n\n/**\n * This is the over-arching wrapper for the app. It combines all the\n * same place. Time will tell if that's a good strategy.\n */\nconst App = ({ installPrompt, ...props }) => {\n  // We pass in the components separately so that it's easier to mock them up\n  // without data connectors in cosmos\n  const components = {\n    upload: withUploadConnect(UploadControl),\n    series: withSeriesConnect(PhotoSeries),\n    map: withHomeMap(HomeMap),\n    search: withSearchConnect(Search),\n    profile: withProfileConnect(MyProfile),\n    feed: withFeedConnect(MyFeed),\n    offline: withOfflineData(OfflineMap),\n    pwaInstall: props.installPrompt\n  }\n\n  return (\n    <Home {...props} components={components} />\n  )\n}\n\nApp.propTypes = {\n  installPrompt: PropTypes.any\n}\n\nexport default App\n","import React, { useEffect, useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport { point, bbox as bboxFunc, buffer } from '@turf/turf'\nimport { Query, ApolloProvider, compose } from 'react-apollo'\nimport { connect } from 'react-redux'\n\n// import Analytics from '@aws-amplify/analytics'\nimport ReactGA from 'react-ga'\n\nimport datastore from '@morphoto/datastore'\nimport { useAuthentication, LoadingWrapped as Loading } from '@morphoto/client-auth'\nimport { useShowAddToHome } from '@morphoto/pwainstall'\nimport { AppContextProvider, decodeShareUrl, ErrorBoundary, config } from '@morphoto/client-common'\n\nimport ErrorConnect from './Error.connect'\nimport { IntlWrapper } from '../translations'\nimport App from '../App'\n\nconst { home: homeConfig, tagColors } = config\n\n// Analytics.configure(config.aws)\n// Analytics.record('some-event-name')\n\n// Set up our google analytics\nconst gac = {}\nif (process.env.NODE_ENV !== 'production') {\n  gac.debug = false\n  gac.gaOptions = {\n    cookieDomain: 'none',\n    siteSpeedSampleRate: 100\n  }\n}\n// console.log('ReactGA.initialize', gac)\nReactGA.initialize(config.analytics.token, gac)\n\n/**\n * HOC for AppContext and ApolloProvider\n */\nexport const withApolloAuthProvider = Wrapped => {\n  const AuthProvider = ({ reduxProps, reduxActions, ...props }) => {\n    const flags = reduxProps.flags\n    // console.log('withApolloAuthProvider', props)\n    const { isGod, signedIn, authData, signOut, authScreen, forceSignIn } = useAuthentication(flags.useLoggedOut, reduxActions.setUseOffline)\n    const { client: apolloClient, done: apolloDone, currState: apolloState } = datastore.graphql.useGraphQL()\n\n    // This triggers all the PWA Goodness\n    const { installPrompt, addToHomeScreen } = useShowAddToHome(flags.install, reduxActions.dismissInstall)\n\n    // A little tracking goodness\n    useEffect(() => {\n      ReactGA.pageview('initial render')\n    }, [])\n\n    // If the user hasn't decided to be anonymous or sign in yet show them the login screen\n    // console.log('Rendering AppConnect', { flags, responsive, props, signedIn, isGod, authData })\n    useEffect(() => {\n      if (signedIn === true && flags.useLoggedOut) reduxActions.setUseOffline(false)\n      else if (signedIn === false && !flags.useLoggedOut) reduxActions.setUseOffline(true)\n    }, [flags.useLoggedOut, reduxActions, signedIn])\n\n    const retryRef = useRef()\n\n    // We need to hijack the browser's history object so that hitting the back button on android\n    // doesn't close the window\n    useEffect(() => {\n      function handleBackClick () {\n        window.history.pushState({}, '')\n        reduxActions.onMenuBack()\n      }\n      window.addEventListener('popstate', handleBackClick)\n      return () => window.removeEventListener('popstate', handleBackClick)\n    }, [reduxActions])\n\n    // One time only query param parse so we can redirect them to a shared url if necessary\n    useEffect(() => {\n      try {\n        const decodedObj = decodeShareUrl(window.location.search)\n        if (decodedObj && decodedObj.type && decodedObj.s) {\n          const { type, s, p } = decodedObj\n          console.log('REDIRECTING', { type, s, p })\n          ReactGA.event({\n            category: 'user',\n            action: 'share',\n            label: window.location.search\n          })\n          switch (type) {\n            case 'series':\n              const queryVars = { activeSeries: s, initialPhoto: p }\n              if (!signedIn) reduxActions.setUseOffline(true)\n              reduxActions.setHomeState(homeConfig.AppStateTypes.SERIES, queryVars)\n              break\n            default:\n              break\n          }\n        // TODO : I think this breaks the maifest file\n        // window.history.replaceState({}, 'MorPhoto', '/')\n        }\n      }\n      catch (e) {\n        console.log('HERE IS AN ERROR', e)\n        console.error(e)\n      }\n\n      //  clean up our retry ref\n      if (retryRef.current) {\n        clearTimeout(retryRef.current)\n        retryRef.current = null\n      }\n    }, [props, reduxActions, signedIn])\n\n    if (!apolloDone) return <Loading message={datastore.graphql.APOLLOSTATES[apolloState]} />\n\n    if (signedIn === null && !flags.useLoggedOut) {\n      ReactGA.event({\n        category: 'User',\n        action: 'LOGIN_PROMPT'\n      })\n      return authScreen\n    }\n\n    const getPhotoUrls = async (photo, sizePriority) => {\n    // console.log('getPhotoUrls::', { photo, size })\n      try {\n        if (photo.uploadToken) {\n          const dbKeys = await datastore.graphql.offline.imgStore.keys()\n          if (dbKeys.indexOf(photo.uploadToken) > -1) {\n            const data = await datastore.graphql.offline.imgStore.getItem(photo.uploadToken)\n            // console.log('getPhotoUrls:: Found DB Entry. using dataUrl', data)\n            return [data.dataUrl]\n          }\n        }\n        return sizePriority.map(sp => `${photo.paths.base}${photo.paths[sp]}`)\n      }\n      catch (e) {\n        return null\n      }\n    }\n\n    // Series config is the object that series needs to know how to process things outside itself (like lookup urls etc.)\n    const getTags = (series) => {\n      const tags = {}\n      if (series && series.photos) {\n        series.photos.forEach(ph => {\n          ph.tags.forEach(tag => {\n            tags[tag.label] = tag\n          })\n        })\n      }\n      return Object.keys(tags)\n    }\n\n    // These are the things the rest of the app needs to find:\n    const appContext = {\n      getPhotoUrls,\n      signedIn: Boolean(signedIn),\n      role: !signedIn\n        ? 'nonuser'\n        : isGod\n          ? 'admin'\n          : 'user',\n      cognitoUser: authData, // TODO: Need this supported by a graphql query\n      globalActions: {\n        ...reduxActions,\n        addToHomeScreen,\n        signOut,\n        forceSignIn: () => {\n          // Analytics.record('FORCE_SIGNIN')\n          ReactGA.event({\n            category: 'User',\n            action: 'FORCE_SIGNIN'\n          })\n          reduxActions.setUseOffline(false)\n          forceSignIn()\n        },\n        resetApp: () => {\n          // Analytics.record('RESET_APP')\n          console.log('APP RESET STARTING')\n          ReactGA.event({\n            category: 'User',\n            action: 'RESET_APP'\n          })\n          datastore.graphql.offline.imgStore.clear()\n          apolloClient.resetStore()\n          datastore.graphql.offline.stateStore.clear()\n          reduxActions.resetAllState()\n          signOut()\n          console.log('APP RESET FINISHED')\n        }\n      },\n      metaConfig: {},\n      tagConfig: [\n        {\n          id: 'freeBothType',\n          label: '',\n          color: tagColors[0],\n          allowXY: true,\n          allowNonXY: true,\n          allowAdditions: true,\n          values: getTags()\n        }\n      ]\n    }\n\n    return (\n    // We wrap the outside in an error handler\n      <ApolloProvider client={apolloClient}>\n        <Query query={datastore.graphql.queries.getUser} skip={!signedIn}>\n          {({ loading, error, data, refetch }) => {\n            if (loading) return <Loading message='UserData' />\n            if (error) {\n              console.error(error)\n            }\n            // If there's no record for this user in the DB there's nothing left to do\n            if (signedIn && (!data || !data.user)) {\n              console.log('NO USER DATA YET', { loading, error, data })\n              if (!retryRef.current) {\n                retryRef.current = setTimeout(() => {\n                  console.log('Retrying user query')\n                  refetch()\n                }, 5000)\n              }\n              return (\n                <Loading message='UserData' />\n              )\n            }\n            // If we've changed users then wipe the old user's stuff\n            else if (signedIn && authData.attributes.sub !== data.user.id) {\n              console.log('USER CHANGE')\n              datastore.graphql.offline.imgStore.clear()\n              apolloClient.resetStore()\n              datastore.graphql.offline.stateStore.clear()\n              reduxActions.resetAllState()\n            }\n            else if (signedIn) appContext.currentUser = data.user\n            return (\n              <AppContextProvider value={appContext}>\n                <IntlWrapper>\n                  <Wrapped {...props} domain={reduxProps.domain} installPrompt={installPrompt} />\n                </IntlWrapper>\n              </AppContextProvider>\n            )\n          }}\n        </Query>\n      </ApolloProvider>\n    )\n  }\n  AuthProvider.propTypes = {\n    reduxProps: PropTypes.object,\n    reduxActions: PropTypes.object\n  }\n  return AuthProvider\n}\n\n// const withuserSeriesQuery = graphql(datastore.graphql.queries.userSeries, {\n//   props: ({ data, ownProps }) => {\n//     // console.log('ProfileConnect withuserSeriesQuery', print(datastore.graphql.queries.userSeries), { data, ownProps })\n//     return { data: { ...ownProps.data, seriesQ: data } }\n//   }\n// })\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { domain } = state.home.current\n  return {\n    reduxProps: {\n      domain,\n      flags: state.flags\n    }\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  reduxActions: {\n    setHomeState: (newDomain, newParams) => {\n      dispatch(datastore.redux.actions.setHomeState(newDomain, newParams))\n    },\n    onCameraClick: () => {\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.NEW_SERIES_CAMERA, { activeSeries: null }))\n    },\n    onLibraryClick: () => {\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.NEW_SERIES_LIBRARY, { activeSeries: null }))\n    },\n    onOfflineMenuClick: () => {\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.OFFLINE_DOWNLOAD))\n    },\n    onSettingsClick: () => {\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SETTINGS))\n    },\n    jumpToSeriesView: (seriesId, photoId) => {\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SERIES, { activeSeries: seriesId, initialPhoto: photoId }))\n    },\n    jumpToUser: (username) => {\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SEARCH, { search: { tab: config.home.SEARCH_TABS.USER, text: username } }))\n    },\n    jumpToMap: ({ bbox, center }) => {\n      let bounds = bbox\n      if (!bounds && center) {\n        const bufferPts = buffer(point(center), 500, { units: 'meters' })\n        bounds = bboxFunc(bufferPts)\n      }\n\n      if (bounds) {\n        dispatch(datastore.redux.actions.pushMapHistory({\n          mode: config.home.MapModeTypes.FREE,\n          bounds: bounds\n        }))\n        dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.MAP, { activeSeries: null, initialPhoto: null }))\n      }\n    },\n    jumpToSeriesMap: (seriesId, photoId) => {\n      dispatch(datastore.redux.actions.pushMapHistory({\n        mode: config.home.MapModeTypes.FREE\n      }))\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.MAP, { activeSeries: seriesId, initialPhoto: photoId }))\n    },\n    resetAllState: () => {\n      dispatch(datastore.redux.actions.resetAllState())\n    },\n    dismissInstall: () => {\n      dispatch(datastore.redux.actions.setFlag('install', false))\n    },\n    setUseOffline: (bVal) => {\n      dispatch(datastore.redux.actions.setFlag('useLoggedOut', bVal))\n    },\n    onQRButtonClick: () => {\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.QRCAPTURE))\n    },\n    onMenuBack: () => {\n      dispatch(datastore.redux.actions.homeStateBack())\n    },\n    onAvatarClick: (username) => {\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SEARCH, {\n        search: { tab: homeConfig.SEARCH_TABS.USER, text: username }\n      }))\n    },\n    onQRCapture: (type, activeSeries, initialPhoto) => {\n      switch (type) {\n        case 'series':\n          dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SERIES, { activeSeries, initialPhoto }))\n          break\n        default:\n          break\n      }\n    }\n  }\n})\n\nconst withErrorBoundary = (Wrapped) => (props) => (\n  <ErrorBoundary fallback={ErrorConnect}>\n    <Wrapped {...props} />\n  </ErrorBoundary>\n)\n\n/**\n * Nearly everything we do depends on who you are as a user so we commit this to state\n */\n\n// The order we compose things here matters a lot\nexport default compose(\n  // ORDER IS CRITICAL HERE\n  datastore.redux.withReduxProvider,\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withApolloAuthProvider,\n  withErrorBoundary\n)(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      }\n      else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            }\n            else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      }\n      else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppConnect from './connectors/App.connect'\nimport * as serviceWorker from './serviceWorker'\n\n// Here's our global overrides css\nimport '@morphoto/themes/baseline.css'\nimport 'mapbox-gl/dist/mapbox-gl.css'\n// This is the font we need\nrequire('typeface-roboto')\n\nReactDOM.render(<AppConnect />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n  window.history.pushState({}, '')\n})\n\n// This is our image worker to offline cache maptiles AND series photos\nnavigator.serviceWorker.register('imgCacheWorker.js')\n","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { Actions } from '../actions';\nimport { config } from '@morphoto/client-common';\nvar mapInit = [{\n  mode: config.home.MapModeTypes.FREE,\n  viewport: {\n    latitude: 36.80191008366581,\n    longitude: -111.63999999999784,\n    zoom: 11\n  }\n}];\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : mapInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.MAP_HISTORY_CLEAR:\n      var newClearerHistory = state.length > 0 ? [[state.length - 1]] : [];\n      return newClearerHistory;\n\n    case Actions.MAP_HISTORY_POP:\n      return state.slice(0, -1);\n\n    case Actions.MAP_HISTORY_PUSH:\n      return [].concat(_toConsumableArray(state), [data]).slice(-10);\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nimport { config } from '@morphoto/client-common';\nvar homeInit = {\n  history: [],\n  current: {\n    domain: config.home.AppStateTypes.FEED\n  }\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : homeInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n  var history = state.history,\n      current = state.current;\n\n  switch (type) {\n    case Actions.HOME_STATE_BACK:\n      var newStateHistory = _toConsumableArray(history);\n\n      var newCurrentState = newStateHistory.length > 0 ? newStateHistory.pop() : homeInit.current;\n      return _objectSpread({}, state, {\n        current: newCurrentState,\n        history: newStateHistory\n      });\n\n    case Actions.HOME_CHANGE_ACTIVE_SERIES:\n      var activeSeries = data.activeSeries,\n          initialPhoto = data.initialPhoto;\n      return _objectSpread({}, state, {\n        history: history,\n        current: _objectSpread({}, current, {\n          activeSeries: activeSeries || null,\n          initialPhoto: activeSeries && initialPhoto ? initialPhoto : null\n        })\n      });\n\n    case Actions.HOME_CHANGE_STATE:\n      var newDomain = data.newDomain,\n          params = data.params;\n      var newParams = params || {};\n      var skipSave = [config.home.AppStateTypes.QRCAPTURE, config.home.AppStateTypes.SETTINGS, config.home.AppStateTypes.OFFLINE_DOWNLOAD, config.home.AppStateTypes.NEW_SERIES_CAMERA, config.home.AppStateTypes.NEW_SERIES_LIBRARY].indexOf(current.domain) > -1;\n      var replaceState = current.domain === newDomain;\n      var newHistory = !skipSave && !replaceState ? [].concat(_toConsumableArray(history), [current]).slice(-10) : history;\n      return _objectSpread({}, state, {\n        history: newHistory,\n        current: _objectSpread({}, current, {\n          domain: newDomain\n        }, newParams)\n      });\n\n    default:\n      return state;\n  }\n});","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nvar initState = {\n  store: [],\n  activeUpload: null\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n  var store = state.store,\n      activeUpload = state.activeUpload;\n\n  switch (type) {\n    case Actions.UPLOADER_START:\n      if (!activeUpload) {\n        return _objectSpread({}, state, {\n          activeUpload: data\n        });\n      } else {\n        return _objectSpread({}, state, {\n          store: [].concat(_toConsumableArray(store), [data])\n        });\n      }\n\n    case Actions.UPLOADER_COMPLETE:\n      if (store.length === 0) {\n        return _objectSpread({}, state, {\n          activeUpload: null\n        });\n      } else {\n        var newStore = _toConsumableArray(store);\n\n        var newActive = newStore.pop();\n        return _objectSpread({}, state, {\n          store: newStore,\n          activeUpload: newActive\n        });\n      }\n\n    case Actions.UPLOADER_UPDATE_PROGRESS:\n      return _objectSpread({}, state, {\n        activeUpload: _objectSpread({}, activeUpload, {}, data)\n      });\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nimport { isIos } from '@morphoto/client-common';\nvar defaultFlags = {\n  iOSWarning: isIos(),\n  install: true,\n  useLoggedOut: false\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultFlags;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.SETFLAG:\n      var flagName = data.flagName,\n          flagVal = data.flagVal;\n      return _objectSpread({}, state, _defineProperty({}, flagName, flagVal));\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nvar offlineInit = {\n  completedDownload: false,\n  viewport: null\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : offlineInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.OFFLINE_VIEWPORT_SAVE:\n      return _objectSpread({}, state, {\n        viewport: data\n      });\n\n    case Actions.OFFLINE_SET_STATUS:\n      return _objectSpread({}, state, {\n        completedDownload: data\n      });\n\n    default:\n      return state;\n  }\n});","import { combineReducers } from 'redux';\nimport map from './map';\nimport home from './home';\nimport uploader from './uploader';\nimport flags from './flags';\nimport offline from './offline';\nvar appReducer = combineReducers({\n  map: map,\n  home: home,\n  uploader: uploader,\n  flags: flags,\n  offline: offline\n});\n\nvar rootReducer = function rootReducer(state, action) {\n  if (action.type === 'RESET_ALL_STATE') {\n    state = undefined;\n  }\n\n  return appReducer(state, action);\n};\n\nexport default rootReducer;","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport { stateStore } from '../graphql/offline';\nvar persistConfig = {\n  key: 'root',\n  storage: stateStore\n};\nvar persistedReducer = persistReducer(persistConfig, rootReducer);\n\nvar configureStoreDev = function configureStoreDev(preloadedState) {\n  var _require = require('redux-devtools-extension'),\n      devToolsEnhancer = _require.devToolsEnhancer;\n\n  var _require2 = require('redux-logger'),\n      createLogger = _require2.createLogger;\n\n  var store = createStore(persistedReducer, preloadedState, compose(devToolsEnhancer(), applyMiddleware(thunk, createLogger())));\n\n  if (module.hot) {\n    module.hot.accept('./reducers', function () {\n      store.replaceReducer(rootReducer);\n    });\n  }\n\n  return store;\n};\n\nvar configureStoreProd = function configureStoreProd(preloadedState) {\n  var store = createStore(persistedReducer, preloadedState, compose(applyMiddleware(thunk)));\n  return store;\n};\n\nexport default (function () {\n  var store = process.env.NODE_ENV === 'production' ? configureStoreProd() : configureStoreDev();\n  return {\n    store: store,\n    persistor: persistStore(store)\n  };\n});","import React from 'react';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { Provider } from 'react-redux';\nimport storeConfig from './storeConfig';\nimport { LoadingWrapped as Loading } from '@morphoto/client-auth';\n\nvar withReduxProvider = function withReduxProvider(BaseComponent) {\n  return function (props) {\n    var _storeConfig = storeConfig(),\n        store = _storeConfig.store,\n        persistor = _storeConfig.persistor;\n\n    return React.createElement(Provider, {\n      store: store\n    }, React.createElement(PersistGate, {\n      loading: React.createElement(Loading, null),\n      persistor: persistor\n    }, React.createElement(BaseComponent, props)));\n  };\n};\n\nexport default withReduxProvider;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport PersonIcon from '@material-ui/icons/Person';\nimport LabelIcon from '@material-ui/icons/Label';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      minHeight: 60\n    },\n    chosenItem: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.dark\n    },\n    avatar: {\n      background: theme.palette.primary.main\n    },\n    closeIcon: {\n      color: theme.palette.primary.contrastText,\n      paddingRight: 0\n    },\n    avatarImg: {\n      height: '100%',\n      width: '100%',\n      objectFit: 'cover'\n    }\n  };\n});\n\nvar SearchContextItem = function SearchContextItem(_ref) {\n  var className = _ref.className,\n      variant = _ref.variant,\n      name = _ref.name,\n      description = _ref.description,\n      gravatar = _ref.gravatar,\n      onClick = _ref.onClick,\n      onCancel = _ref.onCancel;\n  var classes = useStyles();\n  var TheIcon = PlaceIcon;\n\n  var getAvatar = function getAvatar(src) {\n    return function () {\n      return React.createElement(Avatar, {\n        className: classes.avatar\n      }, React.createElement(\"img\", {\n        className: classes.avatarImg,\n        alt: \"profile\",\n        src: src\n      }));\n    };\n  };\n\n  switch (variant) {\n    case 'tag':\n      TheIcon = LabelIcon;\n      break;\n\n    case 'location':\n      TheIcon = PlaceIcon;\n      break;\n\n    case 'user':\n      TheIcon = gravatar ? getAvatar(gravatar) : PersonIcon;\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ListItem, {\n    className: classNames(className, classes.root, onCancel ? classes.chosenItem : null),\n    button: !!onClick,\n    onClick: onClick\n  }, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.avatar\n  }, React.createElement(TheIcon, {\n    color: \"inherit\"\n  }))), React.createElement(ListItemText, {\n    disableTypography: true\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, name), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, description)), onCancel && React.createElement(ListItemIcon, null, React.createElement(IconButton, {\n    onClick: onCancel,\n    className: classes.closeIcon\n  }, React.createElement(CancelIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nSearchContextItem.propTypes = {\n  variant: PropTypes.oneOf(['tag', 'location', 'user']),\n  onClick: PropTypes.func,\n  gravatar: PropTypes.string,\n  className: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  onCancel: PropTypes.func\n};\nexport default SearchContextItem;\nexport var SearchContexItemCosmos = function SearchContexItemCosmos() {\n  return React.createElement(List, null, React.createElement(SearchContextItem, {\n    variant: \"tag\",\n    name: \"SomeTag\",\n    description: \"Some description of what I am\"\n  }), React.createElement(SearchContextItem, {\n    variant: \"location\",\n    name: \"Some Location\",\n    description: \"Some description of what I am\"\n  }), React.createElement(SearchContextItem, {\n    variant: \"user\",\n    name: \"User McUserSon\",\n    description: \"Some description of what I am\"\n  }));\n};","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport SearchContextItem from './SearchContextItem';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      flexGrow: 1\n    },\n    listSection: {\n      backgroundColor: 'inherit'\n    },\n    placeholderText: {\n      textAlign: 'center',\n      padding: theme.spacing(3, 1),\n      color: theme.palette.grey[400]\n    },\n    ul: {\n      backgroundColor: 'inherit',\n      padding: 0\n    }\n  };\n});\n\nvar SearchContextResults = function SearchContextResults(_ref) {\n  var variant = _ref.variant,\n      loading = _ref.loading,\n      contextResults = _ref.contextResults,\n      setContextChoice = _ref.setContextChoice;\n  var classes = useStyles();\n\n  if (loading) {\n    return React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h3\"\n    }, \"Searching...\");\n  } else if (!contextResults || contextResults.length === 0) {\n    return React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h4\"\n    }, \"No \", variant, \" results\");\n  }\n\n  return React.createElement(List, {\n    className: classes.root\n  }, contextResults.map(function (cr, idx) {\n    return React.createElement(SearchContextItem, _extends({\n      key: \"scr-\".concat(idx),\n      variant: variant,\n      onClick: function onClick() {\n        return setContextChoice(cr);\n      }\n    }, cr));\n  }));\n};\n\nSearchContextResults.propTypes = {\n  variant: PropTypes.oneOf(['keyword', 'tag', 'location', 'user']),\n  loading: PropTypes.bool,\n  contextResults: PropTypes.array.isRequired,\n  setContextChoice: PropTypes.func.isRequired\n};\nexport default SearchContextResults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      textAlign: 'center',\n      fontStyle: 'italic',\n      padding: theme.spacing(2, 1)\n    }\n  };\n});\n\nvar SearchEnder = function SearchEnder(_ref) {\n  var style = _ref.style,\n      icon = _ref.icon,\n      text = _ref.text;\n  var classes = useStyles();\n  return React.createElement(Typography, {\n    className: classes.root,\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    component: \"div\",\n    style: style\n  }, icon, text);\n};\n\nSearchEnder.propTypes = {\n  style: PropTypes.object,\n  icon: PropTypes.any,\n  text: PropTypes.string\n};\nexport default SearchEnder;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport SearchContextItem from './SearchContextItem';\nimport SearchEnder from './SearchEnder';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SeriesListItem } from '@morphoto/photoseries';\nimport { util } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    ctxItem: {\n      flexGrow: 0\n    },\n    list: {\n      flexGrow: 1,\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    },\n    placeholderText: {\n      textAlign: 'center',\n      padding: theme.spacing(3, 1),\n      color: theme.palette.grey[400]\n    },\n    listSection: {\n      backgroundColor: 'inherit'\n    },\n    ul: {\n      backgroundColor: 'inherit',\n      padding: 0\n    }\n  };\n});\n\nvar SearchResults = function SearchResults(_ref) {\n  var variant = _ref.variant,\n      loading = _ref.loading,\n      seriesList = _ref.seriesList,\n      contextChoice = _ref.contextChoice,\n      onCancel = _ref.onCancel,\n      onResultClick = _ref.onResultClick,\n      fetchMore = _ref.fetchMore;\n  var classes = useStyles();\n  var listRef = useRef();\n  var enderRef = useRef();\n  var handleScroll = util.debounce(function () {\n    if (!loading && fetchMore && enderRef.current && listRef.current) {\n      var offsetTop = enderRef.current.offsetTop;\n      var _listRef$current = listRef.current,\n          scrollTop = _listRef$current.scrollTop,\n          offsetHeight = _listRef$current.offsetHeight;\n      var scrollBottom = offsetHeight + scrollTop;\n\n      if (offsetTop < scrollBottom * 2) {\n        console.log('SCROLL', {\n          offsetHeight: offsetHeight,\n          scrollTop: scrollTop,\n          offsetTop: offsetTop\n        });\n        fetchMore();\n      }\n    }\n  }, 500);\n  useEffect(handleScroll, [seriesList]);\n  var content = null;\n\n  if (loading) {\n    content = React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h3\"\n    }, \"Searching...\");\n  } else if (seriesList && seriesList.length > 0) {\n    content = seriesList.map(function (series, idx) {\n      return React.createElement(SeriesListItem, {\n        key: \"series-\".concat(idx),\n        series: series,\n        onClick: function onClick() {\n          return onResultClick(series.id);\n        },\n        showCreatedOn: true,\n        showLastPhoto: true\n      });\n    });\n    content.push(React.createElement(\"div\", {\n      key: \"ender\",\n      ref: enderRef\n    }, React.createElement(SearchEnder, {\n      text: fetchMore ? 'Loading...' : 'No More Results'\n    })));\n  } else {\n    content = React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h4\"\n    }, \"No series found\");\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, contextChoice && React.createElement(SearchContextItem, _extends({\n    className: classes.ctxItem\n  }, contextChoice, {\n    variant: variant,\n    onCancel: onCancel\n  })), React.createElement(List, {\n    className: classes.list,\n    subheader: React.createElement(\"li\", null),\n    onScroll: handleScroll,\n    innerRef: listRef\n  }, content));\n};\n\nSearchResults.propTypes = {\n  variant: PropTypes.oneOf(['keyword', 'tag', 'location', 'user']),\n  seriesList: PropTypes.array.isRequired,\n  loading: PropTypes.bool,\n  contextChoice: PropTypes.object,\n  onResultClick: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  fetchMore: PropTypes.func\n};\nexport default SearchResults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      padding: '10%',\n      display: 'flex',\n      flexDirection: 'column',\n      opacity: 0.3,\n      textAlign: 'center'\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      color: theme.palette.primary.light,\n      opacity: 0.5\n    },\n    primary: {\n      flex: '1 1 30%',\n      width: '100%'\n    },\n    secondary: {\n      flex: '1 1 30%',\n      width: '100%'\n    }\n  };\n});\n\nvar SearchPlaceholder = function SearchPlaceholder(_ref) {\n  var icon = _ref.icon,\n      primary = _ref.primary,\n      secondary = _ref.secondary;\n  var classes = useStyles();\n  var PlaceholderIcon = icon;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(PlaceholderIcon, {\n    className: classes.icon\n  }), primary && React.createElement(Typography, {\n    className: classes.primary,\n    variant: \"h3\"\n  }, primary), secondary && React.createElement(Typography, {\n    className: classes.secondary,\n    variant: \"h4\"\n  }, secondary));\n};\n\nSearchPlaceholder.propTypes = {\n  icon: PropTypes.object,\n  primary: PropTypes.string,\n  secondary: PropTypes.string\n};\nexport default SearchPlaceholder;","import React, { useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Container from '@material-ui/core/Container';\nimport PortableWifiOffIcon from '@material-ui/icons/PortableWifiOff';\nimport LabelIcon from '@material-ui/icons/Label';\nimport SearchIcon from '@material-ui/icons/Search';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport PersonIcon from '@material-ui/icons/Person';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchContextResults from './SearchContextResults';\nimport SearchResults from './SearchResults';\nimport SearchPlaceholder from './SearchPlaceholder';\nimport SearchInput from './SearchInput';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport { config, AppContext } from '@morphoto/client-common';\nvar TABS = config.home.SEARCH_TABS;\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    container: {\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column',\n      padding: 0,\n      flexGrow: 1\n    },\n    tabs: {},\n    ListWrapper: {\n      flexGrow: 1,\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    tab: {\n      flexGrow: 1\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Search = function Search(_ref) {\n  var currentTab = _ref.currentTab,\n      defaultText = _ref.defaultText,\n      searchText = _ref.searchText,\n      contextResults = _ref.contextResults,\n      searchResults = _ref.searchResults,\n      contextChoice = _ref.contextChoice,\n      loading = _ref.loading,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online;\n\n  useEffect(function () {\n    if (contextResults && !searchResults && contextResults.length === 1) {\n      actions.setContextChoice(contextResults[0]);\n    }\n  }, [contextResults]);\n  var placeholder = {};\n\n  switch (currentTab) {\n    case TABS.KEYWORD:\n      placeholder = {\n        primary: 'Keyword search',\n        secondary: 'example: \\'beaver...\\'',\n        icon: SearchIcon\n      };\n      break;\n\n    case TABS.TAG:\n      placeholder = {\n        primary: 'Tag search',\n        secondary: 'example: \\'beaver...\\'',\n        icon: LabelIcon\n      };\n      break;\n\n    case TABS.USER:\n      placeholder = {\n        primary: 'User search',\n        secondary: 'example: \\'SuperGreg123...\\'',\n        icon: PersonIcon\n      };\n      break;\n\n    case TABS.LOCATION:\n      placeholder = {\n        primary: 'Location Search',\n        secondary: 'example: \\'Vancouver...\\'',\n        icon: PlaceIcon\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  var content = null;\n\n  if (!online.isOnline) {\n    content = React.createElement(SearchPlaceholder, {\n      primary: \"Search Disabled\",\n      secondary: \"(Offline)\",\n      icon: PortableWifiOffIcon\n    });\n  } else if ((contextChoice || currentTab === TABS.KEYWORD) && searchResults) {\n    content = React.createElement(SearchResults, {\n      variant: currentTab,\n      loading: loading,\n      onResultClick: actions.onResultClick,\n      fetchMore: actions.fetchMore,\n      seriesList: searchResults,\n      contextChoice: contextChoice,\n      onCancel: function onCancel() {\n        return actions.setContextChoice(null);\n      }\n    });\n  } else if (contextResults) {\n    content = React.createElement(SearchContextResults, {\n      loading: loading,\n      variant: currentTab,\n      contextResults: contextResults,\n      setContextChoice: currentTab === TABS.LOCATION ? actions.onMapClick : actions.setContextChoice\n    });\n  } else if (defaultText.length > 0) {\n    content = React.createElement(Typography, null, \"Searching for \", \"'\".concat(searchText, \"'\") || '...');\n  } else {\n    content = React.createElement(SearchPlaceholder, placeholder);\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(SearchInput, {\n    disabled: !online.isOnline,\n    onChange: actions.setSearchText,\n    defaultValue: searchText\n  })), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, online.isOnline && React.createElement(Tabs, {\n    value: currentTab,\n    disabled: !online.isOnline,\n    onChange: function onChange(e, val) {\n      return actions.setCurrentTab(val);\n    },\n    indicatorColor: \"primary\",\n    classes: {\n      flexContainer: classes.tabs\n    },\n    centered: true\n  }, React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.TAG,\n    label: \"Tags\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.KEYWORD,\n    label: \"Keywords\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.LOCATION,\n    label: \"Places\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.USER,\n    label: \"Users\"\n  })), React.createElement(\"div\", {\n    className: classes.ListWrapper\n  }, content)));\n};\n\nSearch.propTypes = {\n  loading: PropTypes.bool,\n  currentTab: PropTypes.string.isRequired,\n  contextChoice: PropTypes.object,\n  defaultText: PropTypes.string.isRequired,\n  searchText: PropTypes.string.isRequired,\n  contextResults: PropTypes.array,\n  searchResults: PropTypes.array,\n  actions: PropTypes.shape({\n    setCurrentTab: PropTypes.func.isRequired,\n    setSearchText: PropTypes.func.isRequired,\n    setContextChoice: PropTypes.func.isRequired,\n    fetchMore: PropTypes.func,\n    onMapClick: PropTypes.func.isRequired,\n    onResultClick: PropTypes.func.isRequired\n  })\n};\nSearch.defaultProps = {\n  currentTab: TABS.TAGS,\n  defaultText: ''\n};\nexport default Search;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Badge from '@material-ui/core/Badge';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport LabelIcon from '@material-ui/icons/Label';\nimport PauseIcon from '@material-ui/icons/PauseCircleFilled';\nimport PlayIcon from '@material-ui/icons/PlayCircleFilled';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { Photo } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { useComponentSize } from '@morphoto/client-common';\nimport style from './Slideshow.style';\nvar useStyles = makeStyles(style);\n\nvar Slideshow = function Slideshow(_ref) {\n  var onCancel = _ref.onCancel,\n      photos = _ref.photos,\n      transition = _ref.transition;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useStepper = useStepper(photos.length, transition),\n      activeStep = _useStepper.activeStep,\n      lastStep = _useStepper.lastStep,\n      handleForward = _useStepper.handleForward,\n      handleBack = _useStepper.handleBack,\n      paused = _useStepper.paused,\n      pause = _useStepper.pause,\n      play = _useStepper.play;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showXYTags = _useState2[0],\n      setShowXYTags = _useState2[1];\n\n  var refImgWrap = useRef(null);\n\n  var _useComponentSize = useComponentSize(refImgWrap),\n      _useComponentSize$siz = _useComponentSize.size,\n      height = _useComponentSize$siz.height,\n      width = _useComponentSize$siz.width;\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(\"div\", {\n    ref: refImgWrap,\n    className: classes.slideContainer\n  }, photos.map(function (slide, idx) {\n    return React.createElement(GridListTile, {\n      key: \"slide-\".concat(idx),\n      className: classNames(classes.slide, activeStep === idx && classes.active, lastStep === idx && classes.last),\n      onClick: function onClick() {\n        return setShowXYTags(!showXYTags);\n      },\n      style: {\n        height: height,\n        width: width,\n        transition: theme.transitions.create(['opacity'], {\n          duration: 1 / 4 * transition\n        })\n      }\n    }, React.createElement(Photo, {\n      photo: slide,\n      className: classes.photo,\n      showTags: showXYTags\n    }), React.createElement(Typography, {\n      className: classes.labelBadge\n    }, \"Tags: \", showXYTags ? 'On ' : 'Off ', React.createElement(Badge, {\n      color: \"secondary\",\n      badgeContent: photos[activeStep].tags.filter(function (tag) {\n        return tag.coords;\n      }).length\n    }, React.createElement(LabelIcon, {\n      color: \"inherit\"\n    }))), React.createElement(GridListTileBar, {\n      className: classes.titleBar,\n      titlePosition: \"top\",\n      title: React.createElement(Typography, {\n        color: \"inherit\",\n        variant: \"caption\"\n      }, React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          return onCancel();\n        }\n      }, React.createElement(ArrowBackIcon, null)), dates.formatDate(slide.takenOn)),\n      subtitle: React.createElement(\"em\", null, paused ? 'Paused' : '    '),\n      actionIcon: paused ? React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          play();\n        }\n      }, React.createElement(PlayIcon, null)) : React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          pause();\n        }\n      }, React.createElement(PauseIcon, null))\n    }));\n  }), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualBack,\n    onClick: handleBack,\n    color: \"inherit\"\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null)), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualForward,\n    onClick: handleForward,\n    color: \"inherit\"\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null))), React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"static\",\n    activeStep: activeStep,\n    classes: {\n      root: classes.mobileStepper,\n      dotActive: classes.dotActive\n    },\n    nextButton: React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleForward,\n      disabled: activeStep === photos.length - 1\n    }, \"Next\", theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null)),\n    backButton: React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleBack,\n      disabled: activeStep === 0\n    }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null), \"Back\")\n  }));\n};\n\nSlideshow.propTypes = {\n  isFullScreen: PropTypes.bool,\n  photos: PropTypes.array.isRequired,\n  transition: PropTypes.number,\n  onCancel: PropTypes.func.isRequired\n};\nSlideshow.defaultProps = {\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n};\nexport default Slideshow;\n\nvar useStepper = function useStepper(num, interval) {\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeStep = _useState4[0],\n      setActiveStep = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      paused = _useState6[0],\n      setPaused = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      lastStep = _useState8[0],\n      setLastStep = _useState8[1];\n\n  var timerRef = useRef();\n\n  var handleForward = function handleForward() {\n    setLastStep(activeStep);\n    if (activeStep + 1 >= num) setActiveStep(0);else setActiveStep(activeStep + 1);\n\n    if (!paused) {\n      destroyTimer();\n      createTimer();\n    }\n  };\n\n  var handleBack = function handleBack() {\n    setLastStep(activeStep);\n    if (activeStep - 1 < 0) setActiveStep(num - 1);else setActiveStep(activeStep - 1);\n\n    if (!paused) {\n      destroyTimer();\n      createTimer();\n    }\n  };\n\n  var pause = function pause() {\n    destroyTimer();\n    setPaused(true);\n  };\n\n  var play = function play() {\n    setPaused(false);\n    destroyTimer();\n    createTimer();\n  };\n\n  var createTimer = function createTimer() {\n    timerRef.current = window.setInterval(function () {\n      return setActiveStep(function (oldStep) {\n        setLastStep(oldStep);\n        return oldStep + 1 >= num ? 0 : oldStep + 1;\n      });\n    }, interval);\n  };\n\n  var destroyTimer = function destroyTimer() {\n    if (timerRef.current) window.clearInterval(timerRef.current);\n  };\n\n  useEffect(function () {\n    createTimer();\n    return function () {\n      destroyTimer();\n    };\n  }, []);\n  return {\n    activeStep: activeStep,\n    lastStep: lastStep,\n    handleForward: handleForward,\n    handleBack: handleBack,\n    setActiveStep: setActiveStep,\n    paused: paused,\n    pause: pause,\n    play: play\n  };\n};","export default (function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    swipeAble: {\n      height: '100%'\n    },\n    slideContainer: {\n      flexGrow: 1\n    },\n    titleBar: {\n      padding: theme.spacing(0, 1),\n      height: '35px!important'\n    },\n    mobileStepper: {\n      flexGrow: 0,\n      background: theme.palette.grey[800],\n      color: theme.palette.getContrastText(theme.palette.grey[800])\n    },\n    slide: {\n      top: 0,\n      zIndex: 0,\n      opacity: 0,\n      position: 'absolute',\n      display: 'block',\n      overflow: 'hidden',\n      width: '100%',\n      height: '100%',\n      minHeight: 300\n    },\n    dotActive: {\n      background: 'white'\n    },\n    iconButton: {\n      color: 'white'\n    },\n    active: {\n      zIndex: 5,\n      opacity: 1\n    },\n    last: {\n      opacity: 1,\n      zIndex: 4\n    },\n    tagContainer: {},\n    labelBadge: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      right: theme.spacing(2),\n      bottom: theme.spacing(1),\n      opacity: 0.8\n    },\n    tagChip: {\n      marginRight: theme.spacing(1),\n      fontSize: 10,\n      height: theme.spacing(2),\n      padding: theme.spacing(0.5)\n    },\n    xyTagChip: {\n      position: 'absolute',\n      fontSize: theme.spacing(1),\n      height: theme.spacing(2)\n    },\n    manualBack: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      left: 0,\n      top: '50%'\n    },\n    manualForward: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      right: 0,\n      top: '50%'\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    imgContainer: {\n      flex: '0 0 100px',\n      margin: theme.spacing(1, 1, 0, 2)\n    },\n    gravatarImg: {\n      verticalAlign: 'top'\n    }\n  };\n});\n\nvar MeCard = function MeCard(_ref) {\n  var user = _ref.user,\n      loading = _ref.loading,\n      onAvatarClick = _ref.onAvatarClick;\n  var classes = useStyles();\n  if (loading || !user) return 'LOADING...';\n  return React.createElement(ListItem, {\n    className: classes.root,\n    onClick: onAvatarClick,\n    disableGutters: true\n  }, React.createElement(ListItemIcon, {\n    className: classes.imgContainer\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: user.gravatar\n  })), React.createElement(ListItemText, {\n    primary: user.username,\n    secondary: \"Member since: \".concat(dates.formatDate(user.createdOn, 'LL'))\n  }));\n};\n\nMeCard.propTypes = {\n  user: PropTypes.object,\n  loading: PropTypes.bool,\n  onAvatarClick: PropTypes.func\n};\nexport default MeCard;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Divider from '@material-ui/core/Divider';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { SeriesListItem } from '@morphoto/photoseries';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport MeCard from './MeCard';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      background: theme.palette.background.paper,\n      height: '100%'\n    },\n    filterContainer: {\n      color: theme.palette.primary.secondary,\n      background: theme.palette.background.default,\n      textAlign: 'center',\n      padding: theme.spacing(1, 1)\n    },\n    container: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      padding: 0\n    },\n    filterChip: {},\n    seriesListItemWrap: {\n      margin: theme.spacing(1, 0.5)\n    },\n    seriesList: {\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    },\n    tabs: {},\n    noneFound: {\n      color: theme.palette.text.secondary,\n      textAlign: 'center',\n      padding: theme.spacing(2)\n    }\n  };\n});\nvar SORT = {\n  ACTIVITY: 'Last Photo',\n  CREATED: 'Created',\n  NAME: 'Name'\n};\n\nvar MyProfile = function MyProfile(_ref) {\n  var mySeries = _ref.mySeries,\n      user = _ref.user,\n      watchingSeries = _ref.watchingSeries,\n      loading = _ref.loading,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentTab = _useState2[0],\n      setCurrentTab = _useState2[1];\n\n  var _useState3 = useState(SORT.ACTIVITY),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sortVal = _useState4[0],\n      setSort = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sortAsc = _useState6[0],\n      setSortAsc = _useState6[1];\n\n  var sortSetter = function sortSetter(newSort) {\n    if (newSort === sortVal) setSortAsc(!sortAsc);else setSort(newSort);\n  };\n\n  var tabFeed = currentTab === 0 ? mySeries : watchingSeries;\n  if (!tabFeed) tabFeed = [];\n\n  switch (sortVal) {\n    case SORT.ACTIVITY:\n      if (sortAsc) tabFeed.sort(function (a, b) {\n        return a.latest.takenOn - b.latest.takenOn;\n      });else tabFeed.sort(function (a, b) {\n        return b.latest.takenOn - a.latest.takenOn;\n      });\n      break;\n\n    case SORT.CREATED:\n      if (sortAsc) tabFeed.sort(function (a, b) {\n        return a.createdOn - b.createdOn;\n      });else tabFeed.sort(function (a, b) {\n        return b.createdOn - a.createdOn;\n      });\n      break;\n\n    case SORT.NAME:\n      if (sortAsc) {\n        tabFeed.sort(function (a, b) {\n          if (a.name < b.name) {\n            return -1;\n          }\n\n          if (a.name > b.firstname) {\n            return 1;\n          }\n\n          return 0;\n        });\n      } else {\n        tabFeed.sort(function (a, b) {\n          if (b.name < a.name) {\n            return -1;\n          }\n\n          if (b.name > a.name) {\n            return 1;\n          }\n\n          return 0;\n        });\n      }\n\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(Typography, null, \"My Profile\")), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, React.createElement(MeCard, {\n    user: user\n  }), React.createElement(Tabs, {\n    value: currentTab,\n    onChange: function onChange(e, val) {\n      return setCurrentTab(val);\n    },\n    indicatorColor: \"primary\",\n    centered: true,\n    classes: {\n      flexContainer: classes.tabs\n    }\n  }, React.createElement(Tab, {\n    className: classes.tab,\n    value: 0,\n    label: \"My Series\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: 1,\n    label: \"Watching\"\n  })), React.createElement(Divider, null), React.createElement(\"div\", {\n    className: classes.filterContainer\n  }, React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.NAME,\n    onClick: function onClick() {\n      return sortSetter(SORT.NAME);\n    },\n    label: SORT.NAME\n  }), \"|\", React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.ACTIVITY,\n    onClick: function onClick() {\n      return sortSetter(SORT.ACTIVITY);\n    },\n    label: SORT.ACTIVITY\n  }), \"|\", React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.CREATED,\n    onClick: function onClick() {\n      return sortSetter(SORT.CREATED);\n    },\n    label: SORT.CREATED\n  })), React.createElement(Divider, null), React.createElement(\"div\", {\n    className: classes.seriesList\n  }, !loading && (!tabFeed || tabFeed.length === 0) && React.createElement(Typography, {\n    className: classes.noneFound,\n    component: \"div\"\n  }, \"No Series Found\"), loading && React.createElement(Typography, {\n    className: classes.noneFound,\n    component: \"div\"\n  }, \"Loading...\"), tabFeed.map(function (series, idx) {\n    return React.createElement(SeriesListItem, {\n      key: \"seriesListItem\".concat(idx),\n      series: series,\n      showCreatedOn: true,\n      showLastPhoto: true,\n      onClick: function onClick() {\n        return actions.jumpToSeries(series.id);\n      }\n    });\n  }))));\n};\n\nMyProfile.propTypes = {\n  loading: PropTypes.bool,\n  user: PropTypes.object.isRequired,\n  mySeries: PropTypes.array.isRequired,\n  watchingSeries: PropTypes.array.isRequired,\n  actions: PropTypes.shape({\n    jumpToSeries: PropTypes.func.isRequired,\n    jumpToMap: PropTypes.func.isRequired\n  })\n};\nexport default MyProfile;\nvar useFilterStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      margin: theme.spacing(0, 1, 0, 1)\n    }\n  };\n});\n\nvar FilterSortItem = function FilterSortItem(_ref2) {\n  var active = _ref2.active,\n      asc = _ref2.asc,\n      onClick = _ref2.onClick,\n      label = _ref2.label;\n  var classes = useFilterStyles();\n  var arrow = asc === true ? '▲' : '▼';\n  return React.createElement(Button, {\n    size: \"small\",\n    className: classes.root,\n    onClick: onClick,\n    color: active ? 'secondary' : 'inherit'\n  }, label, React.createElement(\"span\", {\n    style: {\n      opacity: active ? 1 : 0\n    }\n  }, arrow));\n};\n\nFilterSortItem.propTypes = {\n  active: PropTypes.bool,\n  asc: PropTypes.bool,\n  onClick: PropTypes.func.isRequired,\n  label: PropTypes.string.isRequired\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SwipeableViews from 'react-swipeable-views';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport IconButton from '@material-ui/core/IconButton';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Badge from '@material-ui/core/Badge';\nimport LabelIcon from '@material-ui/icons/Label';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { Photo } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport style from './SwipeShow.style';\nvar useStyles = makeStyles(style);\n\nvar SwipeShow = function SwipeShow(_ref) {\n  var photos = _ref.photos,\n      onImageSelect = _ref.onImageSelect,\n      activePhoto = _ref.activePhoto,\n      setActivePhoto = _ref.setActivePhoto;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showTags = _useState2[0],\n      setShowTags = _useState2[1];\n\n  var singular = photos.length < 2;\n\n  var handleForward = function handleForward() {\n    return setActivePhoto(activePhoto >= photos.length ? 0 : activePhoto + 1);\n  };\n\n  var handleBack = function handleBack() {\n    return setActivePhoto(activePhoto <= 0 ? photos.length - 1 : activePhoto - 1);\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(SwipeableViews, {\n    axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n    index: activePhoto,\n    onChangeIndex: function onChangeIndex(val) {\n      return setActivePhoto(val);\n    },\n    enableMouseEvents: true\n  }, photos.map(function (photo, idx) {\n    return React.createElement(\"div\", {\n      className: classes.photoWrapper,\n      key: \"swipeshowpic-\".concat(idx),\n      onClick: function onClick() {\n        return onImageSelect(photos[activePhoto].id);\n      }\n    }, React.createElement(Photo, {\n      photo: photo,\n      className: classes.photo,\n      showTags: showTags\n    }));\n  })), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualBack,\n    onClick: handleBack,\n    color: \"inherit\",\n    disabled: activePhoto === 0\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null)), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualForward,\n    onClick: handleForward,\n    color: \"inherit\",\n    disabled: activePhoto === photos.length - 1\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null)), React.createElement(GridListTileBar, {\n    title: singular ? 'Photo' : \"Photo (\".concat(activePhoto + 1, \"/\").concat(photos.length, \")\"),\n    subtitle: photos.length > 0 && React.createElement(\"span\", null, dates.formatDate(photos[activePhoto].takenOn)),\n    actionIcon: React.createElement(React.Fragment, null, React.createElement(IconButton, {\n      className: classes.tagButton,\n      onClick: function onClick() {\n        return setShowTags(!showTags);\n      }\n    }, React.createElement(Badge, {\n      color: showTags ? 'primary' : 'secondary',\n      badgeContent: photos[activePhoto].tags ? photos[activePhoto].tags.filter(function (tag) {\n        return tag.coords;\n      }).length : null\n    }, React.createElement(LabelIcon, null))))\n  })), !singular && React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"static\",\n    activeStep: activePhoto,\n    classes: {\n      root: classes.mobileStepper,\n      dots: classes.dots\n    }\n  }));\n};\n\nSwipeShow.propTypes = {\n  photos: PropTypes.array,\n  transition: PropTypes.number,\n  activePhoto: PropTypes.number,\n  setActivePhoto: PropTypes.func.isRequired,\n  onImageSelect: PropTypes.func.isRequired\n};\nSwipeShow.defaultProps = {\n  activePhoto: 0,\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n};\nexport default SwipeShow;","export default (function (theme) {\n  return {\n    root: {\n      position: 'relative'\n    },\n    inner: {\n      position: 'relative'\n    },\n    photoWrapper: {\n      minHeight: 250,\n      height: 250\n    },\n    dateCaption: {\n      padding: theme.spacing(1),\n      background: theme.palette.primary.dark,\n      color: theme.palette.primary.contrastText,\n      textAlign: 'center'\n    },\n    mobileStepper: {},\n    manualBack: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      left: 0,\n      top: '50%'\n    },\n    manualForward: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      right: 0,\n      top: '50%'\n    },\n    tagButton: {\n      color: 'rgba(255, 255, 255, 0.54)'\n    },\n    slideshowButton: {\n      color: 'rgba(255, 255, 255, 0.54)'\n    },\n    dots: {\n      margin: '0 auto'\n    }\n  };\n});","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Tags\", {\n  enumerable: true,\n  get: function get() {\n    return _Tags[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"getExif\", {\n  enumerable: true,\n  get: function get() {\n    return _exif.getExif;\n  }\n});\nObject.defineProperty(exports, \"Series\", {\n  enumerable: true,\n  get: function get() {\n    return _Series[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Photo\", {\n  enumerable: true,\n  get: function get() {\n    return _Photo[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"AccessHelper\", {\n  enumerable: true,\n  get: function get() {\n    return _AccessHelper[\"default\"];\n  }\n});\nexports.permissions = exports.util = exports.dates = exports.accessControl = void 0;\n\nvar _accesscontrol = _interopRequireDefault(require(\"accesscontrol\"));\n\nvar _permissions = _interopRequireDefault(require(\"./accesscontrol/permissions\"));\n\nvar datesLib = _interopRequireWildcard(require(\"./dates\"));\n\nvar utilLib = _interopRequireWildcard(require(\"./util\"));\n\nvar _Tags = _interopRequireDefault(require(\"./Tags\"));\n\nvar _exif = require(\"./exif\");\n\nvar _Series = _interopRequireDefault(require(\"./Series\"));\n\nvar _Photo = _interopRequireDefault(require(\"./Photo\"));\n\nvar _AccessHelper = _interopRequireDefault(require(\"./accesscontrol/AccessHelper\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar accessControl = new _accesscontrol[\"default\"](_permissions[\"default\"]);\nexports.accessControl = accessControl;\nvar dates = datesLib;\nexports.dates = dates;\nvar util = utilLib;\nexports.util = util;\nvar permissions = _permissions[\"default\"];\nexports.permissions = permissions;","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport var RawSVG = React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M13.685,2.797c-0.44,1.273 0.852,3.525 -1.082,4.966c-1.247,0.93 -2.133,2.247 -2.743,4.167c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873c1.28,-2.034 -2.359,-1.862 -2.747,-3.307Z\"\n}), React.createElement(\"path\", {\n  d: \"M4.921,5.953c0.883,1.017 3.479,1.024 3.76,3.42c0.181,1.545 0.879,2.971 2.238,4.459c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066c-1.121,-2.126 -2.792,1.111 -4.238,0.725Z\"\n}), React.createElement(\"path\", {\n  d: \"M3.236,15.092c1.323,-0.256 2.627,-2.5 4.842,-1.546c1.428,0.615 3.013,0.724 4.98,0.292c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94c-2.402,-0.091 -0.433,2.974 -1.491,4.033Z\"\n}), React.createElement(\"path\", {\n  d: \"M10.309,21.121c0.439,-1.274 -0.852,-3.525 1.081,-4.967c1.247,-0.929 2.133,-2.246 2.743,-4.167c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873c-1.28,2.034 2.359,1.863 2.748,3.308Z\"\n}), React.createElement(\"path\", {\n  d: \"M19.066,18.01c-0.883,-1.017 -3.479,-1.024 -3.76,-3.42c-0.182,-1.544 -0.88,-2.971 -2.238,-4.459c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067c1.121,2.125 2.792,-1.112 4.238,-0.726Z\"\n}), React.createElement(\"path\", {\n  d: \"M20.751,8.871c-1.323,0.256 -2.627,2.501 -4.842,1.546c-1.429,-0.615 -3.013,-0.723 -4.98,-0.291c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94c2.401,0.092 0.433,-2.974 1.491,-4.033Z\"\n}));\nexport default createSvgIcon(RawSVG, 'AppLogo');","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport React, { useRef, useLayoutEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { util } from '@morphoto/common';\nvar useSearchBarStyles = makeStyles(function (theme) {\n  return {\n    root: _defineProperty({\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.3),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.5)\n      },\n      marginRight: theme.spacing(2),\n      marginLeft: 0,\n      width: '100%'\n    }, theme.breakpoints.up('sm'), {\n      marginLeft: theme.spacing(3),\n      width: 'auto'\n    }),\n    transparent: {\n      backgroundColor: fade(theme.palette.common.white, 0.7),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.9)\n      }\n    },\n    inputRoot: {\n      color: 'inherit',\n      width: '100%'\n    },\n    inputInput: _defineProperty({\n      padding: theme.spacing(1, 1, 1, 4),\n      transition: theme.transitions.create('width'),\n      width: '100%'\n    }, theme.breakpoints.up('md'), {\n      width: 200\n    }),\n    searchIcon: {\n      width: theme.spacing(4),\n      height: '100%',\n      position: 'absolute',\n      pointerEvents: 'none',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  };\n});\nexport var SearchInput = function SearchInput(_ref) {\n  var autoFocus = _ref.autoFocus,\n      disabled = _ref.disabled,\n      onChange = _ref.onChange,\n      onClick = _ref.onClick,\n      defaultValue = _ref.defaultValue,\n      isTransparent = _ref.isTransparent;\n  var inputRef = useRef();\n  var classes = useSearchBarStyles();\n  var debounceSearchText = useCallback(util.debounce(onChange, 500), [onChange]);\n  useLayoutEffect(function () {\n    if (inputRef.current && !autoFocus) {\n      console.log('Setting blur');\n      inputRef.current.blur();\n    }\n  }, [autoFocus]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, isTransparent ? classes.transparent : null),\n    onClick: onClick\n  }, React.createElement(\"div\", {\n    className: classes.searchIcon\n  }, React.createElement(SearchIcon, null)), React.createElement(InputBase, {\n    autoFocus: !disabled && autoFocus,\n    inputProps: {\n      onBlur: function onBlur() {}\n    },\n    onChange: function onChange(e) {\n      debounceSearchText(e.target.value);\n    },\n    placeholder: \"Search\\u2026\",\n    disabled: disabled,\n    defaultValue: defaultValue,\n    inputRef: inputRef,\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    }\n  }));\n};\nSearchInput.propTypes = {\n  autoFocus: PropTypes.bool,\n  isTransparent: PropTypes.bool,\n  disabled: PropTypes.bool,\n  onChange: PropTypes.func,\n  defaultValue: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default SearchInput;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { FindOnMapButton } from '@morphoto/ui';\nimport { RawImage } from '@morphoto/photos';\nimport { Avatar } from '@material-ui/core';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(0)\n    },\n    imgContainer: {\n      overflow: 'hidden',\n      height: '100%',\n      position: 'relative',\n      borderRadius: 0\n    },\n    findOnMapButtonContainer: {\n      position: 'absolute',\n      opacity: 0.8,\n      bottom: theme.spacing(1),\n      right: theme.spacing(1)\n    },\n    titleContainer: {\n      borderTop: '2px solid #FFFFFF99',\n      background: '#444444AA',\n      textShadow: '1px 1px 10px black',\n      color: 'white',\n      position: 'absolute',\n      alignItems: 'center',\n      display: 'flex',\n      top: 0,\n      width: '100%',\n      paddingRight: theme.spacing(1)\n    },\n    avatar: {\n      border: '1px solid white',\n      margin: theme.spacing(0, 1)\n    },\n    title: {\n      flex: '1 1 50%',\n      overflow: 'hidden'\n    },\n    seriesName: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    img: {},\n    gravatarImg: {\n      width: '100%'\n    }\n  };\n});\nvar EVENT_VERBS = {\n  DELETE: 'Deleted',\n  ADD: 'Added'\n};\n\nvar FeedItem = function FeedItem(_ref) {\n  var event = _ref.event,\n      actions = _ref.actions;\n  var series = event.series,\n      photo = event.photo;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Paper, {\n    className: classes.imgContainer\n  }, React.createElement(RawImage, {\n    photo: photo,\n    sizePriority: ['medium', 'large', 'thumb'],\n    cover: true,\n    className: classes.img,\n    onClick: function onClick() {\n      return actions.onImageClick(series.id, photo.id);\n    }\n  }), React.createElement(\"div\", {\n    className: classes.titleContainer\n  }, React.createElement(Avatar, {\n    onClick: function onClick() {\n      return actions.onProfileClick(photo.createdUser.username);\n    },\n    className: classes.avatar\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: photo.createdUser.gravatar\n  })), React.createElement(\"div\", {\n    className: classes.title\n  }, React.createElement(Typography, {\n    className: classes.seriesName,\n    variant: \"body1\",\n    color: \"inherit\"\n  }, series.name), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, photo.createdUser.username, \" \", EVENT_VERBS.ADD, \" a photo\"), React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.updatedOn))), React.createElement(FindOnMapButton, {\n    onClick: function onClick() {\n      return actions.onMapClick(series.id, photo.id);\n    }\n  }))));\n};\n\nFeedItem.propTypes = {\n  event: PropTypes.object.isRequired,\n  actions: PropTypes.shape({\n    onImageClick: PropTypes.func.isRequired,\n    onProfileClick: PropTypes.func.isRequired,\n    onMapClick: PropTypes.func.isRequired\n  })\n};\nexport default FeedItem;\nexport var FeedItemCosmos = function FeedItemCosmos(props) {\n  return React.createElement(\"div\", null, React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props));\n};\nFeedItemCosmos.propTypes = {\n  event: PropTypes.object.isRequired\n};","export default require('./Search').default;\nexport { default as SearchInput } from './SearchInput';","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.randomObjectElement = exports.randomArrayEl = exports.filledArray = exports.randomMap = exports.randomChance = exports.randomFloat = exports.randomInt = void 0;\n\nvar _random = _interopRequireDefault(require(\"lodash/random\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar randomInt = function randomInt(min, max) {\n  return (0, _random[\"default\"])(min, max);\n};\n\nexports.randomInt = randomInt;\n\nvar randomFloat = function randomFloat(min, max) {\n  return (0, _random[\"default\"])(min, max, true);\n};\n\nexports.randomFloat = randomFloat;\n\nvar randomChance = function randomChance(chance, inTimes) {\n  return (0, _random[\"default\"])(0, inTimes) <= chance;\n};\n\nexports.randomChance = randomChance;\n\nvar randomMap = function randomMap(low, high, func) {\n  return filledArray((0, _random[\"default\"])(low, high), null).map(func);\n};\n\nexports.randomMap = randomMap;\n\nvar filledArray = function filledArray(num) {\n  var fillval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return _toConsumableArray(Array(num).keys()).map(function () {\n    return fillval;\n  });\n};\n\nexports.filledArray = filledArray;\n\nvar randomArrayEl = function randomArrayEl(arr) {\n  return !arr || arr.length === 0 ? null : arr[(0, _random[\"default\"])(0, arr.length - 1)];\n};\n\nexports.randomArrayEl = randomArrayEl;\n\nvar randomObjectElement = function randomObjectElement(obj) {\n  var key = randomArrayEl(Object.keys(obj));\n  return [key, obj[key]];\n};\n\nexports.randomObjectElement = randomObjectElement;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { getWholeSeriesUpdate, allSeriesUpdate, feedUpdate, userSeriesUpdate } from './updateQueries';\nimport { createSeries, newSeriesKeys, newPhotoKeys } from '../mutations';\nimport { photoSummaryKeys } from '../fragments';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nimport { allSeries, userSeries, getMyFeed } from '../queries';\nimport _ from 'lodash';\nexport var withMutation = graphql(createSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      createSeriesMutation: function () {\n        var _createSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(newSeries, newPhoto, ext) {\n          var _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                  meUserSummary = {\n                    id: id,\n                    gravatar: gravatar,\n                    gravatarProfile: gravatarProfile,\n                    username: username,\n                    __typename: 'UserSummary'\n                  };\n                  if (!newSeries.access) newSeries.access = 'PRIVATE';\n                  variables = {\n                    series: _.pick(newSeries, newSeriesKeys),\n                    photo: _.pick(newPhoto, newPhotoKeys),\n                    ext: ext\n                  };\n                  optimisticResponse = createOptimisticResponse({\n                    meUserSummary: meUserSummary,\n                    newSeries: newSeries,\n                    newPhoto: newPhoto,\n                    ext: ext\n                  });\n                  _context.next = 7;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, createSeries);\n\n                case 7:\n                  mutationStackId = _context.sent;\n                  console.log('createSeriesMutation:: start', {\n                    newSeries: newSeries,\n                    newPhoto: newPhoto,\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    ext: ext\n                  });\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    refetchQueries: [{\n                      query: allSeries,\n                      variables: {\n                        limit: 100\n                      }\n                    }, {\n                      query: userSeries\n                    }, {\n                      query: getMyFeed\n                    }],\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({}, ownProps.doneCreatingSeries)\n                  }).then(function (data) {\n                    console.log('createSeriesMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function createSeriesMutation(_x, _x2, _x3) {\n          return _createSeriesMutation.apply(this, arguments);\n        }\n\n        return createSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('createSeriesMutation::updateThunk', {\n      data: data\n    });\n    getWholeSeriesUpdate(store, data.createSeries.series);\n    userSeriesUpdate(store, data.createSeries.series);\n    allSeriesUpdate(store, data.createSeries.series);\n    feedUpdate(store, data.createSeries.series, data.createSeries.series.photos[0]);\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nvar createOptimisticResponse = function createOptimisticResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      newSeries = _ref3.newSeries,\n      newPhoto = _ref3.newPhoto,\n      ext = _ref3.ext;\n  var photoResponse = {\n    id: newPhoto.id,\n    meta: newPhoto.meta || null,\n    seriesId: newSeries.id,\n    createdOn: Date.now().toString(),\n    note: newPhoto.note || null,\n    createdUser: meUserSummary,\n    updatedUser: meUserSummary,\n    createdBy: meUserSummary.id,\n    updatedBy: meUserSummary.id,\n    uploadToken: newPhoto.uploadToken,\n    updatedOn: Date.now().toString(),\n    seriesCreatedBy: meUserSummary.id,\n    takenOn: newPhoto.takenOn,\n    coords: newPhoto.coords || null,\n    tags: newPhoto.tags || [],\n    paths: {\n      base: null,\n      large: null,\n      orig: null,\n      thumb: null,\n      medium: null,\n      __typename: 'Paths'\n    },\n    __typename: 'Photo'\n  };\n\n  var photoResponseSummary = _.pick(photoResponse, photoSummaryKeys);\n\n  return {\n    createSeries: {\n      series: {\n        id: newSeries.id,\n        name: newSeries.name,\n        note: newSeries.note || null,\n        access: newSeries.access,\n        meta: newSeries.meta || null,\n        featured: _objectSpread({}, photoResponseSummary, {\n          __typename: 'PhotoSummary'\n        }),\n        latest: _objectSpread({}, photoResponseSummary, {\n          __typename: 'PhotoSummary'\n        }),\n        seriesStatus: null,\n        coords: newSeries.coords || null,\n        direction: newSeries.direction || null,\n        photoCount: 1,\n        createdUser: meUserSummary,\n        updatedUser: meUserSummary,\n        createdBy: meUserSummary.id,\n        updatedBy: meUserSummary.id,\n        createdOn: Date.now().toString(),\n        updatedOn: Date.now().toString(),\n        watchers: 0,\n        photos: [photoResponse],\n        __typename: 'Series'\n      },\n      preAuth: null,\n      __typename: 'NewSeries'\n    }\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport var actionMaker = function actionMaker(actionArr, useConsole) {\n  return actionArr.reduce(function (acc, acStr) {\n    return _objectSpread({}, acc, _defineProperty({}, acStr, useConsole ? function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return console.log(acStr, args);\n    } : function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return alert(\"\".concat(acStr, \"::\") + JSON.stringify(args, null, 2));\n    }));\n  }, {});\n};\nexport var fakeGlobalActions = _objectSpread({}, actionMaker(['onQRButtonClick']), {}, actionMaker(['signOut', 'forceSignIn', 'addToHomeScreen', 'setHomeState', 'onCameraClick', 'onLibraryClick', 'onOfflineMenuClick', 'onSettingsClick', 'resetAllState', 'resetApp', 'dismissInstall', 'setUseOffline', 'onQRButtonClick', 'onMenuBack', 'onAvatarClick', 'onQRCapture'], true));","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { createHttpLink } from 'apollo-link-http';\nimport { setContext } from 'apollo-link-context';\nimport { RetryLink } from 'apollo-link-retry';\nimport { config } from '@morphoto/client-common';\nimport Auth from '@aws-amplify/auth';\nimport { ApolloLink } from 'apollo-link';\nimport { stateStore, restoreRequests } from './offline';\nimport { InMemoryCache, ApolloClient } from 'apollo-boost';\nimport { persistCache } from 'apollo-cache-persist';\nvar endpoints = config.endpoints;\nvar LOCAL_STORAGE_TOKEN = 'apollo-token';\nexport var APOLLOSTATES = {\n  INITIALIZING: 'Initializing',\n  AUTHENTICATING: 'Authenticating',\n  LOADING: 'Loading State',\n  APPLY_MUTATIONS: 'Applying history',\n  ERROR: 'ERROR!',\n  DONE: 'DONE'\n};\n\nfunction useGraphQL() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      client = _useState2[0],\n      setClient = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      done = _useState4[0],\n      setDone = _useState4[1];\n\n  var _useState5 = useState(APOLLOSTATES.INITIALIZING),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currState = _useState6[0],\n      setCurrState = _useState6[1];\n\n  useEffect(function () {\n    createApolloClient(function (newClient, newState) {\n      setClient(newClient);\n      setDone((client || newClient) && newState === APOLLOSTATES.DONE);\n      setCurrState(newState);\n    });\n  }, []);\n  return {\n    client: client,\n    done: done,\n    currState: currState\n  };\n}\n\nexport default useGraphQL;\n\nvar getCurrentToken =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var currSession;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return Auth.currentSession();\n\n          case 3:\n            currSession = _context.sent;\n            return _context.abrupt(\"return\", currSession.accessToken.jwtToken);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", null);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n\n  return function getCurrentToken() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction createApolloClient(_x) {\n  return _createApolloClient.apply(this, arguments);\n}\n\nfunction _createApolloClient() {\n  _createApolloClient = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(onChange) {\n    var cache, authLink, httpLink, retry, apolloClient;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            cache = new InMemoryCache({});\n            _context3.prev = 1;\n            onChange(null, APOLLOSTATES.LOADING);\n            _context3.next = 5;\n            return persistCache({\n              cache: cache,\n              storage: stateStore\n            });\n\n          case 5:\n            _context3.next = 12;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](1);\n            console.error('Error restoring Apollo cache', _context3.t0);\n            onChange(null, APOLLOSTATES.ERROR);\n            return _context3.abrupt(\"return\");\n\n          case 12:\n            authLink = setContext(\n            /*#__PURE__*/\n            function () {\n              var _ref3 = _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee2(_, _ref2) {\n                var headers, token, newHeaders;\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        headers = _ref2.headers;\n                        _context2.next = 3;\n                        return getCurrentToken();\n\n                      case 3:\n                        token = _context2.sent;\n                        newHeaders = _objectSpread({}, headers, {\n                          authorization: token ? \"Bearer \".concat(token) : ''\n                        });\n\n                        if (token && process.env.NODE_ENV === 'development' && process.env.REACT_APP_FAKE_USER) {\n                          newHeaders.auth_user = process.env.REACT_APP_FAKE_USER;\n                        }\n\n                        return _context2.abrupt(\"return\", {\n                          headers: newHeaders\n                        });\n\n                      case 7:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x2, _x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n            httpLink = createHttpLink({\n              uri: endpoints.graphql\n            });\n            retry = new RetryLink({\n              attempts: {\n                max: Infinity,\n                retryIf: function retryIf(error, _operation) {\n                  console.log('GRAPHQL ERRORS', {\n                    error: error,\n                    _operation: _operation\n                  });\n                  return true;\n                }\n              }\n            });\n            apolloClient = new ApolloClient({\n              link: ApolloLink.from([retry, authLink, httpLink]),\n              tokenName: LOCAL_STORAGE_TOKEN,\n              addTypename: true,\n              cache: cache,\n              connectToDevTools: process.env.NODE_ENV === 'development'\n            });\n            onChange(null, APOLLOSTATES.APPLY_MUTATIONS);\n            _context3.next = 19;\n            return restoreRequests(apolloClient);\n\n          case 19:\n            onChange(apolloClient, APOLLOSTATES.DONE);\n\n          case 20:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[1, 7]]);\n  }));\n  return _createApolloClient.apply(this, arguments);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _default = {\n  admin: {\n    series: {\n      'create:own': ['*'],\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    },\n    photo: {\n      'create:any': ['*'],\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    }\n  },\n  nonuser: {\n    photo: {\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    },\n    series_public: {\n      'read:any': ['*']\n    },\n    series_open: {\n      'read:any': ['*']\n    }\n  },\n  user: {\n    series: {\n      'create:own': ['*'],\n      'read:own': ['*'],\n      'update:own': ['*'],\n      'delete:own': ['*']\n    },\n    series_public: {\n      'read:any': ['*']\n    },\n    series_open: {\n      'read:any': ['*'],\n      'update:any': ['photos']\n    },\n    photo: {\n      'read:any': ['*'],\n      'create:own': ['*'],\n      'update:own': ['*'],\n      'delete:own': ['*']\n    }\n  }\n};\nexports[\"default\"] = _default;","export default {\n  '@global': {\n    '.mapboxgl-map': {\n      font: '12px/20px \\'Helvetica Neue\\', Arial, Helvetica, sans-serif',\n      overflow: 'hidden',\n      position: 'relative',\n      W: 'rgba(0, 0, 0, 0)'\n    },\n    '.mapboxgl-map:-webkit-full-screen': {\n      width: '100%',\n      height: '100%'\n    },\n    '.mapboxgl-canary': {\n      backgroundColor: 'salmon'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-interactive, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass': {\n      cursor: 'grab',\n      fallbacks: [{\n        M: 'none'\n      }, {\n        cursor: '-moz-grab'\n      }, {\n        cursor: '-webkit-grab'\n      }],\n      M: 'none',\n      W: 'none',\n      userSelect: 'none'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-interactive:active, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass:active': {\n      cursor: 'grabbing',\n      fallbacks: [{\n        cursor: '-moz-grabbing'\n      }, {\n        cursor: '-webkit-grabbing'\n      }]\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas': {\n      touchAction: 'pan-x pan-y'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas': {\n      touchAction: 'pinch-zoom'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas': {\n      touchAction: 'none'\n    },\n    '.mapboxgl-ctrl-top-left, .mapboxgl-ctrl-top-right, .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right': {\n      position: 'absolute',\n      pointerEvents: 'none',\n      zIndex: '2'\n    },\n    '.mapboxgl-ctrl-top-left': {\n      top: '0',\n      left: '0'\n    },\n    '.mapboxgl-ctrl-top-right': {\n      top: '0',\n      right: '0'\n    },\n    '.mapboxgl-ctrl-bottom-left': {\n      bottom: '0',\n      left: '0'\n    },\n    '.mapboxgl-ctrl-bottom-right': {\n      right: '0',\n      bottom: '0'\n    },\n    '.mapboxgl-ctrl': {\n      clear: 'both',\n      pointerEvents: 'auto',\n      transform: 'translate(0, 0)'\n    },\n    '.mapboxgl-ctrl-top-left .mapboxgl-ctrl': {\n      margin: '10px 0 0 10px',\n      float: 'left'\n    },\n    '.mapboxgl-ctrl-top-right .mapboxgl-ctrl': {\n      margin: '10px 10px 0 0',\n      float: 'right'\n    },\n    '.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl': {\n      margin: '0 0 10px 10px',\n      float: 'left'\n    },\n    '.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl': {\n      margin: '0 10px 10px 0',\n      float: 'right'\n    },\n    '.mapboxgl-ctrl-group': {\n      borderRadius: 4,\n      overflow: 'hidden',\n      background: '#fff'\n    },\n    '.mapboxgl-ctrl-group:not(:empty)': {\n      M: '0 0 2px rgba(0, 0, 0, 0.1)',\n      W: '0 0 2px rgba(0, 0, 0, 0.1)',\n      boxShadow: '0 0 0 2px rgba(0, 0, 0, 0.1)'\n    },\n    '.mapboxgl-ctrl-group > button': {\n      width: 30,\n      height: 30,\n      display: 'block',\n      padding: '0',\n      outline: 'none',\n      border: '0',\n      boxSizing: 'border-box',\n      backgroundColor: 'transparent',\n      cursor: 'pointer'\n    },\n    '.mapboxgl-ctrl-group > button + button': {\n      borderTop: '1px solid #ddd'\n    },\n    '.mapboxgl-ctrl > button::-moz-focus-inner': {\n      border: '0',\n      padding: '0'\n    },\n    '.mapboxgl-ctrl > button:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)'\n    },\n    '.mapboxgl-ctrl-icon, .mapboxgl-ctrl-icon > .mapboxgl-ctrl-compass-arrow': {\n      speak: 'none',\n      W: 'antialiased',\n      M: 'grayscale'\n    },\n    '.mapboxgl-ctrl-icon': {\n      padding: 5\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-icon-disabled': {\n      opacity: '0.25',\n      borderColor: '#373737'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23333333;\\' d=\\'m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23333333;\\' d=\\'M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23333\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23aaa\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%2333b5e5\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23e58978\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%2333b5e5\\'%3E %3Cpath d=\\'M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23e54e33\\'%3E %3Cpath d=\\'M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting': {\n      W: 'mapboxgl-spin 2s infinite linear',\n      M: 'mapboxgl-spin 2s infinite linear',\n      O: 'mapboxgl-spin 2s infinite linear',\n      fallbacks: [{\n        M: 'mapboxgl-spin 2s infinite linear'\n      }],\n      animation: 'mapboxgl-spin 2s infinite linear'\n    },\n    '@keyframes mapboxgl-spin': {\n      '0%': {\n        W: 'rotate(0deg)',\n        M: 'rotate(0deg)',\n        O: 'rotate(0deg)',\n        transform: 'rotate(0deg)'\n      },\n      '100%': {\n        W: 'rotate(360deg)',\n        M: 'rotate(360deg)',\n        O: 'rotate(360deg)',\n        transform: 'rotate(360deg)'\n      }\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath d=\\'M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z \\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23000000;\\' d=\\'M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z \\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass > .mapboxgl-ctrl-compass-arrow': {\n      width: 20,\n      height: 20,\n      margin: 5,\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpolygon fill=\\'%23333333\\' points=\\'6,9 10,1 14,9\\'/%3E %3Cpolygon fill=\\'%23CCCCCC\\' points=\\'6,11 10,19 14,11 \\'/%3E %3C/svg%3E\")',\n      backgroundRepeat: 'no-repeat',\n      display: 'inline-block'\n    },\n    'a.mapboxgl-ctrl-logo': {\n      width: 85,\n      height: 21,\n      margin: '0 0 -3px -3px',\n      display: 'block',\n      backgroundRepeat: 'no-repeat',\n      cursor: 'pointer',\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3C?xml version=\\'1.0\\' encoding=\\'utf-8\\'?%3E%3Csvg version=\\'1.1\\' id=\\'Layer_1\\' xmlns=\\'http://www.w3.org/2000/svg\\' xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' x=\\'0px\\' y=\\'0px\\' viewBox=\\'0 0 84.49 21\\' style=\\'enable-background:new 0 0 84.49 21;\\' xml:space=\\'preserve\\'%3E%3Cg%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z\\'/%3E %3Cpolygon class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' points=\\'14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 \\'/%3E%3C/g%3E%3C/svg%3E\")'\n    },\n    'a.mapboxgl-ctrl-logo.mapboxgl-compact': {\n      width: 21,\n      height: 21,\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3C?xml version=\\'1.0\\' encoding=\\'utf-8\\'?%3E %3Csvg version=\\'1.1\\' id=\\'Layer_1\\' xmlns=\\'http://www.w3.org/2000/svg\\' xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' x=\\'0px\\' y=\\'0px\\' viewBox=\\'0 0 21 21\\' style=\\'enable-background:new 0 0 21 21;\\' xml:space=\\'preserve\\'%3E%3Cg transform=\\'translate(0,0.01)\\'%3E%3Cpath d=\\'m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z\\' style=\\'opacity:0.9',\n      fill: '%23ffffff',\n      enableBackground: 'new\\' class=\\'st0\\'/%3E%3C/g%3E%3C/svg%3E\")',\n      fallbacks: [{\n        enableBackground: 'new\\' class=\\'st1\\'/%3E%3Cpolygon points=\\'11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 \\' style=\\'opacity:0.9'\n      }, {\n        fill: '%23ffffff'\n      }, {\n        enableBackground: 'new\\' class=\\'st1\\'/%3E%3Cpath d=\\'M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z\\' style=\\'opacity:0.35'\n      }, {\n        enableBackground: 'new\\' class=\\'st0\\'/%3E%3Cpath d=\\'M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z\\' style=\\'opacity:0.35'\n      }]\n    },\n    '.mapboxgl-ctrl.mapboxgl-ctrl-attrib': {\n      padding: '0 5px',\n      backgroundColor: 'rgba(255, 255, 255, 0.5)',\n      margin: '0'\n    },\n    '@media screen': {\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact': {\n        minHeight: 20,\n        padding: '0',\n        margin: 10,\n        position: 'relative',\n        backgroundColor: '#fff',\n        borderRadius: '3px 12px 12px 3px'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact:hover': {\n        padding: '2px 24px 2px 4px',\n        visibility: 'visible',\n        marginTop: 6\n      },\n      '.mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover, .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover': {\n        padding: '2px 4px 2px 24px',\n        borderRadius: '12px 3px 3px 12px'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner': {\n        display: 'none'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner': {\n        display: 'block'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        content: '\\'\\'',\n        cursor: 'pointer',\n        position: 'absolute',\n        backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath fill=\\'%23333333\\' fill-rule=\\'evenodd\\' d=\\'M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0\\'/%3E %3C/svg%3E\")',\n        backgroundColor: 'rgba(255, 255, 255, 0.5)',\n        width: 24,\n        height: 24,\n        boxSizing: 'border-box',\n        borderRadius: 12\n      },\n      '.mapboxgl-ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        bottom: '0',\n        right: '0'\n      },\n      '.mapboxgl-ctrl-top-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        top: '0',\n        right: '0'\n      },\n      '.mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        top: '0',\n        left: '0'\n      },\n      '.mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        bottom: '0',\n        left: '0'\n      }\n    },\n    '.mapboxgl-ctrl-attrib a': {\n      color: 'rgba(0, 0, 0, 0.75)',\n      textDecoration: 'none'\n    },\n    '.mapboxgl-ctrl-attrib a:hover': {\n      color: 'inherit',\n      textDecoration: 'underline'\n    },\n    '.mapboxgl-ctrl-attrib .mapbox-improve-map': {\n      fontWeight: 'bold',\n      marginLeft: 2\n    },\n    '.mapboxgl-attrib-empty': {\n      display: 'none'\n    },\n    '.mapboxgl-ctrl-scale': {\n      backgroundColor: 'rgba(255, 255, 255, 0.75)',\n      fontSize: 10,\n      borderWidth: 'medium 2px 2px',\n      borderStyle: 'none solid solid',\n      borderColor: '#333',\n      padding: '0 5px',\n      color: '#333',\n      boxSizing: 'border-box'\n    },\n    '.mapboxgl-popup': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-flex'\n      }],\n      willChange: 'transform',\n      pointerEvents: 'none'\n    },\n    '.mapboxgl-popup-anchor-top, .mapboxgl-popup-anchor-top-left, .mapboxgl-popup-anchor-top-right': {\n      W: 'column',\n      flexDirection: 'column'\n    },\n    '.mapboxgl-popup-anchor-bottom, .mapboxgl-popup-anchor-bottom-left, .mapboxgl-popup-anchor-bottom-right': {\n      W: 'column-reverse',\n      flexDirection: 'column-reverse'\n    },\n    '.mapboxgl-popup-anchor-left': {\n      W: 'row',\n      flexDirection: 'row'\n    },\n    '.mapboxgl-popup-anchor-right': {\n      W: 'row-reverse',\n      flexDirection: 'row-reverse'\n    },\n    '.mapboxgl-popup-tip': {\n      width: '0',\n      height: '0',\n      border: '10px solid transparent',\n      zIndex: '1'\n    },\n    '.mapboxgl-popup-anchor-top .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderTop: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip': {\n      W: 'flex-start',\n      alignSelf: 'flex-start',\n      borderTop: 'none',\n      borderLeft: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip': {\n      W: 'flex-end',\n      alignSelf: 'flex-end',\n      borderTop: 'none',\n      borderRight: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderBottom: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip': {\n      W: 'flex-start',\n      alignSelf: 'flex-start',\n      borderBottom: 'none',\n      borderLeft: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip': {\n      W: 'flex-end',\n      alignSelf: 'flex-end',\n      borderBottom: 'none',\n      borderRight: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-left .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderLeft: 'none',\n      borderRightColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-right .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderRight: 'none',\n      borderLeftColor: '#fff'\n    },\n    '.mapboxgl-popup-close-button': {\n      position: 'absolute',\n      right: '0',\n      top: '0',\n      border: '0',\n      borderRadius: '0 3px 0 0',\n      cursor: 'pointer',\n      backgroundColor: 'transparent'\n    },\n    '.mapboxgl-popup-close-button:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)'\n    },\n    '.mapboxgl-popup-content': {\n      position: 'relative',\n      background: '#fff',\n      borderRadius: 3,\n      boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)',\n      padding: '10px 10px 15px',\n      pointerEvents: 'auto'\n    },\n    '.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content': {\n      borderTopLeftRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content': {\n      borderTopRightRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content': {\n      borderBottomLeftRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content': {\n      borderBottomRightRadius: '0'\n    },\n    '.mapboxgl-marker': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      willChange: 'transform'\n    },\n    '.mapboxgl-user-location-dot': {\n      backgroundColor: '#1da1f2',\n      width: 15,\n      height: 15,\n      borderRadius: '50%',\n      boxShadow: '0 0 2px rgba(0, 0, 0, 0.25)'\n    },\n    '.mapboxgl-user-location-dot::before': {\n      backgroundColor: '#1da1f2',\n      content: '\\'\\'',\n      width: 15,\n      height: 15,\n      borderRadius: '50%',\n      position: 'absolute',\n      W: 'mapboxgl-user-location-dot-pulse 2s infinite',\n      M: 'mapboxgl-user-location-dot-pulse 2s infinite',\n      fallbacks: [{\n        M: 'mapboxgl-user-location-dot-pulse 2s infinite'\n      }],\n      animation: 'mapboxgl-user-location-dot-pulse 2s infinite'\n    },\n    '.mapboxgl-user-location-dot::after': {\n      borderRadius: '50%',\n      border: '2px solid #fff',\n      content: '\\'\\'',\n      height: 19,\n      left: -2,\n      position: 'absolute',\n      top: -2,\n      width: 19,\n      boxSizing: 'border-box'\n    },\n    '@keyframes mapboxgl-user-location-dot-pulse': {\n      '0%': {\n        W: 'scale(1)',\n        opacity: '1',\n        M: 'scale(1)',\n        transform: 'scale(1)'\n      },\n      '70%': {\n        W: 'scale(3)',\n        opacity: '0',\n        M: 'scale(3)',\n        transform: 'scale(3)'\n      },\n      '100%': {\n        W: 'scale(1)',\n        opacity: '0',\n        M: 'scale(1)',\n        transform: 'scale(1)'\n      }\n    },\n    '.mapboxgl-user-location-dot-stale': {\n      backgroundColor: '#aaa'\n    },\n    '.mapboxgl-user-location-dot-stale::after': {\n      display: 'none'\n    },\n    '.mapboxgl-crosshair, .mapboxgl-crosshair .mapboxgl-interactive, .mapboxgl-crosshair .mapboxgl-interactive:active': {\n      cursor: 'crosshair'\n    },\n    '.mapboxgl-boxzoom': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '0',\n      height: '0',\n      background: '#fff',\n      border: '2px dotted #202020',\n      opacity: '0.5'\n    },\n    '@media print': {\n      '.mapbox-improve-map': {\n        display: 'none'\n      }\n    }\n  }\n};","export default {\n  '@global': {\n    '@font-face': {\n      fontFamily: '\\'Roboto\\'',\n      fontStyle: 'italic',\n      fontDisplay: 'swap',\n      fontWeight: '900',\n      src: 'local(\\'Roboto Black italic\\'),\\n    local(\\'Roboto-Blackitalic\\'),\\n    url(\\'./files/roboto-latin-900italic.woff2\\') format(\\'woff2\\'), \\n    url(\\'./files/roboto-latin-900italic.woff\\') format(\\'woff\\')',\n      '': undefined\n    }\n  }\n};","export default (function (theme) {\n  return {\n    '@global': {\n      '.mapboxgl-ctrl-group': {\n        position: 'absolute',\n        top: '70px',\n        left: '10px',\n        opacity: '0.8'\n      }\n    },\n    mapContainer: {\n      height: '100%',\n      width: '100%'\n    }\n  };\n});","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"FakeData\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"fakePastDate\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata.fakePastDate;\n  }\n});\nObject.defineProperty(exports, \"randomLocation\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata.randomLocation;\n  }\n});\nexports.random = void 0;\n\nvar _fakedata = _interopRequireWildcard(require(\"./fakedata\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nvar random = require('./random');\n\nexports.random = random;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport localforage from 'localforage';\nimport createSeries from './mutations/createSeries';\nimport uuidv4 from 'uuid/v4';\nlocalforage.config({\n  storeName: 'MorPhoto',\n  description: 'image blobs'\n});\nexport var imgStore = localforage.createInstance({\n  name: 'imgStore'\n});\nexport var stateStore = localforage.createInstance({\n  name: 'stateStore'\n});\nvar OFFLINEMUTATIONS = 'offlineMutations';\n\nfunction getPendingPromise() {\n  return stateStore.getItem(OFFLINEMUTATIONS).then(function (mutations) {\n    console.log('offline::getPendingPromise', JSON.parse(mutations) || []);\n    return JSON.parse(mutations) || [];\n  });\n}\n\nfunction setPendingPromise(mutations) {\n  console.log('offline::setPendingPromise', mutations);\n  return stateStore.setItem(OFFLINEMUTATIONS, JSON.stringify(mutations));\n}\n\nexport function pushMutationPromise(params, mutation, context) {\n  var id = uuidv4();\n  return getPendingPromise().then(function (mutations) {\n    return mutations.concat({\n      id: id,\n      params: params,\n      mutation: mutation,\n      context: context\n    });\n  }).then(function (data) {\n    console.log('offline::pushMutationPromise', data);\n    return data;\n  }).then(setPendingPromise).then(function () {\n    return id;\n  });\n}\nexport function popMutationPromise(id) {\n  return getPendingPromise().then(function (mutations) {\n    return mutations.filter(function (pm) {\n      return pm.id !== id;\n    });\n  }).then(function (data) {\n    console.log('offline::popMutationPromise', data);\n    return data;\n  }).then(setPendingPromise);\n}\n\nfunction updateHandler(resp, context) {\n  console.log('offline::updateHandler', {\n    resp: resp,\n    context: context\n  });\n  if (resp.data.createSeries) return createSeries.updateThunk(context);else return function () {};\n}\n\nfunction proxyUpdateForId(id, context) {\n  return function (proxy, resp) {\n    updateHandler(resp, context)(proxy, resp);\n    if (!resp.data.__optimistic) return popMutationPromise(id);else return Promise.resolve();\n  };\n}\n\nexport function restoreRequests(client) {\n  return getPendingPromise().then(\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(mutations) {\n      var idx, pendingMutation, id, params, mutation, context;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              idx = 0;\n\n            case 1:\n              if (!(idx < mutations.length)) {\n                _context.next = 13;\n                break;\n              }\n\n              pendingMutation = mutations[idx];\n              console.log('offline::restoreRequests', mutations, pendingMutation);\n              id = pendingMutation.id, params = pendingMutation.params, mutation = pendingMutation.mutation, context = pendingMutation.context;\n              params.optimisticResponse.__optimistic = true;\n              params.update = proxyUpdateForId(id, context);\n              params.mutation = mutation;\n              _context.next = 10;\n              return client.mutate(params).catch(function (err) {\n                console.error('Error replaying mutation', err);\n              });\n\n            case 10:\n              idx++;\n              _context.next = 1;\n              break;\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PlaceIcon from '@material-ui/icons/Place';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      textAlign: 'center'\n    },\n    placeAvatar: {\n      color: theme.palette.primary.contrastText,\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      background: theme.palette.text.primary,\n      margin: 'auto'\n    },\n    placeIcon: {}\n  };\n});\n\nvar FindOnMapButton = function FindOnMapButton(_ref) {\n  var _onClick = _ref.onClick;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Avatar, {\n    className: classes.placeAvatar\n  }, React.createElement(IconButton, {\n    color: \"inherit\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _onClick();\n    }\n  }, React.createElement(PlaceIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nFindOnMapButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default FindOnMapButton;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { RawSVG } from '@morphoto/icons/dist/AppLogo';\nimport { config } from '@morphoto/client-common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dialogContent: {\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      height: '100%'\n    },\n    iconContainer: {\n      flex: '1 1 10%',\n      textAlign: 'center',\n      padding: theme.spacing(1, 0, 1, 0)\n    },\n    icon: {\n      height: 200,\n      margin: '0 auto',\n      border: \"1px solid \".concat(theme.palette.grey[100]),\n      background: theme.palette.grey[100],\n      borderRadius: '50%',\n      '& path': {\n        fill: 'url(#my-cool-gradient) #447799;'\n      }\n    },\n    title: {\n      textAlign: 'center'\n    },\n    stop1: {\n      stopColor: theme.palette.rose.main\n    },\n    stop2: {\n      stopColor: theme.palette.redorange.main\n    },\n    spacer: {\n      flex: '1 1'\n    },\n    buttonIcon: {\n      marginRight: theme.spacing(1)\n    },\n    scrollText: {\n      flex: '1 1 60%',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar AboutApp = function AboutApp(_ref) {\n  var onClose = _ref.onClose,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    onClose: onClose,\n    fullWidth: true,\n    open: open,\n    PaperProps: {\n      style: {}\n    },\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogContent, {\n    className: classes.dialogContent\n  }, React.createElement(Container, {\n    maxWidth: \"xs\"\n  }, React.createElement(\"div\", {\n    className: classes.iconContainer\n  }, React.createElement(\"svg\", {\n    className: classes.icon,\n    focusable: \"false\",\n    viewBox: \"0 0 24 24\",\n    \"aria-hidden\": \"true\",\n    role: \"presentation\"\n  }, RawSVG), React.createElement(\"svg\", {\n    style: {\n      width: 0,\n      height: 0,\n      position: 'absolute'\n    },\n    \"aria-hidden\": \"true\",\n    focusable: \"false\"\n  }, React.createElement(\"linearGradient\", {\n    id: \"my-cool-gradient\",\n    x2: \"1\",\n    y2: \"1\"\n  }, React.createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: \"#447799\",\n    className: classes.stop1\n  }), React.createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: \"#112266\",\n    className: classes.stop2\n  })))), React.createElement(\"div\", {\n    className: classes.title\n  }, React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\"\n  }, \"MorPhoto\"), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\"\n  }, \"Version:  \", config.version, \" \", React.createElement(\"em\", null, \"BETA\"))), React.createElement(Typography, {\n    className: classes.scrollText,\n    component: \"div\",\n    variant: \"caption\"\n  }), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    fullWidth: true,\n    href: \"mailto:\".concat(config.contact),\n    color: \"primary\",\n    variant: \"outlined\"\n  }, React.createElement(EmailIcon, {\n    className: classes.buttonIcon\n  }), \"Get in touch\"))), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onClose,\n    color: \"inherit\"\n  }, \"Close\")));\n};\n\nAboutApp.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func.isRequired\n};\nexport default AboutApp;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport SettingsBackupRestore from '@material-ui/icons/SettingsBackupRestore';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { AppContext } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    nuclear: {\n      color: 'red'\n    }\n  };\n});\n\nvar AppSettings = function AppSettings(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      deleteOpen = _useState2[0],\n      setDeleteOpen = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions;\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Offline data manager\"))), React.createElement(\"div\", {\n    className: classes.mapWrapper\n  }, React.createElement(List, null, React.createElement(ListItem, {\n    button: true,\n    onClick: function onClick() {\n      return setDeleteOpen({\n        action: globalActions.resetAllState,\n        title: 'Reset App State',\n        message: 'Might resolve a temporary glitch. Unfortunately this will wipe your upload queue.'\n      });\n    }\n  }, React.createElement(ListItemIcon, null, React.createElement(SettingsBackupRestore, null)), React.createElement(ListItemText, {\n    primary: 'Reset app state',\n    secondary: 'Might resolve a temporary glitch.'\n  })), React.createElement(ListItem, {\n    button: true,\n    className: classes.nuclear,\n    onClick: function onClick() {\n      return setDeleteOpen({\n        action: globalActions.resetApp,\n        title: 'RESET ALL LOCAL DATA',\n        message: 'All local images and data will be reset and you will be logged out. BE VERY SURE ABOUT THIS'\n      });\n    }\n  }, React.createElement(ListItemIcon, {\n    color: \"inherit\"\n  }, React.createElement(WarningIcon, {\n    color: \"inherit\"\n  })), React.createElement(ListItemText, {\n    primary: 'RESET ALL LOCAL DATA',\n    secondary: 'All local images and data will be reset and you will be logged out'\n  })))), deleteOpen && React.createElement(DeleteDialog, {\n    open: !!deleteOpen,\n    title: deleteOpen && deleteOpen.title,\n    message: deleteOpen && deleteOpen.message,\n    onConfirm: function onConfirm(confirmed) {\n      if (confirmed) deleteOpen.action();\n      setDeleteOpen(null);\n    }\n  }));\n};\n\nAppSettings.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default AppSettings;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Fab from '@material-ui/core/Fab';\nimport Modal from '@material-ui/core/Modal';\nimport Zoom from '@material-ui/core/Zoom';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  var pulseCol = fade(theme.palette.secondary.light, 0.4);\n  return {\n    root: {},\n    fab: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        borderRadius: 'inherit',\n        boxShadow: \"0 0 0 0 \".concat(pulseCol),\n        animation: '$fabPulse 4s',\n        animationIterationCount: 5,\n        animationTimingFunction: 'linear'\n      }\n    },\n    '@keyframes fabPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '90%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 10px transparent\"\n      }\n    },\n    directionUp: {},\n    actionsClosed: {\n      display: 'none'\n    },\n    modalContainer: {\n      position: 'absolute',\n      bottom: '0%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    subFabContainer: {\n      padding: theme.spacing(2)\n    },\n    subFab: {},\n    subFabIcon: {\n      margin: theme.spacing(1)\n    }\n  };\n});\n\nvar AddFab = function AddFab(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      onCameraClick = _ref.onCameraClick,\n      onLibraryClick = _ref.onLibraryClick;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      down = _useState4[0],\n      setDown = _useState4[1];\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device;\n\n  var timerRef = useRef();\n  var classes = useStyles();\n  var downRef = useRef(down);\n  var elRef = useRef();\n  downRef.current = down;\n  useEffect(function () {\n    return function () {\n      timerRef.current = null;\n      downRef.current = null;\n    };\n  }, []);\n\n  var startTimer = function startTimer(el) {\n    if (device.ios) return;\n    if (!elRef.current) return;\n    setDown(true);\n\n    if (!open && !timerRef.current) {\n      timerRef.current = setTimeout(function () {\n        if (downRef.current) setOpen(true);\n        timerRef.current = null;\n      }, 300);\n    }\n  };\n\n  var onDown = function onDown(e) {\n    startTimer(e.currentTarget);\n  };\n\n  var block = function block(e) {\n    if (e && e.stopPropagation) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  var cameraAction = function cameraAction(e) {\n    setOpen(false);\n    setDown(false);\n    onCameraClick();\n    block(e);\n  };\n\n  var libraryAction = function libraryAction(e) {\n    setOpen(false);\n    setDown(false);\n    onLibraryClick();\n    block(e);\n  };\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.rootContainer, className),\n    ref: elRef\n  }, React.createElement(Fab, {\n    className: classes.fab,\n    onMouseDown: onDown,\n    onTouchStart: onDown,\n    onClick: function onClick(e) {\n      block(e);\n      setDown(false);\n\n      if (!open) {\n        console.log('cameraclick MAIN');\n        onCameraClick();\n      }\n    },\n    disableFocusRipple: true,\n    disableTouchRipple: true,\n    disableRipple: true,\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\"\n  }, children), React.createElement(Modal, {\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    open: open,\n    onClose: function onClose() {\n      return setOpen(false);\n    }\n  }, React.createElement(\"div\", {\n    className: classes.modalContainer\n  }, React.createElement(Zoom, {\n    in: open,\n    timeout: 500,\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: classes.subFabContainer\n  }, React.createElement(Fab, {\n    className: classes.subFab,\n    disableFocusRipple: true,\n    variant: \"extended\",\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\",\n    onClick: function onClick() {\n      setOpen(false);\n      libraryAction();\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    color: \"inherit\",\n    className: classes.subFabIcon\n  }), \"Library\"))), React.createElement(Zoom, {\n    in: open,\n    timeout: 250,\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: classes.subFabContainer\n  }, React.createElement(Fab, {\n    className: classes.subFab,\n    disableFocusRipple: true,\n    variant: \"extended\",\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\",\n    onClick: function onClick() {\n      setOpen(false);\n      cameraAction();\n    }\n  }, React.createElement(AddCameraIcon, {\n    color: \"inherit\",\n    className: classes.subFabIcon\n  }), \"Camera\"))))));\n};\n\nAddFab.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any,\n  onCameraClick: PropTypes.func.isRequired,\n  onLibraryClick: PropTypes.func.isRequired\n};\nexport default AddFab;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\n\nvar ContextMenu = function ContextMenu(_ref) {\n  var anchorEl = _ref.anchorEl,\n      onClose = _ref.onClose,\n      menuItems = _ref.menuItems;\n  return React.createElement(Menu, {\n    anchorEl: anchorEl,\n    open: !!anchorEl,\n    onClose: onClose\n  }, menuItems.map(function (_ref2, idx) {\n    var icon = _ref2.icon,\n        color = _ref2.color,\n        text = _ref2.text,\n        hide = _ref2.hide,\n        disabled = _ref2.disabled,\n        action = _ref2.action,\n        divider = _ref2.divider;\n    var Icon = icon || null;\n    if (hide) return null;\n    if (divider) return React.createElement(Divider, {\n      key: \"contextMenu-\".concat(idx)\n    });\n    return React.createElement(MenuItem, {\n      button: true,\n      key: \"contextMenu-\".concat(idx),\n      disabled: disabled,\n      onClick: function onClick() {\n        onClose();\n        action();\n      }\n    }, Icon && React.createElement(ListItemIcon, null, React.createElement(Icon, {\n      color: disabled ? 'disabled' : color\n    })), React.createElement(ListItemText, {\n      primary: text,\n      primaryTypographyProps: {\n        color: color\n      }\n    }));\n  }));\n};\n\nContextMenu.propTypes = {\n  anchorEl: PropTypes.object,\n  onClose: PropTypes.func,\n  menuItems: PropTypes.arrayOf(PropTypes.shape({\n    text: PropTypes.string,\n    icon: PropTypes.any,\n    divider: PropTypes.any,\n    hide: PropTypes.bool,\n    disabled: PropTypes.bool,\n    color: PropTypes.string,\n    action: PropTypes.func\n  }))\n};\nexport default ContextMenu;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport CameraAltIcon from '@material-ui/icons/CameraAlt';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { useFileInput } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center',\n      color: theme.palette.grey[600],\n      border: \"20px solid \".concat(theme.palette.grey[400])\n    },\n    icon: {\n      color: theme.palette.grey[600],\n      margin: 'auto',\n      flex: '1 1 50%',\n      height: '70%',\n      width: '70%'\n    },\n    button: {\n      margin: theme.spacing(2)\n    }\n  };\n});\n\nvar LibraryFilePicker = function LibraryFilePicker(_ref) {\n  var onLibraryAdd = _ref.onLibraryAdd,\n      onCancel = _ref.onCancel,\n      cameraPicker = _ref.cameraPicker;\n  var classes = useStyles();\n\n  var _useFileInput = useFileInput(onLibraryAdd, cameraPicker),\n      fileClickEl = _useFileInput.fileClickEl,\n      forceClick = _useFileInput.forceClick;\n\n  var cameraWords = 'Library';\n  var PlaceIcon = PhotoLibraryIcon;\n\n  if (cameraPicker) {\n    cameraWords = 'Camera';\n    PlaceIcon = CameraAltIcon;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, fileClickEl, React.createElement(PlaceIcon, {\n    className: classes.icon,\n    color: \"inherit\",\n    onClick: forceClick\n  }), React.createElement(Button, {\n    variant: \"contained\",\n    className: classes.button,\n    color: \"primary\",\n    onClick: forceClick\n  }, \"Import from \", cameraWords), React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.button,\n    color: \"secondary\",\n    onClick: onCancel\n  }, \"Cancel\"));\n};\n\nLibraryFilePicker.propTypes = {\n  onLibraryAdd: PropTypes.func.isRequired,\n  cameraPicker: PropTypes.bool,\n  onCancel: PropTypes.func.isRequired\n};\nexport default LibraryFilePicker;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      position: 'relative',\n      display: 'block',\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        bottom: 0,\n        width: '100%',\n        height: 100,\n        background: \"linear-gradient(180deg, rgba(255,255,255,0) 0%, \".concat(theme.palette.background.paper, \" 100%)\")\n      },\n      placeholder: {\n        color: theme.palette.text.secondary\n      }\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ShortLongText = function ShortLongText(_ref) {\n  var label = _ref.label,\n      text = _ref.text,\n      height = _ref.height,\n      onClick = _ref.onClick,\n      placeholder = _ref.placeholder;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    onClick: onClick\n  }, label && React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, label), !text && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\",\n    color: \"inherit\",\n    style: {\n      height: height\n    },\n    className: classNames(classes.placeholder)\n  }, placeholder || 'none'), text && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"body1\",\n    color: \"inherit\",\n    style: {\n      height: height\n    },\n    className: classNames(classes.root)\n  }, text));\n};\n\nShortLongText.propTypes = {\n  label: PropTypes.string,\n  text: PropTypes.string,\n  placeholder: PropTypes.string,\n  height: PropTypes.number,\n  onClick: PropTypes.func\n};\nShortLongText.defaultProps = {\n  height: 100\n};\nexport default ShortLongText;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar useNewImageMenu = function useNewImageMenu(cameraClick, libraryClick) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      menuEl = _useState2[0],\n      setMenuEl = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      series = _useState4[0],\n      setSeries = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      down = _useState6[0],\n      setDown = _useState6[1];\n\n  var downRef = useRef(down);\n  downRef.current = down;\n\n  var startTimer = function startTimer(el) {\n    setDown(true);\n    setTimeout(function () {\n      if (downRef && downRef.current) setMenuEl(el);\n    }, 300);\n  };\n\n  var onDownThunk = function onDownThunk(series) {\n    return function (e) {\n      setSeries(series);\n      startTimer(e.currentTarget);\n    };\n  };\n\n  var onUpThunk = function onUpThunk(series) {\n    return function (e) {\n      setSeries(series);\n      setDown(false);\n      cameraClick(series);\n    };\n  };\n\n  var onCamera = function onCamera(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    cameraClick(series);\n    setMenuEl(null);\n  };\n\n  var onLibrary = function onLibrary(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    libraryClick(series);\n    setMenuEl(null);\n  };\n\n  var onClose = function onClose(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    setMenuEl(null);\n  };\n\n  var onBlock = function onBlock(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  return {\n    onDownThunk: onDownThunk,\n    onUpThunk: onUpThunk,\n    onBlock: onBlock,\n    menu: React.createElement(CameraPopup, {\n      menuEl: menuEl,\n      onCamera: onCamera,\n      onLibrary: onLibrary,\n      onClose: onClose\n    })\n  };\n};\n\nexport default useNewImageMenu;\n\nvar CameraPopupUnstyled = function CameraPopupUnstyled(_ref) {\n  var menuEl = _ref.menuEl,\n      onCamera = _ref.onCamera,\n      onLibrary = _ref.onLibrary,\n      onClose = _ref.onClose;\n  var classes = useStyles();\n  return React.createElement(Menu, {\n    id: \"simple-menu\",\n    anchorEl: menuEl,\n    open: Boolean(menuEl),\n    className: classes.root,\n    onClose: onClose\n  }, React.createElement(MenuItem, {\n    onMouseUp: onCamera,\n    onTouchEnd: onCamera\n  }, React.createElement(AddCameraIcon, null), \"Add from camera\"), React.createElement(MenuItem, {\n    onMouseUp: onLibrary,\n    onTouchEnd: onLibrary\n  }, React.createElement(PhotoLibraryIcon, null), \" Add from Library\"));\n};\n\nCameraPopupUnstyled.propTypes = {\n  menuEl: PropTypes.object,\n  onCamera: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onLibrary: PropTypes.func.isRequired\n};\n\nvar style = function style(theme) {\n  return {\n    root: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\nexport var CameraPopup = CameraPopupUnstyled;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      background: 'black',\n      color: theme.palette.primary.contrastText,\n      padding: theme.spacing(1) * 2\n    },\n    message: {},\n    msgText: {\n      display: 'flex'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    messageInner: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar UploadControlUnstyled = function UploadControlUnstyled(_ref) {\n  var className = _ref.className,\n      text = _ref.text,\n      progress = _ref.progress;\n  var classes = useStyles();\n  if (!text) return null;\n  var message = \"Uploading: \".concat(text);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(\"div\", {\n    className: classes.messageInner\n  }, React.createElement(\"div\", {\n    className: classes.msgText\n  }, React.createElement(Typography, {\n    color: \"inherit\"\n  }, message), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Typography, {\n    color: \"inherit\"\n  }, progress, \"%\")), React.createElement(LinearProgress, {\n    color: \"secondary\",\n    variant: \"determinate\",\n    value: progress\n  })));\n};\n\nUploadControlUnstyled.propTypes = {\n  className: PropTypes.string,\n  text: PropTypes.string,\n  progress: PropTypes.number\n};\nvar UploadControl = UploadControlUnstyled;\nexport default UploadControl;\nexport var UploadControlCOSMOSWrapper = function UploadControlCOSMOSWrapper(_ref2) {\n  var text = _ref2.text,\n      progress = _ref2.progress;\n  var classes = useWrapperStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(Paper, {\n    className: classes.paper\n  }, React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"This is a dummy component.\")), React.createElement(UploadControl, {\n    text: text,\n    progress: progress\n  }));\n};\nUploadControlCOSMOSWrapper.propTypes = {\n  text: PropTypes.string,\n  progress: PropTypes.number\n};\n\nvar wrapperStyle = function wrapperStyle(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    paper: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useWrapperStyles = makeStyles(wrapperStyle);\nUploadControlCOSMOSWrapper.displayName = UploadControl.displayName;\nexport var UploadControlTest = UploadControlCOSMOSWrapper;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { TextField, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    rootEdit: {},\n    formControl: {\n      width: '100%'\n    },\n    textBody: {\n      whiteSpace: 'pre-line'\n    },\n    actionButtons: {\n      textAlign: 'right'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar DateControl = function DateControl(_ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      hint = _ref.hint,\n      _onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, label), React.createElement(TextField, {\n    type: \"datetime-local\",\n    fullWidth: true,\n    value: dates.timestampToHTML5Input(value),\n    className: classes.textField,\n    onChange: function onChange(e) {\n      return _onChange(dates.HTML5InputToTimestamp(e.target.value));\n    }\n  }), hint && React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.hint\n  }, hint));\n};\n\nDateControl.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  hint: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func.isRequired\n};\nexport default DateControl;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    rootEdit: {},\n    formControl: {\n      width: '100%'\n    },\n    textBody: {\n      whiteSpace: 'pre-line'\n    },\n    actionButtons: {\n      textAlign: 'right'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar DateView = function DateView(_ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      className = _ref.className;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, label), React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.hint\n  }, value ? dates.formatDate(value) : ''));\n};\n\nDateView.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string\n};\nexport default DateView;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport TextField from '@material-ui/core/TextField';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\nexport var ERROR_SEND_STATES = {\n  UNSENT: 'UNSENT',\n  SENDING: 'SENDING',\n  SENT: 'SENT',\n  ERROR: 'ERROR'\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n      padding: theme.spacing(1),\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center',\n      color: theme.palette.text.primary,\n      border: \"20px solid \".concat(theme.palette.text.secondary)\n    },\n    button: {},\n    icon: {\n      opacity: 0.5,\n      margin: 'auto',\n      flex: '0 1 10%',\n      width: '50%'\n    },\n    text: {},\n    spacer: {\n      flexGrow: 1\n    },\n    stack: {\n      padding: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n      fontSize: '8px',\n      flexGrow: 1,\n      textAlign: 'left',\n      whiteSpace: 'pre-wrap',\n      overflow: 'scroll',\n      color: theme.palette.error.main,\n      fontFamily: 'Consolas, monaco, monospace'\n    }\n  };\n});\n\nvar ErrorScreen = function ErrorScreen(_ref) {\n  var error = _ref.error,\n      sendState = _ref.sendState,\n      reportError = _ref.reportError;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dlgOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions;\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      note = _useState4[0],\n      setNote = _useState4[1];\n\n  console.log('ERRORCOJNTEXT', {\n    reportError: reportError\n  });\n  var stackEl = React.createElement(\"div\", {\n    className: classes.spacer\n  });\n\n  try {\n    if (process.env.NODE_ENV === 'development') {\n      stackEl = React.createElement(Typography, {\n        className: classes.stack\n      }, error.stack);\n    }\n  } catch (e) {}\n\n  var buttonText = 'Report this bug';\n  var disabled = false;\n  var color = 'primary';\n\n  switch (sendState) {\n    case ERROR_SEND_STATES.UNSENT:\n      buttonText = 'Report this bug';\n      break;\n\n    case ERROR_SEND_STATES.SENDING:\n      disabled = true;\n      color = 'default';\n      buttonText = 'Sending...';\n      break;\n\n    case ERROR_SEND_STATES.SENT:\n      color = 'default';\n      disabled = true;\n      buttonText = 'Thank you for your feedback';\n      break;\n\n    case ERROR_SEND_STATES.ERROR:\n      color = 'secondary';\n      disabled = true;\n      buttonText = 'ERROR SENDING BUG REPORT';\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ThemeProvider, {\n    theme: themes.home\n  }, React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(ErrorIcon, {\n    className: classes.icon,\n    color: \"error\"\n  }), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.text,\n    color: \"inherit\"\n  }, \"Something went wrong\"), error && error.message && React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.text,\n    color: \"inherit\"\n  }, error.message), React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    disabled: disabled,\n    color: color,\n    onClick: function onClick() {\n      return setDialogOpen(true);\n    }\n  }, React.createElement(BugReportIcon, null), buttonText), stackEl, React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: globalActions.resetApp\n  }, React.createElement(DeleteIcon, null), \"RESET APP\"), React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\"\n  }, \"Unfortunately you will lose any data (and Photos) that haven't already been uploaded\"), React.createElement(Dialog, {\n    open: dlgOpen,\n    fullScreen: true,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    },\n    \"aria-labelledby\": \"form-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\"\n  }, \"Report a bug\"), React.createElement(DialogContent, null, React.createElement(DialogContentText, null, \"What were you trying to do when the error happened? (optional)\"), React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    multiline: true,\n    onChange: function onChange(e) {\n      return setNote(e.target.value);\n    },\n    rows: \"3\",\n    rowsMax: \"6\",\n    id: \"note\",\n    placeholder: \"I tried to X and then Y happened...\",\n    label: \"My report\",\n    fullWidth: true\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return setDialogOpen(false);\n    },\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      reportError(note);\n      setDialogOpen(false);\n    },\n    color: \"primary\"\n  }, \"Send\")))));\n};\n\nErrorScreen.propTypes = {\n  error: PropTypes.object,\n  sendState: PropTypes.string,\n  reportError: PropTypes.func.isRequired\n};\nexport default ErrorScreen;","export { default as FindOnMapButton } from './FindOnMapButton';\nexport { default as AboutApp } from './AboutApp';\nexport { default as AppSettings } from './AppSettings';\nexport { default as AddFab } from './AddFab';\nexport { default as ContextMenu } from './ContextMenu';\nexport { default as LibraryFilePicker } from './LibraryFilePicker';\nexport { default as ShortLongText } from './ShortLongText';\nexport { default as useNewImageMenu } from './useNewImageMenu';\nexport { default as UploadControl } from './UploadControl';\nexport { default as DateControl } from './DateControl';\nexport { default as DateView } from './DateView';\nexport { default as ErrorScreen, ERROR_SEND_STATES } from './ErrorScreen';","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nfragment userFragment on User {\\n  id\\n  username\\n  gravatar\\n  watching\\n  gravatarProfile\\n  meta\\n  createdOn\\n  updatedOn\\n  __typename\\n}\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nfragment photoFragment on Photo {\\n  id\\n  meta\\n  createdOn\\n  takenOn\\n  updatedOn\\n  coords\\n  note\\n  seriesId\\n  seriesCreatedBy\\n  createdBy\\n  updatedBy\\n  uploadToken\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  updatedUser {\\n    ...userSummaryFragment\\n  }\\n  tags {\\n    label\\n    typeId\\n    coords {\\n      x\\n      y\\n      __typename\\n    }\\n    __typename\\n  }\\n  paths {\\n    base\\n    large\\n    thumb\\n    medium\\n    __typename\\n  }\\n  __typename\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nfragment seriesFragment on Series {\\n  id\\n  name\\n  access\\n  note\\n  meta\\n  watchers\\n  seriesStatus\\n  createdOn\\n  updatedOn\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  updatedUser {\\n    ...userSummaryFragment\\n  }\\n  coords\\n  direction\\n  photoCount\\n  featured {\\n    ...photoSummaryFragment\\n  }\\n  latest {\\n    ...photoSummaryFragment\\n  }\\n  __typename\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nfragment seriesSummaryFragment on SeriesSummary {\\n  id\\n  name\\n  access\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  seriesStatus\\n  updatedOn\\n  createdOn\\n  photoCount\\n  coords\\n  direction\\n  watchers\\n  featured {\\n    ...photoSummaryFragment\\n  }\\n  latest {\\n    ...photoSummaryFragment\\n  }\\n  __typename\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nfragment userSummaryFragment on UserSummary {\\n  id\\n  gravatar\\n  gravatarProfile\\n  username\\n  __typename\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nfragment photoSummaryFragment on PhotoSummary {\\n  id\\n  takenOn\\n  seriesCreatedBy\\n  updatedOn\\n  createdOn\\n  seriesId\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  paths {\\n    base\\n    thumb\\n    medium\\n    large\\n    __typename\\n  }\\n  __typename\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from 'graphql-tag';\nexport var photoSummaryFragment = gql(_templateObject());\nexport var photoSummaryKeys = ['id', 'takenOn', 'seriesCreatedBy', 'updatedOn', 'createdOn', 'seriesId', 'createdUser', 'paths'];\nexport var userSummaryFragment = gql(_templateObject2());\nexport var userSummaryKeys = ['id', 'gravatar', 'gravatarProfile', 'username'];\nexport var seriesSummaryFragment = gql(_templateObject3(), photoSummaryFragment, userSummaryFragment);\nexport var seriesSummaryKeys = ['id', 'name', 'access', 'createdUser', 'seriesStatus', 'updatedOn', 'createdOn', 'photoCount', 'coords', 'direction', 'watchers', 'featured', 'latest'];\nexport var seriesFragment = gql(_templateObject4(), photoSummaryFragment, userSummaryFragment);\nexport var seriesKeys = ['id', 'name', 'access', 'note', 'meta', 'watchers', 'seriesStatus', 'createdOn', 'updatedOn', 'createdUser', 'updatedUser', 'coords', 'direction', 'photoCount', 'featured', 'latest'];\nexport var photoFragment = gql(_templateObject5(), userSummaryFragment);\nexport var photoKeys = ['id', 'meta', 'createdOn', 'takenOn', 'updatedOn', 'note', 'coords', 'seriesId', 'seriesCreatedBy', 'createdBy', 'updatedBy', 'uploadToken', 'createdUser', 'updatedUser', 'tags', 'paths'];\nexport var userFragment = gql(_templateObject6());\nexport var userKeys = ['id', 'username', 'gravatar', 'watching', 'gravatarProfile', 'meta', 'createdOn', 'updatedOn'];","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport FormData from 'form-data';\nimport { imgStore } from './graphql/offline';\naxios.interceptors.request.use(function (request) {\n  console.log('AXIOS:::: Starting Request', request);\n  return request;\n}, function (err) {\n  console.log('AXIOS:::: Starting Request ERROR', err);\n  return Promise.reject(err);\n});\naxios.interceptors.response.use(function (response) {\n  console.log('AXIOS:::: Response', response);\n  return response;\n}, function (err) {\n  console.log('AXIOS:::: Starting Response ERROR', err);\n  return Promise.reject(err);\n});\nexport default function doUpload(_x, _x2, _x3, _x4) {\n  return _doUpload.apply(this, arguments);\n}\n\nfunction _doUpload() {\n  _doUpload = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(activeUpload, updateUploadProgress, completeActiveUpload, restartUpload) {\n    var formData, data, file, config;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log('doUpload:: upload start', activeUpload);\n            formData = new FormData();\n            Object.keys(activeUpload.preAuth.fields).forEach(function (fieldkey) {\n              console.log(\"doUpload::append:: \".concat(fieldkey, \": \").concat(activeUpload.preAuth.fields[fieldkey].substring(0, 50)));\n              formData.append(fieldkey, activeUpload.preAuth.fields[fieldkey]);\n            });\n            _context.next = 5;\n            return imgStore.getItem(activeUpload.uploadToken);\n\n          case 5:\n            data = _context.sent;\n            file = dataURLtoFile(data.dataUrl, data.name);\n            formData.append('file', file);\n            config = {\n              headers: {\n                'Content-Type': 'multipart/form-data'\n              },\n              onUploadProgress: function onUploadProgress(progressEvent) {\n                var loaded = progressEvent.loaded,\n                    total = progressEvent.total;\n                console.log('doUpload::PROGRESSEVENT', loaded, total, Math.floor(100 * loaded / total));\n                updateUploadProgress({\n                  progress: Math.floor(100 * loaded / total)\n                });\n              }\n            };\n            console.log('doUpload::FORMDATA', {\n              formData: formData,\n              config: config\n            });\n            _context.next = 12;\n            return axios.post(activeUpload.preAuth.url, formData, config).catch(function (err) {\n              console.error('doUpload::ERROR');\n              console.error(err);\n              console.log(err.stack);\n              restartUpload(activeUpload);\n            });\n\n          case 12:\n            _context.t0 = console;\n            _context.next = 15;\n            return imgStore.keys();\n\n          case 15:\n            _context.t1 = _context.sent;\n\n            _context.t0.log.call(_context.t0, 'doUpload:: upload done. cleaning up imgStore', _context.t1);\n\n            _context.next = 19;\n            return imgStore.removeItem(activeUpload.uploadToken);\n\n          case 19:\n            _context.t2 = console;\n            _context.next = 22;\n            return imgStore.keys();\n\n          case 22:\n            _context.t3 = _context.sent;\n\n            _context.t2.log.call(_context.t2, 'doUpload:: Cleaned up img store', _context.t3);\n\n            completeActiveUpload();\n\n          case 25:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _doUpload.apply(this, arguments);\n}\n\nexport function dataURLtoFile(dataurl, filename) {\n  var arr = dataurl.split(',');\n  var mime = arr[0].match(/:(.*?);/)[1];\n  var bstr = atob(arr[1]);\n  var n = bstr.length;\n  var u8arr = new Uint8Array(n);\n\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new File([u8arr], filename, {\n    type: mime\n  });\n}","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n        fragment watchers on SeriesSummary {\\n          watchers\\n        }\\n      \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { getWholeSeries, allSeries, userSeries, getMyFeed, getUser } from '../queries';\nimport { seriesKeys, seriesSummaryKeys, photoSummaryKeys, seriesSummaryFragment } from '../fragments';\nimport gql from 'graphql-tag';\nimport _ from 'lodash';\nexport var getWholeSeriesUpdate = function getWholeSeriesUpdate(store, series) {\n  var variables = {\n    id: series.id\n  };\n  var query = getWholeSeries;\n  var newData = {\n    series: {}\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    console.warn('updateQueries::getWholeSeriesUpdate readQuery failed', {\n      newData: newData,\n      series: series\n    });\n    console.warn('updateQueries::getWholeSeriesUpdate', e);\n  }\n\n  try {\n    newData.series = _objectSpread({}, newData.series, {}, series);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    console.log('updateQueries::getWholeSeriesUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::getWholeSeriesUpdate writeQuery failed', {\n      newData: newData,\n      series: series\n    });\n    console.warerrorn('updateQueries::getWholeSeriesUpdate', e);\n  }\n};\nexport var getWholeSeriesPhotoUpdate = function getWholeSeriesPhotoUpdate(store, photo) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var variables = {\n    id: photo.seriesId\n  };\n  var query = getWholeSeries;\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n\n    var newData = _.cloneDeep(qVal);\n\n    if (remove) {\n      newData.series.photos = newData.series.photos.filter(function (ph) {\n        return ph.id !== photo.id;\n      });\n    } else {\n      var idx = newData.series.photos.findIndex(function (ph) {\n        return ph.id === photo.id;\n      });\n\n      if (idx > -1) {\n        newData.series.photos = _toConsumableArray(newData.series.photos);\n        newData.series.photos[idx] = photo;\n      } else {\n        newData.series.photos = [].concat(_toConsumableArray(newData.series.photos), [photo]);\n      }\n    }\n\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    console.log('updateQueries::getWholeSeriesPhotoUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::getWholeSeriesPhotoUpdate WriteQuery failed', {\n      photo: photo,\n      remove: remove\n    });\n    console.error('updateQueries::getWholeSeriesPhotoUpdate', e);\n  }\n};\n\nfunction updateSeriesSummaries(origArr, series) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var newArr = [];\n\n  if (remove) {\n    newArr = origArr.filter(function (s) {\n      return s.id !== series.id;\n    });\n  } else {\n    var seriesIndex = origArr.findIndex(function (s) {\n      return s.id === series.id;\n    });\n\n    var newAllSeriesEntry = _objectSpread({}, _.pick(series, seriesKeys), {\n      seriesStatus: null,\n      __typename: 'SeriesSummary'\n    });\n\n    if (seriesIndex > -1) {\n      newArr = origArr.map(function (s) {\n        return s.id === series.id ? newAllSeriesEntry : s;\n      });\n    } else {\n      newArr = [].concat(_toConsumableArray(newArr), [newAllSeriesEntry]);\n    }\n  }\n\n  console.log('updateQueries::updateSeriesSummaries HELPER', {\n    origArr: origArr,\n    series: series,\n    newArr: newArr,\n    remove: remove\n  });\n  return newArr;\n}\n\nfunction updateFeedList(origArr, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var newArr = [];\n\n  if (remove) {\n    newArr = origArr.filter(function (fItem) {\n      if (photo) {\n        return fItem.photo.id !== photo.id;\n      } else {\n        return fItem.series.id === series.id;\n      }\n    });\n  } else {\n    var idx = origArr.findIndex(function (fitem) {\n      return fitem._id === photo.id;\n    });\n\n    var newSeriesSummary = _.pick(series, seriesSummaryKeys);\n\n    newSeriesSummary.__typename = 'SeriesSummary';\n\n    var newPhotoSummary = _.pick(photo, photoSummaryKeys);\n\n    newPhotoSummary.__typename = 'PhotoSummary';\n\n    if (idx > -1) {\n      newArr = _toConsumableArray(origArr);\n      newArr[idx].photo = newPhotoSummary;\n    } else {\n      newArr = [].concat(_toConsumableArray(origArr), [{\n        _id: newPhotoSummary.id,\n        series: newSeriesSummary,\n        photo: newPhotoSummary,\n        relation: 'OWNED',\n        __typename: 'MyFeedResultItem'\n      }]);\n    }\n  }\n\n  console.log('updateQueries::updateFeedList HELPER', {\n    origArr: origArr,\n    series: series,\n    photo: photo,\n    newArr: newArr\n  });\n  return newArr;\n}\n\nexport var allSeriesUpdate = function allSeriesUpdate(store, series) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var variables = {\n    limit: 100\n  };\n  var query = allSeries;\n  var newData = {\n    allSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    console.warn('updateQueries::allSeriesUpdate readQuery failed', {\n      series: series,\n      remove: remove,\n      newData: newData\n    });\n    console.warn('updateQueries::allSeriesUpdate', e);\n\n    if (series) {\n      var newSeriesSummary = _.pick(series, seriesSummaryKeys);\n\n      newSeriesSummary.__typename = 'SeriesSummary';\n      newData.allSeries.seriesSummaries = [newSeriesSummary];\n    } else return;\n  }\n\n  try {\n    newData.allSeries.seriesSummaries = updateSeriesSummaries(newData.allSeries.seriesSummaries, series, remove);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    console.log('updateQueries::allSeriesUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::allSeriesUpdate writeQuery failed', {\n      series: series,\n      remove: remove,\n      newData: newData\n    });\n    console.error('updateQueries::allSeriesUpdate', e);\n  }\n};\nexport var allSeriesPhotoUpdate = function allSeriesPhotoUpdate(store, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var query = allSeries;\n  var newData = {\n    allSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: {\n        limit: 100\n      }\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    console.warn('updateQueries::allSeriesPhotoUpdate:: allSeries readQuery failed', {\n      series: series,\n      remove: remove,\n      photo: photo,\n      newData: newData\n    });\n    console.warn('updateQueries::allSeriesPhotoUpdate', e);\n\n    if (series) {\n      var newSeriesSummary = _.pick(series, seriesSummaryKeys);\n\n      newSeriesSummary.__typename = 'SeriesSummary';\n      newData.allSeries.seriesSummaries = [newSeriesSummary];\n    } else return;\n  }\n\n  try {\n    newData.allSeries.seriesSummaries = newData.allSeries.seriesSummaries.map(function (s) {\n      if (s.id !== photo.seriesId) return s;else {\n        var newS = _.cloneDeep(s);\n\n        var photoIndex = series.photos.findIndex(function (ph) {\n          return ph.id === photo.id;\n        });\n\n        if (remove && series) {\n          if (newS.latest.id === photo.id) {\n            newS.latest = series.photos[series.photos.length - 1];\n          }\n\n          if (newS.featured.id === photo.id) {\n            newS.featured = series.photos[series.photos.length - 1];\n          }\n\n          newS.photoCount -= 1;\n        } else if (photoIndex === -1) {\n          var photoSummary = _.pick(photo, photoSummaryKeys);\n\n          photoSummary.__typename = 'PhotoSummary';\n          newS.latest = photoSummary;\n          newS.photoCount += 1;\n        } else {}\n\n        return newS;\n      }\n    });\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    console.log('updateQueries::allSeriesPhotoUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::createPhotoMutation:: allSeries read or write ERROR', {\n      series: series,\n      photo: photo,\n      remove: remove\n    });\n    console.error('updateQueries::createPhotoMutation', e);\n  }\n};\nexport var userSeriesUpdate = function userSeriesUpdate(store, series) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var query = userSeries;\n  var newData = {\n    userSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    console.warn('updateQueries::userSeriesUpdate readQuery failed', {\n      series: series,\n      remove: remove,\n      newData: newData\n    });\n    console.warn('updateQueries::userSeriesUpdate', e);\n  }\n\n  try {\n    newData.userSeries.seriesSummaries = updateSeriesSummaries(newData.userSeries.seriesSummaries, series, remove);\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    console.log('updateQueries::userSeriesUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::userSeriesUpdate writeQuery failed', {\n      series: series,\n      remove: remove,\n      newData: newData\n    });\n    console.error('updateQueries::userSeriesUpdate', e);\n  }\n};\nexport var feedUpdate = function feedUpdate(store, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var query = getMyFeed;\n  var newData = {\n    myFeed: {\n      feed: [],\n      window: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    console.warn('updateQueries::feedUpdate readQuery failed', {\n      series: series,\n      photo: photo,\n      remove: remove,\n      newData: newData\n    });\n    console.warn('updateQueries::feedUpdate', e);\n  }\n\n  try {\n    newData.myFeed.feed = updateFeedList(newData.myFeed.feed, series, photo, remove);\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    console.log('updateQueries::feedUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::feedUpdate writeQuery failed', {\n      series: series,\n      photo: photo,\n      remove: remove,\n      newData: newData\n    });\n    console.error('updateQueries::feedUpdate', e);\n  }\n};\nexport var watchUpdate = function watchUpdate(store, seriesId) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  try {\n    var seriesFrag = store.readFragment({\n      id: seriesId,\n      fragment: seriesSummaryFragment\n    });\n    console.log('updateQueries::watchUpdate watchers', {\n      seriesFrag: seriesFrag\n    });\n    store.writeFragment({\n      id: '5',\n      fragment: gql(_templateObject()),\n      data: {\n        watchers: seriesFrag.watchers + (remove ? -1 : 1)\n      }\n    });\n  } catch (e) {\n    console.error('updateQueries::watchUpdate counter update failed', {\n      seriesId: seriesId,\n      remove: remove\n    });\n    console.error('updateQueries::watchUpdate', e);\n  }\n\n  var query = getUser;\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n\n    var newData = _.cloneDeep(qVal);\n\n    if (remove) {\n      newData.user.watching = newData.user.watching.filter(function (sid) {\n        return sid !== seriesId;\n      });\n    } else {\n      newData.user.watching = _toConsumableArray(new Set([].concat(_toConsumableArray(newData.user.watching || []), [seriesId])));\n    }\n\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    console.log('updateQueries::watchUpdate DONE', remove ? 'unwatch' : 'watch');\n  } catch (e) {\n    console.error('updateQueries::watchUpdate read/write failed', {\n      seriesId: seriesId,\n      remove: remove\n    });\n    console.error('updateQueries::watchUpdate', e);\n  }\n};","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\nmutation reportBug($reportJSON: String!) {\\n  reportBug(reportJSON: $reportJSON)\\n}\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\nmutation unWatch($seriesId: ID) {\\n  unWatchSeries(seriesId: $seriesId)\\n}\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nmutation watch($seriesId: ID) {\\n  watchSeries(seriesId: $seriesId)\\n}\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nmutation createSeries($series: NewSeriesInput, $photo: NewPhotoInput!, $ext: String!) {\\n  createSeries(series: $series, photo: $photo, ext: $ext) {\\n    series {\\n      ...seriesFragment\\n      photos {\\n        ...photoFragment\\n      }\\n    }\\n    preAuth\\n    __typename\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nmutation createPhoto($photo: NewPhotoInput!, $ext: String!) {\\n  createPhoto(photo: $photo, ext: $ext) {\\n    photo {\\n      ...photoFragment\\n    }\\n    preAuth\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nmutation updatePhoto($photo: UpdatePhotoInput!) {\\n  updatePhoto(photo: $photo){\\n    ...photoFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nmutation updateSeries($series: UpdateSeriesInput!) {\\n  updateSeries(series: $series){\\n    ...seriesFragment\\n  }\\n\\n}\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nmutation deleteSeries($id: ID!) {\\n  deleteSeries(id: $id)\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nmutation deletePhoto($seriesId: ID!, $photoId: ID!) {\\n  deletePhoto(seriesId: $seriesId, photoId: $photoId)\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from 'graphql-tag';\nimport { photoFragment, seriesFragment } from './fragments';\nexport var deletePhoto = gql(_templateObject());\nexport var deleteSeries = gql(_templateObject2());\nexport var updateSeries = gql(_templateObject3(), seriesFragment);\nexport var updateSeriesKeys = ['id', 'access', 'name', 'note', 'coords', 'direction'];\nexport var updatePhoto = gql(_templateObject4(), photoFragment);\nexport var updatePhotoKeys = ['id', 'seriesId', 'takenOn', 'tags', 'note'];\nexport var createPhoto = gql(_templateObject5(), photoFragment);\nexport var newPhotoKeys = ['seriesId', 'takenOn', 'meta', 'rawData', 'coords', 'tags', 'note', 'uploadToken'];\nexport var createSeries = gql(_templateObject6(), seriesFragment, photoFragment);\nexport var newSeriesKeys = ['access', 'name', 'note', 'coords', 'direction', 'meta'];\nexport var watchSeries = gql(_templateObject7());\nexport var unWatchSeries = gql(_templateObject8());\nexport var reportBug = gql(_templateObject9());","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.timestampToHTML5Input = timestampToHTML5Input;\nexports.HTML5InputToTimestamp = HTML5InputToTimestamp;\nexports.convertJSDatetoTimestamp = exports.parseDate = exports.fromNow = exports.formatDatAgo = exports.formatDate = void 0;\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar formatDate = function formatDate(utctimestamp) {\n  var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'LLLL';\n  return (0, _moment[\"default\"])(utctimestamp, 'x').format(format);\n};\n\nexports.formatDate = formatDate;\n\nvar formatDatAgo = function formatDatAgo(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x').fromNow();\n};\n\nexports.formatDatAgo = formatDatAgo;\n\nvar fromNow = function fromNow(timeAgo) {\n  var newText = (0, _moment[\"default\"])(timeAgo, 'x').fromNow();\n  return newText;\n};\n\nexports.fromNow = fromNow;\n\nvar parseDate = function parseDate(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x');\n};\n\nexports.parseDate = parseDate;\n\nvar convertJSDatetoTimestamp = function convertJSDatetoTimestamp(jsDate) {\n  return _moment[\"default\"].utc(jsDate).format('x');\n};\n\nexports.convertJSDatetoTimestamp = convertJSDatetoTimestamp;\n\nfunction timestampToHTML5Input(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x').format('YYYY-MM-DDTkk:mm');\n}\n\nfunction HTML5InputToTimestamp(isoStr) {\n  return (0, _moment[\"default\"])(new Date(isoStr), 'YYYY-MM-DDTkk:mm').format('x');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatNum = formatNum;\nexports.clearSelection = clearSelection;\nexports.isObjectWithKeys = isObjectWithKeys;\nexports.makeDomArray = makeDomArray;\nexports.capitalizeFirstLetter = capitalizeFirstLetter;\nexports.numericArrayCompare = numericArrayCompare;\nexports.decodeUnbufferedBase64 = decodeUnbufferedBase64;\nexports.encodeUnbufferedBase64 = encodeUnbufferedBase64;\nexports.isObject = isObject;\nexports.arrToObj = arrToObj;\nexports.getRandomArbitraryInt = getRandomArbitraryInt;\nexports.debounce = debounce;\nexports.chunkArray = exports.base64toJSON = exports.json2base64 = exports.urlizeb64 = exports.isNumeric = void 0;\n\nvar _numeral = _interopRequireDefault(require(\"numeral\"));\n\nvar _zlib = _interopRequireDefault(require(\"zlib\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar isNumeric = function isNumeric(num) {\n  try {\n    return !isNaN(parseFloat(num)) && isFinite(num);\n  } catch (e) {\n    return false;\n  }\n};\n\nexports.isNumeric = isNumeric;\n\nvar urlizeb64 = function urlizeb64(x) {\n  return x.replace('+', '-').replace('/', '_').replace(/=+$/, '');\n};\n\nexports.urlizeb64 = urlizeb64;\n\nfunction formatNum(num, precision) {\n  try {\n    var precstr = precision > 0 ? '.' + Array(precision + 1).join('0') : '';\n    var newprec = isNumeric(num) ? (0, _numeral[\"default\"])(num).format(\"0,0\".concat(precstr)) : num;\n    return newprec.replace(/(\\.(0{0,1}[1-9]*))0+$/, '$1');\n  } catch (e) {\n    return num;\n  }\n}\n\nfunction clearSelection() {\n  if (document.selection && document.selection.empty) {\n    document.selection.empty();\n  } else if (window.getSelection) {\n    var sel = window.getSelection();\n    sel.removeAllRanges();\n  }\n}\n\nfunction isObjectWithKeys(obj) {\n  return _typeof(obj) === 'object' && obj !== null && Object.keys(obj).length > 0;\n}\n\nfunction makeDomArray(domnode) {\n  if (!domnode) return [];\n  var keys = Object.keys(domnode);\n  if (keys.length > 1 || keys.length === 0) throw Error('Expected nester domnode structure.');\n  if (!domnode) return [];\n  if (!domnode[keys[0]]) return [];\n  return Array.isArray(domnode[keys[0]]) ? domnode[keys[0]] : [domnode[keys[0]]];\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction numericArrayCompare(arr1, arr2) {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) return false;\n  if (arr1.length !== arr2.length) return false;\n  return !arr1.some(function (el, idx) {\n    return el !== arr2[idx];\n  });\n}\n\nfunction decodeUnbufferedBase64(hash) {\n  var missingPadding = hash.length % 4;\n\n  if (missingPadding !== 0) {\n    var newhash = hash + Array(4 - missingPadding).join('=');\n    return Buffer.from(newhash, 'base64').toString();\n  } else {\n    return Buffer.from(hash, 'base64').toString();\n  }\n}\n\nfunction encodeUnbufferedBase64(str) {\n  return urlizeb64(Buffer.from(str).toString('base64'));\n}\n\nfunction isObject(o) {\n  return o instanceof Object && o.constructor === Object;\n}\n\nfunction arrToObj(data) {\n  for (var key in data) {\n    if (data.hasOwnProperty(key)) {\n      var keyDat = data[key];\n\n      if (keyDat._) {\n        keyDat.val = keyDat._;\n        delete keyDat._;\n      }\n\n      if (keyDat.$) {\n        keyDat.attr = keyDat.$;\n        delete keyDat.$;\n      }\n\n      if (_typeof(keyDat) === 'object') {\n        data[key] = arrToObj(keyDat);\n\n        if (Array.isArray(keyDat) && keyDat.length === 1 && typeof keyDat[0] === 'string') {\n          if (isNumeric(keyDat[0])) data[key] = Number(keyDat[0]);else data[key] = keyDat[0].replace(/\\\\/g, '/');\n        } else if (Array.isArray(keyDat) && keyDat.length === 1 && isObject(keyDat[0]) && Object.keys(keyDat[0]).length === 1) {\n          data[key] = keyDat[0][Object.keys(keyDat[0])[0]];\n        }\n\n        if (_typeof(data[key]) && data[key].length === 0) {\n          delete data[key];\n        }\n\n        if (typeof data[key] === 'string' && isNumeric(data[key])) data[key] = Number(data[key]);\n      }\n    }\n  }\n\n  return data;\n}\n\nvar json2base64 = function json2base64(text) {\n  return new Promise(function (resolve, reject) {\n    _zlib[\"default\"].gzip(JSON.stringify(text), function (err, data) {\n      if (err) reject(err);else resolve(data.toString('base64'));\n    });\n  });\n};\n\nexports.json2base64 = json2base64;\n\nvar base64toJSON = function base64toJSON(b64String) {\n  var buff = Buffer.from(b64String, 'base64');\n  return new Promise(function (resolve, reject) {\n    _zlib[\"default\"].gunzip(buff, function (err, data) {\n      if (err) reject(err);else resolve(JSON.parse(data.toString()));\n    });\n  });\n};\n\nexports.base64toJSON = base64toJSON;\n\nvar chunkArray = function chunkArray(arr, chunkSize) {\n  var result = [];\n\n  for (var i = 0; i < arr.length; i += chunkSize) {\n    result.push(arr.slice(i, i + chunkSize));\n  }\n\n  return result;\n};\n\nexports.chunkArray = chunkArray;\n\nfunction getRandomArbitraryInt(min, max) {\n  return parseInt(Math.random() * (max - min) + min, 10);\n}\n\nfunction debounce(func, wait, immediate) {\n  var _this = this;\n\n  var timeout = null;\n  return function () {\n    for (var _len = arguments.length, innerArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      innerArgs[_key] = arguments[_key];\n    }\n\n    var context = _this;\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      timeout = null;\n\n      if (!immediate) {\n        func.apply(context, innerArgs);\n      }\n    }, wait);\n\n    if (callNow) {\n      func.apply(context, innerArgs);\n    }\n  };\n}\n\n;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Tags = function Tags(tagConfig, tags) {\n  var _this = this;\n\n  _classCallCheck(this, Tags);\n\n  _defineProperty(this, \"findTagByLabel\", function (typeId, tagLabel) {\n    return _this.getTagType(typeId).values.find(function (tt) {\n      return tt.label === tagLabel;\n    });\n  });\n\n  _defineProperty(this, \"getXYTags\", function () {\n    var xyTagLabels = _this.getXYTagTypes().map(function (tt) {\n      return tt.label;\n    });\n\n    return _this.tags.filter(function (tag) {\n      return xyTagLabels.indexOf(tag.typeId) > -1 && tag.coords && tag.coords.x;\n    });\n  });\n\n  _defineProperty(this, \"getNonXYTags\", function () {\n    var NonXYTagLabels = _this.getNonXYTagTypes().map(function (tt) {\n      return tt.label;\n    });\n\n    return _this.tags.filter(function (tag) {\n      return NonXYTagLabels.indexOf(tag.typeId) > -1;\n    });\n  });\n\n  _defineProperty(this, \"createNewTagObj\", function (label, typeId) {\n    return {\n      label: label,\n      typeId: typeId\n    };\n  });\n\n  _defineProperty(this, \"createExistingTagObj\", function (label, typeId) {\n    return _objectSpread({}, _this.findTagByLabel(typeId, label), {\n      typeId: typeId\n    });\n  });\n\n  _defineProperty(this, \"createNewXYTagObj\", function (label, typeId, coords) {\n    return {\n      label: label,\n      typeId: typeId,\n      coords: coords\n    };\n  });\n\n  _defineProperty(this, \"createExistingXYTagObj\", function (label, typeId, coords) {\n    return _objectSpread({}, _this.findTagByLabel(typeId, label), {\n      typeId: typeId,\n      coords: coords\n    });\n  });\n\n  _defineProperty(this, \"getTagType\", function (typeId) {\n    return _this.tagConfig.find(function (tt) {\n      return tt.id === typeId;\n    });\n  });\n\n  _defineProperty(this, \"getTagTypeIndex\", function (typeId) {\n    return _this.tagConfig.findIndex(function (tt) {\n      return tt.id === typeId;\n    });\n  });\n\n  _defineProperty(this, \"getXYTagTypes\", function () {\n    return _this.tagConfig.filter(function (tt) {\n      return tt.allowXY;\n    });\n  });\n\n  _defineProperty(this, \"getNonXYTagTypes\", function () {\n    return _this.tagConfig.filter(function (tt) {\n      return tt.allowNonXY;\n    });\n  });\n\n  _defineProperty(this, \"getRelXYTags\", function (multiplier) {\n    return _this.getXYTags().map(function (tag) {\n      return _objectSpread({}, tag, {\n        group: _this.getTagTypeIndex(tag.typeId),\n        relCoords: {\n          x: tag.coords.x * multiplier,\n          y: tag.coords.y * multiplier\n        }\n      });\n    });\n  });\n\n  this.tags = tags;\n  this.tagConfig = tagConfig;\n};\n\nvar _default = Tags;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getExif = void 0;\n\nvar _exifParser = _interopRequireDefault(require(\"exif-parser\"));\n\nvar _common = require(\"@morphoto/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar getExif = function getExif(dataUrl) {\n  console.log('onLibraryAdd Buffered');\n  var exif = null;\n  var exifDateTime = null;\n  var exifGPS = null;\n\n  try {\n    var find = 'base64,';\n    var foundIdx = dataUrl.indexOf(find) + find.length;\n    var newData = dataUrl.slice(foundIdx);\n\n    var parser = _exifParser[\"default\"].create(Buffer.from(newData, 'base64'));\n\n    exif = parser.parse();\n    console.log('got EXIF', exif);\n  } catch (err) {\n    console.log('EXIF ERROR', err);\n  }\n\n  if (exif && exif.tags) {\n    try {\n      if (exif.tags && exif.tags.DateTimeOriginal && String(exif.tags.DateTimeOriginal)) {\n        exifDateTime = String(exif.tags.DateTimeOriginal);\n      }\n    } catch (err) {\n      console.log('ERROR GETTING TIMESTAMP', {\n        err: err,\n        exif: exif\n      });\n    }\n\n    try {\n      if (exif.tags.GPSLatitude && _common.util.isNumeric(exif.tags.GPSLatitude) && exif.tags.GPSLongitude && _common.util.isNumeric(exif.tags.GPSLongitude)) {\n        exifGPS = [exif.tags.GPSLongitude, exif.tags.GPSLatitude];\n      }\n    } catch (e) {\n      console.error('GPS Longitude and Latitude could not be determined');\n    }\n  }\n\n  return {\n    exif: exif,\n    exifDateTime: exifDateTime,\n    exifGPS: exifGPS\n  };\n};\n\nexports.getExif = getExif;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Series = function Series(metaConfig, series) {\n  var _this = this;\n\n  _classCallCheck(this, Series);\n\n  _defineProperty(this, \"getSeriesMeta\", function () {\n    return Object.keys(_this.metaConfig).filter(function (key) {\n      return _this.metaConfig[key].type === 'SERIES';\n    }).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, _this.series.meta[key][\"default\"]));\n    }, {});\n  });\n\n  _defineProperty(this, \"setMeta\", function () {\n    _this.series.meta = JSON.stringify(_this.getSeriesMeta());\n  });\n\n  _defineProperty(this, \"newSeries\", function () {\n    return {\n      id: \"L-\".concat((0, _v[\"default\"])()),\n      meta: JSON.stringify(_this.getSeriesMeta()),\n      photos: []\n    };\n  });\n\n  this.metaConfig = metaConfig;\n  if (series) this.series = series;else {\n    this.series = this.newSeries();\n  }\n};\n\nvar _default = Series;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _common = require(\"@morphoto/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Photo = function Photo(metaConfig, photo) {\n  var _this = this;\n\n  _classCallCheck(this, Photo);\n\n  _defineProperty(this, \"setMeta\", function () {\n    _this.photo.meta = JSON.stringify(_this.getPhotoMeta());\n  });\n\n  _defineProperty(this, \"getPhotoMeta\", function () {\n    return Object.keys(_this.metaConfig).filter(function (key) {\n      return _this.metaConfig[key].type === 'PHOTO';\n    }).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, _this.photo.meta[key][\"default\"]));\n    }, {});\n  });\n\n  _defineProperty(this, \"newPhoto\", function () {\n    return {\n      id: \"L-\".concat((0, _v[\"default\"])()),\n      uploadToken: (0, _v[\"default\"])(),\n      takenOn: _common.dates.convertJSDatetoTimestamp(new Date()),\n      meta: JSON.stringify(_this.getPhotoMeta()),\n      tags: []\n    };\n  });\n\n  this.metaConfig = metaConfig;\n  if (photo) this.photo = photo;else {\n    this.photo = this.newPhoto();\n  }\n};\n\nvar _default = Photo;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _accesscontrol = _interopRequireDefault(require(\"accesscontrol\"));\n\nvar _permissions = _interopRequireDefault(require(\"./permissions\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar AccessHelper = function () {\n  function AccessHelper(userSub, role) {\n    var _this = this;\n\n    var permissionObj = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _permissions[\"default\"];\n\n    _classCallCheck(this, AccessHelper);\n\n    _defineProperty(this, \"ownOrAny\", function (obj) {\n      if (!obj || !obj.createdUser || !obj.createdUser.id) throw new Error(\"No Created user found\");\n\n      try {\n        return obj.createdUser.id === _this.userSub ? 'Own' : 'Any';\n      } catch (e) {\n        return 'Any';\n      }\n    });\n\n    _defineProperty(this, \"isOwner\", function (obj) {\n      if (!obj || !obj.createdUser || !obj.createdUser.id) throw new Error(\"No Created user found\");\n\n      try {\n        return obj.createdUser.id === _this.userSub;\n      } catch (e) {\n        return false;\n      }\n    });\n\n    _defineProperty(this, \"canUser\", function (action, obj, type, attrs) {\n      if (['series', 'photo'].indexOf(type) < 0) throw new Error(\"canUser: type not supported \".concat(type));\n\n      try {\n        var ownAny = _this.ownOrAny(obj);\n\n        var perm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)](type);\n\n        var otherPerm = null;\n\n        if (type === 'series') {\n          if (obj.access === 'PUBLIC') otherPerm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)]('series_public');else if (obj.access === 'OPEN') otherPerm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)]('series_open');\n        }\n\n        if (attrs) {\n          if (otherPerm) {\n            return !!perm.attributes.find(function (p) {\n              return p === '*' || attrs.indexOf(p) > -1;\n            }) || !!otherPerm.attributes.find(function (p) {\n              return p === '*' || attrs.indexOf(p) > -1;\n            });\n          } else return !!perm.attributes.find(function (p) {\n            return p === '*' || attrs.indexOf(p) > -1;\n          });\n        } else {\n          if (otherPerm) return perm.granted || otherPerm.granted;else return perm.granted;\n        }\n      } catch (e) {\n        console.error(e);\n        return false;\n      }\n    });\n\n    this.userSub = userSub;\n    this.role = role;\n    this.permissionObj = permissionObj;\n    this.ac = new _accesscontrol[\"default\"](permissionObj);\n  }\n\n  _createClass(AccessHelper, [{\n    key: \"toString\",\n    value: function toString() {\n      console.log('AccessHelper:', {\n        sub: this.userSub,\n        role: this.role\n      });\n    }\n  }]);\n\n  return AccessHelper;\n}();\n\nvar _default = AccessHelper;\nexports[\"default\"] = _default;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport BrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(2),\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      opacity: 0.3,\n      textAlign: 'center',\n      color: theme.palette.getContrastText(theme.palette.text.primary),\n      background: theme.palette.text.primary\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      opacity: 0.5\n    },\n    circularProgress: {\n      margin: '0 auto'\n    },\n    primary: {\n      textAlign: 'center',\n      width: '100%'\n    },\n    secondary: {\n      flex: '1 1 30%',\n      width: '100%'\n    }\n  };\n});\n\nvar BrokenImg = function BrokenImg(_ref) {\n  var loading = _ref.loading,\n      className = _ref.className,\n      props = _objectWithoutProperties(_ref, [\"loading\", \"className\"]);\n\n  var classes = useStyles();\n  return React.createElement(\"div\", _extends({\n    className: classNames(classes.root, className)\n  }, props), React.createElement(\"div\", {\n    className: classes.spacer\n  }), loading ? React.createElement(CircularProgress, {\n    color: \"inherit\",\n    className: classes.circularProgress\n  }) : React.createElement(BrokenImageIcon, {\n    className: classes.icon,\n    color: \"inherit\"\n  }), React.createElement(Typography, {\n    className: classes.primary,\n    color: \"inherit\"\n  }, loading ? 'Loading' : 'Photo not found'), React.createElement(\"div\", {\n    className: classes.spacer\n  }));\n};\n\nBrokenImg.propTypes = {\n  loading: PropTypes.bool,\n  className: PropTypes.string\n};\nexport default BrokenImg;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport BrokenImg from './BrokenImg';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      position: 'relative',\n      display: 'block',\n      height: '100%',\n      width: '100%'\n    },\n    img: {\n      display: 'block',\n      height: '100%',\n      width: '100%'\n    },\n    imgBroken: {\n      display: 'none'\n    }\n  };\n});\nexport var RawImage = function RawImage(_ref) {\n  var className = _ref.className,\n      sizePriority = _ref.sizePriority,\n      dataUrl = _ref.dataUrl,\n      photo = _ref.photo,\n      imgRef = _ref.imgRef,\n      cover = _ref.cover,\n      style = _ref.style,\n      props = _objectWithoutProperties(_ref, [\"className\", \"sizePriority\", \"dataUrl\", \"photo\", \"imgRef\", \"cover\", \"style\"]);\n\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      imgUrls = _useState2[0],\n      setImgUrls = _useState2[1];\n\n  var altImgRef = useRef();\n\n  var _useContext = useContext(AppContext),\n      getPhotoUrls = _useContext.getPhotoUrls;\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      altIndex = _useState4[0],\n      setAltIndex = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      broken = _useState6[0],\n      setBroken = _useState6[1];\n\n  useEffect(function () {\n    if (!dataUrl) {\n      if (!getPhotoUrls || !photo) {\n        setBroken(true);\n      } else {\n        getPhotoUrls(photo, ['large', 'medium']).then(function (data) {\n          if (altImgRef.current) setImgUrls(data);\n        }).catch(function () {\n          if (altImgRef.current) setBroken(true);\n        });\n      }\n    }\n  }, [photo]);\n  var finalURl = dataUrl || imgUrls && imgUrls[altIndex];\n  return React.createElement(React.Fragment, null, !dataUrl && (!imgUrls || broken) && React.createElement(BrokenImg, _extends({\n    className: className,\n    loading: !broken\n  }, props)), React.createElement(\"div\", {\n    ref: altImgRef,\n    style: {\n      height: 0,\n      width: 0\n    }\n  }), finalURl && React.createElement(\"img\", _extends({\n    ref: imgRef,\n    className: classNames(className, broken ? classes.imgBroken : classes.img),\n    alt: sizePriority[altIndex],\n    style: _objectSpread({}, style, {\n      objectFit: cover ? 'cover' : 'contain'\n    }),\n    onError: function onError() {\n      if (!dataUrl && imgUrls[altIndex + 1]) {\n        console.warn('RawImage::Setting Alternate image', altIndex);\n        setAltIndex(altIndex + 1);\n      } else {\n        console.warn('RawImage::Image Fail', {\n          photoId: photo.id\n        });\n        setBroken(true);\n      }\n    },\n    src: finalURl\n  }, props)));\n};\nRawImage.propTypes = {\n  className: PropTypes.string,\n  sizePriority: PropTypes.arrayOf(PropTypes.string),\n  imgRef: PropTypes.any,\n  getPhotoUrls: PropTypes.func,\n  cover: PropTypes.bool,\n  dataUrl: PropTypes.string,\n  photo: PropTypes.object,\n  style: PropTypes.object\n};\nRawImage.defaultProps = {\n  sizePriority: ['large', 'medium']\n};\nexport default RawImage;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useComponentSize } from '@morphoto/client-common';\nimport { XYTagChip, useXYTags } from '@morphoto/tags';\nimport RawImage from './RawImage';\nimport style from './Photo.style';\nvar useStyles = makeStyles(style);\n\nvar Photo = function Photo(_ref) {\n  var photo = _ref.photo,\n      opacity = _ref.opacity,\n      edit = _ref.edit,\n      showTags = _ref.showTags,\n      dataUrl = _ref.dataUrl,\n      transition = _ref.transition,\n      onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n  var refImgWrap = useRef();\n  var imgRef = useRef();\n\n  var _useState = useState({\n    multiplier: 1\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      newSize = _useState2[0],\n      setNewSize = _useState2[1];\n\n  var _useComponentSize = useComponentSize(refImgWrap),\n      _useComponentSize$siz = _useComponentSize.size,\n      height = _useComponentSize$siz.height,\n      width = _useComponentSize$siz.width,\n      setResizeActive = _useComponentSize.setResizeActive;\n\n  var _useXYTags = useXYTags(photo, {\n    height: height,\n    width: width\n  }, onChange, setResizeActive),\n      onAddTagTrigger = _useXYTags.onAddTagTrigger,\n      TagChooser = _useXYTags.TagChooser,\n      getRelXYTags = _useXYTags.getRelXYTags,\n      onTagDragOver = _useXYTags.onTagDragOver,\n      onTagDragStop = _useXYTags.onTagDragStop,\n      onTagDelete = _useXYTags.onTagDelete;\n\n  var handleNewSize = function handleNewSize() {\n    var _imgRef$current = imgRef.current,\n        naturalHeight = _imgRef$current.naturalHeight,\n        naturalWidth = _imgRef$current.naturalWidth;\n    var multiplier = Math.min(height / naturalHeight, width / naturalWidth);\n    var newWidth = multiplier * naturalWidth;\n    var newHeight = multiplier * naturalHeight;\n    setNewSize({\n      newWidth: newWidth,\n      newHeight: newHeight,\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight,\n      multiplier: multiplier\n    });\n  };\n\n  useLayoutEffect(function () {\n    if (imgRef.current) handleNewSize();\n  }, [width, height]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className),\n    style: {\n      opacity: opacity !== null ? opacity : 1\n    },\n    ref: refImgWrap\n  }, React.createElement(\"div\", {\n    className: classes.inner,\n    style: {\n      height: newSize ? newSize.newHeight : 1,\n      width: newSize ? newSize.newWidth : 1\n    },\n    onClick: onAddTagTrigger\n  }, showTags || edit ? React.createElement(\"div\", {\n    className: classes.xyTags\n  }, getRelXYTags(newSize.multiplier).map(function (tag, idx) {\n    return React.createElement(XYTagChip, _extends({\n      key: \"xytag-\".concat(idx),\n      color: tag.color\n    }, {\n      edit: edit,\n      newSize: newSize,\n      tag: tag,\n      onTagDragOver: onTagDragOver,\n      onTagDragStop: onTagDragStop,\n      onTagDelete: onTagDelete\n    }));\n  })) : null, React.createElement(RawImage, {\n    className: classes.rawImage,\n    sizePriority: ['large', 'medium', 'thumb'],\n    photo: photo,\n    imgRef: imgRef,\n    dataUrl: dataUrl,\n    style: {\n      height: newSize.newHeight,\n      width: newSize.newWidth\n    }\n  })), edit && React.createElement(TagChooser, null));\n};\n\nPhoto.propTypes = {\n  className: PropTypes.string,\n  opacity: PropTypes.number,\n  photo: PropTypes.object.isRequired,\n  dataUrl: PropTypes.string,\n  edit: PropTypes.bool,\n  showTags: PropTypes.bool,\n  transition: PropTypes.string,\n  onChange: PropTypes.func\n};\nexport default Photo;","export default (function (theme) {\n  return {\n    root: {\n      display: 'block',\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      background: 'black',\n      overflow: 'hidden'\n    },\n    inner: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    xyTags: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    img: {\n      display: 'block'\n    },\n    brokenImg: {\n      display: 'none'\n    },\n    formControl: {\n      width: '100%'\n    }\n  };\n});","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { RawImage } from './RawImage';\nimport style from './PhotoGrid.style';\nimport { AppContext } from '@morphoto/client-common';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(style);\n\nvar PhotoGrid = function PhotoGrid(_ref) {\n  var photos = _ref.photos,\n      columns = _ref.columns,\n      multiSelect = _ref.multiSelect,\n      onDelete = _ref.onDelete,\n      onTileClick = _ref.onTileClick,\n      allowDelete = _ref.allowDelete;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectMode = _useState2[0],\n      setSelectMode = _useState2[1];\n\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      getPhotoUrls = _useContext.getPhotoUrls;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedItems = _useState4[0],\n      setSelectedItems = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      urls = _useState6[0],\n      setUrls = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      deleteConfirm = _useState8[0],\n      setDeleteConfirm = _useState8[1];\n\n  var handleAddToSelection = function handleAddToSelection(e, id) {\n    e.preventDefault();\n    e.stopPropagation();\n    setSelectMode(true);\n    toggleListItem(id);\n  };\n\n  var handleCancelSelection = function handleCancelSelection() {\n    setSelectMode(false);\n    setSelectedItems([]);\n  };\n\n  var onDeleteConfirm = function onDeleteConfirm(confirmation) {\n    setDeleteConfirm(false);\n    if (confirmation === true && selectedItems.length < photos.length) onDelete(selectedItems);\n    handleCancelSelection();\n  };\n\n  var toggleListItem = function toggleListItem(id) {\n    var index = selectedItems.indexOf(id);\n    if (index < 0) setSelectedItems([].concat(_toConsumableArray(selectedItems), [id]));else {\n      var remaining = selectedItems.filter(function (arrId) {\n        return arrId !== id;\n      });\n      if (remaining.length === 0) handleCancelSelection();\n      setSelectedItems(remaining);\n    }\n  };\n\n  useEffect(function () {\n    photos.forEach(\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(ph) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = setUrls;\n                _context.t1 = _objectSpread;\n                _context.t2 = {};\n                _context.t3 = urls;\n                _context.t4 = _defineProperty;\n                _context.t5 = {};\n                _context.t6 = ph.id;\n                _context.next = 9;\n                return getPhotoUrls(ph, ['thumb', 'medium']);\n\n              case 9:\n                _context.t7 = _context.sent;\n                _context.t8 = (0, _context.t4)(_context.t5, _context.t6, _context.t7);\n                _context.t9 = (0, _context.t1)(_context.t2, _context.t3, _context.t8);\n                (0, _context.t0)(_context.t9);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }, [photos]);\n\n  var handlePhotoTap = function handlePhotoTap(e, photo) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (allowDelete && selectMode) toggleListItem(photo.id);else onTileClick(photo.id);\n  };\n\n  return React.createElement(\"div\", null, React.createElement(GridList, {\n    cols: columns,\n    cellHeight: 200,\n    className: classes.root\n  }, photos.map(function (photo, idx) {\n    var selected = selectedItems.indexOf(photo.id) > -1;\n    return React.createElement(GridListTile, {\n      key: \"gridTile\".concat(idx),\n      onClick: function onClick(e) {\n        return handlePhotoTap(e, photo);\n      },\n      className: classNames(classes.tile, selectMode && !allowDelete && classes.notDeleteable, selectMode && allowDelete && !selected && classes.unSelectedTile, selectMode && selected && classes.selectedTile)\n    }, React.createElement(RawImage, {\n      photo: photo,\n      sizePriority: ['medium', 'thumb', 'large'],\n      cover: true,\n      className: classes.img\n    }), allowDelete && multiSelect && React.createElement(Fab, {\n      size: \"small\",\n      \"aria-label\": \"Add\",\n      className: classes.addFab,\n      onClick: function onClick(e) {\n        return handleAddToSelection(e, photo.id);\n      }\n    }, !selectMode || !selected ? React.createElement(AddIcon, null) : React.createElement(RemoveIcon, null)), React.createElement(GridListTileBar, {\n      title: React.createElement(\"span\", null, dates.formatDate(photo.takenOn, 'll LT'))\n    }));\n  })), React.createElement(Snackbar, {\n    open: selectMode,\n    autoHideDuration: null,\n    ContentProps: {\n      'aria-describedby': 'snackbar-fab-message-id',\n      className: classes.snackbarContent\n    },\n    message: React.createElement(\"span\", {\n      id: \"snackbar-fab-message-id\"\n    }, selectedItems.length >= photos.length ? 'You can\\'t delete all the photos. delete the series instead.' : \"\".concat(selectedItems.length, \" Photos selected\")),\n    action: React.createElement(\"div\", null, React.createElement(Button, {\n      color: \"inherit\",\n      disabled: selectedItems.length >= photos.length,\n      size: \"small\",\n      onClick: function onClick() {\n        return setDeleteConfirm(true);\n      }\n    }, \"Delete\"), React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: function onClick() {\n        return handleCancelSelection();\n      }\n    }, \"Cancel\")),\n    className: classes.snackbar\n  }), React.createElement(DeleteDialog, {\n    open: deleteConfirm,\n    onConfirm: onDeleteConfirm,\n    title: \"Delete \".concat(selectedItems.length, \" Photos\"),\n    message: \"Are you sure you want to delete these photos?\"\n  }));\n};\n\nPhotoGrid.propTypes = {\n  photos: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  multiSelect: PropTypes.bool,\n  allowDelete: PropTypes.bool,\n  onDelete: PropTypes.func,\n  onTileClick: PropTypes.func.isRequired\n};\nPhotoGrid.defaultProps = {\n  multiSelect: true,\n  columns: 2\n};\nexport default PhotoGrid;","import { red } from '@material-ui/core/colors';\nexport default (function (theme) {\n  return {\n    root: {},\n    tile: {},\n    addFab: {\n      position: 'absolute',\n      zIndex: 10,\n      top: theme.spacing(1),\n      left: theme.spacing(1),\n      opacity: 0.3\n    },\n    notDeleteable: {\n      background: theme.palette.primary.dark,\n      opacity: 0.1\n    },\n    unSelectedTile: {\n      '& img': {\n        opacity: 0.7\n      }\n    },\n    selectedTile: {\n      padding: \"\".concat(theme.spacing(2), \"px!important\"),\n      '& img': {\n        opacity: 1\n      }\n    },\n    img: {},\n    snackbarContent: {\n      backgroundColor: red[700]\n    },\n    snackbar: {}\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: 'white',\n      zIndex: 10,\n      display: 'flex',\n      flexDirection: 'column',\n      position: 'absolute',\n      height: '50%',\n      top: '45%',\n      left: '0',\n      transform: 'translateY(-50%)'\n    },\n    sliderLabel: {\n      display: 'block',\n      flexGrow: 1,\n      textAlign: 'center',\n      padding: theme.spacing(3, 0, 3, 0),\n      textShadow: '0 0 5px black, 0 0 5px black'\n    },\n    vertical: {\n      padding: '0px 31px!important',\n      width: '4px!important'\n    },\n    rail: {\n      width: \"4px!important\",\n      background: theme.palette.primary.dark,\n      boxShadow: '0 0 10px 5px black'\n    },\n    track: {\n      width: \"4px!important\",\n      background: theme.palette.primary.main\n    },\n    thumb: {\n      background: theme.palette.primary.main,\n      border: \"1px solid \".concat(theme.palette.primary.dark),\n      marginLeft: '-8px !important',\n      width: 20,\n      height: 20\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar PhotoFadeSlider = function PhotoFadeSlider(_ref) {\n  var defaultValue = _ref.defaultValue,\n      onChange = _ref.onChange;\n  var classes = useStyles();\n\n  var _useState = useState(defaultValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      slider = _useState2[0],\n      setSlider = _useState2[1];\n\n  var onSliderMove = function onSliderMove(event, value) {\n    setSlider(value);\n    onChange(value);\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Typography, {\n    className: classes.sliderLabel,\n    color: \"inherit\",\n    variant: \"caption\"\n  }, \"New\"), React.createElement(Slider, {\n    classes: {\n      vertical: classes.vertical,\n      rail: classes.rail,\n      track: classes.track,\n      thumb: classes.thumb\n    },\n    value: slider,\n    \"aria-labelledby\": \"label\",\n    onChange: onSliderMove,\n    orientation: \"vertical\"\n  }), React.createElement(Typography, {\n    className: classes.sliderLabel,\n    color: \"inherit\",\n    variant: \"caption\"\n  }, \"Reference\"));\n};\n\nPhotoFadeSlider.propTypes = {\n  defaultValue: PropTypes.number,\n  onChange: PropTypes.func\n};\nPhotoFadeSlider.defaultProps = {\n  defaultValue: 100,\n  onChange: function onChange() {}\n};\nexport default PhotoFadeSlider;","export { default as RawImage } from './RawImage';\nexport { default as Photo } from './Photo';\nexport { default as BrokenImg } from './BrokenImg';\nexport { default as PhotoGrid } from './PhotoGrid';\nexport { default as PhotoFadeSlider } from './PhotoFadeSlider';","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { getWholeSeriesPhotoUpdate, allSeriesPhotoUpdate, feedUpdate } from './updateQueries';\nimport { createPhoto, newPhotoKeys } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nimport _ from 'lodash';\nvar withMutation = graphql(createPhoto, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      createPhotoMutation: function () {\n        var _createPhotoMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(series, newPhoto, ext) {\n          var newPhotoInput, _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  newPhotoInput = _.cloneDeep(newPhoto);\n\n                  if (!newPhotoInput.seriesId && ownProps.activeSeries) {\n                    newPhotoInput.seriesId = ownProps.activeSeries;\n                  }\n\n                  _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                  meUserSummary = {\n                    id: id,\n                    gravatar: gravatar,\n                    gravatarProfile: gravatarProfile,\n                    username: username,\n                    __typename: 'UserSummary'\n                  };\n                  variables = {\n                    photo: _.pick(newPhotoInput, newPhotoKeys),\n                    ext: ext\n                  };\n                  optimisticResponse = createOptimisticResponse({\n                    meUserSummary: meUserSummary,\n                    series: series,\n                    newPhoto: newPhoto,\n                    ext: ext\n                  });\n                  _context.next = 8;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, createPhoto);\n\n                case 8:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({\n                      series: series\n                    })\n                  }).then(function (data) {\n                    console.log('createPhotoMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function createPhotoMutation(_x, _x2, _x3) {\n          return _createPhotoMutation.apply(this, arguments);\n        }\n\n        return createPhotoMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesPhotoUpdate(store, data.createPhoto.photo);\n    allSeriesPhotoUpdate(store, context.series, data.createPhoto.photo);\n    feedUpdate(store, context.series, data.createPhoto.photo);\n  };\n};\n\nvar createOptimisticResponse = function createOptimisticResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      series = _ref3.series,\n      newPhoto = _ref3.newPhoto,\n      ext = _ref3.ext;\n  return {\n    createPhoto: {\n      photo: {\n        id: newPhoto.id,\n        meta: newPhoto.meta || null,\n        seriesId: series.id,\n        note: newPhoto.note || '',\n        createdOn: Date.now().toString(),\n        createdUser: meUserSummary,\n        updatedUser: meUserSummary,\n        createdBy: meUserSummary.id,\n        updatedBy: meUserSummary.id,\n        uploadToken: newPhoto.uploadToken,\n        updatedOn: Date.now().toString(),\n        seriesCreatedBy: series.createdUser.id,\n        takenOn: newPhoto.takenOn,\n        coords: newPhoto.coords || null,\n        tags: newPhoto.tags || [],\n        paths: {\n          base: null,\n          large: null,\n          orig: null,\n          thumb: null,\n          medium: null,\n          __typename: 'Paths'\n        },\n        __typename: 'Photo'\n      },\n      preAuth: null,\n      __typename: 'NewPhoto'\n    }\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { allSeriesPhotoUpdate, feedUpdate, getWholeSeriesPhotoUpdate } from './updateQueries';\nimport { deletePhoto } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nvar withMutation = graphql(deletePhoto, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      deletePhotoMutation: function () {\n        var _deletePhotoMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(photoId) {\n          var variables, optimisticResponse, mutationStackId;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  variables = {\n                    seriesId: ownProps.series.id,\n                    photoId: photoId\n                  };\n                  optimisticResponse = {\n                    deletePhoto: photoId\n                  };\n                  _context.next = 4;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, deletePhoto);\n\n                case 4:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({\n                      series: ownProps.series\n                    })\n                  }).then(function (data) {\n                    console.log('deletePhotoMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function deletePhotoMutation(_x) {\n          return _deletePhotoMutation.apply(this, arguments);\n        }\n\n        return deletePhotoMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('updateThunk', {\n      context: context,\n      data: data\n    });\n    allSeriesPhotoUpdate(store, null, {\n      id: data.deletePhoto\n    }, true);\n    getWholeSeriesPhotoUpdate(store, {\n      id: data.deletePhoto,\n      seriesId: context.series.id\n    }, true);\n    feedUpdate(store, context.series, {\n      id: data.deletePhoto,\n      seriesId: context.series.id\n    }, true);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { allSeriesUpdate, feedUpdate, userSeriesUpdate } from './updateQueries';\nimport { deleteSeries } from '../mutations';\nimport { allSeries, userSeries, getMyFeed } from '../queries';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nvar withMutation = graphql(deleteSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      deleteSeriesMutation: function () {\n        var _deleteSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var variables, optimisticResponse, mutationStackId;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  variables = {\n                    id: ownProps.activeSeries\n                  };\n                  optimisticResponse = {\n                    deleteSeries: ownProps.activeSeries\n                  };\n                  _context.next = 4;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, deleteSeries);\n\n                case 4:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    refetchQueries: [{\n                      query: allSeries,\n                      variables: {\n                        limit: 100\n                      }\n                    }, {\n                      query: userSeries\n                    }, {\n                      query: getMyFeed\n                    }],\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk()\n                  }).then(function (data) {\n                    console.log('deleteSeriesMutation:: done', {\n                      data: data,\n                      mutationStackId: mutationStackId\n                    });\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function deleteSeriesMutation() {\n          return _deleteSeriesMutation.apply(this, arguments);\n        }\n\n        return deleteSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('deleteSeriesMutation::updateThunk', {\n      data: data\n    });\n    userSeriesUpdate(store, data.deleteSeries, true);\n    allSeriesUpdate(store, {\n      id: data.deleteSeries\n    }, true);\n    feedUpdate(store, {\n      id: data.deleteSeries\n    }, null, true);\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { watchUpdate } from './updateQueries';\nimport { unWatchSeries } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nvar withMutation = graphql(unWatchSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      unWatchSeriesMutation: function () {\n        var _unWatchSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var variables, optimisticResponse, mutationStackId;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  variables = {\n                    seriesId: ownProps.activeSeries\n                  };\n                  optimisticResponse = {\n                    unWatchSeries: ownProps.activeSeries\n                  };\n                  _context.next = 4;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, unWatchSeries);\n\n                case 4:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk()\n                  }).then(function (data) {\n                    console.log('unWatchSeriesMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function unWatchSeriesMutation() {\n          return _unWatchSeriesMutation.apply(this, arguments);\n        }\n\n        return unWatchSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    watchUpdate(store, data.unWatchSeries, true);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { getWholeSeriesPhotoUpdate, allSeriesPhotoUpdate, feedUpdate } from './updateQueries';\nimport { updatePhoto, updatePhotoKeys } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nimport _ from 'lodash';\nvar withMutation = graphql(updatePhoto, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      updatePhotoMutation: function () {\n        var _updatePhotoMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(series, photo, photoDelta) {\n          var newUpdatePhoto, _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  newUpdatePhoto = _.pick(photoDelta, updatePhotoKeys);\n\n                  if (newUpdatePhoto.tags && newUpdatePhoto.tags.length > 0) {\n                    newUpdatePhoto.tags = newUpdatePhoto.tags.map(function (t) {\n                      var newT = _.pick(t, ['label', 'typeId', 'coords']);\n\n                      if (newT.coords) newT.coords = _.pick(newT.coords, ['x', 'y']);\n                      return newT;\n                    });\n                  }\n\n                  _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                  meUserSummary = {\n                    id: id,\n                    gravatar: gravatar,\n                    gravatarProfile: gravatarProfile,\n                    username: username,\n                    __typename: 'UserSummary'\n                  };\n                  variables = {\n                    photo: newUpdatePhoto\n                  };\n                  optimisticResponse = createOptimisticResponse({\n                    meUserSummary: meUserSummary,\n                    newUpdatePhoto: newUpdatePhoto,\n                    photoDelta: photoDelta\n                  });\n                  _context.next = 8;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, updatePhoto);\n\n                case 8:\n                  mutationStackId = _context.sent;\n                  console.log('optimisticresponse', optimisticResponse);\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({\n                      photo: photo,\n                      series: series\n                    })\n                  }).then(function (data) {\n                    console.log('updatePhotoMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 11:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function updatePhotoMutation(_x, _x2, _x3) {\n          return _updatePhotoMutation.apply(this, arguments);\n        }\n\n        return updatePhotoMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesPhotoUpdate(store, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    allSeriesPhotoUpdate(store, context.series, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    feedUpdate(store, context.series, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nvar createOptimisticResponse = function createOptimisticResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      photo = _ref3.photo,\n      photoDelta = _ref3.photoDelta;\n  return {\n    updatePhoto: _objectSpread({}, photo, {}, photoDelta, {\n      updatedUser: meUserSummary,\n      updatedBy: meUserSummary.id,\n      __typename: 'Photo'\n    })\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { getWholeSeriesUpdate, allSeriesUpdate, feedUpdate } from './updateQueries';\nimport { updateSeries, updateSeriesKeys } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nimport _ from 'lodash';\nexport var withMutation = graphql(updateSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      updateSeriesMutation: function () {\n        var _updateSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(series, seriesDelta) {\n          var _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                  meUserSummary = {\n                    id: id,\n                    gravatar: gravatar,\n                    gravatarProfile: gravatarProfile,\n                    username: username,\n                    __typename: 'UserSummary'\n                  };\n                  variables = {\n                    series: _.pick(seriesDelta, updateSeriesKeys)\n                  };\n                  optimisticResponse = createOptimisticResponse({\n                    meUserSummary: meUserSummary,\n                    series: series,\n                    seriesDelta: seriesDelta\n                  });\n                  _context.next = 6;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, updateSeries);\n\n                case 6:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({\n                      series: series\n                    })\n                  }).then(function (data) {\n                    console.log('updateSeriesMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function updateSeriesMutation(_x, _x2) {\n          return _updateSeriesMutation.apply(this, arguments);\n        }\n\n        return updateSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesUpdate(store, data.updateSeries);\n    allSeriesUpdate(store, data.updateSeries);\n    feedUpdate(store, data.updateSeries.series, context.series.photos[0]);\n  };\n};\n\nvar createOptimisticResponse = function createOptimisticResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      series = _ref3.series,\n      seriesDelta = _ref3.seriesDelta;\n  return {\n    updateSeries: _objectSpread({}, series, {}, seriesDelta, {\n      updatedUser: meUserSummary,\n      updatedBy: meUserSummary.id,\n      __typename: 'Series'\n    })\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { watchUpdate } from './updateQueries';\nimport { watchSeries } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nvar withMutation = graphql(watchSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      watchSeriesMutation: function () {\n        var _watchSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var variables, optimisticResponse, mutationStackId;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  variables = {\n                    seriesId: ownProps.activeSeries\n                  };\n                  optimisticResponse = {\n                    watchSeries: ownProps.activeSeries\n                  };\n                  _context.next = 4;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, watchSeries);\n\n                case 4:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk()\n                  }).then(function (data) {\n                    console.log('watchSeriesMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function watchSeriesMutation() {\n          return _watchSeriesMutation.apply(this, arguments);\n        }\n\n        return watchSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    watchUpdate(store, data.watchSeries);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { fade, lighten } from '@material-ui/core/styles/colorManipulator';\nimport { config } from '@morphoto/client-common';\nvar typography = {\n  useNextVariants: true\n};\nvar overrides = {\n  MuiDialog: {\n    paper: {\n      '@media (max-width:321px)': {\n        margin: 10\n      }\n    },\n    paperFullWidth: {\n      '@media (max-width:321px)': {\n        width: 'calc(100% - 20px)'\n      }\n    }\n  }\n};\nvar colors = {\n  jet: '#3a3335',\n  rose: '#d81e5b',\n  redorange: '#f0544f',\n  papayawhip: '#FDF0D5',\n  cblue: '#C6D8D3'\n};\nvar home = {\n  palette: {\n    jet: {\n      main: '#3a3335'\n    },\n    rose: {\n      main: '#d81e5b'\n    },\n    redorange: {\n      main: '#f0544f'\n    },\n    papayawhip: {\n      main: '#FDF0D5'\n    },\n    cblue: {\n      main: '#C6D8D3'\n    },\n    primary: {\n      main: colors.redorange\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.jet,\n      secondary: fade(colors.jet, 0.7)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nvar homeTheme = createMuiTheme(home);\nvar access = Object.keys(config.ACCESS).reduce(function (acc, key) {\n  var accessObj = config.ACCESS[key];\n  var contrastText = homeTheme.palette.getContrastText(accessObj.color);\n  return _objectSpread({}, acc, _defineProperty({}, key, createMuiTheme({\n    palette: {\n      primary: {\n        main: accessObj.color\n      },\n      background: {\n        default: accessObj.color,\n        paper: accessObj.color\n      },\n      text: {\n        primary: contrastText,\n        secondary: fade(contrastText, 0.7)\n      }\n    }\n  })));\n}, {});\nvar series = {\n  palette: {\n    primary: {\n      main: lighten(colors.jet, 0.1)\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.jet,\n      secondary: fade(colors.jet, 0.7)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nvar login = {\n  palette: {\n    primary: {\n      main: colors.redorange\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.papayawhip,\n      secondary: fade(colors.papayawhip, 0.7)\n    },\n    background: {\n      default: colors.jet,\n      paper: colors.jet\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nexport default {\n  home: homeTheme,\n  login: createMuiTheme(login),\n  series: createMuiTheme(series),\n  access: access\n};","export default {\n  '@global': {\n    'body, #root': {\n      height: '100%'\n    },\n    'html, body': {\n      overflow: 'hidden',\n      position: 'fixed',\n      fallbacks: [{\n        overflow: 'hidden'\n      }],\n      overscrollBehavior: 'contain',\n      height: '100%',\n      width: '100%'\n    },\n    '.Section__container___3YYTG': {\n      height: '100%'\n    },\n    ':not(input):not(textarea), :not(input):not(textarea)::after, :not(input):not(textarea)::before': {\n      W: 'none',\n      userSelect: 'none',\n      cursor: 'default'\n    },\n    'input, button, textarea, :focus': {\n      outline: 'none'\n    }\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nvar style = {\n  background: 'black',\n  height: '100%',\n  position: 'relative'\n};\n\nvar CosmosBlackBackground = function CosmosBlackBackground(_ref) {\n  var children = _ref.children;\n  return React.createElement(\"div\", {\n    style: style\n  }, children);\n};\n\nCosmosBlackBackground.propTypes = {\n  children: PropTypes.any.isRequired\n};\nexport default CosmosBlackBackground;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { makeStyles } from '@material-ui/core/styles';\nimport themes, { globalStyle } from '@morphoto/themes';\nimport { AppContextProvider } from '@morphoto/client-common';\nimport { FakeData } from '@morphoto/mock';\nimport { fakeGlobalActions } from './utils';\n\nvar style = function style(theme) {\n  return {\n    '@global': _objectSpread({}, globalStyle['@global'], {\n      'html, body, #root': {\n        minHeight: '10px',\n        minWidth: '10px',\n        height: '100%'\n      }\n    })\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MaterialUIWrap = function MaterialUIWrap(_ref) {\n  var children = _ref.children,\n      context = _ref.context,\n      theme = _ref.theme,\n      outerTheme = _ref.outerTheme,\n      iOS = _ref.iOS,\n      noTheme = _ref.noTheme;\n  var innerTheme = theme || themes.home;\n  useStyles();\n  var deviceOverride = context && context.device ? _objectSpread({}, context.device) : {};\n  if (iOS !== null) deviceOverride.ios = iOS;\n\n  var contextValue = _objectSpread({}, FakeData.fakeAppContext(), {\n    globalActions: fakeGlobalActions,\n    signedIn: true\n  }, context, {\n    device: deviceOverride\n  });\n\n  if (noTheme) {\n    return React.createElement(AppContextProvider, {\n      value: contextValue\n    }, children);\n  }\n\n  return React.createElement(AppContextProvider, {\n    value: contextValue\n  }, React.createElement(ThemeProvider, {\n    theme: outerTheme || innerTheme\n  }, React.createElement(CssBaseline, null), React.createElement(ThemeProvider, {\n    theme: innerTheme\n  }, children)));\n};\n\nMaterialUIWrap.propTypes = {\n  children: PropTypes.any.isRequired,\n  noTheme: PropTypes.bool,\n  theme: PropTypes.object,\n  iOS: PropTypes.bool,\n  outerTheme: PropTypes.object,\n  context: PropTypes.object\n};\nexport default MaterialUIWrap;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.randomLocation = exports.fakePastDate = void 0;\n\nvar _random = require(\"./random\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _turf = require(\"@turf/turf\");\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _faker = _interopRequireDefault(require(\"faker\"));\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _random2 = require(\"../dist/random\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar tagColors = ['#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B', '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'];\nvar EVENT_RELATIONS = ['OWNED', 'CONTRIBUTED', 'WATCHING'];\n\nvar fakePastDate = function fakePastDate() {\n  return _moment[\"default\"].utc(_faker[\"default\"].date.past()).format('x');\n};\n\nexports.fakePastDate = fakePastDate;\n\nvar randomLocation = function randomLocation(latLngsAarr) {\n  var coords = null;\n\n  if (latLngsAarr && latLngsAarr.length > 0) {\n    coords = (0, _random.randomArrayEl)(latLngsAarr);\n  } else {\n    coords = [_lodash[\"default\"].random(-180, 179, true), _lodash[\"default\"].random(-85, 85, true)];\n  }\n\n  var newPoint = (0, _turf.transformTranslate)((0, _turf.point)(coords), _lodash[\"default\"].random(0, 2, true), _lodash[\"default\"].random(0, 360, true), {\n    units: 'kilometers'\n  });\n  return newPoint.geometry.coordinates;\n};\n\nexports.randomLocation = randomLocation;\n\nvar FakeData = function FakeData(userPool, metaConfig, tagConfig) {\n  var _this = this;\n\n  _classCallCheck(this, FakeData);\n\n  _defineProperty(this, \"basicObj\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var createdUser = FakeData.userSummary(attribs.createdUser || (0, _random.randomArrayEl)(_this.userPool));\n    var updatedUser = FakeData.userSummary(attribs.updatedUser || createdUser);\n    return {\n      id: attribs.id || (0, _v[\"default\"])(),\n      createdBy: createdUser.id,\n      updatedBy: updatedUser.id,\n      createdUser: createdUser,\n      updatedUser: updatedUser,\n      createdOn: attribs.createdOn || fakePastDate(),\n      updatedOn: attribs.updatedOn || fakePastDate()\n    };\n  });\n\n  _defineProperty(this, \"getUser\", function (id) {\n    return _this.userPool.find(function (user) {\n      return user.id === id;\n    });\n  });\n\n  _defineProperty(this, \"series\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var basicAttribs = _this.basicObj(attribs);\n\n    var fakeWidth = 800 + _lodash[\"default\"].random(-3, 3);\n\n    var fakeHeight = 600 + _lodash[\"default\"].random(-3, 3);\n\n    var photoPlaceholderArr = attribs.numPhotos ? (0, _random2.filledArray)(attribs.numPhotos) : (0, _random.randomMap)(1, 10, function (val, idx) {\n      return idx;\n    });\n\n    var whichHighlight = _lodash[\"default\"].random(0, photoPlaceholderArr.length - 1);\n\n    var access = attribs.access || (0, _random.randomArrayEl)(['PRIVATE', 'OPEN', 'PUBLIC']);\n    var photos = attribs.photos || photoPlaceholderArr.map(function (val, idx) {\n      return _this.photo({\n        width: fakeWidth,\n        height: fakeHeight,\n        createdUser: access === 'OPEN' ? null : basicAttribs.createdUser,\n        updatedUser: access === 'OPEN' ? null : basicAttribs.updatedUser,\n        featured: idx === whichHighlight,\n        hasPaths: attribs.hasPaths !== false\n      });\n    });\n    photos.forEach(function (ph) {\n      ph.seriesId = basicAttribs.id;\n      ph.seriesCreatedBy = basicAttribs.createdBy;\n    });\n    var featured = attribs.featured;\n\n    if (!featured && photos && photos.length > 0) {\n      featured = !photos ? null : FakeData.photoSummary((0, _random.randomArrayEl)(photos));\n    }\n\n    var latest = attribs.featured;\n\n    if (!latest && photos && photos.length > 0) {\n      latest = !photos ? null : FakeData.photoSummary((0, _random.randomArrayEl)(photos));\n    }\n\n    return _objectSpread({}, basicAttribs, {\n      featured: featured,\n      latest: latest,\n      name: attribs.name || _faker[\"default\"].name.title(),\n      objType: 'SERIES',\n      access: access,\n      meta: JSON.stringify(attribs.meta || {\n        project: '926ff265-e22b-400d-ae00-a817d69d5042',\n        reach: '4f310e81-e1f8-45e7-9341-859e7f4e2208'\n      }),\n      watchers: 0,\n      note: attribs.nite || _faker[\"default\"].lorem.paragraphs(_lodash[\"default\"].random(3, 4)).replace('\\n', '\\n\\n'),\n      coords: attribs.coords || [-120.333379, 44.629701],\n      direction: attribs.direction || (0, _random.randomChance)(1, 2) ? _lodash[\"default\"].random(0, 359) : null,\n      photos: photos,\n      photoCount: photos.length\n    });\n  });\n\n  _defineProperty(this, \"event\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref = attribs.series || _this.series(),\n        photos = _ref.photos,\n        series = _objectWithoutProperties(_ref, [\"photos\"]);\n\n    var photo = (0, _random.randomArrayEl)(photos);\n    return {\n      series: FakeData.seriesSummary(series),\n      photo: FakeData.photoSummary(photo),\n      relation: (0, _random.randomArrayEl)(EVENT_RELATIONS)\n    };\n  });\n\n  _defineProperty(this, \"photo\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var basic = _this.basicObj(attribs);\n\n    var templateObj = _objectSpread({}, basic, {\n      takenOn: basic.createdOn,\n      objType: 'PHOTO',\n      base64: null,\n      seriesId: attribs.seriesId || null,\n      seriesCreatedBy: attribs.seriesCreatedBy || null,\n      coords: attribs.coords || [-120.333379, 44.629701],\n      rawData: attribs.rawData || {\n        a: 1,\n        b: 2\n      },\n      note: attribs.note || _faker[\"default\"].lorem.paragraphs(_lodash[\"default\"].random(1, 4)),\n      meta: JSON.stringify(attribs.meta || {\n        user: '926ff265-e22b-400d-ae00-a817d69d5042'\n      }),\n      tags: attribs.tags || _this.tags({\n        width: attribs.width,\n        height: attribs.height\n      })\n    });\n\n    if (attribs.hasPaths) templateObj.paths = _this.getImagePaths(attribs.width || 800, attribs.height || 600);\n    return templateObj;\n  });\n\n  _defineProperty(this, \"getImagePaths\", function () {\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 800;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 600;\n    var strict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var newHeight = strict ? height : _lodash[\"default\"].random(-3, 3) + height;\n    var newWidth = strict ? width : _lodash[\"default\"].random(-3, 3) + width;\n    return {\n      base: \"https://placeimg.com/\".concat(newWidth, \"/\").concat(newHeight, \"/\"),\n      thumb: \"nature\",\n      medium: \"nature\",\n      large: \"nature\",\n      orig: \"nature\"\n    };\n  });\n\n  _defineProperty(this, \"tags\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return _this.appContext.tagConfig.reduce(function (acc, tagType) {\n      var pool = _lodash[\"default\"].shuffle(_toConsumableArray(tagType.values));\n\n      var newItems = (0, _random.randomMap)(1, pool.length, function (num, idt) {\n        return FakeData.tag({\n          label: pool[idt].label,\n          id: pool[idt].id,\n          typeId: tagType.id,\n          width: attribs.width,\n          height: attribs.height\n        });\n      });\n      return [].concat(_toConsumableArray(acc), _toConsumableArray(newItems));\n    }, []);\n  });\n\n  this.userPool = userPool || (0, _random.randomMap)(1, 10, function () {\n    return FakeData.user();\n  });\n  this.appContext = FakeData.fakeAppContext(metaConfig, tagConfig, this.userPool);\n};\n\n_defineProperty(FakeData, \"fakeAppContext\", function (metaConfig, tagConfig, userPool) {\n  var sampleUser = (0, _random.randomArrayEl)(userPool);\n  return {\n    metaConfig: metaConfig || {\n      user: {\n        objType: 'PHOTO',\n        label: 'User',\n        \"default\": sampleUser,\n        render: function render(key) {\n          return \"User 1: \".concat(sampleUser ? sampleUser.username : 'User 1');\n        }\n      }\n    },\n    currentUser: sampleUser,\n    getPhotoUrls: FakeData.getPhotoUrls,\n    onAvatarClick: function onAvatarClick(username) {\n      return console.log('onAvatarClick', username);\n    },\n    tagConfig: tagConfig || [FakeData.freeBothTags, FakeData.structureTags, FakeData.treeTags, FakeData.emotionTags, FakeData.seasonTags]\n  };\n});\n\n_defineProperty(FakeData, \"getPhotoUrls\", function _callee(photo, sizePriority) {\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n\n          if (!(!photo.paths || photo.paths.length === 0)) {\n            _context.next = 3;\n            break;\n          }\n\n          return _context.abrupt(\"return\", Promise.reject(new Error('No Photos Found')));\n\n        case 3:\n          console.log('FAKEDATA: resolving image');\n          return _context.abrupt(\"return\", sizePriority.map(function (sp) {\n            return \"\".concat(photo.paths.base).concat(photo.paths[sp]);\n          }));\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 7]]);\n});\n\n_defineProperty(FakeData, \"photoSummary\", function (_ref2) {\n  var id = _ref2.id,\n      createdUser = _ref2.createdUser,\n      takenOn = _ref2.takenOn,\n      updatedOn = _ref2.updatedOn,\n      createdOn = _ref2.createdOn,\n      psid = _ref2.seriesId,\n      seriesCreatedBy = _ref2.seriesCreatedBy,\n      paths = _ref2.paths;\n  var templateObj = {\n    id: id,\n    createdUser: createdUser,\n    takenOn: takenOn,\n    updatedOn: updatedOn,\n    createdOn: createdOn,\n    seriesId: psid,\n    seriesCreatedBy: seriesCreatedBy,\n    paths: paths\n  };\n  return templateObj;\n});\n\n_defineProperty(FakeData, \"seriesSummary\", function (_ref3) {\n  var id = _ref3.id,\n      name = _ref3.name,\n      createdUser = _ref3.createdUser,\n      access = _ref3.access,\n      updatedOn = _ref3.updatedOn,\n      createdOn = _ref3.createdOn,\n      coords = _ref3.coords,\n      watchers = _ref3.watchers,\n      featured = _ref3.featured,\n      latest = _ref3.latest,\n      photoCount = _ref3.photoCount,\n      seriesStatus = _ref3.seriesStatus,\n      direction = _ref3.direction;\n  var templateObj = {\n    id: id,\n    name: name,\n    createdUser: createdUser,\n    access: access,\n    updatedOn: updatedOn,\n    createdOn: createdOn,\n    coords: coords,\n    watchers: watchers,\n    featured: featured,\n    latest: latest,\n    photoCount: photoCount,\n    seriesStatus: seriesStatus,\n    direction: direction\n  };\n  return templateObj;\n});\n\n_defineProperty(FakeData, \"userSummary\", function (_ref4) {\n  var id = _ref4.id,\n      gravatar = _ref4.gravatar,\n      gravatarProfile = _ref4.gravatarProfile,\n      username = _ref4.username;\n  return {\n    id: id,\n    gravatar: gravatar,\n    gravatarProfile: gravatarProfile,\n    username: username\n  };\n});\n\n_defineProperty(FakeData, \"tag\", function () {\n  var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    label: attribs.label,\n    id: attribs.id || (0, _v[\"default\"])(),\n    typeId: attribs.typeId,\n    xyCoords: attribs.width && attribs.height ? {\n      x: _lodash[\"default\"].random(20, attribs.width - 20),\n      y: _lodash[\"default\"].random(20, attribs.height - 20)\n    } : null\n  };\n});\n\n_defineProperty(FakeData, \"user\", function () {\n  var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    id: (0, _v[\"default\"])(),\n    objType: 'USER',\n    createdOn: attribs.createdOn || fakePastDate(),\n    updatedOn: attribs.updatedOn || fakePastDate(),\n    username: attribs.username || \"\".concat(_faker[\"default\"].name.firstName(), \" \").concat(_faker[\"default\"].name.lastName()),\n    gravatar: attribs.avatarSrc || \"https://placeimg.com/\".concat(_lodash[\"default\"].random(80, 100), \"/\").concat(_lodash[\"default\"].random(80, 100), \"/people\"),\n    gravatarProfile: 'https://s.gravatar.com/b65e93508e1b7eae0af790ec9c65093b.json',\n    watching: [],\n    meta: JSON.stringify(attribs.meta || {})\n  };\n});\n\n_defineProperty(FakeData, \"_freeBothTagsValues\", ['Groovy', 'Elbow', 'Boat', 'Anchovy', 'Garden', 'Sunday', 'Green#$@324', 'Beaver Stuff', '234Little Things', 'Spaceship', 'SAG', '(  Am I Right?    )', '{{{{\"\\'STEREO\\'\"}}}}}', 'mytag', 'XYTAGS', 'Generation', 'Frogs', 'randomTag', 'Januarry 2005', '2018'].map(function (label, idx) {\n  return {\n    label: label,\n    id: (0, _v[\"default\"])(),\n    count: idx * 31 + _lodash[\"default\"].random(1, 20)\n  };\n}));\n\n_defineProperty(FakeData, \"freeBothTags\", {\n  id: 'freeBothType',\n  label: 'Anything Goes Tag',\n  color: tagColors[8],\n  allowXY: true,\n  allowNonXY: true,\n  allowAdditions: true,\n  values: FakeData._freeBothTagsValues\n});\n\n_defineProperty(FakeData, \"treeTags\", {\n  id: 'treetypes',\n  label: 'Tree Types',\n  color: tagColors[1],\n  allowXY: true,\n  allowNonXY: false,\n  allowAdditions: true,\n  values: ['Elm', 'Birch', 'Palm', 'Cottonwood', 'Oak'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"structureTags\", {\n  id: 'structures',\n  label: 'Structures',\n  color: tagColors[2],\n  allowXY: true,\n  allowNonXY: false,\n  allowAdditions: false,\n  values: (0, _random.randomMap)(10, 15, function (val, idx) {\n    return {\n      label: \"Structure-\".concat(idx),\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"emotionTags\", {\n  id: 'emotions',\n  label: 'Emotions',\n  color: tagColors[3],\n  allowXY: false,\n  allowNonXY: true,\n  allowAdditions: true,\n  values: ['Indignation', 'Anger', 'Confusion', 'Ambivalence', 'Cautious'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"seasonTags\", {\n  id: 'season',\n  label: 'Season',\n  color: tagColors[5],\n  allowXY: false,\n  allowNonXY: true,\n  allowAdditions: false,\n  values: ['Winter', 'Spring', 'Summer', 'Fall'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\nvar _default = FakeData;\nexports[\"default\"] = _default;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport default require('./themes').default;\nexport var mapbox = require('./jss/mapbox.css').default;\nexport var roboto = require('./jss/typeface-roboto.css').default;\nexport var baseline = require('./jss/baseline.css').default;\nexport var globalStyle = {\n  '@global': _objectSpread({}, require('./jss/mapbox.css')['@global'], {}, require('./jss/typeface-roboto.css')['@global'])\n};","export var Actions = {\n  HOME_CHANGE_STATE: 'HOME_CHANGE_STATE',\n  HOME_CHANGE_ACTIVE_SERIES: 'HOME_CHANGE_ACTIVE_SERIES',\n  HOME_STATE_BACK: 'HOME_STATE_BACK',\n  MAP_HISTORY_POP: 'MAP_HISTORY_POP',\n  MAP_HISTORY_PUSH: 'MAP_HISTORY_PUSH',\n  MAP_HISTORY_CLEAR: 'MAP_HISTORY_CLEAR',\n  UPLOADER_START: 'UPLOADER_START',\n  UPLOADER_COMPLETE: 'UPLOADER_COMPLETE',\n  UPLOADER_UPDATE_PROGRESS: 'UPLOADER_UPDATE_PROGRESS',\n  OFFLINE_VIEWPORT_SAVE: 'OFFLINE_VIEWPORT_SAVE',\n  OFFLINE_SET_STATUS: 'OFFLINE_SET_STATUS',\n  SETFLAG: 'SETFLAG',\n  RESET_ALL_STATE: 'RESET_ALL_STATE'\n};\nexport default {\n  setHomeState: function setHomeState(newDomain, params) {\n    return {\n      type: Actions.HOME_CHANGE_STATE,\n      data: {\n        newDomain: newDomain,\n        params: params\n      }\n    };\n  },\n  homeStateBack: function homeStateBack() {\n    return {\n      type: Actions.HOME_STATE_BACK\n    };\n  },\n  setActiveSeries: function setActiveSeries(activeSeries, initialPhoto) {\n    return {\n      type: Actions.HOME_CHANGE_ACTIVE_SERIES,\n      data: {\n        activeSeries: activeSeries,\n        initialPhoto: initialPhoto\n      }\n    };\n  },\n  setFlag: function setFlag(flagName, flagVal) {\n    return {\n      type: Actions.SETFLAG,\n      data: {\n        flagName: flagName,\n        flagVal: flagVal\n      }\n    };\n  },\n  setOfflineViewport: function setOfflineViewport(viewport) {\n    return {\n      type: Actions.OFFLINE_VIEWPORT_SAVE,\n      data: viewport\n    };\n  },\n  setOfflineCompleted: function setOfflineCompleted(bVal) {\n    return {\n      type: Actions.OFFLINE_SET_STATUS,\n      data: bVal\n    };\n  },\n  popMapHistory: function popMapHistory() {\n    return {\n      type: Actions.MAP_HISTORY_POP\n    };\n  },\n  pushMapHistory: function pushMapHistory(viewportSave) {\n    return {\n      type: Actions.MAP_HISTORY_PUSH,\n      data: viewportSave\n    };\n  },\n  clearMapHistory: function clearMapHistory() {\n    return {\n      type: Actions.MAP_HISTORY_CLEAR\n    };\n  },\n  resetAllState: function resetAllState() {\n    return {\n      type: Actions.RESET_ALL_STATE\n    };\n  },\n  queueUpload: function queueUpload(uploadObj) {\n    return {\n      type: Actions.UPLOADER_START,\n      data: uploadObj\n    };\n  },\n  completeActiveUpload: function completeActiveUpload() {\n    return {\n      type: Actions.UPLOADER_COMPLETE\n    };\n  },\n  updateUploadProgress: function updateUploadProgress(newProgress) {\n    return {\n      type: Actions.UPLOADER_UPDATE_PROGRESS,\n      data: newProgress\n    };\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {};\n};\n\nvar useStyles = makeStyles(style);\n\nvar DeleteDialog = function DeleteDialog(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onConfirm = _ref.onConfirm,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    disableBackdropClick: true,\n    open: open,\n    disableEscapeKeyDown: true,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\"\n  }, title), React.createElement(DialogContent, null, React.createElement(Typography, null, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(false);\n    },\n    color: \"primary\"\n  }, \"No\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(true);\n    },\n    color: \"primary\"\n  }, \"Yes\")));\n};\n\nDeleteDialog.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n};\nexport default DeleteDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {};\n};\n\nvar useStyles = makeStyles(style);\n\nvar CancelConfirm = function CancelConfirm(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onConfirm = _ref.onConfirm,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    disableBackdropClick: true,\n    fullWidth: true,\n    open: open,\n    disableEscapeKeyDown: true,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\"\n  }, title), React.createElement(DialogContent, null, React.createElement(Typography, null, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(false);\n    },\n    color: \"primary\"\n  }, \"No\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(true);\n    },\n    color: \"secondary\"\n  }, \"Yes\")));\n};\n\nCancelConfirm.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n};\nexport default CancelConfirm;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Apple as AppleIcon } from '@morphoto/icons';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    icon: {\n      height: 50,\n      width: '100%',\n      margin: '0 auto',\n      color: theme.palette.error.main\n    },\n    title: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar FeatureDisabled = function FeatureDisabled(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onClose = _ref.onClose,\n      open = _ref.open,\n      icon = _ref.icon;\n  var classes = useStyles();\n  var IconComp = icon || AppleIcon;\n  return React.createElement(Dialog, {\n    className: classes.root,\n    fullWidth: true,\n    open: open,\n    PaperProps: {\n      style: {\n        maxWidth: 'none'\n      }\n    },\n    onClose: onClose,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\",\n    className: classes.title\n  }, title), React.createElement(DialogContent, null, React.createElement(IconComp, {\n    className: classes.icon\n  }), React.createElement(Typography, {\n    component: \"div\"\n  }, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onClose,\n    color: \"primary\"\n  }, \"Ok\")));\n};\n\nFeatureDisabled.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  icon: PropTypes.any,\n  message: PropTypes.any,\n  onClose: PropTypes.func.isRequired\n};\nexport default FeatureDisabled;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    body: {\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar BigText = function BigText(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      title = _ref.title,\n      body = _ref.body;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    onClose: onClose,\n    \"aria-labelledby\": \"simple-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    color: \"inherit\"\n  }))), React.createElement(DialogContent, null, React.createElement(Typography, {\n    variant: \"body2\",\n    className: classes.body\n  }, body)));\n};\n\nBigText.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  title: PropTypes.string,\n  body: PropTypes.string\n};\nexport default BigText;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    body: {},\n    textArea: {\n      whiteSpace: 'pre-line',\n      padding: theme.spacing(1),\n      border: \"1px solid \".concat(theme.palette.grey[200]),\n      background: theme.palette.grey[100]\n    },\n    dlgContent: {\n      overflow: 'hidden'\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar BigTextEdit = function BigTextEdit(_ref) {\n  var open = _ref.open,\n      onOk = _ref.onOk,\n      title = _ref.title,\n      body = _ref.body,\n      multiline = _ref.multiline;\n  var classes = useStyles();\n\n  var _useState = useState(body || ''),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    onClose: function onClose() {\n      return onOk(value);\n    }\n  }, React.createElement(DialogTitle, {\n    className: classes.title\n  }, title), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(TextField, {\n    className: classes.body,\n    multiline: multiline,\n    inputProps: {\n      className: classes.textArea\n    },\n    autoFocus: true,\n    fullWidth: true,\n    rows: 6,\n    rowsMax: 6,\n    onChange: function onChange(e) {\n      return setValue(e.target.value);\n    },\n    defaultValue: body\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(body);\n    }\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(value);\n    }\n  }, \"Ok\")));\n};\n\nBigTextEdit.propTypes = {\n  open: PropTypes.bool,\n  multiline: PropTypes.bool,\n  onOk: PropTypes.func,\n  title: PropTypes.string,\n  body: PropTypes.string\n};\nexport default BigTextEdit;","export { default as DeleteDialog } from './DeleteDialog';\nexport { default as CancelConfirm } from './CancelConfirm';\nexport { default as FeatureDisabled } from './FeatureDisabled';\nexport { default as BigText } from './BigText';\nexport { default as BigTextEdit } from './BigTextEdit';","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject17() {\n  var data = _taggedTemplateLiteral([\"\\n  query s3Credentials($seriesId: ID!, $photoId: ID!, $ext: String!)  {\\n    s3Credentials(seriesId: $seriesId, photoId: $photoId, ext: $ext)\\n  }\\n\"]);\n\n  _templateObject17 = function _templateObject17() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject16() {\n  var data = _taggedTemplateLiteral([\"\\nquery getWholeSeries($id: ID!) {\\n  series(id: $id) {\\n    ...seriesFragment\\n    photos {\\n      ...photoFragment\\n    }\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject16 = function _templateObject16() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject15() {\n  var data = _taggedTemplateLiteral([\"\\nquery userSearch($searchStr: String!, $limit: Int) {\\n  userSearch(searchStr: $searchStr, limit: $limit ){\\n    ...userFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject15 = function _templateObject15() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject14() {\n  var data = _taggedTemplateLiteral([\"\\nquery myFeed($start: String, $end: String, $limit: Int) {\\n  myFeed(start: $start, end: $end, limit: $limit) @connection(key: \\\"myFeed\\\"){\\n    feed {\\n      _id\\n      series {\\n        ...seriesSummaryFragment\\n      }\\n      photo {\\n        ...photoSummaryFragment\\n      }\\n      relation\\n      __typename\\n    }\\n    window\\n    __typename\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject14 = function _templateObject14() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\nquery geocode($search: String!) {\\n  geocoder(search: $search) {\\n    relevance\\n    text\\n    placeName\\n    bbox\\n    center\\n    # geoType\\n    # context\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\nquery getUser($userId: ID) {\\n  user(id: $userId){\\n    ...userFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesInGeoBoundsIdOnly($bounds: [Float], $limit: Int, $nextToken: String) {\\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: \\\"seriesInGeoBoundsSHORT\\\", filter: [\\\"bounds\\\"]){\\n    seriesSummaries {\\n      id\\n      name\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesInGeoBounds($bounds: [Float], $limit: Int, $nextToken: String) {\\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: \\\"seriesInGeoBounds\\\", filter: [\\\"bounds\\\"]){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\nquery tagSearch($limit: Int, $tag: String, $nextToken:  String) {\\n  tags(limit: $limit, tag: $tag, nextToken: $nextToken ){\\n    _id\\n    name\\n    count\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesWithTag($tag: String!, $limit: Int, $nextToken: String){\\n  tagSeries(tag: $tag, limit: $limit, nextToken: $nextToken)  @connection(key: \\\"tagSeries\\\", filter: [\\\"tag\\\"]){\\n    seriesSummaries{\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesFromList($seriesList: [ID]) {\\n  arraySeries(seriesIds: $seriesList) {\\n    ...seriesFragment\\n    photos {\\n      ...photoFragment\\n    }\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesFromList($seriesList: [ID]) {\\n  arraySeries(seriesIds: $seriesList) {\\n    ...seriesSummaryFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nquery keywordSearch($searchStr: String, $limit: Int, $nextToken: String) {\\n  keywordSearch(searchStr: $searchStr, limit: $limit, nextToken: $nextToken) {\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nquery userSeries($createdBy: ID) {\\n  userSeries(createdBy: $createdBy ) {\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nquery pollQuery($lastCheck: String!, $limit: Int, $nextToken: String) {\\n  changedSeries(lastCheck: $lastCheck, limit: $limit, nextToken: $nextToken) @connection(key: \\\"changedSeries\\\"){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nquery allSeries($limit: Int, $nextToken: String) {\\n  allSeries(limit: $limit, nextToken: $nextToken) @connection(key: \\\"allSeries\\\"){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nquery init {\\n  init\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from 'graphql-tag';\nimport { photoSummaryFragment, photoFragment, seriesSummaryFragment, seriesFragment, userFragment } from './fragments';\nexport var initQuery = gql(_templateObject());\nexport var allSeries = gql(_templateObject2(), seriesSummaryFragment);\nexport var pollQuery = gql(_templateObject3(), seriesSummaryFragment);\nexport var userSeries = gql(_templateObject4(), seriesSummaryFragment);\nexport var keywordSearch = gql(_templateObject5(), seriesSummaryFragment);\nexport var seriesSummaryFromList = gql(_templateObject6(), seriesSummaryFragment);\nexport var seriesFromList = gql(_templateObject7(), seriesFragment, photoFragment);\nexport var seriesWithTag = gql(_templateObject8(), seriesSummaryFragment);\nexport var tagSearch = gql(_templateObject9());\nexport var geoSeries = gql(_templateObject10(), seriesSummaryFragment);\nexport var geoSeriesIdOnly = gql(_templateObject11());\nexport var getUser = gql(_templateObject12(), userFragment);\nexport var geocode = gql(_templateObject13());\nexport var getMyFeed = gql(_templateObject14(), seriesSummaryFragment, photoSummaryFragment);\nexport var userSearch = gql(_templateObject15(), userFragment);\nexport var getWholeSeries = gql(_templateObject16(), seriesFragment, photoFragment);\nexport var getNewS3Credentials = gql(_templateObject17());","import { green, blue, red } from '@material-ui/core/colors';\nvar baseurl = process.env.REACT_APP_BASEURL;\nvar basename = process.env.REACT_APP_BASENAME;\nvar domain = process.env.REACT_APP_DOMAIN;\n\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n  domain = 'localhost';\n  basename = '';\n}\n\nvar mandatoryEnv = {\n  REACT_APP_MAPBOX_TOKEN: process.env.REACT_APP_MAPBOX_TOKEN,\n  REACT_APP_VERSION: process.env.REACT_APP_VERSION,\n  REACT_APP_CONTACT_EMAIL: process.env.REACT_APP_CONTACT_EMAIL,\n  REACT_APP_GRAPHQL: process.env.REACT_APP_GRAPHQL,\n  REACT_APP_AWS_REGION: process.env.REACT_APP_AWS_REGION,\n  REACT_APP_COGNITO_USER_POOL_ID: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n  REACT_APP_COGNITO_CLIENT_ID: process.env.REACT_APP_COGNITO_CLIENT_ID\n};\nObject.keys(mandatoryEnv).forEach(function (keyname) {\n  if (!mandatoryEnv[keyname]) {\n    console.error(\"You must set environment variable: \".concat(keyname));\n  }\n});\nexport var mapConfig = {\n  mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN\n};\nexport var endpoints = {\n  graphql: \"\".concat(process.env.REACT_APP_GRAPHQL, \"/api\"),\n  share: \"\".concat(process.env.REACT_APP_GRAPHQL, \"/share\")\n};\nexport var tagColors = ['#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B', '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'];\nexport var version = process.env.REACT_APP_VERSION;\nexport var contact = process.env.REACT_APP_CONTACT_EMAIL;\nexport var ACCESS = {\n  OPEN: {\n    label: 'Open',\n    description: 'Anyone can see and contribute photos to this series.',\n    color: green[500]\n  },\n  PRIVATE: {\n    label: 'Private',\n    description: 'Can only be seen by you.',\n    color: red[500]\n  },\n  PUBLIC: {\n    label: 'Public',\n    description: 'Anyone can see this series. Only the owner can add photos.',\n    color: blue[500]\n  }\n};\nexport var home = {\n  Offline: {\n    seriesImgsToCache: ['thumb', 'large'],\n    highestOfflineTileZoom: 12,\n    maxMapTileArea: 25000\n  },\n  AppStateTypes: {\n    FEED: 'feed',\n    MAP: 'map',\n    SEARCH: 'search',\n    PROFILE: 'profile',\n    SERIES: 'series',\n    SETTINGS: 'settings',\n    QRCAPTURE: 'QRCapture',\n    NEW_SERIES_CAMERA: 'new_series_camera',\n    NEW_SERIES_LIBRARY: 'new_series_library',\n    OFFLINE_DOWNLOAD: 'offline_download'\n  },\n  SEARCH_TABS: {\n    KEYWORD: 'keyword',\n    TAG: 'tag',\n    LOCATION: 'location',\n    USER: 'user',\n    PROJECT: 'project'\n  },\n  MapModeTypes: {\n    FREE: 'free',\n    USER: 'user',\n    TAG: 'tag'\n  }\n};\nexport var federated = {};\nexport var analytics = {\n  token: process.env.REACT_APP_GA_TOKEN || 'UA-XXXXXXXX-XX'\n};\nexport var aws = {\n  Auth: {\n    region: process.env.REACT_APP_AWS_REGION,\n    userPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n    userPoolWebClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\n    mandatorySignIn: true,\n    cookieStorage: {\n      domain: \"\".concat(domain),\n      expires: 120,\n      secure: false\n    }\n  },\n  AWSPinpoint: {\n    appId: process.env.REACT_APP_AWS_PINPOINT,\n    region: 'us-east-1',\n    mandatorySignIn: false\n  }\n};","import { endpoints } from './config';\nexport var createShareUrl = function createShareUrl(series, photoId) {\n  var noRoot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  if (!series) return null;\n  var obj = {\n    type: 'series',\n    s: series.id,\n    p: photoId\n  };\n  var encodedId = encodeURI(JSON.stringify(obj));\n  var url = \"\".concat(window.location.origin).concat(process.env.PUBLIC_URL, \"/?fromqr=\").concat(encodedId);\n  var ogShare = \"\".concat(endpoints.share, \"/\").concat(series.id, \"/\").concat(photoId || '');\n  return {\n    url: url,\n    ogShare: ogShare\n  };\n};\nexport var decodeShareUrl = function decodeShareUrl(search) {\n  try {\n    var find = '?fromqr=';\n    var foundIdx = search.indexOf(find);\n    if (foundIdx < 0) return null;\n    var newData = search.slice(foundIdx + find.length);\n    var decodedUrl = JSON.parse(decodeURI(newData));\n    return decodedUrl;\n  } catch (err) {\n    console.error(err);\n  }\n\n  return null;\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\n\nvar useCamera = function useCamera(onCapture, width, height) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      cameraError = _useState2[0],\n      setCameraError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cameraOnline = _useState4[0],\n      setCameraOnline = _useState4[1];\n\n  var camRef = useRef();\n  useEffect(function () {\n    camRef.current = new Webcam(document.getElementById('webcam'), document.createElement('canvas'));\n    camRef.current.setup(width || window.innerWidth, height || window.innerHeight).then(function (data) {\n      setCameraOnline(true);\n    }).catch(function (e) {\n      console.error(e);\n      setCameraError(true);\n    });\n  }, [width, height]);\n  useEffect(function () {\n    if (camRef.current) {\n      camRef.current.setup(width, height).then(function (data) {\n        setCameraOnline(true);\n      }).catch(function (e) {\n        console.error(e);\n        setCameraError(true);\n      });\n    }\n  }, [width, height]);\n  useEffect(function () {\n    return function () {\n      if (camRef.current) {\n        camRef.current.destroy();\n        camRef.current = null;\n      }\n    };\n  }, []);\n\n  var captureImage = function captureImage() {\n    if (camRef.current && cameraOnline) {\n      try {\n        camRef.current.imageCapture(function (err, imgData) {\n          if (err) console.error(err);\n          console.log('imageCapture', imgData);\n          onCapture(imgData);\n        }, {\n          type: 'jpeg',\n          quality: 1\n        });\n      } catch (_unused) {\n        console.log('Your hardware is lame and doesn\\'t support ImageCapture');\n        var capturedData = camRef.current.takeDataURLPhoto({\n          type: 'jpeg',\n          quality: 1\n        });\n        onCapture(capturedData);\n      }\n    }\n  };\n\n  var captureRawData = function captureRawData() {\n    if (camRef.current && cameraOnline) {\n      var capturedData = camRef.current.takeImageData();\n      onCapture(capturedData);\n    }\n  };\n\n  return {\n    cameraError: cameraError,\n    captureImage: captureImage,\n    cameraOnline: cameraOnline,\n    captureRawData: captureRawData\n  };\n};\n\nexport var Webcam =\n/*#__PURE__*/\nfunction () {\n  function Webcam(webcamElement, canvasElement) {\n    _classCallCheck(this, Webcam);\n\n    this.webcamElement = webcamElement;\n    this.canvasElement = canvasElement;\n\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      console.warn('getUserMedia() must be run from a secure origin: https or localhost.\\nChanging protocol to https.');\n    }\n\n    if (!navigator.mediaDevices && !navigator.getUserMedia) {\n      console.warn(\"Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia.\");\n    }\n  }\n\n  _createClass(Webcam, [{\n    key: \"destroy\",\n    value: function () {\n      var _destroy = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                try {\n                  this.webcamElement.srcObject.getTracks()[0].stop();\n                  this.canvasElement = null;\n                } catch (e) {\n                  console.error(e);\n                }\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function destroy() {\n        return _destroy.apply(this, arguments);\n      }\n\n      return destroy;\n    }()\n  }, {\n    key: \"setup\",\n    value: function () {\n      var _setup = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(width, height) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log('NEWSETUP', width, height);\n                return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  if (navigator.mediaDevices.getUserMedia !== undefined) {\n                    if (_this.webcamElement.srcObject) {\n                      _this.webcamElement.srcObject.getTracks()[0].stop();\n\n                      _this.webcamElement.srcObject = null;\n                    }\n\n                    navigator.mediaDevices.getUserMedia({\n                      audio: false,\n                      video: {\n                        facingMode: 'environment',\n                        width: {\n                          ideal: Math.max(height, width)\n                        },\n                        height: {\n                          ideal: Math.min(height, width)\n                        }\n                      }\n                    }).then(function (mediaStream) {\n                      if ('srcObject' in _this.webcamElement) {\n                        _this.webcamElement.srcObject = mediaStream;\n                      } else {\n                        _this.webcamElement.src = window.URL.createObjectURL(mediaStream);\n                      }\n\n                      _this.webcamElement.onloadedmetadata = function (e) {\n                        _this.webcamElement.play();\n                      };\n\n                      _this.webcamElement.onplaying = function (e) {\n                        resolve();\n                      };\n                    }).catch(function (err) {\n                      return reject(err);\n                    });\n                  } else {\n                    reject(new Error('Error accessing camera'));\n                  }\n                }));\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function setup(_x, _x2) {\n        return _setup.apply(this, arguments);\n      }\n\n      return setup;\n    }()\n  }, {\n    key: \"_drawImage\",\n    value: function _drawImage() {\n      var imageWidth = this.webcamElement.videoWidth;\n      var imageHeight = this.webcamElement.videoHeight;\n      var context = this.canvasElement.getContext('2d');\n      this.canvasElement.width = imageWidth;\n      this.canvasElement.height = imageHeight;\n      context.drawImage(this.webcamElement, 0, 0, imageWidth, imageHeight);\n      return {\n        imageHeight: imageHeight,\n        imageWidth: imageWidth\n      };\n    }\n  }, {\n    key: \"takeImageData\",\n    value: function takeImageData() {\n      var _this$_drawImage = this._drawImage(),\n          imageHeight = _this$_drawImage.imageHeight,\n          imageWidth = _this$_drawImage.imageWidth;\n\n      var data = {\n        data: null,\n        imageHeight: imageHeight,\n        imageWidth: imageWidth\n      };\n\n      try {\n        data.data = this.canvasElement.getContext('2d').getImageData(0, 0, imageWidth, imageHeight).data;\n      } catch (e) {}\n\n      return data;\n    }\n  }, {\n    key: \"imageCapture\",\n    value: function imageCapture(cb) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        type: 'jpeg',\n        quality: 1\n      },\n          type = _ref.type,\n          quality = _ref.quality;\n\n      var mediaStreamTrack = this.webcamElement.srcObject.getVideoTracks()[0];\n      var imageCapture = new ImageCapture(mediaStreamTrack);\n      imageCapture.getPhotoCapabilities();\n      imageCapture.takePhoto().then(function (blob) {\n        var fr = new FileReader();\n\n        fr.onload = function (e) {\n          var img = new Image();\n\n          img.onload = function () {\n            cb(null, {\n              dataUrl: e.target.result,\n              imageHeight: img.height,\n              imageWidth: img.width,\n              type: 'image/' + type\n            });\n          };\n\n          img.src = e.target.result;\n        };\n\n        fr.readAsDataURL(blob);\n      }).catch(function (error) {\n        return console.error('takePhoto() error:', error);\n      });\n    }\n  }, {\n    key: \"takeDataURLPhoto\",\n    value: function takeDataURLPhoto() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        type: 'jpeg',\n        quality: 1\n      },\n          type = _ref2.type,\n          quality = _ref2.quality;\n\n      var _this$_drawImage2 = this._drawImage(),\n          imageHeight = _this$_drawImage2.imageHeight,\n          imageWidth = _this$_drawImage2.imageWidth;\n\n      var dataUrl = this.canvasElement.toDataURL('image/' + type, quality);\n      return {\n        dataUrl: dataUrl,\n        imageHeight: imageHeight,\n        imageWidth: imageWidth,\n        type: 'image/' + type\n      };\n    }\n  }]);\n\n  return Webcam;\n}();\nexport default useCamera;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useState, useLayoutEffect, useRef } from 'react';\nimport { util } from '@morphoto/common';\n\nvar getSize = function getSize(el, minSize, defaultSize) {\n  if (!el) return defaultSize || minSize || {\n    width: 0,\n    height: 0\n  };\n\n  if (minSize) {\n    return {\n      width: Math.max(minSize.width, el.offsetWidth),\n      height: Math.max(minSize.height, el.offsetHeight)\n    };\n  } else {\n    return {\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n};\n\nvar useComponentSize = function useComponentSize(ref, minSize, defaultSize) {\n  var resizeActiveRef = useRef();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      resizeActive = _useState2[0],\n      setResizeActive = _useState2[1];\n\n  resizeActiveRef.current = resizeActive;\n\n  var _useState3 = useState(getSize(ref ? ref.current : null, minSize, defaultSize)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      size = _useState4[0],\n      setComponentSize = _useState4[1];\n\n  var handleResize = function handleResize() {\n    if (!resizeActiveRef.current || !ref.current) return;\n    var newSize = getSize(ref.current, minSize, defaultSize);\n\n    if (newSize.height !== size.height || newSize.width !== size.width) {\n      setComponentSize(newSize);\n    }\n  };\n\n  var handleResizeDebounced = useCallback(util.debounce(handleResize, 500), []);\n  useLayoutEffect(function () {\n    if (!ref.current) return;\n    handleResize();\n\n    if (typeof ResizeObserver === 'function') {\n      var resizeObserver = new ResizeObserver(handleResizeDebounced);\n      resizeObserver.observe(ref.current);\n      return function () {\n        resizeObserver.disconnect(ref.current);\n        resizeObserver = null;\n      };\n    } else {\n      window.addEventListener('resize', handleResizeDebounced);\n      return function () {\n        window.removeEventListener('resize', handleResizeDebounced);\n      };\n    }\n  }, [ref.current]);\n  return {\n    size: size,\n    setResizeActive: setResizeActive\n  };\n};\n\nexport default useComponentSize;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect, useRef } from 'react';\n\nvar useFileInput = function useFileInput() {\n  var onChange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n  var preferCamera = arguments.length > 1 ? arguments[1] : undefined;\n  var initialClick = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var anyFile = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var inputRef = useRef();\n  var clickRef = useRef();\n  var element = React.createElement(\"input\", {\n    style: {\n      display: 'none'\n    },\n    ref: inputRef,\n    type: \"file\",\n    accept: !anyFile ? 'image/*' : null,\n    capture: preferCamera\n  });\n\n  var forceClick = function forceClick() {\n    if (inputRef.current) inputRef.current.click();\n  };\n\n  useEffect(function () {\n    var handleChange = function handleChange(evt) {\n      var _ref = _toConsumableArray(inputRef.current.files),\n          file = _ref[0];\n\n      if (file) {\n        console.log('file', file);\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n          var type = file.type,\n              name = file.name,\n              size = file.size;\n          onChange({\n            dataUrl: reader.result,\n            type: type,\n            name: name,\n            size: size,\n            ext: getExtFromFile(file)\n          });\n        };\n\n        reader.readAsDataURL(file);\n      }\n\n      inputRef.current.value = null;\n    };\n\n    if (inputRef.current) {\n      inputRef.current.addEventListener('change', handleChange);\n\n      if (!clickRef.current) {\n        if (initialClick) inputRef.current.click();\n        clickRef.current = true;\n      }\n    }\n\n    return function () {\n      if (inputRef.current) {\n        inputRef.current.removeEventListener('change', handleChange);\n      }\n    };\n  }, [inputRef.current]);\n  return {\n    fileClickEl: element,\n    forceClick: forceClick,\n    inputRef: inputRef\n  };\n};\n\nexport default useFileInput;\nexport var getExtFromFile = function getExtFromFile(fileBlob) {\n  switch (fileBlob.type) {\n    case 'image/jpeg':\n      return 'jpeg';\n\n    case 'image/jpg':\n      return 'jpeg';\n\n    case 'image/png':\n      return 'png';\n\n    default:\n      return 'jpg';\n  }\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState } from 'react';\n\nvar useOnline = function useOnline() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var onChange = function onChange(e) {\n    if (window.navigator.onLine) {\n      console.log('ONLINE', e);\n      setState(null);\n    } else {\n      console.log('OFFLINE', e);\n      var newDate = Date.now();\n      setState(newDate);\n    }\n  };\n\n  useEffect(function () {\n    onChange();\n    window.addEventListener('online', onChange);\n    window.addEventListener('offline', onChange);\n    return function () {\n      window.removeEventListener('online', onChange);\n      window.removeEventListener('offline', onChange);\n    };\n  }, []);\n  return {\n    isOnline: state === null,\n    offlineSince: state\n  };\n};\n\nexport default useOnline;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useState, useLayoutEffect } from 'react';\nimport { util } from '@morphoto/common';\n\nvar getState = function getState(state) {\n  var _window = window,\n      orientation = _window.orientation,\n      innerWidth = _window.innerWidth,\n      innerHeight = _window.innerHeight,\n      _window$screen = _window.screen,\n      width = _window$screen.width,\n      height = _window$screen.height;\n  var wOrient = [90, 270].indexOf(Math.abs(orientation)) !== 0 ? 'landscape' : 'portrait';\n  var windowSize = {\n    width: innerWidth,\n    height: innerHeight\n  };\n  var screenSize = {\n    width: width,\n    height: height\n  };\n  var returnState = {\n    orientation: wOrient,\n    windowSize: windowSize,\n    screenSize: screenSize\n  };\n  return returnState;\n};\n\nvar useResponsive = function useResponsive(mediaQueries) {\n  var _useState = useState(getState()),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var handleResize = function handleResize(e) {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    var newState = getState(state);\n    if (state && ['input', 'textarea', 'select'].indexOf(window.document.activeElement.tagName.toLowerCase()) > -1) return;\n    console.log('handleResize', newState);\n    setState(newState);\n  };\n\n  var handleResizeDebounced = useCallback(util.debounce(handleResize, 500), []);\n  useLayoutEffect(function () {\n    handleResizeDebounced();\n    window.addEventListener('resize', handleResizeDebounced);\n    window.addEventListener('orientationchange', handleResizeDebounced);\n    return function () {\n      window.removeEventListener('resize', handleResizeDebounced);\n      window.removeEventListener('orientationchange', handleResizeDebounced);\n    };\n  }, []);\n  return state;\n};\n\nexport default useResponsive;","import _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar ErrorBoundary =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary(props) {\n    var _this;\n\n    _classCallCheck(this, ErrorBoundary);\n\n    console.log('ErrorBoundary constructor');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ErrorBoundary).call(this, props));\n    _this.state = {\n      hasError: false\n    };\n    return _this;\n  }\n\n  _createClass(ErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, info) {\n      console.log('ErrorBoundary componentDidCatch');\n      console.error(error);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          hasError = _this$state.hasError,\n          error = _this$state.error;\n      var FallbackUI = this.props.fallback;\n\n      if (hasError) {\n        console.log('ErrorBoundary hasError');\n        return React.createElement(FallbackUI, {\n          error: error\n        });\n      }\n\n      return this.props.children;\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      console.log('ErrorBoundary getDerivedStateFromError');\n      console.error(error);\n      return {\n        hasError: true,\n        error: error\n      };\n    }\n  }]);\n\n  return ErrorBoundary;\n}(React.Component);\n\nErrorBoundary.propTypes = {\n  children: PropTypes.any,\n  fallback: PropTypes.any\n};\nexport default ErrorBoundary;","import { useMemo } from 'react';\nexport var isIos = function isIos() {\n  return /iphone|ipad|ipod/i.test(window.navigator.userAgent || navigator.vendor || window.opera || '');\n};\nexport var isPhone = function isPhone() {\n  var a = window.navigator.userAgent || navigator.vendor || window.opera || '';\n  return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4));\n};\n\nvar useOSDetect = function useOSDetect() {\n  var ios = useMemo(isIos, []);\n  var phone = useMemo(isPhone, []);\n  return {\n    ios: ios,\n    phone: phone\n  };\n};\n\nexport default useOSDetect;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport useOSDetect from './useOSDetect';\nimport useOnline from './useOnline';\nimport useResponsive from './useResponsive';\nexport var AppContext = React.createContext({});\nexport var AppContextProvider = function AppContextProvider(_ref) {\n  var children = _ref.children,\n      value = _ref.value;\n  var device = useOSDetect();\n  var online = useOnline();\n  var responsive = useResponsive();\n\n  var finalValue = _objectSpread({\n    responsive: responsive,\n    online: online\n  }, value, {\n    device: _objectSpread({}, device, {}, value.device)\n  });\n\n  return React.createElement(AppContext.Provider, {\n    value: finalValue\n  }, children);\n};\nAppContextProvider.propTypes = {\n  children: PropTypes.any,\n  value: PropTypes.shape({\n    user: PropTypes.object,\n    signedIn: PropTypes.bool.isRequired,\n    getPhotoUrls: PropTypes.func.isRequired,\n    device: PropTypes.object,\n    metaConfig: PropTypes.object,\n    tagConfig: PropTypes.array.isRequired,\n    onAvatarClick: PropTypes.func,\n    globalActions: PropTypes.object.isrequired\n  })\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nexport var useGeolocation = function useGeolocation() {\n  var _useState = useState({\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: Date.now()\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var mountedRef = useRef();\n  var watchIdRef = useRef();\n  mountedRef.current = true;\n\n  var onEvent = function onEvent(event) {\n    if (mountedRef.current) {\n      setState({\n        accuracy: event.coords.accuracy,\n        altitude: event.coords.altitude,\n        altitudeAccuracy: event.coords.altitudeAccuracy,\n        heading: event.coords.heading,\n        latitude: event.coords.latitude,\n        longitude: event.coords.longitude,\n        speed: event.coords.speed,\n        timestamp: event.timestamp\n      });\n    }\n  };\n\n  useEffect(function () {\n    navigator.geolocation.getCurrentPosition(onEvent);\n    watchIdRef.current = navigator.geolocation.watchPosition(onEvent);\n    return function () {\n      mountedRef.current = false;\n      navigator.geolocation.clearWatch(watchIdRef.current);\n    };\n  }, [navigator.geolocation]);\n  return state;\n};\nexport function useDeviceOrientation() {\n  var _useState3 = useState({\n    absolute: false,\n    alpha: null,\n    beta: null,\n    gamma: null\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      deviceOrientation = _useState4[0],\n      setDeviceOrientation = _useState4[1];\n\n  function handleDeviceOrientation(event) {\n    setDeviceOrientation({\n      absolute: event.absolute,\n      alpha: event.alpha,\n      beta: event.beta,\n      gamma: event.gamma\n    });\n  }\n\n  useEffect(function () {\n    window.addEventListener('deviceorientation', handleDeviceOrientation, true);\n    return function () {\n      window.removeEventListener('deviceorientation', handleDeviceOrientation);\n    };\n  }, []);\n  return deviceOrientation;\n}","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as configImp from './config';\nexport var config = _objectSpread({}, configImp);\nexport { createShareUrl, decodeShareUrl } from './share';\nexport { default as useCamera } from './useCamera';\nexport { default as useComponentSize } from './useComponentSize';\nexport { default as useFileInput } from './useFileInput';\nexport { default as useOnline } from './useOnline';\nexport { default as useResponsive } from './useResponsive';\nexport { default as ErrorBoundary } from './ErrorBoundary';\nexport { playAudio } from './audio';\nexport { AppContext, AppContextProvider } from './appContext';\nexport { useGeolocation, useDeviceOrientation } from './useSensors';\nexport { default as useOSDetect, isIos, isPhone } from './useOSDetect';","import Satellite from './Satellite.json';\nimport TopoMap from './TopoMap.json';\nimport { Satellite as SatIcon, SatelliteOutlined, Terrain, TerrainOutlined } from '@material-ui/icons';\nexport default [{\n  toolTip: 'Sat',\n  Icon: SatelliteOutlined,\n  ActiveIcon: SatIcon,\n  color: 'green',\n  style: Satellite\n}, {\n  toolTip: 'Topo',\n  Icon: TerrainOutlined,\n  ActiveIcon: Terrain,\n  color: 'blue',\n  style: TopoMap\n}];","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      width: 1,\n      height: 1,\n      zIndex: 1\n    },\n    svgDot: {\n      width: 20,\n      height: 20,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    svgAccuracyDot: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MyLocation = function MyLocation(_ref) {\n  var position = _ref.position,\n      projection = _ref.projection;\n  var classes = useStyles();\n  var accuracy = 20;\n  var accHeight = projection.pixelsPerMeter[0] * accuracy;\n  var accWidth = projection.pixelsPerMeter[1] * accuracy;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"svg\", {\n    style: {\n      height: accHeight,\n      width: accWidth\n    },\n    className: classes.svgAccuracyDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 100, 100\"\n  }, React.createElement(\"circle\", {\n    cx: \"50\",\n    cy: \"50\",\n    r: 49,\n    stroke: \"#8888FF\",\n    fillOpacity: \"0.4\",\n    strokeWidth: \"1\",\n    fill: \"#AAAAFF\"\n  })), React.createElement(\"svg\", {\n    className: classes.svgDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 10, 10\"\n  }, React.createElement(\"circle\", {\n    cx: \"5\",\n    cy: \"5\",\n    r: \"4\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: \"1\",\n    fill: \"#4444FF\"\n  })));\n};\n\nMyLocation.propTypes = {\n  position: PropTypes.object,\n  projection: PropTypes.object\n};\nexport default MyLocation;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      zIndex: 10,\n      position: 'absolute'\n    },\n    speedDialFab: {\n      border: '2px solid',\n      background: theme.palette.text.primary,\n      color: theme.palette.primary.contrastText,\n      width: 40,\n      height: 40\n    },\n    speedDialAction: {},\n    speedDialIcon: {},\n    speedDialLabel: {\n      background: 'black',\n      color: 'white'\n    },\n    actionsClosed: {\n      display: 'none'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar StyleButtons = function StyleButtons(_ref) {\n  var controlPadding = _ref.controlPadding,\n      currStyle = _ref.currStyle,\n      mapStyles = _ref.mapStyles,\n      setCurrStyle = _ref.setCurrStyle;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var noEventSetOpen = function noEventSetOpen(e, state) {\n    console.log('noEventSetOpen', e, state);\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(state);\n  };\n\n  if (!mapStyles || !Array.isArray(mapStyles) || mapStyles.length < 2 || !mapStyles[currStyle]) return null;\n  var currStyleObj = mapStyles[currStyle];\n  var ActiveIcon = currStyleObj.ActiveIcon;\n  return React.createElement(\"div\", {\n    className: classes.root,\n    style: {\n      top: controlPadding.top ? controlPadding.top : theme.spacing(2),\n      right: controlPadding.right ? controlPadding.right : theme.spacing(2)\n    }\n  }, mapStyles.length > 1 && React.createElement(SpeedDial, {\n    ariaLabel: \"SpeedDial\",\n    className: classes.speedDial,\n    classes: {\n      fab: classes.speedDialFab,\n      actionsClosed: classes.actionsClosed\n    },\n    icon: React.createElement(ActiveIcon, {\n      className: classes.icon\n    }),\n    onClick: function onClick(e) {\n      return noEventSetOpen(e, !open);\n    },\n    onClose: function onClose(e) {\n      return noEventSetOpen(e, false);\n    },\n    open: open,\n    direction: \"left\"\n  }, mapStyles.map(function (_ref2, idx) {\n    var Icon = _ref2.Icon,\n        ActiveIcon = _ref2.ActiveIcon,\n        toolTip = _ref2.toolTip;\n    return React.createElement(SpeedDialAction, {\n      key: \"stylebutton\".concat(idx),\n      icon: React.createElement(Icon, {\n        className: classes.speedDialIcon\n      }),\n      tooltipOpen: false,\n      tooltipPlacement: \"bottom\",\n      tooltipTitle: toolTip,\n      onClick: function onClick() {\n        setCurrStyle(idx);\n        setOpen(false);\n      }\n    });\n  })));\n};\n\nStyleButtons.propTypes = {\n  controlPadding: PropTypes.object,\n  currStyle: PropTypes.number,\n  mapStyles: PropTypes.array,\n  setCurrStyle: PropTypes.func\n};\nStyleButtons.defaultProps = {\n  controlPadding: {}\n};\nexport default StyleButtons;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Fab from '@material-ui/core/Fab';\nimport MyLocationIcon from '@material-ui/icons/MyLocation';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      border: '1px solid',\n      background: theme.palette.grey[100],\n      color: 'black',\n      width: 40,\n      height: 40,\n      zIndex: 10,\n      position: 'absolute'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MyLocationButton = function MyLocationButton(_ref) {\n  var onClick = _ref.onClick,\n      controlPadding = _ref.controlPadding,\n      disabled = _ref.disabled;\n  var classes = useStyles();\n  var theme = useTheme();\n  return React.createElement(Fab, {\n    disabled: disabled,\n    style: {\n      top: 56 + (controlPadding.top ? controlPadding.top : theme.spacing(2)),\n      right: controlPadding.right ? controlPadding.right : theme.spacing(2)\n    },\n    \"aria-label\": \"myLocation\",\n    className: classes.root,\n    onClick: onClick\n  }, React.createElement(MyLocationIcon, null));\n};\n\nMyLocationButton.propTypes = {\n  controlPadding: PropTypes.object,\n  onClick: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\nexport default MyLocationButton;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo, useEffect } from 'react';\nimport ReactMapGL, { NavigationControl, Marker, FlyToInterpolator } from 'react-map-gl';\nimport PropTypes from 'prop-types';\nimport { easeCubic } from 'd3-ease';\nimport WebMercatorViewport, { getDistanceScales } from 'viewport-mercator-project';\nimport mapStyles from './mapStyles';\nimport MyLocation from './markers/MyLocation';\nimport StyleButtons from './controls/StyleButtons';\nimport MyLocationButton from './controls/MyLocationButton';\nimport { useGeolocation, useComponentSize, config } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nvar useStyles = makeStyles(require('./BaseMap.style').default);\n\nvar BaseMap = function BaseMap(props) {\n  var classes = useStyles();\n\n  var showMe = props.showMe,\n      children = props.children,\n      mapStyles = props.mapStyles,\n      controlPadding = props.controlPadding,\n      initViewport = props.viewport,\n      bounds = props.bounds,\n      lockToBounds = props.lockToBounds,\n      lockPan = props.lockPan,\n      initStyle = props.initStyle,\n      incomingOnViewportChange = props.onViewportChange,\n      incomingOnTransitionStart = props.onTransitionStart,\n      incomingOnTransitionEnd = props.onTransitionEnd,\n      transitions = props.transitions,\n      onMapDataEvent = props.onMapDataEvent,\n      stylechooser = props.stylechooser,\n      passthroughProps = _objectWithoutProperties(props, [\"showMe\", \"children\", \"mapStyles\", \"controlPadding\", \"viewport\", \"bounds\", \"lockToBounds\", \"lockPan\", \"initStyle\", \"onViewportChange\", \"onTransitionStart\", \"onTransitionEnd\", \"transitions\", \"onMapDataEvent\", \"stylechooser\"]);\n\n  var mapContainerRef = useRef(null);\n  var mapBoxRef = useRef(null);\n  var innerTransitionsRef = useRef(null);\n\n  var _useComponentSize = useComponentSize(mapContainerRef),\n      size = _useComponentSize.size;\n\n  var _useState = useState(initStyle),\n      _useState2 = _slicedToArray(_useState, 2),\n      currStyle = _useState2[0],\n      setCurrStyle = _useState2[1];\n\n  var _useState3 = useState(_objectSpread({}, defaultViewVals, {}, initViewport)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewport = _useState4[0],\n      setViewport = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isTransitioning = _useState6[0],\n      setIsTransitioning = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      projection = _useState8[0],\n      setProjection = _useState8[1];\n\n  var myPosition = {};\n  myPosition = useGeolocation();\n  var geoMarker = myPosition.latitude && myPosition.longitude ? React.createElement(Marker, {\n    key: \"myPos\",\n    className: \"myPosMarker\",\n    captureDrag: false,\n    latitude: myPosition.latitude,\n    longitude: myPosition.longitude,\n    style: {\n      zIndex: 1\n    }\n  }, React.createElement(MyLocation, {\n    position: myPosition,\n    projection: projection\n  })) : null;\n  useMemo(function () {\n    if (!size || size.width < 10 || size.height < 10) return;\n    if (mapStyles.length <= currStyle) setCurrStyle(initStyle);\n\n    try {\n      var _projection = getDistanceScales(viewport);\n\n      setProjection(_projection);\n    } catch (e) {\n      console.log('ERROR', viewport);\n      console.error(e);\n    }\n  }, [viewport.zoom, size]);\n\n  var flyToMe = function flyToMe() {\n    if (!myPosition.latitude || !myPosition.longitude) return;\n    var transitionTime = 2000;\n    innerTransitionsRef.current = {\n      transitionDuration: transitionTime,\n      transitionInterpolator: new FlyToInterpolator(),\n      transitionEasing: easeCubic\n    };\n    setTimeout(function () {\n      if (innerTransitionsRef.current) innerTransitionsRef.current = null;\n    }, transitionTime);\n    setViewport(_objectSpread({}, viewport, {\n      latitude: myPosition.latitude,\n      longitude: myPosition.longitude,\n      zoom: viewport.zoom > 10 ? viewport.zoom : 12\n    }));\n  };\n\n  var _onViewportChange = function onViewportChange(viewportChange) {\n    var newViewport = _objectSpread({}, viewportChange);\n\n    if (bounds && lockToBounds) {\n      if (newViewport.longitude < bounds[0]) newViewport.longitude = bounds[0];else if (newViewport.longitude > bounds[2]) newViewport.longitude = bounds[2];\n      if (newViewport.latitude < bounds[1]) newViewport.latitude = bounds[1];else if (newViewport.latitude > bounds[3]) newViewport.latitude = bounds[3];\n    }\n\n    if (lockPan) {\n      newViewport.latitude = viewport.latitude;\n      newViewport.longitude = viewport.longitude;\n    }\n\n    if (!isTransitioning && typeof incomingOnViewportChange === 'function') {\n      incomingOnViewportChange({\n        viewport: newViewport,\n        size: size,\n        projection: projection,\n        map: mapBoxRef.current && mapBoxRef.current.getMap()\n      });\n    }\n\n    setViewport(newViewport);\n  };\n\n  var recalcZoomBounds = function recalcZoomBounds() {\n    if (!bounds || !size || size.width < 10 || size.height < 10 || isTransitioning) return;\n\n    var _bounds = _slicedToArray(bounds, 4),\n        minlng = _bounds[0],\n        minlat = _bounds[1],\n        maxlng = _bounds[2],\n        maxlat = _bounds[3];\n\n    try {\n      var _fitBounds = new WebMercatorViewport(_objectSpread({}, size, {}, viewport)).fitBounds([[minlng, minlat], [maxlng, maxlat]], {\n        padding: 40,\n        offset: [0, 0]\n      }),\n          longitude = _fitBounds.longitude,\n          latitude = _fitBounds.latitude,\n          zoom = _fitBounds.zoom;\n\n      setViewport(_objectSpread({}, viewport, {\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      }));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  var handleTransitionStart = function handleTransitionStart() {\n    setIsTransitioning(true);\n    if (typeof incomingOnTransitionStart === 'function') incomingOnTransitionStart();\n  };\n\n  var handleTransitionEnd = function handleTransitionEnd() {\n    setIsTransitioning(false);\n    innerTransitionsRef.current = null;\n    if (incomingOnTransitionEnd) incomingOnTransitionEnd();\n\n    if (typeof incomingOnViewportChange === 'function') {\n      incomingOnViewportChange({\n        viewport: viewport,\n        size: size,\n        projection: projection,\n        map: mapBoxRef.current && mapBoxRef.current.getMap()\n      });\n    }\n  };\n\n  useMemo(recalcZoomBounds, [size, bounds]);\n  useEffect(function () {\n    setViewport(_objectSpread({}, viewport, {}, initViewport));\n  }, [initViewport]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.mapContainer, props.className),\n    ref: mapContainerRef\n  }, size.height > 0 && size.width > 0 && React.createElement(ReactMapGL, _extends({}, viewport, innerTransitionsRef.current || transitions, {\n    ref: function ref(map) {\n      mapBoxRef.current = map;\n    },\n    height: size.height,\n    width: size.width,\n    mapStyle: currStyle < mapStyles.length ? mapStyles[currStyle].style : mapStyles[0].style,\n    onData: onMapDataEvent,\n    onTransitionStart: handleTransitionStart,\n    onTransitionEnd: handleTransitionEnd,\n    dragPan: !lockPan,\n    onViewportChange: _onViewportChange,\n    mapboxApiAccessToken: config.mapConfig.mapBoxToken\n  }, passthroughProps), children && Array.isArray(children) ? children.map(function (c, idx) {\n    return c ? React.cloneElement(handleChild(c, viewport, size.height, size.width, projection), {\n      key: \"mapChild-\".concat(idx)\n    }) : null;\n  }) : handleChild(children, viewport, size.height, size.width, projection), stylechooser && React.createElement(StyleButtons, {\n    controlPadding: controlPadding,\n    currStyle: currStyle,\n    mapStyles: mapStyles,\n    setCurrStyle: setCurrStyle\n  }), !props.hideNavControls && React.createElement(NavigationControl, {\n    onViewportChange: function onViewportChange(viewport) {\n      return _onViewportChange(_objectSpread({}, viewport, {}, size));\n    },\n    showZoom: !props.touchZoom === false && !props.scrollZoom === false,\n    showCompass: !props.touchRotate === false && !props.dragRotate === false\n  }), showMe && !lockPan && React.createElement(React.Fragment, null, geoMarker, React.createElement(MyLocationButton, {\n    disabled: !myPosition || !myPosition.latitude,\n    controlPadding: controlPadding,\n    onClick: flyToMe\n  }))));\n};\n\nBaseMap.propTypes = {\n  children: PropTypes.any,\n  data: PropTypes.array,\n  controlPadding: PropTypes.object,\n  showMe: PropTypes.bool,\n  className: PropTypes.string,\n  touchZoom: PropTypes.bool,\n  scrollZoom: PropTypes.bool,\n  touchRotate: PropTypes.bool,\n  dragRotate: PropTypes.bool,\n  transitions: PropTypes.object,\n  viewport: PropTypes.object,\n  initStyle: PropTypes.number,\n  stylechooser: PropTypes.bool,\n  lockPan: PropTypes.bool,\n  lockRotation: PropTypes.bool,\n  lockZoom: PropTypes.bool,\n  lockToBounds: PropTypes.bool,\n  hideNavControls: PropTypes.bool,\n  bounds: PropTypes.array,\n  mapStyles: PropTypes.array,\n  onMapDataEvent: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  onTransitionStart: PropTypes.func,\n  onTransitionEnd: PropTypes.func\n};\nBaseMap.defaultProps = {\n  controlPadding: {},\n  stylechooser: true,\n  initStyle: 0,\n  lockToBounds: false,\n  mapStyles: mapStyles\n};\nexport default BaseMap;\nvar defaultViewVals = {\n  latitude: 49.3050394,\n  longitude: -123.1398254,\n  bearing: 0,\n  pitch: 0,\n  zoom: 12\n};\n\nfunction handleChild(child, viewport, height, width, projection) {\n  return typeof child === 'function' ? child(viewport, height, width, projection) : child;\n}","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useCallback } from 'react';\nimport uuid from 'uuid/v4';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport rbush from 'rbush';\nimport { point, centroid, featureCollection } from '@turf/turf';\nimport { util } from '@morphoto/common';\n\nvar useClusteredData = function useClusteredData(data, filterBounds, currentZoom, viewport, sizeScale, queryVersion, isTransitioning) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clusteredData = _useState2[0],\n      setClusteredData = _useState2[1];\n\n  var _useState3 = useState({\n    single: [],\n    cluster: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredData = _useState4[0],\n      setFilteredData = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      version = _useState6[0],\n      setVersion = _useState6[1];\n\n  var updateDataDebounce = useCallback(util.debounce(\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var updatedData,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return updateData.apply(void 0, _args);\n\n          case 2:\n            updatedData = _context.sent;\n            setClusteredData(updatedData);\n            setVersion(version + 1);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), 1000), []);\n  var filterDataDebounce = useCallback(util.debounce(\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var filtered,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return filterData.apply(void 0, _args2);\n\n          case 2:\n            filtered = _context2.sent;\n            setFilteredData(filtered);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), 300), []);\n  useEffect(function () {\n    updateDataDebounce(data, sizeScale, viewport);\n  }, [data.length, queryVersion]);\n  useEffect(function () {\n    if (!isTransitioning) filterDataDebounce(clusteredData, filterBounds, currentZoom);\n  }, [clusteredData, currentZoom, filterBounds, version, isTransitioning]);\n  return {\n    filteredClusteredData: filteredData\n  };\n};\n\nexport default useClusteredData;\n\nvar updateData = function updateData(data, sizeScale, viewport) {\n  if (!data) {\n    return [];\n  }\n\n  var tree = rbush(9, ['.x', '.y', '.x', '.y']);\n  var transform = new WebMercatorViewport(_objectSpread({}, viewport, {\n    zoom: 0\n  }));\n  var newData = data.map(function (p) {\n    var screenCoords = [0, 0];\n\n    try {\n      screenCoords = transform.project(p.coords);\n    } catch (e) {\n      console.error(e);\n    }\n\n    var longitude = p.longitude,\n        latitude = p.latitude,\n        properties = _objectWithoutProperties(p, [\"longitude\", \"latitude\"]);\n\n    return {\n      x: screenCoords[0],\n      y: screenCoords[1],\n      photoCount: properties.photoCount,\n      zoomLevels: [],\n      geoJSON: p.coords ? point(p.coords, _objectSpread({}, properties)) : null\n    };\n  });\n  tree.clear();\n  tree.load(newData);\n\n  var _loop = function _loop(z) {\n    var radius = sizeScale / Math.sqrt(2) / Math.pow(2, z);\n    newData.forEach(function (p) {\n      if (p.zoomLevels[z] === undefined) {\n        var x = p.x,\n            y = p.y;\n        var neighbors = tree.search({\n          minX: x - radius,\n          minY: y - radius,\n          maxX: x + radius,\n          maxY: y + radius\n        }).filter(function (neighbor) {\n          return neighbor.zoomLevels[z] === undefined;\n        });\n        neighbors.forEach(function (neighbor) {\n          if (neighbor === p) {\n            var newGeoJSON = neighbors.length === 1 ? p.geoJSON : centroid(featureCollection(neighbors.map(function (n) {\n              return n.geoJSON;\n            })));\n            newGeoJSON.properties = _objectSpread({}, newGeoJSON.properties, {\n              id: newGeoJSON.properties.id || uuid(),\n              count: neighbors.length,\n              reducedPhotoCount: neighbors.reduce(function (acc, _ref4) {\n                var photoCount = _ref4.photoCount;\n                return photoCount ? acc + photoCount : acc;\n              }, 0),\n              points: neighbors.map(function (n) {\n                return n.geoJSON;\n              })\n            });\n            p.zoomLevels[z] = newGeoJSON;\n          } else {\n            neighbor.zoomLevels[z] = null;\n          }\n        });\n      }\n    });\n  };\n\n  for (var z = 0; z <= 20; z++) {\n    _loop(z);\n  }\n\n  return newData.map(function (_ref3) {\n    var zoomLevels = _ref3.zoomLevels;\n    return zoomLevels;\n  });\n};\n\nfunction filterData(clusteredData, filterBounds, newZ) {\n  return clusteredData.filter(function (d) {\n    return !!d[newZ];\n  }).reduce(function (acc, zoomLevels) {\n    var geoJSON = zoomLevels[newZ];\n    var coords = geoJSON.geometry.coordinates;\n    var count = geoJSON.properties.count;\n\n    if (!filterBounds || filterBounds.length < 4 || filterBounds[0] < coords[0] && filterBounds[1] < coords[1] && filterBounds[2] > coords[0] && filterBounds[3] > coords[1]) {\n      if (count > 1) acc.cluster.push(geoJSON);else acc.single.push(geoJSON);\n    }\n\n    return acc;\n  }, {\n    single: [],\n    cluster: []\n  });\n}","export default (function (theme) {\n  return {\n    root: {\n      position: 'relative',\n      height: '100%',\n      '& .myPosMarker': {\n        zIndex: 1\n      },\n      '& .singleMarker': {\n        zIndex: 3\n      },\n      '& .clusterMarker': {\n        zIndex: 2\n      }\n    },\n    fab: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText\n    },\n    topBar: {\n      position: 'absolute',\n      zIndex: 100,\n      top: 0\n    },\n    loadingWrapper: {\n      position: 'absolute',\n      color: theme.palette.text.primary,\n      opacity: 0.5,\n      zIndex: 90,\n      textAlign: 'center',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    zoomOutFab: {\n      margin: theme.spacing(0.5),\n      padding: theme.spacing(0.5),\n      border: '2px solid',\n      borderRadius: theme.spacing(1),\n      background: theme.palette.common.white,\n      fontSize: 20,\n      position: 'absolute',\n      zIndex: 80,\n      bottom: theme.spacing(2),\n      right: theme.spacing(10)\n    },\n    selectedPopup: {\n      width: '90%',\n      maxWidth: 400,\n      zIndex: 100,\n      position: 'absolute',\n      bottom: theme.spacing(1),\n      left: '50%',\n      transformOrigin: '0% 50%',\n      transform: 'translateY(0%) translateX(-50%)'\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ZoomOutMapIcon from '@material-ui/icons/ZoomOutMap';\nimport ViewListIcon from '@material-ui/icons/ViewList';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    listItemText: {\n      textAlign: 'center'\n    },\n    iconButton: {\n      background: theme.palette.grey[200]\n    },\n    compoundButton: {\n      textAlign: 'center'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ClusterSelected = function ClusterSelected(_ref) {\n  var seriesCount = _ref.seriesCount,\n      reducedPhotoCount = _ref.reducedPhotoCount,\n      actions = _ref.actions;\n  var classes = useStyles();\n  console.log('cluster selected', {\n    seriesCount: seriesCount,\n    reducedPhotoCount: reducedPhotoCount\n  });\n  return React.createElement(List, null, React.createElement(ListItem, {\n    className: classes.root\n  }, React.createElement(ListItemIcon, null, React.createElement(\"div\", {\n    className: classes.compoundButton\n  }, React.createElement(IconButton, {\n    onClick: actions.onZoomTo,\n    className: classes.iconButton\n  }, React.createElement(ZoomOutMapIcon, null)), React.createElement(Typography, {\n    variant: \"caption\",\n    component: \"div\"\n  }, \"Zoom In\"))), React.createElement(ListItemText, {\n    className: classes.listItemText,\n    onClick: actions.onZoomTo,\n    primary: \"\".concat(seriesCount, \" Photo series\"),\n    secondary: \"containing \".concat(reducedPhotoCount, \" individual photo\").concat(reducedPhotoCount === 1 ? '' : 's')\n  }), React.createElement(ListItemIcon, null, React.createElement(\"div\", {\n    className: classes.compoundButton\n  }, React.createElement(IconButton, {\n    onClick: actions.onViewList,\n    className: classes.iconButton\n  }, React.createElement(ViewListIcon, null)), React.createElement(Typography, {\n    variant: \"caption\",\n    component: \"div\"\n  }, \"List\")))));\n};\n\nClusterSelected.propTypes = {\n  seriesCount: PropTypes.number.isRequired,\n  reducedPhotoCount: PropTypes.number.isRequired,\n  actions: PropTypes.shape({\n    onZoomTo: PropTypes.func.isRequired,\n    onViewList: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired\n  })\n};\nexport default ClusterSelected;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport Avatar from '@material-ui/core/Avatar';\nimport Camera from '@material-ui/icons/Camera';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: theme.palette.primary.main,\n      width: 150,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    rootActive: {\n      zIndex: 60\n    },\n    icon: {},\n    avatar: {\n      position: 'relative',\n      margin: '0 auto',\n      border: '2px solid white',\n      height: 40,\n      width: 40,\n      zIndex: 61,\n      background: theme.palette.background.default,\n      color: theme.palette.text.primary\n    },\n    avatarActive: {\n      background: '#FFFF00',\n      color: 'black',\n      border: \"2px solid black\"\n    },\n    badge: {\n      zIndex: 62,\n      color: theme.palette.secondary.contrastText,\n      background: theme.palette.secondary.main,\n      transform: 'scale(1) translate(30%, -30%)'\n    },\n    badgeActive: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    directionIndicator: {\n      position: 'absolute',\n      top: 20,\n      left: '50%',\n      zIndex: 59\n    },\n    name: {\n      color: 'white',\n      fontWeight: 'bold',\n      textShadow: \"\\n        0px 0px 4px #000000, \\n        0px 0px 4px #000000 \\n    \",\n      zIndex: 60,\n      position: 'relative'\n    },\n    nameActive: {\n      color: 'black',\n      textShadow: \"\\n    0px 0px 2px #FFFFFF, \\n    0px 0px 2px #FFFFFF,\\n    0px 0px 4px #FFFFFF \\n\"\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Single = function Single(_ref) {\n  var name = _ref.name,\n      onClick = _ref.onClick,\n      active = _ref.active,\n      photoCount = _ref.photoCount,\n      direction = _ref.direction;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, active ? classes.rootActive : null)\n  }, React.createElement(Badge, {\n    classes: {\n      badge: classNames(classes.badge, active ? classes.badgeActive : null)\n    },\n    badgeContent: photoCount\n  }, React.createElement(Avatar, {\n    className: classNames(classes.avatar, active ? classes.avatarActive : null),\n    onClick: onClick\n  }, React.createElement(Camera, {\n    className: classes.icon,\n    color: \"inherit\"\n  }))), direction && direction >= 0 ? React.createElement(\"div\", {\n    className: classes.directionIndicator\n  }, React.createElement(\"svg\", {\n    className: classes.svgArc,\n    version: \"1.1\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0, 0, 100, 100\",\n    style: {\n      transform: \"translateY(-50%) translateX(-50%) rotateZ(\".concat(direction, \"deg)\")\n    }\n  }, React.createElement(\"path\", {\n    d: \"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z\",\n    fill: \"#009DC1\",\n    fillOpacity: \"0.444\",\n    strokeWidth: \"1\",\n    strokeOpacity: \"0.6\",\n    stroke: \"#FFFFFF\"\n  }))) : null, React.createElement(Typography, {\n    variant: \"body1\",\n    className: classNames(classes.name, active ? classes.nameActive : null)\n  }, name));\n};\n\nSingle.propTypes = {\n  name: PropTypes.string,\n  photoCount: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n  direction: PropTypes.number,\n  active: PropTypes.bool\n};\nexport default Single;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport numeral from 'numeral';\n\nvar style = function style(theme) {\n  return {\n    avatar: {\n      background: theme.palette.grey[900],\n      border: \"2px solid \".concat(theme.palette.grey[100]),\n      color: theme.palette.grey[100]\n    },\n    avatarActive: {\n      background: '#FFFF00',\n      border: \"2px solid black\",\n      color: 'black',\n      zIndex: 50\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Cluster = function Cluster(_ref) {\n  var seriesCount = _ref.seriesCount,\n      active = _ref.active,\n      onClick = _ref.onClick;\n  var classes = useStyles();\n  return React.createElement(Avatar, {\n    onClick: onClick,\n    className: classNames(classes.avatar, active ? classes.avatarActive : null)\n  }, numeral(seriesCount).format('0,0'));\n};\n\nCluster.propTypes = {\n  seriesCount: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n  active: PropTypes.bool\n};\nexport default Cluster;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { FlyToInterpolator, LinearInterpolator, Marker } from 'react-map-gl';\nimport { easeCubic } from 'd3-ease';\nimport { bbox, featureCollection, buffer, point } from '@turf/turf';\nimport Paper from '@material-ui/core/Paper';\nimport { CircularProgress } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport { SearchInput } from '@morphoto/Search';\nimport { SeriesListItem, ViewListDialog } from '@morphoto/photoseries';\nimport BaseMap from './BaseMap';\nimport MapStyles from './mapStyles';\nimport useClusteredData from './lib/useClusteredData';\nimport style from './HomeMap.style';\nimport ClusterSelected from './ClusterSelected';\nimport SingleMarker from './markers/Single';\nimport ClusterMarker from './markers/Cluster';\nimport themes from '@morphoto/themes';\nvar useStyles = makeStyles(style);\nvar defaultView = {\n  zoom: 4,\n  latitude: 44.629701,\n  longitude: -120.333379\n};\nvar SIZESCALE = 80;\n\nvar HomeMap = function HomeMap(_ref) {\n  var seriesList = _ref.seriesList,\n      initViewport = _ref.initViewport,\n      loading = _ref.loading,\n      initialActiveSeries = _ref.initialActiveSeries,\n      queryVersion = _ref.queryVersion,\n      actions = _ref.actions;\n\n  var _useState = useState({\n    viewport: _objectSpread({}, defaultView, {}, initViewport.viewport),\n    bounds: initViewport.bounds,\n    filterBounds: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      mapViewObj = _useState2[0],\n      setMapViewObj = _useState2[1];\n\n  var classes = useStyles();\n  var mapViewRef = useRef();\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isTransitioning = _useState4[0],\n      setIsTransitioning = _useState4[1];\n\n  var homeMapContainerRef = useRef();\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentZoom = _useState6[0],\n      setCurrentZoom = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showViewList = _useState8[0],\n      setShowViewList = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      transitions = _useState10[0],\n      setTransitions = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedItem = _useState12[0],\n      setSelectedItem = _useState12[1];\n\n  console.log('HomeMapRender', {\n    seriesList: seriesList,\n    initViewport: initViewport,\n    loading: loading,\n    initialActiveSeries: initialActiveSeries,\n    queryVersion: queryVersion,\n    actions: actions\n  });\n\n  var _useClusteredData = useClusteredData(seriesList || [], mapViewObj.filterBounds, currentZoom, mapViewObj.viewport, SIZESCALE, queryVersion, isTransitioning),\n      filteredClusteredData = _useClusteredData.filteredClusteredData;\n\n  useEffect(function () {\n    if (!initialActiveSeries || !seriesList || selectedItem) return;\n\n    try {\n      var selected = seriesList.find(function (s) {\n        return s.id === initialActiveSeries;\n      });\n\n      if (selected && selected.coords) {\n        var bufferPts = buffer(point(selected.coords), 10, {\n          units: 'meters'\n        });\n        var bounds = bbox(bufferPts);\n        setMapViewObj(_objectSpread({}, mapViewObj, {\n          bounds: bounds\n        }));\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }, [seriesList]);\n  useEffect(function () {\n    if (!initialActiveSeries || !filteredClusteredData.single || selectedItem) return;\n\n    try {\n      var selected = filteredClusteredData.single.find(function (s) {\n        return s.properties.id === initialActiveSeries;\n      });\n      if (selected && homeMapContainerRef.current) setSelectedItem(selected);\n    } catch (e) {\n      console.error(e);\n    }\n  }, [filteredClusteredData.single]);\n\n  var saveMap = function saveMap(delay) {\n    var _ref2 = mapViewRef.current ? mapViewRef.current : mapViewObj.viewport,\n        transitionDuration = _ref2.transitionDuration,\n        transitionInterpolator = _ref2.transitionInterpolator,\n        transitionInterruption = _ref2.transitionInterruption,\n        maxZoom = _ref2.maxZoom,\n        minZoom = _ref2.minZoom,\n        maxPitch = _ref2.maxPitch,\n        minPitch = _ref2.minPitch,\n        newView = _objectWithoutProperties(_ref2, [\"transitionDuration\", \"transitionInterpolator\", \"transitionInterruption\", \"maxZoom\", \"minZoom\", \"maxPitch\", \"minPitch\"]);\n\n    var saveObj = {\n      viewport: newView\n    };\n    if (!delay) actions.pushMapHistory(saveObj);else {\n      setTimeout(function () {\n        return actions.pushMapHistory(saveObj);\n      }, delay);\n    }\n  };\n\n  var updateSelectedItem = function updateSelectedItem(item) {\n    setSelectedItem(item);\n  };\n\n  var _onZoomTo = function onZoomTo(object) {\n    try {\n      var pts = featureCollection(object.properties.points);\n      var bounds = bbox(pts);\n\n      if (bounds[0] === bounds[2] && bounds[1] === bounds[3]) {\n        var paddedPoint = buffer(point([bounds[0], bounds[1]]), 10, {\n          units: 'meters'\n        });\n        bounds = bbox(paddedPoint);\n      }\n\n      var lngBuff = (bounds[2] - bounds[0]) * 0.2;\n      var latBuff = (bounds[3] - bounds[1]) * 0.2;\n      var buffBounds = [bounds[0] - lngBuff, bounds[1] - latBuff, bounds[2] + lngBuff, bounds[3] + latBuff];\n      setTransitions({\n        transitionDuration: 2000,\n        transitionInterpolator: new FlyToInterpolator(),\n        transitionEasing: easeCubic\n      });\n      setMapViewObj(_objectSpread({}, mapViewObj, {\n        bounds: buffBounds\n      }));\n      if (object.properties.count > 1) setTimeout(function () {\n        return updateSelectedItem(null);\n      }, 2000);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  var onViewportChange = function onViewportChange(_ref3) {\n    var viewport = _ref3.viewport,\n        map = _ref3.map;\n    mapViewRef.current = viewport;\n    var viewZoom = Math.floor(viewport.zoom);\n\n    if (!isTransitioning && map && map.getBounds) {\n      var _map$getBounds = map.getBounds(),\n          _map$getBounds$_sw = _map$getBounds._sw,\n          minLng = _map$getBounds$_sw.lng,\n          minLat = _map$getBounds$_sw.lat,\n          _map$getBounds$_ne = _map$getBounds._ne,\n          maxLng = _map$getBounds$_ne.lng,\n          maxLat = _map$getBounds$_ne.lat;\n\n      var _ref4 = mapViewObj.filterBounds || [minLng, minLat, maxLng, maxLat],\n          _ref5 = _slicedToArray(_ref4, 4),\n          oldMinLng = _ref5[0],\n          oldMinLat = _ref5[1],\n          oldMaxLng = _ref5[2],\n          oldMaxLat = _ref5[3];\n\n      if (viewZoom !== currentZoom || oldMinLng >= minLng || oldMinLat >= minLat || oldMaxLng <= maxLng || oldMaxLat <= maxLat) {\n        var filterBounds = [minLng - (maxLng - minLng) / 2, minLat - (maxLat - minLat) / 2, maxLng + (maxLng - minLng) / 2, maxLat + (maxLat - minLat) / 2];\n        setMapViewObj(_objectSpread({}, mapViewObj, {\n          filterBounds: filterBounds\n        }));\n      }\n    }\n\n    if (viewZoom !== currentZoom) {\n      setCurrentZoom(viewZoom);\n    }\n  };\n\n  var lock = {};\n\n  var onMarkerClick = function onMarkerClick(obj) {\n    if (selectedItem && selectedItem.properties.id === obj.properties.id) {\n      _onZoomTo(selectedItem);\n    } else {\n      setTransitions({\n        transitionDuration: 500,\n        transitionInterpolator: new LinearInterpolator(),\n        transitionEasing: easeCubic\n      });\n      setMapViewObj({\n        viewport: {\n          longitude: obj.geometry.coordinates[0],\n          latitude: obj.geometry.coordinates[1]\n        }\n      });\n    }\n\n    updateSelectedItem(obj);\n  };\n\n  var markersRendered = useMemo(function () {\n    return [].concat(_toConsumableArray(filteredClusteredData.single.filter(function (obj) {\n      return !isTransitioning || selectedItem && selectedItem.properties.id === obj.properties.id;\n    }).map(function (obj) {\n      return React.createElement(Marker, {\n        className: 'singleMarker',\n        key: \"single-\".concat(obj.properties.id),\n        latitude: obj.geometry.coordinates[1],\n        longitude: obj.geometry.coordinates[0],\n        offsetLeft: 0,\n        offsetTop: -20\n      }, React.createElement(ThemeProvider, {\n        theme: themes.access[obj.properties.access]\n      }, React.createElement(SingleMarker, {\n        name: obj.properties.name,\n        photoCount: obj.properties.photoCount,\n        onClick: function onClick() {\n          return onMarkerClick(obj);\n        },\n        direction: currentZoom > 10 && obj.properties.direction ? obj.properties.direction : null,\n        active: selectedItem && selectedItem.properties.id === obj.properties.id\n      })));\n    })), _toConsumableArray(filteredClusteredData.cluster.filter(function (obj) {\n      return !isTransitioning || selectedItem && selectedItem.properties.id === obj.properties.id && selectedItem.properties.count === obj.properties.count;\n    }).map(function (obj) {\n      return React.createElement(Marker, {\n        className: \"clusterMarker\",\n        key: \"cluster-\".concat(obj.properties.id),\n        latitude: obj.geometry.coordinates[1],\n        longitude: obj.geometry.coordinates[0],\n        offsetLeft: -20,\n        offsetTop: -20\n      }, React.createElement(ClusterMarker, {\n        seriesCount: obj.properties.count,\n        photoCount: obj.properties.reducedPhotoCount,\n        onClick: function onClick() {\n          return onMarkerClick(obj);\n        },\n        active: selectedItem && selectedItem.properties.id === obj.properties.id && selectedItem.properties.count === obj.properties.count\n      }));\n    })));\n  }, [filteredClusteredData, selectedItem, isTransitioning]);\n  var selectedItemRender = useMemo(function () {\n    return !!selectedItem && React.createElement(Paper, {\n      className: classes.selectedPopup\n    }, selectedItem.properties.count === 1 ? React.createElement(SeriesListItem, {\n      series: selectedItem.properties,\n      showCreatedOn: true,\n      showLastPhoto: true,\n      onClick: function onClick() {\n        return actions.onSeriesNavigate(selectedItem.properties.id);\n      }\n    }) : React.createElement(ClusterSelected, {\n      seriesCount: selectedItem.properties.count,\n      reducedPhotoCount: selectedItem.properties.reducedPhotoCount,\n      actions: {\n        onViewList: function onViewList() {\n          return setShowViewList(true);\n        },\n        onClose: function onClose() {\n          return updateSelectedItem(null);\n        },\n        onZoomTo: function onZoomTo() {\n          return _onZoomTo(selectedItem);\n        }\n      }\n    }));\n  }, [selectedItem]);\n  return React.createElement(\"div\", {\n    className: classes.root,\n    ref: homeMapContainerRef\n  }, React.createElement(TopBarWrapper, {\n    isTransparent: true\n  }, React.createElement(SearchInput, {\n    isTransparent: true,\n    onClick: actions.onSearchClick,\n    defaultValue: ''\n  })), loading && React.createElement(\"div\", {\n    className: classes.loadingWrapper\n  }, React.createElement(CircularProgress, {\n    size: 80,\n    thickness: 7,\n    color: \"inherit\"\n  })), React.createElement(BaseMap, _extends({\n    showMe: true,\n    viewport: mapViewObj.viewport,\n    transitions: transitions,\n    mapStyles: MapStyles,\n    controlPadding: {\n      top: 56\n    },\n    initStyle: MapStyles.length > 1 ? 1 : 0\n  }, lock, {\n    onTransitionStart: function onTransitionStart() {\n      setIsTransitioning(true);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      setIsTransitioning(false);\n      setTransitions(null);\n    },\n    bounds: mapViewObj.bounds,\n    maxZoom: 20,\n    minZoom: 1,\n    onViewportChange: onViewportChange,\n    onNativeClick: function onNativeClick() {\n      if (selectedItem) updateSelectedItem(null);\n    }\n  }), markersRendered), selectedItem && selectedItem.properties.count > 1 && React.createElement(ViewListDialog, {\n    open: showViewList,\n    title: \"\".concat(selectedItem.properties.count, \" Series\"),\n    onClose: function onClose() {\n      return setShowViewList(false);\n    },\n    onSelect: actions.onSeriesNavigate,\n    seriesList: selectedItem.properties.points.map(function (p) {\n      return p.properties;\n    })\n  }), selectedItemRender);\n};\n\nHomeMap.propTypes = {\n  seriesList: PropTypes.array,\n  queryVersion: PropTypes.number,\n  initialActiveSeries: PropTypes.string,\n  initViewport: PropTypes.object,\n  loading: PropTypes.bool,\n  actions: PropTypes.shape({\n    onSearchClick: PropTypes.func,\n    onSeriesNavigate: PropTypes.func,\n    onSeriesMapSelect: PropTypes.func,\n    popMapHistory: PropTypes.func,\n    pushMapHistory: PropTypes.func,\n    clearMapHistory: PropTypes.func\n  })\n};\nexport default HomeMap;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo } from 'react';\nimport { StaticMap } from 'react-map-gl';\nimport PropTypes from 'prop-types';\nimport { getDistanceScales } from 'viewport-mercator-project';\nimport StyleButtons from './controls/StyleButtons';\nimport { useComponentSize, config } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport mapStyles from './mapStyles';\nimport classNames from 'classnames';\nvar useStyles = makeStyles(require('./BaseMap.style'));\n\nvar BaseStaticMap = function BaseStaticMap(props) {\n  var classes = useStyles();\n\n  var className = props.className,\n      controlPadding = props.controlPadding,\n      viewport = props.viewport,\n      children = props.children,\n      mapStyles = props.mapStyles,\n      onMapDataEvent = props.onMapDataEvent,\n      passthroughProps = _objectWithoutProperties(props, [\"className\", \"controlPadding\", \"viewport\", \"children\", \"mapStyles\", \"onMapDataEvent\"]);\n\n  var mapRef = useRef(null);\n  var mapBoxRef = useRef();\n\n  var _useComponentSize = useComponentSize(mapRef, {\n    width: 100,\n    height: 50\n  }),\n      size = _useComponentSize.size;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      currStyle = _useState2[0],\n      setCurrStyle = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      projection = _useState4[0],\n      setProjection = _useState4[1];\n\n  var recalcProjection = function recalcProjection() {\n    if (!size || size.width < 10 || size.height < 10) return;\n\n    try {\n      var _projection = getDistanceScales(viewport);\n\n      setProjection(_projection);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  if (!projection) recalcProjection();\n  useMemo(recalcProjection, [size]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.baseStaticMap, className),\n    ref: mapRef,\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, React.createElement(StaticMap, _extends({}, viewport, {\n    height: size.height,\n    width: size.width,\n    mapStyle: mapStyles[currStyle].style,\n    onData: onMapDataEvent,\n    mapboxApiAccessToken: config.mapConfig.mapBoxToken\n  }, passthroughProps, {\n    ref: function ref(map) {\n      mapBoxRef.current = map;\n    }\n  }), mapStyles && mapStyles.length > 1 ? React.createElement(StyleButtons, {\n    controlPadding: controlPadding,\n    currStyle: currStyle,\n    mapStyles: mapStyles,\n    setCurrStyle: setCurrStyle\n  }) : null, children && Array.isArray(children) ? children.map(function (c) {\n    return handleChild(c, mapBoxRef, size.height, size.width, projection);\n  }) : handleChild(children, mapBoxRef, size.height, size.width, projection)));\n};\n\nfunction handleChild(child, mapBoxRef, height, width, projection) {\n  var viewport = {};\n  return typeof child === 'function' ? child(viewport, height, width, projection) : child;\n}\n\nBaseStaticMap.propTypes = {\n  children: PropTypes.any,\n  deckelements: PropTypes.array,\n  data: PropTypes.array,\n  controlPadding: PropTypes.object,\n  minPitch: PropTypes.number,\n  maxPitch: PropTypes.number,\n  pitch: PropTypes.number,\n  className: PropTypes.string,\n  viewport: PropTypes.object,\n  bounds: PropTypes.array,\n  zoomBounds: PropTypes.array,\n  InnerBounds: PropTypes.array,\n  mapStyles: PropTypes.array,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  zoom: PropTypes.number,\n  onMapDataEvent: PropTypes.func\n};\nBaseStaticMap.defaultProps = {\n  controlPadding: {},\n  stylechooser: true,\n  initStyle: 0,\n  mapStyles: mapStyles\n};\nexport default BaseStaticMap;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: theme.palette.primary.main,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      zIndex: 1\n    },\n    rootActive: {\n      zIndex: 60\n    },\n    svgDot: {\n      zIndex: 61,\n      width: 20,\n      height: 20,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    dot: {\n      stroke: theme.palette.secondary.contrastText,\n      strokeWidth: '1',\n      fill: theme.palette.secondary.main\n    },\n    directionIndicator: {\n      position: 'absolute',\n      left: '50%',\n      zIndex: 59\n    },\n    name: {\n      color: 'white',\n      fontWeight: 'bold',\n      textShadow: \"\\n        0px 0px 4px #000000, \\n        0px 0px 4px #000000 \\n    \",\n      zIndex: 60,\n      position: 'relative'\n    },\n    nameActive: {\n      color: theme.palette.secondary.dark,\n      textShadow: \"\\n    0px 0px 2px #FFFFFF, \\n    0px 0px 2px #FFFFFF,\\n    0px 0px 4px #FFFFFF \\n\"\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Single = function Single(_ref) {\n  var direction = _ref.direction;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"svg\", {\n    className: classes.svgDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 10, 10\"\n  }, React.createElement(\"circle\", {\n    cx: \"5\",\n    cy: \"5\",\n    r: \"4\",\n    className: classes.dot\n  })), direction && direction >= 0 ? React.createElement(\"div\", {\n    className: classes.directionIndicator\n  }, React.createElement(\"svg\", {\n    className: classes.svgArc,\n    version: \"1.1\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0, 0, 100, 100\",\n    style: {\n      transform: \"translateY(-50%) translateX(-50%) rotateZ(\".concat(direction, \"deg)\")\n    }\n  }, React.createElement(\"path\", {\n    d: \"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z\",\n    fill: \"#009DC1\",\n    fillOpacity: \"0.444\",\n    strokeWidth: \"0.5\",\n    strokeOpacity: \"0.6\",\n    stroke: \"#FFFFFF\"\n  }))) : null);\n};\n\nSingle.propTypes = {\n  direction: PropTypes.number\n};\nexport default Single;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Marker } from 'react-map-gl';\nimport BaseMap from './BaseMap';\nimport Dot from './markers/Dot';\nimport BaseStaticMap from './BaseStaticMap';\n\nvar MapDot = function MapDot(_ref) {\n  var staticMap = _ref.staticMap,\n      editable = _ref.editable,\n      latitude = _ref.latitude,\n      longitude = _ref.longitude,\n      onChange = _ref.onChange,\n      direction = _ref.direction,\n      props = _objectWithoutProperties(_ref, [\"staticMap\", \"editable\", \"latitude\", \"longitude\", \"onChange\", \"direction\"]);\n\n  var Map = staticMap ? BaseStaticMap : BaseMap;\n  var mapProps = staticMap ? {} : {\n    touchRotate: false,\n    dragRotate: false,\n    showMe: editable,\n    lockPan: !editable,\n    onViewportChange: onChange\n  };\n  return React.createElement(Map, _extends({}, mapProps, props), latitude && longitude ? React.createElement(Marker, {\n    className: 'singleMarker',\n    latitude: latitude,\n    longitude: longitude\n  }, React.createElement(Dot, {\n    direction: direction\n  })) : React.createElement(Dot, {\n    direction: direction\n  }));\n};\n\nMapDot.propTypes = {\n  direction: PropTypes.number,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  editable: PropTypes.bool,\n  staticMap: PropTypes.bool,\n  onChange: PropTypes.func\n};\nexport default MapDot;","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    rectContents: {\n      color: theme.palette.common.white,\n      textShadow: \"5px 6px 6px \".concat(theme.palette.common.black),\n      position: 'absolute',\n      padding: theme.spacing(2),\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    areaLabel: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      transform: 'translateY(-110%)'\n    },\n    rectContentsDownloading: {\n      textShadow: 'none',\n      color: theme.palette.primary.contrastText\n    },\n    rectIcon: {\n      position: 'absolute',\n      opacity: 0.4,\n      width: '50%',\n      height: '50%',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    tooBig: {\n      color: theme.palette.error.contrastText\n    },\n    tickText: {},\n    svgRect: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: -1,\n      height: '100%',\n      width: '100%'\n    },\n    svgCutout: {\n      stroke: 'none',\n      fill: '#00000099'\n    },\n    svgBorder: {\n      fill: 'none',\n      stroke: 'none'\n    },\n    svgBorderNavigating: {\n      stroke: '#44444499'\n    },\n    svgBorderLocked: {\n      fill: '#66666666',\n      stroke: '#44444499'\n    },\n    svgBorderTooBig: {\n      opacity: 0.5,\n      fill: theme.palette.error.main,\n      stroke: theme.palette.error.dark\n    },\n    svgBorderDownloading: {\n      opacity: 0.7,\n      fill: theme.palette.primary.main,\n      stroke: '#44444499'\n    },\n    downloadingProgress: {},\n    downloadingProgressCircle: {\n      margin: theme.spacing(2)\n    },\n    snackError: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    mapWrapper: {\n      flex: '1 1',\n      overflow: 'hidden',\n      position: 'relative'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef, useState, useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport AppBar from '@material-ui/core/AppBar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport LockIcon from '@material-ui/icons/Lock';\nimport SignalWifiOffIcon from '@material-ui/icons/SignalWifiOff';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { Button } from '@material-ui/core';\nimport { config } from '@morphoto/client-common';\nimport numeral from 'numeral';\nimport { util } from '@morphoto/common';\nimport BaseMap from './BaseMap';\nimport useStyles from './OfflineMap.style';\nexport var OFFLINE_STATES = {\n  LOCKED: 'Locked',\n  OFFLINE: 'Offline',\n  NAVIGATING: 'Navigating',\n  ERROR: 'Error',\n  DOWNLOADING: 'Downloading',\n  CANCELED: 'Canceled'\n};\n\nvar OfflineMap = function OfflineMap(_ref) {\n  var initViewport = _ref.initViewport,\n      progress = _ref.progress,\n      toolState = _ref.toolState,\n      actions = _ref.actions;\n  var classes = useStyles();\n  var mapWrapperRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      bounds = _useState2[0],\n      setBounds = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewState = _useState4[0],\n      setViewport = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      area = _useState6[0],\n      setArea = _useState6[1];\n\n  var tooBig = area > config.home.Offline.maxMapTileArea;\n\n  var classWithState = function classWithState(name) {\n    if (!toolState) return classes[name];else return classNames(classes[name], classes[\"\".concat(name).concat(toolState)], tooBig ? classes[\"\".concat(name, \"TooBig\")] : null);\n  };\n\n  var setGeoState = useCallback(util.debounce(function (newViewport, projection, rectSide) {\n    var longitude = newViewport.longitude,\n        latitude = newViewport.latitude;\n    var newArea = projection ? Math.abs(projection.metersPerPixel[0] * rectSide * projection.metersPerPixel[1] * rectSide / (1000 * 1000)) : 0;\n    var dx = rectSide / 2 * projection.degreesPerPixel[0];\n    var dy = rectSide / 2 * projection.degreesPerPixel[1];\n    var newBounds = [longitude - dx, latitude - dy, longitude + dx, latitude + dy];\n    if (newArea !== area) setArea(newArea);\n    if (newBounds !== bounds) setBounds(newBounds);\n    setViewport(newViewport);\n  }, 500), []);\n  var snack = null;\n\n  var onSnackClose = function onSnackClose() {};\n\n  var snackTimeout = null;\n\n  switch (toolState) {\n    case OFFLINE_STATES.NAVIGATING:\n      snack = tooBig ? null : React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Place the square around the area you wish to download for later use',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"inherit\",\n          disabled: area > config.home.Offline.maxMapTileArea,\n          onClick: function onClick() {\n            return actions.onStartDownload(bounds, viewState);\n          }\n        }, \"Start Download\")]\n      });\n      break;\n\n    case OFFLINE_STATES.DOWNLOADING:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Downloading...',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"inherit\",\n          onClick: actions.onCancel\n        }, \"Cancel\")]\n      });\n      break;\n\n    case OFFLINE_STATES.LOCKED:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'This is the area you downloaded last',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"secondary\",\n          onClick: actions.onUnlock\n        }, \"Download a new Area\")]\n      });\n      break;\n\n    case OFFLINE_STATES.OFFLINE:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'You cannot download content when you are offline.'\n      });\n      break;\n\n    case OFFLINE_STATES.CANCELED:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snackError,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Cancelling...'\n      });\n      onSnackClose = actions.onCancelComplete;\n      snackTimeout = 2000;\n      break;\n\n    default:\n      break;\n  }\n\n  var unlocked = toolState === OFFLINE_STATES.NAVIGATING;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: actions.onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Offline data manager\"))), React.createElement(\"div\", {\n    className: classes.mapWrapper,\n    ref: mapWrapperRef\n  }, React.createElement(BaseMap, {\n    hideNavControls: true,\n    showMe: unlocked,\n    dragPan: unlocked,\n    dragRotate: false,\n    scrollZoom: unlocked,\n    doubleClickZoom: false,\n    touchZoom: unlocked,\n    touchRotate: false,\n    viewport: initViewport\n  }, function (viewport, height, width, projection) {\n    var rectSide = Math.min(height, width) * 0.6;\n    var rectStyle = {\n      height: rectSide,\n      width: rectSide\n    };\n    var boxCorners = {\n      x: width / 2 - rectSide / 2,\n      y: height / 2 - rectSide / 2\n    };\n    var totalProgress = progress.tileTick && progress.seriesTick && progress.seriesPhotoTick ? [progress.tileTick[0] + progress.seriesTick[0] + progress.seriesPhotoTick[0], progress.tileTick[1] + progress.seriesTick[1] + progress.seriesPhotoTick[1]] : [0, 1];\n    if (totalProgress[1] === 0) totalProgress[1] = 1;\n    setGeoState(viewport, projection, rectSide);\n    return React.createElement(\"div\", {\n      style: {\n        height: height,\n        width: width\n      }\n    }, React.createElement(\"div\", {\n      className: classWithState('rectContents'),\n      style: rectStyle\n    }, toolState !== OFFLINE_STATES.DOWNLOADING && React.createElement(Typography, {\n      className: classNames(classes.areaLabel, tooBig ? classes.tooBig : null),\n      color: \"inherit\",\n      variant: \"h5\",\n      component: \"div\"\n    }, numeral(area).format('0,0'), \" km\\xB2\"), toolState === OFFLINE_STATES.NAVIGATING && !tooBig && React.createElement(CheckCircleOutlineIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\",\n      onClick: function onClick() {\n        return actions.onStartDownload(bounds, viewState);\n      }\n    }), toolState === OFFLINE_STATES.NAVIGATING && tooBig ? React.createElement(\"div\", null, React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"> \", config.home.Offline.maxMapTileArea, \" km\\xB2\"), React.createElement(ErrorIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    }), React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body2\",\n      component: \"div\"\n    }, \"Window too big. Try zooming in.\")) : null, toolState === OFFLINE_STATES.DOWNLOADING && React.createElement(\"div\", {\n      className: classes.downloadingProgress\n    }, React.createElement(Typography, {\n      className: \"areaLabel\",\n      color: \"inherit\",\n      variant: \"h5\"\n    }, \"Downloading...\"), React.createElement(CircularProgress, {\n      className: classes.downloadingProgressCircle,\n      variant: \"determinate\",\n      size: rectSide * 0.4,\n      thickness: rectSide * 0.013,\n      value: Math.floor(100 * totalProgress[0] / totalProgress[1]),\n      color: \"inherit\"\n    }), progress.tileTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Map Tiles: \", progress.tileTick[0], \" of \", progress.tileTick[1]), progress.seriesTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Series: \", progress.seriesTick[0], \" of \", progress.seriesTick[1]), progress.seriesPhotoTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Series Photos: \", progress.seriesPhotoTick[0], \" of \", progress.seriesPhotoTick[1])), toolState === OFFLINE_STATES.LOCKED && React.createElement(\"div\", null, React.createElement(LockIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    })), toolState === OFFLINE_STATES.OFFLINE && React.createElement(\"div\", null, React.createElement(SignalWifiOffIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    }))), React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        height: height,\n        width: width\n      }\n    }, React.createElement(\"defs\", null, React.createElement(\"path\", {\n      id: \"Triangle\",\n      d: \"M 16,0 L -8,9 v-18 z\",\n      fill: \"black\",\n      stroke: \"none\"\n    })), React.createElement(\"g\", {\n      fillRule: \"evenodd\",\n      className: classWithState('svgCutout')\n    }, React.createElement(\"path\", {\n      d: \"\\n                            M 0 0 L \".concat(width, \" \", 0, \" L \").concat(width, \" \").concat(height, \"  L \", 0, \" \").concat(height, \" Z\\n                             M \").concat(boxCorners.x, \" \").concat(boxCorners.y, \" \\n                             L \").concat(width - boxCorners.x, \" \").concat(boxCorners.y, \"\\n                             L \").concat(width - boxCorners.x, \" \").concat(height - boxCorners.y, \" \\n                             L \").concat(boxCorners.x, \" \").concat(height - boxCorners.y, \" Z\\n                             \")\n    })), React.createElement(\"g\", {\n      fillRule: \"evenodd\",\n      className: classWithState('svgBorder')\n    }, React.createElement(\"path\", {\n      d: \"\\n                             M \".concat(boxCorners.x, \" \").concat(boxCorners.y, \" \\n                             L \").concat(width - boxCorners.x, \" \").concat(boxCorners.y, \"\\n                             L \").concat(width - boxCorners.x, \" \").concat(height - boxCorners.y, \" \\n                             L \").concat(boxCorners.x, \" \").concat(height - boxCorners.y, \" Z\\n                             \")\n    }))));\n  }), snack && React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: true,\n    onClose: onSnackClose,\n    autoHideDuration: snackTimeout\n  }, snack)));\n};\n\nOfflineMap.propTypes = {\n  toolState: PropTypes.oneOf(Object.values(OFFLINE_STATES)),\n  initViewport: PropTypes.object,\n  progress: PropTypes.shape({\n    tileTick: PropTypes.array,\n    seriesTick: PropTypes.array,\n    seriesPhotoTick: PropTypes.array\n  }),\n  actions: PropTypes.shape({\n    onMenuBack: PropTypes.func.isRequired,\n    onStartDownload: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onCancelComplete: PropTypes.func.isRequired,\n    onUnlock: PropTypes.func.isRequired\n  })\n};\nexport default OfflineMap;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Slider from '@material-ui/core/Slider';\nimport MapDot from './MapDot';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dlgContent: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 0\n    },\n    mapWrapper: {\n      flexGrow: 1\n    },\n    sliderWrapper: {\n      padding: '20px'\n    },\n    slider: {},\n    sliderRoot: {},\n    body: {\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      margin: 0,\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MapDirPicker = function MapDirPicker(_ref) {\n  var open = _ref.open,\n      onOk = _ref.onOk,\n      onCancel = _ref.onCancel,\n      title = _ref.title,\n      initLat = _ref.latitude,\n      initLong = _ref.longitude,\n      initDir = _ref.direction;\n  var classes = useStyles();\n\n  var _useState = useState({\n    longitude: initLong,\n    latitude: initLat\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      longitude = _useState2$.longitude,\n      latitude = _useState2$.latitude,\n      setCoords = _useState2[1];\n\n  var _useState3 = useState(initDir),\n      _useState4 = _slicedToArray(_useState3, 2),\n      direction = _useState4[0],\n      setRotation = _useState4[1];\n\n  var initViewport = useMemo(function () {\n    return {\n      zoom: 18,\n      latitude: initLat,\n      longitude: initLong\n    };\n  }, [initLat, initLong]);\n\n  var mapChange = function mapChange(_ref2) {\n    var _ref2$viewport = _ref2.viewport,\n        longitude = _ref2$viewport.longitude,\n        latitude = _ref2$viewport.latitude;\n    return setCoords({\n      longitude: longitude,\n      latitude: latitude\n    });\n  };\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    fullScreen: true,\n    onClose: onCancel\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    color: \"inherit\"\n  }, title)), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(\"div\", {\n    className: classes.mapWrapper\n  }, React.createElement(MapDot, {\n    editable: true,\n    className: classes.map,\n    direction: direction > 0 ? direction : null,\n    viewport: initViewport,\n    onChange: mapChange\n  })), React.createElement(\"div\", {\n    className: classes.sliderWrapper\n  }, React.createElement(FormLabel, {\n    className: classes.mapFormLabel\n  }, \"Direction \", direction > -1 ? '' : '(off)'), React.createElement(Slider, {\n    classes: {\n      root: classes.sliderRoot\n    },\n    value: direction || -1,\n    min: -1,\n    max: 360,\n    step: 1,\n    onChange: function onChange(e, value) {\n      return setRotation(value);\n    }\n  }))), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onCancel\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk({\n        longitude: longitude,\n        latitude: latitude,\n        direction: direction\n      });\n    }\n  }, \"Ok\")));\n};\n\nMapDirPicker.propTypes = {\n  open: PropTypes.bool,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  direction: PropTypes.number,\n  onOk: PropTypes.func,\n  onCancel: PropTypes.func,\n  title: PropTypes.string\n};\nexport default MapDirPicker;","export { default as HomeMap } from './HomeMap';\nexport { default as BaseMap } from './BaseMap';\nexport { default as BaseStaticMap } from './BaseStaticMap';\nexport { default as MapDot } from './MapDot';\nexport { default as OfflineMap, OFFLINE_STATES } from './OfflineMap';\nexport { default as MapDirPicker } from './MapDirPicker';\nexport { default as ClusterSelected } from './ClusterSelected';"],"sourceRoot":""}