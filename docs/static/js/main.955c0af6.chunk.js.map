{"version":3,"sources":["../../icons/dist/BDA.js","../../icons/dist/AppLogoSimple.js","../../icons/dist/QRCode.js","../../icons/dist/Apple.js","../../icons/dist/index.js","../../client-common/dist/config.js","../../client-common/dist/canvasLib.js","../../client-common/dist/imageParser.js","../../client-common/dist/Webcam.js","../../client-common/dist/useCamera.js","../../client-common/dist/useComponentSize.js","../../client-common/dist/useFileInput.js","../../client-common/dist/useOnline.js","../../client-common/dist/ErrorBoundary.js","../../client-common/dist/useOSDetect.js","../../client-common/dist/appContext.js","../../client-common/dist/useSensors.js","../../client-common/dist/index.js","../../components/navigation/dist/TopBar.js","../../components/navigation/dist/SideDrawer.js","../../components/navigation/dist/TopBarWrapper.js","../../components/navigation/dist/OfflineBar.js","../../components/navigation/dist/BottomBar.js","../../components/navigation/dist/index.js","../../../packages/common/dist/index.js","../../components/tags/dist/TagChip.js","../../components/tags/dist/TagControl.style.js","../../components/tags/dist/TagControl.js","../../components/tags/dist/TagEdit.js","../../components/tags/dist/TagView.js","../../components/tags/dist/XYTagChip.style.js","../../components/tags/dist/XYTagChip.js","../../components/tags/dist/XYTagSelect.js","../../components/tags/dist/XYTagSelect.style.js","../../components/tags/dist/XYTagChooser.style.js","../../components/tags/dist/XYTagChooser.js","../../components/tags/dist/useXYTags.js","../../components/tags/dist/index.js","../../components/client-auth/dist/useAuthCommon.js","../../components/client-auth/dist/AuthContainer.js","../../components/client-auth/dist/auth.style.js","../../components/client-auth/dist/SignIn.js","../../components/client-auth/dist/PasswordHelper.js","../../components/client-auth/dist/SignUp.js","../../components/client-auth/dist/ConfirmSignIn.js","../../components/client-auth/dist/CheckemailMsg.js","../../components/client-auth/dist/ConfirmSignUp.js","../../components/client-auth/dist/ForgotPassword.js","../../components/client-auth/dist/Loading.js","../../components/client-auth/dist/RequireNewPassword.js","../../components/client-auth/dist/VerifyContact.js","../../client-mock/dist/index.js","../../components/client-auth/dist/auth.fixture.js","../../components/client-auth/dist/useAuthentication.js","../../components/client-auth/dist/index.js","../../client-mock/dist/LoadFakeData.js","../../client-mock/dist/withContext.js","../../components/feed/dist/MyFeed.js","../../components/feed/dist/FeedEnder.js","../../components/camera/dist/cameraHelpers.js","../../components/camera/dist/CameraTool.js","../../components/camera/dist/CameraTool.style.js","../../components/camera/dist/QRUtil.js","../../components/camera/dist/QRReader.js","../../components/camera/dist/QRDisplay.js","../../components/camera/dist/index.js","../../datastore/dist/index.js","connectors/getPhotoUrls.js","../../components/pwainstall/dist/InstallPrompt.js","../../components/pwainstall/dist/useShowAddToHome.js","connectors/withUploadConnect.js","connectors/withSeriesConnect.js","connectors/withHomeMap.js","connectors/withSearchConnect.js","connectors/withProfileConnect.js","connectors/withFeedConnect.js","connectors/withOfflineData.js","../../components/feed/dist/index.js","../../components/profile/dist/index.js","connectors/Error.connect.js","../../components/home/dist/Home.js","../../components/home/dist/index.js","connectors/App.connect.js","serviceWorker.js","index.js","../../datastore/dist/redux/reducers/map.js","../../datastore/dist/redux/reducers/home.js","../../datastore/dist/redux/reducers/uploader.js","../../datastore/dist/redux/reducers/flags.js","../../datastore/dist/redux/reducers/offline.js","../../datastore/dist/redux/reducers/index.js","../../datastore/dist/redux/queueMiddleware.js","../../datastore/dist/redux/storeConfig.js","../../datastore/dist/redux/withReduxProvider.js","../../components/search/dist/SearchContextItem.js","../../components/search/dist/SearchContextResults.js","../../components/search/dist/SearchEnder.js","../../components/search/dist/SearchResults.js","../../components/search/dist/SearchPlaceholder.js","../../components/search/dist/Search.js","../../components/slideshow/dist/Slideshow.js","../../components/slideshow/dist/Slideshow.style.js","../../components/swipeshow/dist/SwipeShow.js","../../components/swipeshow/dist/SwipeShow.style.js","../../components/profile/dist/MeCard.js","../../components/profile/dist/MyProfile.js","../../../packages/common/dist/graphql/fragments.js","../../icons/dist/AppLogo.js","../../components/search/dist/SearchInput.js","../../components/feed/dist/FeedItem.js","../../components/search/dist/index.js","../../../packages/mock/dist/random.js","../../datastore/dist/s3Upload.js","../../datastore/dist/graphql/mutations/createSeries.js","../../client-mock/dist/utils.js","../../../packages/common/dist/accesscontrol/permissions.js","../../../packages/common/dist/dates.js","../../../packages/common/dist/util.js","../../datastore/dist/graphql/useGraphQL.js","../../themes/dist/jss/mapbox.css.js","../../themes/dist/jss/typeface-roboto.css.js","../../components/maps/dist/BaseMap.style.js","../../../packages/mock/dist/index.js","../../datastore/dist/offline.js","../../components/ui/dist/FindOnMapButton.js","../../components/ui/dist/AboutApp.js","../../components/ui/dist/AppSettings.js","../../components/ui/dist/AddFab.js","../../components/ui/dist/ContextMenu.js","../../components/ui/dist/LibraryFilePicker.js","../../components/ui/dist/ShortLongText.js","../../components/ui/dist/useNewImageMenu.js","../../components/ui/dist/UploadControl.js","../../components/ui/dist/DateControl.js","../../components/ui/dist/DateView.js","../../components/ui/dist/ErrorScreen.js","../../components/ui/dist/index.js","../../datastore/dist/graphql/mutations/updateQueries.js","../../datastore/dist/redux/actions.js","../../../packages/common/dist/Tags.js","../../../packages/common/dist/exif.js","../../../packages/common/dist/Series.js","../../../packages/common/dist/Photo.js","../../../packages/common/dist/share.js","../../../packages/common/dist/accesscontrol/AccessHelper.js","../../../packages/common/dist/graphql/queries.js","../../../packages/common/dist/graphql/mutations.js","../../../packages/common/dist/graphql/optimistic.js","../../../packages/common/dist/graphql/schema.graphql.js","../../components/photos/dist/BrokenImg.js","../../components/photos/dist/LoadingImg.js","../../components/photos/dist/RawImage.js","../../components/photos/dist/Photo.js","../../components/photos/dist/Photo.style.js","../../components/photos/dist/PhotoGrid.js","../../components/photos/dist/PhotoGrid.style.js","../../components/photos/dist/PhotoFadeSlider.js","../../components/photos/dist/PhotoReviewTool.js","../../components/photos/dist/PhotoReviewTool.style.js","../../components/photos/dist/PhotoViewTool.js","../../components/photos/dist/PhotoViewTool.style.js","../../components/photos/dist/index.js","../../datastore/dist/graphql/mutations/createPhoto.js","../../datastore/dist/graphql/mutations/deletePhoto.js","../../datastore/dist/graphql/mutations/deleteSeries.js","../../datastore/dist/graphql/mutations/unwatch.js","../../datastore/dist/graphql/mutations/updatePhoto.js","../../datastore/dist/graphql/mutations/updateSeries.js","../../datastore/dist/graphql/mutations/watch.js","../../themes/dist/themes.js","../../themes/dist/jss/baseline.css.js","../../themes/dist/index.js","../../client-mock/dist/CosmosBlackBackground.js","../../client-mock/dist/MaterialUIWrap.js","../../../packages/mock/dist/fakedata.js","../../components/modals/dist/DeleteDialog.js","../../components/modals/dist/CancelConfirm.js","../../components/modals/dist/FeatureDisabled.js","../../components/modals/dist/BigText.js","../../components/modals/dist/BigTextEdit.js","../../components/modals/dist/index.js","../../components/slideshow/dist/index.js","../../components/swipeshow/dist/index.js","../../components/photoseries/dist/UserListItem.js","../../components/photoseries/dist/contexts.js","../../components/photoseries/dist/views/SeriesInfo.js","../../components/photoseries/dist/views/SeriesInfo.style.js","../../components/photoseries/dist/SeriesView.style.js","../../components/photoseries/dist/views/SeriesView.js","../../components/photoseries/dist/views/SeriesEditInner.js","../../components/photoseries/dist/views/SeriesEditInner.style.js","../../components/photoseries/dist/views/SeriesEdit.js","../../components/photoseries/dist/views/SeriesEdit.style.js","../../components/photoseries/dist/views/PhotoInfoInner.js","../../components/photoseries/dist/views/NewPhotoInfo.js","../../components/photoseries/dist/views/NewPhotoInfo.style.js","../../components/photoseries/dist/views/NewPhoto.js","../../components/photoseries/dist/SeriesNotFound.js","../../components/photoseries/dist/SeriesLoading.js","../../components/photoseries/dist/PhotoSeries.js","../../components/photoseries/dist/SeriesList.js","../../components/photoseries/dist/SeriesList.style.js","../../components/photoseries/dist/SeriesListItem.js","../../components/photoseries/dist/ViewListDialog.js","../../components/photoseries/dist/views/PhotoInfo.js","../../components/photoseries/dist/index.js","../../components/maps/dist/mapStyles/index.js","../../components/maps/dist/markers/MyLocation.js","../../components/maps/dist/controls/StyleButtons.js","../../components/maps/dist/controls/MyLocationButton.js","../../components/maps/dist/BaseMap.js","../../components/maps/dist/lib/useClusteredData.js","../../components/maps/dist/HomeMap.style.js","../../components/maps/dist/ClusterSelected.js","../../components/maps/dist/markers/Single.js","../../components/maps/dist/markers/Cluster.js","../../components/maps/dist/HomeMap.js","../../components/maps/dist/BaseStaticMap.js","../../components/maps/dist/markers/Dot.js","../../components/maps/dist/MapDot.js","../../components/maps/dist/OfflineMap.style.js","../../components/maps/dist/OfflineMap.js","../../components/maps/dist/MapDirPicker.js","../../components/maps/dist/index.js"],"names":["createElement","Fragment","d","fillRule","x","y","width","height","REACT_APP_BASEURL","mandatoryEnv","REACT_APP_MAPBOX_TOKEN","REACT_APP_VERSION","REACT_APP_CONTACT_EMAIL","REACT_APP_GRAPHQL","REACT_APP_AWS_REGION","REACT_APP_COGNITO_USER_POOL_ID","REACT_APP_COGNITO_CLIENT_ID","Object","keys","forEach","keyname","error","concat","mapConfig","mapBoxToken","endpoints","graphql","share","tagColors","version","contact","ACCESS","OPEN","label","description","color","green","PRIVATE","red","PUBLIC","blue","home","Offline","seriesImgsToCache","highestOfflineTileZoom","maxMapTileArea","AppStateTypes","FEED","MAP","SEARCH","PROFILE","SERIES","SETTINGS","QRCAPTURE","NEW_SERIES_CAMERA","NEW_SERIES_LIBRARY","OFFLINE_DOWNLOAD","SEARCH_TABS","KEYWORD","TAG","LOCATION","USER","PROJECT","MapModeTypes","FREE","federated","analytics","token","aws","Auth","region","userPoolId","userPoolWebClientId","mandatorySignIn","cookieStorage","domain","expires","secure","AWSPinpoint","appId","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","key","getOwnPropertyDescriptors","defineProperties","defineProperty","ROTATION_MODES","1","rot","p","2","3","4","5","6","7","8","blob","exifObj","newRatio","Promise","resolve","img","Image","imageUrl","window","URL","webkitURL","createObjectURL","onload","newExifObj","imageHeight","naturalHeight","imageWidth","naturalWidth","canvasEl","document","ctx","getContext","_getRotation","rotObj","exif","tags","Orientation","_unused","tr","sz","reverse","orientation","ExifImageWidth","ExifImageHeight","imageSize","translate","rotate","Math","PI","getRotation","rotatedExifObj","cropSize","ratio","newWidth","newHeight","round","getAutoCrop","transform","drawImage","info","e","toBlob","newBlob","file","type","src","name","size","resultObj","ext","async","_context","prev","next","awrap","sent","getExtFromFile","abrupt","stop","fileBlob","Webcam","webcamElement","canvasElement","this","location","protocol","hostname","warn","navigator","mediaDevices","getUserMedia","value","srcObject","getVideoTracks","previewSize","newPreviewSize","_this","_context2","innerWidth","innerHeight","capabilities","redEyeReduction","max","min","step","fillLightMode","previewRatio","reject","undefined","audio","video","facingMode","ideal","then","mediaStream","onloadedmetadata","play","onplaying","mediaStreamTrack","ImageCapture","getPhotoCapabilities","catch","err","Error","videoWidth","videoHeight","context","_this$_drawImage","_drawImage","data","getImageData","imageCapture","takePhoto","_this2","_ref","quality","onCapture","_useState","_useState2","cameraError","setCameraError","_useState3","_useState4","sensorSize","setSensorSize","_useState5","_useState6","cameraOnline","setCameraOnline","camRef","current","getElementById","setup","newSensorSize","destroy","captureImage","imageParser","dumpCanvasToBlob","captureRawData","capturedData","takeImageData","getSize","el","minSize","defaultSize","offsetWidth","offsetHeight","ref","resizeActiveRef","resizeActive","setResizeActive","setComponentSize","handleResize","newSize","handleResizeDebounced","debounce","ResizeObserver","resizeObserver","observe","disconnect","addEventListener","removeEventListener","onChange","preferCamera","initialClick","anyFile","inputRef","clickRef","element","style","display","accept","capture","forceClick","click","handleChange","evt","files","fileClickEl","state","setState","onLine","newDate","Date","now","isOnline","offlineSince","_React$Component","ErrorBoundary","props","call","hasError","_this$state","FallbackUI","fallback","children","Component","propTypes","any","isIos","Boolean","test","userAgent","vendor","opera","device","ios","phone","a","substr","isPhone","cameraAccess","AppContext","createContext","finalValue","online","Provider","shape","user","signedIn","bool","isRequired","getPhotoUrls","func","metaConfig","tagConfig","array","onAvatarClick","globalActions","isrequired","accuracy","altitude","altitudeAccuracy","heading","latitude","longitude","speed","timestamp","mountedRef","watchIdRef","onEvent","event","coords","geolocation","getCurrentPosition","watchPosition","clearWatch","useDeviceOrientation","absolute","alpha","beta","gamma","deviceOrientation","setDeviceOrientation","isMounted","handleDeviceOrientation","config","useStyles","makeStyles","theme","appBar","background","toolbar","alignItems","padding","spacing","backgroundColor","palette","primary","main","contrastText","borderBottom","secondary","searchIcon","opacity","marginRight","transparent","text","noCamIcon","logo","transparentLogo","transparentLogoIcon","flexGrow","qrButton","qrButtonTransparent","className","isTransparent","hideLogo","actions","classes","AppBar","elevation","position","Toolbar","disableGutters","IconButton","onClick","setDrawerOpen","onQRClickWrapped","string","isRequred","drawerInner","flexDirection","disableListItem","avatar","border","margin","gravatarImg","spacer","fullList","open","onClose","onOpen","_useContext","currentUser","SwipeableDrawer","role","onKeyDown","username","List","ListItem","root","Avatar","alt","gravatar","loginButton","ListItemText","Divider","button","onQRButtonClick","onDisabledClick","ListItemIcon","addToHomeScreen","onOfflineMenuClick","onSettingsClick","onAboutClick","signOut","forceSignIn","_extends","assign","prototype","hasOwnProperty","DIALOGS","topBarProps","dialogOpen","setDialogOpen","drawerOpen","handleQRClick","title","message","Typography","variant","component","textAlign","sinceStr","setSinceStr","timerRef","calcSinceStr","newText","formatDateAgo","clearTimer","clearInterval","setInterval","loggedText","offlineText","STATES","borderTop","container","jet","papayawhip","paper","paddingBottom","list","marginBottom","subheader","grow","addFab","bottom","left","transformOrigin","zIndex","Container","maxWidth","Button","edge","setHomeState","onCameraClick","onLibraryClick","_typeof","obj","Symbol","iterator","constructor","exports","get","_Tags","getSeriesTags","_exif","getExifPromise","_Series","_Photo","_share","createShareUrl","decodeShareUrl","_AccessHelper","permissions","util","dates","accessControl","graphqlAPI","_accesscontrol","_interopRequireDefault","_permissions","datesLib","_interopRequireWildcard","utilLib","_getRequireWildcardCache","WeakMap","cache","__esModule","has","newObj","hasPropertyDescriptor","desc","set","queries","mutations","fragments","optimistic","schema","tagChips","fontSize","marginTop","deleteIcon","chipAvatar","edit","tag","onDelete","useTheme","Chip","getContrastText","id","tagContainer","formControl","singleValue","valueContainer","flexWrap","flex","overflow","hint","onSelectChange","inputValue","_ref2","action","removedValue","option","map","iv","typeId","xyCoords","tagValues","selectOptions","val","remainingTags","values","t","indexOf","fieldTitle","allowAdditions","options","isFocused","components","deleteRemoves","isClearable","placeholder","isMulti","isSearchable","dlgContent","grey","dlgTitle","closeButton","alignSelf","onOk","onCancel","setValue","Dialog","scroll","fullScreen","DialogTitle","disableTypography","DialogContent","field","DialogActions","idx","xyTagChip","cursor","top","editing","reversedChip","right","chipAvatarIcon","reversedDelete","chipBucket","reversedChipBucket","onTagDragOver","onTagDragStop","onTagDelete","onNewTag","isReversed","relCoords","stopBadness","preventDefault","stopPropagation","disabled","bounds","onDrag","onStop","noOptionsMessage","input","tc","Control","Menu","NoOptionsMessage","Option","Placeholder","ValueContainer","blurInputOnSelect","TextField","fullWidth","InputProps","inputComponent","inputProps","selectProps","innerRef","innerProps","textFieldProps","_ref3","Paper","square","_ref4","_ref5","isSelected","MenuItem","buttonRef","selected","fontWeight","_ref6","header","listItem","dlgBody","paddingLeft","paddingRight","_onClose","xyTags","allowXY","paperScrollPaper","tagType","photo","isDragging","setIsDragging","newTagDialog","setNewTagDialog","tagClass","addTag","__isNew__","createNewXYTagObj","createExistingXYTagObj","updateTagLocation","oldTag","parseInt","multiplier","onAddTagTrigger","pageX","pageY","TagChooser","getRelXYTags","containerRef","handleKeyPress","found","getElementsByClassName","bgSwoosh","loading","animation","logoContainer","minHeight","inner","minWidth","ThemeProvider","login","CssBaseline","forgotPassword","switch","switchButton","borderRadius","phoneNumInner","phoneNumDropdown","warnText","fontStyle","noSignin","handleSignup","handleForgotPassword","handleInputChange","handleBeAnonymous","handleSignIn","autoFocus","textField","autoComplete","chipContainer","chip","ok","bad","pword","hasUpper","match","hasLower","hasNum","hasSpecial","enoughChars","signUpFields","signUpFieldLabels","signUpFieldPlaceholders","handleBack","countryDialCodes","defaultDialCode","selectVal","setSelectVal","setPword","pwordType","handleDialCodeChange","findIndex","f","FormControl","InputLabel","htmlFor","shrink","required","Select","dialCode","handleConfirm","checkEmailMsgIco","checkEmailMsgTxt","checkEmailMsg","onResend","Snackbar","anchorOrigin","vertical","horizontal","SnackbarContent","handleResend","handleSubmit","handleSendCode","setSent","change","requiredAttributes","placeholders","attribute","RADIO","onBack","hasEmail","hasPhone","handleSkip","handleVerify","radioVal","setRadioVal","Tabs","indicatorColor","textColor","centered","Tab","icon","defaultProps","MaterialUIWrap","default","Wrapper","noTheme","authState","google_client_id","alert","configure","defaultAuthState","authData","signUpConfig","hiddenDefaults","defaultCountryCode","displayOrder","_useState2$","setAuth","authScreen","onStateChange","hideDefault","isGod","signInUserSession","idToken","payload","getCurrentToken","currSession","currentSession","accessToken","_SignInOrig","SignIn","newProps","changeState","signIn","_SignUpOrig","SignUp","hide","includes","checkCustomSignUpFields","sortFields","getDefaultDialCode","signUp","_ConfirmSignInOrig","ConfirmSignIn","_this3","confirm","_ConfirmSignUpOrig","ConfirmSignUp","_this4","resend","_RequireNewPasswordOr","RequireNewPassword","challengeParam","Array","isArray","split","part","charAt","toUpperCase","toLowerCase","join","_LoadingOrig","Loading","_ForgotPasswordOrig","ForgotPassword","_this5","send","submit","LoadFakeData","delay","mockData","setData","dataRef","dirName","dirPath","finalPath","host","debug","result","setTimeout","loaded","mockProps","finalData","finalRender","cloneElement","node","number","ContextObj","listContainer","vList","feedContainer","MyFeed","events","listRef","rowRenderer","content","index","isScrolling","isVisible","parent","row","_id","wEnd","thickness","almostAtEnd","ROWHEIGHT","scrollTop","fetchMore","rowCount","rowHeight","arrayOf","onImageClick","onProfileClick","onMapClick","fetchNewest","FeedEnder","CROP_MODES","cameraErrorText","disabledFab","cameraFab","maxHeight","slider","cameraIcon","cancelFab","cancelIcon","swipeDrawer","libraryFab","cropFab","myLocationFab","myLocationIcon","captured","reference","cropSnack","cropSnackPaper","cropSnackContent","portraitRef","landscapeRef","onShutter","defaultRefPhotoId","photos","setSlider","cropMode","setCropMode","imgRatio","setImgRatio","_useState7","_useState8","setPreviewSize","_useState9","_useState10","setCropSnack","snackTimer","refImgRef","rotClass","_useState11","_useState12","refPhotoId","setRefPhotoId","_useState13","_useState14","incrementCropMode","newCropMode","_useCamera","clearTimeout","recalcRefImg","refPhoto","find","cropModeUse","cm","newState","refImgRatio","newRefImgRatio","imgScale","realImgHeight","recalcRefState","defaultValue","imgRef","onLoad","sizePriority","autoPlay","playsInline","muted","Fab","buttonFab","cropIcon","libraryIcon","anchor","paperAnchorLeft","tabIndex","swipeDrawerContainer","multiSelect","columns","onTileClick","disableWindowBlurListener","qrIcon","backupText","manualImg","tipPaper","docContainer","cameraContainer","paddingTop","cameraContainerError","snackErr","snackSuccess","snackMsg","verticalAlign","onMenuBack","intervalRef","setErr","code","setCode","readBlob","scannedCode","foundIdx","newData","decodedUrl","t0","slice","JSON","parse","decodeURI","s","t1","menuButton","toolbarTitle","autoHideDuration","qrPaper","qrCode","series","photoId","qrCodeEl","setQRCodeEl","_createShareUrl","url","ogShare","canShare","access","toString","svgStr","note","dangerouslySetInnerHTML","__html","Link","href","s3Upload","APOLLOSTATES","useGraphQL","createPhoto","createSeries","deletePhoto","deleteSeries","unwatch","updatePhoto","updateSeries","watch","updateQueries","offline","redux","withReduxProvider","uploadToken","datastore","imgStore","getItem","urlCreator","sp","paths","base","messageWrapper","boxShadow","textWrapper","buttons","onInstall","paragraph","showInstall","dismissInstall","deferredPrompt","setPrompt","handleBeforePrompt","installPrompt","prompt","userChoice","choiceResult","outcome","standalone","compose","connect","uploader","activeUpload","uploading","uploadOnline","dispatch","updateUploadProgress","newProgress","setUploaderOnline","bOnline","Wrapped","useContext","useEffect","newS3Creds","useMemo","NewS3Credentials","onDone","progress","getNewS3Credentials","skip","ownProps","log","qItem","retry","preAuth","s3Credentials","variables","seriesId","withGetNewS3Credentials","withGetSelectedQuery","getWholeSeries","activeSeries","isNewSeries","initialPhoto","onAfterSeriesDelete","queueUpload","uploadObj","doneCreatingSeries","doneCreatingPhoto","onFindOnMap","withMutation","WrappedSeries","updateSeriesMutation","updatePhotoMutation","deleteSeriesMutation","deletePhotoMutation","createSeriesMutation","createPhotoMutation","watchSeriesMutation","unWatchSeriesMutation","inputMethod","NEW_PHOTO_MODES","CAMERA","FILEPICKER","modeName","SERIES_MODES","SERIES_VIEW","NEWSERIES","sort","b","takenOn","ReactGA","category","owned","createdUser","watching","currentUserId","currentUserRole","onNewPhoto","newPhoto","newPhotoData","setItem","onChangePhoto","photoDelta","onDeletePhoto","seriesDelta","onNewSeries","newSeries","onWatch","onUnWatch","withAllSeries","allSeries","seriesSummaries","nextToken","updateQuery","fetchMoreResult","setSeriesProps","readyForPolling","limit","withPollQuery","pollQuery","lastCheck","seriesProps","updateIncrement","changedSeries","oldList","newSeriesSummaries","seriesStatus","polledSeries","ds","oldSeries","oldId","AllSeriesConnect","PollQueryConnect","mapDispatchToProps","onSeriesNavigate","onSeriesMapSelect","setActiveSeries","onSearchClick","search","tab","popMapHistory","pushMapHistory","clearMapHistory","initViewport","pop","initialActiveSeries","useState","queryVersion","setVersion","useRef","queryVersionRef","setLastCheck","allSeriesQUERY","pollSeriesQUERY","String","POLL_INTERVAL","seriesList","TABS","withTagSearch","tagSearch","contextResults","count","ceil","searchText","withUserSearch","userSearch","createdOn","searchStr","withGeoCode","geocode","geocoder","relevance","placeName","bbox","center","withTagSeries","seriesWithTag","tagSeries","searchResults","contextChoice","withUserSeries","userSeries","createdBy","withKeywordSearch","keywordSearch","defaultTab","defaultText","currentTab","setCurrentTab","setSearchText","setContextChoice","pageview","withContextQuery","withSearchQuery","ComposedSearch","jumpToMap","onResultClick","jumpToSeriesView","newContextChoice","newTab","withuserSeriesQuery","seriesQ","withMyWatchedSeriesQuery","seriesFromList","watchedSeriesQ","mySeries","watchingSeries","arraySeries","jumpToSeries","jumpToSeriesMap","withFeedQuery","getMyFeed","loadingNewest","loadingMore","gqlActions","myFeed","start","feed","end","lastCheckRef","v","jumpToUser","withGeoSearch","geoSeriesIdOnly","seriesInGeoBounds","setSeriesIds","ids","WholeSeriesConnect","urls","updatedUser","ph","Set","GeoQuery","lastMapViewport","completedDownload","viewport","setOfflineCompleted","bVal","setOfflineViewport","OFFLINE_STATES","LOCKED","NAVIGATING","toolState","setToolState","limiterRef","setBounds","seriesIds","activeSeriesId","setActiveSeriesId","seriesPhotos","setSeriesPhotos","tileTick","setTileTick","seriesTick","setSeriesTick","seriesPhotoTick","setSeriesPhotoTick","tileTickRef","onTileTick","onSeriesPhotoTick","onSeriesTick","useCallback","num","theTick","theIds","thePhotos","addCount","schedule","makeRequest","finalState","OFFLINE","geoSeriesQuery","wholeSeriesQuery","CANCELED","dropWaitingJobs","Bottleneck","maxConcurrent","tiles","zoomRange","zoom","xtileLeft","long2tile","xtileRight","ytileTop","lat2tile","ytileBottom","getTileURL","process","getTiles","tile","newTotal","onStartDownload","DOWNLOADING","onCancelComplete","onUnlock","method","xhr","XMLHttpRequest","status","response","statusText","onerror","replace","withReportBugMutation","reportBug","mutate","reduxState","ERROR_SEND_STATES","ERROR","reportError","SENDING","reportJSON","extra","appVersion","languages","language","platform","errSubset","stack","errObj","env","stringify","update","store","SENT","other","newMap","UNSENT","ErrorScreen","sendState","outerRoot","offlineBar","activeWrapper","flexShrink","uploaderContainer","Upload","upload","showBottomBar","activeProps","ActiveComponent","profile","onQRCapture","oneOf","homeConfig","initialize","withUploadConnect","UploadControl","withSeriesConnect","PhotoSeries","withHomeMap","HomeMap","withSearchConnect","Search","withProfileConnect","MyProfile","withFeedConnect","withOfflineData","OfflineMap","AppConnect","ErrorConnect","reduxProps","flags","newDomain","newParams","bufferPts","buffer","point","units","bboxFunc","mode","resetAllState","setFlag","setUseOffline","homeStateBack","reduxActions","useAuthentication","useLoggedOut","apolloClient","client","apolloDone","done","apolloState","currState","useShowAddToHome","install","retryRef","handleBackClick","history","pushState","decodedObj","queryVars","forceSignInWrapped","resetApp","clear","resetStore","stateStore","staticContext","allowNonXY","appContext","cognitoUser","query","getUser","refetch","attributes","sub","Home","isLocalhost","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","onUpdate","onSuccess","require","setLevel","logger","ReactDOM","render","origin","fetch","contentType","headers","ready","unregister","reload","checkValidServiceWorker","mapInit","homeInit","initState","defaultFlags","iOSWarning","offlineInit","appReducer","MAP_HISTORY_CLEAR","newClearerHistory","MAP_HISTORY_POP","MAP_HISTORY_PUSH","HOME_STATE_BACK","newStateHistory","newCurrentState","HOME_CHANGE_ACTIVE_SERIES","HOME_CHANGE_STATE","params","skipSave","replaceState","newHistory","UPLOADER_QUEUE","UPLOADER_SET_ONLINE","UPLOADER_SET_UPLOADING","UPLOADER_COMPLETE","newStore","newActive","UPLOADER_UPDATE_PROGRESS","SETFLAG","flagName","flagVal","OFFLINE_VIEWPORT_SAVE","OFFLINE_SET_STATUS","getState","_getUploadState","getUploadState","newAction","kickoff","_unused2","persistConfig","storage","persistedReducer","preloadedState","queueMiddleware","persistor","BaseComponent","_storeConfig","storeConfig","chosenItem","dark","closeIcon","avatarImg","objectFit","TheIcon","ListItemAvatar","overflowX","overflowY","listSection","placeholderText","ul","cr","ctxItem","enderRef","handleScroll","offsetTop","_listRef$current","showCreatedOn","showLastPhoto","onScroll","light","PlaceholderIcon","tabs","ListWrapper","SearchInput","flexContainer","TAGS","swipeAble","slideContainer","titleBar","mobileStepper","slide","dotActive","iconButton","active","last","labelBadge","tagChip","manualBack","manualForward","transition","_useStepper","activeStep","lastStep","handleForward","paused","pause","showXYTags","setShowXYTags","refImgWrap","_useComponentSize$siz","GridListTile","transitions","create","duration","showTags","Badge","badgeContent","GridListTileBar","titlePosition","formatDate","subtitle","actionIcon","direction","MobileStepper","steps","nextButton","backButton","isFullScreen","slides","interval","setActiveStep","setPaused","setLastStep","createTimer","oldStep","destroyTimer","photoWrapper","dateCaption","tagButton","slideshowButton","dots","onImageSelect","activePhotoId","setActivePhotoId","setShowTags","singular","activePhotoIndex","activePhoto","axis","onChangeIndex","enableMouseEvents","imgContainer","filterContainer","filterChip","seriesListItemWrap","noneFound","SORT","sortVal","setSort","sortAsc","setSortAsc","sortSetter","newSort","tabFeed","latest","firstname","asc","useFilterStyles","arrow","userKeys","userFragment","photoKeys","photoFragment","seriesKeys","seriesFragment","feedSeriesSummaryKeys","feedSeriesSummaryFragment","seriesSummaryKeys","seriesSummaryFragment","userSummaryKeys","userSummaryFragment","photoSummaryKeys","photoSummaryFragment","_graphqlTag","_templateObject7","_taggedTemplateLiteral","_templateObject6","_templateObject5","_templateObject4","_templateObject3","_templateObject2","_templateObject","strings","raw","freeze","RawSVG","useSearchBarStyles","common","white","marginLeft","breakpoints","up","inputRoot","inputInput","pointerEvents","justifyContent","debounceSearchText","blur","onBlur","findOnMapButtonContainer","titleContainer","textShadow","seriesName","textOverflow","whiteSpace","EVENT_VERBS","FeedItem","updatedOn","randomObjectElement","randomArrayEl","filledArray","randomMap","randomChance","randomFloat","randomInt","_random","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","TypeError","_nonIterableSpread","chance","inTimes","low","high","fillval","completeActiveUpload","failRetry","formData","fields","fieldkey","append","onUploadProgress","progressEvent","total","floor","post","removeItem","t2","t3","interceptors","request","use","MUTATION","SERIES_KEYS","newSeriesKeys","PHOTO_KEYS","newPhotoKeys","createOptimisticResponse","createSeriesResponse","_ownProps$currentUser","gravatarProfile","meUserSummary","optimisticResponse","mutationStackId","__typename","pick","refetchQueries","updateThunk","cb","actionMaker","actionArr","useConsole","reduce","acc","acStr","_len","args","_key","_len2","_key2","fakeGlobalActions","admin","nonuser","series_public","series_open","timestampToHTML5Input","utctimestamp","_moment","format","HTML5InputToTimestamp","isoStr","convertJSDatetoTimestamp","parseDate","fixParseDate","_util","_loglevel","isNumeric","inTimestamp","isGMT","retVal","jsDate","getTime","tzOffset","getTimezoneOffset","fromNow","utc","formatNum","precision","precstr","_numeral","clearSelection","selection","empty","getSelection","removeAllRanges","isObjectWithKeys","makeDomArray","domnode","capitalizeFirstLetter","numericArrayCompare","arr1","some","decodeUnbufferedBase64","hash","missingPadding","newhash","Buffer","encodeUnbufferedBase64","str","urlizeb64","isObject","arrToObj","keyDat","_","$","attr","Number","getRandomArbitraryInt","random","wait","immediate","timeout","innerArgs","callNow","chunkArray","base64toJSON","json2base64","_zlib","isNaN","parseFloat","isFinite","o","gzip","b64String","buff","gunzip","chunkSize","INITIALIZING","AUTHENTICATING","LOADING","APPLY_MUTATIONS","DONE","setClient","setDone","setCurrState","authLink","httpLink","_context3","fragmentMatcher","introspectionQueryResultData","newHeaders","authorization","uri","attempts","Infinity","retryIf","_operation","link","tokenName","addTypename","connectToDevTools","createApolloClient","newClient","jwtToken","font","W","fallbacks","M","userSelect","touchAction","float","outline","boxSizing","speak","borderColor","backgroundImage","O","backgroundRepeat","fill","enableBackground","visibility","textDecoration","borderWidth","borderStyle","willChange","borderBottomColor","borderLeft","borderRight","borderTopColor","borderRightColor","borderLeftColor","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","fontFamily","fontDisplay","mapContainer","_fakedata","fakePastDate","randomLocation","storeName","createInstance","getPendingPromise","setPendingPromise","pushMutationPromise","mutation","popMutationPromise","pm","proxyUpdateForId","proxy","resp","updateHandler","__optimistic","restoreRequests","pendingMutation","placeAvatar","placeIcon","_onClick","dialogContent","iconContainer","stop1","stopColor","rose","stop2","redorange","buttonIcon","scrollText","PaperProps","focusable","viewBox","x2","y2","offset","nuclear","deleteOpen","setDeleteOpen","mapWrapper","onConfirm","confirmed","pulseCol","fab","animationIterationCount","animationTimingFunction","directionUp","actionsClosed","modalContainer","subFabContainer","subFab","subFabIcon","setOpen","down","setDown","downRef","elRef","realChildren","onDown","currentTarget","block","rootContainer","onMouseDown","onTouchStart","disableFocusRipple","disableTouchRipple","disableRipple","Modal","Zoom","in","unmountOnExit","anchorEl","menuItems","divider","Icon","primaryTypographyProps","onLibraryAdd","cameraPicker","_useFileInput","cameraWords","PlaceIcon","FormLabel","formLabel","cameraClick","libraryClick","menuEl","setMenuEl","setSeries","onDownThunk","onUpThunk","onBlock","menu","CameraPopup","onCamera","onLibrary","onMouseUp","onTouchEnd","bar","msgContainer","msgTextBright","msgTextDark","messageInner","finalProgress","LinearProgress","useWrapperStyles","displayName","rootEdit","textBody","actionButtons","_onChange","dlgOpen","setNote","stackEl","buttonText","DialogContentText","multiline","rows","rowsMax","_graphqlAPI$queries","_graphqlAPI$fragments","getWholeSeriesUpdate","qVal","readQuery","cloneDeep","writeQuery","getUserUpdate","userDelta","getWholeSeriesPhotoUpdate","remove","updateSeriesSummaries","origArr","newArr","seriesIndex","newAllSeriesEntry","updateFeedList","fItem","fitem","newSeriesSummary","newPhotoSummary","relation","allSeriesUpdate","existingSeries","allSeriesPhotoUpdate","newS","photoIndex","featured","photoCount","photoSummary","userSeriesUpdate","feedUpdate","watchUpdate","userId","newWatchers","newWatching","seriesFragId","seriesFrag","seriesWatchers","readFragment","fragment","userFragId","userFrag","userFragResult","watchers","wid","_seriesSummaryFragmentUpdate","seriesSummaryFragId","seriesSummaryFragResults","fragmentName","writeFragment","Actions","RESET_ALL_STATE","viewportSave","_defineProperty","configurable","writable","_default","Tags","instance","Constructor","_classCallCheck","tagLabel","getTagType","tt","xyTagLabels","getXYTagTypes","NonXYTagLabels","getNonXYTagTypes","findTagByLabel","getXYTags","group","getTagTypeIndex","_regeneratorRuntime","_exifParser","_common","_dates","asyncGeneratorStep","gen","_next","_throw","arg","fn","mark","_callee","imgData","exifDateTime","exifGPS","blobParser","parser","wrap","Blob","Response","arrayBuffer","DateTimeOriginal","GPSLatitude","GPSLongitude","self","_x","_v","Series","meta","getSeriesMeta","Photo","getPhotoMeta","shareUrl","encodedId","encodeURI","_defineProperties","descriptor","AccessHelper","userSub","permissionObj","attrs","ownAny","ownOrAny","perm","ac","can","otherPerm","granted","protoProps","staticProps","geoSeries","seriesSummaryFromList","initQuery","_fragments","_templateObject17","_templateObject16","_templateObject15","_templateObject14","_templateObject13","_templateObject12","_templateObject11","_templateObject10","_templateObject9","_templateObject8","unWatchSeries","watchSeries","updatePhotoKeys","updateSeriesKeys","updateSeriesResponse","updatePhotoResponse","createPhotoResponse","_lodash","updatedBy","seriesCreatedBy","large","orig","thumb","medium","photoResponse","photoResponseSummary","circularProgress","CircularProgress","IMG_STATES","imgBroken","dataUrl","_onLoad","imgUrls","setImgUrls","altIndex","setAltIndex","imgState","setImgState","imgPropRef","dataAsUrl","setBroken","isBroken","isLoading","finalURL","onError","brokenImg","setNewSize","_useComponentSize","_useXYTags","_imgRef$current","handleNewSize","imgStyle","rawImage","notDeleteable","unSelectedTile","selectedTile","snackbarContent","snackbar","allowDelete","selectMode","setSelectMode","selectedItems","setSelectedItems","setUrls","deleteConfirm","setDeleteConfirm","handleCancelSelection","toggleListItem","remaining","arrId","t4","t5","t6","t7","t8","t9","GridList","cols","cellHeight","handlePhotoTap","handleAddToSelection","ContentProps","confirmation","sliderLabel","rail","track","debouncedOnChange","Slider","canvasWrapper","referenceTextContainer","refText","photoBlob","onRetry","newRefPhoto","setRefPhoto","appBarEdit","tabMenu","tipChip","dot","activeButton","onUpdatePhoto","canUpdatePhoto","setActivePhoto","delta","setDelta","setMode","tagsClass","changeMode","desired","onCommitTags","infoButton","onDoubleClick","containerStyle","photoidx","canEdit","newDelta","KEYS","newPhotoInput","newUpdatePhoto","newT","typography","useNextVariants","overrides","MuiDialog","paperFullWidth","colors","cblue","homeTheme","accessObj","overscrollBehavior","globalStyle","CosmosBlackBackground","enableAll","outerTheme","iOS","innerTheme","contextValue","deviceOverride","fakeAppContext","_turf","_faker","_random2","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","EVENT_RELATIONS","date","past","latLngsAarr","transformTranslate","geometry","coordinates","FakeData","userPool","attribs","userSummary","basicAttribs","basicObj","fakeWidth","fakeHeight","photoPlaceholderArr","numPhotos","whichHighlight","hasPaths","objType","project","reach","nite","lorem","paragraphs","seriesSummary","basic","templateObj","base64","rawData","getImagePaths","strict","getPath","w","h","pool","shuffle","newItems","idt","sampleUser","freeBothTags","structureTags","treeTags","emotionTags","seasonTags","_x2","firstName","lastName","avatarSrc","_freeBothTagsValues","disableBackdropClick","disableEscapeKeyDown","IconComp","body","textArea","SeriesContext","tagListItem","_useContext2","activeDialog","setActiveDialog","tagInst","newTags","existing","metaKeys","dense","tagKey","idtk","subheading","mapWrap","AddFab","gridList","placeholderInner","progressWrapper","onSlideshowStart","onEditSeries","onDeletePhotos","onCameraAdd","onDeleteSeries","contextEl","setContextEl","showQR","setShowQR","listTypeTab","setListTypeTab","canUser","delete","contribute","accessRadio","mapFormLabel","mapInnerWrap","chips","nameError","staticMap","FormControlLabel","control","Switch","checked","newNote","dlgTitleContainer","catTagTitle","hideUser","activeDialogContext","submitted","setSubmitted","setSeriesDelta","setPhotoDelta","validName","photoTitle","PhotoInfoInner","newAttr","onSave","PHOTOREVIEW","PHOTOINFOEDIT","geoRef","setNewSeries","setNewPhoto","photoRefId","setPhotoRefId","_changeMode","geo","newModeName","_data$exifObj","_geoRef$current","beginnerObj","_newPhoto","sensors","captureObj","photoObj","refId","_data$exifObj2","_geoRef$current2","oldHistory","oldMode","onCreate","SERIES_EDIT","NEWPHOTO","REVIEW","PHOTO_VIEW","PHOTO_VIEW_NEW","SLIDESHOW","VIEW_ONLY_MODES","VALID_STARTMODES","PHOTO_REVIEW","inputMethodINIT","seriesContextState","setSeriesContextState","pid","newPid","newInputMethod","canUpdate","to","lastMode","photoIdArr","canUpdatePhotoArr","fab2","tileClick","_useNewImageMenu","seriesItem","rootSm","accessLabel","textSm","titleText","createdUserText","dateContainer","dateLabel","dateText","imgContainerSm","isSmall","useMediaQuery","onSelect","disablePadding","dirty","toolTip","SatelliteOutlined","ActiveIcon","Satellite","TerrainOutlined","Terrain","TopoMap","svgDot","svgAccuracyDot","projection","accHeight","pixelsPerMeter","accWidth","cx","cy","r","stroke","fillOpacity","strokeWidth","speedDialFab","speedDialAction","speedDialIcon","speedDialLabel","controlPadding","currStyle","mapStyles","setCurrStyle","noEventSetOpen","SpeedDial","ariaLabel","speedDial","SpeedDialAction","tooltipOpen","tooltipPlacement","tooltipTitle","myPosition","showMe","lockToBounds","lockPan","initStyle","incomingOnViewportChange","onViewportChange","incomingOnTransitionStart","onTransitionStart","incomingOnTransitionEnd","onTransitionEnd","onMapDataEvent","stylechooser","passthroughProps","mapContainerRef","mapBoxRef","innerTransitionsRef","defaultViewVals","setViewport","isTransitioning","setIsTransitioning","setProjection","geoMarker","captureDrag","_projection","_onViewportChange","viewportChange","newViewport","getMap","_bounds","minlng","minlat","maxlng","maxlat","_fitBounds","fitBounds","mapStyle","onData","dragPan","mapboxApiAccessToken","c","handleChild","hideNavControls","showZoom","touchZoom","scrollZoom","showCompass","touchRotate","dragRotate","transitionDuration","transitionInterpolator","transitionEasing","lockRotation","lockZoom","bearing","pitch","child","filterBounds","currentZoom","sizeScale","clusteredData","setClusteredData","single","cluster","filteredData","setFilteredData","updateDataDebounce","updatedData","_args","filterDataDebounce","filtered","_args2","filterData","filteredClusteredData","tree","screenCoords","properties","zoomLevels","geoJSON","load","_loop","z","radius","sqrt","pow","neighbors","minX","minY","maxX","maxY","neighbor","newGeoJSON","n","reducedPhotoCount","points","newZ","listItemText","compoundButton","seriesCount","onZoomTo","onViewList","rootActive","avatarActive","badge","badgeActive","directionIndicator","nameActive","svgArc","strokeOpacity","topBar","loadingWrapper","zoomOutFab","selectedPopup","defaultView","mapViewObj","setMapViewObj","mapViewRef","homeMapContainerRef","setCurrentZoom","showViewList","setShowViewList","setTransitions","selectedItem","setSelectedItem","updateSelectedItem","item","saveObj","transitionInterruption","maxZoom","minZoom","maxPitch","minPitch","saveMap","_onZoomTo","pts","paddedPoint","lngBuff","latBuff","buffBounds","onMarkerClick","markersRendered","offsetLeft","selectedItemRender","viewZoom","getBounds","_map$getBounds","_map$getBounds$_sw","_sw","minLng","lng","minLat","lat","_map$getBounds$_ne","_ne","maxLng","maxLat","oldMinLng","oldMinLat","oldMaxLng","oldMaxLat","onNativeClick","mapRef","recalcProjection","baseStaticMap","deckelements","zoomBounds","InnerBounds","editable","Map","mapProps","Dot","rectContents","black","areaLabel","rectContentsDownloading","rectIcon","tooBig","tickText","svgRect","svgCutout","svgBorder","svgBorderNavigating","svgBorderLocked","svgBorderTooBig","svgBorderDownloading","downloadingProgress","downloadingProgressCircle","snackError","mapWrapperRef","viewState","area","setArea","classWithState","setGeoState","rectSide","newArea","abs","metersPerPixel","dx","degreesPerPixel","dy","newBounds","snack","onSnackClose","snackTimeout","unlocked","doubleClickZoom","rectStyle","boxCorners","totalProgress","xmlns","sliderWrapper","sliderRoot","initLat","initLong","initDir","setCoords","setRotation","_ref2$viewport"],"mappings":"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","file":"static/js/main.955c0af6.chunk.js","sourcesContent":["import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \" M 16 8 L 16 8.938 L 14 8.938 L 14 10.938 L 16 10.938 L 16 12 L 16 14 L 16 14 L 16 15 L 14 15 L 14 17 L 16 17 L 16 17 L 16 18 L 12.969 18 L 12.969 14 L 15 14 L 15 12 L 12.969 12 L 12.969 7.969 L 12.969 7.969 L 12.969 7.969 C 12.969 7.417 12.521 6.969 11.969 6.969 C 11.417 6.969 10.969 7.417 10.969 7.969 L 10.969 12 L 9 12 L 9 14 L 10.969 14 L 10.969 18 L 8 18 L 8 17 L 10 17 L 10 15 L 8 15 L 8 15 L 8 14 L 8 14 L 8 12 L 8 10.938 L 8 10.938 L 10 10.938 L 10 8.938 L 8 8.938 L 8 8 C 8 7.448 7.552 7 7 7 C 6.448 7 6 7.448 6 8 L 6 8 L 6 8.938 L 5 8.938 L 5 10.938 L 6 10.938 L 6 12 L 4 12 L 4 8 C 4 7.448 3.552 7 3 7 C 2.448 7 2 7.448 2 8 L 2 10.4 L 2 12 L 2 14 L 2 16 L 2 17.6 C 2 18.925 3.075 20 4.4 20 L 19.6 20 C 20.925 20 22 18.925 22 17.6 L 22 16 L 22 14 L 22 12 L 22 10.4 L 22 10.4 L 22 8 C 22 7.448 21.552 7 21 7 C 20.448 7 20 7.448 20 8 L 20 12 L 18 12 L 18 10.938 L 18 10.938 L 19 10.938 L 19 8.938 L 18 8.938 L 18 8 C 18 7.448 17.552 7 17 7 C 16.448 7 16 7.448 16 8 Z  M 6 15 L 6 14 L 6 14 L 6 14 L 6 14 L 4 14 L 4 15.69 C 4 16.86 4.871 17.828 6 17.979 L 6 17 L 5 17 L 5 15 L 6 15 L 6 15 L 6 15 L 6 15 L 6 15 Z  M 18 15 L 18 14 L 18 14 L 18 14 L 20 14 L 20 15.69 C 20 16.86 19.129 17.828 18 17.979 L 18 17 L 19 17 L 19 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 Z \",\n  fillRule: \"evenodd\"\n})), 'BDA');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M16.432,6.104c-2.671,-1.06 -6.842,4.123 -6.572,5.826c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873Z\"\n}), React.createElement(\"path\", {\n  d: \"M9.159,5.228c-2.254,1.782 0.149,7.986 1.76,8.604c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066Z\"\n}), React.createElement(\"path\", {\n  d: \"M4.727,11.059c0.417,2.844 6.991,3.864 8.331,2.779c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94Z\"\n}), React.createElement(\"path\", {\n  d: \"M7.561,17.813c2.671,1.061 6.842,-4.122 6.572,-5.826c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873Z\"\n}), React.createElement(\"path\", {\n  d: \"M14.828,18.736c2.254,-1.783 -0.149,-7.987 -1.76,-8.605c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067Z\"\n}), React.createElement(\"path\", {\n  d: \"M19.26,12.904c-0.417,-2.843 -6.991,-3.864 -8.331,-2.778c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94Z\"\n})), 'AppLogoSimple');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M22,2l0,20l-20,0l0,-20l20,0Zm-2,2l-16,0l0,16l16,0l0,-16Z\"\n}), React.createElement(\"rect\", {\n  x: \"5\",\n  y: \"5\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"15\",\n  y: \"5\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"5\",\n  y: \"15\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"10\",\n  width: \"1\",\n  height: \"5\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"10\",\n  width: \"6\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"12\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"13\",\n  y: \"7\",\n  width: \"1\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"14\",\n  y: \"9\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"8\",\n  y: \"10\",\n  width: \"1\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"7\",\n  y: \"11\",\n  width: \"1\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"9\",\n  y: \"11\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"6\",\n  width: \"2\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"12\",\n  y: \"7\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"15\",\n  y: \"14\",\n  width: \"2\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"14\",\n  y: \"14\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"17\",\n  y: \"15\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"16\",\n  width: \"1\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"12\",\n  y: \"15\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"18\",\n  width: \"1\",\n  height: \"1\"\n})), 'QRCode');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M21.229,18.388c-0.346,0.799 -0.756,1.535 -1.23,2.211c-0.647,0.922 -1.176,1.56 -1.584,1.914c-0.632,0.582 -1.31,0.88 -2.036,0.897c-0.521,0 -1.149,-0.148 -1.88,-0.449c-0.734,-0.299 -1.408,-0.448 -2.025,-0.448c-0.646,0 -1.34,0.149 -2.081,0.448c-0.743,0.301 -1.342,0.457 -1.799,0.473c-0.696,0.03 -1.39,-0.277 -2.082,-0.921c-0.442,-0.385 -0.995,-1.046 -1.657,-1.982c-0.71,-0.999 -1.294,-2.158 -1.752,-3.48c-0.49,-1.427 -0.735,-2.809 -0.735,-4.147c0,-1.533 0.331,-2.855 0.994,-3.963c0.521,-0.89 1.215,-1.591 2.083,-2.107c0.868,-0.515 1.806,-0.778 2.816,-0.794c0.553,0 1.278,0.17 2.179,0.506c0.898,0.338 1.474,0.509 1.727,0.509c0.189,0 0.83,-0.2 1.916,-0.599c1.027,-0.369 1.894,-0.522 2.604,-0.462c1.924,0.155 3.37,0.914 4.331,2.28c-1.721,1.043 -2.572,2.503 -2.555,4.377c0.016,1.459 0.545,2.674 1.585,3.638c0.472,0.447 0.999,0.793 1.584,1.039c-0.127,0.368 -0.261,0.721 -0.403,1.06Zm-4.413,-17.366c0,1.144 -0.418,2.212 -1.251,3.2c-1.005,1.176 -2.221,1.855 -3.54,1.748c-0.017,-0.138 -0.026,-0.282 -0.026,-0.434c0,-1.098 0.478,-2.273 1.327,-3.234c0.423,-0.486 0.962,-0.891 1.616,-1.214c0.652,-0.318 1.269,-0.493 1.85,-0.523c0.016,0.152 0.024,0.305 0.024,0.457l0,0Z\"\n})), 'Apple');","export { default as BDA } from './BDA';\nexport { default as AppLogo } from './AppLogo';\nexport { default as AppLogoSimple } from './AppLogoSimple';\nexport { default as QRCode } from './QRCode';\nexport { default as Apple } from './Apple';","import { green, blue, red } from '@material-ui/core/colors';\nimport log from 'loglevel';\nvar baseurl = process.env.REACT_APP_BASEURL;\nvar basename = process.env.REACT_APP_BASENAME;\nvar domain = process.env.REACT_APP_DOMAIN;\n\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n  domain = 'localhost';\n  basename = '';\n}\n\nvar mandatoryEnv = {\n  REACT_APP_MAPBOX_TOKEN: process.env.REACT_APP_MAPBOX_TOKEN,\n  REACT_APP_VERSION: process.env.REACT_APP_VERSION,\n  REACT_APP_CONTACT_EMAIL: process.env.REACT_APP_CONTACT_EMAIL,\n  REACT_APP_GRAPHQL: process.env.REACT_APP_GRAPHQL,\n  REACT_APP_AWS_REGION: process.env.REACT_APP_AWS_REGION,\n  REACT_APP_COGNITO_USER_POOL_ID: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n  REACT_APP_COGNITO_CLIENT_ID: process.env.REACT_APP_COGNITO_CLIENT_ID\n};\nObject.keys(mandatoryEnv).forEach(function (keyname) {\n  if (!mandatoryEnv[keyname]) {\n    log.error(\"You must set environment variable: \".concat(keyname));\n  }\n});\nexport var mapConfig = {\n  mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN\n};\nexport var endpoints = {\n  graphql: \"\".concat(process.env.REACT_APP_GRAPHQL, \"/api\"),\n  share: \"\".concat(process.env.REACT_APP_GRAPHQL, \"/share\")\n};\nexport var tagColors = ['#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B', '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'];\nexport var version = process.env.REACT_APP_VERSION;\nexport var contact = process.env.REACT_APP_CONTACT_EMAIL;\nexport var ACCESS = {\n  OPEN: {\n    label: 'Open',\n    description: 'Anyone can see and contribute photos to this series.',\n    color: green[700]\n  },\n  PRIVATE: {\n    label: 'Private',\n    description: 'Can only be seen by you.',\n    color: red[500]\n  },\n  PUBLIC: {\n    label: 'Public',\n    description: 'Anyone can see this series. Only the owner can add photos.',\n    color: blue[500]\n  }\n};\nexport var home = {\n  Offline: {\n    seriesImgsToCache: ['thumb', 'large'],\n    highestOfflineTileZoom: 12,\n    maxMapTileArea: 25000\n  },\n  AppStateTypes: {\n    FEED: 'feed',\n    MAP: 'map',\n    SEARCH: 'search',\n    PROFILE: 'profile',\n    SERIES: 'series',\n    SETTINGS: 'settings',\n    QRCAPTURE: 'QRCapture',\n    NEW_SERIES_CAMERA: 'new_series_camera',\n    NEW_SERIES_LIBRARY: 'new_series_library',\n    OFFLINE_DOWNLOAD: 'offline_download'\n  },\n  SEARCH_TABS: {\n    KEYWORD: 'keyword',\n    TAG: 'tag',\n    LOCATION: 'location',\n    USER: 'user',\n    PROJECT: 'project'\n  },\n  MapModeTypes: {\n    FREE: 'free',\n    USER: 'user',\n    TAG: 'tag'\n  }\n};\nexport var federated = {};\nexport var analytics = {\n  token: process.env.REACT_APP_GA_TOKEN || 'UA-XXXXXXXX-XX'\n};\nexport var aws = {\n  Auth: {\n    region: process.env.REACT_APP_AWS_REGION,\n    userPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n    userPoolWebClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\n    mandatorySignIn: true,\n    cookieStorage: {\n      domain: \"\".concat(domain),\n      expires: 120,\n      secure: false\n    }\n  },\n  AWSPinpoint: {\n    appId: process.env.REACT_APP_AWS_PINPOINT,\n    region: 'us-east-1',\n    mandatorySignIn: false\n  }\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar ROTATION_MODES = {\n  1: {\n    rot: 0,\n    p: false\n  },\n  2: {\n    rot: 0,\n    p: false\n  },\n  3: {\n    rot: 180,\n    p: false\n  },\n  4: {\n    rot: 180,\n    p: false\n  },\n  5: {\n    rot: 90,\n    p: true\n  },\n  6: {\n    rot: 90,\n    p: true\n  },\n  7: {\n    rot: 270,\n    p: true\n  },\n  8: {\n    rot: 270,\n    p: true\n  }\n};\nexport var getRotation = function getRotation(exifObj, width, height) {\n  var rotObj = ROTATION_MODES[1];\n\n  try {\n    if (exifObj.exif.tags.Orientation) {\n      rotObj = ROTATION_MODES[exifObj.exif.tags.Orientation];\n    }\n  } catch (_unused) {}\n\n  var tr = [0, 0];\n  var sz = [width, height];\n\n  switch (rotObj.rot) {\n    case 90:\n      tr = [sz[1], 0];\n      sz = sz.reverse();\n      break;\n\n    case 180:\n      tr = [sz[0], sz[1]];\n      break;\n\n    case 270:\n      tr = [0, sz[0]];\n      sz = sz.reverse();\n      break;\n\n    default:\n      break;\n  }\n\n  var newExifObj = exifObj && exifObj.exif ? _objectSpread({}, exifObj, {\n    exif: {\n      tags: _objectSpread({}, exifObj.exif.tags, {\n        orientation: 1,\n        ExifImageWidth: sz[0],\n        ExifImageHeight: sz[1]\n      }),\n      imageSize: {\n        height: sz[1],\n        width: sz[0]\n      }\n    }\n  }) : null;\n  return {\n    translate: tr,\n    rotate: rotObj.rot * Math.PI / 180,\n    width: sz[0],\n    height: sz[1],\n    exifObj: newExifObj\n  };\n};\nexport var getAutoCrop = function getAutoCrop(width, height, ratio) {\n  var newWidth = width;\n  var newHeight = height;\n\n  if (ratio) {\n    if (width * ratio > height) {\n      newWidth = Math.round(height / ratio);\n    } else {\n      newHeight = Math.round(width * ratio);\n    }\n  }\n\n  return {\n    width: newWidth,\n    height: newHeight\n  };\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { getExifPromise } from '@morphoto/common';\nimport { getAutoCrop, getRotation } from './canvasLib';\nimport log from 'loglevel';\nexport var imgLoadPromise = function imgLoadPromise(blob, exifObj, newRatio) {\n  return new Promise(function (resolve) {\n    var img = new Image();\n    var urlCreator = window.URL || window.webkitURL;\n    var imageUrl = urlCreator.createObjectURL(blob);\n\n    img.onload = function () {\n      var imageHeight = img.naturalHeight;\n      var imageWidth = img.naturalWidth;\n      var newExifObj;\n\n      if (newRatio) {\n        var canvasEl = document.createElement('canvas');\n        var ctx = canvasEl.getContext('2d');\n\n        try {\n          var _getRotation = getRotation(exifObj, imageWidth, imageHeight),\n              translate = _getRotation.translate,\n              rotate = _getRotation.rotate,\n              width = _getRotation.width,\n              height = _getRotation.height,\n              rotatedExifObj = _getRotation.exifObj;\n\n          var cropSize = getAutoCrop(width, height, newRatio);\n          canvasEl.width = cropSize.width;\n          canvasEl.height = cropSize.height;\n          ctx.transform(1, 0, 0, 1, translate[0], translate[1]);\n          ctx.rotate(rotate);\n          ctx.drawImage(img, 0, 0);\n          rotatedExifObj.exif.tags.ExifImageWidth = cropSize.width;\n          rotatedExifObj.exif.tags.ExifImageHeight = cropSize.height;\n          rotatedExifObj.exif.imageSize = cropSize;\n          newExifObj = rotatedExifObj;\n          log.info('done drawing', rotate * 180 / Math.PI, translate);\n        } catch (e) {\n          log.error(e);\n        }\n\n        return canvasEl.toBlob(function (newBlob) {\n          if (!newBlob) {\n            resolve({\n              file: blob,\n              imageHeight: imageHeight,\n              imageWidth: imageWidth,\n              type: blob.type\n            });\n          } else {\n            resolve({\n              file: newBlob,\n              imageHeight: canvasEl.height,\n              imageWidth: canvasEl.width,\n              type: blob.type,\n              exifObj: newExifObj\n            });\n          }\n        }, blob.type, 100);\n      } else {\n        return resolve({\n          file: blob,\n          imageHeight: img.naturalHeight,\n          imageWidth: img.naturalWidth,\n          type: blob.type\n        });\n      }\n    };\n\n    img.src = imageUrl;\n  });\n};\nexport default (function _callee(blob, ratio) {\n  var type, name, size, exifObj, resultObj, ext;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          type = blob.type, name = blob.name, size = blob.size;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(getExifPromise(blob));\n\n        case 3:\n          exifObj = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(imgLoadPromise(blob, exifObj, ratio));\n\n        case 6:\n          resultObj = _context.sent;\n          ext = getExtFromFile(blob);\n          log.info('done imageParser', _objectSpread({\n            type: type,\n            ext: ext,\n            name: name || \"capture.\".concat(ext),\n            size: size,\n            exifObj: exifObj\n          }, resultObj));\n          return _context.abrupt(\"return\", _objectSpread({\n            type: type,\n            ext: ext,\n            name: name || \"capture.\".concat(ext),\n            size: size,\n            exifObj: exifObj\n          }, resultObj));\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n});\nexport var getExtFromFile = function getExtFromFile(fileBlob) {\n  switch (fileBlob.type) {\n    case 'image/jpeg':\n      return 'jpeg';\n\n    case 'image/jpg':\n      return 'jpeg';\n\n    case 'image/png':\n      return 'png';\n\n    default:\n      return 'jpg';\n  }\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport log from 'loglevel';\n\nvar Webcam =\n/*#__PURE__*/\nfunction () {\n  function Webcam(webcamElement, canvasElement) {\n    _classCallCheck(this, Webcam);\n\n    this.webcamElement = webcamElement;\n    this.canvasElement = canvasElement;\n\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      log.warn('getUserMedia() must be run from a secure origin: https or localhost.\\nChanging protocol to https.');\n    }\n\n    if (!navigator.mediaDevices && !navigator.getUserMedia) {\n      log.warn(\"Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia.\");\n    }\n  }\n\n  _createClass(Webcam, [{\n    key: \"destroy\",\n    value: function destroy() {\n      return _regeneratorRuntime.async(function destroy$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              try {\n                if (this.webcamElement.srcObject && this.webcamElement.srcObject.getVideoTracks) {\n                  this.webcamElement.srcObject.getVideoTracks()[0].stop();\n                  log.info('Releasing Camera');\n                }\n\n                this.webcamElement = null;\n                this.canvasElement = null;\n              } catch (e) {\n                log.error(e);\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(previewSize) {\n      var _this = this;\n\n      var newPreviewSize;\n      return _regeneratorRuntime.async(function setup$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              newPreviewSize = previewSize || [window.innerWidth, window.innerHeight];\n\n              if (!(this.webcamElement && this.webcamElement.srcObject && this.previewSize && this.previewSize[0] === newPreviewSize[0] && this.previewSize[1] === newPreviewSize[1])) {\n                _context2.next = 3;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              this.capabilities = {\n                redEyeReduction: 'never',\n                imageWidth: {\n                  max: newPreviewSize[0],\n                  min: 480,\n                  step: 0\n                },\n                imageHeight: {\n                  max: newPreviewSize[1],\n                  min: 480,\n                  step: 0\n                },\n                fillLightMode: []\n              };\n              this.previewRatio = newPreviewSize[1] / newPreviewSize[0];\n              this.previewSize = newPreviewSize;\n              return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                if (navigator.mediaDevices.getUserMedia !== undefined) {\n                  if (_this.webcamElement.srcObject) {\n                    _this.webcamElement.srcObject.getVideoTracks()[0].stop();\n\n                    _this.webcamElement.srcObject = null;\n                  }\n\n                  navigator.mediaDevices.getUserMedia({\n                    audio: false,\n                    video: {\n                      facingMode: 'environment',\n                      width: {\n                        ideal: Math.max(_this.previewSize[1], _this.previewSize[0])\n                      },\n                      height: {\n                        ideal: Math.min(_this.previewSize[1], _this.previewSize[0])\n                      }\n                    }\n                  }).then(function (mediaStream) {\n                    if (_this.webcamElement && 'srcObject' in _this.webcamElement) {\n                      _this.webcamElement.srcObject = mediaStream;\n                    } else {\n                      _this.webcamElement.src = window.URL.createObjectURL(mediaStream);\n                    }\n\n                    _this.webcamElement.onloadedmetadata = function (e) {\n                      if (_this.webcamElement) _this.webcamElement.play();\n                    };\n\n                    _this.webcamElement.onplaying = function (e) {\n                      try {\n                        var mediaStreamTrack = _this.webcamElement.srcObject.getVideoTracks()[0];\n\n                        var imageCapture = new ImageCapture(mediaStreamTrack);\n                        imageCapture.getPhotoCapabilities().then(function (capabilities) {\n                          _this.capabilities = capabilities;\n                          resolve();\n                        });\n                      } catch (_unused) {\n                        log.error('COULD NOT GET CAPABILITIES');\n                        resolve();\n                      }\n                    };\n                  }).catch(function (err) {\n                    return reject(err);\n                  });\n                } else {\n                  reject(new Error('Error accessing camera'));\n                }\n              }));\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"_drawImage\",\n    value: function _drawImage() {\n      var imageWidth = this.webcamElement.videoWidth;\n      var imageHeight = this.webcamElement.videoHeight;\n      var context = this.canvasElement.getContext('2d');\n      this.canvasElement.width = imageWidth;\n      this.canvasElement.height = imageHeight;\n      context.drawImage(this.webcamElement, 0, 0, imageWidth, imageHeight);\n      return {\n        imageHeight: imageHeight,\n        imageWidth: imageWidth\n      };\n    }\n  }, {\n    key: \"takeImageData\",\n    value: function takeImageData() {\n      var _this$_drawImage = this._drawImage(),\n          imageHeight = _this$_drawImage.imageHeight,\n          imageWidth = _this$_drawImage.imageWidth;\n\n      var data = {\n        data: null,\n        imageHeight: imageHeight,\n        imageWidth: imageWidth\n      };\n\n      try {\n        data.data = this.canvasElement.getContext('2d').getImageData(0, 0, imageWidth, imageHeight).data;\n      } catch (e) {}\n\n      return data;\n    }\n  }, {\n    key: \"imageCapture\",\n    value: function imageCapture(ratio) {\n      var mediaStreamTrack = this.webcamElement.srcObject.getVideoTracks()[0];\n      var imageCapture = new ImageCapture(mediaStreamTrack);\n      var imageWidth = this.capabilities.imageWidth.max;\n      var imageHeight = this.capabilities.imageHeight.max;\n      log.info('Taking picture', imageWidth, imageHeight);\n      return imageCapture.takePhoto({\n        imageWidth: imageWidth,\n        imageHeight: imageHeight\n      }).catch(function (error) {\n        return log.error('takePhoto() error:', error);\n      });\n    }\n  }, {\n    key: \"dumpCanvasToBlob\",\n    value: function dumpCanvasToBlob() {\n      var _this2 = this;\n\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        type: 'image/jpeg',\n        quality: 1\n      },\n          type = _ref.type,\n          quality = _ref.quality;\n\n      return new Promise(function (resolve) {\n        _this2.canvasElement.toBlob(resolve, type, quality);\n      });\n    }\n  }]);\n\n  return Webcam;\n}();\n\nexport default Webcam;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nimport imageParser from './imageParser';\nimport Webcam from './Webcam';\nimport log from 'loglevel';\n\nvar useCamera = function useCamera(onCapture, previewSize) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      cameraError = _useState2[0],\n      setCameraError = _useState2[1];\n\n  var _useState3 = useState(previewSize),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sensorSize = _useState4[0],\n      setSensorSize = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      cameraOnline = _useState6[0],\n      setCameraOnline = _useState6[1];\n\n  var camRef = useRef();\n  useEffect(function () {\n    if (!camRef.current) {\n      camRef.current = new Webcam(document.getElementById('webcam'), document.createElement('canvas'));\n    }\n\n    camRef.current.setup(previewSize).then(function (data) {\n      var newSensorSize = [camRef.current.capabilities.imageWidth.max, camRef.current.capabilities.imageHeight.max];\n\n      if (!sensorSize || sensorSize[0] !== newSensorSize[0] || sensorSize[1] !== newSensorSize[1]) {\n        setSensorSize([camRef.current.capabilities.imageWidth.max, camRef.current.capabilities.imageHeight.max]);\n      }\n\n      if (!cameraOnline) setCameraOnline(true);\n    }).catch(function (e) {\n      if (cameraOnline) setCameraOnline(false);\n      setCameraError(true);\n    });\n  }, [previewSize]);\n  useEffect(function () {\n    return function () {\n      if (camRef.current) {\n        camRef.current.destroy();\n        camRef.current = null;\n      }\n    };\n  }, []);\n\n  var captureImage = function captureImage(ratio) {\n    if (camRef.current && cameraOnline) {\n      try {\n        camRef.current.imageCapture(ratio).then(function (blob) {\n          return imageParser(blob, ratio);\n        }).then(onCapture).catch(log.error);\n      } catch (err) {\n        log.error(err);\n        log.info('Your hardware is lame and doesn\\'t support ImageCapture');\n        camRef.current.dumpCanvasToBlob({\n          type: 'image/jpeg',\n          quality: 1\n        }).then(function (blob) {\n          return imageParser(blob, ratio);\n        }).then(onCapture).catch(log.error);\n      }\n    }\n  };\n\n  var captureRawData = function captureRawData() {\n    if (camRef.current && cameraOnline) {\n      var capturedData = camRef.current.takeImageData();\n      onCapture(capturedData);\n    }\n  };\n\n  return {\n    cameraError: cameraError,\n    captureImage: captureImage,\n    cameraOnline: cameraOnline,\n    captureRawData: captureRawData,\n    sensorSize: sensorSize\n  };\n};\n\nexport default useCamera;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useState, useLayoutEffect, useRef } from 'react';\nimport { util } from '@morphoto/common';\n\nvar getSize = function getSize(el, minSize, defaultSize) {\n  if (!el) return defaultSize || minSize || {\n    width: 0,\n    height: 0,\n    naturalWidth: 0,\n    naturalHeight: 0\n  };\n\n  if (minSize) {\n    return {\n      width: Math.max(minSize.width, el.offsetWidth),\n      height: Math.max(minSize.height, el.offsetHeight),\n      naturalWidth: el.naturalWidth,\n      naturalHeight: el.naturalHeight\n    };\n  } else {\n    return {\n      width: el.offsetWidth,\n      height: el.offsetHeight,\n      naturalWidth: el.naturalWidth,\n      naturalHeight: el.naturalHeight\n    };\n  }\n};\n\nvar useComponentSize = function useComponentSize(ref, minSize, defaultSize) {\n  var resizeActiveRef = useRef();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      resizeActive = _useState2[0],\n      setResizeActive = _useState2[1];\n\n  resizeActiveRef.current = resizeActive;\n\n  var _useState3 = useState(getSize(ref ? ref.current : null, minSize, defaultSize)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      size = _useState4[0],\n      setComponentSize = _useState4[1];\n\n  var handleResize = function handleResize(e) {\n    if (!resizeActiveRef.current || !ref.current) return;\n    var newSize = getSize(ref.current, minSize, defaultSize);\n\n    if (newSize.height !== size.height || newSize.width !== size.width) {\n      setComponentSize(newSize);\n    }\n  };\n\n  var handleResizeDebounced = useCallback(util.debounce(handleResize, 500), []);\n  useLayoutEffect(function () {\n    if (!ref || !ref.current) return;\n    handleResize();\n\n    if (typeof ResizeObserver === 'function') {\n      var resizeObserver = new ResizeObserver(handleResizeDebounced);\n      resizeObserver.observe(ref.current);\n      return function () {\n        resizeObserver.disconnect(ref.current);\n        resizeObserver = null;\n      };\n    } else {\n      window.addEventListener('resize', handleResizeDebounced);\n      return function () {\n        window.removeEventListener('resize', handleResizeDebounced);\n      };\n    }\n  }, [ref]);\n  return {\n    size: size,\n    setResizeActive: setResizeActive\n  };\n};\n\nexport default useComponentSize;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect, useRef } from 'react';\nimport imageParser from './imageParser';\n\nvar useFileInput = function useFileInput() {\n  var onChange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n  var preferCamera = arguments.length > 1 ? arguments[1] : undefined;\n  var initialClick = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var anyFile = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var inputRef = useRef();\n  var clickRef = useRef();\n  var element = React.createElement(\"input\", {\n    style: {\n      display: 'none'\n    },\n    ref: inputRef,\n    type: \"file\",\n    accept: !anyFile ? 'image/*' : null,\n    capture: preferCamera\n  });\n\n  var forceClick = function forceClick() {\n    if (inputRef.current) inputRef.current.click();\n  };\n\n  useEffect(function () {\n    var handleChange = function handleChange(evt) {\n      if (evt.target.files) {\n        var _ref = _toConsumableArray(evt.target.files),\n            file = _ref[0];\n\n        if (file) {\n          imageParser(file).then(onChange);\n        }\n\n        inputRef.current.value = null;\n      }\n    };\n\n    if (inputRef.current) {\n      inputRef.current.addEventListener('change', handleChange);\n\n      if (!clickRef.current) {\n        if (initialClick) inputRef.current.click();\n        clickRef.current = true;\n      }\n    }\n\n    return function () {\n      if (inputRef.current) {\n        inputRef.current.removeEventListener('change', handleChange);\n      }\n    };\n  }, [inputRef.current]);\n  return {\n    fileClickEl: element,\n    forceClick: forceClick,\n    inputRef: inputRef\n  };\n};\n\nexport default useFileInput;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState, useMemo } from 'react';\nimport log from 'loglevel';\n\nvar useOnline = function useOnline() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var onChange = function onChange(e) {\n    if (window.navigator.onLine) {\n      log.info('ONLINE');\n      if (state !== null) setState(null);\n    } else {\n      log.info('OFFLINE');\n      var newDate = Date.now();\n      if (state !== newDate) setState(newDate);\n    }\n  };\n\n  useEffect(function () {\n    onChange();\n    window.addEventListener('online', onChange);\n    window.addEventListener('offline', onChange);\n    return function () {\n      window.removeEventListener('online', onChange);\n      window.removeEventListener('offline', onChange);\n    };\n  }, []);\n  var retVal = useMemo(function () {\n    return {\n      isOnline: state === null,\n      offlineSince: state\n    };\n  }, [state]);\n  return retVal;\n};\n\nexport default useOnline;","import _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport log from 'loglevel';\n\nvar ErrorBoundary =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary(props) {\n    var _this;\n\n    _classCallCheck(this, ErrorBoundary);\n\n    log.info('ErrorBoundary constructor');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ErrorBoundary).call(this, props));\n    _this.state = {\n      hasError: false\n    };\n    return _this;\n  }\n\n  _createClass(ErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, info) {\n      log.error('ErrorBoundary componentDidCatch', error);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          hasError = _this$state.hasError,\n          error = _this$state.error;\n      var FallbackUI = this.props.fallback;\n\n      if (hasError) {\n        log.error('ErrorBoundary hasError');\n        return React.createElement(FallbackUI, {\n          error: error\n        });\n      }\n\n      return this.props.children;\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      log.error('ErrorBoundary getDerivedStateFromError', error);\n      return {\n        hasError: true,\n        error: error\n      };\n    }\n  }]);\n\n  return ErrorBoundary;\n}(React.Component);\n\nErrorBoundary.propTypes = {\n  children: PropTypes.any,\n  fallback: PropTypes.any\n};\nexport default ErrorBoundary;","import { useEffect, useState } from 'react';\nexport var isIos = function isIos() {\n  return Boolean(/iphone|ipad|ipod/i.test(window.navigator.userAgent || navigator.vendor || window.opera || ''));\n};\nexport var isPhone = function isPhone() {\n  var a = window.navigator.userAgent || navigator.vendor || window.opera || '';\n  return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4));\n};\nexport var device = {\n  ios: Boolean(isIos()),\n  phone: Boolean(isPhone()),\n  cameraAccess: navigator.mediaDevices ? Boolean(navigator.mediaDevices.getUserMedia) : false\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { device } from './useOSDetect';\nimport useOnline from './useOnline';\nexport var AppContext = React.createContext({});\nexport var AppContextProvider = function AppContextProvider(_ref) {\n  var children = _ref.children,\n      value = _ref.value;\n  var online = useOnline();\n\n  var finalValue = _objectSpread({\n    online: online\n  }, value, {\n    device: _objectSpread({}, device, {}, value.device)\n  });\n\n  return React.createElement(AppContext.Provider, {\n    value: finalValue\n  }, children);\n};\nAppContextProvider.propTypes = {\n  children: PropTypes.any,\n  value: PropTypes.shape({\n    user: PropTypes.object,\n    signedIn: PropTypes.bool.isRequired,\n    getPhotoUrls: PropTypes.func.isRequired,\n    device: PropTypes.object,\n    metaConfig: PropTypes.object,\n    tagConfig: PropTypes.array.isRequired,\n    onAvatarClick: PropTypes.func,\n    globalActions: PropTypes.object.isrequired\n  })\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nexport var useGeolocation = function useGeolocation() {\n  var _useState = useState({\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: Date.now()\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var mountedRef = useRef();\n  var watchIdRef = useRef();\n  mountedRef.current = true;\n\n  var onEvent = function onEvent(event) {\n    if (mountedRef.current) {\n      setState({\n        accuracy: event.coords.accuracy,\n        altitude: event.coords.altitude,\n        altitudeAccuracy: event.coords.altitudeAccuracy,\n        heading: event.coords.heading,\n        latitude: event.coords.latitude,\n        longitude: event.coords.longitude,\n        speed: event.coords.speed,\n        timestamp: event.timestamp\n      });\n    }\n  };\n\n  useEffect(function () {\n    navigator.geolocation.getCurrentPosition(onEvent);\n    watchIdRef.current = navigator.geolocation.watchPosition(onEvent);\n    return function () {\n      mountedRef.current = false;\n      navigator.geolocation.clearWatch(watchIdRef.current);\n    };\n  }, [navigator.geolocation]);\n  return state;\n};\nexport function useDeviceOrientation() {\n  var _useState3 = useState({\n    absolute: false,\n    alpha: null,\n    beta: null,\n    gamma: null\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      deviceOrientation = _useState4[0],\n      setDeviceOrientation = _useState4[1];\n\n  var isMounted = useRef(false);\n\n  function handleDeviceOrientation(event) {\n    if (isMounted.current) {\n      setDeviceOrientation({\n        absolute: event.absolute,\n        alpha: event.alpha,\n        beta: event.beta,\n        gamma: event.gamma\n      });\n    }\n  }\n\n  useEffect(function () {\n    isMounted.current = true;\n    window.addEventListener('deviceorientation', handleDeviceOrientation);\n    return function () {\n      isMounted.current = false;\n      window.removeEventListener('deviceorientation', handleDeviceOrientation);\n    };\n  }, []);\n  return deviceOrientation;\n}","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as configImp from './config';\nexport var config = _objectSpread({}, configImp);\nexport { default as useCamera } from './useCamera';\nexport { default as useComponentSize } from './useComponentSize';\nexport { default as useFileInput } from './useFileInput';\nexport { default as useOnline } from './useOnline';\nexport { default as useResponsive } from './useResponsive';\nexport { default as ErrorBoundary } from './ErrorBoundary';\nexport { playAudio } from './audio';\nexport { default as imageParser } from './imageParser';\nexport { getRotation, getAutoCrop } from './canvasLib';\nexport { AppContext, AppContextProvider } from './appContext';\nexport { useGeolocation, useDeviceOrientation } from './useSensors';\nexport { device, isIos, isPhone } from './useOSDetect';","import React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { QRCode as QRCodeIcon, AppLogoSimple } from '@morphoto/icons';\nimport { AppContext } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    appBar: {\n      background: 'transparent'\n    },\n    toolbar: {\n      display: 'flex',\n      alignItems: 'center',\n      width: '100%',\n      padding: theme.spacing(0, 1),\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      borderBottom: \"2px solid \".concat(theme.palette.primary.main),\n      background: \"linear-gradient(90deg, \".concat(theme.palette.primary.main, \" 0%, \").concat(theme.palette.secondary.main, \" 100%)\")\n    },\n    searchIcon: {\n      opacity: 0.3,\n      marginRight: theme.spacing(1)\n    },\n    transparent: {\n      backgroundColor: 'transparent',\n      background: 'none',\n      color: theme.palette.text.primary,\n      borderBottom: \"2px solid transparent\"\n    },\n    noCamIcon: {\n      color: 'rgba(0, 0, 0, 0.26)'\n    },\n    logo: {\n      padding: theme.spacing(0, 0),\n      height: 40,\n      width: 40\n    },\n    transparentLogo: {\n      background: \"linear-gradient(90deg, \".concat(theme.palette.primary.main, \" 0%, \").concat(theme.palette.secondary.main, \" 100%)\"),\n      padding: theme.spacing(0.5, 0.5)\n    },\n    transparentLogoIcon: {\n      color: 'white',\n      height: 35,\n      width: 35\n    },\n    children: {\n      flexGrow: 1,\n      padding: theme.spacing(0, 1)\n    },\n    qrButton: {\n      padding: theme.spacing(0, 0)\n    },\n    qrButtonTransparent: {\n      background: 'white',\n      padding: theme.spacing(0.5, 0.5)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TopBar = function TopBar(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      isTransparent = _ref.isTransparent,\n      hideLogo = _ref.hideLogo,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device;\n\n  return React.createElement(AppBar, {\n    elevation: 0,\n    position: isTransparent ? 'absolute' : 'static',\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    className: classNames(classes.toolbar, className, isTransparent ? classes.transparent : null),\n    disableGutters: true\n  }, !hideLogo && React.createElement(IconButton, {\n    className: isTransparent ? classes.transparentLogo : classes.logo,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return actions.setDrawerOpen(true);\n    }\n  }, React.createElement(AppLogoSimple, {\n    className: isTransparent ? classes.transparentLogoIcon : classes.logo\n  })), React.createElement(\"div\", {\n    className: classes.children\n  }, children), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(!device.cameraAccess ? classes.noCamIcon : null, isTransparent ? classes.qrButtonTransparent : classes.qrButton),\n    \"aria-label\": \"Menu\",\n    onClick: actions.onQRClickWrapped\n  }, React.createElement(QRCodeIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nTopBar.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any,\n  isTransparent: PropTypes.bool,\n  hideLogo: PropTypes.bool,\n  actions: PropTypes.shape({\n    onQRClickWrapped: PropTypes.func,\n    setDrawerOpen: PropTypes.func.isRequred\n  })\n};\nexport default TopBar;","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport InfoIcon from '@material-ui/icons/Info';\nimport MobileScreenShare from '@material-ui/icons/MobileScreenShare';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { QRCode as QRCodeIcon } from '@morphoto/icons';\nimport { AppContext } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    drawerInner: {\n      width: 250,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    disableListItem: {\n      color: 'rgba(0, 0, 0, 0.26)'\n    },\n    avatar: {\n      height: theme.spacing(7),\n      width: theme.spacing(7),\n      border: \"3px solid \".concat(theme.palette.primary.main),\n      margin: theme.spacing(0, 1)\n    },\n    gravatarImg: {\n      width: '100%'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    fullList: {\n      width: 'auto'\n    }\n  };\n});\n\nvar SideDrawer = function SideDrawer(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      onOpen = _ref.onOpen,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      currentUser = _useContext.currentUser,\n      signedIn = _useContext.signedIn,\n      globalActions = _useContext.globalActions;\n\n  return React.createElement(SwipeableDrawer, {\n    open: open,\n    onClose: onClose,\n    onOpen: onOpen\n  }, React.createElement(\"div\", {\n    className: classes.drawerInner,\n    role: \"presentation\",\n    onClick: onClose,\n    onKeyDown: onClose\n  }, currentUser && currentUser.username && React.createElement(List, null, React.createElement(ListItem, {\n    className: classes.root,\n    onClick: function onClick() {},\n    disableGutters: true\n  }, React.createElement(Avatar, {\n    className: classes.avatar\n  }, signedIn && currentUser ? React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: currentUser.gravatar\n  }) : React.createElement(AccountCircleIcon, {\n    color: \"inherit\",\n    className: classes.loginButton\n  }))), React.createElement(ListItem, {\n    className: classes.root,\n    onClick: function onClick() {}\n  }, React.createElement(ListItemText, {\n    primary: currentUser.username\n  }))), React.createElement(Divider, null), React.createElement(List, null, React.createElement(ListItem, {\n    className: device.cameraAccess ? classes.disableListItem : null,\n    button: true,\n    onClick: !device.cameraAccess ? device.ios ? actions.onDisabledClick : function () {} : globalActions.onQRButtonClick\n  }, React.createElement(ListItemIcon, null, React.createElement(QRCodeIcon, null)), React.createElement(ListItemText, {\n    primary: 'Scan QR Code'\n  })), globalActions.addToHomeScreen && React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.addToHomeScreen\n  }, React.createElement(ListItemIcon, null, React.createElement(MobileScreenShare, null)), React.createElement(ListItemText, {\n    primary: 'Install this app',\n    secondary: 'It works better!'\n  })), React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.onOfflineMenuClick\n  }, React.createElement(ListItemIcon, null, React.createElement(CloudDownload, null)), React.createElement(ListItemText, {\n    primary: 'Offline Download'\n  }))), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Divider, null), React.createElement(List, null, React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.onSettingsClick\n  }, React.createElement(ListItemIcon, null, React.createElement(SettingsIcon, null)), React.createElement(ListItemText, {\n    primary: 'App Settings'\n  })), React.createElement(ListItem, {\n    button: true,\n    onClick: actions.onAboutClick\n  }, React.createElement(ListItemIcon, null, React.createElement(InfoIcon, null)), React.createElement(ListItemText, {\n    primary: 'About'\n  })), signedIn ? React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.signOut\n  }, React.createElement(ListItemIcon, null, React.createElement(ExitToAppIcon, null)), React.createElement(ListItemText, {\n    primary: 'Sign Out'\n  })) : React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.forceSignIn\n  }, React.createElement(ListItemIcon, null, React.createElement(AccountCircleIcon, null)), React.createElement(ListItemText, {\n    primary: 'Sign In'\n  })))));\n};\n\nSideDrawer.propTypes = {\n  open: PropTypes.bool,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  actions: PropTypes.shape({\n    onDisabledClick: PropTypes.func,\n    onAboutClick: PropTypes.func\n  })\n};\nexport default SideDrawer;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { FeatureDisabled } from '@morphoto/modals';\nimport { AboutApp } from '@morphoto/ui';\nimport SideDrawer from './SideDrawer';\nimport TopBar from './TopBar';\nimport { AppContext, config } from '@morphoto/client-common';\nimport { Typography } from '@material-ui/core';\nvar DIALOGS = {\n  APPLE_WARNING: 'APPLE_WARNING',\n  ABOUTAPP: 'ABOUTAPP'\n};\n\nvar TopBarWrapper = function TopBarWrapper(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      topBarProps = _objectWithoutProperties(_ref, [\"className\", \"children\"]);\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      globalActions = _useContext.globalActions;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dialogOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawerOpen = _useState4[0],\n      setDrawerOpen = _useState4[1];\n\n  var handleQRClick = device.ios ? function () {\n    return setDialogOpen(DIALOGS.APPLE_WARNING);\n  } : globalActions.onQRButtonClick;\n  return React.createElement(React.Fragment, null, React.createElement(TopBar, _extends({}, topBarProps, {\n    children: children,\n    actions: {\n      onQRClickWrapped: handleQRClick,\n      setDrawerOpen: setDrawerOpen\n    }\n  })), React.createElement(SideDrawer, {\n    open: drawerOpen,\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    },\n    actions: {\n      onDisabledClick: function onDisabledClick() {\n        return setDialogOpen(DIALOGS.APPLE_WARNING);\n      },\n      onAboutClick: function onAboutClick() {\n        return setDialogOpen(DIALOGS.ABOUTAPP);\n      }\n    }\n  }), device.ios && React.createElement(FeatureDisabled, {\n    open: dialogOpen === DIALOGS.APPLE_WARNING,\n    title: \"iOS Feature Disabled\",\n    message: React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, React.createElement(\"p\", null, \"This feature cannot function due to a bug in iOS 12 that prevents \", React.createElement(\"strong\", null, \"direct camera access from progressive web apps\"), \".\"), React.createElement(\"p\", null, \"There is good evidence iOS 13 has things sorted. ETA from Apple is mid-September 2019.\")),\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    }\n  }), React.createElement(AboutApp, {\n    open: dialogOpen === DIALOGS.ABOUTAPP,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    },\n    version: config.version\n  }));\n};\n\nTopBarWrapper.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any\n};\nexport default TopBarWrapper;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef, useEffect, useState, useContext } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nvar CHECKINTERVAL = 5000;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      background: 'black',\n      color: 'white',\n      textAlign: 'center'\n    }\n  };\n});\n\nvar OfflineBar = function OfflineBar() {\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      sinceStr = _useState2[0],\n      setSinceStr = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online,\n      signedIn = _useContext.signedIn;\n\n  var timerRef = useRef();\n\n  var calcSinceStr = function calcSinceStr() {\n    var newText = dates.formatDateAgo(online.offlineSince);\n    setSinceStr(newText);\n  };\n\n  var clearTimer = function clearTimer() {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n\n  useEffect(function () {\n    if (online.offlineSince && !timerRef.current) {\n      calcSinceStr();\n      timerRef.current = setInterval(calcSinceStr, CHECKINTERVAL);\n    } else if (!online.offlineSince) clearTimer();\n\n    return function () {\n      clearTimer();\n    };\n  }, [online.offlineSince]);\n  var loggedText = !signedIn ? 'You are not signed in.' : '';\n  var offlineText = !online.isOnline ? \"Offline (\".concat(sinceStr, \")\") : '';\n  if (online.isOnline && signedIn) return null;\n  return React.createElement(Typography, {\n    className: classes.root,\n    variant: \"caption\",\n    component: \"div\"\n  }, loggedText, \" \", offlineText);\n};\n\nexport default OfflineBar;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport HomeIcon from '@material-ui/icons/HomeOutlined';\nimport MapIcon from '@material-ui/icons/MapOutlined';\nimport SearchIcon from '@material-ui/icons/SearchOutlined';\nimport AddIcon from '@material-ui/icons/Add';\nimport PersonOutline from '@material-ui/icons/PersonOutline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { config, AppContext } from '@morphoto/client-common';\nimport { AddFab } from '@morphoto/ui';\nimport OfflineBar from './OfflineBar';\nvar STATES = config.home.AppStateTypes;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      borderTop: \"2px solid \".concat(theme.palette.secondary.main)\n    },\n    container: {\n      padding: 0,\n      display: 'flex'\n    },\n    toolbar: {\n      color: theme.palette.jet.main,\n      backgroundColor: theme.palette.papayawhip.main\n    },\n    text: {\n      padding: theme.spacing(2, 2, 0)\n    },\n    paper: {\n      paddingBottom: 50\n    },\n    list: {\n      marginBottom: theme.spacing(2)\n    },\n    subheader: {\n      backgroundColor: theme.palette.background.paper\n    },\n    grow: {\n      flexGrow: 1\n    },\n    addFab: {\n      position: 'absolute',\n      bottom: 0,\n      left: '50%',\n      transformOrigin: '0% 100%',\n      transform: 'translateY(-25%) translateX(-50%) translateZ(0)',\n      zIndex: 200\n    },\n    spacer: {\n      width: 40,\n      flexGrow: 1\n    }\n  };\n});\n\nvar BottomBar = function BottomBar(_ref) {\n  var className = _ref.className,\n      domain = _ref.domain;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions,\n      signedIn = _useContext.signedIn;\n\n  return React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.root, className)\n  }, React.createElement(Toolbar, {\n    className: classes.toolbar\n  }, React.createElement(Container, {\n    maxWidth: \"sm\",\n    className: classes.container\n  }, signedIn && React.createElement(Button, {\n    edge: \"start\",\n    className: classes.grow,\n    color: domain === STATES.FEED ? 'secondary' : 'inherit',\n    onClick: domain !== STATES.FEED ? function () {\n      return globalActions.setHomeState(STATES.FEED);\n    } : function () {}\n  }, React.createElement(HomeIcon, null)), React.createElement(Button, {\n    edge: \"start\",\n    className: classes.grow,\n    color: domain === STATES.MAP ? 'secondary' : 'inherit',\n    onClick: domain !== STATES.MAP ? function () {\n      return globalActions.setHomeState(STATES.MAP);\n    } : function () {}\n  }, React.createElement(MapIcon, null)), signedIn && React.createElement(AddFab, {\n    className: classes.addFab,\n    onCameraClick: globalActions.onCameraClick,\n    onLibraryClick: globalActions.onLibraryClick\n  }, React.createElement(AddIcon, null)), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: domain === STATES.SEARCH ? 'secondary' : 'inherit',\n    className: classes.grow,\n    onClick: domain !== STATES.SEARCH ? function () {\n      return globalActions.setHomeState(STATES.SEARCH);\n    } : function () {}\n  }, React.createElement(SearchIcon, null)), signedIn && React.createElement(Button, {\n    edge: \"end\",\n    color: domain === STATES.PROFILE ? 'secondary' : 'inherit',\n    className: classes.grow,\n    onClick: domain !== STATES.PROFILE ? function () {\n      return globalActions.setHomeState(STATES.PROFILE);\n    } : function () {}\n  }, React.createElement(PersonOutline, null)))));\n};\n\nBottomBar.propTypes = {\n  className: PropTypes.string,\n  domain: PropTypes.string,\n  signedIn: PropTypes.bool\n};\nexport default BottomBar;\nexport var BottomBarCosmosWrapper = function BottomBarCosmosWrapper(props) {\n  var classes = useWrapperStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(OfflineBar, _extends({}, props, {\n    offlineSince: Date.now() - 3600000\n  })), React.createElement(CssBaseline, null), \" \", React.createElement(Paper, {\n    className: classes.paper\n  }, React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"This is a dummy component.\")), React.createElement(BottomBar, props));\n};\n\nvar wrapperStyle = function wrapperStyle(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    paper: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useWrapperStyles = makeStyles(wrapperStyle);","export { default as TopBar } from './TopBar';\nexport { default as TopBarWrapper } from './TopBarWrapper';\nexport { default as BottomBar } from './BottomBar';\nexport { default as OfflineBar } from './OfflineBar';\nexport { default as SideDrawer } from './SideDrawer';","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Tags\", {\n  enumerable: true,\n  get: function get() {\n    return _Tags[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"getSeriesTags\", {\n  enumerable: true,\n  get: function get() {\n    return _Tags.getSeriesTags;\n  }\n});\nObject.defineProperty(exports, \"getExifPromise\", {\n  enumerable: true,\n  get: function get() {\n    return _exif.getExifPromise;\n  }\n});\nObject.defineProperty(exports, \"Series\", {\n  enumerable: true,\n  get: function get() {\n    return _Series[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Photo\", {\n  enumerable: true,\n  get: function get() {\n    return _Photo[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"createShareUrl\", {\n  enumerable: true,\n  get: function get() {\n    return _share.createShareUrl;\n  }\n});\nObject.defineProperty(exports, \"decodeShareUrl\", {\n  enumerable: true,\n  get: function get() {\n    return _share.decodeShareUrl;\n  }\n});\nObject.defineProperty(exports, \"AccessHelper\", {\n  enumerable: true,\n  get: function get() {\n    return _AccessHelper[\"default\"];\n  }\n});\nexports.permissions = exports.util = exports.dates = exports.accessControl = exports.graphqlAPI = void 0;\n\nvar _accesscontrol = _interopRequireDefault(require(\"accesscontrol\"));\n\nvar _permissions = _interopRequireDefault(require(\"./accesscontrol/permissions\"));\n\nvar datesLib = _interopRequireWildcard(require(\"./dates\"));\n\nvar utilLib = _interopRequireWildcard(require(\"./util\"));\n\nvar _Tags = _interopRequireWildcard(require(\"./Tags\"));\n\nvar _exif = require(\"./exif\");\n\nvar _Series = _interopRequireDefault(require(\"./Series\"));\n\nvar _Photo = _interopRequireDefault(require(\"./Photo\"));\n\nvar _share = require(\"./share\");\n\nvar _AccessHelper = _interopRequireDefault(require(\"./accesscontrol/AccessHelper\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar graphqlAPI = {\n  queries: require('./graphql/queries'),\n  mutations: require('./graphql/mutations'),\n  fragments: require('./graphql/fragments'),\n  optimistic: require('./graphql/optimistic'),\n  schema: require('./graphql/schema.graphql')[\"default\"]\n};\nexports.graphqlAPI = graphqlAPI;\nvar accessControl = new _accesscontrol[\"default\"](_permissions[\"default\"]);\nexports.accessControl = accessControl;\nvar dates = datesLib;\nexports.dates = dates;\nvar util = utilLib;\nexports.util = util;\nvar permissions = _permissions[\"default\"];\nexports.permissions = permissions;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Chip from '@material-ui/core/Chip';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport log from 'loglevel';\nexport var tagChips = {\n  height: 20\n};\n\nvar style = function style(theme) {\n  return {\n    root: {\n      fontSize: '0.6em',\n      height: tagChips.height,\n      marginRight: theme.spacing(1) / 2,\n      marginTop: theme.spacing(1) / 2\n    },\n    deleteIcon: {\n      width: tagChips.height - 1,\n      height: tagChips.height - 1\n    },\n    chipAvatar: {\n      width: tagChips.height,\n      height: tagChips.height\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagChip = function TagChip(_ref) {\n  var edit = _ref.edit,\n      tag = _ref.tag,\n      color = _ref.color,\n      onDelete = _ref.onDelete,\n      props = _objectWithoutProperties(_ref, [\"edit\", \"tag\", \"color\", \"onDelete\"]);\n\n  var classes = useStyles();\n  var theme = useTheme();\n  return React.createElement(Chip, _extends({\n    style: {\n      background: color || null,\n      color: color ? \"\".concat(theme.palette.getContrastText(color)) : null\n    },\n    label: tag.label,\n    data: tag.id,\n    onDelete: edit ? function () {\n      return onDelete(tag);\n    } : null,\n    deleteIcon: React.createElement(CancelIcon, {\n      className: classes.deleteIcon,\n      onClick: function onClick(e) {\n        log.info('this click');\n      },\n      style: {\n        opacity: 0.5,\n        color: color ? \"\".concat(theme.palette.getContrastText(color)) : null\n      }\n    }),\n    className: classes.root\n  }, props));\n};\n\nTagChip.propTypes = {\n  color: PropTypes.string.isRequired,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  onDelete: PropTypes.func\n};\nexport default TagChip;","export default (function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    tagContainer: {},\n    formControl: {},\n    singleValue: {\n      fontSize: 16\n    },\n    valueContainer: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      flex: 1,\n      alignItems: 'center',\n      overflow: 'hidden'\n    },\n    paper: {}\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport TagChip from './TagChip';\nimport style from './TagControl.style';\nimport log from 'loglevel';\nvar useStyles = makeStyles(style);\n\nvar TagControl = function TagControl(_ref) {\n  var tags = _ref.tags,\n      onChange = _ref.onChange,\n      hint = _ref.hint,\n      tagConfig = _ref.tagConfig,\n      className = _ref.className;\n  var classes = useStyles();\n\n  var onSelectChange = function onSelectChange(inputValue, _ref2) {\n    var action = _ref2.action,\n        removedValue = _ref2.removedValue,\n        option = _ref2.option;\n    onChange(inputValue.map(function (iv) {\n      return {\n        typeId: tagConfig.id,\n        label: iv.label,\n        xyCoords: null\n      };\n    }));\n  };\n\n  var MultiValue = function MultiValue(_ref3) {\n    var removeProps = _ref3.removeProps,\n        innerProps = _ref3.innerProps,\n        data = _ref3.data,\n        props = _objectWithoutProperties(_ref3, [\"removeProps\", \"innerProps\", \"data\"]);\n\n    return React.createElement(TagChip, {\n      tag: data,\n      onDelete: function onDelete(e) {\n        removeProps.onClick();\n      },\n      color: tagConfig.color,\n      edit: true\n    });\n  };\n\n  MultiValue.propTypes = {\n    removeProps: PropTypes.any,\n    innerProps: PropTypes.any,\n    data: PropTypes.any\n  };\n  var tagValues = tags.filter(function (tag) {\n    return tag.typeId === tagConfig.id && !tag.coords;\n  });\n  var selectOptions = tagValues.map(function (val) {\n    return {\n      label: val.label,\n      value: val.val\n    };\n  });\n  var remainingTags = tagConfig.values.filter(function (val) {\n    return tagValues.map(function (t) {\n      return t.label;\n    }).indexOf(val) === -1;\n  }).map(function (val) {\n    return {\n      label: val,\n      value: val\n    };\n  });\n  log.info('TAG DEBUG', {\n    tags: tags,\n    tagConfig: tagConfig,\n    tagValues: tagValues,\n    selectOptions: selectOptions,\n    remainingTags: remainingTags\n  });\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, tagConfig.label), !tagConfig.allowAdditions && React.createElement(Select, {\n    options: remainingTags,\n    classes: classes,\n    isFocused: true,\n    components: {},\n    deleteRemoves: true,\n    value: selectOptions,\n    isClearable: false,\n    onChange: onSelectChange,\n    placeholder: \"Select Tags\",\n    isMulti: true,\n    isSearchable: true\n  }), tagConfig.allowAdditions && React.createElement(CreatableSelect, {\n    options: remainingTags,\n    classes: classes,\n    isFocused: true,\n    deleteRemoves: true,\n    components: {},\n    value: selectOptions,\n    isClearable: false,\n    onChange: onSelectChange,\n    placeholder: \"Select Tags\",\n    isMulti: true,\n    isSearchable: true\n  }), hint && React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.hint\n  }, hint));\n};\n\nTagControl.propTypes = {\n  className: PropTypes.string,\n  hint: PropTypes.string,\n  tags: PropTypes.array,\n  onChange: PropTypes.func.isRequired,\n  tagConfig: PropTypes.object\n};\nexport default TagControl;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagControl from './TagControl';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dlgContent: {},\n    title: {\n      border: \"1px solid \".concat(theme.palette.grey[200]),\n      background: theme.palette.grey[100],\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagEdit = function TagEdit(_ref) {\n  var open = _ref.open,\n      title = _ref.title,\n      onOk = _ref.onOk,\n      onCancel = _ref.onCancel,\n      tags = _ref.tags,\n      tagConfig = _ref.tagConfig;\n  var classes = useStyles();\n\n  var _useState = useState(tags),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  return React.createElement(Dialog, {\n    className: classes.root,\n    scroll: \"paper\",\n    fullScreen: true,\n    open: open,\n    onClose: function onClose() {\n      return onOk(value);\n    }\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    className: classes.closeButton,\n    onClick: onCancel\n  }, React.createElement(CloseIcon, null))), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(TagControl, {\n    className: classes.field,\n    tags: value,\n    tagConfig: tagConfig,\n    onChange: setValue\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onCancel\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return setValue(tags);\n    }\n  }, \"Reset\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(value);\n    }\n  }, \"Ok\")));\n};\n\nTagEdit.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  onOk: PropTypes.func,\n  onCancel: PropTypes.func,\n  tags: PropTypes.array.isRequired,\n  tagConfig: PropTypes.object.isRequired\n};\nexport default TagEdit;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagChip from './TagChip';\nimport style from './TagControl.style';\nvar useStyles = makeStyles(style);\n\nvar TagView = function TagView(_ref) {\n  var tags = _ref.tags,\n      label = _ref.label,\n      tagConfig = _ref.tagConfig,\n      className = _ref.className;\n  var classes = useStyles();\n  var tagValues = tags ? tags.filter(function (tag) {\n    return tag.typeId === tagConfig.id && !tag.coords;\n  }) : [];\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, tagConfig.label), React.createElement(\"div\", {\n    className: classes.tagContainer\n  }, tagValues.map(function (tag, idx) {\n    return React.createElement(TagChip, {\n      tag: tag,\n      key: \"tagchip\".concat(idx),\n      color: tagConfig.color\n    });\n  })));\n};\n\nTagView.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string,\n  tags: PropTypes.array,\n  tagConfig: PropTypes.object\n};\nexport default TagView;","var tagChips = {\n  height: 20\n};\nexport default (function (theme) {\n  return {\n    xyTagChip: {\n      cursor: 'pointer',\n      color: 'white',\n      fontSize: '0.6em',\n      background: '#444444',\n      height: tagChips.height,\n      position: 'absolute',\n      left: -tagChips.height / 2,\n      top: -tagChips.height / 2\n    },\n    editing: {},\n    reversedChip: {\n      flexDirection: 'row-reverse',\n      left: 'unset',\n      right: -tagChips.height / 2\n    },\n    deleteIcon: {\n      width: tagChips.height - 1,\n      height: tagChips.height - 1\n    },\n    chipAvatarIcon: {\n      color: 'white',\n      width: tagChips.height - 4,\n      height: tagChips.height - 4\n    },\n    chipAvatar: {\n      background: 'inherit',\n      width: tagChips.height,\n      height: tagChips.height\n    },\n    reversedDelete: {\n      margin: \"0 -\".concat(tagChips.height / 8, \"px 0 \").concat(tagChips.height / 8, \"px\")\n    },\n    chipBucket: {\n      width: 1,\n      height: 1,\n      display: 'flex',\n      flexDirection: 'row',\n      position: 'absolute'\n    },\n    reversedChipBucket: {\n      flexDirection: 'row-reverse'\n    }\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Draggable from 'react-draggable';\nimport Chip from '@material-ui/core/Chip';\nimport Avatar from '@material-ui/core/Avatar';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport MyLocation from '@material-ui/icons/MyLocation';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport style from './XYTagChip.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagChip = function XYTagChip(_ref) {\n  var color = _ref.color,\n      edit = _ref.edit,\n      tag = _ref.tag,\n      newSize = _ref.newSize,\n      onTagDragOver = _ref.onTagDragOver,\n      onTagDragStop = _ref.onTagDragStop,\n      onNewTag = _ref.onNewTag,\n      onTagDelete = _ref.onTagDelete,\n      props = _objectWithoutProperties(_ref, [\"color\", \"edit\", \"tag\", \"newSize\", \"onTagDragOver\", \"onTagDragStop\", \"onNewTag\", \"onTagDelete\"]);\n\n  var isReversed = tag.relCoords.x > newSize.newWidth / 2;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var stopBadness = function stopBadness(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  var handleDrag = function handleDrag(e, data) {\n    stopBadness(e);\n    onTagDragOver(data, tag);\n  };\n\n  var handleStopDrag = function handleStopDrag(e, data) {\n    stopBadness(e);\n    onTagDragStop(data, tag);\n  };\n\n  return React.createElement(Draggable, {\n    disabled: !edit,\n    bounds: {\n      left: 10,\n      top: 10,\n      right: newSize.newWidth - 10,\n      bottom: newSize.newHeight - 10\n    },\n    position: {\n      x: tag.relCoords.x,\n      y: tag.relCoords.y\n    },\n    onDrag: handleDrag,\n    onStop: handleStopDrag,\n    onClick: stopBadness\n  }, React.createElement(\"div\", {\n    className: classNames(classes.chipBucket, isReversed && classes.reversedChipBucket)\n  }, React.createElement(Chip, _extends({\n    style: {\n      background: color ? \"\".concat(color, \"!important\") : null,\n      color: color ? \"\".concat(theme.palette.getContrastText(color), \"!important\") : null\n    },\n    color: edit ? 'secondary' : 'default',\n    label: tag.label,\n    data: tag.id,\n    onClick: stopBadness,\n    onDelete: edit ? onTagDelete(tag) : null,\n    deleteIcon: edit ? React.createElement(CancelIcon, {\n      className: classNames(classes.deleteIcon, isReversed && classes.reversedDelete)\n    }) : React.createElement(\"div\", null),\n    className: classNames(classes.xyTagChip, isReversed && classes.reversedChip, edit && classes.editing)\n  }, props, {\n    avatar: React.createElement(Avatar, {\n      className: classNames(classes.chipAvatar, edit && classes.editing)\n    }, React.createElement(MyLocation, {\n      className: classNames(classes.chipAvatarIcon, edit && classes.editing)\n    }))\n  }))));\n};\n\nXYTagChip.propTypes = {\n  color: PropTypes.string,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  newSize: PropTypes.object,\n  onTagDragOver: PropTypes.func,\n  onTagDragStop: PropTypes.func,\n  onNewTag: PropTypes.func,\n  onTagDelete: PropTypes.func\n};\nexport default XYTagChip;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport style from './XYTagSelect.style';\nimport log from 'loglevel';\nvar useStyles = makeStyles(style);\n\nvar XYTagSelect = function XYTagSelect(_ref) {\n  var tagConfig = _ref.tagConfig,\n      onChange = _ref.onChange;\n  var classes = useStyles();\n  var options = tagConfig.values.map(function (tc) {\n    return {\n      label: tc.label,\n      value: tc.id\n    };\n  });\n  log.info('XYTagSelect', tagConfig);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, !tagConfig.allowAdditions && React.createElement(Select, {\n    options: options,\n    classes: classes,\n    components: {\n      Control: Control,\n      Menu: Menu,\n      NoOptionsMessage: NoOptionsMessage,\n      Option: Option,\n      Placeholder: Placeholder,\n      ValueContainer: ValueContainer\n    },\n    value: null,\n    blurInputOnSelect: true,\n    isClearable: false,\n    onChange: onChange,\n    placeholder: tagConfig.label,\n    isSearchable: true\n  }), tagConfig.allowAdditions && React.createElement(CreatableSelect, {\n    options: options,\n    classes: classes,\n    components: {\n      Control: Control,\n      Menu: Menu,\n      NoOptionsMessage: NoOptionsMessage,\n      Option: Option,\n      Placeholder: Placeholder,\n      ValueContainer: ValueContainer\n    },\n    value: null,\n    isClearable: false,\n    blurInputOnSelect: true,\n    onChange: onChange,\n    placeholder: tagConfig.label,\n    isSearchable: true\n  }));\n};\n\nXYTagSelect.propTypes = {\n  tagConfig: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default XYTagSelect;\n\nfunction Control(props) {\n  return React.createElement(TextField, _extends({\n    fullWidth: true,\n    InputProps: {\n      inputComponent: inputComponent,\n      inputProps: _objectSpread({\n        className: props.selectProps.classes.input,\n        inputRef: props.innerRef,\n        children: props.children\n      }, props.innerProps)\n    }\n  }, props.selectProps.textFieldProps));\n}\n\nvar NoOptionsMessage = function NoOptionsMessage(_ref2) {\n  var innerProps = _ref2.innerProps,\n      selectProps = _ref2.selectProps,\n      children = _ref2.children;\n  return React.createElement(Typography, _extends({\n    color: \"textSecondary\",\n    className: selectProps.classes.noOptionsMessage\n  }, innerProps), children);\n};\n\nvar Menu = function Menu(_ref3) {\n  var selectProps = _ref3.selectProps,\n      innerProps = _ref3.innerProps,\n      children = _ref3.children;\n  return React.createElement(Paper, _extends({\n    square: true,\n    className: selectProps.classes.paper\n  }, innerProps), children);\n};\n\nvar inputComponent = function inputComponent(_ref4) {\n  var inputRef = _ref4.inputRef,\n      props = _objectWithoutProperties(_ref4, [\"inputRef\"]);\n\n  return React.createElement(\"div\", _extends({\n    ref: inputRef\n  }, props));\n};\n\nvar Placeholder = function Placeholder(props) {\n  return React.createElement(Typography, _extends({\n    color: \"textSecondary\",\n    className: props.selectProps.classes.placeholder\n  }, props.innerProps), props.children);\n};\n\nvar Option = function Option(_ref5) {\n  var innerRef = _ref5.innerRef,\n      isFocused = _ref5.isFocused,\n      isSelected = _ref5.isSelected,\n      innerProps = _ref5.innerProps,\n      children = _ref5.children;\n  return React.createElement(MenuItem, _extends({\n    buttonRef: innerRef,\n    selected: isFocused,\n    component: \"div\",\n    style: {\n      fontWeight: isSelected ? 500 : 400\n    }\n  }, innerProps), children);\n};\n\nvar ValueContainer = function ValueContainer(_ref6) {\n  var selectProps = _ref6.selectProps,\n      children = _ref6.children;\n  return React.createElement(\"div\", {\n    className: selectProps.classes.valueContainer\n  }, children);\n};\n\nValueContainer.propTypes = {\n  selectProps: PropTypes.object.isRequired,\n  children: PropTypes.any\n};","export default (function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    noOptionsMessage: {\n      padding: \"\".concat(theme.spacing(1), \"px \").concat(theme.spacing(1) * 2, \"px\")\n    },\n    singleValue: {\n      fontSize: 16\n    },\n    placeholder: {\n      position: 'absolute',\n      left: 2,\n      fontSize: 16\n    },\n    input: {\n      display: 'flex',\n      padding: 0\n    },\n    valueContainer: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      flex: 1,\n      alignItems: 'center',\n      overflow: 'hidden'\n    },\n    paper: {\n      position: 'absolute',\n      zIndex: 100,\n      marginTop: theme.spacing(1),\n      left: 0,\n      right: 0\n    }\n  };\n});","export default (function (theme) {\n  return {\n    root: {\n      overflow: 'visible'\n    },\n    header: {\n      padding: theme.spacing(1) * 2\n    },\n    listItem: {\n      flexDirection: 'column'\n    },\n    dlgBody: {\n      paddingLeft: theme.spacing(1) * 2,\n      paddingRight: theme.spacing(1) * 2,\n      paddingBottom: theme.spacing(1) * 2\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n});","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport XYTagSelect from './XYTagSelect';\nimport style from './XYTagChooser.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagChooser = function XYTagChooser(_ref) {\n  var coords = _ref.coords,\n      open = _ref.open,\n      onNewTag = _ref.onNewTag,\n      _onClose = _ref.onClose;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  var xyTags = tagConfig.filter(function (t) {\n    return t.allowXY;\n  });\n  if (!coords) return null;\n  return React.createElement(Dialog, {\n    open: open,\n    scroll: \"paper\",\n    fullScreen: true,\n    classes: {\n      paperScrollPaper: classes.root\n    },\n    onClose: function onClose() {\n      return _onClose();\n    },\n    \"aria-labelledby\": \"simple-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"simple-dialog-title\",\n    className: classes.header\n  }, \"New Tag:\", React.createElement(IconButton, {\n    className: classes.closeButton,\n    onClick: _onClose\n  }, React.createElement(CloseIcon, null))), React.createElement(\"div\", {\n    className: classes.dlgBody\n  }, xyTags.length > 1 && React.createElement(Typography, {\n    variant: \"caption\"\n  }, \"What kind of tag would you like to create?\"), xyTags.map(function (tagType, idx) {\n    return React.createElement(\"div\", {\n      className: classes.listItem,\n      key: \"tagSelect\".concat(idx)\n    }, React.createElement(XYTagSelect, {\n      tagConfig: tagType,\n      onChange: onNewTag(coords, tagType)\n    }));\n  })));\n};\n\nXYTagChooser.propTypes = {\n  open: PropTypes.bool.isRequired,\n  coords: PropTypes.object,\n  onClose: PropTypes.func.isRequired,\n  onNewTag: PropTypes.func.isRequired\n};\nexport default XYTagChooser;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport { AppContext } from '@morphoto/client-common';\nimport XYTagChooser from './XYTagChooser';\nimport { Tags } from '@morphoto/common';\n\nvar useXYTags = function useXYTags(photo, newSize, onChange, setResizeActive) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isDragging = _useState2[0],\n      setIsDragging = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newTagDialog = _useState4[0],\n      setNewTagDialog = _useState4[1];\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  var tagClass = new Tags(tagConfig, photo.tags);\n\n  var onNewTag = function onNewTag(coords, tagType) {\n    return function (_ref) {\n      var value = _ref.value,\n          isNew = _ref.__isNew__;\n      var addTag = isNew ? tagClass.createNewXYTagObj(value, tagType.id, coords) : tagClass.createExistingXYTagObj(value, tagType.id, coords);\n      setNewTagDialog(null);\n      onChange(_objectSpread({}, photo, {\n        tags: [].concat(_toConsumableArray(photo.tags), [addTag])\n      }));\n    };\n  };\n\n  var onTagDelete = function onTagDelete(tag) {\n    return function () {\n      var tags = photo.tags.filter(function (oldTag) {\n        return oldTag.label !== tag.label;\n      });\n      onChange(_objectSpread({}, photo, {\n        tags: tags\n      }));\n    };\n  };\n\n  var onAddTagTrigger = function onAddTagTrigger(e) {\n    if (!newTagDialog) {\n      setResizeActive(false);\n      setNewTagDialog({\n        x: parseInt(e.pageX - (window.innerWidth - newSize.newWidth) / 2 * newSize.multiplier, 10),\n        y: parseInt(e.pageY - (window.innerHeight - newSize.newHeight) / 2 * newSize.multiplier, 10)\n      });\n    }\n  };\n\n  var updateTagLocation = function updateTagLocation(_ref2, tag) {\n    var x = _ref2.x,\n        y = _ref2.y;\n    var newTags = photo.tags.map(function (oldTag) {\n      if (oldTag.label !== tag.label) return oldTag;else {\n        var newX = parseInt(x / newSize.multiplier, 10);\n        var newY = parseInt(y / newSize.multiplier, 10);\n        return _objectSpread({}, oldTag, {\n          coords: {\n            x: newX,\n            y: newY\n          }\n        });\n      }\n    });\n    return newTags;\n  };\n\n  var onTagDragStop = function onTagDragStop(coords, tag) {\n    var tags = updateTagLocation(coords, tag);\n    setIsDragging(false);\n    onChange(_objectSpread({}, photo, {\n      tags: tags\n    }));\n  };\n\n  var onTagDragOver = function onTagDragOver(coords, tag) {\n    updateTagLocation(coords, tag);\n    setIsDragging(true);\n  };\n\n  var TagChooser = function TagChooser() {\n    return React.createElement(XYTagChooser, {\n      open: !isDragging && Boolean(newTagDialog),\n      coords: newTagDialog,\n      onNewTag: onNewTag,\n      onClose: function onClose() {\n        setNewTagDialog(null);\n        setResizeActive(true);\n      }\n    });\n  };\n\n  return {\n    onNewTag: onNewTag,\n    onTagDelete: onTagDelete,\n    onAddTagTrigger: onAddTagTrigger,\n    onTagDragOver: onTagDragOver,\n    onTagDragStop: onTagDragStop,\n    TagChooser: TagChooser,\n    getRelXYTags: tagClass.getRelXYTags\n  };\n};\n\nexport default useXYTags;","export { default as TagChip } from './TagChip';\nexport { default as TagControl } from './TagControl';\nexport { default as TagEdit } from './TagEdit';\nexport { default as TagView } from './TagView';\nexport { default as XYTagChip } from './XYTagChip';\nexport { default as XYTagChooser } from './XYTagChooser';\nexport { default as XYTagSelect } from './XYTagSelect';\nexport { default as useXYTags } from './useXYTags';","import { useRef, useEffect } from 'react';\nimport log from 'loglevel';\n\nvar useAuthCommon = function useAuthCommon() {\n  var containerRef = useRef();\n\n  var handleKeyPress = function handleKeyPress(event) {\n    if (event.key === 'Enter') {\n      if (containerRef.current) {\n        try {\n          var found = containerRef.current.getElementsByClassName('enterAction');\n          if (found && found[0]) found[0].click();\n        } catch (e) {\n          log.error('useAuthCommon::handleKeyPress', e);\n        }\n      }\n    }\n  };\n\n  useEffect(function () {\n    if (containerRef.current) {\n      try {\n        document.addEventListener('keypress', handleKeyPress, false);\n      } catch (e) {\n        log.error('useAuthCommon::useEffect', e);\n      }\n\n      return function () {\n        return document.removeEventListener('keypress', handleKeyPress, false);\n      };\n    }\n  }, []);\n  return containerRef;\n};\n\nexport default useAuthCommon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useAuthCommon from './useAuthCommon';\nimport { AppLogo } from '@morphoto/icons';\nimport { config } from '@morphoto/client-common';\nimport { ThemeProvider } from '@material-ui/styles';\nimport themes from '@morphoto/themes';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%'\n    },\n    bgSwoosh: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 0\n    },\n    loading: {\n      animation: '$loadingSpin 4s linear infinite, $loadingFade 6s infinite'\n    },\n    '@keyframes loadingSpin': {\n      'from': {\n        transform: 'rotate(0deg) translateY(-50%) translateX(-50%)'\n      },\n      'to': {\n        transform: 'rotate(360deg) translateY(-50%) translateX(-50%)'\n      }\n    },\n    '@keyframes loadingFade': {\n      '0%': {\n        opacity: 0.1\n      },\n      '50%': {\n        opacity: 1\n      },\n      '100%': {\n        opacity: 0.1\n      }\n    },\n    spacer: {\n      flex: '1 1 5%'\n    },\n    logoContainer: {\n      overflow: 'hidden',\n      position: 'relative',\n      flex: '1 1 40%',\n      width: '100%',\n      minHeight: 90\n    },\n    logo: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '0% 0%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      width: '90%',\n      height: '90%'\n    },\n    inner: {\n      margin: '0 auto',\n      padding: theme.spacing(0, 1),\n      width: '100%',\n      height: '100%',\n      minWidth: 200,\n      maxWidth: 350,\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center'\n    }\n  };\n});\n\nvar AuthContainer = function AuthContainer(_ref) {\n  var children = _ref.children,\n      loading = _ref.loading;\n  var containerRef = useAuthCommon();\n  var classes = useStyles();\n  return React.createElement(ThemeProvider, {\n    theme: themes.login\n  }, React.createElement(\"div\", {\n    ref: containerRef,\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(\"div\", {\n    className: classes.logoContainer\n  }, React.createElement(AppLogo, {\n    className: classNames(classes.logo, loading ? classes.loading : null)\n  })), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\"\n  }, \"MorPhoto\"), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\"\n  }, \"Version:  \", config.version, \" \", React.createElement(\"em\", null, \"BETA\")), children, React.createElement(\"div\", {\n    className: classes.spacer\n  }))));\n};\n\nAuthContainer.propTypes = {\n  children: PropTypes.any,\n  loading: PropTypes.bool\n};\nexport default AuthContainer;","export default (function (theme) {\n  return {\n    root: {},\n    spacer: {\n      flexGrow: 1\n    },\n    forgotPassword: {\n      width: '100%',\n      textAlign: 'right'\n    },\n    switch: {},\n    switchButton: {\n      flexGrow: 1,\n      '&:last-child': {\n        borderRadius: 0\n      },\n      '&:first-child': {\n        borderRadius: 0\n      }\n    },\n    phoneNumInner: {\n      marginTop: theme.spacing(1),\n      display: 'flex'\n    },\n    phoneNumDropdown: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    warnText: {\n      marginTop: theme.spacing(2),\n      fontStyle: 'italic'\n    },\n    noSignin: {\n      margin: theme.spacing(2, 0),\n      padding: theme.spacing(1),\n      textAlign: 'left',\n      border: \"1px solid #00000022\",\n      background: \"#0000000F\"\n    }\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport { Typography } from '@material-ui/core';\nvar useStyles = makeStyles(style);\n\nvar SignIn = function SignIn(_ref) {\n  var loading = _ref.loading,\n      handleSignup = _ref.handleSignup,\n      federated = _ref.federated,\n      handleForgotPassword = _ref.handleForgotPassword,\n      handleInputChange = _ref.handleInputChange,\n      handleBeAnonymous = _ref.handleBeAnonymous,\n      handleSignIn = _ref.handleSignIn,\n      props = _objectWithoutProperties(_ref, [\"loading\", \"handleSignup\", \"federated\", \"handleForgotPassword\", \"handleInputChange\", \"handleBeAnonymous\", \"handleSignIn\"]);\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"username\",\n    fullWidth: true,\n    key: \"username\",\n    name: \"username\",\n    label: \"Username\",\n    autoFocus: true,\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(TextField, {\n    fullWidth: true,\n    id: \"password\",\n    label: \"Password\",\n    key: \"password\",\n    name: \"password\",\n    type: \"password\",\n    className: classes.textField,\n    autoComplete: \"current-password\",\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    component: \"button\",\n    color: \"secondary\",\n    variant: \"contained\",\n    disabled: loading,\n    onClick: handleSignup\n  }, \"New Account\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    component: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    disabled: loading,\n    onClick: handleSignIn\n  }, \"Sign In\")), React.createElement(Button, {\n    color: \"primary\",\n    onClick: handleForgotPassword,\n    size: \"small\"\n  }, \"Forgot Password\"), React.createElement(\"div\", {\n    className: classes.noSignin\n  }, React.createElement(Button, {\n    fullWidth: true,\n    size: \"small\",\n    variant: 'outlined',\n    onClick: handleBeAnonymous,\n    color: \"inherit\"\n  }, \"Continue without logging in\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.warnText,\n    color: \"textSecondary\",\n    component: \"div\"\n  }, \"You will not be able to add content and many features will be unavailable.\")));\n};\n\nSignIn.propTypes = {\n  loading: PropTypes.bool,\n  federated: PropTypes.object,\n  handleSignup: PropTypes.func.isRequired,\n  handleForgotPassword: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  handleBeAnonymous: PropTypes.func.isRequired,\n  handleSignIn: PropTypes.func.isRequired\n};\nexport default SignIn;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Chip from '@material-ui/core/Chip';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { green } from '@material-ui/core/colors';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex'\n    },\n    chipContainer: {\n      flex: '1 1'\n    },\n    chip: {\n      height: theme.spacing(2.5)\n    },\n    label: {\n      padding: theme.spacing(0, 1, 0, 1)\n    },\n    ok: {\n      color: 'white',\n      background: green[500],\n      border: \"1px solid \".concat(green[500])\n    },\n    bad: {\n      color: theme.palette.error.main,\n      background: 'transparent',\n      border: \"1px solid \".concat(theme.palette.error.main)\n    }\n  };\n});\n\nvar PasswordHelper = function PasswordHelper(_ref) {\n  var pword = _ref.pword;\n  var classes = useStyles();\n  var hasUpper = pword ? !!pword.match(/[A-Z]/) : false;\n  var hasLower = pword ? !!pword.match(/[a-z]/) : false;\n  var hasNum = pword ? !!pword.match(/[0-9]/) : false;\n  var hasSpecial = pword ? !!pword.match(/[!@#$%^&*(),.?'\":;{}\\[\\]\\-_=+|/\\\\`~<>]/) : false;\n  var enoughChars = pword ? pword.length >= 8 : false;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(SpecialChip, {\n    ok: enoughChars,\n    label: \"8+\"\n  }), React.createElement(SpecialChip, {\n    ok: hasUpper,\n    label: \"A-Z\"\n  }), React.createElement(SpecialChip, {\n    ok: hasLower,\n    label: \"a-z\"\n  }), React.createElement(SpecialChip, {\n    ok: hasNum,\n    label: \"0-9\"\n  }), React.createElement(SpecialChip, {\n    ok: hasSpecial,\n    label: \"!@#$%^&*,.?\"\n  }));\n};\n\nPasswordHelper.propTypes = {\n  pword: PropTypes.string\n};\nexport default PasswordHelper;\n\nvar SpecialChip = function SpecialChip(_ref2) {\n  var ok = _ref2.ok,\n      props = _objectWithoutProperties(_ref2, [\"ok\"]);\n\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.chipContainer\n  }, React.createElement(Chip, _extends({\n    classes: {\n      root: classNames(classes.chip, ok ? classes.ok : classes.bad),\n      label: classes.label\n    }\n  }, props)));\n};\n\nSpecialChip.propTypes = {\n  ok: PropTypes.bool\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport PasswordHelper from './PasswordHelper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nvar useStyles = makeStyles(style);\n\nvar SignUp = function SignUp(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      signUpFields = _ref.signUpFields,\n      signUpFieldLabels = _ref.signUpFieldLabels,\n      signUpFieldPlaceholders = _ref.signUpFieldPlaceholders,\n      handleSignup = _ref.handleSignup,\n      handleBack = _ref.handleBack,\n      countryDialCodes = _ref.countryDialCodes,\n      defaultDialCode = _ref.defaultDialCode,\n      props = _objectWithoutProperties(_ref, [\"handleInputChange\", \"signUpFields\", \"signUpFieldLabels\", \"signUpFieldPlaceholders\", \"handleSignup\", \"handleBack\", \"countryDialCodes\", \"defaultDialCode\"]);\n\n  var _useState = useState(defaultDialCode),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectVal = _useState2[0],\n      setSelectVal = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pword = _useState4[0],\n      setPword = _useState4[1];\n\n  var pwordType = function pwordType(event) {\n    setPword(event.target.value);\n    handleInputChange(event);\n  };\n\n  var classes = useStyles();\n\n  var handleDialCodeChange = function handleDialCodeChange(e) {\n    handleInputChange(e);\n    setSelectVal(e.target.value);\n  };\n\n  return React.createElement(React.Fragment, null, signUpFields.map(function (field, idx) {\n    return field.key !== 'phone_number' ? React.createElement(React.Fragment, {\n      key: field.key\n    }, React.createElement(TextField, {\n      fullWidth: true,\n      autoFocus: signUpFields.findIndex(function (f) {\n        return f.key === field.key;\n      }) === 0,\n      type: field.type,\n      name: field.key,\n      placeholder: signUpFieldPlaceholders[idx],\n      label: signUpFieldLabels[idx],\n      className: classes.textField,\n      margin: \"normal\",\n      onChange: field.key === 'password' ? pwordType : handleInputChange\n    }), field.key === 'password' && React.createElement(PasswordHelper, {\n      pword: pword\n    })) : React.createElement(FormControl, {\n      className: classes.phoneNumDropdown,\n      fullWidth: true,\n      key: \"phonenum\"\n    }, React.createElement(InputLabel, {\n      htmlFor: \"dial_code\",\n      shrink: true\n    }, signUpFieldLabels[idx], field.required ? '*' : ''), React.createElement(\"div\", {\n      className: classes.phoneNumInner\n    }, React.createElement(Select, {\n      value: selectVal,\n      onChange: handleDialCodeChange,\n      inputProps: {\n        name: 'dial_code',\n        id: 'dial_code'\n      }\n    }, countryDialCodes.map(function (dialCode) {\n      return React.createElement(\"option\", {\n        key: dialCode,\n        value: dialCode\n      }, dialCode);\n    })), React.createElement(TextField, {\n      placeholder: signUpFieldPlaceholders[idx],\n      type: \"tel\",\n      fullWidth: true,\n      id: \"phone_line_number\",\n      key: \"phone_line_number\",\n      name: \"phone_line_number\",\n      onChange: handleInputChange\n    })));\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    component: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSignup\n  }, \"Create Account\")));\n};\n\nSignUp.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  signUpFields: PropTypes.array.isRequired,\n  signUpFieldLabels: PropTypes.array.isRequired,\n  signUpFieldPlaceholders: PropTypes.array.isRequired,\n  countryDialCodes: PropTypes.array.isRequired,\n  defaultDialCode: PropTypes.string.isRequired,\n  handleSignup: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired\n};\nexport default SignUp;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nvar useStyles = makeStyles(style);\n\nvar ConfirmSignIn = function ConfirmSignIn(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      handleBack = _ref.handleBack,\n      handleConfirm = _ref.handleConfirm;\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"mfaCode\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"MFA Code\",\n    name: \"code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleConfirm\n  }, \"Confirm\")));\n};\n\nConfirmSignIn.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleConfirm: PropTypes.func.isRequired\n};\nexport default ConfirmSignIn;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Typography from '@material-ui/core/Typography';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    checkEmailMsgIco: {\n      marginRight: theme.spacing(1)\n    },\n    checkEmailMsgTxt: {\n      textAlign: 'left',\n      flexGrow: 1\n    },\n    checkEmailMsg: {\n      display: 'flex'\n    }\n  };\n});\n\nvar CheckemailMsg = function CheckemailMsg(_ref) {\n  var onResend = _ref.onResend,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: open\n  }, React.createElement(SnackbarContent, {\n    className: classes.root,\n    message: React.createElement(\"div\", {\n      className: classes.checkEmailMsg\n    }, React.createElement(EmailIcon, {\n      className: classes.checkEmailMsgIco,\n      color: \"inherit\"\n    }), React.createElement(Typography, {\n      className: classes.checkEmailMsgTxt,\n      color: \"inherit\"\n    }, \"Code Sent Check your email\")),\n    action: onResend && [React.createElement(Button, {\n      key: \"undo\",\n      color: \"secondary\",\n      size: \"small\",\n      variant: \"contained\",\n      onClick: onResend\n    }, \"Resend\")]\n  }));\n};\n\nCheckemailMsg.propTypes = {\n  onResend: PropTypes.func,\n  open: PropTypes.bool\n};\nexport default CheckemailMsg;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\n\nvar ConfirmSignUp = function ConfirmSignUp(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      handleBack = _ref.handleBack,\n      handleResend = _ref.handleResend,\n      handleConfirm = _ref.handleConfirm;\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"username\",\n    fullWidth: true,\n    autoFocus: true,\n    name: \"username\",\n    label: \"Username\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(TextField, {\n    id: \"confirmationCode\",\n    fullWidth: true,\n    name: \"code\",\n    label: \"Confirmation Code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"If you can't find it in your inbox be sure to check your spam folder.\"), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: \"enterAction\",\n    onClick: handleConfirm\n  }, \"Confirm\")), React.createElement(CheckEmailMsg, {\n    open: true,\n    onResend: handleResend\n  }));\n};\n\nConfirmSignUp.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleResend: PropTypes.func.isRequired,\n  handleConfirm: PropTypes.func.isRequired\n};\nexport default ConfirmSignUp;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Link from '@material-ui/core/Link';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\n\nvar ForgotPassword = function ForgotPassword(_ref) {\n  var handleSubmit = _ref.handleSubmit,\n      handleInputChange = _ref.handleInputChange,\n      handleSendCode = _ref.handleSendCode,\n      handleBack = _ref.handleBack;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sent = _useState2[0],\n      setSent = _useState2[1];\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(Typography, null, \"Forgot Password\"), !sent && React.createElement(TextField, {\n    id: \"username\",\n    autoFocus: true,\n    fullWidth: true,\n    label: \"Username\",\n    name: \"username\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), sent && React.createElement(TextField, {\n    id: \"changecode\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Code\",\n    name: \"code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), sent && React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"If you can't find it in your inbox be sure to check your spam folder.\"), sent && React.createElement(TextField, {\n    id: \"newpassword\",\n    fullWidth: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    name: \"password\",\n    autoComplete: \"current-password\",\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), !sent && React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"Enter your username and you will be sent an email with a code to reset your password.\"), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: function onClick() {\n      sent ? setSent(false) : handleBack();\n    }\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), !sent && React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: \"enterAction\",\n    onClick: function onClick() {\n      setSent(true);\n      handleSendCode();\n    }\n  }, \"Send Code\"), sent && React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSubmit\n  }, \"Submit\")), React.createElement(CheckEmailMsg, {\n    open: sent,\n    onResend: handleSendCode\n  }));\n};\n\nForgotPassword.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  handleSendCode: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired\n};\nexport default ForgotPassword;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Typography } from '@material-ui/core';\nimport AuthContainer from './AuthContainer';\n\nvar Loading = function Loading(_ref) {\n  var message = _ref.message;\n  return React.createElement(React.Fragment, null, React.createElement(Typography, {\n    variant: \"h3\"\n  }, \"Loading...\"), message && React.createElement(Typography, {\n    variant: \"overline\"\n  }, message));\n};\n\nLoading.propTypes = {\n  message: PropTypes.string\n};\nexport default Loading;\nexport var LoadingWrapped = function LoadingWrapped(props) {\n  return React.createElement(AuthContainer, {\n    loading: true\n  }, React.createElement(Loading, props));\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport PasswordHelper from './PasswordHelper';\nvar useStyles = makeStyles(style);\n\nvar RequireNewPassword = function RequireNewPassword(_ref) {\n  var change = _ref.change,\n      requiredAttributes = _ref.requiredAttributes,\n      placeholders = _ref.placeholders,\n      handleInputChange = _ref.handleInputChange;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      pword = _useState2[0],\n      setPword = _useState2[1];\n\n  var pwordType = function pwordType(event) {\n    setPword(event.target.value);\n    handleInputChange(event);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Typography, null, \"A new password is required\"), React.createElement(TextField, {\n    id: \"newassword\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    autoComplete: \"new-password\",\n    margin: \"normal\",\n    onChange: pwordType\n  }), React.createElement(PasswordHelper, {\n    pword: pword\n  }), requiredAttributes.map(function (attribute, idx) {\n    return React.createElement(TextField, {\n      fullWidth: true,\n      key: attribute,\n      name: attribute,\n      className: classes.textField,\n      placeholder: placeholders[idx],\n      type: \"text\",\n      margin: \"normal\",\n      onChange: handleInputChange\n    });\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\"\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: change,\n    className: \"enterAction\"\n  }, \"Change\")));\n};\n\nRequireNewPassword.propTypes = {\n  change: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  requiredAttributes: PropTypes.array,\n  placeholders: PropTypes.array\n};\nexport default RequireNewPassword;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport PhoneIcon from '@material-ui/icons/Phone';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\nvar RADIO = {\n  EMAIL: 0,\n  PHONE: 1\n};\n\nvar VerifyContact = function VerifyContact(_ref) {\n  var onBack = _ref.onBack,\n      hasEmail = _ref.hasEmail,\n      hasPhone = _ref.hasPhone,\n      handleSkip = _ref.handleSkip,\n      handleVerify = _ref.handleVerify,\n      handleSubmit = _ref.handleSubmit,\n      handleInputChange = _ref.handleInputChange;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sent = _useState2[0],\n      setSent = _useState2[1];\n\n  var _useState3 = useState(RADIO.EMAIL),\n      _useState4 = _slicedToArray(_useState3, 2),\n      radioVal = _useState4[0],\n      setRadioVal = _useState4[1];\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, !sent && React.createElement(React.Fragment, null, React.createElement(Typography, null, \"Verify your Contact\"), React.createElement(Typography, null, \"Account recovery requires verified contact information\"), React.createElement(Tabs, {\n    className: classes.switch,\n    indicatorColor: \"primary\",\n    value: radioVal,\n    onChange: function onChange(e, val) {\n      return setRadioVal(val);\n    },\n    textColor: \"primary\",\n    centered: true\n  }, React.createElement(Tab, {\n    icon: React.createElement(EmailIcon, null),\n    label: \"Email\"\n  }), React.createElement(Tab, {\n    icon: React.createElement(PhoneIcon, null),\n    label: \"Phone\"\n  })), radioVal === RADIO.EMAIL && React.createElement(TextField, {\n    id: \"email\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Email Address\",\n    className: classes.textField,\n    onChange: handleInputChange,\n    margin: \"normal\"\n  }), radioVal === RADIO.PHONE && React.createElement(TextField, {\n    id: \"phonenum\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Phone Number\",\n    className: classes.textField,\n    onChange: handleInputChange,\n    margin: \"normal\"\n  })), sent && React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Code\",\n    className: classes.textField,\n    placeholder: \"Code\",\n    key: \"code\",\n    name: \"code\",\n    autoComplete: \"off\",\n    onChange: handleInputChange,\n    margin: \"normal\"\n  }), sent && React.createElement(TextField, {\n    id: \"newpassword\",\n    fullWidth: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    autoComplete: \"current-password\",\n    margin: \"normal\"\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: function onClick() {\n      sent ? setSent(false) : onBack();\n    }\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: function onClick() {\n      return setSent(true);\n    }\n  }, \"Send Code\")), React.createElement(CheckEmailMsg, {\n    open: sent,\n    onResend: function onResend() {\n      return setSent(true);\n    }\n  }));\n};\n\nVerifyContact.defaultProps = {\n  hasEmail: true\n};\nVerifyContact.propTypes = {\n  onBack: PropTypes.func,\n  hasEmail: PropTypes.bool,\n  hasPhone: PropTypes.bool,\n  handleInputChange: PropTypes.func.isRequired,\n  handleSkip: PropTypes.func.isRequired,\n  handleVerify: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired\n};\nexport default VerifyContact;","export var utils = require('./utils');\nexport var CosmosBlackBackground = require('./CosmosBlackBackground').default;\nexport var MaterialUIWrap = require('./MaterialUIWrap').default;\nexport var LoadFakeData = require('./LoadFakeData').default;\nexport var withContext = require('./withContext').default;","import React from 'react';\nimport AuthContainer from './AuthContainer';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport ConfirmSignIn from './ConfirmSignIn';\nimport ConfirmSignUp from './ConfirmSignUp';\nimport ForgotPassword from './ForgotPassword';\nimport Loading, { LoadingWrapped } from './Loading';\nimport RequireNewPassword from './RequireNewPassword';\nimport VerifyContact from './VerifyContact';\nimport { MaterialUIWrap } from '@morphoto/client-mock';\nimport log from 'loglevel';\n\nvar wrap = function wrap(Wrapper, props) {\n  return function () {\n    return React.createElement(MaterialUIWrap, {\n      noTheme: true\n    }, React.createElement(AuthContainer, null, Wrapper && React.createElement(Wrapper, props)));\n  };\n};\n\nexport default {\n  'Auth: container': wrap(),\n  'Auth: signIn': wrap(SignIn, {\n    authState: 'signIn',\n    loading: false,\n    federated: {\n      google_client_id: 'garbage'\n    },\n    handleBeAnonymous: function handleBeAnonymous() {\n      return alert('handleBeAnonymous');\n    },\n    handleForgotPassword: function handleForgotPassword() {\n      return alert('Forgot Password');\n    },\n    handleSignup: function handleSignup() {\n      return alert('Goto Signup');\n    },\n    handleInputChange: function handleInputChange() {\n      return log.info('inputchange');\n    },\n    handleSignIn: function handleSignIn() {\n      return alert('Sign In');\n    }\n  }),\n  'Auth: signUp': wrap(SignUp, {\n    handleInputChange: function handleInputChange() {\n      return log.info('inputchange');\n    },\n    signUpFields: [{\n      key: 'keyA',\n      type: 'text',\n      required: true\n    }, {\n      key: 'keyB',\n      type: 'number'\n    }, {\n      key: 'phone_number'\n    }],\n    signUpFieldLabels: ['Label for Text Field A', 'Label for Number Field B', 'Label for Phonenum Field C'],\n    signUpFieldPlaceholders: ['Placeholder for Field A', 'Placeholder for Field B', 'Placeholder for Field C'],\n    handleSignup: function handleSignup() {\n      return alert('Sign Up');\n    },\n    handleBack: function handleBack() {\n      return alert('Back');\n    },\n    countryDialCodes: ['+1', '+999'],\n    defaultDialCode: '+1'\n  }),\n  'Auth: confirmSignIn': wrap(ConfirmSignIn, {\n    handleInputChange: function handleInputChange(data) {\n      return log.info('handleInputChange', data);\n    },\n    handleBack: function handleBack(data) {\n      return log.info('handleBack', data);\n    },\n    handleConfirm: function handleConfirm(data) {\n      return log.info('handleConfirm', data);\n    }\n  }),\n  'Auth: confirmSignUp': wrap(ConfirmSignUp, {\n    handleInputChange: function handleInputChange(data) {\n      return log.info('handleInputChange', data);\n    },\n    handleBack: function handleBack(data) {\n      return log.info('handleBack', data);\n    },\n    handleResend: function handleResend(data) {\n      return log.info('handleResend', data);\n    },\n    handleConfirm: function handleConfirm(data) {\n      return log.info('handleConfirm', data);\n    }\n  }),\n  'Auth: ForgotPassword': wrap(ForgotPassword, {\n    handleSubmit: function handleSubmit(data) {\n      return log.info('handleSubmit', data);\n    },\n    handleInputChange: function handleInputChange(data) {\n      return log.info('handleInputChange', data);\n    },\n    handleSendCode: function handleSendCode(data) {\n      return log.info('handleSendCode', data);\n    },\n    handleBack: function handleBack(data) {\n      return log.info('handleBack', data);\n    }\n  }),\n  'Auth: RequireNewPassword': wrap(RequireNewPassword, {\n    change: function change() {\n      return alert('change');\n    },\n    handleInputChange: function handleInputChange() {\n      return log.info('handleInputChange');\n    },\n    requiredAttributes: ['attribA'],\n    placeholders: ['placeholder for attribA']\n  }),\n  'Auth: Loading': wrap(Loading, {}),\n  'Auth: LoadingWrapped': React.createElement(MaterialUIWrap, {\n    noTheme: true\n  }, React.createElement(LoadingWrapped, {\n    message: \"Something is happening...\"\n  })),\n  'Auth: VerifyContact': wrap(VerifyContact, {\n    hasEmail: true,\n    hasPhone: true\n  })\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport Auth from '@aws-amplify/auth';\nimport { I18n, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport countryDialCodes from 'aws-amplify-react/lib/Auth/common/country-dial-codes';\nimport { Authenticator, SignIn as SignInOrig, SignUp as SignUpOrig, ConfirmSignIn as ConfirmSignInOrig, ConfirmSignUp as ConfirmSignUpOrig, RequireNewPassword as RequireNewPasswordOrig, Loading as LoadingOrig, VerifyContact as VerifyContactOrig, ForgotPassword as ForgotPasswordOrig } from 'aws-amplify-react';\nimport CompSignIn from './SignIn';\nimport AuthContainer from './AuthContainer';\nimport CompConfirmSignIn from './ConfirmSignIn';\nimport CompRequireNewPassword from './RequireNewPassword';\nimport CompSignUp from './SignUp';\nimport CompLoading from './Loading';\nimport CompConfirmSignUp from './ConfirmSignUp';\nimport CompForgotPassword from './ForgotPassword';\nimport { config } from '@morphoto/client-common';\nimport log from 'loglevel';\nAuth.configure(config.aws);\nvar defaultAuthState = {\n  authState: 'init',\n  authData: {},\n  signedIn: null\n};\nvar signUpConfig = {\n  header: 'My Customized Sign Up',\n  hiddenDefaults: ['username', 'email', 'phone_number', 'password'],\n  defaultCountryCode: '1',\n  signUpFields: [{\n    label: 'My user name',\n    key: 'username',\n    required: true,\n    displayOrder: 1,\n    type: 'string'\n  }, {\n    label: 'Password',\n    key: 'password',\n    required: true,\n    displayOrder: 3,\n    type: 'password'\n  }, {\n    label: 'Email',\n    key: 'email',\n    required: true,\n    displayOrder: 2,\n    type: 'string'\n  }]\n};\n\nvar useAuthentication = function useAuthentication() {\n  var _useState = useState(defaultAuthState),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      authState = _useState2$.authState,\n      authData = _useState2$.authData,\n      signedIn = _useState2$.signedIn,\n      setAuth = _useState2[1];\n\n  var handleAuthStateChange = function handleAuthStateChange(state, data) {\n    setAuth({\n      authState: state,\n      authData: data,\n      signedIn: !state || state.length === 0 ? null : state === 'signedIn' ? true : signedIn\n    });\n  };\n\n  var getCurrentToken = function getCurrentToken() {\n    var currSession;\n    return _regeneratorRuntime.async(function getCurrentToken$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Auth.currentSession());\n\n          case 2:\n            currSession = _context.sent;\n            log.info('here', currSession.accessToken);\n            return _context.abrupt(\"return\", currSession && currSession.accessToken ? currSession.accessToken : null);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var signOut = function signOut() {\n    return Auth.signOut().then(function (data) {\n      return log.info(data);\n    }).catch(function (err) {\n      return log.info(err);\n    });\n  };\n\n  var beAnonymous = function beAnonymous() {\n    setAuth({\n      authState: authState,\n      authData: authData,\n      signedIn: false\n    });\n  };\n\n  var authScreen = signedIn ? null : React.createElement(AuthContainer, null, React.createElement(Authenticator, {\n    onStateChange: handleAuthStateChange,\n    hideDefault: true,\n    signUpConfig: signUpConfig\n  }, React.createElement(SignIn, {\n    handleBeAnonymous: beAnonymous\n  }), React.createElement(Loading, {\n    message: \"Logging in\"\n  }), React.createElement(RequireNewPassword, null), React.createElement(ConfirmSignIn, null), React.createElement(ConfirmSignUp, null), React.createElement(VerifyContactOrig, null), React.createElement(ForgotPassword, null), React.createElement(SignUp, {\n    signUpConfig: signUpConfig\n  })));\n  var isGod = false;\n\n  try {\n    isGod = authData.signInUserSession.idToken.payload['cognito:groups'].indexOf('GodUsers') > -1;\n  } catch (e) {}\n\n  return {\n    authState: authState,\n    authData: authData,\n    isGod: isGod,\n    signOut: signOut,\n    getCurrentToken: getCurrentToken,\n    forceSignIn: function forceSignIn() {\n      return setAuth(defaultAuthState);\n    },\n    signedIn: signedIn,\n    authScreen: authScreen\n  };\n};\n\nexport default useAuthentication;\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_SignInOrig) {\n  _inherits(SignIn, _SignInOrig);\n\n  function SignIn() {\n    _classCallCheck(this, SignIn);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignIn).apply(this, arguments));\n  }\n\n  _createClass(SignIn, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this = this;\n\n      var loading = this.state.loading;\n\n      var newProps = _objectSpread({}, this.props, {\n        loading: loading,\n        handleForgotPassword: function handleForgotPassword() {\n          return _this.changeState('forgotPassword');\n        },\n        handleSignup: function handleSignup() {\n          return _this.changeState('signUp');\n        },\n        handleInputChange: this.handleInputChange,\n        handleSignIn: this.signIn\n      });\n\n      return React.createElement(CompSignIn, newProps);\n    }\n  }]);\n\n  return SignIn;\n}(SignInOrig);\n\nvar SignUp =\n/*#__PURE__*/\nfunction (_SignUpOrig) {\n  _inherits(SignUp, _SignUpOrig);\n\n  function SignUp() {\n    _classCallCheck(this, SignUp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignUp).apply(this, arguments));\n  }\n\n  _createClass(SignUp, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this2 = this;\n\n      var hide = this.props.hide;\n\n      if (hide && hide.includes(SignUp)) {\n        return null;\n      }\n\n      if (this.checkCustomSignUpFields()) {\n        this.signUpFields = this.props.signUpConfig.signUpFields;\n      }\n\n      this.sortFields();\n\n      var newProps = _objectSpread({}, this.props, {\n        countryDialCodes: countryDialCodes,\n        defaultDialCode: this.getDefaultDialCode(),\n        handleInputChange: this.handleInputChange,\n        signUpFields: this.signUpFields,\n        signUpFieldLabels: this.signUpFields.map(function (field) {\n          return I18n.get(field.label);\n        }),\n        signUpFieldPlaceholders: this.signUpFields.map(function (field) {\n          return I18n.get(field.placeholder);\n        }),\n        handleSignup: this.signUp,\n        handleBack: function handleBack() {\n          return _this2.changeState('signIn');\n        }\n      });\n\n      return React.createElement(CompSignUp, newProps);\n    }\n  }]);\n\n  return SignUp;\n}(SignUpOrig);\n\nvar ConfirmSignIn =\n/*#__PURE__*/\nfunction (_ConfirmSignInOrig) {\n  _inherits(ConfirmSignIn, _ConfirmSignInOrig);\n\n  function ConfirmSignIn() {\n    _classCallCheck(this, ConfirmSignIn);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ConfirmSignIn).apply(this, arguments));\n  }\n\n  _createClass(ConfirmSignIn, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this3 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this3.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm\n      });\n\n      return React.createElement(CompConfirmSignIn, newProps);\n    }\n  }]);\n\n  return ConfirmSignIn;\n}(ConfirmSignInOrig);\n\nvar ConfirmSignUp =\n/*#__PURE__*/\nfunction (_ConfirmSignUpOrig) {\n  _inherits(ConfirmSignUp, _ConfirmSignUpOrig);\n\n  function ConfirmSignUp() {\n    _classCallCheck(this, ConfirmSignUp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ConfirmSignUp).apply(this, arguments));\n  }\n\n  _createClass(ConfirmSignUp, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this4 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this4.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm,\n        handleResend: this.resend\n      });\n\n      return React.createElement(CompConfirmSignUp, newProps);\n    }\n  }]);\n\n  return ConfirmSignUp;\n}(ConfirmSignUpOrig);\n\nvar RequireNewPassword =\n/*#__PURE__*/\nfunction (_RequireNewPasswordOr) {\n  _inherits(RequireNewPassword, _RequireNewPasswordOr);\n\n  function RequireNewPassword() {\n    _classCallCheck(this, RequireNewPassword);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RequireNewPassword).apply(this, arguments));\n  }\n\n  _createClass(RequireNewPassword, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var user = this.props.authData;\n      var requiredAttributes = user.challengeParam.requiredAttributes;\n      var placeholders = Array.isArray(requiredAttributes) ? requiredAttributes.map(function (attribute) {\n        return I18n.get(convertToPlaceholder(attribute));\n      }) : [];\n\n      var newProps = _objectSpread({}, this.props, {\n        handleInputChange: this.handleInputChange,\n        requiredAttributes: requiredAttributes,\n        placeholders: placeholders,\n        change: this.change\n      });\n\n      return React.createElement(CompRequireNewPassword, newProps);\n    }\n  }]);\n\n  return RequireNewPassword;\n}(RequireNewPasswordOrig);\n\nvar Loading =\n/*#__PURE__*/\nfunction (_LoadingOrig) {\n  _inherits(Loading, _LoadingOrig);\n\n  function Loading() {\n    _classCallCheck(this, Loading);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Loading).apply(this, arguments));\n  }\n\n  _createClass(Loading, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      return React.createElement(CompLoading, this.props);\n    }\n  }]);\n\n  return Loading;\n}(LoadingOrig);\n\nvar ForgotPassword =\n/*#__PURE__*/\nfunction (_ForgotPasswordOrig) {\n  _inherits(ForgotPassword, _ForgotPasswordOrig);\n\n  function ForgotPassword() {\n    _classCallCheck(this, ForgotPassword);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ForgotPassword).apply(this, arguments));\n  }\n\n  _createClass(ForgotPassword, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this5 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this5.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm,\n        handleResend: this.send,\n        handleSubmit: this.submit,\n        handleSendCode: this.send\n      });\n\n      return React.createElement(CompForgotPassword, newProps);\n    }\n  }]);\n\n  return ForgotPassword;\n}(ForgotPasswordOrig);\n\nvar verifyLogger = new Logger('VerifyContact');\n\nfunction convertToPlaceholder(str) {\n  return str.split('_').map(function (part) {\n    return part.charAt(0).toUpperCase() + part.substr(1).toLowerCase();\n  }).join(' ');\n}","export { default as fixtures } from './auth.fixture';\nexport { default as AuthContainer } from './AuthContainer';\nexport { default as Loading, LoadingWrapped } from './Loading';\nexport { default as SignIn } from './SignIn';\nexport { default as useAuthentication } from './useAuthentication';","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport log from 'loglevel';\n\nvar LoadFakeData = function LoadFakeData(_ref) {\n  var children = _ref.children,\n      delay = _ref.delay,\n      props = _objectWithoutProperties(_ref, [\"children\", \"delay\"]);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      mockData = _useState2[0],\n      setData = _useState2[1];\n\n  var dataRef = useRef();\n  var mountedRef = useRef();\n  dataRef.current = mockData;\n  useEffect(function () {\n    mountedRef.current = true;\n    var dirName = process.env.PUBLIC_URL.split('/').filter(function (d) {\n      return d.length > 0;\n    });\n    var dirPath = dirName.length === 0 ? 'data' : \"\".concat(dirName[0], \"/data\");\n    var finalPath = window.location.protocol + '//' + window.location.host + '/' + dirPath;\n    log.debug('PATH', {\n      finalPath: finalPath,\n      dirName: dirName,\n      protocol: window.location.protocol,\n      host: window.location.host\n    });\n    Object.keys(props).forEach(function (key) {\n      if (dataRef.current && !dataRef.current[key]) {\n        axios(\"\".concat(finalPath, \"/\").concat(props[key])).then(function (result) {\n          if (delay) {\n            log.debug('LoadFakeData::Start loading...');\n            setTimeout(function () {\n              if (!mountedRef.current) return;\n              log.debug('LoadFakeData::Loading done...');\n              setData(_objectSpread({}, dataRef.current, _defineProperty({}, key, result.data)));\n            }, delay);\n          } else {\n            if (!mountedRef.current) return;\n            setData(_objectSpread({}, dataRef.current, _defineProperty({}, key, result.data)));\n          }\n        }).catch(function (err) {\n          log.error('LoadFakeData::I AM AN ERROR', err);\n        });\n      }\n    });\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []);\n  var loaded = Object.keys(mockData).length;\n  var loading = Object.keys(props).length;\n\n  var context = mockData.context,\n      mockProps = _objectWithoutProperties(mockData, [\"context\"]);\n\n  var finalData = loaded !== loading ? {} : mockProps;\n  var finalRender = useMemo(function () {\n    return React.cloneElement(children, _objectSpread({}, children.props, {}, finalData));\n  }, [mockData]);\n  log.debug('LoadFakeData::finalData', finalData);\n  return finalRender;\n};\n\nLoadFakeData.propTypes = {\n  children: PropTypes.node.isRequired,\n  delay: PropTypes.number\n};\nexport default LoadFakeData;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar withContext = function withContext(ContextObj) {\n  var Inner = function Inner(_ref) {\n    var children = _ref.children,\n        props = _objectWithoutProperties(_ref, [\"children\"]);\n\n    return React.createElement(ContextObj.Provider, {\n      value: props\n    }, children);\n  };\n\n  Inner.propTypes = {\n    children: PropTypes.any.isRequired\n  };\n};\n\nexport default withContext;","import React, { useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport { List } from 'react-virtualized';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CircularProgress } from '@material-ui/core';\nimport { useComponentSize, AppContext } from '@morphoto/client-common';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport FeedEnder from './FeedEnder';\nimport FeedItem from './FeedItem';\nvar ROWHEIGHT = 300;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    container: {\n      padding: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1\n    },\n    listContainer: {\n      flexGrow: 1,\n      overflow: 'hidden'\n    },\n    vList: {\n      height: '100%',\n      width: '100%'\n    },\n    feedContainer: {\n      flexGrow: 1,\n      transform: 'translateZ(0)'\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n});\n\nvar MyFeed = function MyFeed(_ref) {\n  var events = _ref.events,\n      loading = _ref.loading,\n      actions = _ref.actions,\n      window = _ref.window;\n  var classes = useStyles();\n  var listRef = useRef();\n\n  var _useComponentSize = useComponentSize(listRef),\n      size = _useComponentSize.size;\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online;\n\n  var rowRenderer = function rowRenderer(_ref2) {\n    var index = _ref2.index,\n        isScrolling = _ref2.isScrolling,\n        isVisible = _ref2.isVisible,\n        key = _ref2.key,\n        parent = _ref2.parent,\n        style = _ref2.style;\n    var row = events[index];\n    var content;\n\n    if (index < events.length && row) {\n      content = React.createElement(FeedItem, {\n        event: events[index],\n        key: \"feedItem-\".concat(events[index]._id),\n        actions: actions\n      });\n    } else if (index === events.length) {\n      var wEnd = window && window[0] === 0;\n      content = React.createElement(FeedEnder, {\n        icon: React.createElement(CircularProgress, {\n          size: 30,\n          thickness: 2,\n          color: \"inherit\"\n        }),\n        text: \"Loading...\"\n      });\n      var almostAtEnd = ROWHEIGHT * 4 + parent.state.scrollTop > style.top;\n\n      if (!online.isOnline) {\n        content = React.createElement(FeedEnder, {\n          icon: React.createElement(ErrorIcon, null),\n          text: \"Cannot Refresh Offline\"\n        });\n      } else if (wEnd) {\n        content = React.createElement(FeedEnder, {\n          text: \"End of feed\"\n        });\n      } else if (!loading && almostAtEnd) {\n        actions.fetchMore();\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: classes.row,\n      key: key,\n      style: style\n    }, content);\n  };\n\n  rowRenderer.propTypes = {\n    index: PropTypes.any,\n    key: PropTypes.any,\n    style: PropTypes.any,\n    isScrolling: PropTypes.any,\n    isVisible: PropTypes.any,\n    parent: PropTypes.any\n  };\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(Typography, {\n    className: classes.grow\n  }, \"Home Feed\")), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, React.createElement(\"div\", {\n    className: classes.listContainer,\n    ref: listRef\n  }, React.createElement(List, {\n    height: size.height,\n    width: size.width,\n    className: classes.vList,\n    rowCount: events.length + 1,\n    rowHeight: ROWHEIGHT,\n    rowRenderer: rowRenderer\n  }))));\n};\n\nMyFeed.propTypes = {\n  events: PropTypes.array.isRequired,\n  loading: PropTypes.bool,\n  window: PropTypes.arrayOf(PropTypes.number),\n  actions: PropTypes.shape({\n    onImageClick: PropTypes.func.isRequired,\n    onProfileClick: PropTypes.func.isRequired,\n    onMapClick: PropTypes.func.isRequired,\n    fetchNewest: PropTypes.func.isRequired,\n    fetchMore: PropTypes.func.isRequired\n  })\n};\nexport default MyFeed;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    text: {\n      textAlign: 'center',\n      fontStyle: 'italic',\n      padding: theme.spacing(2, 1)\n    }\n  };\n});\n\nvar FeedEnder = function FeedEnder(_ref) {\n  var style = _ref.style,\n      icon = _ref.icon,\n      text = _ref.text;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), icon, React.createElement(Typography, {\n    className: classes.text,\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    component: \"div\",\n    style: style\n  }, text), React.createElement(\"div\", {\n    className: classes.grow\n  }));\n};\n\nFeedEnder.propTypes = {\n  style: PropTypes.object,\n  icon: PropTypes.any,\n  text: PropTypes.string\n};\nexport default FeedEnder;","export var CROP_MODES = [{\n  name: 'MATCH',\n  label: 'Match Reference Aspect'\n}, {\n  name: 'FULL',\n  label: 'Full Camera Resolution'\n}];\nexport var recalcRefState = function recalcRefState(previewSize, sensorSize, refImgRatio, cropMode, refImgRef) {\n  var newRefImgRatio = refImgRatio || sensorSize[1] / sensorSize[0];\n  var newPreviewSize = previewSize;\n  var cropModeObj = CROP_MODES[cropMode];\n  var imgScale = 1;\n\n  switch (cropModeObj.name) {\n    case 'MATCH':\n      var naturalWidth = refImgRef.naturalWidth,\n          naturalHeight = refImgRef.naturalHeight,\n          realImgHeight = refImgRef.height;\n\n      if (naturalHeight > 0 && naturalWidth > 0) {\n        imgScale = realImgHeight / naturalHeight;\n        newRefImgRatio = naturalHeight / naturalWidth;\n      }\n\n      newPreviewSize = [Math.round(Math.min(naturalHeight * imgScale / newRefImgRatio, sensorSize[0])), Math.round(Math.min(naturalWidth * imgScale * newRefImgRatio, sensorSize[1]))];\n      break;\n\n    case 'FULL':\n      imgScale = Math.min(window.innerHeight, window.innerWidth) / Math.min(sensorSize[0], sensorSize[1]);\n      newPreviewSize = [Math.round(sensorSize[0] * imgScale), Math.round(sensorSize[1] * imgScale)];\n      break;\n\n    default:\n      break;\n  }\n\n  return {\n    newRefImgRatio: newRefImgRatio,\n    newPreviewSize: newPreviewSize\n  };\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useLayoutEffect, useRef, useMemo, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Fab from '@material-ui/core/Fab';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport CameraIcon from '@material-ui/icons/Camera';\nimport CropIcon from '@material-ui/icons/Crop';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { RawImage, PhotoGrid, PhotoFadeSlider } from '@morphoto/photos';\nimport { useCamera } from '@morphoto/client-common';\nimport { CROP_MODES, recalcRefState } from './cameraHelpers';\nimport style from './CameraTool.style';\nvar useStyles = makeStyles(style);\n\nvar CameraTool = function CameraTool(_ref) {\n  var onCancel = _ref.onCancel,\n      onShutter = _ref.onShutter,\n      defaultRefPhotoId = _ref.defaultRefPhotoId,\n      photos = _ref.photos;\n  var classes = useStyles();\n\n  var _useState = useState(50),\n      _useState2 = _slicedToArray(_useState, 2),\n      slider = _useState2[0],\n      setSlider = _useState2[1];\n\n  var _useState3 = useState(defaultRefPhotoId ? 0 : 1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cropMode = _useState4[0],\n      setCropMode = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      imgRatio = _useState6[0],\n      setImgRatio = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      previewSize = _useState8[0],\n      setPreviewSize = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      cropSnack = _useState10[0],\n      setCropSnack = _useState10[1];\n\n  var snackTimer = useRef();\n  var refImgRef = useRef();\n  var rotClass = imgRatio && imgRatio > 1 ? classes.portraitRef : classes.landscapeRef;\n\n  var _useState11 = useState(defaultRefPhotoId),\n      _useState12 = _slicedToArray(_useState11, 2),\n      refPhotoId = _useState12[0],\n      setRefPhotoId = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      drawerOpen = _useState14[0],\n      setDrawerOpen = _useState14[1];\n\n  var incrementCropMode = useCallback(function () {\n    var newCropMode = (cropMode + 1) % CROP_MODES.length;\n    setCropMode(newCropMode);\n  }, [cropMode]);\n\n  var _useCamera = useCamera(function (data) {\n    return onShutter(data, refPhotoId || null);\n  }, previewSize),\n      cameraError = _useCamera.cameraError,\n      captureImage = _useCamera.captureImage,\n      cameraOnline = _useCamera.cameraOnline,\n      sensorSize = _useCamera.sensorSize;\n\n  useEffect(function () {\n    if (!cameraOnline) return;\n    if (snackTimer.current) clearTimeout(snackTimer.current);\n    setCropSnack(true);\n    snackTimer.current = setTimeout(function () {\n      return setCropSnack(false);\n    }, 1000);\n    recalcRefImg();\n  }, [cropMode, cameraOnline]);\n  useEffect(function () {\n    if (sensorSize && !previewSize) recalcRefImg();\n  }, [sensorSize]);\n  var refPhoto = useMemo(function () {\n    return photos.find(function (p) {\n      return p.id === refPhotoId;\n    });\n  }, [refPhotoId]);\n\n  var recalcRefImg = function recalcRefImg() {\n    if (!sensorSize) return;\n    var cropModeUse = refImgRef.current ? cropMode : CROP_MODES.findIndex(function (cm) {\n      return cm.name === 'FULL';\n    });\n    var newState = recalcRefState(previewSize, sensorSize, imgRatio, cropModeUse, refImgRef.current);\n    if (newState.newRefImgRatio !== imgRatio) setImgRatio(newState.newRefImgRatio);\n    if (newState.newPreviewSize !== previewSize) setPreviewSize(newState.newPreviewSize);\n  };\n\n  useEffect(function () {\n    setCropMode(defaultRefPhotoId ? 0 : 1);\n    setRefPhotoId(defaultRefPhotoId);\n  }, [defaultRefPhotoId]);\n\n  var handleTileClick = function handleTileClick(id) {\n    setRefPhotoId(photos.find(function (p) {\n      return p.id === id;\n    } || {}).id);\n    setDrawerOpen(false);\n    setCropMode(0);\n  };\n\n  useLayoutEffect(function () {\n    window.addEventListener('resize', recalcRefImg);\n    window.addEventListener('orientationchange', recalcRefImg);\n    return function () {\n      window.removeEventListener('resize', recalcRefImg);\n      window.removeEventListener('orientationchange', recalcRefImg);\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), !cameraError && Boolean(refPhotoId) && React.createElement(PhotoFadeSlider, {\n    className: classes.slider,\n    defaultValue: slider,\n    onChange: setSlider\n  }), cameraError && React.createElement(\"div\", {\n    className: classes.cameraErrorText\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\"\n  }, \"No Camera Access\"), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, \"Please enabled access in your settings.\")), Boolean(refPhotoId) && React.createElement(\"div\", {\n    className: classNames(classes.reference, rotClass)\n  }, React.createElement(RawImage, {\n    imgRef: refImgRef,\n    onLoad: recalcRefImg,\n    sizePriority: ['large', 'medium', 'thumb'],\n    style: {\n      opacity: 1 - slider / 100\n    },\n    photo: refPhoto\n  })), !cameraError && React.createElement(\"video\", {\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    id: \"webcam\",\n    width: window.innerWidth,\n    height: window.innerHeight,\n    className: classes.video\n  }), React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"Take Photo\",\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: cameraError || !cameraOnline,\n    className: classNames(classes.cameraFab, classes.buttonFab),\n    onClick: function onClick() {\n      return captureImage(imgRatio);\n    }\n  }, React.createElement(CameraIcon, {\n    className: classes.cameraIcon\n  })), React.createElement(Fab, {\n    \"aria-label\": \"Crop Toggle\",\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: cameraError || !cameraOnline || !refPhotoId,\n    className: classNames(classes.cropFab, classes.buttonFab),\n    onClick: incrementCropMode\n  }, React.createElement(CropIcon, {\n    className: classes.cropIcon\n  })), React.createElement(Fab, {\n    color: \"secondary\",\n    \"aria-label\": \"cancel\",\n    className: classNames(classes.cancelFab, classes.buttonFab),\n    onClick: onCancel,\n    classes: {\n      disabled: classes.disabledFab\n    }\n  }, React.createElement(CancelIcon, {\n    className: classes.cancelIcon\n  })), photos && React.createElement(Fab, {\n    \"aria-label\": \"library\",\n    className: classNames(classes.libraryFab, classes.buttonFab),\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: !photos || photos.length === 0,\n    onClick: function onClick() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    className: classes.libraryIcon\n  })), photos && React.createElement(SwipeableDrawer, {\n    anchor: \"left\",\n    open: drawerOpen,\n    classes: {\n      paperAnchorLeft: classes.swipeDrawer\n    },\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: classes.swipeDrawerContainer,\n    role: \"button\",\n    onClick: function onClick() {\n      return setDrawerOpen(false);\n    },\n    onKeyDown: function onKeyDown() {\n      return setDrawerOpen(false);\n    }\n  }, React.createElement(PhotoGrid, {\n    multiSelect: false,\n    columns: 1,\n    photos: photos,\n    onTileClick: handleTileClick\n  }))), React.createElement(Snackbar, {\n    open: cropSnack,\n    className: classes.cropSnack,\n    disableWindowBlurListener: true\n  }, React.createElement(SnackbarContent, {\n    classes: {\n      root: classes.cropSnackContent\n    },\n    message: CROP_MODES[cropMode].label\n  })));\n};\n\nCameraTool.propTypes = {\n  defaultRefPhotoId: PropTypes.string,\n  onCancel: PropTypes.func.isRequired,\n  onShutter: PropTypes.func.isRequired,\n  photos: PropTypes.array\n};\nexport default CameraTool;","import { green, blue } from '@material-ui/core/colors';\nexport default (function (theme) {\n  return {\n    root: {\n      background: 'black',\n      height: '100%',\n      width: '100%'\n    },\n    cameraErrorText: {\n      color: 'white',\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      width: '90%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      textAlign: 'center'\n    },\n    disabledFab: {\n      color: '#AAAAA!important',\n      background: '#DDDDDD!important',\n      opacity: 0.2\n    },\n    cameraFab: {\n      position: 'absolute',\n      color: green[500],\n      background: 'white',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '20px',\n        top: '50%',\n        transform: 'translateY(-50%)',\n        height: '25vh',\n        width: '25vh',\n        maxHeight: '100px',\n        maxWidth: '100px'\n      },\n      '@media (orientation: portrait)': {\n        bottom: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        height: '25vw',\n        width: '25vw',\n        maxHeight: '100px',\n        maxWidth: '100px'\n      }\n    },\n    slider: {\n      position: 'absolute',\n      '@media (orientation: landscape)': {\n        height: '80%',\n        bottom: '0%'\n      },\n      '@media (orientation: portrait)': {\n        left: '0',\n        transform: 'translateY(-50%)',\n        height: '75%',\n        top: '50%'\n      }\n    },\n    cameraIcon: {\n      height: '100%',\n      width: '100%'\n    },\n    cancelFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        top: '15px'\n      },\n      '@media (orientation: portrait)': {\n        right: '15px',\n        bottom: '15px'\n      }\n    },\n    cancelIcon: {\n      height: '100%',\n      width: '100%'\n    },\n    swipeDrawer: {\n      width: '50%'\n    },\n    libraryFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        left: '15px',\n        top: '15px'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        top: '15px'\n      }\n    },\n    cropFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        bottom: '15px'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        bottom: '15px'\n      }\n    },\n    myLocationFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        bottom: '15px'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        bottom: '15px'\n      }\n    },\n    myLocationIcon: {\n      height: '80%',\n      width: '80%'\n    },\n    captured: {},\n    reference: {\n      position: 'absolute',\n      zIndex: 2,\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    cropSnack: {\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    cropSnackPaper: {\n      border: '2px solid red'\n    },\n    cropSnackContent: {\n      background: 'black',\n      border: '2px solid white',\n      textAlign: 'center',\n      color: 'white',\n      '&>*': {\n        width: '100%'\n      }\n    },\n    video: {\n      position: 'absolute',\n      zIndex: 1,\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    portraitRef: {\n      '@media (orientation: landscape)': {\n        height: '100vw',\n        width: '100vh',\n        transform: 'rotate(90deg)',\n        transformOrigin: '0 0',\n        position: 'absolute',\n        left: '100%'\n      }\n    },\n    landscapeRef: {\n      '@media (orientation: portrait)': {\n        height: '100vw',\n        width: '100vh',\n        transform: 'rotate(90deg)',\n        transformOrigin: '0 0',\n        position: 'absolute',\n        left: '100%'\n      }\n    }\n  };\n});","import jsQR from 'jsqr';\nexport var jsQRFromBlob = function jsQRFromBlob(_ref) {\n  var data = _ref.data,\n      imageHeight = _ref.imageHeight,\n      imageWidth = _ref.imageWidth;\n  return new Promise(function (resolve, reject) {\n    try {\n      var qrCode = jsQR(data, imageWidth, imageHeight);\n      resolve(qrCode);\n    } catch (e) {\n      reject(e);\n    }\n  });\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { green, red } from '@material-ui/core/colors';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { QRCode as QRcodeIcon } from '@morphoto/icons';\nimport { jsQRFromBlob } from './QRUtil';\nimport { useCamera } from '@morphoto/client-common';\nimport log from 'loglevel';\nvar CAMERAWIDTH = 400;\nvar CAMERAHEIGHT = 400;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column'\n    },\n    qrIcon: {\n      border: '5px solid red',\n      padding: theme.spacing(2),\n      position: 'absolute',\n      color: 'white',\n      opacity: 0.4,\n      zIndex: 2,\n      width: '70%',\n      height: '70%',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    backupText: {\n      position: 'absolute',\n      color: 'white',\n      textAlign: 'center',\n      zIndex: 2,\n      width: '70%',\n      height: '70%',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    manualImg: {\n      position: 'absolute',\n      zIndex: 1\n    },\n    appBar: {},\n    inner: {\n      padding: theme.spacing(2),\n      height: '100%',\n      flexGrow: 1,\n      overflow: 'hidden'\n    },\n    tipPaper: {\n      padding: theme.spacing(2),\n      margin: theme.spacing(2)\n    },\n    docContainer: {\n      flexGrow: 1,\n      padding: theme.spacing(2)\n    },\n    cameraContainer: {\n      width: '80%',\n      margin: '0 auto',\n      position: 'relative',\n      '&::before': {\n        content: '\" \"',\n        display: 'block',\n        paddingTop: '100%'\n      }\n    },\n    cameraContainerError: {\n      background: 'black'\n    },\n    snackErr: {\n      background: red[500],\n      color: 'white'\n    },\n    snackSuccess: {\n      background: green[500],\n      color: 'white'\n    },\n    snackMsg: {},\n    video: {\n      height: '100%',\n      width: '100%',\n      verticalAlign: 'top',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 1\n    }\n  };\n});\n\nvar QRReader = function QRReader(_ref) {\n  var onMenuBack = _ref.onMenuBack,\n      onCapture = _ref.onCapture,\n      isIos = _ref.isIos;\n  var classes = useStyles();\n  var intervalRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      err = _useState2[0],\n      setErr = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      code = _useState4[0],\n      setCode = _useState4[1];\n\n  var readBlob = useCallback(function _callee(blob) {\n    var scannedCode, find, foundIdx, newData, decodedUrl;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            scannedCode = null;\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(jsQRFromBlob(blob));\n\n          case 4:\n            scannedCode = _context.sent;\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](1);\n            log.error(_context.t0);\n\n          case 10:\n            _context.prev = 10;\n\n            if (!(cameraError && !scannedCode)) {\n              _context.next = 13;\n              break;\n            }\n\n            throw new Error('Captured Image does not have a QR code');\n\n          case 13:\n            if (!scannedCode) {\n              _context.next = 24;\n              break;\n            }\n\n            find = '?fromqr=';\n            foundIdx = scannedCode.data.indexOf(find) + find.length;\n            newData = scannedCode.data.slice(foundIdx);\n            decodedUrl = JSON.parse(decodeURI(newData));\n\n            if (!(!decodedUrl.type || !decodedUrl.s)) {\n              _context.next = 20;\n              break;\n            }\n\n            throw new Error('Type or SeriesID missing from QR Code');\n\n          case 20:\n            setCode(decodedUrl);\n            if (intervalRef.current) clearInterval(intervalRef.current);\n            if (err) setErr(null);\n            log.info('QRCODE', scannedCode, decodedUrl);\n\n          case 24:\n            _context.next = 30;\n            break;\n\n          case 26:\n            _context.prev = 26;\n            _context.t1 = _context[\"catch\"](10);\n            if (!err) setErr('Not a valid QR Code');\n            log.error(_context.t1);\n\n          case 30:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 7], [10, 26]]);\n  });\n\n  var _useCamera = useCamera(readBlob, [CAMERAWIDTH, CAMERAHEIGHT]),\n      cameraError = _useCamera.cameraError,\n      captureRawData = _useCamera.captureRawData,\n      cameraOnline = _useCamera.cameraOnline;\n\n  useEffect(function () {\n    if (cameraOnline && captureRawData && !cameraError) {\n      intervalRef.current = setInterval(captureRawData, 100);\n    }\n\n    return function () {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [cameraOnline, cameraError]);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Capture QR Code\"))), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(Paper, {\n    className: classNames(classes.cameraContainer, cameraError ? classes.cameraContainerError : null)\n  }, React.createElement(QRcodeIcon, {\n    className: classes.qrIcon\n  }), React.createElement(\"video\", {\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    id: \"webcam\",\n    className: classes.video\n  })), React.createElement(Paper, {\n    className: classes.tipPaper\n  }, React.createElement(Typography, null, \"TIP: You can find the QR code for a series in the SHARE tab of that series\"))), React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: !!err,\n    autoHideDuration: 2000,\n    onClose: function onClose() {\n      setErr(null);\n    }\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackErr,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, err)\n  })), !isIos && React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: cameraError\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackErr,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, \"Camera Error. Check your device's permissions\")\n  })), React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: !!code,\n    autoHideDuration: 500,\n    onClose: function onClose() {\n      return onCapture(code.type, code.s, code.p);\n    }\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackSuccess,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, \"Valid QR Code found!\")\n  })));\n};\n\nQRReader.propTypes = {\n  onMenuBack: PropTypes.func.isRequired,\n  isIos: PropTypes.bool.isRequired,\n  onCapture: PropTypes.func.isRequired\n};\nexport default QRReader;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, Link } from '@material-ui/core';\nimport QRCode from 'qrcode';\nimport { config } from '@morphoto/client-common';\nimport { createShareUrl } from '@morphoto/common';\nimport log from 'loglevel';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    qrPaper: {\n      textAlign: 'center',\n      padding: theme.spacing(0, 2)\n    },\n    qrCode: {\n      width: '100%',\n      minHeight: 300,\n      maxHeight: 400\n    }\n  };\n});\n\nvar QRDisplay = function QRDisplay(_ref) {\n  var onClose = _ref.onClose,\n      open = _ref.open,\n      series = _ref.series,\n      photoId = _ref.photoId;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      qrCodeEl = _useState2[0],\n      setQRCodeEl = _useState2[1];\n\n  var _createShareUrl = createShareUrl(config.endpoints.share, series, photoId),\n      url = _createShareUrl.url,\n      ogShare = _createShareUrl.ogShare;\n\n  var canShare = ['OPEN', 'PUBLIC'].indexOf(series.access) > -1;\n  useLayoutEffect(function () {\n    QRCode.toString(url, function (err, svgStr) {\n      if (err) log.error(err);else setQRCodeEl(svgStr);\n    });\n  }, [series]);\n  useLayoutEffect(function () {\n    if (navigator.share && open && canShare) {\n      var text = 'MorPhoto Series';\n      if (series.note) text = series.note.length > 100 ? series.note.slice(100) + '...' : series.note;\n      navigator.share({\n        title: series.name,\n        text: text,\n        url: ogShare\n      }).then(function () {\n        return log.info('Successful share');\n      }).catch(function (error) {\n        return log.info('Error sharing', error);\n      });\n    }\n  }, [open]);\n  return React.createElement(Dialog, {\n    open: open,\n    fullWidth: true,\n    onClose: onClose,\n    className: classes.root\n  }, React.createElement(DialogTitle, {\n    className: classes.title\n  }, series.name), React.createElement(Paper, {\n    className: classes.qrPaper\n  }, canShare ? React.createElement(\"svg\", {\n    className: classes.qrCode,\n    dangerouslySetInnerHTML: {\n      __html: qrCodeEl\n    }\n  }) : React.createElement(Typography, {\n    variant: \"overline\",\n    color: \"error\"\n  }, \"You cannot share a private series.\"), canShare && React.createElement(Link, {\n    href: url\n  }, \"Share Link\"), series.coords && React.createElement(Typography, {\n    component: \"div\",\n    className: classes.coords,\n    variant: \"overline\"\n  }, \"coords: [ \", series.coords[0], \", \", series.coords[1], \" ]\")));\n};\n\nQRDisplay.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  series: PropTypes.object.isRequired,\n  photoId: PropTypes.string\n};\nexport default QRDisplay;","export { default as CameraTool } from './CameraTool';\nexport { default as QRReader } from './QRReader';\nexport { default as QRDisplay } from './QRDisplay';","export default {\n  s3Upload: require('./s3Upload').default,\n  graphql: {\n    APOLLOSTATES: require('./graphql/useGraphQL').APOLLOSTATES,\n    useGraphQL: require('./graphql/useGraphQL').default,\n    mutations: {\n      createPhoto: require('./graphql/mutations/createPhoto').default,\n      createSeries: require('./graphql/mutations/createSeries').default,\n      deletePhoto: require('./graphql/mutations/deletePhoto').default,\n      deleteSeries: require('./graphql/mutations/deleteSeries').default,\n      unwatch: require('./graphql/mutations/unwatch').default,\n      updatePhoto: require('./graphql/mutations/updatePhoto').default,\n      updateSeries: require('./graphql/mutations/updateSeries').default,\n      watch: require('./graphql/mutations/watch').default,\n      updateQueries: require('./graphql/mutations/updateQueries')\n    }\n  },\n  offline: require('./offline'),\n  redux: {\n    withReduxProvider: require('./redux/withReduxProvider').default,\n    actions: require('./redux/actions').default\n  }\n};","import datastore from '@morphoto/datastore'\n\nconst getPhotoUrls = async (photo, sizePriority) => {\n  try {\n    // Fist see if we have anything in the indexdb\n    if (photo.uploadToken) {\n      try {\n        const dbKeys = await datastore.offline.imgStore.keys()\n        if (dbKeys.indexOf(photo.uploadToken) > -1) {\n          const blob = await datastore.offline.imgStore.getItem(photo.uploadToken)\n          // log.info('getPhotoUrls:: Found DB Entry. using data.file', blob data)\n          const urlCreator = window.URL || window.webkitURL\n          const imageUrl = urlCreator.createObjectURL(blob)\n          return [imageUrl]\n        }\n      }\n      // If anything in the retrieval fails just fall back\n      catch {}\n    }\n    // now we return the remote URLS if we can\n    return sizePriority.map(sp => `${photo.paths.base}${photo.paths[sp]}`)\n  }\n  catch (e) {\n    return null\n  }\n}\n\nexport default getPhotoUrls\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport { AppLogo } from '@morphoto/icons';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    content: {},\n    messageWrapper: {\n      display: 'flex'\n    },\n    logo: {\n      height: 50,\n      width: 50\n    },\n    paper: {\n      background: theme.palette.text.primary,\n      color: theme.palette.primary.contrastText,\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      boxShadow: \"0 0 0 0 \".concat(theme.palette.primary.main),\n      animation: '$installPulse 2s infinite',\n      padding: theme.spacing(2, 3),\n      width: '100%'\n    },\n    '@keyframes installPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(theme.palette.primary.main)\n      },\n      '50%': {\n        boxShadow: \"0 0 0 0px \".concat(theme.palette.primary.main)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 20px transparent\"\n      }\n    },\n    textWrapper: {\n      flexGrow: 1,\n      paddingLeft: theme.spacing(1)\n    },\n    buttons: {\n      display: 'flex'\n    },\n    spacer: {\n      flexGrow: 1\n    }\n  };\n});\n\nvar InstallPrompt = function InstallPrompt(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      onInstall = _ref.onInstall;\n  var classes = useStyles();\n  return React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: open,\n    onClose: onClose\n  }, React.createElement(Paper, {\n    className: classes.paper,\n    elevation: 24\n  }, React.createElement(\"div\", {\n    id: \"client-snackbar\",\n    className: classes.messageWrapper\n  }, React.createElement(AppLogo, {\n    className: classes.logo\n  }), React.createElement(\"div\", {\n    className: classes.textWrapper\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, \"Install MorPhoto\"), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\",\n    paragraph: true\n  }, \"This app can be installed and used on your device natively and offline if you would like.\"), React.createElement(\"div\", {\n    className: classes.buttons\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: onClose\n  }, \"No thanks\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: onInstall\n  }, \"Install\"))))));\n};\n\nInstallPrompt.propTypes = {\n  open: PropTypes.bool,\n  actions: PropTypes.shape({\n    onClose: PropTypes.func.isRequired,\n    onInstall: PropTypes.func.isRequired\n  })\n};\nexport default InstallPrompt;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { device } from '@morphoto/client-common';\nimport InstallPrompt from './InstallPrompt';\nimport log from 'loglevel';\n\nvar isInStandaloneMode = function isInStandaloneMode() {\n  return 'standalone' in window.navigator && window.navigator.standalone;\n};\n\nvar useShowAddToHome = function useShowAddToHome(showInstall, dismissInstall) {\n  var ios = device.ios;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      deferredPrompt = _useState2[0],\n      setPrompt = _useState2[1];\n\n  var handleBeforePrompt = function handleBeforePrompt(e) {\n    e.preventDefault();\n    setPrompt(e);\n  };\n\n  var installPrompt = useMemo(function () {\n    if (!showInstall || !deferredPrompt) return null;\n    return React.createElement(InstallPrompt, {\n      open: true,\n      onClose: dismissInstall,\n      onInstall: addToHomeScreen\n    });\n  }, [showInstall, deferredPrompt]);\n  useEffect(function () {\n    if (ios && !isInStandaloneMode()) {\n      log.info('I AM on IOS and I am NOT in standalone mode.');\n    }\n\n    window.addEventListener('beforeinstallprompt', handleBeforePrompt);\n    return function () {\n      window.removeEventListener('beforeinstallprompt', handleBeforePrompt);\n    };\n  }, []);\n\n  function addToHomeScreen() {\n    deferredPrompt.prompt();\n    deferredPrompt.userChoice.then(function (choiceResult) {\n      if (choiceResult.outcome === 'accepted') {\n        log.info('User accepted the A2HS prompt');\n        dismissInstall();\n      } else {\n        log.info('User dismissed the A2HS prompt');\n        dismissInstall();\n      }\n\n      setPrompt(null);\n    });\n  }\n\n  return {\n    installPrompt: installPrompt,\n    addToHomeScreen: installPrompt ? addToHomeScreen : null\n  };\n};\n\nexport default useShowAddToHome;","import React, { useMemo, useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { graphql, compose } from 'react-apollo'\nimport datastore from '@morphoto/datastore'\nimport { graphqlAPI } from '@morphoto/common'\nimport { AppContext } from '@morphoto/client-common'\nimport log from 'loglevel'\n\nconst withUploadConnect = Wrapped => {\n  const Inner = ({ activeUpload, uploading, uploadOnline, updateUploadProgress, setUploaderOnline }) => {\n    const { online: { isOnline } } = useContext(AppContext)\n    // log.info('withUploadConnect::: RENDER', { isOnline, uploadOnline })\n\n    useEffect(() => {\n      // log.info('withUploadConnect:::', { uploadOnline, isOnline })\n      if (uploadOnline !== isOnline) setUploaderOnline(isOnline)\n    }, [isOnline, setUploaderOnline, uploadOnline])\n\n    // This lurker waits for the s3 credentials to expire then it goes to get new ones.\n    const newS3Creds = useMemo(() => <NewS3Credentials onDone={updateUploadProgress} activeUpload={activeUpload} />,\n      [updateUploadProgress, activeUpload])\n\n    if (!activeUpload || !uploading) return newS3Creds\n    return (\n      <React.Fragment>\n        {newS3Creds}\n        <Wrapped text={'Uploading image'} progress={activeUpload.progress || 0} />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n  // All from redux\n    activeUpload: PropTypes.object,\n    uploading: PropTypes.bool,\n    uploadOnline: PropTypes.bool,\n    updateUploadProgress: PropTypes.func.isRequired,\n    setUploaderOnline: PropTypes.func.isRequired\n  }\n  return Inner\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { activeUpload, uploading, online: uploadOnline } = state.uploader\n  return { activeUpload, uploading, uploadOnline }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  updateUploadProgress: (newProgress) => {\n    dispatch(datastore.redux.actions.updateUploadProgress(newProgress))\n  },\n  setUploaderOnline: (bOnline) => {\n    dispatch(datastore.redux.actions.setUploaderOnline(bOnline))\n  }\n})\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withUploadConnect\n)\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetNewS3Credentials = graphql(graphqlAPI.queries.getNewS3Credentials, {\n  skip: ({ online, activeUpload }) => !online || !activeUpload || (activeUpload.expires > Date.now()),\n  props: ({ data, ownProps }) => {\n    if (data.error) log.error(data.error)\n    log.info('withGetNewS3Credentials:: ', { data })\n\n    // If we get backa  valid auth code then create a new queue object\n    // and send it back\n    if (!data.loading) {\n      ownProps.onDone({\n        ...ownProps.qItem,\n        retry: ownProps.qItem.retry + 1,\n        preAuth: JSON.parse(data.s3Credentials)\n      })\n    }\n    return {\n      data\n    }\n  },\n  options: ({ qItem }) => ({\n    variables: { seriesId: qItem.seriesId, photoId: qItem.id, ext: qItem.ext }\n  })\n})\nconst NewS3Credentials = withGetNewS3Credentials(() => null)\n","import React, { useContext, useMemo, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport { connect } from 'react-redux'\nimport ReactGA from 'react-ga'\n\nimport { NEW_PHOTO_MODES, SERIES_MODES } from '@morphoto/photoseries'\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\nimport { graphqlAPI } from '@morphoto/common'\nimport log from 'loglevel'\n\nconst STATES = config.home.AppStateTypes\n\nconst withSeriesConnect = WrappedSeries => {\n  const InnerSeries = ({\n    series, loading, domain, activeSeries, initialPhoto,\n    onAfterSeriesDelete, queueUpload,\n    updateSeriesMutation, updatePhotoMutation,\n    deleteSeriesMutation, deletePhotoMutation,\n    createSeriesMutation, createPhotoMutation,\n    watchSeriesMutation, unWatchSeriesMutation,\n    onFindOnMap\n  }) => {\n    const { role, currentUser, signedIn, globalActions } = useContext(AppContext)\n\n    const inputMethod = domain === STATES.NEW_SERIES_CAMERA\n      ? NEW_PHOTO_MODES.CAMERA\n      : NEW_PHOTO_MODES.FILEPICKER\n\n    // log.info('SeriesConnect', { series, loading, currentState, activeSeries, role, currentUser })\n    let modeName = SERIES_MODES.SERIES_VIEW\n    if (domain !== STATES.SERIES) modeName = SERIES_MODES.NEWSERIES\n\n    // A little mutation here.\n    useMemo(() => {\n      if (series && series.photos) {\n        series.photos.sort((a, b) => parseInt(a.takenOn, 10) - parseInt(b.takenOn, 10))\n      }\n    }, [series])\n\n    useEffect(() => {\n      if (series && series.id) {\n        ReactGA.event({\n          category: `Series`,\n          action: 'View',\n          label: series.id\n        })\n      }\n    }, [series])\n\n    let owned = false\n    try {\n      owned = currentUser.id === series.createdUser.id\n    }\n    catch (e) {}\n    const watching = signedIn && currentUser && currentUser.watching && currentUser.watching.indexOf(activeSeries) > -1\n\n    return (\n      <WrappedSeries\n        modeName={modeName}\n        inputMethod={inputMethod}\n\n        owned={owned}\n        watching={watching}\n\n        // Everything we need to determine access\n        currentUserId={signedIn ? currentUser.id : null}\n        currentUserRole={role}\n        loading={loading}\n        series={series}\n        initialPhoto={initialPhoto}\n\n        actions={{\n          // Now some functions to handle actions we might take\n          onNewPhoto: async (newPhoto, newPhotoData) => {\n            log.info('onNewPhoto::', { series, newPhoto, newPhotoData })\n            // Write this blob to the imgStore so we can use it later\n            log.info('SET ITEM', newPhotoData)\n            await datastore.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData.file)\n            return createPhotoMutation(series, newPhoto, newPhotoData.ext)\n              .then(({ data }) => {\n                // Now we can add this photo to the upload queue\n                const photo = data.createPhoto.photo\n                if (data.createPhoto.preAuth) {\n                  const preAuth = JSON.parse(data.createPhoto.preAuth)\n\n                  queueUpload({\n                    id: photo.id,\n                    uploadToken: photo.uploadToken,\n                    seriesId: photo.seriesId,\n                    expires: Date.now() + (3300 * 1000),\n                    preAuth,\n                    ext: newPhotoData.ext,\n                    retry: 0\n                  })\n                }\n              })\n              .catch(err => {\n                log.error('onNewPhoto:: Graphql Error', err)\n              })\n          },\n\n          onChangePhoto: (photo, photoDelta) => updatePhotoMutation(series, photo, photoDelta)\n            .catch(err => {\n              log.error('onChangePhoto:: Graphql Error', err)\n            }),\n\n          onDeletePhoto: (photo) => deletePhotoMutation(photo.id)\n            .then((...data) => {\n              log.info('onDeletePhoto:: photo deleted', data)\n            })\n            .catch(err => {\n              log.error('onDeletePhoto:: Graphql Error', err)\n            }),\n\n          onChange: (series, seriesDelta) => updateSeriesMutation(series, seriesDelta)\n            .catch(err => {\n              log.error('onChange:: Graphql Error', err)\n            }),\n\n          onNewSeries: async (newSeries, newPhoto, newPhotoData) => {\n            log.info('Series.connect:: onNewSeries starting', { newSeries, newPhoto, newPhotoData })\n            log.info('SET ITEM', newPhotoData)\n            await datastore.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData.file)\n            return createSeriesMutation(newSeries, newPhoto, newPhotoData.ext)\n              .then(async ({ data }) => {\n                log.info('Series.connect::', data)\n                if (data.createSeries.preAuth) {\n                  // Now we can add this photo to the upload queue\n                  const photo = data.createSeries.series.photos[0]\n                  const preAuth = JSON.parse(data.createSeries.preAuth)\n\n                  queueUpload({\n                    id: photo.id,\n                    uploadToken: photo.uploadToken,\n                    seriesId: photo.seriesId,\n                    expires: Date.now() + (3300 * 1000),\n                    preAuth,\n                    ext: newPhotoData.ext,\n                    retry: 0\n                  })\n                }\n              })\n              .catch(err => {\n                log.error('onNewSeries:: Graphql Error', err)\n              })\n          },\n          onDelete: () => {\n            onAfterSeriesDelete() // UI Stuff, just bring us back to the feed\n            return deleteSeriesMutation()\n              .catch(err => {\n                log.error('onDelete:: Graphql Error', err)\n              })\n          },\n          onClose: globalActions.onMenuBack,\n          onFindOnMap: onFindOnMap,\n          onWatch: signedIn ? () => watchSeriesMutation(currentUser.id) : null,\n          onUnWatch: signedIn ? () => unWatchSeriesMutation(currentUser.id) : null\n        }}\n\n      />\n    )\n  }\n  InnerSeries.propTypes = {\n    domain: PropTypes.string,\n    activeSeries: PropTypes.string,\n    initialPhoto: PropTypes.string,\n\n    // From Redux\n    onAfterSeriesDelete: PropTypes.func,\n    queueUpload: PropTypes.func,\n\n    // Data from apollo\n    series: PropTypes.object,\n\n    // Functions From Apollo\n    loading: PropTypes.bool,\n\n    updateSeriesMutation: PropTypes.func,\n    updatePhotoMutation: PropTypes.func,\n    deleteSeriesMutation: PropTypes.func,\n    deletePhotoMutation: PropTypes.func,\n    createSeriesMutation: PropTypes.func,\n    createPhotoMutation: PropTypes.func,\n    watchSeriesMutation: PropTypes.func,\n    unWatchSeriesMutation: PropTypes.func,\n    onFindOnMap: PropTypes.func\n  }\n  return InnerSeries\n}\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetSelectedQuery = graphql(graphqlAPI.queries.getWholeSeries, {\n  props: ({ data }) => {\n    if (data.error) log.error(data.error)\n    // log.info('getWholeSeries:: ', { data })\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      log.info('getWholeSeries:: error', { data, e })\n      log.error(e)\n    }\n    return {\n      data,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ activeSeries, isNewSeries }) => !activeSeries || isNewSeries,\n  options: ({ activeSeries }) => ({\n    variables: {\n      id: activeSeries\n    }\n  })\n})\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { current: { activeSeries, initialPhoto, domain } } = state.home\n  return { activeSeries, initialPhoto, domain, ...props }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  onAfterSeriesDelete: () => {\n    log.info('onAfterSeriesDelete')\n    dispatch(datastore.redux.actions.setHomeState(STATES.FEED, { activeSeries: null }))\n  },\n  queueUpload: (uploadObj) => {\n    dispatch(datastore.redux.actions.queueUpload(uploadObj))\n  },\n  // activeSeries is an id\n  doneCreatingSeries: (activeSeries) => {\n    log.info('doneCreatingSeries', activeSeries)\n    dispatch(datastore.redux.actions.setHomeState(STATES.SERIES, { activeSeries }))\n  },\n  // We need to swap out the L-dfgsdfgsdfg id on photos\n  doneCreatingPhoto: (initialPhoto) => {\n    log.info('doneCreatingPhoto', initialPhoto)\n    dispatch(datastore.redux.actions.setHomeState(STATES.SERIES, { initialPhoto }))\n  },\n  onFindOnMap: () => {\n    dispatch(datastore.redux.actions.setHomeState(STATES.MAP))\n  }\n})\n\n/**\n * Compose all our queries together. This is a bit of a mess but kind of necessary for now\n */\nexport default compose(\n  // connect first so that we can retrieve our seriesId\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withGetSelectedQuery,\n  datastore.graphql.mutations.createSeries.withMutation,\n  datastore.graphql.mutations.createPhoto.withMutation,\n  datastore.graphql.mutations.updateSeries.withMutation,\n  datastore.graphql.mutations.updatePhoto.withMutation,\n  datastore.graphql.mutations.deleteSeries.withMutation,\n  datastore.graphql.mutations.deletePhoto.withMutation,\n  datastore.graphql.mutations.watch.withMutation,\n  datastore.graphql.mutations.unwatch.withMutation,\n  withSeriesConnect\n)\n","import React, { useEffect, useState, useRef, useMemo } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { connect } from 'react-redux'\nimport { graphql, compose } from 'react-apollo'\n\nimport datastore from '@morphoto/datastore'\nimport { graphqlAPI } from '@morphoto/common'\nimport { config } from '@morphoto/client-common'\nimport log from 'loglevel'\n\nconst POLL_INTERVAL = 20 // (seconds)\n\n/**\n * The outer component handles the lastCheck variable which, when changed will\n * cause the poll event\n */\nconst withHomeMap = Wrapped => {\n  const InnerHomeMap = ({\n    onSeriesNavigate,\n    onSeriesMapSelect,\n    onSearchClick,\n    popMapHistory,\n    pushMapHistory,\n    clearMapHistory,\n    initialActiveSeries,\n    initViewport\n  }) => {\n    const [seriesProps, setSeriesProps] = useState()\n    const [queryVersion, setVersion] = useState(0)\n    const timerRef = useRef()\n    const queryVersionRef = useRef()\n    const [lastCheck, setLastCheck] = useState(0)\n    queryVersionRef.current = queryVersion\n\n    // These are expensive queries so we render them memoized to prevent erroneous re-renders\n    const allSeriesQUERY = useMemo(() => <AllSeriesConnect setSeriesProps={setSeriesProps} />, [])\n    const pollSeriesQUERY = useMemo(\n      () => <PollQueryConnect lastCheck={lastCheck} seriesProps={seriesProps} updateIncrement={() => setVersion(queryVersionRef.current + 1)} />,\n      [lastCheck, seriesProps]\n    )\n    // log.info('withPollQuery (PARENT)', { lastCheck, seriesProps })\n    // Initiate the polling process. We simply update the timestamp every N seconds\n    useEffect(() => {\n      if (!seriesProps) return\n      function ping () {\n        if (timerRef.current) setLastCheck(String(Date.now() - POLL_INTERVAL * 1000))\n      }\n      if (!timerRef.current && seriesProps.readyForPolling) timerRef.current = setInterval(ping, POLL_INTERVAL * 1000)\n      return () => {\n        if (timerRef.current) {\n          log.info('clear poll timer')\n          clearInterval(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }, [seriesProps])\n    // log.info('withHomeMap', { seriesProps, queryVersion })\n\n    return (\n      <React.Fragment>\n        {allSeriesQUERY}\n        {pollSeriesQUERY}\n        <Wrapped\n          initialActiveSeries={initialActiveSeries}\n          initViewport={initViewport}\n          actions={{\n            onSeriesNavigate,\n            onSeriesMapSelect,\n            onSearchClick,\n            popMapHistory,\n            pushMapHistory,\n            clearMapHistory\n          }}\n          queryVersion={queryVersion}\n          seriesList={seriesProps && seriesProps.allSeries ? seriesProps.allSeries.seriesSummaries : []}\n          loading={!seriesProps || seriesProps.loading}\n        />\n      </React.Fragment>\n    )\n  }\n  InnerHomeMap.propTypes = {\n    onSeriesNavigate: PropTypes.func.isRequired,\n    onSeriesMapSelect: PropTypes.func.isRequired,\n    onSearchClick: PropTypes.func.isRequired,\n    popMapHistory: PropTypes.func.isRequired,\n    pushMapHistory: PropTypes.func.isRequired,\n    clearMapHistory: PropTypes.func.isRequired,\n    initialActiveSeries: PropTypes.string,\n    initViewport: PropTypes.object\n  }\n  // InnerHomeMap.whyDidYouRender = true\n  return InnerHomeMap\n}\n\nconst withAllSeries = graphql(graphqlAPI.queries.allSeries, {\n  props: ({ data, ownProps }) => {\n    // log.info('withAllSeries', { data, ownProps })\n    // If there's more data to load we should go get another batch\n    if (!data.loading && !data.error && data.allSeries && data.allSeries.seriesSummaries.length > 0 && data.allSeries.nextToken) {\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.allSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            allSeries: {\n              ...fetchMoreResult.allSeries,\n              seriesSummaries: [ ...prev.allSeries.seriesSummaries, ...fetchMoreResult.allSeries.seriesSummaries ]\n            }\n          }\n        }\n      })\n    }\n    else if (data.loading || data.error) {\n      ownProps.setSeriesProps(data)\n    }\n    else {\n      // log.info('withAllSeries polling done')\n      ownProps.setSeriesProps({ ...data, readyForPolling: true })\n    }\n    return null\n  },\n  options: {\n    variables: { limit: 100 }\n  }\n})\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withPollQuery = graphql(graphqlAPI.queries.pollQuery, {\n  skip: ({ lastCheck, online }) => !lastCheck || !online,\n  props: ({ data, ownProps: { seriesProps, updateIncrement } }) => {\n    if (data.error) {\n      log.info('POLL FAIL', data.error, data)\n      log.error(data.error)\n    }\n    else {\n      // log.info('withPollQuery', { data, seriesProps, updateIncrement })\n    }\n    if (!data.loading && data.changedSeries && data.changedSeries.seriesSummaries) {\n      // log.info('POLLING', { data, seriesProps })\n      const newData = data.changedSeries.seriesSummaries\n      const oldList = seriesProps.allSeries.seriesSummaries\n\n      // If the polling has begun and we have some good polling data back then\n      // Process it and decide if we need to incorporate it\n      if (data.changedSeries) {\n        let newSeriesSummaries = seriesProps.allSeries.seriesSummaries\n        newData.forEach(({ seriesStatus, ...polledSeries }) => {\n          if (seriesStatus === 'deleted') {\n            log.info('Polling found a series to delete: ', polledSeries.id)\n            newSeriesSummaries = oldList.filter(s => s.id !== polledSeries.id)\n          }\n          else {\n            const idx = oldList.findIndex(ds => ds.id === polledSeries.id)\n            if (idx >= 0) {\n              log.info('Polling found a series to Update: ', polledSeries.id)\n              newSeriesSummaries = oldList.map((oldSeries, oldId) => oldId === idx ? polledSeries : oldSeries)\n            }\n            else {\n              log.info('Polling found a series to add: ', polledSeries.id)\n              newSeriesSummaries = [...oldList, polledSeries]\n            }\n          }\n          seriesProps.updateQuery((data, options) => {\n            try {\n              const newData = { ...data }\n              newData.allSeries.seriesSummaries = newSeriesSummaries\n              updateIncrement()\n              return data\n            }\n            catch (e) {\n              log.error(e)\n              return data\n            }\n          })\n        })\n      }\n    }\n    return null\n  },\n  options: ({ lastCheck }) => ({\n    variables: {\n      limit: 100,\n      lastCheck\n    }\n  })\n})\n\n// We're using graphql() HOC because it's convenient but it doesn't need to render anything\nconst AllSeriesConnect = withAllSeries(() => null)\nconst PollQueryConnect = withPollQuery(() => null)\n\n// The only part of the state the main view caes about is teh window\nconst mapStateToProps = (state, props) => {\n  const { current: { activeSeries } } = state.home\n  const initViewport = state.map.slice(-1).pop()\n  return { initialActiveSeries: activeSeries, initViewport, ...props }\n}\n\nconst STATES = config.home.AppStateTypes\n\n// There are a few presentational actions the main window can use\nconst mapDispatchToProps = {\n  onSeriesNavigate: activeSeries => datastore.redux.actions.setHomeState(STATES.SERIES, { activeSeries }),\n  onSeriesMapSelect: datastore.redux.actions.setActiveSeries,\n  onSearchClick: () => datastore.redux.actions.setHomeState(STATES.SEARCH, { search: { tab: config.home.SEARCH_TABS.LOCATION, text: '' } }),\n  popMapHistory: datastore.redux.actions.popMapHistory,\n  pushMapHistory: datastore.redux.actions.pushMapHistory,\n  clearMapHistory: datastore.redux.actions.clearMapHistory\n}\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withHomeMap\n)\n","import React, { useState, useMemo, useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport ReactGA from 'react-ga'\n\nimport { connect } from 'react-redux'\n\nimport { config, AppContext } from '@morphoto/client-common'\nimport { graphqlAPI, dates } from '@morphoto/common'\nimport log from 'loglevel'\n\nconst TABS = config.home.SEARCH_TABS\n\nconst withSearchConnect = Wrapped => {\n  const Inner = ({ defaultTab, defaultText, fetchMore }) => {\n    // log.info('withSearchConnect', { Wrapped, defaultTab, defaultText, fetchMore })\n    const [currentTab, setCurrentTab] = useState(defaultTab || TABS.TAG)\n    const { globalActions } = useContext(AppContext)\n    // We separate these because one of them needs to be immediate and the\n    const [searchText, setSearchText] = useState(defaultText || '')\n    const [contextChoice, setContextChoice] = useState(null)\n\n    useEffect(() => {\n      ReactGA.pageview('search')\n    }, [])\n\n    useEffect(() => {\n      if (contextChoice || searchText.length > 3) {\n        ReactGA.event({\n          category: `Search:${currentTab}`,\n          action: contextChoice ? 'Search Context Select' : 'Search Text Change',\n          label: contextChoice ? contextChoice.name : searchText\n        })\n      }\n    }, [searchText, currentTab, contextChoice])\n\n    const handleTabChange = (newTab) => {\n      setContextChoice(null)\n      setCurrentTab(newTab)\n    }\n    const handleContextChoiceChange = (newContextChoice) => {\n      setContextChoice(newContextChoice)\n    }\n    const handleSearchTextChange = (text) => {\n      setSearchText(text)\n      setContextChoice(null)\n    }\n\n    let withContextQuery = null\n    let withSearchQuery = null\n\n    switch (currentTab) {\n      case TABS.KEYWORD:\n        withContextQuery = (Wrapped) => Wrapped\n        withSearchQuery = withKeywordSearch\n        break\n      case TABS.TAG:\n        withContextQuery = withTagSearch\n        withSearchQuery = withTagSeries\n        break\n      case TABS.LOCATION:\n        withContextQuery = withGeoCode\n        // withSearchQuery = withGeoSearch\n        break\n      case TABS.USER:\n        withContextQuery = withUserSearch\n        withSearchQuery = withUserSeries\n        break\n      default:\n        break\n    }\n\n    const ComposedSearch = useMemo(() => withSearchQuery\n      ? compose(\n        withContextQuery,\n        withSearchQuery\n      )(Wrapped)\n      : withContextQuery(Wrapped), [withContextQuery, withSearchQuery])\n\n    return <ComposedSearch {...{ currentTab, searchText, contextChoice }}\n      actions={{\n        onMapClick: globalActions.jumpToMap,\n        onResultClick: globalActions.jumpToSeriesView,\n        setContextChoice: handleContextChoiceChange,\n        fetchMore: fetchMore,\n        setCurrentTab: handleTabChange,\n        setSearchText: handleSearchTextChange\n      }}\n    />\n  }\n  Inner.propTypes = {\n    searchResults: PropTypes.array,\n    contextResults: PropTypes.array,\n    defaultTab: PropTypes.any,\n    defaultText: PropTypes.string,\n    loading: PropTypes.bool,\n    fetchMore: PropTypes.func\n  }\n  return Inner\n}\n/*****************************************************************\n *  PART 1: SEARCH QUERIES\n *****************************************************************/\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withTagSearch = graphql(graphqlAPI.queries.tagSearch, {\n  props: ({ data }) => {\n    if (data.error) log.error(data.error)\n    // log.info('withTagSearch', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      log.error(data)\n      log.error(e)\n    }\n    const contextResults = data.tags ? data.tags.map(({ name, count }) => ({\n      name,\n      description: `~ ${count < 10 ? count : Math.ceil(count / 10) * 10} Photo series tagged`\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  // skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      tag: !searchText || searchText.length < 3 ? '' : searchText,\n      limit: 10\n    }\n  })\n})\n\nconst withUserSearch = graphql(graphqlAPI.queries.userSearch, {\n  props: ({ data }) => {\n    if (data.error) log.error(data.error)\n    // log.info('withUserSearch', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      log.error(data)\n      log.error(e)\n    }\n\n    const contextResults = data.userSearch ? data.userSearch.map(({ username, gravatar, createdOn, id }) => ({\n      name: username,\n      id,\n      description: `Joined ${dates.formatDateAgo(createdOn)}`,\n      gravatar\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      searchStr: searchText,\n      limit: 10\n    }\n  })\n})\n\nconst withGeoCode = graphql(graphqlAPI.queries.geocode, {\n  props: ({ data }) => {\n    if (data.error) log.error(data.error)\n    // log.info('withGeoCode', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      log.error(data)\n      log.error(e)\n    }\n\n    const contextResults = data.geocoder ? data.geocoder.map(({ relevance, text, placeName, bbox, center }) => ({\n      name: text,\n      description: placeName,\n      bbox,\n      center,\n      relevance\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      search: searchText\n      // limit: 10\n    }\n  })\n})\n\n/*****************************************************************\n * PART 2: SERIES SEARCH QUERIES\n *****************************************************************/\n\nconst withTagSeries = graphql(graphqlAPI.queries.seriesWithTag, {\n  props: ({ data }) => {\n    if (data.error) log.error(data.error)\n    // log.info('withTagSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      log.error(data)\n      log.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.tagSeries || !data.tagSeries.nextToken ? null : () => {\n      log.info('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.tagSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            tagSeries: {\n              ...fetchMoreResult.tagSeries,\n              seriesSummaries: [ ...prev.tagSeries.seriesSummaries, ...fetchMoreResult.tagSeries.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.tagSeries && data.tagSeries.seriesSummaries\n      ? data.tagSeries.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ contextChoice }) => !contextChoice,\n  options: ({ contextChoice }) => ({\n    variables: {\n      tag: contextChoice.name,\n      limit: 10\n    }\n  })\n})\n\nconst withUserSeries = graphql(graphqlAPI.queries.userSeries, {\n  props: ({ data }) => {\n    if (data.error) log.error(data.error)\n    // log.info('withUserSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      log.error(data)\n      log.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.userSeries || !data.userSeries.nextToken ? null : () => {\n      log.info('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.userSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            userSeries: {\n              ...fetchMoreResult.userSeries,\n              seriesSummaries: [ ...prev.userSeries.seriesSummaries, ...fetchMoreResult.userSeries.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.userSeries && data.userSeries.seriesSummaries\n      ? data.userSeries.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ contextChoice }) => !contextChoice,\n  options: ({ contextChoice }) => ({\n    variables: {\n      createdBy: contextChoice.id,\n      limit: 10\n    }\n  })\n})\n\nconst withKeywordSearch = graphql(graphqlAPI.queries.keywordSearch, {\n  props: ({ data }) => {\n    if (data.error) log.error(data.error)\n    // log.info('withUserSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      log.error(data)\n      log.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.keywordSearch || !data.keywordSearch.nextToken ? null : () => {\n      log.info('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.keywordSearch.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            keywordSearch: {\n              ...fetchMoreResult.keywordSearch,\n              seriesSummaries: [ ...prev.keywordSearch.seriesSummaries, ...fetchMoreResult.keywordSearch.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.keywordSearch && data.keywordSearch.seriesSummaries\n      ? data.keywordSearch.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      searchStr: searchText,\n      limit: 10\n    }\n  })\n})\n\n// const withGeoSearch = graphql(geoSeries, {\n//   props: ({ data }) => {\n//     if (data.error) log.error(data.error)\n//     // log.info('HERE', data)\n//     let series = null\n//     try {\n//       if (!data.loading && !data.error) series = data.series\n//     }\n//     catch (e) {\n//       log.error(data)\n//       log.error(e)\n//     }\n//     return {\n//       data,\n//       loading: data.loading,\n//       series\n//     }\n//   },\n//   skip: ({ contextChoice }) => !contextChoice,\n//   options: ({ contextChoice }) => ({\n//     variables: {\n//       bounds: contextChoice.bbox\n//       // limit: 10\n//       // nextToken\n//     }\n//   })\n// })\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { current: { search, activeSeries } } = state.home\n  return {\n    defaultTab: search ? search.tab : null,\n    defaultText: search ? search.text : null,\n    activeSeries\n  }\n}\n\nexport default compose(\n  connect(\n    mapStateToProps\n  ),\n  withSearchConnect\n)\n","import React, { useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport ReactGA from 'react-ga'\n\nimport { graphql, compose } from 'react-apollo'\n// import { print } from 'graphql/language/printer'\n\nimport { AppContext } from '@morphoto/client-common'\nimport { graphqlAPI } from '@morphoto/common'\n\nconst withProfileConnect = Wrapped => {\n  const Inner = ({ data }) => {\n    const { seriesQ, watchedSeriesQ } = data\n    const { currentUser, globalActions } = useContext(AppContext)\n\n    const mySeries = seriesQ && seriesQ.userSeries && seriesQ.userSeries.seriesSummaries\n      ? seriesQ.userSeries.seriesSummaries.filter(s => s.seriesStatus !== 'deleted') || []\n      : []\n    const watchingSeries = watchedSeriesQ && watchedSeriesQ.arraySeries ? watchedSeriesQ.arraySeries : []\n    // log.info('ProfileConnect', { mySeries, watchedSeriesQ, watchingSeries })\n\n    const loading = Boolean(\n      (seriesQ && seriesQ.loading) ||\n    (watchedSeriesQ && watchedSeriesQ.loading)\n    )\n\n    useEffect(() => {\n      ReactGA.pageview('profile')\n    }, [])\n\n    return <Wrapped user={currentUser} {...{\n      loading,\n      mySeries,\n      watchingSeries,\n      actions: {\n        jumpToSeries: globalActions.jumpToSeriesView,\n        jumpToMap: globalActions.jumpToSeriesMap\n      }\n    }} />\n  }\n\n  Inner.propTypes = {\n    data: PropTypes.object, // from graphql\n    jumpToSeries: PropTypes.func, // from redux\n    jumpToMap: PropTypes.func // from redux\n  }\n  return Inner\n}\n\nconst withuserSeriesQuery = graphql(graphqlAPI.queries.userSeries, {\n  props: ({ data, ownProps }) => {\n    // print(graphqlAPI.queries.userSeries)\n    // log.info('ProfileConnect withuserSeriesQuery', { data, ownProps })\n    return { data: { ...ownProps.data, seriesQ: data } }\n  }\n})\n\nconst withMyWatchedSeriesQuery = graphql(graphqlAPI.queries.seriesFromList, {\n  props: ({ data, ownProps }) => {\n    // log.info('ProfileConnect withMyWatchedSeriesQuery', graphqlAPI.queries.seriesFromList, { data, ownProps })\n    return { data: { ...ownProps.data, watchedSeriesQ: data } }\n  },\n  skip: ({ data, currentUser }) => {\n    try {\n      return currentUser.watching.length < 1\n    }\n    catch (e) {\n      return true\n    }\n  },\n  options: ({ data, currentUser }) => {\n    return {\n      variables: { seriesList: currentUser.watching }\n    }\n  }\n})\n\nexport default compose(\n  withuserSeriesQuery,\n  // withMyPhotosQuery,\n  withMyWatchedSeriesQuery,\n  withProfileConnect\n)\n","import React, { useRef, useState, useEffect, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport { AppContext } from '@morphoto/client-common'\nimport ReactGA from 'react-ga'\n\nimport { graphqlAPI } from '@morphoto/common'\nimport log from 'loglevel'\n\nconst POLL_INTERVAL = 20 // (seconds)\nconst FEED_LIMIT = 5 // (items to load)\n\nconst withFeedConnect = Wrapped => {\n  const Component = ({ data, loading, loadingNewest, loadingMore, gqlActions }) => {\n    const timerRef = useRef()\n    const lastCheckRef = useRef()\n    const [lastCheck, setLastCheck] = useState(null)\n    const { online, globalActions } = useContext(AppContext)\n    lastCheckRef.current = lastCheck\n\n    // Initiate the polling process. We simply update the timestamp every N seconds\n    useEffect(() => {\n      function ping () {\n        if (timerRef.current) {\n          // log.info('FeedConnect timerRef.current', timerRef.current, POLL_INTERVAL)\n          if (online.isOnline) gqlActions.fetchNewest()\n          setLastCheck(String(Date.now() - POLL_INTERVAL * 1000))\n        }\n      }\n      if (!timerRef.current) timerRef.current = setInterval(ping, POLL_INTERVAL * 1000)\n      return () => {\n        if (timerRef.current) {\n          // log.info('FeedConnect clear poll timer')\n          clearInterval(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }, [gqlActions, online.isOnline])\n\n    useEffect(() => {\n      ReactGA.pageview('feed')\n    }, [])\n\n    const events = data.myFeed ? data.myFeed.feed.filter(s => s.seriesStatus !== 'deleted') || [] : []\n    const window = data.myFeed ? data.myFeed.window.map(v => parseInt(v, 10)) || [null, null] : [null, null]\n\n    return (\n      <Wrapped {...{ events, loading, window }}\n        actions={{\n          onImageClick: globalActions.jumpToSeriesView,\n          onProfileClick: globalActions.jumpToUser,\n          onMapClick: globalActions.jumpToSeriesMap,\n          fetchMore: gqlActions.fetchMore,\n          fetchNewest: gqlActions.fetchNewest\n        }}\n      />\n    )\n  }\n  Component.propTypes = {\n    data: PropTypes.object, // from graphql\n    loading: PropTypes.bool, // from graphql\n    loadingNewest: PropTypes.bool, // from graphql\n    loadingMore: PropTypes.bool, // from graphql\n    gqlActions: PropTypes.shape({\n      fetchMore: PropTypes.func,\n      fetchNewest: PropTypes.func\n    })\n  }\n  return Component\n}\nconst withFeedQuery = graphql(graphqlAPI.queries.getMyFeed, {\n  props: ({ data }) => {\n    if (data.error) log.error(data.error)\n\n    // TODO: Not sure this will propagate correctly. Test it.\n    let loadingNewest = false\n    let loadingMore = false\n\n    log.info('withFeedQuery', data)\n\n    // One Thunk function designed for getting everything since the last check\n    const fetchNewest = () => {\n      loadingNewest = true\n      // log.info('fetchNewest', data)\n      if (data.myFeed && !data.loading) {\n        // log.info('DEBUG fetchNewest1', { ...data.variables, start: data.myFeed.window[1] })\n        data.fetchMore({\n          variables: { ...data.variables, start: data.myFeed.window[1] },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            // log.info('DEBUG fetchNewest2', { prev, fetchMoreResult })\n            loadingNewest = false\n            return {\n              myFeed: {\n                ...fetchMoreResult.myFeed,\n                // put the newest stuff first\n                feed: [ ...fetchMoreResult.myFeed.feed, ...prev.myFeed.feed ],\n                window: [prev.myFeed.window[0], fetchMoreResult.myFeed.window[1]]\n              }\n            }\n          }\n        })\n      }\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = () => {\n      loadingMore = true\n      // log.info('fetchMore', data)\n      if (data.myFeed) {\n        data.fetchMore({\n          variables: { ...data.variables, end: data.myFeed.window[0] },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            loadingMore = false\n            return {\n              myFeed: {\n                ...fetchMoreResult.myFeed,\n                feed: [ ...prev.myFeed.feed, ...fetchMoreResult.myFeed.feed ],\n                window: [fetchMoreResult.myFeed.window[0], prev.myFeed.window[1]]\n              }\n            }\n          }\n        })\n      }\n    }\n\n    return {\n      data,\n      loading: data.loading,\n      loadingMore,\n      loadingNewest,\n      gqlActions: {\n        fetchNewest, // This is the poll we do every n seconds\n        fetchMore // This is when we scroll to the bottom of the list\n      }\n    }\n  },\n  // skip: ({ activeSeries, isNewSeries }) => !activeSeries || isNewSeries,\n  options: ({ activeSeries }) => ({\n    variables: {\n      limit: FEED_LIMIT\n    }\n  })\n})\n\nexport default compose(\n  withFeedQuery,\n  withFeedConnect\n)\n","import React, { useState, useContext, useMemo, useRef, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Bottleneck from 'bottleneck'\nimport { graphql, compose } from 'react-apollo'\n\nimport { long2tile, lat2tile } from 'geotilehash'\n\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\nimport { graphqlAPI } from '@morphoto/common'\nimport { OFFLINE_STATES } from '@morphoto/maps'\nimport log from 'loglevel'\n\nconst withOfflineData = Wrapped => {\n  const Inner = ({\n    lastMapViewport, completedDownload, viewport, setOfflineCompleted, setOfflineViewport\n  }) => {\n    const [toolState, setToolState] = useState(viewport && completedDownload ? OFFLINE_STATES.LOCKED : OFFLINE_STATES.NAVIGATING)\n    const limiterRef = useRef()\n    const { online, globalActions } = useContext(AppContext)\n\n    // Setting the bounds is what kicks off the whole process\n    const [bounds, setBounds] = useState(null)\n    // Series ids only get set when the geoQuery finishes\n    const [seriesIds, setSeriesIds] = useState(null)\n    // This is the current Series object we are putting through the query\n    const [activeSeriesId, setActiveSeriesId] = useState(null)\n    const [seriesPhotos, setSeriesPhotos] = useState([])\n\n    const [tileTick, setTileTick] = useState([0, 0])\n    const [seriesTick, setSeriesTick] = useState([0, 0])\n    const [seriesPhotoTick, setSeriesPhotoTick] = useState([0, 0])\n\n    // We're dealing in asynchronous so we need a ref to make sure we're usign the current values\n    const tileTickRef = useRef()\n    tileTickRef.current = { tileTick, seriesTick, seriesPhotoTick, seriesIds, seriesPhotos }\n\n    const onTileTick = () => setTileTick([tileTickRef.current.tileTick[0] + 1, tileTickRef.current.tileTick[1]])\n    const onTileAdd = (num) => setTileTick([tileTickRef.current.tileTick[0], tileTickRef.current.tileTick[1] + num])\n    const onSeriesPhotoTick = () => {\n      // LimiterRef is a good proxy for isComponentMounted\n      if (limiterRef.current) {\n        setSeriesPhotoTick([tileTickRef.current.seriesPhotoTick[0] + 1, tileTickRef.current.seriesPhotoTick[1]])\n      }\n    }\n    const onSeriesPhotoAdd = (num) => setSeriesPhotoTick([tileTickRef.current.seriesPhotoTick[0], tileTickRef.current.seriesPhotoTick[1] + num])\n\n    const onSeriesTick = useCallback((urls) => {\n      const theTick = tileTickRef.current.seriesTick\n      const theIds = tileTickRef.current.seriesIds.ids\n      const thePhotos = tileTickRef.current.seriesPhotos\n      if (urls) {\n        let addCount = 0\n        urls.forEach(url => {\n          if (thePhotos.indexOf(url) === -1) {\n            addCount++\n            setSeriesPhotos([...thePhotos, url])\n            limiterRef.current.schedule(() => makeRequest('GET', url))\n              .then(onSeriesPhotoTick)\n            // Maybe we should do something different on errors (but what?)\n              .catch(onSeriesPhotoTick)\n          }\n        })\n        onSeriesPhotoAdd(addCount)\n      }\n      // now kick off the next series\n      if (theTick && theIds[theTick[0]]) {\n        setActiveSeriesId(theIds[theTick[0] + 1])\n        setSeriesTick([theTick[0] + 1, theTick[1]])\n      }\n      else {\n      // We are done the series\n      }\n    }, [])\n\n    const finalState = useMemo(() => online.isOnline ? toolState : OFFLINE_STATES.OFFLINE, [online.isOnline, toolState])\n\n    const geoSeriesQuery = useMemo(() => <GeoQuery bounds={bounds} setSeriesIds={setSeriesIds} />, [bounds])\n    const wholeSeriesQuery = useMemo(() => <WholeSeriesConnect id={activeSeriesId} onDone={onSeriesTick} />, [activeSeriesId, onSeriesTick])\n\n    const onStart = (bounds, viewport) => {\n      setToolState(OFFLINE_STATES.DOWNLOADING)\n      setBounds(bounds)\n      setOfflineViewport(viewport)\n    }\n\n    const onDone = useCallback(() => {\n      setToolState(OFFLINE_STATES.LOCKED)\n      setOfflineCompleted(true)\n    }, [setOfflineCompleted])\n\n    const onCancel = () => {\n      setToolState(OFFLINE_STATES.CANCELED)\n      setBounds(null)\n      setSeriesIds(null)\n      setTileTick([0, 0])\n      setSeriesTick([0, 0])\n      setSeriesPhotoTick([0, 0])\n      setSeriesPhotos([])\n      if (limiterRef.current) {\n        limiterRef.current.stop({ dropWaitingJobs: true })\n        limiterRef.current = null\n        limiterRef.current = new Bottleneck({ maxConcurrent: 5 })\n      }\n    }\n\n    // Initialize the bottleNeck\n    useEffect(() => {\n      limiterRef.current = new Bottleneck({ maxConcurrent: 5 })\n      return () => {\n        limiterRef.current = null\n      }\n    }, [])\n\n    // This is a little taxing so we keep it async\n    useEffect(() => {\n      if (bounds) {\n        const tiles = getTiles(bounds, [0, config.home.Offline.highestOfflineTileZoom])\n        const length = tiles.length\n        if (length === 0) return\n        onTileAdd(length)\n        tiles.forEach(tile => {\n          if (limiterRef.current) {\n            limiterRef.current.schedule(() => makeRequest('GET', tile))\n              .then(onTileTick)\n            // Maybe we should do something different on errors (but what?)\n              .catch(onTileTick)\n          }\n        })\n      }\n    }, [bounds])\n\n    // If we see series then kick off that cascade\n    useEffect(() => {\n    // log.info('OfflineMap:: kicking off the series loading', { seriesTick, seriesIds })\n      if (seriesIds && seriesIds.ids) {\n      // Kick off the series loading\n        if (seriesIds.ids.length > 0) setActiveSeriesId(seriesIds.ids[0])\n        setSeriesTick([0, seriesIds.ids.length])\n        setSeriesPhotoTick([0, 0])\n      }\n    }, [seriesIds])\n\n    useEffect(() => {\n      const newTotal = [tileTick[0] + seriesTick[0] + seriesPhotoTick[0], tileTick[1] + seriesTick[1] + seriesPhotoTick[1]]\n      if (newTotal[1] > 0 && newTotal[0] === newTotal[1]) onDone()\n    }, [tileTick, seriesTick, seriesPhotoTick, onDone])\n\n    return (\n      <React.Fragment>\n        {wholeSeriesQuery}\n        {geoSeriesQuery}\n        <Wrapped\n          initViewport={viewport || lastMapViewport}\n          progress={{ tileTick, seriesTick, seriesPhotoTick }}\n          toolState={finalState}\n          actions={{\n            onMenuBack: () => {\n              onCancel()\n              globalActions.onMenuBack()\n            },\n            onStartDownload: onStart,\n            onCancel: onCancel,\n            onCancelComplete: () => {\n              setToolState(OFFLINE_STATES.NAVIGATING)\n            },\n            onUnlock: () => {\n              setToolState(OFFLINE_STATES.NAVIGATING)\n              setOfflineCompleted(false)\n            }\n          }}\n        />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n  // All from redux\n    lastMapViewport: PropTypes.object,\n    completedDownload: PropTypes.bool,\n    viewport: PropTypes.object,\n    setOfflineCompleted: PropTypes.func.isRequired,\n    setOfflineViewport: PropTypes.func.isRequired\n  }\n  return Inner\n}\n\nconst withGeoSearch = graphql(graphqlAPI.queries.geoSeriesIdOnly, {\n  props: ({ data, ownProps }) => {\n    if (data.error) log.error(data.error)\n    log.info('OfflineMap::withGeoSearch:: ', { data, ownProps })\n    try {\n      // Fetch until we have everything\n      if (!data.loading && !data.error && data.seriesInGeoBounds && data.seriesInGeoBounds.seriesSummaries.length > 0 && data.seriesInGeoBounds.nextToken) {\n        ownProps.setSeriesIds({ ids: [], loading: true })\n        // log.info('OfflineMap::withGeoSearch::fetchMore', { ...data.variables, nextToken: data.seriesInGeoBounds.nextToken })\n        data.fetchMore({\n          variables: { ...data.variables, nextToken: data.seriesInGeoBounds.nextToken },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            // log.info('OfflineMap::withGeoSearch::updateQuery', { prev, fetchMoreResult })\n            return {\n              seriesInGeoBounds: {\n                ...fetchMoreResult.seriesInGeoBounds,\n                seriesSummaries: [ ...prev.seriesInGeoBounds.seriesSummaries, ...fetchMoreResult.seriesInGeoBounds.seriesSummaries ]\n              }\n            }\n          }\n        })\n      }\n      else if (data.loading || data.error) {\n        // log.info('OfflineMap::withGeoSearch::loading or errir')\n        ownProps.setSeriesIds({ ids: [], loading: true })\n      }\n      else {\n        log.info('OfflineMap::withGeoSearch::DONE')\n        if (data && data.seriesInGeoBounds) {\n          ownProps.setSeriesIds({ ids: data.seriesInGeoBounds.seriesSummaries.map(s => s.id), loading: false })\n        }\n      }\n    }\n    catch (e) {\n      log.error(data)\n      log.error(e)\n    }\n    return {\n      data,\n      loading: data.loading\n    }\n  },\n  skip: ({ bounds }) => !bounds,\n  options: ({ bounds }) => ({\n    variables: {\n      bounds,\n      limit: 100\n      // nextToken\n    }\n  })\n})\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetSelectedQuery = graphql(graphqlAPI.queries.getWholeSeries, {\n  skip: ({ id }) => !id,\n  props: ({ data, ownProps }) => {\n    if (data.error) log.error(data.error)\n    // log.info('OfflineMap::withGetSelectedQuery:: ', { data })\n    let series = null\n    try {\n      if (!data.loading && !data.error) {\n        series = data.series\n        // log.info('OfflineMap::withGetSelectedQuery::series', series)\n        const urls = []\n        urls.push(series.createdUser.gravatar)\n        urls.push(series.updatedUser.gravatar)\n        series.photos.forEach(ph => {\n          urls.push(ph.createdUser.gravatar)\n          urls.push(ph.updatedUser.gravatar)\n          // Skip medium for size sake\n          config.home.Offline.seriesImgsToCache\n            .map(size => urls.push(`${ph.paths.base}${ph.paths[size]}`))\n        })\n        // Remove duplicates and send it back\n        ownProps.onDone([...new Set(urls)])\n      }\n    }\n    catch (e) {\n      log.info('OfflineMap::withGetSelectedQuery:: error', { data, e })\n      log.error(e)\n    }\n    return {\n      data,\n      loading: data.loading,\n      series\n    }\n  },\n  options: ({ id }) => ({\n    variables: {\n      id\n    }\n  })\n})\n// We're using graphql() HOC because it's convenient but it doesn't need to render anything\nconst WholeSeriesConnect = withGetSelectedQuery(() => null)\nconst GeoQuery = withGeoSearch(() => null)\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const lastMapViewport = state.map.slice(-1).pop()\n  const { completedDownload, viewport } = state.offline\n  return { lastMapViewport, completedDownload, viewport }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setOfflineCompleted: (bVal) => {\n    dispatch(datastore.redux.actions.setOfflineCompleted(bVal))\n  },\n  setOfflineViewport: (viewport) => {\n    dispatch(datastore.redux.actions.setOfflineViewport(viewport))\n  }\n})\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withOfflineData\n)\n\n/**\n * Promisify our XMLHttpRequests\n * @param {*} method\n * @param {*} url\n */\nfunction makeRequest (method, url) {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest()\n    xhr.open(method, url)\n    xhr.onload = () => {\n      if (xhr.status >= 200 && xhr.status < 300) resolve(xhr.response)\n      else reject(new Error(xhr.statusText))\n    }\n    xhr.onerror = () => {\n      reject(new Error(xhr.statusText))\n    }\n    xhr.send()\n  })\n}\n\nexport const getTileURL = (url, zoom, x, y) => {\n  const newUrl = url + `?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`\n  return newUrl.replace('{z}/{x}/{y}', `${zoom}/${x}/${y}`)\n}\n\n/**\n * Loop over all the tiles and zoom levels and build\n * us an array of URLs\n * @param {*} bounds\n * @param {*} right\n */\nexport function getTiles (bounds, zoomRange) {\n  const tiles = []\n\n  for (let zoom = zoomRange[0]; zoom <= zoomRange[1]; zoom++) {\n    const xtileLeft = long2tile(bounds[0], zoom)\n    const xtileRight = long2tile(bounds[2], zoom)\n\n    const ytileTop = lat2tile(bounds[1], zoom)\n    const ytileBottom = lat2tile(bounds[3], zoom)\n\n    for (let x = xtileLeft; x <= xtileRight; x++) {\n      for (let y = ytileTop; y <= ytileBottom; y++) {\n        // Push both tiles\n        tiles.push(getTileURL(process.env.REACT_APP_TILEURL_SAT, zoom, x, y))\n        tiles.push(getTileURL(process.env.REACT_APP_TILEURL_TOPO, zoom, x, y))\n      }\n    }\n  }\n  return tiles\n  // log.info('Starting Coords', { tiles, top, left, bottom, right })\n}\n","export default require('./MyFeed').default;\nexport { default as FeedItem } from './FeedItem';\nexport { default as FeedEnder } from './FeedEnder';","export default require('./MyProfile').default;","import React, { useState } from 'react'\n// import PropTypes from 'prop-types'\nimport { graphql } from 'react-apollo'\nimport { connect } from 'react-redux'\n\nimport { ErrorScreen, ERROR_SEND_STATES } from '@morphoto/ui'\n// import { config } from '@morphoto/client-common'\nimport log from 'loglevel'\n\nimport { graphqlAPI } from '@morphoto/common'\n\nconst ErrorConnect = (props) => {\n  const [state, setState] = useState(ERROR_SEND_STATES.UNSENT)\n  const Wrapped = withReportBugMutation(ErrorScreen)\n  return <Wrapped {...props} setState={setState} sendState={state} />\n}\n\nconst withReportBugMutation = graphql(graphqlAPI.mutations.reportBug, {\n  props: ({ mutate, ownProps: { reduxState, error, setState } }) => {\n    log.info('withReportBugMutation props', { mutate, reduxState, error })\n    if (mutate.error) setState(ERROR_SEND_STATES.ERROR)\n    return {\n      reportError: (note) => {\n        setState(ERROR_SEND_STATES.SENDING)\n        let reportJSON = ''\n        // attempt to get some userAgent info\n        let extra = {}\n        try {\n          const { userAgent, appVersion, languages, language, platform, onLine } = window.navigator\n          extra = {\n            userAgent,\n            appVersion,\n            languages,\n            language,\n            platform,\n            onLine,\n            window: {\n              innerHeight: window.innerHeight,\n              innerWidth: window.innerWidth\n            }\n          }\n        }\n        catch (e) {\n          log.error(e)\n        }\n        let errSubset = {}\n        try {\n          errSubset = {\n            message: error.message,\n            stack: error.stack\n          }\n        }\n        catch (e) {\n          log.error(e)\n        }\n\n        const errObj = { note, reduxState, error: errSubset, env: process.env, ...extra }\n        log.info('withReportBugMutation StartingError', errObj)\n        try {\n          reportJSON = JSON.stringify(errObj)\n        }\n        catch (e) {\n          reportJSON = error.toString()\n        }\n        log.info('withReportBugMutation got through it', reportJSON)\n        return mutate({\n          variables: { reportJSON },\n          update: (store, { data }) => {\n            log.info('withReportBugMutation update', data)\n            setState(ERROR_SEND_STATES.SENT)\n          }\n        })\n      }\n    }\n  }\n})\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { map, home, uploader, ...other } = state\n  const newMap = map.slice(-5) // only the last 5 map states come through\n\n  return {\n    reduxState: {\n      ...other,\n      map: newMap,\n      home\n    }\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ErrorConnect)\n","import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport log from 'loglevel';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { AppSettings } from '@morphoto/ui';\nimport { BottomBar, OfflineBar } from '@morphoto/navigation';\nimport { QRReader } from '@morphoto/camera';\nimport { AppContext, config } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\nvar STATES = config.home.AppStateTypes;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    outerRoot: {\n      height: '100%',\n      overflow: 'hidden'\n    },\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    offlineBar: {\n      flex: '0 0'\n    },\n    activeWrapper: {\n      overflow: 'hidden',\n      flexGrow: 1,\n      flexShrink: 1,\n      height: '100%'\n    },\n    uploaderContainer: {\n      zIndex: 100,\n      flex: '0 0'\n    }\n  };\n});\n\nvar Home = function Home(_ref) {\n  var components = _ref.components,\n      domain = _ref.domain;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      signedIn = _useContext.signedIn,\n      globalActions = _useContext.globalActions,\n      device = _useContext.device,\n      currentUser = _useContext.currentUser;\n\n  var Upload = components.upload;\n  useEffect(function () {\n    if (!signedIn && [STATES.MAP, STATES.SEARCH, STATES.SERIES, STATES.QRCAPTURE, STATES.SETTINGS, STATES.OFFLINE_DOWNLOAD].indexOf(domain) < 0) globalActions.setHomeState(STATES.MAP);\n  }, [domain, globalActions.setHomeState, signedIn]);\n  var showBottomBar = true;\n  var activeProps = {};\n  var ActiveComponent = components.feed;\n  var theme = themes.home;\n\n  switch (domain) {\n    case STATES.FEED:\n      ActiveComponent = components.feed;\n      break;\n\n    case STATES.MAP:\n      ActiveComponent = components.map;\n      break;\n\n    case STATES.PROFILE:\n      activeProps = {\n        currentUser: currentUser\n      };\n      ActiveComponent = components.profile;\n      break;\n\n    case STATES.SEARCH:\n      ActiveComponent = components.search;\n      break;\n\n    case STATES.SERIES:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.NEW_SERIES_CAMERA:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.OFFLINE_DOWNLOAD:\n      ActiveComponent = components.offline;\n      showBottomBar = false;\n      break;\n\n    case STATES.NEW_SERIES_LIBRARY:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.QRCAPTURE:\n      ActiveComponent = QRReader;\n      showBottomBar = false;\n      activeProps = {\n        onCapture: globalActions.onQRCapture,\n        onMenuBack: globalActions.onMenuBack,\n        isIos: device.ios\n      };\n      break;\n\n    case STATES.SETTINGS:\n      ActiveComponent = AppSettings;\n      showBottomBar = false;\n      activeProps = {\n        onMenuBack: globalActions.onMenuBack\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ThemeProvider, {\n    theme: themes.home\n  }, React.createElement(\"div\", {\n    className: classes.outerRoot\n  }, React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(OfflineBar, {\n    className: classes.offlineBar\n  }), React.createElement(\"div\", {\n    className: classes.activeWrapper\n  }, React.createElement(ThemeProvider, {\n    theme: theme\n  }, React.createElement(ActiveComponent, activeProps))), showBottomBar && React.createElement(BottomBar, {\n    domain: domain\n  }), React.createElement(Upload, {\n    className: classes.uploaderContainer\n  }), components.installPrompt)));\n};\n\nHome.propTypes = {\n  domain: PropTypes.oneOf(Object.values(STATES)),\n  components: PropTypes.shape({\n    upload: PropTypes.any.isRequired,\n    series: PropTypes.any.isRequired,\n    map: PropTypes.any.isRequired,\n    search: PropTypes.any.isRequired,\n    profile: PropTypes.any.isRequired,\n    feed: PropTypes.any.isRequired,\n    offline: PropTypes.any.isRequired,\n    installPrompt: PropTypes.any\n  })\n};\nexport default Home;","import Home from './Home';\nexport default Home;","import React, { useEffect, useRef, useMemo, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { point, bbox as bboxFunc, buffer } from '@turf/turf'\nimport { Query, ApolloProvider, compose } from 'react-apollo'\nimport { connect } from 'react-redux'\nimport getPhotoUrls from './getPhotoUrls'\n// import Analytics from '@aws-amplify/analytics'\nimport ReactGA from 'react-ga'\n\nimport datastore from '@morphoto/datastore'\nimport { useAuthentication, LoadingWrapped as Loading } from '@morphoto/client-auth'\nimport { useShowAddToHome } from '@morphoto/pwainstall'\nimport { AppContextProvider, ErrorBoundary, config } from '@morphoto/client-common'\nimport { decodeShareUrl, getSeriesTags, graphqlAPI } from '@morphoto/common'\n\nimport withUploadConnect from './withUploadConnect'\nimport withSeriesConnect from './withSeriesConnect'\nimport withHomeMap from './withHomeMap'\nimport withSearchConnect from './withSearchConnect'\nimport withProfileConnect from './withProfileConnect'\nimport withFeedConnect from './withFeedConnect'\nimport withOfflineData from './withOfflineData'\n\nimport MyFeed from '@morphoto/feed'\nimport { UploadControl } from '@morphoto/ui'\nimport Search from '@morphoto/search'\nimport MyProfile from '@morphoto/profile'\nimport { HomeMap, OfflineMap } from '@morphoto/maps'\nimport PhotoSeries from '@morphoto/photoseries'\n\nimport ErrorConnect from './Error.connect'\n// import { IntlWrapper } from '../translations'\nimport Home from '@morphoto/home'\nimport log from 'loglevel'\n\nconst { home: homeConfig, tagColors } = config\n\n// Analytics.configure(config.aws)\n// Analytics.record('some-event-name')\n\n// Set up our google analytics\nconst gac = {}\nif (process.env.NODE_ENV !== 'production') {\n  gac.debug = false\n  gac.gaOptions = {\n    cookieDomain: 'none',\n    siteSpeedSampleRate: 100\n  }\n}\n// log.info('ReactGA.initialize', gac)\nReactGA.initialize(config.analytics.token, gac)\n\nconst components = {\n  upload: withUploadConnect(UploadControl),\n  series: withSeriesConnect(PhotoSeries),\n  map: withHomeMap(HomeMap),\n  search: withSearchConnect(Search),\n  profile: withProfileConnect(MyProfile),\n  feed: withFeedConnect(MyFeed),\n  offline: withOfflineData(OfflineMap)\n}\n\n/**\n * HOC for AppContext and ApolloProvider\n */\nexport const withApolloAuthProvider = Wrapped => {\n  const AuthProvider = ({ reduxProps, ...reduxActions }) => {\n    const flags = reduxProps.flags\n    // log.info('withApolloAuthProvider', props)\n    const { isGod, signedIn, authData, signOut, authScreen, forceSignIn } = useAuthentication(flags.useLoggedOut, reduxActions.setUseOffline)\n    const { client: apolloClient, done: apolloDone, currState: apolloState } = datastore.graphql.useGraphQL()\n\n    // This triggers all the PWA Goodness\n    const { installPrompt, addToHomeScreen } = useShowAddToHome(flags.install, reduxActions.dismissInstall)\n\n    // A little tracking goodness\n    useEffect(() => {\n      ReactGA.pageview('initial render')\n    }, [])\n\n    // If the user hasn't decided to be anonymous or sign in yet show them the login screen\n    // log.info('Rendering AppConnect', { flags, responsive, props, signedIn, isGod, authData })\n    useEffect(() => {\n      if (signedIn === true && flags.useLoggedOut) reduxActions.setUseOffline(false)\n      else if (signedIn === false && !flags.useLoggedOut) reduxActions.setUseOffline(true)\n    }, [flags.useLoggedOut, reduxActions, signedIn])\n\n    const retryRef = useRef()\n\n    // We need to hijack the browser's history object so that hitting the back button on android\n    // doesn't close the window\n    useEffect(() => {\n      function handleBackClick () {\n        window.history.pushState({}, '')\n        reduxActions.onMenuBack()\n      }\n      window.addEventListener('popstate', handleBackClick)\n      return () => window.removeEventListener('popstate', handleBackClick)\n    }, [reduxActions])\n\n    // One time only query param parse so we can redirect them to a shared url if necessary\n    useEffect(() => {\n      try {\n        const decodedObj = decodeShareUrl(window.location.search)\n        if (decodedObj && decodedObj.type && decodedObj.s) {\n          const { type, s, p } = decodedObj\n          log.info('REDIRECTING', { type, s, p })\n          ReactGA.event({\n            category: 'user',\n            action: 'share',\n            label: window.location.search\n          })\n          switch (type) {\n            case 'series':\n              const queryVars = { activeSeries: s, initialPhoto: p }\n              if (!signedIn) reduxActions.setUseOffline(true)\n              reduxActions.setHomeState(homeConfig.AppStateTypes.SERIES, queryVars)\n              break\n            default:\n              break\n          }\n        // TODO : I think this breaks the maifest file\n        // window.history.replaceState({}, 'MorPhoto', '/')\n        }\n      }\n      catch (e) {\n        log.error(e)\n      }\n\n      //  clean up our retry ref\n      if (retryRef.current) {\n        clearTimeout(retryRef.current)\n        retryRef.current = null\n      }\n    }, [reduxActions, signedIn])\n\n    const forceSignInWrapped = useCallback(() => {\n      // Analytics.record('FORCE_SIGNIN')\n      ReactGA.event({\n        category: 'User',\n        action: 'FORCE_SIGNIN'\n      })\n      reduxActions.setUseOffline(false)\n      forceSignIn()\n    }, [reduxActions, forceSignIn])\n\n    const resetApp = useCallback(() => {\n      // Analytics.record('RESET_APP')\n      log.info('APP RESET STARTING')\n      ReactGA.event({\n        category: 'User',\n        action: 'RESET_APP'\n      })\n      datastore.offline.imgStore.clear()\n      apolloClient.resetStore()\n      datastore.offline.stateStore.clear()\n      reduxActions.resetAllState()\n      signOut()\n      log.info('APP RESET FINISHED')\n    }, [apolloClient, signOut, reduxActions])\n\n    const staticContext = useMemo(() => ({\n      metaConfig: {},\n      tagConfig: [\n        {\n          id: 'freeBothType',\n          label: '',\n          color: tagColors[0],\n          allowXY: true,\n          allowNonXY: true,\n          allowAdditions: true,\n          values: getSeriesTags()\n        }\n      ]\n    }), [])\n\n    // These are the things the rest of the app needs to find:\n    const appContext = {\n      getPhotoUrls,\n      signedIn: Boolean(signedIn),\n      role: !signedIn\n        ? 'nonuser'\n        : isGod\n          ? 'admin'\n          : 'user',\n      cognitoUser: authData, // TODO: Need this supported by a graphql query\n      globalActions: {\n        ...reduxActions,\n        addToHomeScreen,\n        signOut,\n        forceSignIn: forceSignInWrapped,\n        resetApp\n      },\n      ...staticContext\n    }\n\n    /**\n     * NO HOOKS BELOW HERE\n     *\n     *\n     *\n     */\n\n    if (!apolloDone) return <Loading message={datastore.graphql.APOLLOSTATES[apolloState]} />\n\n    if (signedIn === null && !flags.useLoggedOut) {\n      ReactGA.event({\n        category: 'User',\n        action: 'LOGIN_PROMPT'\n      })\n      return authScreen\n    }\n\n    return (\n    // We wrap the outside in an error handler\n      <ApolloProvider client={apolloClient}>\n        <Query query={graphqlAPI.queries.getUser} skip={!signedIn}>\n          {({ loading, error, data, refetch }) => {\n            if (loading) return <Loading message='UserData' />\n            if (error) {\n              log.error(error)\n            }\n            // If there's no record for this user in the DB there's nothing left to do\n            if (signedIn && (!data || !data.user)) {\n              log.info('NO USER DATA YET', { loading, error, data })\n              if (!retryRef.current) {\n                retryRef.current = setTimeout(() => {\n                  log.info('Retrying user query')\n                  refetch()\n                }, 5000)\n              }\n              return (\n                <Loading message='UserData' />\n              )\n            }\n            // If we've changed users then wipe the old user's stuff\n            else if (signedIn && authData.attributes.sub !== data.user.id) {\n              log.info('USER CHANGE')\n              datastore.offline.imgStore.clear()\n              apolloClient.resetStore()\n              datastore.offline.stateStore.clear()\n              reduxActions.resetAllState()\n            }\n            else if (signedIn) appContext.currentUser = data.user\n\n            components.installPrompt = installPrompt\n\n            return (\n              <AppContextProvider value={appContext}>\n                <Wrapped domain={reduxProps.domain} components={components} />\n              </AppContextProvider>\n            )\n          }}\n        </Query>\n      </ApolloProvider>\n    )\n  }\n  AuthProvider.propTypes = {\n    reduxProps: PropTypes.object,\n    reduxActions: PropTypes.object\n  }\n  return AuthProvider\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { domain } = state.home.current\n  return {\n    reduxProps: {\n      domain,\n      flags: state.flags\n    }\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setHomeState: (newDomain, newParams) => {\n    dispatch(datastore.redux.actions.setHomeState(newDomain, newParams))\n  },\n  onCameraClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.NEW_SERIES_CAMERA, { activeSeries: null }))\n  },\n  onLibraryClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.NEW_SERIES_LIBRARY, { activeSeries: null }))\n  },\n  onOfflineMenuClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.OFFLINE_DOWNLOAD))\n  },\n  onSettingsClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SETTINGS))\n  },\n  jumpToSeriesView: (seriesId, photoId) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SERIES, { activeSeries: seriesId, initialPhoto: photoId }))\n  },\n  jumpToUser: (username) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SEARCH, { search: { tab: config.home.SEARCH_TABS.USER, text: username } }))\n  },\n  jumpToMap: ({ bbox, center }) => {\n    let bounds = bbox\n    if (!bounds && center) {\n      const bufferPts = buffer(point(center), 500, { units: 'meters' })\n      bounds = bboxFunc(bufferPts)\n    }\n\n    if (bounds) {\n      dispatch(datastore.redux.actions.pushMapHistory({\n        mode: config.home.MapModeTypes.FREE,\n        bounds: bounds\n      }))\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.MAP, { activeSeries: null, initialPhoto: null }))\n    }\n  },\n  jumpToSeriesMap: (seriesId, photoId) => {\n    dispatch(datastore.redux.actions.pushMapHistory({\n      mode: config.home.MapModeTypes.FREE\n    }))\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.MAP, { activeSeries: seriesId, initialPhoto: photoId }))\n  },\n  resetAllState: () => {\n    dispatch(datastore.redux.actions.resetAllState())\n  },\n  dismissInstall: () => {\n    dispatch(datastore.redux.actions.setFlag('install', false))\n  },\n  setUseOffline: (bVal) => {\n    dispatch(datastore.redux.actions.setFlag('useLoggedOut', bVal))\n  },\n  onQRButtonClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.QRCAPTURE))\n  },\n  onMenuBack: () => {\n    dispatch(datastore.redux.actions.homeStateBack())\n  },\n  onAvatarClick: (username) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SEARCH, {\n      search: { tab: homeConfig.SEARCH_TABS.USER, text: username }\n    }))\n  },\n  onQRCapture: (type, activeSeries, initialPhoto) => {\n    switch (type) {\n      case 'series':\n        dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SERIES, { activeSeries, initialPhoto }))\n        break\n      default:\n        break\n    }\n  }\n})\n\nconst withErrorBoundary = (Wrapped) => (props) => (\n  <ErrorBoundary fallback={ErrorConnect}>\n    <Wrapped {...props} />\n  </ErrorBoundary>\n)\n\n// const withContext = Wrapped => {\n//   const InnerContext = ({ appContext }) => (\n//       <IntlWrapper>\n//         <Wrapped />\n//       </IntlWrapper>\n//   )\n//   InnerContext.propTypes = {\n//     appContext: PropTypes.object\n//   }\n//   InnerContext.whyDidYouRender = true\n//   return InnerContext\n// }\n\n/**\n * Nearly everything we do depends on who you are as a user so we commit this to state\n */\n\n// The order we compose things here matters a lot\nconst AppConnect = compose(\n  // ORDER IS CRITICAL HERE\n  withErrorBoundary,\n  datastore.redux.withReduxProvider,\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withApolloAuthProvider\n  // withContext\n)(Home)\n\nexport default AppConnect\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      }\n      else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            }\n            else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      }\n      else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppConnect from './connectors/App.connect'\nimport * as serviceWorker from './serviceWorker'\nimport log from 'loglevel'\n\n// Here's our global overrides css.\n// NOTE: we don't use the JSS compilations here because mapbox feaks\n// out even though it's probably fine\nimport '@morphoto/themes/baseline.css'\nimport 'mapbox-gl/dist/mapbox-gl.css'\n// This is the font we need\nrequire('typeface-roboto')\n\nif (process.env.NODE_ENV !== 'production') {\n  const whyDidYouRender = require('@welldone-software/why-did-you-render')\n  whyDidYouRender(React)\n  log.enableAll() \n}\nelse {\n  log.setLevel('warn')\n}\n// expose this for use in production if we want to turn it on\nwindow.logger = log\n\nReactDOM.render(<AppConnect />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n  window.history.pushState({}, '')\n})\n\n// This is our image worker to offline cache maptiles AND series photos\nif (navigator.serviceWorker) navigator.serviceWorker.register('imgCacheWorker.js')\n","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { Actions } from '../actions';\nimport { config } from '@morphoto/client-common';\nvar mapInit = [{\n  mode: config.home.MapModeTypes.FREE,\n  viewport: {\n    latitude: 36.80191008366581,\n    longitude: -111.63999999999784,\n    zoom: 11\n  }\n}];\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : mapInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.MAP_HISTORY_CLEAR:\n      var newClearerHistory = state.length > 0 ? [[state.length - 1]] : [];\n      return newClearerHistory;\n\n    case Actions.MAP_HISTORY_POP:\n      return state.slice(0, -1);\n\n    case Actions.MAP_HISTORY_PUSH:\n      return [].concat(_toConsumableArray(state), [data]).slice(-10);\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nimport { config } from '@morphoto/client-common';\nvar homeInit = {\n  history: [],\n  current: {\n    domain: config.home.AppStateTypes.FEED\n  }\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : homeInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n  var history = state.history,\n      current = state.current;\n\n  switch (type) {\n    case Actions.HOME_STATE_BACK:\n      var newStateHistory = _toConsumableArray(history);\n\n      var newCurrentState = newStateHistory.length > 0 ? newStateHistory.pop() : homeInit.current;\n      return _objectSpread({}, state, {\n        current: newCurrentState,\n        history: newStateHistory\n      });\n\n    case Actions.HOME_CHANGE_ACTIVE_SERIES:\n      var activeSeries = data.activeSeries,\n          initialPhoto = data.initialPhoto;\n      return _objectSpread({}, state, {\n        history: history,\n        current: _objectSpread({}, current, {\n          activeSeries: activeSeries || null,\n          initialPhoto: activeSeries && initialPhoto ? initialPhoto : null\n        })\n      });\n\n    case Actions.HOME_CHANGE_STATE:\n      var newDomain = data.newDomain,\n          params = data.params;\n      var newParams = params || {};\n      var skipSave = [config.home.AppStateTypes.QRCAPTURE, config.home.AppStateTypes.SETTINGS, config.home.AppStateTypes.OFFLINE_DOWNLOAD, config.home.AppStateTypes.NEW_SERIES_CAMERA, config.home.AppStateTypes.NEW_SERIES_LIBRARY].indexOf(current.domain) > -1;\n      var replaceState = current.domain === newDomain;\n      var newHistory = !skipSave && !replaceState ? [].concat(_toConsumableArray(history), [current]).slice(-10) : history;\n      return _objectSpread({}, state, {\n        history: newHistory,\n        current: _objectSpread({}, current, {\n          domain: newDomain\n        }, newParams)\n      });\n\n    default:\n      return state;\n  }\n});","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nexport var initState = {\n  store: [],\n  online: false,\n  uploading: false,\n  activeUpload: null\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n  var store = state.store,\n      activeUpload = state.activeUpload,\n      uploading = state.uploading;\n\n  switch (type) {\n    case Actions.UPLOADER_QUEUE:\n      if (!activeUpload) {\n        return _objectSpread({}, state, {\n          activeUpload: data\n        });\n      } else {\n        return _objectSpread({}, state, {\n          store: [].concat(_toConsumableArray(store), [data])\n        });\n      }\n\n    case Actions.UPLOADER_SET_ONLINE:\n      return _objectSpread({}, state, {\n        online: data\n      });\n\n    case Actions.UPLOADER_SET_UPLOADING:\n      if (uploading !== data) {\n        return _objectSpread({}, state, {\n          uploading: data\n        });\n      } else {\n        return state;\n      }\n\n    case Actions.UPLOADER_COMPLETE:\n      if (store.length === 0) {\n        return _objectSpread({}, state, {\n          activeUpload: null,\n          uploading: false\n        });\n      } else {\n        var newStore = _toConsumableArray(store);\n\n        var newActive = newStore.pop();\n        return _objectSpread({}, state, {\n          store: newStore,\n          activeUpload: newActive,\n          uploading: false\n        });\n      }\n\n    case Actions.UPLOADER_UPDATE_PROGRESS:\n      return _objectSpread({}, state, {\n        activeUpload: _objectSpread({}, activeUpload, {}, data)\n      });\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nimport { isIos } from '@morphoto/client-common';\nimport log from 'loglevel';\nvar defaultFlags = {\n  iOSWarning: isIos(),\n  install: true,\n  useLoggedOut: false\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultFlags;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  if (!action) return state;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.SETFLAG:\n      var flagName = data.flagName,\n          flagVal = data.flagVal;\n\n      if (Boolean(flagVal) !== flagVal) {\n        log.warn(\"flag: '\".concat(flagName, \"' must be a boolean\"));\n        return state;\n      }\n\n      return _objectSpread({}, state, _defineProperty({}, flagName, flagVal));\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nvar offlineInit = {\n  completedDownload: false,\n  viewport: null\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : offlineInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  if (!action) return state;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.OFFLINE_VIEWPORT_SAVE:\n      return _objectSpread({}, state, {\n        viewport: data\n      });\n\n    case Actions.OFFLINE_SET_STATUS:\n      return _objectSpread({}, state, {\n        completedDownload: data\n      });\n\n    default:\n      return state;\n  }\n});","import { combineReducers } from 'redux';\nimport map from './map';\nimport home from './home';\nimport uploader from './uploader';\nimport flags from './flags';\nimport offline from './offline';\nvar appReducer = combineReducers({\n  map: map,\n  home: home,\n  uploader: uploader,\n  flags: flags,\n  offline: offline\n});\n\nvar rootReducer = function rootReducer(state, action) {\n  if (action.type === 'RESET_ALL_STATE') {\n    state = undefined;\n  }\n\n  return appReducer(state, action);\n};\n\nexport default rootReducer;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from './actions';\nimport { initState } from './reducers/uploader';\nimport s3Upload from '../s3Upload';\nimport log from 'loglevel';\nexport default (function (_ref) {\n  var getState = _ref.getState,\n      dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      var _getUploadState = getUploadState(getState),\n          online = _getUploadState.online,\n          uploading = _getUploadState.uploading,\n          activeUpload = _getUploadState.activeUpload;\n\n      if (action.type.indexOf('persist/REHYDRATE') === 0) {\n        try {\n          var newAction = _objectSpread({}, action);\n\n          action.payload.uploader.uploading = false;\n          return next(newAction);\n        } catch (_unused) {\n          return next(action);\n        }\n      }\n\n      function kickoff(uploadObj) {\n        var updateUploadProgress = function updateUploadProgress(newProgress) {\n          log.info('MIDDLEWARE Update', newProgress);\n          dispatch({\n            type: Actions.UPLOADER_UPDATE_PROGRESS,\n            data: newProgress\n          });\n        };\n\n        var completeActiveUpload = function completeActiveUpload() {\n          dispatch({\n            type: Actions.UPLOADER_COMPLETE\n          });\n        };\n\n        var failRetry = function failRetry() {\n          var newState = getUploadState(getState);\n\n          if (newState.activeUpload) {\n            dispatch({\n              type: Actions.UPLOADER_COMPLETE\n            });\n            updateUploadProgress({\n              progress: 0,\n              retry: newState.activeUpload.retry > -1 ? newState.activeUpload.retry + 1 : 1\n            });\n          }\n        };\n\n        dispatch({\n          type: Actions.UPLOADER_SET_UPLOADING,\n          data: true\n        });\n        s3Upload(uploadObj, updateUploadProgress, completeActiveUpload, failRetry);\n      }\n\n      if (online && !uploading && action.type !== Actions.UPLOADER_SET_UPLOADING) {\n        if (activeUpload && Date.now() < activeUpload.expires) {\n          kickoff(activeUpload);\n        } else if (action.type === Actions.UPLOADER_QUEUE && !activeUpload) {\n          kickoff(action.data);\n        }\n      }\n\n      return next(action);\n    };\n  };\n});\n\nfunction getUploadState(getState) {\n  try {\n    var currState = getState();\n    var uploadState = currState['uploader'];\n    return uploadState || initState;\n  } catch (_unused2) {\n    return initState;\n  }\n}","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport { stateStore } from '../offline';\nimport queueMiddleware from './queueMiddleware';\nvar persistConfig = {\n  key: 'root',\n  storage: stateStore\n};\nvar persistedReducer = persistReducer(persistConfig, rootReducer);\n\nvar configureStoreDev = function configureStoreDev(preloadedState) {\n  var _require = require('redux-devtools-extension'),\n      devToolsEnhancer = _require.devToolsEnhancer;\n\n  var _require2 = require('redux-logger'),\n      createLogger = _require2.createLogger;\n\n  var store = createStore(persistedReducer, preloadedState, compose(applyMiddleware(thunk, queueMiddleware, createLogger()), devToolsEnhancer()));\n\n  if (module.hot) {\n    module.hot.accept('./reducers', function () {\n      store.replaceReducer(rootReducer);\n    });\n  }\n\n  return store;\n};\n\nvar configureStoreProd = function configureStoreProd(preloadedState) {\n  var store = createStore(persistedReducer, preloadedState, compose(applyMiddleware(thunk, queueMiddleware)));\n  return store;\n};\n\nexport default (function () {\n  var store = process.env.NODE_ENV === 'production' ? configureStoreProd() : configureStoreDev();\n  return {\n    store: store,\n    persistor: persistStore(store)\n  };\n});","import React from 'react';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { Provider } from 'react-redux';\nimport storeConfig from './storeConfig';\nimport { LoadingWrapped as Loading } from '@morphoto/client-auth';\n\nvar withReduxProvider = function withReduxProvider(BaseComponent) {\n  return function (props) {\n    var _storeConfig = storeConfig(),\n        store = _storeConfig.store,\n        persistor = _storeConfig.persistor;\n\n    return React.createElement(Provider, {\n      store: store\n    }, React.createElement(PersistGate, {\n      loading: React.createElement(Loading, null),\n      persistor: persistor\n    }, React.createElement(BaseComponent, props)));\n  };\n};\n\nexport default withReduxProvider;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport PersonIcon from '@material-ui/icons/Person';\nimport LabelIcon from '@material-ui/icons/Label';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      minHeight: 60\n    },\n    chosenItem: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.dark\n    },\n    avatar: {\n      background: theme.palette.primary.main\n    },\n    closeIcon: {\n      color: theme.palette.primary.contrastText,\n      paddingRight: 0\n    },\n    avatarImg: {\n      height: '100%',\n      width: '100%',\n      objectFit: 'cover'\n    }\n  };\n});\n\nvar SearchContextItem = function SearchContextItem(_ref) {\n  var className = _ref.className,\n      variant = _ref.variant,\n      name = _ref.name,\n      description = _ref.description,\n      gravatar = _ref.gravatar,\n      onClick = _ref.onClick,\n      onCancel = _ref.onCancel;\n  var classes = useStyles();\n  var TheIcon = PlaceIcon;\n\n  var getAvatar = function getAvatar(src) {\n    return function () {\n      return React.createElement(Avatar, {\n        className: classes.avatar\n      }, React.createElement(\"img\", {\n        className: classes.avatarImg,\n        alt: \"profile\",\n        src: src\n      }));\n    };\n  };\n\n  switch (variant) {\n    case 'tag':\n      TheIcon = LabelIcon;\n      break;\n\n    case 'location':\n      TheIcon = PlaceIcon;\n      break;\n\n    case 'user':\n      TheIcon = gravatar ? getAvatar(gravatar) : PersonIcon;\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ListItem, {\n    className: classNames(className, classes.root, onCancel ? classes.chosenItem : null),\n    button: !!onClick,\n    onClick: onClick\n  }, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.avatar\n  }, React.createElement(TheIcon, {\n    color: \"inherit\"\n  }))), React.createElement(ListItemText, {\n    disableTypography: true\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, name), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, description)), onCancel && React.createElement(ListItemIcon, null, React.createElement(IconButton, {\n    onClick: onCancel,\n    className: classes.closeIcon\n  }, React.createElement(CancelIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nSearchContextItem.propTypes = {\n  variant: PropTypes.oneOf(['tag', 'location', 'user']),\n  onClick: PropTypes.func,\n  gravatar: PropTypes.string,\n  className: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  onCancel: PropTypes.func\n};\nexport default SearchContextItem;\nexport var SearchContexItemCosmos = function SearchContexItemCosmos() {\n  return React.createElement(List, null, React.createElement(SearchContextItem, {\n    variant: \"tag\",\n    name: \"SomeTag\",\n    description: \"Some description of what I am\"\n  }), React.createElement(SearchContextItem, {\n    variant: \"location\",\n    name: \"Some Location\",\n    description: \"Some description of what I am\"\n  }), React.createElement(SearchContextItem, {\n    variant: \"user\",\n    name: \"User McUserSon\",\n    description: \"Some description of what I am\"\n  }));\n};","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport SearchContextItem from './SearchContextItem';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      flexGrow: 1\n    },\n    listSection: {\n      backgroundColor: 'inherit'\n    },\n    placeholderText: {\n      textAlign: 'center',\n      padding: theme.spacing(3, 1),\n      color: theme.palette.grey[400]\n    },\n    ul: {\n      backgroundColor: 'inherit',\n      padding: 0\n    }\n  };\n});\n\nvar SearchContextResults = function SearchContextResults(_ref) {\n  var variant = _ref.variant,\n      loading = _ref.loading,\n      contextResults = _ref.contextResults,\n      setContextChoice = _ref.setContextChoice;\n  var classes = useStyles();\n\n  if (loading) {\n    return React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h3\"\n    }, \"Searching...\");\n  } else if (!contextResults || contextResults.length === 0) {\n    return React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h4\"\n    }, \"No \", variant, \" results\");\n  }\n\n  return React.createElement(List, {\n    className: classes.root\n  }, contextResults.map(function (cr, idx) {\n    return React.createElement(SearchContextItem, _extends({\n      key: \"scr-\".concat(idx),\n      variant: variant,\n      onClick: function onClick() {\n        return setContextChoice(cr);\n      }\n    }, cr));\n  }));\n};\n\nSearchContextResults.propTypes = {\n  variant: PropTypes.oneOf(['keyword', 'tag', 'location', 'user']),\n  loading: PropTypes.bool,\n  contextResults: PropTypes.array.isRequired,\n  setContextChoice: PropTypes.func.isRequired\n};\nexport default SearchContextResults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      textAlign: 'center',\n      fontStyle: 'italic',\n      padding: theme.spacing(2, 1)\n    }\n  };\n});\n\nvar SearchEnder = function SearchEnder(_ref) {\n  var style = _ref.style,\n      icon = _ref.icon,\n      text = _ref.text;\n  var classes = useStyles();\n  return React.createElement(Typography, {\n    className: classes.root,\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    component: \"div\",\n    style: style\n  }, icon, text);\n};\n\nSearchEnder.propTypes = {\n  style: PropTypes.object,\n  icon: PropTypes.any,\n  text: PropTypes.string\n};\nexport default SearchEnder;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport SearchContextItem from './SearchContextItem';\nimport SearchEnder from './SearchEnder';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SeriesListItem } from '@morphoto/photoseries';\nimport { util } from '@morphoto/common';\nimport log from 'loglevel';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    ctxItem: {\n      flexGrow: 0\n    },\n    list: {\n      flexGrow: 1,\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    },\n    placeholderText: {\n      textAlign: 'center',\n      padding: theme.spacing(3, 1),\n      color: theme.palette.grey[400]\n    },\n    listSection: {\n      backgroundColor: 'inherit'\n    },\n    ul: {\n      backgroundColor: 'inherit',\n      padding: 0\n    }\n  };\n});\n\nvar SearchResults = function SearchResults(_ref) {\n  var variant = _ref.variant,\n      loading = _ref.loading,\n      seriesList = _ref.seriesList,\n      contextChoice = _ref.contextChoice,\n      onCancel = _ref.onCancel,\n      onResultClick = _ref.onResultClick,\n      fetchMore = _ref.fetchMore;\n  var classes = useStyles();\n  var listRef = useRef();\n  var enderRef = useRef();\n  var handleScroll = util.debounce(function () {\n    if (!loading && fetchMore && enderRef.current && listRef.current) {\n      var offsetTop = enderRef.current.offsetTop;\n      var _listRef$current = listRef.current,\n          scrollTop = _listRef$current.scrollTop,\n          offsetHeight = _listRef$current.offsetHeight;\n      var scrollBottom = offsetHeight + scrollTop;\n\n      if (offsetTop < scrollBottom * 2) {\n        log.info('SCROLL', {\n          offsetHeight: offsetHeight,\n          scrollTop: scrollTop,\n          offsetTop: offsetTop\n        });\n        fetchMore();\n      }\n    }\n  }, 500);\n  useEffect(handleScroll, [seriesList]);\n  var content = null;\n\n  if (loading) {\n    content = React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h3\"\n    }, \"Searching...\");\n  } else if (seriesList && seriesList.length > 0) {\n    content = seriesList.map(function (series, idx) {\n      return React.createElement(SeriesListItem, {\n        key: \"series-\".concat(idx),\n        series: series,\n        onClick: function onClick() {\n          return onResultClick(series.id);\n        },\n        showCreatedOn: true,\n        showLastPhoto: true\n      });\n    });\n    content.push(React.createElement(\"div\", {\n      key: \"ender\",\n      ref: enderRef\n    }, React.createElement(SearchEnder, {\n      text: fetchMore ? 'Loading...' : 'No More Results'\n    })));\n  } else {\n    content = React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h4\"\n    }, \"No series found\");\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, contextChoice && React.createElement(SearchContextItem, _extends({\n    className: classes.ctxItem\n  }, contextChoice, {\n    variant: variant,\n    onCancel: onCancel\n  })), React.createElement(List, {\n    className: classes.list,\n    subheader: React.createElement(\"li\", null),\n    onScroll: handleScroll,\n    innerRef: listRef\n  }, content));\n};\n\nSearchResults.propTypes = {\n  variant: PropTypes.oneOf(['keyword', 'tag', 'location', 'user']),\n  seriesList: PropTypes.array.isRequired,\n  loading: PropTypes.bool,\n  contextChoice: PropTypes.object,\n  onResultClick: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  fetchMore: PropTypes.func\n};\nexport default SearchResults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      padding: '10%',\n      display: 'flex',\n      flexDirection: 'column',\n      opacity: 0.3,\n      textAlign: 'center'\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      color: theme.palette.primary.light,\n      opacity: 0.5\n    },\n    primary: {\n      flex: '1 1 30%',\n      width: '100%'\n    },\n    secondary: {\n      flex: '1 1 30%',\n      width: '100%'\n    }\n  };\n});\n\nvar SearchPlaceholder = function SearchPlaceholder(_ref) {\n  var icon = _ref.icon,\n      primary = _ref.primary,\n      secondary = _ref.secondary;\n  var classes = useStyles();\n  var PlaceholderIcon = icon;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(PlaceholderIcon, {\n    className: classes.icon\n  }), primary && React.createElement(Typography, {\n    className: classes.primary,\n    variant: \"h3\"\n  }, primary), secondary && React.createElement(Typography, {\n    className: classes.secondary,\n    variant: \"h4\"\n  }, secondary));\n};\n\nSearchPlaceholder.propTypes = {\n  icon: PropTypes.object,\n  primary: PropTypes.string,\n  secondary: PropTypes.string\n};\nexport default SearchPlaceholder;","import React, { useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Container from '@material-ui/core/Container';\nimport PortableWifiOffIcon from '@material-ui/icons/PortableWifiOff';\nimport LabelIcon from '@material-ui/icons/Label';\nimport SearchIcon from '@material-ui/icons/Search';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport PersonIcon from '@material-ui/icons/Person';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchContextResults from './SearchContextResults';\nimport SearchResults from './SearchResults';\nimport SearchPlaceholder from './SearchPlaceholder';\nimport SearchInput from './SearchInput';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport { config, AppContext } from '@morphoto/client-common';\nvar TABS = config.home.SEARCH_TABS;\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    container: {\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column',\n      padding: 0,\n      flexGrow: 1\n    },\n    tabs: {},\n    ListWrapper: {\n      flexGrow: 1,\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    tab: {\n      flexGrow: 1\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Search = function Search(_ref) {\n  var currentTab = _ref.currentTab,\n      defaultText = _ref.defaultText,\n      searchText = _ref.searchText,\n      contextResults = _ref.contextResults,\n      searchResults = _ref.searchResults,\n      contextChoice = _ref.contextChoice,\n      loading = _ref.loading,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online;\n\n  useEffect(function () {\n    if (contextResults && !searchResults && contextResults.length === 1) {\n      actions.setContextChoice(contextResults[0]);\n    }\n  }, [contextResults]);\n  var placeholder = {};\n\n  switch (currentTab) {\n    case TABS.KEYWORD:\n      placeholder = {\n        primary: 'Keyword search',\n        secondary: 'example: \\'beaver...\\'',\n        icon: SearchIcon\n      };\n      break;\n\n    case TABS.TAG:\n      placeholder = {\n        primary: 'Tag search',\n        secondary: 'example: \\'beaver...\\'',\n        icon: LabelIcon\n      };\n      break;\n\n    case TABS.USER:\n      placeholder = {\n        primary: 'User search',\n        secondary: 'example: \\'SuperGreg123...\\'',\n        icon: PersonIcon\n      };\n      break;\n\n    case TABS.LOCATION:\n      placeholder = {\n        primary: 'Location Search',\n        secondary: 'example: \\'Vancouver...\\'',\n        icon: PlaceIcon\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  var content = null;\n\n  if (!online.isOnline) {\n    content = React.createElement(SearchPlaceholder, {\n      primary: \"Search Disabled\",\n      secondary: \"(Offline)\",\n      icon: PortableWifiOffIcon\n    });\n  } else if ((contextChoice || currentTab === TABS.KEYWORD) && searchResults) {\n    content = React.createElement(SearchResults, {\n      variant: currentTab,\n      loading: loading,\n      onResultClick: actions.onResultClick,\n      fetchMore: actions.fetchMore,\n      seriesList: searchResults,\n      contextChoice: contextChoice,\n      onCancel: function onCancel() {\n        return actions.setContextChoice(null);\n      }\n    });\n  } else if (contextResults) {\n    content = React.createElement(SearchContextResults, {\n      loading: loading,\n      variant: currentTab,\n      contextResults: contextResults,\n      setContextChoice: currentTab === TABS.LOCATION ? actions.onMapClick : actions.setContextChoice\n    });\n  } else if (defaultText.length > 0) {\n    content = React.createElement(Typography, null, \"Searching for \", \"'\".concat(searchText, \"'\") || '...');\n  } else {\n    content = React.createElement(SearchPlaceholder, placeholder);\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(SearchInput, {\n    disabled: !online.isOnline,\n    onChange: actions.setSearchText,\n    defaultValue: searchText\n  })), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, online.isOnline && React.createElement(Tabs, {\n    value: currentTab,\n    disabled: !online.isOnline,\n    onChange: function onChange(e, val) {\n      return actions.setCurrentTab(val);\n    },\n    indicatorColor: \"primary\",\n    classes: {\n      flexContainer: classes.tabs\n    },\n    centered: true\n  }, React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.TAG,\n    label: \"Tags\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.KEYWORD,\n    label: \"Keywords\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.LOCATION,\n    label: \"Places\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.USER,\n    label: \"Users\"\n  })), React.createElement(\"div\", {\n    className: classes.ListWrapper\n  }, content)));\n};\n\nSearch.propTypes = {\n  loading: PropTypes.bool,\n  currentTab: PropTypes.string.isRequired,\n  contextChoice: PropTypes.object,\n  defaultText: PropTypes.string.isRequired,\n  searchText: PropTypes.string.isRequired,\n  contextResults: PropTypes.array,\n  searchResults: PropTypes.array,\n  actions: PropTypes.shape({\n    setCurrentTab: PropTypes.func.isRequired,\n    setSearchText: PropTypes.func.isRequired,\n    setContextChoice: PropTypes.func.isRequired,\n    fetchMore: PropTypes.func,\n    onMapClick: PropTypes.func.isRequired,\n    onResultClick: PropTypes.func.isRequired\n  })\n};\nSearch.defaultProps = {\n  currentTab: TABS.TAGS,\n  defaultText: ''\n};\nexport default Search;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Badge from '@material-ui/core/Badge';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport LabelIcon from '@material-ui/icons/Label';\nimport PauseIcon from '@material-ui/icons/PauseCircleFilled';\nimport PlayIcon from '@material-ui/icons/PlayCircleFilled';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { Photo } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { useComponentSize } from '@morphoto/client-common';\nimport style from './Slideshow.style';\nvar useStyles = makeStyles(style);\n\nvar Slideshow = function Slideshow(_ref) {\n  var onCancel = _ref.onCancel,\n      photos = _ref.photos,\n      transition = _ref.transition;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useStepper = useStepper(photos.length, transition),\n      activeStep = _useStepper.activeStep,\n      lastStep = _useStepper.lastStep,\n      handleForward = _useStepper.handleForward,\n      handleBack = _useStepper.handleBack,\n      paused = _useStepper.paused,\n      pause = _useStepper.pause,\n      play = _useStepper.play;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showXYTags = _useState2[0],\n      setShowXYTags = _useState2[1];\n\n  var refImgWrap = useRef(null);\n\n  var _useComponentSize = useComponentSize(refImgWrap),\n      _useComponentSize$siz = _useComponentSize.size,\n      height = _useComponentSize$siz.height,\n      width = _useComponentSize$siz.width;\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(\"div\", {\n    ref: refImgWrap,\n    className: classes.slideContainer\n  }, photos.map(function (slide, idx) {\n    return React.createElement(GridListTile, {\n      key: \"slide-\".concat(idx),\n      className: classNames(classes.slide, activeStep === idx && classes.active, lastStep === idx && classes.last),\n      onClick: function onClick() {\n        return setShowXYTags(!showXYTags);\n      },\n      style: {\n        height: height,\n        width: width,\n        transition: theme.transitions.create(['opacity'], {\n          duration: 1 / 4 * transition\n        })\n      }\n    }, React.createElement(Photo, {\n      photo: slide,\n      className: classes.photo,\n      showTags: showXYTags\n    }), React.createElement(Typography, {\n      className: classes.labelBadge\n    }, \"Tags: \", showXYTags ? 'On ' : 'Off ', React.createElement(Badge, {\n      color: \"secondary\",\n      badgeContent: photos[activeStep].tags.filter(function (tag) {\n        return tag.coords;\n      }).length\n    }, React.createElement(LabelIcon, {\n      color: \"inherit\"\n    }))), React.createElement(GridListTileBar, {\n      className: classes.titleBar,\n      titlePosition: \"top\",\n      title: React.createElement(Typography, {\n        color: \"inherit\",\n        variant: \"caption\"\n      }, React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          return onCancel();\n        }\n      }, React.createElement(ArrowBackIcon, null)), dates.formatDate(slide.takenOn)),\n      subtitle: React.createElement(\"em\", null, paused ? 'Paused' : '    '),\n      actionIcon: paused ? React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          play();\n        }\n      }, React.createElement(PlayIcon, null)) : React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          pause();\n        }\n      }, React.createElement(PauseIcon, null))\n    }));\n  }), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualBack,\n    onClick: handleBack,\n    color: \"inherit\"\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null)), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualForward,\n    onClick: handleForward,\n    color: \"inherit\"\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null))), React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"static\",\n    activeStep: activeStep,\n    classes: {\n      root: classes.mobileStepper,\n      dotActive: classes.dotActive\n    },\n    nextButton: React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleForward,\n      disabled: activeStep === photos.length - 1\n    }, \"Next\", theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null)),\n    backButton: React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleBack,\n      disabled: activeStep === 0\n    }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null), \"Back\")\n  }));\n};\n\nSlideshow.propTypes = {\n  isFullScreen: PropTypes.bool,\n  photos: PropTypes.array.isRequired,\n  transition: PropTypes.number,\n  onCancel: PropTypes.func.isRequired\n};\nSlideshow.defaultProps = {\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n};\nexport default Slideshow;\n\nvar useStepper = function useStepper(num, interval) {\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeStep = _useState4[0],\n      setActiveStep = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      paused = _useState6[0],\n      setPaused = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      lastStep = _useState8[0],\n      setLastStep = _useState8[1];\n\n  var timerRef = useRef();\n\n  var handleForward = function handleForward() {\n    setLastStep(activeStep);\n    if (activeStep + 1 >= num) setActiveStep(0);else setActiveStep(activeStep + 1);\n\n    if (!paused) {\n      destroyTimer();\n      createTimer();\n    }\n  };\n\n  var handleBack = function handleBack() {\n    setLastStep(activeStep);\n    if (activeStep - 1 < 0) setActiveStep(num - 1);else setActiveStep(activeStep - 1);\n\n    if (!paused) {\n      destroyTimer();\n      createTimer();\n    }\n  };\n\n  var pause = function pause() {\n    destroyTimer();\n    setPaused(true);\n  };\n\n  var play = function play() {\n    setPaused(false);\n    destroyTimer();\n    createTimer();\n  };\n\n  var createTimer = function createTimer() {\n    timerRef.current = window.setInterval(function () {\n      return setActiveStep(function (oldStep) {\n        setLastStep(oldStep);\n        return oldStep + 1 >= num ? 0 : oldStep + 1;\n      });\n    }, interval);\n  };\n\n  var destroyTimer = function destroyTimer() {\n    if (timerRef.current) window.clearInterval(timerRef.current);\n  };\n\n  useEffect(function () {\n    createTimer();\n    return function () {\n      destroyTimer();\n    };\n  }, []);\n  return {\n    activeStep: activeStep,\n    lastStep: lastStep,\n    handleForward: handleForward,\n    handleBack: handleBack,\n    setActiveStep: setActiveStep,\n    paused: paused,\n    pause: pause,\n    play: play\n  };\n};","export default (function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    swipeAble: {\n      height: '100%'\n    },\n    slideContainer: {\n      flexGrow: 1\n    },\n    titleBar: {\n      padding: theme.spacing(0, 1),\n      height: '35px!important'\n    },\n    mobileStepper: {\n      flexGrow: 0,\n      background: theme.palette.grey[800],\n      color: theme.palette.getContrastText(theme.palette.grey[800])\n    },\n    slide: {\n      top: 0,\n      zIndex: 0,\n      opacity: 0,\n      position: 'absolute',\n      display: 'block',\n      overflow: 'hidden',\n      width: '100%',\n      height: '100%',\n      minHeight: 300\n    },\n    dotActive: {\n      background: 'white'\n    },\n    iconButton: {\n      color: 'white'\n    },\n    active: {\n      zIndex: 5,\n      opacity: 1\n    },\n    last: {\n      opacity: 1,\n      zIndex: 4\n    },\n    tagContainer: {},\n    labelBadge: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      right: theme.spacing(2),\n      bottom: theme.spacing(1),\n      opacity: 0.8\n    },\n    tagChip: {\n      marginRight: theme.spacing(1),\n      fontSize: 10,\n      height: theme.spacing(2),\n      padding: theme.spacing(0.5)\n    },\n    xyTagChip: {\n      position: 'absolute',\n      fontSize: theme.spacing(1),\n      height: theme.spacing(2)\n    },\n    manualBack: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      left: 0,\n      top: '50%'\n    },\n    manualForward: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      right: 0,\n      top: '50%'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SwipeableViews from 'react-swipeable-views';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport IconButton from '@material-ui/core/IconButton';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Badge from '@material-ui/core/Badge';\nimport LabelIcon from '@material-ui/icons/Label';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { Photo } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport style from './SwipeShow.style';\nvar useStyles = makeStyles(style);\n\nvar SwipeShow = function SwipeShow(_ref) {\n  var photos = _ref.photos,\n      onImageSelect = _ref.onImageSelect,\n      activePhotoId = _ref.activePhotoId,\n      setActivePhotoId = _ref.setActivePhotoId;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showTags = _useState2[0],\n      setShowTags = _useState2[1];\n\n  var singular = photos.length < 2;\n  var activePhotoIndex = photos.findIndex(function (p) {\n    return p.id === activePhotoId;\n  });\n  if (!(activePhotoIndex > 0)) activePhotoIndex = 0;\n  var activePhoto = activePhotoIndex > -1 ? photos[activePhotoIndex] : null;\n\n  var handleForward = function handleForward() {\n    return setActivePhotoId(activePhotoIndex >= photos.length - 1 ? photos[0].id : photos[activePhotoIndex + 1].id);\n  };\n\n  var handleBack = function handleBack() {\n    return setActivePhotoId(activePhotoIndex <= 0 ? photos[photos.length - 1].id : photos[activePhotoIndex - 1].id);\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(SwipeableViews, {\n    axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n    index: activePhotoIndex,\n    onChangeIndex: function onChangeIndex(val) {\n      return setActivePhotoId(photos[val] ? photos[val].id : photos[0].id);\n    },\n    enableMouseEvents: true\n  }, photos.map(function (photo, idx) {\n    return React.createElement(\"div\", {\n      className: classes.photoWrapper,\n      key: \"swipeshowpic-\".concat(idx),\n      onClick: function onClick() {\n        if (activePhoto && activePhoto.id && onImageSelect) {\n          onImageSelect(activePhoto.id);\n        }\n      }\n    }, React.createElement(Photo, {\n      photo: photo,\n      className: classes.photo,\n      showTags: showTags\n    }));\n  })), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualBack,\n    onClick: handleBack,\n    color: \"inherit\",\n    disabled: activePhotoIndex === 0\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null)), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualForward,\n    onClick: handleForward,\n    color: \"inherit\",\n    disabled: activePhotoIndex === photos.length - 1\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null)), React.createElement(GridListTileBar, {\n    title: singular ? 'Photo' : \"Photo (\".concat(activePhotoIndex + 1, \"/\").concat(photos.length, \")\"),\n    subtitle: activePhoto.takenOn && React.createElement(\"span\", null, dates.formatDate(activePhoto.takenOn)),\n    actionIcon: React.createElement(React.Fragment, null, React.createElement(IconButton, {\n      className: classes.tagButton,\n      onClick: function onClick() {\n        return setShowTags(!showTags);\n      }\n    }, React.createElement(Badge, {\n      color: showTags ? 'primary' : 'secondary',\n      badgeContent: activePhoto.tags ? activePhoto.tags.filter(function (tag) {\n        return tag.coords;\n      }).length : null\n    }, React.createElement(LabelIcon, null))))\n  })), !singular && React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"static\",\n    activeStep: activePhotoIndex,\n    classes: {\n      root: classes.mobileStepper,\n      dots: classes.dots\n    }\n  }));\n};\n\nSwipeShow.propTypes = {\n  photos: PropTypes.array,\n  transition: PropTypes.number,\n  activePhotoId: PropTypes.string,\n  setActivePhotoId: PropTypes.func.isRequired,\n  onImageSelect: PropTypes.func.isRequired\n};\nSwipeShow.defaultProps = {\n  activePhoto: 0,\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n};\nexport default SwipeShow;","export default (function (theme) {\n  return {\n    root: {\n      position: 'relative'\n    },\n    inner: {\n      position: 'relative'\n    },\n    photoWrapper: {\n      minHeight: 250,\n      height: 250\n    },\n    dateCaption: {\n      padding: theme.spacing(1),\n      background: theme.palette.primary.dark,\n      color: theme.palette.primary.contrastText,\n      textAlign: 'center'\n    },\n    mobileStepper: {},\n    manualBack: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      left: 0,\n      top: '50%'\n    },\n    manualForward: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      right: 0,\n      top: '50%'\n    },\n    tagButton: {\n      color: 'rgba(255, 255, 255, 0.54)'\n    },\n    slideshowButton: {\n      color: 'rgba(255, 255, 255, 0.54)'\n    },\n    dots: {\n      margin: '0 auto'\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      padding: 0\n    },\n    imgContainer: {\n      flex: '0 0 100px',\n      margin: theme.spacing(0, 1, 0, 0)\n    },\n    gravatarImg: {\n      verticalAlign: 'top'\n    }\n  };\n});\n\nvar MeCard = function MeCard(_ref) {\n  var user = _ref.user,\n      loading = _ref.loading,\n      onAvatarClick = _ref.onAvatarClick;\n  var classes = useStyles();\n  if (loading || !user) return 'LOADING...';\n  return React.createElement(ListItem, {\n    className: classes.root,\n    onClick: onAvatarClick,\n    disableGutters: true\n  }, React.createElement(ListItemIcon, {\n    className: classes.imgContainer\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: user.gravatar\n  })), React.createElement(ListItemText, {\n    primary: user.username,\n    secondary: \"Member since: \".concat(dates.formatDate(user.createdOn, 'LL'))\n  }));\n};\n\nMeCard.propTypes = {\n  user: PropTypes.object,\n  loading: PropTypes.bool,\n  onAvatarClick: PropTypes.func\n};\nexport default MeCard;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Divider from '@material-ui/core/Divider';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { SeriesListItem } from '@morphoto/photoseries';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport MeCard from './MeCard';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      background: theme.palette.background.paper,\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    filterContainer: {\n      color: theme.palette.primary.secondary,\n      background: theme.palette.background.default,\n      textAlign: 'center',\n      padding: theme.spacing(1, 1)\n    },\n    container: {\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column',\n      flexGrow: 1,\n      padding: 0\n    },\n    filterChip: {},\n    seriesListItemWrap: {\n      margin: theme.spacing(1, 0.5)\n    },\n    seriesList: {\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    },\n    tabs: {},\n    tab: {\n      padding: theme.spacing(0, 1)\n    },\n    noneFound: {\n      color: theme.palette.text.secondary,\n      textAlign: 'center',\n      padding: theme.spacing(2)\n    }\n  };\n});\nvar SORT = {\n  ACTIVITY: 'Last Photo',\n  CREATED: 'Created',\n  NAME: 'Name'\n};\n\nvar MyProfile = function MyProfile(_ref) {\n  var mySeries = _ref.mySeries,\n      user = _ref.user,\n      watchingSeries = _ref.watchingSeries,\n      loading = _ref.loading,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentTab = _useState2[0],\n      setCurrentTab = _useState2[1];\n\n  var _useState3 = useState(SORT.ACTIVITY),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sortVal = _useState4[0],\n      setSort = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sortAsc = _useState6[0],\n      setSortAsc = _useState6[1];\n\n  var sortSetter = function sortSetter(newSort) {\n    if (newSort === sortVal) setSortAsc(!sortAsc);else setSort(newSort);\n  };\n\n  var tabFeed = currentTab === 0 ? mySeries : watchingSeries;\n  if (!tabFeed) tabFeed = [];\n\n  switch (sortVal) {\n    case SORT.ACTIVITY:\n      if (sortAsc) tabFeed.sort(function (a, b) {\n        return a.latest.takenOn - b.latest.takenOn;\n      });else tabFeed.sort(function (a, b) {\n        return b.latest.takenOn - a.latest.takenOn;\n      });\n      break;\n\n    case SORT.CREATED:\n      if (sortAsc) tabFeed.sort(function (a, b) {\n        return a.createdOn - b.createdOn;\n      });else tabFeed.sort(function (a, b) {\n        return b.createdOn - a.createdOn;\n      });\n      break;\n\n    case SORT.NAME:\n      if (sortAsc) {\n        tabFeed.sort(function (a, b) {\n          if (a.name < b.name) {\n            return -1;\n          }\n\n          if (a.name > b.firstname) {\n            return 1;\n          }\n\n          return 0;\n        });\n      } else {\n        tabFeed.sort(function (a, b) {\n          if (b.name < a.name) {\n            return -1;\n          }\n\n          if (b.name > a.name) {\n            return 1;\n          }\n\n          return 0;\n        });\n      }\n\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(Typography, null, \"My Profile\")), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, React.createElement(MeCard, {\n    user: user\n  }), React.createElement(Tabs, {\n    value: currentTab,\n    onChange: function onChange(e, val) {\n      return setCurrentTab(val);\n    },\n    indicatorColor: \"primary\",\n    centered: true,\n    classes: {\n      flexContainer: classes.tabs\n    }\n  }, React.createElement(Tab, {\n    className: classes.tab,\n    value: 0,\n    label: \"My Series\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: 1,\n    label: \"Watching\"\n  })), React.createElement(Divider, null), React.createElement(\"div\", {\n    className: classes.filterContainer\n  }, React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.NAME,\n    onClick: function onClick() {\n      return sortSetter(SORT.NAME);\n    },\n    label: SORT.NAME\n  }), \"|\", React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.ACTIVITY,\n    onClick: function onClick() {\n      return sortSetter(SORT.ACTIVITY);\n    },\n    label: SORT.ACTIVITY\n  }), \"|\", React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.CREATED,\n    onClick: function onClick() {\n      return sortSetter(SORT.CREATED);\n    },\n    label: SORT.CREATED\n  })), React.createElement(Divider, null), React.createElement(\"div\", {\n    className: classes.seriesList\n  }, !loading && (!tabFeed || tabFeed.length === 0) && React.createElement(Typography, {\n    className: classes.noneFound,\n    component: \"div\"\n  }, \"No Series Found\"), loading && React.createElement(Typography, {\n    className: classes.noneFound,\n    component: \"div\"\n  }, \"Loading...\"), tabFeed.map(function (series, idx) {\n    return React.createElement(SeriesListItem, {\n      key: \"seriesListItem\".concat(series.id),\n      series: series,\n      showCreatedOn: true,\n      showLastPhoto: true,\n      onClick: function onClick() {\n        return actions.jumpToSeries(series.id);\n      }\n    });\n  }))));\n};\n\nMyProfile.propTypes = {\n  loading: PropTypes.bool,\n  user: PropTypes.object.isRequired,\n  mySeries: PropTypes.array.isRequired,\n  watchingSeries: PropTypes.array.isRequired,\n  actions: PropTypes.shape({\n    jumpToSeries: PropTypes.func.isRequired,\n    jumpToMap: PropTypes.func.isRequired\n  })\n};\nexport default MyProfile;\nvar useFilterStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      margin: theme.spacing(0, 0.75, 0, 0.75)\n    }\n  };\n});\n\nvar FilterSortItem = function FilterSortItem(_ref2) {\n  var active = _ref2.active,\n      asc = _ref2.asc,\n      onClick = _ref2.onClick,\n      label = _ref2.label;\n  var classes = useFilterStyles();\n  var arrow = asc === true ? '' : '';\n  return React.createElement(Button, {\n    size: \"small\",\n    className: classes.root,\n    onClick: onClick,\n    color: active ? 'secondary' : 'inherit'\n  }, label, React.createElement(\"span\", {\n    style: {\n      opacity: active ? 1 : 0\n    }\n  }, arrow));\n};\n\nFilterSortItem.propTypes = {\n  active: PropTypes.bool,\n  asc: PropTypes.bool,\n  onClick: PropTypes.func.isRequired,\n  label: PropTypes.string.isRequired\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.userKeys = exports.userFragment = exports.photoKeys = exports.photoFragment = exports.seriesKeys = exports.seriesFragment = exports.feedSeriesSummaryKeys = exports.feedSeriesSummaryFragment = exports.seriesSummaryKeys = exports.seriesSummaryFragment = exports.userSummaryKeys = exports.userSummaryFragment = exports.photoSummaryKeys = exports.photoSummaryFragment = void 0;\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nfragment userFragment on User {\\n  id\\n  username\\n  gravatar\\n  watching\\n  gravatarProfile\\n  meta\\n  createdOn\\n  updatedOn\\n  __typename\\n}\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nfragment photoFragment on Photo {\\n  id\\n  meta\\n  createdOn\\n  takenOn\\n  updatedOn\\n  coords\\n  note\\n  seriesId\\n  seriesCreatedBy\\n  createdBy\\n  updatedBy\\n  uploadToken\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  updatedUser {\\n    ...userSummaryFragment\\n  }\\n  tags {\\n    label\\n    typeId\\n    coords {\\n      x\\n      y\\n      __typename\\n    }\\n    __typename\\n  }\\n  paths {\\n    base\\n    large\\n    thumb\\n    medium\\n    __typename\\n  }\\n  __typename\\n}\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nfragment seriesFragment on Series {\\n  id\\n  name\\n  access\\n  note\\n  meta\\n  watchers\\n  seriesStatus\\n  createdOn\\n  updatedOn\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  updatedUser {\\n    ...userSummaryFragment\\n  }\\n  coords\\n  direction\\n  photoCount\\n  featured {\\n    ...photoSummaryFragment\\n  }\\n  latest {\\n    ...photoSummaryFragment\\n  }\\n  __typename\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nfragment feedSeriesSummaryFragment on FeedSeriesSummary {\\n  id\\n  name\\n  access\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  seriesStatus\\n  updatedOn\\n  createdOn\\n  photoCount\\n  coords\\n  direction\\n  watchers\\n  __typename\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nfragment seriesSummaryFragment on SeriesSummary {\\n  id\\n  name\\n  access\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  seriesStatus\\n  updatedOn\\n  createdOn\\n  photoCount\\n  coords\\n  direction\\n  watchers\\n  featured {\\n    ...photoSummaryFragment\\n  }\\n  latest {\\n    ...photoSummaryFragment\\n  }\\n  __typename\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nfragment userSummaryFragment on UserSummary {\\n  id\\n  gravatar\\n  gravatarProfile\\n  username\\n  __typename\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nfragment photoSummaryFragment on PhotoSummary {\\n  id\\n  takenOn\\n  seriesCreatedBy\\n  updatedOn\\n  createdOn\\n  seriesId\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  paths {\\n    base\\n    thumb\\n    medium\\n    large\\n    __typename\\n  }\\n  __typename\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar photoSummaryFragment = (0, _graphqlTag[\"default\"])(_templateObject());\nexports.photoSummaryFragment = photoSummaryFragment;\nvar photoSummaryKeys = ['id', 'takenOn', 'seriesCreatedBy', 'updatedOn', 'createdOn', 'seriesId', 'createdUser', 'paths'];\nexports.photoSummaryKeys = photoSummaryKeys;\nvar userSummaryFragment = (0, _graphqlTag[\"default\"])(_templateObject2());\nexports.userSummaryFragment = userSummaryFragment;\nvar userSummaryKeys = ['id', 'gravatar', 'gravatarProfile', 'username'];\nexports.userSummaryKeys = userSummaryKeys;\nvar seriesSummaryFragment = (0, _graphqlTag[\"default\"])(_templateObject3(), photoSummaryFragment, userSummaryFragment);\nexports.seriesSummaryFragment = seriesSummaryFragment;\nvar seriesSummaryKeys = ['id', 'name', 'access', 'createdUser', 'seriesStatus', 'updatedOn', 'createdOn', 'photoCount', 'coords', 'direction', 'watchers', 'featured', 'latest'];\nexports.seriesSummaryKeys = seriesSummaryKeys;\nvar feedSeriesSummaryFragment = (0, _graphqlTag[\"default\"])(_templateObject4(), userSummaryFragment);\nexports.feedSeriesSummaryFragment = feedSeriesSummaryFragment;\nvar feedSeriesSummaryKeys = ['id', 'name', 'access', 'createdUser', 'seriesStatus', 'updatedOn', 'createdOn', 'photoCount', 'coords', 'direction', 'watchers'];\nexports.feedSeriesSummaryKeys = feedSeriesSummaryKeys;\nvar seriesFragment = (0, _graphqlTag[\"default\"])(_templateObject5(), photoSummaryFragment, userSummaryFragment);\nexports.seriesFragment = seriesFragment;\nvar seriesKeys = ['id', 'name', 'access', 'note', 'meta', 'watchers', 'seriesStatus', 'createdOn', 'updatedOn', 'createdUser', 'updatedUser', 'coords', 'direction', 'photoCount', 'featured', 'latest'];\nexports.seriesKeys = seriesKeys;\nvar photoFragment = (0, _graphqlTag[\"default\"])(_templateObject6(), userSummaryFragment);\nexports.photoFragment = photoFragment;\nvar photoKeys = ['id', 'meta', 'createdOn', 'takenOn', 'updatedOn', 'note', 'coords', 'seriesId', 'seriesCreatedBy', 'createdBy', 'updatedBy', 'uploadToken', 'createdUser', 'updatedUser', 'tags', 'paths'];\nexports.photoKeys = photoKeys;\nvar userFragment = (0, _graphqlTag[\"default\"])(_templateObject7());\nexports.userFragment = userFragment;\nvar userKeys = ['id', 'username', 'gravatar', 'watching', 'gravatarProfile', 'meta', 'createdOn', 'updatedOn'];\nexports.userKeys = userKeys;","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport var RawSVG = React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M13.685,2.797c-0.44,1.273 0.852,3.525 -1.082,4.966c-1.247,0.93 -2.133,2.247 -2.743,4.167c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873c1.28,-2.034 -2.359,-1.862 -2.747,-3.307Z\"\n}), React.createElement(\"path\", {\n  d: \"M4.921,5.953c0.883,1.017 3.479,1.024 3.76,3.42c0.181,1.545 0.879,2.971 2.238,4.459c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066c-1.121,-2.126 -2.792,1.111 -4.238,0.725Z\"\n}), React.createElement(\"path\", {\n  d: \"M3.236,15.092c1.323,-0.256 2.627,-2.5 4.842,-1.546c1.428,0.615 3.013,0.724 4.98,0.292c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94c-2.402,-0.091 -0.433,2.974 -1.491,4.033Z\"\n}), React.createElement(\"path\", {\n  d: \"M10.309,21.121c0.439,-1.274 -0.852,-3.525 1.081,-4.967c1.247,-0.929 2.133,-2.246 2.743,-4.167c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873c-1.28,2.034 2.359,1.863 2.748,3.308Z\"\n}), React.createElement(\"path\", {\n  d: \"M19.066,18.01c-0.883,-1.017 -3.479,-1.024 -3.76,-3.42c-0.182,-1.544 -0.88,-2.971 -2.238,-4.459c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067c1.121,2.125 2.792,-1.112 4.238,-0.726Z\"\n}), React.createElement(\"path\", {\n  d: \"M20.751,8.871c-1.323,0.256 -2.627,2.501 -4.842,1.546c-1.429,-0.615 -3.013,-0.723 -4.98,-0.291c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94c2.401,0.092 0.433,-2.974 1.491,-4.033Z\"\n}));\nexport default createSvgIcon(RawSVG, 'AppLogo');","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport React, { useRef, useLayoutEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { util } from '@morphoto/common';\nvar useSearchBarStyles = makeStyles(function (theme) {\n  return {\n    root: _defineProperty({\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.3),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.5)\n      },\n      marginRight: theme.spacing(2),\n      marginLeft: 0,\n      width: '100%'\n    }, theme.breakpoints.up('sm'), {\n      marginLeft: theme.spacing(3),\n      width: 'auto'\n    }),\n    transparent: {\n      backgroundColor: fade(theme.palette.common.white, 0.7),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.9)\n      }\n    },\n    inputRoot: {\n      color: 'inherit',\n      width: '100%'\n    },\n    inputInput: _defineProperty({\n      padding: theme.spacing(1, 1, 1, 4),\n      transition: theme.transitions.create('width'),\n      width: '100%'\n    }, theme.breakpoints.up('md'), {\n      width: 200\n    }),\n    searchIcon: {\n      width: theme.spacing(4),\n      height: '100%',\n      position: 'absolute',\n      pointerEvents: 'none',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  };\n});\nexport var SearchInput = function SearchInput(_ref) {\n  var autoFocus = _ref.autoFocus,\n      disabled = _ref.disabled,\n      onChange = _ref.onChange,\n      onClick = _ref.onClick,\n      defaultValue = _ref.defaultValue,\n      isTransparent = _ref.isTransparent;\n  var inputRef = useRef();\n  var classes = useSearchBarStyles();\n  var debounceSearchText = useCallback(util.debounce(onChange, 500), [onChange]);\n  useLayoutEffect(function () {\n    if (inputRef.current && !autoFocus) {\n      inputRef.current.blur();\n    }\n  }, [autoFocus]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, isTransparent ? classes.transparent : null),\n    onClick: onClick\n  }, React.createElement(\"div\", {\n    className: classes.searchIcon\n  }, React.createElement(SearchIcon, null)), React.createElement(InputBase, {\n    autoFocus: !disabled && autoFocus,\n    inputProps: {\n      onBlur: function onBlur() {}\n    },\n    onChange: function onChange(e) {\n      debounceSearchText(e.target.value);\n    },\n    placeholder: \"Search\\u2026\",\n    disabled: disabled,\n    defaultValue: defaultValue,\n    inputRef: inputRef,\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    }\n  }));\n};\nSearchInput.propTypes = {\n  autoFocus: PropTypes.bool,\n  isTransparent: PropTypes.bool,\n  disabled: PropTypes.bool,\n  onChange: PropTypes.func,\n  defaultValue: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default SearchInput;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { FindOnMapButton } from '@morphoto/ui';\nimport { RawImage } from '@morphoto/photos';\nimport { Avatar } from '@material-ui/core';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(0)\n    },\n    imgContainer: {\n      overflow: 'hidden',\n      height: '100%',\n      position: 'relative',\n      borderRadius: 0\n    },\n    findOnMapButtonContainer: {\n      position: 'absolute',\n      opacity: 0.8,\n      bottom: theme.spacing(1),\n      right: theme.spacing(1)\n    },\n    titleContainer: {\n      borderTop: '2px solid #FFFFFF99',\n      background: '#444444AA',\n      textShadow: '1px 1px 10px black',\n      color: 'white',\n      position: 'absolute',\n      alignItems: 'center',\n      display: 'flex',\n      top: 0,\n      width: '100%',\n      paddingRight: theme.spacing(1)\n    },\n    avatar: {\n      border: '1px solid white',\n      margin: theme.spacing(0, 1)\n    },\n    title: {\n      flex: '1 1 50%',\n      overflow: 'hidden'\n    },\n    seriesName: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    img: {},\n    gravatarImg: {\n      width: '100%'\n    }\n  };\n});\nvar EVENT_VERBS = {\n  DELETE: 'Deleted',\n  ADD: 'Added'\n};\n\nvar FeedItem = function FeedItem(_ref) {\n  var event = _ref.event,\n      actions = _ref.actions;\n  var series = event.series,\n      photo = event.photo;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Paper, {\n    className: classes.imgContainer\n  }, React.createElement(RawImage, {\n    photo: photo,\n    sizePriority: ['medium', 'large', 'thumb'],\n    className: classes.img,\n    style: {\n      objectFit: 'cover'\n    },\n    onClick: function onClick() {\n      return actions.onImageClick(series.id, photo.id);\n    }\n  }), React.createElement(\"div\", {\n    className: classes.titleContainer\n  }, React.createElement(Avatar, {\n    onClick: function onClick() {\n      return actions.onProfileClick(photo.createdUser.username);\n    },\n    className: classes.avatar\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: photo.createdUser.gravatar\n  })), React.createElement(\"div\", {\n    className: classes.title\n  }, React.createElement(Typography, {\n    className: classes.seriesName,\n    variant: \"body1\",\n    color: \"inherit\"\n  }, series.name), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, photo.createdUser.username, \" \", EVENT_VERBS.ADD, \" a photo\"), React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.updatedOn))), React.createElement(FindOnMapButton, {\n    onClick: function onClick() {\n      return actions.onMapClick(series.id, photo.id);\n    }\n  }))));\n};\n\nFeedItem.propTypes = {\n  event: PropTypes.object.isRequired,\n  actions: PropTypes.shape({\n    onImageClick: PropTypes.func.isRequired,\n    onProfileClick: PropTypes.func.isRequired,\n    onMapClick: PropTypes.func.isRequired\n  })\n};\nexport default FeedItem;\nexport var FeedItemCosmos = function FeedItemCosmos(props) {\n  return React.createElement(\"div\", null, React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props));\n};\nFeedItemCosmos.propTypes = {\n  event: PropTypes.object.isRequired\n};","export default require('./Search').default;\nexport { default as SearchInput } from './SearchInput';","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.randomObjectElement = exports.randomArrayEl = exports.filledArray = exports.randomMap = exports.randomChance = exports.randomFloat = exports.randomInt = void 0;\n\nvar _random = _interopRequireDefault(require(\"lodash/random\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar randomInt = function randomInt(min, max) {\n  return (0, _random[\"default\"])(min, max);\n};\n\nexports.randomInt = randomInt;\n\nvar randomFloat = function randomFloat(min, max) {\n  return (0, _random[\"default\"])(min, max, true);\n};\n\nexports.randomFloat = randomFloat;\n\nvar randomChance = function randomChance(chance, inTimes) {\n  return (0, _random[\"default\"])(0, inTimes) <= chance;\n};\n\nexports.randomChance = randomChance;\n\nvar randomMap = function randomMap(low, high, func) {\n  return filledArray((0, _random[\"default\"])(low, high), null).map(func);\n};\n\nexports.randomMap = randomMap;\n\nvar filledArray = function filledArray(num) {\n  var fillval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return _toConsumableArray(Array(num).keys()).map(function () {\n    return fillval;\n  });\n};\n\nexports.filledArray = filledArray;\n\nvar randomArrayEl = function randomArrayEl(arr) {\n  return !arr || arr.length === 0 ? null : arr[(0, _random[\"default\"])(0, arr.length - 1)];\n};\n\nexports.randomArrayEl = randomArrayEl;\n\nvar randomObjectElement = function randomObjectElement(obj) {\n  var key = randomArrayEl(Object.keys(obj));\n  return [key, obj[key]];\n};\n\nexports.randomObjectElement = randomObjectElement;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport axios from 'axios';\nimport FormData from 'form-data';\nimport { imgStore } from './offline';\nimport log from 'loglevel';\naxios.interceptors.request.use(function (request) {\n  log.info('AXIOS:::: Starting Request', request);\n  return request;\n}, function (err) {\n  log.info('AXIOS:::: Starting Request ERROR', err);\n  return Promise.reject(err);\n});\naxios.interceptors.response.use(function (response) {\n  log.info('AXIOS:::: Response', response);\n  return response;\n}, function (err) {\n  log.info('AXIOS:::: Starting Response ERROR', err);\n  return Promise.reject(err);\n});\nexport default function s3Upload(activeUpload, updateUploadProgress, completeActiveUpload, failRetry) {\n  var formData, file, onUploadProgress, config;\n  return _regeneratorRuntime.async(function s3Upload$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          log.info('s3Upload::STARTING', {\n            activeUpload: activeUpload\n          });\n          formData = new FormData();\n          Object.keys(activeUpload.preAuth.fields).forEach(function (fieldkey) {\n            formData.append(fieldkey, activeUpload.preAuth.fields[fieldkey]);\n          });\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(imgStore.getItem(activeUpload.uploadToken));\n\n        case 5:\n          file = _context2.sent;\n          formData.append('file', file);\n\n          onUploadProgress = function onUploadProgress(progressEvent) {\n            log.info('s3Upload::PROGRESSEVENT', progressEvent);\n            var loaded = progressEvent.loaded,\n                total = progressEvent.total;\n            updateUploadProgress({\n              progress: Math.floor(100 * loaded / total)\n            });\n          };\n\n          config = {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            },\n            onUploadProgress: onUploadProgress\n          };\n          _context2.next = 11;\n          return _regeneratorRuntime.awrap(axios.post(activeUpload.preAuth.url, formData, config).then(function _callee(result) {\n            return _regeneratorRuntime.async(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.t0 = log;\n                    _context.next = 3;\n                    return _regeneratorRuntime.awrap(imgStore.keys());\n\n                  case 3:\n                    _context.t1 = _context.sent;\n\n                    _context.t0.info.call(_context.t0, 's3Upload:: upload done. cleaning up imgStore', _context.t1);\n\n                    _context.next = 7;\n                    return _regeneratorRuntime.awrap(imgStore.removeItem(activeUpload.uploadToken));\n\n                  case 7:\n                    _context.t2 = log;\n                    _context.next = 10;\n                    return _regeneratorRuntime.awrap(imgStore.keys());\n\n                  case 10:\n                    _context.t3 = _context.sent;\n\n                    _context.t2.info.call(_context.t2, 's3Upload:: Cleaned up img store', _context.t3);\n\n                    completeActiveUpload();\n\n                  case 13:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            });\n          }).catch(function (err) {\n            log.error('s3Upload::ERROR');\n            log.error(err);\n            failRetry();\n          }));\n\n        case 11:\n          log.info('s3Upload::COMPLETE');\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport { getWholeSeriesUpdate, allSeriesUpdate, feedUpdate, userSeriesUpdate } from './updateQueries';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport _ from 'lodash';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.createSeries;\nvar SERIES_KEYS = graphqlAPI.mutations.newSeriesKeys;\nvar PHOTO_KEYS = graphqlAPI.mutations.newPhotoKeys;\nvar createOptimisticResponse = graphqlAPI.optimistic.createSeriesResponse;\nexport var withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      createSeriesMutation: function createSeriesMutation(newSeries, newPhoto, ext) {\n        var _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n        return _regeneratorRuntime.async(function createSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                meUserSummary = {\n                  id: id,\n                  gravatar: gravatar,\n                  gravatarProfile: gravatarProfile,\n                  username: username,\n                  __typename: 'UserSummary'\n                };\n                if (!newSeries.access) newSeries.access = 'PRIVATE';\n                variables = {\n                  series: _.pick(newSeries, SERIES_KEYS),\n                  photo: _.pick(newPhoto, PHOTO_KEYS),\n                  ext: ext\n                };\n                optimisticResponse = createOptimisticResponse({\n                  meUserSummary: meUserSummary,\n                  newSeries: newSeries,\n                  newPhoto: newPhoto,\n                  ext: ext\n                });\n                _context.next = 7;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 7:\n                mutationStackId = _context.sent;\n                log.info('createSeriesMutation:: start', {\n                  newSeries: newSeries,\n                  newPhoto: newPhoto,\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  ext: ext\n                });\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  refetchQueries: [{\n                    query: graphqlAPI.queries.userSeries\n                  }],\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({}, ownProps.doneCreatingSeries)\n                }).then(function (data) {\n                  log.info('createSeriesMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('createSeriesMutation::updateThunk', {\n      data: data\n    });\n    getWholeSeriesUpdate(store, data.createSeries.series);\n    userSeriesUpdate(store, data.createSeries.series);\n    allSeriesUpdate(store, data.createSeries.series);\n    feedUpdate(store, data.createSeries.series, data.createSeries.series.photos[0]);\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport log from 'loglevel';\nexport var actionMaker = function actionMaker(actionArr, useConsole) {\n  return actionArr.reduce(function (acc, acStr) {\n    return _objectSpread({}, acc, _defineProperty({}, acStr, useConsole ? function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return log.info(acStr, args);\n    } : function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return alert(\"\".concat(acStr, \"::\") + JSON.stringify(args, null, 2));\n    }));\n  }, {});\n};\nexport var fakeGlobalActions = _objectSpread({}, actionMaker(['onQRButtonClick']), {}, actionMaker(['signOut', 'forceSignIn', 'addToHomeScreen', 'setHomeState', 'onCameraClick', 'onLibraryClick', 'onOfflineMenuClick', 'onSettingsClick', 'resetAllState', 'resetApp', 'dismissInstall', 'setUseOffline', 'onQRButtonClick', 'onMenuBack', 'onAvatarClick', 'onQRCapture'], true));","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _default = {\n  admin: {\n    series: {\n      'create:own': ['*'],\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    },\n    photo: {\n      'create:any': ['*'],\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    }\n  },\n  nonuser: {\n    photo: {\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    },\n    series_public: {\n      'read:any': ['*']\n    },\n    series_open: {\n      'read:any': ['*']\n    }\n  },\n  user: {\n    series: {\n      'create:own': ['*'],\n      'read:own': ['*'],\n      'update:own': ['*'],\n      'delete:own': ['*']\n    },\n    series_public: {\n      'read:any': ['*']\n    },\n    series_open: {\n      'read:any': ['*'],\n      'update:any': ['photos']\n    },\n    photo: {\n      'read:any': ['*'],\n      'create:own': ['*'],\n      'update:own': ['*'],\n      'delete:own': ['*']\n    }\n  }\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.timestampToHTML5Input = timestampToHTML5Input;\nexports.HTML5InputToTimestamp = HTML5InputToTimestamp;\nexports.convertJSDatetoTimestamp = exports.parseDate = exports.formatDateAgo = exports.fixParseDate = exports.formatDate = void 0;\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _util = require(\"./util\");\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar formatDate = function formatDate(utctimestamp) {\n  var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'LLLL';\n  if (utctimestamp && !(0, _util.isNumeric)(utctimestamp)) _loglevel[\"default\"].error('formatDate: utctimestamp must be numeric');\n  var val = utctimestamp || Date.now();\n  return (0, _moment[\"default\"])(val, 'x').format(format);\n};\n\nexports.formatDate = formatDate;\nvar EARLY_DATE = 344505600000;\n\nvar fixParseDate = function fixParseDate(inTimestamp) {\n  var isGMT = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var retVal = null;\n\n  if (inTimestamp !== null && inTimestamp !== undefined) {\n    try {\n      var jsDate = new Date(inTimestamp);\n      retVal = jsDate.getTime();\n\n      if ((0, _util.isNumeric)(inTimestamp) && (!retVal || retVal < EARLY_DATE)) {\n        retVal = parseInt(inTimestamp, 10);\n        if (retVal > 0) retVal = retVal * 1000;\n\n        if (!isGMT) {\n          var tzOffset = jsDate.getTimezoneOffset();\n          retVal = retVal + tzOffset * 60 * 1000;\n        }\n      }\n\n      retVal = String(retVal);\n    } catch (e) {\n      _loglevel[\"default\"].error('fixParseDate: Error parsing datetime:' + inTimestamp);\n    }\n  }\n\n  return retVal;\n};\n\nexports.fixParseDate = fixParseDate;\n\nvar formatDateAgo = function formatDateAgo(utctimestamp) {\n  var val = utctimestamp || Date.now();\n  return (0, _moment[\"default\"])(val, 'x').fromNow();\n};\n\nexports.formatDateAgo = formatDateAgo;\n\nvar parseDate = function parseDate(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x');\n};\n\nexports.parseDate = parseDate;\n\nvar convertJSDatetoTimestamp = function convertJSDatetoTimestamp(jsDate) {\n  return _moment[\"default\"].utc(jsDate).format('x');\n};\n\nexports.convertJSDatetoTimestamp = convertJSDatetoTimestamp;\n\nfunction timestampToHTML5Input(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x').format('YYYY-MM-DDTkk:mm');\n}\n\nfunction HTML5InputToTimestamp(isoStr) {\n  return (0, _moment[\"default\"])(new Date(isoStr), 'YYYY-MM-DDTkk:mm').format('x');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatNum = formatNum;\nexports.clearSelection = clearSelection;\nexports.isObjectWithKeys = isObjectWithKeys;\nexports.makeDomArray = makeDomArray;\nexports.capitalizeFirstLetter = capitalizeFirstLetter;\nexports.numericArrayCompare = numericArrayCompare;\nexports.decodeUnbufferedBase64 = decodeUnbufferedBase64;\nexports.encodeUnbufferedBase64 = encodeUnbufferedBase64;\nexports.isObject = isObject;\nexports.arrToObj = arrToObj;\nexports.getRandomArbitraryInt = getRandomArbitraryInt;\nexports.debounce = debounce;\nexports.chunkArray = exports.base64toJSON = exports.json2base64 = exports.urlizeb64 = exports.isNumeric = void 0;\n\nvar _numeral = _interopRequireDefault(require(\"numeral\"));\n\nvar _zlib = _interopRequireDefault(require(\"zlib\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar isNumeric = function isNumeric(num) {\n  try {\n    return !isNaN(parseFloat(num)) && isFinite(num);\n  } catch (e) {\n    return false;\n  }\n};\n\nexports.isNumeric = isNumeric;\n\nvar urlizeb64 = function urlizeb64(x) {\n  return x.replace('+', '-').replace('/', '_').replace(/=+$/, '');\n};\n\nexports.urlizeb64 = urlizeb64;\n\nfunction formatNum(num, precision) {\n  try {\n    var precstr = precision > 0 ? '.' + Array(precision + 1).join('0') : '';\n    var newprec = isNumeric(num) ? (0, _numeral[\"default\"])(num).format(\"0,0\".concat(precstr)) : num;\n    return newprec.replace(/(\\.(0{0,1}[1-9]*))0+$/, '$1');\n  } catch (e) {\n    return num;\n  }\n}\n\nfunction clearSelection() {\n  if (document.selection && document.selection.empty) {\n    document.selection.empty();\n  } else if (window.getSelection) {\n    var sel = window.getSelection();\n    sel.removeAllRanges();\n  }\n}\n\nfunction isObjectWithKeys(obj) {\n  return _typeof(obj) === 'object' && obj !== null && Object.keys(obj).length > 0;\n}\n\nfunction makeDomArray(domnode) {\n  if (!domnode) return [];\n  var keys = Object.keys(domnode);\n  if (keys.length > 1 || keys.length === 0) throw Error('Expected nester domnode structure.');\n  if (!domnode) return [];\n  if (!domnode[keys[0]]) return [];\n  return Array.isArray(domnode[keys[0]]) ? domnode[keys[0]] : [domnode[keys[0]]];\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction numericArrayCompare(arr1, arr2) {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) return false;\n  if (arr1.length !== arr2.length) return false;\n  return !arr1.some(function (el, idx) {\n    return el !== arr2[idx];\n  });\n}\n\nfunction decodeUnbufferedBase64(hash) {\n  var missingPadding = hash.length % 4;\n\n  if (missingPadding !== 0) {\n    var newhash = hash + Array(4 - missingPadding).join('=');\n    return Buffer.from(newhash, 'base64').toString();\n  } else {\n    return Buffer.from(hash, 'base64').toString();\n  }\n}\n\nfunction encodeUnbufferedBase64(str) {\n  return urlizeb64(Buffer.from(str).toString('base64'));\n}\n\nfunction isObject(o) {\n  return o instanceof Object && o.constructor === Object;\n}\n\nfunction arrToObj(data) {\n  for (var key in data) {\n    if (data.hasOwnProperty(key)) {\n      var keyDat = data[key];\n\n      if (keyDat._) {\n        keyDat.val = keyDat._;\n        delete keyDat._;\n      }\n\n      if (keyDat.$) {\n        keyDat.attr = keyDat.$;\n        delete keyDat.$;\n      }\n\n      if (_typeof(keyDat) === 'object') {\n        data[key] = arrToObj(keyDat);\n\n        if (Array.isArray(keyDat) && keyDat.length === 1 && typeof keyDat[0] === 'string') {\n          if (isNumeric(keyDat[0])) data[key] = Number(keyDat[0]);else data[key] = keyDat[0].replace(/\\\\/g, '/');\n        } else if (Array.isArray(keyDat) && keyDat.length === 1 && isObject(keyDat[0]) && Object.keys(keyDat[0]).length === 1) {\n          data[key] = keyDat[0][Object.keys(keyDat[0])[0]];\n        }\n\n        if (_typeof(data[key]) && data[key].length === 0) {\n          delete data[key];\n        }\n\n        if (typeof data[key] === 'string' && isNumeric(data[key])) data[key] = Number(data[key]);\n      }\n    }\n  }\n\n  return data;\n}\n\nvar json2base64 = function json2base64(text) {\n  return new Promise(function (resolve, reject) {\n    _zlib[\"default\"].gzip(JSON.stringify(text), function (err, data) {\n      if (err) reject(err);else resolve(data.toString('base64'));\n    });\n  });\n};\n\nexports.json2base64 = json2base64;\n\nvar base64toJSON = function base64toJSON(b64String) {\n  var buff = Buffer.from(b64String, 'base64');\n  return new Promise(function (resolve, reject) {\n    _zlib[\"default\"].gunzip(buff, function (err, data) {\n      if (err) reject(err);else resolve(JSON.parse(data.toString()));\n    });\n  });\n};\n\nexports.base64toJSON = base64toJSON;\n\nvar chunkArray = function chunkArray(arr, chunkSize) {\n  var result = [];\n\n  for (var i = 0; i < arr.length; i += chunkSize) {\n    result.push(arr.slice(i, i + chunkSize));\n  }\n\n  return result;\n};\n\nexports.chunkArray = chunkArray;\n\nfunction getRandomArbitraryInt(min, max) {\n  return parseInt(Math.random() * (max - min) + min, 10);\n}\n\nfunction debounce(func, wait, immediate) {\n  var _this = this;\n\n  var timeout = null;\n  return function () {\n    for (var _len = arguments.length, innerArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      innerArgs[_key] = arguments[_key];\n    }\n\n    var context = _this;\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      timeout = null;\n\n      if (!immediate) {\n        func.apply(context, innerArgs);\n      }\n    }, wait);\n\n    if (callNow) {\n      func.apply(context, innerArgs);\n    }\n  };\n}\n\n;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { createHttpLink } from 'apollo-link-http';\nimport { setContext } from 'apollo-link-context';\nimport { RetryLink } from 'apollo-link-retry';\nimport { IntrospectionFragmentMatcher } from 'apollo-cache-inmemory';\nimport introspectionQueryResultData from './fragmentTypes.json';\nimport { config } from '@morphoto/client-common';\nimport Auth from '@aws-amplify/auth';\nimport { ApolloLink } from 'apollo-link';\nimport { stateStore, restoreRequests } from '../offline';\nimport { InMemoryCache, ApolloClient } from 'apollo-boost';\nimport { persistCache } from 'apollo-cache-persist';\nimport log from 'loglevel';\nvar endpoints = config.endpoints;\nvar LOCAL_STORAGE_TOKEN = 'apollo-token';\nexport var APOLLOSTATES = {\n  INITIALIZING: 'Initializing',\n  AUTHENTICATING: 'Authenticating',\n  LOADING: 'Loading State',\n  APPLY_MUTATIONS: 'Applying history',\n  ERROR: 'ERROR!',\n  DONE: 'DONE'\n};\n\nfunction useGraphQL() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      client = _useState2[0],\n      setClient = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      done = _useState4[0],\n      setDone = _useState4[1];\n\n  var _useState5 = useState(APOLLOSTATES.INITIALIZING),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currState = _useState6[0],\n      setCurrState = _useState6[1];\n\n  useEffect(function () {\n    createApolloClient(function (newClient, newState) {\n      setClient(newClient);\n      setDone((client || newClient) && newState === APOLLOSTATES.DONE);\n      setCurrState(newState);\n    });\n  }, []);\n  return {\n    client: client,\n    done: done,\n    currState: currState\n  };\n}\n\nexport default useGraphQL;\n\nvar getCurrentToken = function getCurrentToken() {\n  var currSession;\n  return _regeneratorRuntime.async(function getCurrentToken$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(Auth.currentSession());\n\n        case 3:\n          currSession = _context.sent;\n          return _context.abrupt(\"return\", currSession.accessToken.jwtToken);\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", null);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 7]]);\n};\n\nfunction createApolloClient(onChange) {\n  var cache, authLink, httpLink, retry, apolloClient;\n  return _regeneratorRuntime.async(function createApolloClient$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          cache = new InMemoryCache({\n            fragmentMatcher: new IntrospectionFragmentMatcher({\n              introspectionQueryResultData: introspectionQueryResultData\n            })\n          });\n          _context3.prev = 1;\n          onChange(null, APOLLOSTATES.LOADING);\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(persistCache({\n            cache: cache,\n            storage: stateStore\n          }));\n\n        case 5:\n          _context3.next = 12;\n          break;\n\n        case 7:\n          _context3.prev = 7;\n          _context3.t0 = _context3[\"catch\"](1);\n          log.error('Error restoring Apollo cache', _context3.t0);\n          onChange(null, APOLLOSTATES.ERROR);\n          return _context3.abrupt(\"return\");\n\n        case 12:\n          authLink = setContext(function _callee(_, _ref) {\n            var headers, token, newHeaders;\n            return _regeneratorRuntime.async(function _callee$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    headers = _ref.headers;\n                    _context2.next = 3;\n                    return _regeneratorRuntime.awrap(getCurrentToken());\n\n                  case 3:\n                    token = _context2.sent;\n                    newHeaders = _objectSpread({}, headers, {\n                      authorization: token ? \"Bearer \".concat(token) : ''\n                    });\n\n                    if (token && process.env.NODE_ENV === 'development' && process.env.REACT_APP_FAKE_USER) {\n                      newHeaders.auth_user = process.env.REACT_APP_FAKE_USER;\n                    }\n\n                    return _context2.abrupt(\"return\", {\n                      headers: newHeaders\n                    });\n\n                  case 7:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            });\n          });\n          httpLink = createHttpLink({\n            uri: endpoints.graphql\n          });\n          retry = new RetryLink({\n            attempts: {\n              max: Infinity,\n              retryIf: function retryIf(error, _operation) {\n                log.info('GRAPHQL ERRORS', {\n                  error: error,\n                  _operation: _operation\n                });\n                return true;\n              }\n            }\n          });\n          apolloClient = new ApolloClient({\n            link: ApolloLink.from([retry, authLink, httpLink]),\n            tokenName: LOCAL_STORAGE_TOKEN,\n            addTypename: true,\n            cache: cache,\n            connectToDevTools: process.env.NODE_ENV === 'development'\n          });\n          onChange(null, APOLLOSTATES.APPLY_MUTATIONS);\n          _context3.next = 19;\n          return _regeneratorRuntime.awrap(restoreRequests(apolloClient));\n\n        case 19:\n          onChange(apolloClient, APOLLOSTATES.DONE);\n\n        case 20:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, [[1, 7]]);\n}","export default {\n  '@global': {\n    '.mapboxgl-map': {\n      font: '12px/20px \\'Helvetica Neue\\', Arial, Helvetica, sans-serif',\n      overflow: 'hidden',\n      position: 'relative',\n      W: 'rgba(0, 0, 0, 0)'\n    },\n    '.mapboxgl-map:-webkit-full-screen': {\n      width: '100%',\n      height: '100%'\n    },\n    '.mapboxgl-canary': {\n      backgroundColor: 'salmon'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-interactive, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass': {\n      cursor: 'grab',\n      fallbacks: [{\n        M: 'none'\n      }, {\n        cursor: '-moz-grab'\n      }, {\n        cursor: '-webkit-grab'\n      }],\n      M: 'none',\n      W: 'none',\n      userSelect: 'none'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-interactive:active, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass:active': {\n      cursor: 'grabbing',\n      fallbacks: [{\n        cursor: '-moz-grabbing'\n      }, {\n        cursor: '-webkit-grabbing'\n      }]\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas': {\n      touchAction: 'pan-x pan-y'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas': {\n      touchAction: 'pinch-zoom'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas': {\n      touchAction: 'none'\n    },\n    '.mapboxgl-ctrl-top-left, .mapboxgl-ctrl-top-right, .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right': {\n      position: 'absolute',\n      pointerEvents: 'none',\n      zIndex: '2'\n    },\n    '.mapboxgl-ctrl-top-left': {\n      top: '0',\n      left: '0'\n    },\n    '.mapboxgl-ctrl-top-right': {\n      top: '0',\n      right: '0'\n    },\n    '.mapboxgl-ctrl-bottom-left': {\n      bottom: '0',\n      left: '0'\n    },\n    '.mapboxgl-ctrl-bottom-right': {\n      right: '0',\n      bottom: '0'\n    },\n    '.mapboxgl-ctrl': {\n      clear: 'both',\n      pointerEvents: 'auto',\n      transform: 'translate(0, 0)'\n    },\n    '.mapboxgl-ctrl-top-left .mapboxgl-ctrl': {\n      margin: '10px 0 0 10px',\n      float: 'left'\n    },\n    '.mapboxgl-ctrl-top-right .mapboxgl-ctrl': {\n      margin: '10px 10px 0 0',\n      float: 'right'\n    },\n    '.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl': {\n      margin: '0 0 10px 10px',\n      float: 'left'\n    },\n    '.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl': {\n      margin: '0 10px 10px 0',\n      float: 'right'\n    },\n    '.mapboxgl-ctrl-group': {\n      borderRadius: 4,\n      overflow: 'hidden',\n      background: '#fff'\n    },\n    '.mapboxgl-ctrl-group:not(:empty)': {\n      M: '0 0 2px rgba(0, 0, 0, 0.1)',\n      W: '0 0 2px rgba(0, 0, 0, 0.1)',\n      boxShadow: '0 0 0 2px rgba(0, 0, 0, 0.1)'\n    },\n    '.mapboxgl-ctrl-group > button': {\n      width: 30,\n      height: 30,\n      display: 'block',\n      padding: '0',\n      outline: 'none',\n      border: '0',\n      boxSizing: 'border-box',\n      backgroundColor: 'transparent',\n      cursor: 'pointer'\n    },\n    '.mapboxgl-ctrl-group > button + button': {\n      borderTop: '1px solid #ddd'\n    },\n    '.mapboxgl-ctrl > button::-moz-focus-inner': {\n      border: '0',\n      padding: '0'\n    },\n    '.mapboxgl-ctrl > button:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)'\n    },\n    '.mapboxgl-ctrl-icon, .mapboxgl-ctrl-icon > .mapboxgl-ctrl-compass-arrow': {\n      speak: 'none',\n      W: 'antialiased',\n      M: 'grayscale'\n    },\n    '.mapboxgl-ctrl-icon': {\n      padding: 5\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-icon-disabled': {\n      opacity: '0.25',\n      borderColor: '#373737'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23333333;\\' d=\\'m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23333333;\\' d=\\'M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23333\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23aaa\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%2333b5e5\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23e58978\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%2333b5e5\\'%3E %3Cpath d=\\'M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23e54e33\\'%3E %3Cpath d=\\'M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting': {\n      W: 'mapboxgl-spin 2s infinite linear',\n      M: 'mapboxgl-spin 2s infinite linear',\n      O: 'mapboxgl-spin 2s infinite linear',\n      fallbacks: [{\n        M: 'mapboxgl-spin 2s infinite linear'\n      }],\n      animation: 'mapboxgl-spin 2s infinite linear'\n    },\n    '@keyframes mapboxgl-spin': {\n      '0%': {\n        W: 'rotate(0deg)',\n        M: 'rotate(0deg)',\n        O: 'rotate(0deg)',\n        transform: 'rotate(0deg)'\n      },\n      '100%': {\n        W: 'rotate(360deg)',\n        M: 'rotate(360deg)',\n        O: 'rotate(360deg)',\n        transform: 'rotate(360deg)'\n      }\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath d=\\'M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z \\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23000000;\\' d=\\'M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z \\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass > .mapboxgl-ctrl-compass-arrow': {\n      width: 20,\n      height: 20,\n      margin: 5,\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpolygon fill=\\'%23333333\\' points=\\'6,9 10,1 14,9\\'/%3E %3Cpolygon fill=\\'%23CCCCCC\\' points=\\'6,11 10,19 14,11 \\'/%3E %3C/svg%3E\")',\n      backgroundRepeat: 'no-repeat',\n      display: 'inline-block'\n    },\n    'a.mapboxgl-ctrl-logo': {\n      width: 85,\n      height: 21,\n      margin: '0 0 -3px -3px',\n      display: 'block',\n      backgroundRepeat: 'no-repeat',\n      cursor: 'pointer',\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3C?xml version=\\'1.0\\' encoding=\\'utf-8\\'?%3E%3Csvg version=\\'1.1\\' id=\\'Layer_1\\' xmlns=\\'http://www.w3.org/2000/svg\\' xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' x=\\'0px\\' y=\\'0px\\' viewBox=\\'0 0 84.49 21\\' style=\\'enable-background:new 0 0 84.49 21;\\' xml:space=\\'preserve\\'%3E%3Cg%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z\\'/%3E %3Cpolygon class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' points=\\'14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 \\'/%3E%3C/g%3E%3C/svg%3E\")'\n    },\n    'a.mapboxgl-ctrl-logo.mapboxgl-compact': {\n      width: 21,\n      height: 21,\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3C?xml version=\\'1.0\\' encoding=\\'utf-8\\'?%3E %3Csvg version=\\'1.1\\' id=\\'Layer_1\\' xmlns=\\'http://www.w3.org/2000/svg\\' xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' x=\\'0px\\' y=\\'0px\\' viewBox=\\'0 0 21 21\\' style=\\'enable-background:new 0 0 21 21;\\' xml:space=\\'preserve\\'%3E%3Cg transform=\\'translate(0,0.01)\\'%3E%3Cpath d=\\'m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z\\' style=\\'opacity:0.9',\n      fill: '%23ffffff',\n      enableBackground: 'new\\' class=\\'st0\\'/%3E%3C/g%3E%3C/svg%3E\")',\n      fallbacks: [{\n        enableBackground: 'new\\' class=\\'st1\\'/%3E%3Cpolygon points=\\'11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 \\' style=\\'opacity:0.9'\n      }, {\n        fill: '%23ffffff'\n      }, {\n        enableBackground: 'new\\' class=\\'st1\\'/%3E%3Cpath d=\\'M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z\\' style=\\'opacity:0.35'\n      }, {\n        enableBackground: 'new\\' class=\\'st0\\'/%3E%3Cpath d=\\'M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z\\' style=\\'opacity:0.35'\n      }]\n    },\n    '.mapboxgl-ctrl.mapboxgl-ctrl-attrib': {\n      padding: '0 5px',\n      backgroundColor: 'rgba(255, 255, 255, 0.5)',\n      margin: '0'\n    },\n    '@media screen': {\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact': {\n        minHeight: 20,\n        padding: '0',\n        margin: 10,\n        position: 'relative',\n        backgroundColor: '#fff',\n        borderRadius: '3px 12px 12px 3px'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact:hover': {\n        padding: '2px 24px 2px 4px',\n        visibility: 'visible',\n        marginTop: 6\n      },\n      '.mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover, .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover': {\n        padding: '2px 4px 2px 24px',\n        borderRadius: '12px 3px 3px 12px'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner': {\n        display: 'none'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner': {\n        display: 'block'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        content: '\\'\\'',\n        cursor: 'pointer',\n        position: 'absolute',\n        backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath fill=\\'%23333333\\' fill-rule=\\'evenodd\\' d=\\'M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0\\'/%3E %3C/svg%3E\")',\n        backgroundColor: 'rgba(255, 255, 255, 0.5)',\n        width: 24,\n        height: 24,\n        boxSizing: 'border-box',\n        borderRadius: 12\n      },\n      '.mapboxgl-ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        bottom: '0',\n        right: '0'\n      },\n      '.mapboxgl-ctrl-top-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        top: '0',\n        right: '0'\n      },\n      '.mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        top: '0',\n        left: '0'\n      },\n      '.mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        bottom: '0',\n        left: '0'\n      }\n    },\n    '.mapboxgl-ctrl-attrib a': {\n      color: 'rgba(0, 0, 0, 0.75)',\n      textDecoration: 'none'\n    },\n    '.mapboxgl-ctrl-attrib a:hover': {\n      color: 'inherit',\n      textDecoration: 'underline'\n    },\n    '.mapboxgl-ctrl-attrib .mapbox-improve-map': {\n      fontWeight: 'bold',\n      marginLeft: 2\n    },\n    '.mapboxgl-attrib-empty': {\n      display: 'none'\n    },\n    '.mapboxgl-ctrl-scale': {\n      backgroundColor: 'rgba(255, 255, 255, 0.75)',\n      fontSize: 10,\n      borderWidth: 'medium 2px 2px',\n      borderStyle: 'none solid solid',\n      borderColor: '#333',\n      padding: '0 5px',\n      color: '#333',\n      boxSizing: 'border-box'\n    },\n    '.mapboxgl-popup': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-flex'\n      }],\n      willChange: 'transform',\n      pointerEvents: 'none'\n    },\n    '.mapboxgl-popup-anchor-top, .mapboxgl-popup-anchor-top-left, .mapboxgl-popup-anchor-top-right': {\n      W: 'column',\n      flexDirection: 'column'\n    },\n    '.mapboxgl-popup-anchor-bottom, .mapboxgl-popup-anchor-bottom-left, .mapboxgl-popup-anchor-bottom-right': {\n      W: 'column-reverse',\n      flexDirection: 'column-reverse'\n    },\n    '.mapboxgl-popup-anchor-left': {\n      W: 'row',\n      flexDirection: 'row'\n    },\n    '.mapboxgl-popup-anchor-right': {\n      W: 'row-reverse',\n      flexDirection: 'row-reverse'\n    },\n    '.mapboxgl-popup-tip': {\n      width: '0',\n      height: '0',\n      border: '10px solid transparent',\n      zIndex: '1'\n    },\n    '.mapboxgl-popup-anchor-top .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderTop: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip': {\n      W: 'flex-start',\n      alignSelf: 'flex-start',\n      borderTop: 'none',\n      borderLeft: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip': {\n      W: 'flex-end',\n      alignSelf: 'flex-end',\n      borderTop: 'none',\n      borderRight: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderBottom: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip': {\n      W: 'flex-start',\n      alignSelf: 'flex-start',\n      borderBottom: 'none',\n      borderLeft: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip': {\n      W: 'flex-end',\n      alignSelf: 'flex-end',\n      borderBottom: 'none',\n      borderRight: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-left .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderLeft: 'none',\n      borderRightColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-right .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderRight: 'none',\n      borderLeftColor: '#fff'\n    },\n    '.mapboxgl-popup-close-button': {\n      position: 'absolute',\n      right: '0',\n      top: '0',\n      border: '0',\n      borderRadius: '0 3px 0 0',\n      cursor: 'pointer',\n      backgroundColor: 'transparent'\n    },\n    '.mapboxgl-popup-close-button:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)'\n    },\n    '.mapboxgl-popup-content': {\n      position: 'relative',\n      background: '#fff',\n      borderRadius: 3,\n      boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)',\n      padding: '10px 10px 15px',\n      pointerEvents: 'auto'\n    },\n    '.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content': {\n      borderTopLeftRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content': {\n      borderTopRightRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content': {\n      borderBottomLeftRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content': {\n      borderBottomRightRadius: '0'\n    },\n    '.mapboxgl-marker': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      willChange: 'transform'\n    },\n    '.mapboxgl-user-location-dot': {\n      backgroundColor: '#1da1f2',\n      width: 15,\n      height: 15,\n      borderRadius: '50%',\n      boxShadow: '0 0 2px rgba(0, 0, 0, 0.25)'\n    },\n    '.mapboxgl-user-location-dot::before': {\n      backgroundColor: '#1da1f2',\n      content: '\\'\\'',\n      width: 15,\n      height: 15,\n      borderRadius: '50%',\n      position: 'absolute',\n      W: 'mapboxgl-user-location-dot-pulse 2s infinite',\n      M: 'mapboxgl-user-location-dot-pulse 2s infinite',\n      fallbacks: [{\n        M: 'mapboxgl-user-location-dot-pulse 2s infinite'\n      }],\n      animation: 'mapboxgl-user-location-dot-pulse 2s infinite'\n    },\n    '.mapboxgl-user-location-dot::after': {\n      borderRadius: '50%',\n      border: '2px solid #fff',\n      content: '\\'\\'',\n      height: 19,\n      left: -2,\n      position: 'absolute',\n      top: -2,\n      width: 19,\n      boxSizing: 'border-box'\n    },\n    '@keyframes mapboxgl-user-location-dot-pulse': {\n      '0%': {\n        W: 'scale(1)',\n        opacity: '1',\n        M: 'scale(1)',\n        transform: 'scale(1)'\n      },\n      '70%': {\n        W: 'scale(3)',\n        opacity: '0',\n        M: 'scale(3)',\n        transform: 'scale(3)'\n      },\n      '100%': {\n        W: 'scale(1)',\n        opacity: '0',\n        M: 'scale(1)',\n        transform: 'scale(1)'\n      }\n    },\n    '.mapboxgl-user-location-dot-stale': {\n      backgroundColor: '#aaa'\n    },\n    '.mapboxgl-user-location-dot-stale::after': {\n      display: 'none'\n    },\n    '.mapboxgl-crosshair, .mapboxgl-crosshair .mapboxgl-interactive, .mapboxgl-crosshair .mapboxgl-interactive:active': {\n      cursor: 'crosshair'\n    },\n    '.mapboxgl-boxzoom': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '0',\n      height: '0',\n      background: '#fff',\n      border: '2px dotted #202020',\n      opacity: '0.5'\n    },\n    '@media print': {\n      '.mapbox-improve-map': {\n        display: 'none'\n      }\n    }\n  }\n};","export default {\n  '@global': {\n    '@font-face': {\n      fontFamily: '\\'Roboto\\'',\n      fontStyle: 'italic',\n      fontDisplay: 'swap',\n      fontWeight: '900',\n      src: 'local(\\'Roboto Black italic\\'),\\n    local(\\'Roboto-Blackitalic\\'),\\n    url(\\'./files/roboto-latin-900italic.woff2\\') format(\\'woff2\\'), \\n    url(\\'./files/roboto-latin-900italic.woff\\') format(\\'woff\\')',\n      '': undefined\n    }\n  }\n};","export default (function (theme) {\n  return {\n    '@global': {\n      '.mapboxgl-ctrl-group': {\n        position: 'absolute',\n        top: '70px',\n        left: '10px',\n        opacity: '0.8'\n      }\n    },\n    mapContainer: {\n      height: '100%',\n      width: '100%'\n    }\n  };\n});","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"FakeData\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"fakePastDate\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata.fakePastDate;\n  }\n});\nObject.defineProperty(exports, \"randomLocation\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata.randomLocation;\n  }\n});\nexports.random = void 0;\n\nvar _fakedata = _interopRequireWildcard(require(\"./fakedata\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nvar random = require('./random');\n\nexports.random = random;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport localforage from 'localforage';\nimport createSeries from './graphql/mutations/createSeries';\nimport uuidv4 from 'uuid/v4';\nimport log from 'loglevel';\nlocalforage.config({\n  storeName: 'MorPhoto',\n  description: 'image blobs'\n});\nexport var imgStore = localforage.createInstance({\n  name: 'imgStore'\n});\nexport var stateStore = localforage.createInstance({\n  name: 'stateStore'\n});\nvar OFFLINEMUTATIONS = 'offlineMutations';\n\nfunction getPendingPromise() {\n  return stateStore.getItem(OFFLINEMUTATIONS).then(function (mutations) {\n    log.info('offline::getPendingPromise', JSON.parse(mutations) || []);\n    return JSON.parse(mutations) || [];\n  });\n}\n\nfunction setPendingPromise(mutations) {\n  log.info('offline::setPendingPromise', mutations);\n  return stateStore.setItem(OFFLINEMUTATIONS, JSON.stringify(mutations));\n}\n\nexport function pushMutationPromise(params, mutation, context) {\n  var id = uuidv4();\n  return getPendingPromise().then(function (mutations) {\n    return mutations.concat({\n      id: id,\n      params: params,\n      mutation: mutation,\n      context: context\n    });\n  }).then(function (data) {\n    log.info('offline::pushMutationPromise', data);\n    return data;\n  }).then(setPendingPromise).then(function () {\n    return id;\n  });\n}\nexport function popMutationPromise(id) {\n  return getPendingPromise().then(function (mutations) {\n    return mutations.filter(function (pm) {\n      return pm.id !== id;\n    });\n  }).then(function (data) {\n    log.info('offline::popMutationPromise', data);\n    return data;\n  }).then(setPendingPromise);\n}\n\nfunction updateHandler(resp, context) {\n  log.info('offline::updateHandler', {\n    resp: resp,\n    context: context\n  });\n  if (resp.data.createSeries) return createSeries.updateThunk(context);else return function () {};\n}\n\nfunction proxyUpdateForId(id, context) {\n  return function (proxy, resp) {\n    updateHandler(resp, context)(proxy, resp);\n    if (!resp.data.__optimistic) return popMutationPromise(id);else return Promise.resolve();\n  };\n}\n\nexport function restoreRequests(client) {\n  return getPendingPromise().then(function _callee(mutations) {\n    var idx, pendingMutation, id, params, mutation, context;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            idx = 0;\n\n          case 1:\n            if (!(idx < mutations.length)) {\n              _context.next = 13;\n              break;\n            }\n\n            pendingMutation = mutations[idx];\n            log.info('offline::restoreRequests', mutations, pendingMutation);\n            id = pendingMutation.id, params = pendingMutation.params, mutation = pendingMutation.mutation, context = pendingMutation.context;\n            params.optimisticResponse.__optimistic = true;\n            params.update = proxyUpdateForId(id, context);\n            params.mutation = mutation;\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(client.mutate(params).catch(function (err) {\n              log.error('Error replaying mutation', err);\n            }));\n\n          case 10:\n            idx++;\n            _context.next = 1;\n            break;\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  });\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PlaceIcon from '@material-ui/icons/Place';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      textAlign: 'center'\n    },\n    placeAvatar: {\n      color: theme.palette.primary.contrastText,\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      background: theme.palette.text.primary,\n      margin: 'auto'\n    },\n    placeIcon: {}\n  };\n});\n\nvar FindOnMapButton = function FindOnMapButton(_ref) {\n  var _onClick = _ref.onClick;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Avatar, {\n    className: classes.placeAvatar\n  }, React.createElement(IconButton, {\n    color: \"inherit\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _onClick();\n    }\n  }, React.createElement(PlaceIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nFindOnMapButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default FindOnMapButton;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { RawSVG } from '@morphoto/icons/dist/AppLogo';\nimport { config } from '@morphoto/client-common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dialogContent: {\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      height: '100%'\n    },\n    iconContainer: {\n      flex: '1 1 10%',\n      textAlign: 'center',\n      padding: theme.spacing(1, 0, 1, 0)\n    },\n    icon: {\n      height: 200,\n      margin: '0 auto',\n      border: \"1px solid \".concat(theme.palette.grey[100]),\n      background: theme.palette.grey[100],\n      borderRadius: '50%',\n      '& path': {\n        fill: 'url(#my-cool-gradient) #447799;'\n      }\n    },\n    title: {\n      textAlign: 'center'\n    },\n    stop1: {\n      stopColor: theme.palette.rose.main\n    },\n    stop2: {\n      stopColor: theme.palette.redorange.main\n    },\n    spacer: {\n      flex: '1 1'\n    },\n    buttonIcon: {\n      marginRight: theme.spacing(1)\n    },\n    scrollText: {\n      flex: '1 1 60%',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar AboutApp = function AboutApp(_ref) {\n  var onClose = _ref.onClose,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    onClose: onClose,\n    fullWidth: true,\n    open: open,\n    PaperProps: {\n      style: {}\n    },\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogContent, {\n    className: classes.dialogContent\n  }, React.createElement(Container, {\n    maxWidth: \"xs\"\n  }, React.createElement(\"div\", {\n    className: classes.iconContainer\n  }, React.createElement(\"svg\", {\n    className: classes.icon,\n    focusable: \"false\",\n    viewBox: \"0 0 24 24\",\n    \"aria-hidden\": \"true\",\n    role: \"presentation\"\n  }, RawSVG), React.createElement(\"svg\", {\n    style: {\n      width: 0,\n      height: 0,\n      position: 'absolute'\n    },\n    \"aria-hidden\": \"true\",\n    focusable: \"false\"\n  }, React.createElement(\"linearGradient\", {\n    id: \"my-cool-gradient\",\n    x2: \"1\",\n    y2: \"1\"\n  }, React.createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: \"#447799\",\n    className: classes.stop1\n  }), React.createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: \"#112266\",\n    className: classes.stop2\n  })))), React.createElement(\"div\", {\n    className: classes.title\n  }, React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\"\n  }, \"MorPhoto\"), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\"\n  }, \"Version:  \", config.version, \" \", React.createElement(\"em\", null, \"BETA\"))), React.createElement(Typography, {\n    className: classes.scrollText,\n    component: \"div\",\n    variant: \"caption\"\n  }), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    fullWidth: true,\n    href: \"mailto:\".concat(config.contact),\n    color: \"primary\",\n    variant: \"outlined\"\n  }, React.createElement(EmailIcon, {\n    className: classes.buttonIcon\n  }), \"Get in touch\"))), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onClose,\n    color: \"inherit\"\n  }, \"Close\")));\n};\n\nAboutApp.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func.isRequired\n};\nexport default AboutApp;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport SettingsBackupRestore from '@material-ui/icons/SettingsBackupRestore';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { AppContext } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    nuclear: {\n      color: 'red'\n    }\n  };\n});\n\nvar AppSettings = function AppSettings(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      deleteOpen = _useState2[0],\n      setDeleteOpen = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions;\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Offline data manager\"))), React.createElement(\"div\", {\n    className: classes.mapWrapper\n  }, React.createElement(List, null, React.createElement(ListItem, {\n    button: true,\n    onClick: function onClick() {\n      return setDeleteOpen({\n        action: globalActions.resetAllState,\n        title: 'Reset App State',\n        message: 'Might resolve a temporary glitch. Unfortunately this will wipe your upload queue.'\n      });\n    }\n  }, React.createElement(ListItemIcon, null, React.createElement(SettingsBackupRestore, null)), React.createElement(ListItemText, {\n    primary: 'Reset app state',\n    secondary: 'Might resolve a temporary glitch.'\n  })), React.createElement(ListItem, {\n    button: true,\n    className: classes.nuclear,\n    onClick: function onClick() {\n      return setDeleteOpen({\n        action: globalActions.resetApp,\n        title: 'RESET ALL LOCAL DATA',\n        message: 'All local images and data will be reset and you will be logged out. BE VERY SURE ABOUT THIS'\n      });\n    }\n  }, React.createElement(ListItemIcon, {\n    color: \"inherit\"\n  }, React.createElement(WarningIcon, {\n    color: \"inherit\"\n  })), React.createElement(ListItemText, {\n    primary: 'RESET ALL LOCAL DATA',\n    secondary: 'All local images and data will be reset and you will be logged out'\n  })))), deleteOpen && React.createElement(DeleteDialog, {\n    open: !!deleteOpen,\n    title: deleteOpen && deleteOpen.title,\n    message: deleteOpen && deleteOpen.message,\n    onConfirm: function onConfirm(confirmed) {\n      if (confirmed) deleteOpen.action();\n      setDeleteOpen(null);\n    }\n  }));\n};\n\nAppSettings.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default AppSettings;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Fab from '@material-ui/core/Fab';\nimport Modal from '@material-ui/core/Modal';\nimport Zoom from '@material-ui/core/Zoom';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport AddIcon from '@material-ui/icons/Add';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  var pulseCol = fade(theme.palette.secondary.light, 0.4);\n  return {\n    root: {},\n    fab: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        borderRadius: 'inherit',\n        boxShadow: \"0 0 0 0 \".concat(pulseCol),\n        animation: '$fabPulse 4s',\n        animationIterationCount: 5,\n        animationTimingFunction: 'linear'\n      }\n    },\n    '@keyframes fabPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '90%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 10px transparent\"\n      }\n    },\n    directionUp: {},\n    actionsClosed: {\n      display: 'none'\n    },\n    modalContainer: {\n      position: 'absolute',\n      bottom: '0%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    subFabContainer: {\n      padding: theme.spacing(2)\n    },\n    subFab: {},\n    subFabIcon: {\n      margin: theme.spacing(1)\n    }\n  };\n});\n\nvar AddFab = function AddFab(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      onCameraClick = _ref.onCameraClick,\n      onLibraryClick = _ref.onLibraryClick;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      down = _useState4[0],\n      setDown = _useState4[1];\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      other = _objectWithoutProperties(_useContext, [\"device\"]);\n\n  var timerRef = useRef();\n  var classes = useStyles();\n  var downRef = useRef(down);\n  var elRef = useRef();\n  downRef.current = down;\n  var realChildren = children || (device.cameraAccess ? React.createElement(AddIcon, null) : React.createElement(PhotoLibraryIcon, null));\n  useEffect(function () {\n    return function () {\n      timerRef.current = null;\n      downRef.current = null;\n    };\n  }, []);\n\n  var startTimer = function startTimer(el) {\n    if (device.ios) return;\n    if (!elRef.current) return;\n    setDown(true);\n\n    if (!open && !timerRef.current) {\n      timerRef.current = setTimeout(function () {\n        if (downRef.current) setOpen(true);\n        timerRef.current = null;\n      }, 300);\n    }\n  };\n\n  var onDown = function onDown(e) {\n    startTimer(e.currentTarget);\n  };\n\n  var block = function block(e) {\n    if (e && e.stopPropagation) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  var cameraAction = function cameraAction(e) {\n    setOpen(false);\n    setDown(false);\n    onCameraClick();\n    block(e);\n  };\n\n  var libraryAction = function libraryAction(e) {\n    setOpen(false);\n    setDown(false);\n    onLibraryClick();\n    block(e);\n  };\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.rootContainer, className),\n    ref: elRef\n  }, React.createElement(Fab, {\n    className: classes.fab,\n    onMouseDown: onDown,\n    onTouchStart: onDown,\n    onClick: function onClick(e) {\n      block(e);\n      setDown(false);\n\n      if (!open) {\n        if (device.cameraAccess) onCameraClick();else onLibraryClick();\n      }\n    },\n    disableFocusRipple: true,\n    disableTouchRipple: true,\n    disableRipple: true,\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\"\n  }, realChildren), React.createElement(Modal, {\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    open: open,\n    onClose: function onClose() {\n      return setOpen(false);\n    }\n  }, React.createElement(\"div\", {\n    className: classes.modalContainer\n  }, React.createElement(Zoom, {\n    in: open,\n    timeout: 500,\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: classes.subFabContainer\n  }, React.createElement(Fab, {\n    className: classes.subFab,\n    disableFocusRipple: true,\n    variant: \"extended\",\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\",\n    onClick: function onClick() {\n      setOpen(false);\n      libraryAction();\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    color: \"inherit\",\n    className: classes.subFabIcon\n  }), \"Library\"))), React.createElement(Zoom, {\n    in: open,\n    timeout: 250,\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: classes.subFabContainer\n  }, React.createElement(Fab, {\n    className: classes.subFab,\n    disableFocusRipple: true,\n    variant: \"extended\",\n    size: \"large\",\n    disabled: !device.cameraAccess,\n    color: \"secondary\",\n    \"aria-label\": \"Add\",\n    onClick: function onClick() {\n      setOpen(false);\n      cameraAction();\n    }\n  }, React.createElement(AddCameraIcon, {\n    color: \"inherit\",\n    className: classes.subFabIcon\n  }), \"Camera\"))))));\n};\n\nAddFab.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any,\n  onCameraClick: PropTypes.func.isRequired,\n  onLibraryClick: PropTypes.func.isRequired\n};\nexport default AddFab;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\n\nvar ContextMenu = function ContextMenu(_ref) {\n  var anchorEl = _ref.anchorEl,\n      onClose = _ref.onClose,\n      menuItems = _ref.menuItems;\n  return React.createElement(Menu, {\n    anchorEl: anchorEl,\n    open: !!anchorEl,\n    onClose: onClose\n  }, menuItems.map(function (_ref2, idx) {\n    var icon = _ref2.icon,\n        color = _ref2.color,\n        text = _ref2.text,\n        hide = _ref2.hide,\n        disabled = _ref2.disabled,\n        action = _ref2.action,\n        divider = _ref2.divider;\n    var Icon = icon || null;\n    if (hide) return null;\n    if (divider) return React.createElement(Divider, {\n      key: \"contextMenu-\".concat(idx)\n    });\n    return React.createElement(MenuItem, {\n      button: true,\n      key: \"contextMenu-\".concat(idx),\n      disabled: disabled,\n      onClick: function onClick() {\n        onClose();\n        action();\n      }\n    }, Icon && React.createElement(ListItemIcon, null, React.createElement(Icon, {\n      color: disabled ? 'disabled' : undefined\n    })), React.createElement(ListItemText, {\n      primary: text,\n      primaryTypographyProps: {\n        color: color\n      }\n    }));\n  }));\n};\n\nContextMenu.propTypes = {\n  anchorEl: PropTypes.object,\n  onClose: PropTypes.func,\n  menuItems: PropTypes.arrayOf(PropTypes.shape({\n    text: PropTypes.string,\n    icon: PropTypes.any,\n    divider: PropTypes.any,\n    hide: PropTypes.bool,\n    disabled: PropTypes.bool,\n    color: PropTypes.string,\n    action: PropTypes.func\n  }))\n};\nexport default ContextMenu;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport CameraAltIcon from '@material-ui/icons/CameraAlt';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { useFileInput } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center',\n      color: theme.palette.grey[600],\n      border: \"20px solid \".concat(theme.palette.grey[400])\n    },\n    icon: {\n      color: theme.palette.grey[600],\n      margin: 'auto',\n      flex: '1 1 50%',\n      height: '70%',\n      width: '70%'\n    },\n    button: {\n      margin: theme.spacing(2)\n    }\n  };\n});\n\nvar LibraryFilePicker = function LibraryFilePicker(_ref) {\n  var onLibraryAdd = _ref.onLibraryAdd,\n      onCancel = _ref.onCancel,\n      cameraPicker = _ref.cameraPicker;\n  var classes = useStyles();\n\n  var _useFileInput = useFileInput(onLibraryAdd, cameraPicker),\n      fileClickEl = _useFileInput.fileClickEl,\n      forceClick = _useFileInput.forceClick;\n\n  var cameraWords = 'Library';\n  var PlaceIcon = PhotoLibraryIcon;\n\n  if (cameraPicker) {\n    cameraWords = 'Camera';\n    PlaceIcon = CameraAltIcon;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, fileClickEl, React.createElement(PlaceIcon, {\n    className: classes.icon,\n    color: \"inherit\",\n    onClick: forceClick\n  }), React.createElement(Button, {\n    variant: \"contained\",\n    className: classes.button,\n    color: \"primary\",\n    onClick: forceClick\n  }, \"Import from \", cameraWords), React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.button,\n    color: \"secondary\",\n    onClick: onCancel\n  }, \"Cancel\"));\n};\n\nLibraryFilePicker.propTypes = {\n  onLibraryAdd: PropTypes.func.isRequired,\n  cameraPicker: PropTypes.bool,\n  onCancel: PropTypes.func.isRequired\n};\nexport default LibraryFilePicker;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      position: 'relative',\n      display: 'block',\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        bottom: 0,\n        width: '100%',\n        height: 100,\n        background: \"linear-gradient(180deg, rgba(255,255,255,0) 0%, \".concat(theme.palette.background.paper, \" 100%)\")\n      },\n      placeholder: {\n        color: theme.palette.text.secondary\n      }\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ShortLongText = function ShortLongText(_ref) {\n  var label = _ref.label,\n      text = _ref.text,\n      height = _ref.height,\n      onClick = _ref.onClick,\n      placeholder = _ref.placeholder;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    onClick: onClick\n  }, label && React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, label), !text && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\",\n    color: \"inherit\",\n    style: {\n      height: height\n    },\n    className: classNames(classes.placeholder)\n  }, placeholder || 'none'), text && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"body1\",\n    color: \"inherit\",\n    style: {\n      height: height\n    },\n    className: classNames(classes.root)\n  }, text));\n};\n\nShortLongText.propTypes = {\n  label: PropTypes.string,\n  text: PropTypes.string,\n  placeholder: PropTypes.string,\n  height: PropTypes.number,\n  onClick: PropTypes.func\n};\nShortLongText.defaultProps = {\n  height: 100\n};\nexport default ShortLongText;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar useNewImageMenu = function useNewImageMenu(cameraClick, libraryClick) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      menuEl = _useState2[0],\n      setMenuEl = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      series = _useState4[0],\n      setSeries = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      down = _useState6[0],\n      setDown = _useState6[1];\n\n  var downRef = useRef(down);\n  downRef.current = down;\n\n  var startTimer = function startTimer(el) {\n    setDown(true);\n    setTimeout(function () {\n      if (downRef && downRef.current) setMenuEl(el);\n    }, 300);\n  };\n\n  var onDownThunk = function onDownThunk(series) {\n    return function (e) {\n      setSeries(series);\n      startTimer(e.currentTarget);\n    };\n  };\n\n  var onUpThunk = function onUpThunk(series) {\n    return function (e) {\n      setSeries(series);\n      setDown(false);\n      cameraClick(series);\n    };\n  };\n\n  var onCamera = function onCamera(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    cameraClick(series);\n    setMenuEl(null);\n  };\n\n  var onLibrary = function onLibrary(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    libraryClick(series);\n    setMenuEl(null);\n  };\n\n  var onClose = function onClose(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    setMenuEl(null);\n  };\n\n  var onBlock = function onBlock(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  return {\n    onDownThunk: onDownThunk,\n    onUpThunk: onUpThunk,\n    onBlock: onBlock,\n    menu: React.createElement(CameraPopup, {\n      menuEl: menuEl,\n      onCamera: onCamera,\n      onLibrary: onLibrary,\n      onClose: onClose\n    })\n  };\n};\n\nexport default useNewImageMenu;\n\nvar CameraPopupUnstyled = function CameraPopupUnstyled(_ref) {\n  var menuEl = _ref.menuEl,\n      onCamera = _ref.onCamera,\n      onLibrary = _ref.onLibrary,\n      onClose = _ref.onClose;\n  var classes = useStyles();\n  return React.createElement(Menu, {\n    id: \"simple-menu\",\n    anchorEl: menuEl,\n    open: Boolean(menuEl),\n    className: classes.root,\n    onClose: onClose\n  }, React.createElement(MenuItem, {\n    onMouseUp: onCamera,\n    onTouchEnd: onCamera\n  }, React.createElement(AddCameraIcon, null), \"Add from camera\"), React.createElement(MenuItem, {\n    onMouseUp: onLibrary,\n    onTouchEnd: onLibrary\n  }, React.createElement(PhotoLibraryIcon, null), \" Add from Library\"));\n};\n\nCameraPopupUnstyled.propTypes = {\n  menuEl: PropTypes.object,\n  onCamera: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onLibrary: PropTypes.func.isRequired\n};\n\nvar style = function style(theme) {\n  return {\n    root: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\nexport var CameraPopup = CameraPopupUnstyled;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    bar: {\n      height: theme.spacing(2)\n    },\n    message: {},\n    msgContainer: {\n      padding: theme.spacing(0, 0.5),\n      zIndex: 3,\n      position: 'absolute',\n      display: 'flex',\n      width: '100%'\n    },\n    msgTextBright: {\n      color: 'white',\n      textShadow: '1px 1px 2px #00000066'\n    },\n    msgTextDark: {\n      color: theme.palette.jet ? theme.palette.jet.main : 'inherit',\n      textShadow: '1px 1px 2px #FFFFFF66'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    messageInner: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar UploadControlUnstyled = function UploadControlUnstyled(_ref) {\n  var className = _ref.className,\n      text = _ref.text,\n      progress = _ref.progress;\n  var classes = useStyles();\n  var finalProgress = progress > 0 ? progress : 0;\n  if (!text) return null;\n  var message = \"Uploading: \".concat(text);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(\"div\", {\n    className: classes.messageInner\n  }, React.createElement(\"div\", {\n    className: classNames(classes.msgContainer)\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: finalProgress > 30 ? classes.msgTextBright : classes.msgTextDark\n  }, message), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Typography, {\n    variant: \"caption\",\n    className: finalProgress > 90 ? classes.msgTextBright : classes.msgTextDark\n  }, finalProgress, \"%\")), React.createElement(LinearProgress, {\n    className: classes.bar,\n    color: \"primary\",\n    variant: \"determinate\",\n    value: finalProgress\n  })));\n};\n\nUploadControlUnstyled.propTypes = {\n  className: PropTypes.string,\n  text: PropTypes.string,\n  progress: PropTypes.number\n};\nvar UploadControl = UploadControlUnstyled;\nexport default UploadControl;\nexport var UploadControlCOSMOSWrapper = function UploadControlCOSMOSWrapper(_ref2) {\n  var text = _ref2.text,\n      progress = _ref2.progress;\n  var classes = useWrapperStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(Paper, {\n    className: classes.paper\n  }, React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"This is a dummy component.\")), React.createElement(UploadControl, {\n    text: text,\n    progress: progress\n  }));\n};\nUploadControlCOSMOSWrapper.propTypes = {\n  text: PropTypes.string,\n  progress: PropTypes.number\n};\n\nvar wrapperStyle = function wrapperStyle(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    paper: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useWrapperStyles = makeStyles(wrapperStyle);\nUploadControlCOSMOSWrapper.displayName = UploadControl.displayName;\nexport var UploadControlTest = UploadControlCOSMOSWrapper;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { TextField, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    rootEdit: {},\n    formControl: {\n      width: '100%'\n    },\n    textBody: {\n      whiteSpace: 'pre-line'\n    },\n    actionButtons: {\n      textAlign: 'right'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar DateControl = function DateControl(_ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      hint = _ref.hint,\n      _onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, label), React.createElement(TextField, {\n    type: \"datetime-local\",\n    fullWidth: true,\n    value: dates.timestampToHTML5Input(value),\n    className: classes.textField,\n    onChange: function onChange(e) {\n      return _onChange(dates.HTML5InputToTimestamp(e.target.value));\n    }\n  }), hint && React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.hint\n  }, hint));\n};\n\nDateControl.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  hint: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func.isRequired\n};\nexport default DateControl;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    rootEdit: {},\n    formControl: {\n      width: '100%'\n    },\n    textBody: {\n      whiteSpace: 'pre-line'\n    },\n    actionButtons: {\n      textAlign: 'right'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar DateView = function DateView(_ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      className = _ref.className;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, label), React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.hint\n  }, value ? dates.formatDate(value) : ''));\n};\n\nDateView.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string\n};\nexport default DateView;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport TextField from '@material-ui/core/TextField';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\nimport log from 'loglevel';\nexport var ERROR_SEND_STATES = {\n  UNSENT: 'UNSENT',\n  SENDING: 'SENDING',\n  SENT: 'SENT',\n  ERROR: 'ERROR'\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n      padding: theme.spacing(1),\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center',\n      color: theme.palette.text.primary,\n      border: \"20px solid \".concat(theme.palette.text.secondary)\n    },\n    button: {},\n    icon: {\n      opacity: 0.5,\n      margin: 'auto',\n      flex: '0 1 10%',\n      width: '50%'\n    },\n    text: {},\n    spacer: {\n      flexGrow: 1\n    },\n    stack: {\n      padding: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n      fontSize: '8px',\n      flexGrow: 1,\n      textAlign: 'left',\n      whiteSpace: 'pre-wrap',\n      overflow: 'scroll',\n      color: theme.palette.error.main,\n      fontFamily: 'Consolas, monaco, monospace'\n    }\n  };\n});\n\nvar ErrorScreen = function ErrorScreen(_ref) {\n  var error = _ref.error,\n      sendState = _ref.sendState,\n      reportError = _ref.reportError;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dlgOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions;\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      note = _useState4[0],\n      setNote = _useState4[1];\n\n  log.info('ERRORCOJNTEXT', {\n    reportError: reportError\n  });\n  var stackEl = React.createElement(\"div\", {\n    className: classes.spacer\n  });\n\n  try {\n    if (process.env.NODE_ENV === 'development') {\n      stackEl = React.createElement(Typography, {\n        className: classes.stack\n      }, error.stack);\n    }\n  } catch (e) {}\n\n  var buttonText = 'Report this bug';\n  var disabled = false;\n  var color = 'primary';\n\n  switch (sendState) {\n    case ERROR_SEND_STATES.UNSENT:\n      buttonText = 'Report this bug';\n      break;\n\n    case ERROR_SEND_STATES.SENDING:\n      disabled = true;\n      color = 'default';\n      buttonText = 'Sending...';\n      break;\n\n    case ERROR_SEND_STATES.SENT:\n      color = 'default';\n      disabled = true;\n      buttonText = 'Thank you for your feedback';\n      break;\n\n    case ERROR_SEND_STATES.ERROR:\n      color = 'secondary';\n      disabled = true;\n      buttonText = 'ERROR SENDING BUG REPORT';\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ThemeProvider, {\n    theme: themes.home\n  }, React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(ErrorIcon, {\n    className: classes.icon,\n    color: \"error\"\n  }), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.text,\n    color: \"inherit\"\n  }, \"Something went wrong\"), error && error.message && React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.text,\n    color: \"inherit\"\n  }, error.message), React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    disabled: disabled,\n    color: color,\n    onClick: function onClick() {\n      return setDialogOpen(true);\n    }\n  }, React.createElement(BugReportIcon, null), buttonText), stackEl, React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: globalActions.resetApp\n  }, React.createElement(DeleteIcon, null), \"RESET APP\"), React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\"\n  }, \"Unfortunately you will lose any data (and Photos) that haven't already been uploaded\"), React.createElement(Dialog, {\n    open: dlgOpen,\n    fullScreen: true,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    },\n    \"aria-labelledby\": \"form-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\"\n  }, \"Report a bug\"), React.createElement(DialogContent, null, React.createElement(DialogContentText, null, \"What were you trying to do when the error happened? (optional)\"), React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    multiline: true,\n    onChange: function onChange(e) {\n      return setNote(e.target.value);\n    },\n    rows: \"3\",\n    rowsMax: \"6\",\n    id: \"note\",\n    placeholder: \"I tried to X and then Y happened...\",\n    label: \"My report\",\n    fullWidth: true\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return setDialogOpen(false);\n    },\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      reportError(note);\n      setDialogOpen(false);\n    },\n    color: \"primary\"\n  }, \"Send\")))));\n};\n\nErrorScreen.propTypes = {\n  error: PropTypes.object,\n  sendState: PropTypes.string,\n  reportError: PropTypes.func.isRequired\n};\nexport default ErrorScreen;","export { default as FindOnMapButton } from './FindOnMapButton';\nexport { default as AboutApp } from './AboutApp';\nexport { default as AppSettings } from './AppSettings';\nexport { default as AddFab } from './AddFab';\nexport { default as ContextMenu } from './ContextMenu';\nexport { default as LibraryFilePicker } from './LibraryFilePicker';\nexport { default as ShortLongText } from './ShortLongText';\nexport { default as useNewImageMenu } from './useNewImageMenu';\nexport { default as UploadControl } from './UploadControl';\nexport { default as DateControl } from './DateControl';\nexport { default as DateView } from './DateView';\nexport { default as ErrorScreen, ERROR_SEND_STATES } from './ErrorScreen';","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n      fragment myUserWatching on User {\\n        watching\\n        __typename\\n      }\\n    \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n      fragment myWatchers on Series {\\n        watchers\\n        __typename\\n      }\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphqlAPI } from '@morphoto/common';\nimport gql from 'graphql-tag';\nimport _ from 'lodash';\nimport log from 'loglevel';\nvar _graphqlAPI$queries = graphqlAPI.queries,\n    getWholeSeries = _graphqlAPI$queries.getWholeSeries,\n    allSeries = _graphqlAPI$queries.allSeries,\n    userSeries = _graphqlAPI$queries.userSeries,\n    getMyFeed = _graphqlAPI$queries.getMyFeed,\n    getUser = _graphqlAPI$queries.getUser;\nvar _graphqlAPI$fragments = graphqlAPI.fragments,\n    seriesSummaryKeys = _graphqlAPI$fragments.seriesSummaryKeys,\n    photoSummaryKeys = _graphqlAPI$fragments.photoSummaryKeys,\n    seriesSummaryFragment = _graphqlAPI$fragments.seriesSummaryFragment;\nexport var getWholeSeriesUpdate = function getWholeSeriesUpdate(store, seriesDelta) {\n  var variables = {\n    id: seriesDelta.id\n  };\n  var query = getWholeSeries;\n  var newData = {\n    series: {}\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::getWholeSeriesUpdate readQuery failed (but that\\'s fine)', {\n      newData: newData,\n      seriesDelta: seriesDelta\n    });\n  }\n\n  try {\n    newData.series = _objectSpread({}, newData.series, {}, seriesDelta);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    log.info('updateQueries::getWholeSeriesUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::getWholeSeriesUpdate writeQuery failed', {\n      newData: newData,\n      seriesDelta: seriesDelta\n    }, e);\n  }\n};\nexport var getUserUpdate = function getUserUpdate(store, userDelta) {\n  var variables = {\n    id: userDelta.id\n  };\n  var query = getUser;\n  var newData = {\n    user: {}\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::getUserUpdate readQuery failed (but that\\'s fine)', {\n      newData: newData,\n      userDelta: userDelta\n    });\n  }\n\n  try {\n    newData.user = _objectSpread({}, newData.user, {}, userDelta);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    log.info('updateQueries::getUserUpdate DONE', newData);\n  } catch (e) {\n    log.error('updateQueries::getUserUpdate writeQuery failed', {\n      newData: newData,\n      userDelta: userDelta\n    }, e);\n  }\n};\nexport var getWholeSeriesPhotoUpdate = function getWholeSeriesPhotoUpdate(store, photo) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var variables = {\n    id: photo.seriesId\n  };\n  var query = getWholeSeries;\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n\n    var newData = _.cloneDeep(qVal);\n\n    if (remove) {\n      newData.series.photos = newData.series.photos.filter(function (ph) {\n        return ph.id !== photo.id;\n      });\n    } else {\n      var idx = newData.series.photos.findIndex(function (ph) {\n        return ph.id === photo.id;\n      });\n\n      if (idx > -1) {\n        newData.series.photos = _toConsumableArray(newData.series.photos);\n        newData.series.photos[idx] = photo;\n      } else {\n        newData.series.photos = [].concat(_toConsumableArray(newData.series.photos), [photo]);\n      }\n    }\n\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    log.info('updateQueries::getWholeSeriesPhotoUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::getWholeSeriesPhotoUpdate WriteQuery failed', {\n      photo: photo,\n      remove: remove\n    }, e);\n  }\n};\n\nfunction updateSeriesSummaries(origArr, seriesDelta) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var newArr = [];\n\n  if (remove) {\n    newArr = origArr.filter(function (s) {\n      return s.id !== seriesDelta.id;\n    });\n  } else {\n    var seriesIndex = origArr.findIndex(function (s) {\n      return s.id === seriesDelta.id;\n    });\n    if (!seriesIndex) return;\n\n    var newAllSeriesEntry = _objectSpread({}, origArr[seriesIndex], {}, _.pick(seriesDelta, seriesSummaryKeys), {\n      seriesStatus: null,\n      __typename: 'SeriesSummary'\n    });\n\n    if (seriesIndex > -1) {\n      newArr = origArr.map(function (s) {\n        return s.id === seriesDelta.id ? newAllSeriesEntry : s;\n      });\n    } else {\n      newArr = [].concat(_toConsumableArray(newArr), [newAllSeriesEntry]);\n    }\n  }\n\n  log.info('updateQueries::updateSeriesSummaries HELPER', {\n    origArr: origArr,\n    seriesDelta: seriesDelta,\n    newArr: newArr,\n    remove: remove\n  });\n  return newArr;\n}\n\nfunction updateFeedList(origArr, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var newArr = [];\n\n  if (remove) {\n    newArr = origArr.filter(function (fItem) {\n      if (photo) {\n        return fItem.photo.id !== photo.id;\n      } else {\n        return fItem.series.id === series.id;\n      }\n    });\n  } else {\n    var idx = origArr.findIndex(function (fitem) {\n      return fitem._id === photo.id;\n    });\n\n    var newSeriesSummary = _.pick(series, seriesSummaryKeys);\n\n    newSeriesSummary.__typename = 'SeriesSummary';\n\n    var newPhotoSummary = _.pick(photo, photoSummaryKeys);\n\n    newPhotoSummary.__typename = 'PhotoSummary';\n\n    if (idx > -1) {\n      newArr = _toConsumableArray(origArr);\n      newArr[idx].photo = newPhotoSummary;\n    } else {\n      newArr = [].concat(_toConsumableArray(origArr), [{\n        _id: newPhotoSummary.id,\n        series: newSeriesSummary,\n        photo: newPhotoSummary,\n        relation: 'OWNED',\n        __typename: 'MyFeedResultItem'\n      }]);\n    }\n  }\n\n  log.info('updateQueries::updateFeedList HELPER', {\n    origArr: origArr,\n    series: series,\n    photo: photo,\n    newArr: newArr\n  });\n  return newArr;\n}\n\nexport var allSeriesUpdate = function allSeriesUpdate(store, seriesDelta) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var variables = {\n    limit: 100\n  };\n  var query = allSeries;\n  var newData = {\n    allSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::allSeriesUpdate readQuery failed (but that\\'s fine)', {\n      seriesDelta: seriesDelta,\n      remove: remove,\n      newData: newData\n    });\n\n    if (seriesDelta) {\n      var existingSeries = newData.allSeries.seriesSummaries.find(function (_ref) {\n        var id = _ref.id;\n        return id === seriesDelta.id;\n      }) || {};\n\n      var newSeriesSummary = _objectSpread({}, existingSeries, {}, _.pick(seriesDelta, seriesSummaryKeys));\n\n      newSeriesSummary.__typename = 'SeriesSummary';\n      newData.allSeries.seriesSummaries = [newSeriesSummary];\n    } else return;\n  }\n\n  try {\n    newData.allSeries.seriesSummaries = updateSeriesSummaries(newData.allSeries.seriesSummaries, seriesDelta, remove);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    log.info('updateQueries::allSeriesUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::allSeriesUpdate writeQuery failed', {\n      seriesDelta: seriesDelta,\n      remove: remove,\n      newData: newData\n    }, e);\n  }\n};\nexport var allSeriesPhotoUpdate = function allSeriesPhotoUpdate(store, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var query = allSeries;\n  var newData = {\n    allSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: {\n        limit: 100\n      }\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::allSeriesPhotoUpdate:: allSeries readQuery failed (but that\\'s fine)', {\n      series: series,\n      remove: remove,\n      photo: photo,\n      newData: newData\n    });\n\n    if (series) {\n      var newSeriesSummary = _.pick(series, seriesSummaryKeys);\n\n      newSeriesSummary.__typename = 'SeriesSummary';\n      newData.allSeries.seriesSummaries = [newSeriesSummary];\n    } else return;\n  }\n\n  try {\n    newData.allSeries.seriesSummaries = newData.allSeries.seriesSummaries.map(function (s) {\n      if (s.id !== photo.seriesId) return s;else {\n        var newS = _.cloneDeep(s);\n\n        var photoIndex = series.photos.findIndex(function (ph) {\n          return ph.id === photo.id;\n        });\n\n        if (remove && series) {\n          if (newS.latest.id === photo.id) {\n            newS.latest = series.photos[series.photos.length - 1];\n          }\n\n          if (newS.featured.id === photo.id) {\n            newS.featured = series.photos[series.photos.length - 1];\n          }\n\n          newS.photoCount -= 1;\n        } else if (photoIndex === -1) {\n          var photoSummary = _.pick(photo, photoSummaryKeys);\n\n          photoSummary.__typename = 'PhotoSummary';\n          newS.latest = photoSummary;\n          newS.photoCount += 1;\n        } else {}\n\n        return newS;\n      }\n    });\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    log.info('updateQueries::allSeriesPhotoUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::createPhotoMutation:: allSeries read or write ERROR', {\n      series: series,\n      photo: photo,\n      remove: remove\n    }, e);\n  }\n};\nexport var userSeriesUpdate = function userSeriesUpdate(store, series) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var query = userSeries;\n  var newData = {\n    userSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::userSeriesUpdate readQuery failed (but that\\'s fine)', {\n      series: series,\n      remove: remove,\n      newData: newData\n    });\n  }\n\n  try {\n    newData.userSeries.seriesSummaries = updateSeriesSummaries(newData.userSeries.seriesSummaries, series, remove);\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    log.info('updateQueries::userSeriesUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::userSeriesUpdate writeQuery failed', {\n      series: series,\n      remove: remove,\n      newData: newData\n    }, e);\n  }\n};\nexport var feedUpdate = function feedUpdate(store, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var query = getMyFeed;\n  var newData = {\n    myFeed: {\n      feed: [],\n      window: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    log.info('updateQueries::feedUpdate readQuery failed (but that\\'s fine)', {\n      series: series,\n      photo: photo,\n      remove: remove,\n      newData: newData\n    });\n  }\n\n  try {\n    newData.myFeed.feed = updateFeedList(newData.myFeed.feed, series, photo, remove);\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    log.info('updateQueries::feedUpdate DONE');\n  } catch (e) {\n    log.error('updateQueries::feedUpdate writeQuery failed', {\n      series: series,\n      photo: photo,\n      remove: remove,\n      newData: newData\n    }, e);\n  }\n};\nexport var watchUpdate = function watchUpdate(store, seriesId, userId) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  try {\n    var newWatchers = 0;\n    var newWatching = [];\n    var seriesFragId = 'Series:' + seriesId;\n    var seriesFrag = gql(_templateObject());\n    var seriesWatchers = store.readFragment({\n      id: seriesFragId,\n      fragment: seriesFrag\n    });\n    log.info('watchUpdate:seriesWatchers readFragment', seriesId, seriesWatchers);\n    var userFragId = 'User:' + userId;\n    var userFrag = gql(_templateObject2());\n    var userFragResult = store.readFragment({\n      id: userFragId,\n      fragment: userFrag\n    });\n    log.info('watchUpdate:userFragResult readFragment', seriesId, userFragResult);\n\n    if (seriesWatchers) {\n      newWatchers = seriesWatchers.watchers && seriesWatchers.watchers > -1 ? seriesWatchers.watchers : 0;\n      newWatchers += remove ? -1 : 1;\n      if (newWatchers < 0) newWatchers = 0;\n      newWatching = remove ? userFragResult.watching.filter(function (wid) {\n        return wid !== seriesId;\n      }) : _toConsumableArray(new Set([].concat(_toConsumableArray(userFragResult.watching), [seriesId])));\n      var seriesDelta = {\n        id: seriesId,\n        watchers: newWatchers\n      };\n      getWholeSeriesUpdate(store, seriesDelta);\n\n      _seriesSummaryFragmentUpdate(store, seriesDelta);\n\n      getUserUpdate(store, {\n        id: userId,\n        watching: newWatching\n      });\n      allSeriesUpdate(store, seriesDelta);\n      if (remove) feedUpdate(store, seriesDelta, null, remove);\n    }\n  } catch (e) {\n    log.error('watchUpdate', e);\n  }\n};\nexport var _seriesSummaryFragmentUpdate = function _seriesSummaryFragmentUpdate(store, seriesDelta) {\n  try {\n    var seriesSummaryFragId = 'SeriesSummary:' + seriesDelta.id;\n    var seriesSummaryFragResults = store.readFragment({\n      id: seriesSummaryFragId,\n      fragment: seriesSummaryFragment,\n      fragmentName: 'seriesSummaryFragment'\n    });\n    log.info('_seriesSummaryFragmentUpdate readFragment', seriesDelta.id, seriesSummaryFragResults);\n\n    if (seriesSummaryFragResults) {\n      store.writeFragment({\n        id: seriesSummaryFragId,\n        fragment: seriesSummaryFragment,\n        fragmentName: 'seriesSummaryFragment',\n        data: _objectSpread({}, seriesSummaryFragResults, {}, seriesDelta)\n      });\n    }\n  } catch (e) {\n    log.error('_seriesSummaryFragmentUpdate failed', {\n      seriesDelta: seriesDelta\n    }, e);\n  }\n};","export var Actions = {\n  HOME_CHANGE_STATE: 'HOME_CHANGE_STATE',\n  HOME_CHANGE_ACTIVE_SERIES: 'HOME_CHANGE_ACTIVE_SERIES',\n  HOME_STATE_BACK: 'HOME_STATE_BACK',\n  MAP_HISTORY_POP: 'MAP_HISTORY_POP',\n  MAP_HISTORY_PUSH: 'MAP_HISTORY_PUSH',\n  MAP_HISTORY_CLEAR: 'MAP_HISTORY_CLEAR',\n  UPLOADER_QUEUE: 'UPLOADER_QUEUE',\n  UPLOADER_COMPLETE: 'UPLOADER_COMPLETE',\n  UPLOADER_UPDATE_PROGRESS: 'UPLOADER_UPDATE_PROGRESS',\n  UPLOADER_SET_UPLOADING: 'UPLOADER_SET_UPLOADING',\n  UPLOADER_SET_ONLINE: 'UPLOADER_SET_ONLINE',\n  OFFLINE_VIEWPORT_SAVE: 'OFFLINE_VIEWPORT_SAVE',\n  OFFLINE_SET_STATUS: 'OFFLINE_SET_STATUS',\n  SETFLAG: 'SETFLAG',\n  RESET_ALL_STATE: 'RESET_ALL_STATE'\n};\nexport default {\n  setHomeState: function setHomeState(newDomain, params) {\n    return {\n      type: Actions.HOME_CHANGE_STATE,\n      data: {\n        newDomain: newDomain,\n        params: params\n      }\n    };\n  },\n  homeStateBack: function homeStateBack() {\n    return {\n      type: Actions.HOME_STATE_BACK\n    };\n  },\n  setActiveSeries: function setActiveSeries(activeSeries, initialPhoto) {\n    return {\n      type: Actions.HOME_CHANGE_ACTIVE_SERIES,\n      data: {\n        activeSeries: activeSeries,\n        initialPhoto: initialPhoto\n      }\n    };\n  },\n  setFlag: function setFlag(flagName, flagVal) {\n    return {\n      type: Actions.SETFLAG,\n      data: {\n        flagName: flagName,\n        flagVal: flagVal\n      }\n    };\n  },\n  setOfflineViewport: function setOfflineViewport(viewport) {\n    return {\n      type: Actions.OFFLINE_VIEWPORT_SAVE,\n      data: viewport\n    };\n  },\n  setOfflineCompleted: function setOfflineCompleted(bVal) {\n    return {\n      type: Actions.OFFLINE_SET_STATUS,\n      data: bVal\n    };\n  },\n  popMapHistory: function popMapHistory() {\n    return {\n      type: Actions.MAP_HISTORY_POP\n    };\n  },\n  pushMapHistory: function pushMapHistory(viewportSave) {\n    return {\n      type: Actions.MAP_HISTORY_PUSH,\n      data: viewportSave\n    };\n  },\n  clearMapHistory: function clearMapHistory() {\n    return {\n      type: Actions.MAP_HISTORY_CLEAR\n    };\n  },\n  resetAllState: function resetAllState() {\n    return {\n      type: Actions.RESET_ALL_STATE\n    };\n  },\n  queueUpload: function queueUpload(uploadObj) {\n    return {\n      type: Actions.UPLOADER_QUEUE,\n      data: uploadObj\n    };\n  },\n  setUploaderOnline: function setUploaderOnline(bOnline) {\n    return {\n      type: Actions.UPLOADER_SET_ONLINE,\n      data: bOnline\n    };\n  },\n  updateUploadProgress: function updateUploadProgress(newProgress) {\n    return {\n      type: Actions.UPLOADER_UPDATE_PROGRESS,\n      data: newProgress\n    };\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSeriesTags = exports[\"default\"] = void 0;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Tags = function Tags(tagConfig, tags) {\n  var _this = this;\n\n  _classCallCheck(this, Tags);\n\n  _defineProperty(this, \"findTagByLabel\", function (typeId, tagLabel) {\n    return _this.getTagType(typeId).values.find(function (tt) {\n      return tt.label === tagLabel;\n    });\n  });\n\n  _defineProperty(this, \"getXYTags\", function () {\n    var xyTagLabels = _this.getXYTagTypes().map(function (tt) {\n      return tt.label;\n    });\n\n    return _this.tags.filter(function (tag) {\n      return xyTagLabels.indexOf(tag.typeId) > -1 && tag.coords && tag.coords.x;\n    });\n  });\n\n  _defineProperty(this, \"getNonXYTags\", function () {\n    var NonXYTagLabels = _this.getNonXYTagTypes().map(function (tt) {\n      return tt.label;\n    });\n\n    return _this.tags.filter(function (tag) {\n      return NonXYTagLabels.indexOf(tag.typeId) > -1;\n    });\n  });\n\n  _defineProperty(this, \"createNewTagObj\", function (label, typeId) {\n    return {\n      label: label,\n      typeId: typeId\n    };\n  });\n\n  _defineProperty(this, \"createExistingTagObj\", function (label, typeId) {\n    return _objectSpread({}, _this.findTagByLabel(typeId, label), {\n      typeId: typeId\n    });\n  });\n\n  _defineProperty(this, \"createNewXYTagObj\", function (label, typeId, coords) {\n    return {\n      label: label,\n      typeId: typeId,\n      coords: coords\n    };\n  });\n\n  _defineProperty(this, \"createExistingXYTagObj\", function (label, typeId, coords) {\n    return _objectSpread({}, _this.findTagByLabel(typeId, label), {\n      typeId: typeId,\n      coords: coords\n    });\n  });\n\n  _defineProperty(this, \"getTagType\", function (typeId) {\n    return _this.tagConfig.find(function (tt) {\n      return tt.id === typeId;\n    });\n  });\n\n  _defineProperty(this, \"getTagTypeIndex\", function (typeId) {\n    return _this.tagConfig.findIndex(function (tt) {\n      return tt.id === typeId;\n    });\n  });\n\n  _defineProperty(this, \"getXYTagTypes\", function () {\n    return _this.tagConfig.filter(function (tt) {\n      return tt.allowXY;\n    });\n  });\n\n  _defineProperty(this, \"getNonXYTagTypes\", function () {\n    return _this.tagConfig.filter(function (tt) {\n      return tt.allowNonXY;\n    });\n  });\n\n  _defineProperty(this, \"getRelXYTags\", function (multiplier) {\n    return _this.getXYTags().map(function (tag) {\n      return _objectSpread({}, tag, {\n        group: _this.getTagTypeIndex(tag.typeId),\n        relCoords: {\n          x: tag.coords.x * multiplier,\n          y: tag.coords.y * multiplier\n        }\n      });\n    });\n  });\n\n  this.tags = tags;\n  this.tagConfig = tagConfig;\n};\n\nvar _default = Tags;\nexports[\"default\"] = _default;\n\nvar getSeriesTags = function getSeriesTags(series) {\n  var tags = {};\n\n  if (series && series.photos) {\n    series.photos.forEach(function (ph) {\n      ph.tags.forEach(function (tag) {\n        tags[tag.label] = tag;\n      });\n    });\n  }\n\n  return Object.keys(tags);\n};\n\nexports.getSeriesTags = getSeriesTags;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getExifPromise = void 0;\n\nvar _exifParser = _interopRequireDefault(require(\"exif-parser\"));\n\nvar _common = require(\"@morphoto/common\");\n\nvar _dates = require(\"./dates\");\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar getExifPromise = function () {\n  var _ref = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(imgData) {\n    var exif, exifDateTime, exifGPS, blobParser, find, foundIdx, newData, parser;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            exif = null;\n            exifDateTime = null;\n            exifGPS = null;\n\n            if (!(imgData instanceof Blob)) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.t0 = _exifParser[\"default\"];\n            _context.next = 7;\n            return new Response(imgData).arrayBuffer();\n\n          case 7:\n            _context.t1 = _context.sent;\n            blobParser = _context.t0.create.call(_context.t0, _context.t1);\n            exif = blobParser.parse();\n            _context.next = 13;\n            break;\n\n          case 12:\n            try {\n              find = 'base64,';\n              foundIdx = imgData.indexOf(find) + find.length;\n              newData = imgData.slice(foundIdx);\n              parser = _exifParser[\"default\"].create(Buffer.from(newData, 'base64'));\n              exif = parser.parse();\n            } catch (err) {\n              _loglevel[\"default\"].info('EXIF ERROR', err);\n            }\n\n          case 13:\n            if (exif && exif.tags) {\n              try {\n                if (exif.tags && exif.tags.DateTimeOriginal && String(exif.tags.DateTimeOriginal)) {\n                  exifDateTime = (0, _dates.fixParseDate)(exif.tags.DateTimeOriginal, false);\n                }\n              } catch (err) {\n                _loglevel[\"default\"].info('ERROR GETTING TIMESTAMP', {\n                  err: err,\n                  exif: exif\n                });\n              }\n\n              try {\n                if (exif.tags.GPSLatitude && _common.util.isNumeric(exif.tags.GPSLatitude) && exif.tags.GPSLongitude && _common.util.isNumeric(exif.tags.GPSLongitude)) {\n                  exifGPS = [exif.tags.GPSLongitude, exif.tags.GPSLatitude];\n                }\n              } catch (e) {\n                _loglevel[\"default\"].error('GPS Longitude and Latitude could not be determined');\n              }\n            }\n\n            return _context.abrupt(\"return\", {\n              exif: exif,\n              exifDateTime: exifDateTime,\n              exifGPS: exifGPS\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getExifPromise(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.getExifPromise = getExifPromise;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Series = function Series(metaConfig, series) {\n  var _this = this;\n\n  _classCallCheck(this, Series);\n\n  _defineProperty(this, \"getSeriesMeta\", function () {\n    return Object.keys(_this.metaConfig).filter(function (key) {\n      return _this.metaConfig[key].type === 'SERIES';\n    }).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, _this.series.meta[key][\"default\"]));\n    }, {});\n  });\n\n  _defineProperty(this, \"setMeta\", function () {\n    _this.series.meta = JSON.stringify(_this.getSeriesMeta());\n  });\n\n  _defineProperty(this, \"newSeries\", function () {\n    return {\n      id: \"L-\".concat((0, _v[\"default\"])()),\n      meta: JSON.stringify(_this.getSeriesMeta()),\n      photos: []\n    };\n  });\n\n  this.metaConfig = metaConfig;\n  if (series) this.series = series;else {\n    this.series = this.newSeries();\n  }\n};\n\nvar _default = Series;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _common = require(\"@morphoto/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Photo = function Photo(metaConfig, photo) {\n  var _this = this;\n\n  _classCallCheck(this, Photo);\n\n  _defineProperty(this, \"setMeta\", function () {\n    _this.photo.meta = JSON.stringify(_this.getPhotoMeta());\n  });\n\n  _defineProperty(this, \"getPhotoMeta\", function () {\n    return Object.keys(_this.metaConfig).filter(function (key) {\n      return _this.metaConfig[key].type === 'PHOTO';\n    }).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, _this.photo.meta[key][\"default\"]));\n    }, {});\n  });\n\n  _defineProperty(this, \"newPhoto\", function () {\n    return {\n      id: \"L-\".concat((0, _v[\"default\"])()),\n      uploadToken: (0, _v[\"default\"])(),\n      takenOn: _common.dates.convertJSDatetoTimestamp(new Date()),\n      meta: JSON.stringify(_this.getPhotoMeta()),\n      tags: []\n    };\n  });\n\n  this.metaConfig = metaConfig;\n  if (photo) this.photo = photo;else {\n    this.photo = this.newPhoto();\n  }\n};\n\nvar _default = Photo;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodeShareUrl = exports.createShareUrl = void 0;\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar createShareUrl = function createShareUrl(shareUrl, series, photoId) {\n  var noRoot = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  if (!series) return null;\n  var obj = {\n    type: 'series',\n    s: series.id,\n    p: photoId\n  };\n  var encodedId = encodeURI(JSON.stringify(obj));\n  var url = \"\".concat(window.location.origin).concat(process.env.PUBLIC_URL, \"/?fromqr=\").concat(encodedId);\n  var ogShare = \"\".concat(shareUrl, \"/\").concat(series.id, \"/\").concat(photoId || '');\n  return {\n    url: url,\n    ogShare: ogShare\n  };\n};\n\nexports.createShareUrl = createShareUrl;\n\nvar decodeShareUrl = function decodeShareUrl(search) {\n  try {\n    var find = '?fromqr=';\n    var foundIdx = search.indexOf(find);\n    if (foundIdx < 0) return null;\n    var newData = search.slice(foundIdx + find.length);\n    var decodedUrl = JSON.parse(decodeURI(newData));\n    return decodedUrl;\n  } catch (err) {\n    _loglevel[\"default\"].error(err);\n  }\n\n  return null;\n};\n\nexports.decodeShareUrl = decodeShareUrl;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _accesscontrol = _interopRequireDefault(require(\"accesscontrol\"));\n\nvar _permissions = _interopRequireDefault(require(\"./permissions\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar AccessHelper = function () {\n  function AccessHelper(userSub, role) {\n    var _this = this;\n\n    var permissionObj = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _permissions[\"default\"];\n\n    _classCallCheck(this, AccessHelper);\n\n    _defineProperty(this, \"ownOrAny\", function (obj) {\n      if (!obj || !obj.createdUser || !obj.createdUser.id) throw new Error(\"No Created user found\");\n\n      try {\n        return obj.createdUser.id === _this.userSub ? 'Own' : 'Any';\n      } catch (e) {\n        return 'Any';\n      }\n    });\n\n    _defineProperty(this, \"isOwner\", function (obj) {\n      if (!obj || !obj.createdUser || !obj.createdUser.id) throw new Error(\"No Created user found\");\n\n      try {\n        return obj.createdUser.id === _this.userSub;\n      } catch (e) {\n        return false;\n      }\n    });\n\n    _defineProperty(this, \"canUser\", function (action, obj, type, attrs) {\n      if (['series', 'photo'].indexOf(type) < 0) throw new Error(\"canUser: type not supported \".concat(type));\n\n      try {\n        var ownAny = _this.ownOrAny(obj);\n\n        var perm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)](type);\n\n        var otherPerm = null;\n\n        if (type === 'series') {\n          if (obj.access === 'PUBLIC') otherPerm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)]('series_public');else if (obj.access === 'OPEN') otherPerm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)]('series_open');\n        }\n\n        if (attrs) {\n          if (otherPerm) {\n            return !!perm.attributes.find(function (p) {\n              return p === '*' || attrs.indexOf(p) > -1;\n            }) || !!otherPerm.attributes.find(function (p) {\n              return p === '*' || attrs.indexOf(p) > -1;\n            });\n          } else return !!perm.attributes.find(function (p) {\n            return p === '*' || attrs.indexOf(p) > -1;\n          });\n        } else {\n          if (otherPerm) return perm.granted || otherPerm.granted;else return perm.granted;\n        }\n      } catch (e) {\n        _loglevel[\"default\"].error(e);\n\n        return false;\n      }\n    });\n\n    this.userSub = userSub;\n    this.role = role;\n    this.permissionObj = permissionObj;\n    this.ac = new _accesscontrol[\"default\"](permissionObj);\n  }\n\n  _createClass(AccessHelper, [{\n    key: \"toString\",\n    value: function toString() {\n      _loglevel[\"default\"].info('AccessHelper:', {\n        sub: this.userSub,\n        role: this.role\n      });\n    }\n  }]);\n\n  return AccessHelper;\n}();\n\nvar _default = AccessHelper;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNewS3Credentials = exports.getWholeSeries = exports.userSearch = exports.getMyFeed = exports.geocode = exports.getUser = exports.geoSeriesIdOnly = exports.geoSeries = exports.tagSearch = exports.seriesWithTag = exports.seriesFromList = exports.seriesSummaryFromList = exports.keywordSearch = exports.userSeries = exports.pollQuery = exports.allSeries = exports.initQuery = void 0;\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nvar _fragments = require(\"./fragments\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _templateObject17() {\n  var data = _taggedTemplateLiteral([\"\\n  query s3Credentials($seriesId: ID!, $photoId: ID!, $ext: String!)  {\\n    s3Credentials(seriesId: $seriesId, photoId: $photoId, ext: $ext)\\n  }\\n\"]);\n\n  _templateObject17 = function _templateObject17() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject16() {\n  var data = _taggedTemplateLiteral([\"\\nquery getWholeSeries($id: ID!) {\\n  series(id: $id) {\\n    ...seriesFragment\\n    photos {\\n      ...photoFragment\\n    }\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject16 = function _templateObject16() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject15() {\n  var data = _taggedTemplateLiteral([\"\\nquery userSearch($searchStr: String!, $limit: Int) {\\n  userSearch(searchStr: $searchStr, limit: $limit ){\\n    ...userSummaryFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject15 = function _templateObject15() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject14() {\n  var data = _taggedTemplateLiteral([\"\\nquery myFeed($start: String, $end: String, $limit: Int) {\\n  myFeed(start: $start, end: $end, limit: $limit) @connection(key: \\\"myFeed\\\"){\\n    feed {\\n      _id\\n      series {\\n        ...feedSeriesSummaryFragment\\n      }\\n      photo {\\n        ...photoSummaryFragment\\n      }\\n      relation\\n      __typename\\n    }\\n    window\\n    __typename\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject14 = function _templateObject14() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\nquery geocode($search: String!) {\\n  geocoder(search: $search) {\\n    relevance\\n    text\\n    placeName\\n    bbox\\n    center\\n    # geoType\\n    # context\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\nquery getUser($userId: ID) {\\n  user(id: $userId){\\n    ...userFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesInGeoBoundsIdOnly($bounds: [Float], $limit: Int, $nextToken: String) {\\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: \\\"seriesInGeoBoundsSHORT\\\", filter: [\\\"bounds\\\"]){\\n    seriesSummaries {\\n      id\\n      name\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesInGeoBounds($bounds: [Float], $limit: Int, $nextToken: String) {\\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: \\\"seriesInGeoBounds\\\", filter: [\\\"bounds\\\"]){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\nquery tagSearch($limit: Int, $tag: String, $nextToken:  String) {\\n  tags(limit: $limit, tag: $tag, nextToken: $nextToken ){\\n    _id\\n    name\\n    count\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesWithTag($tag: String!, $limit: Int, $nextToken: String){\\n  tagSeries(tag: $tag, limit: $limit, nextToken: $nextToken)  @connection(key: \\\"tagSeries\\\", filter: [\\\"tag\\\"]){\\n    seriesSummaries{\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesFromList($seriesList: [ID]) {\\n  arraySeries(seriesIds: $seriesList) {\\n    ...seriesFragment\\n    photos {\\n      ...photoFragment\\n    }\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesFromList($seriesList: [ID]) {\\n  arraySeries(seriesIds: $seriesList) {\\n    ...seriesFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nquery keywordSearch($searchStr: String, $limit: Int, $nextToken: String) {\\n  keywordSearch(searchStr: $searchStr, limit: $limit, nextToken: $nextToken) {\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nquery userSeries($createdBy: ID) {\\n  userSeries(createdBy: $createdBy ) {\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nquery pollQuery($lastCheck: String!, $limit: Int, $nextToken: String) {\\n  changedSeries(lastCheck: $lastCheck, limit: $limit, nextToken: $nextToken) @connection(key: \\\"changedSeries\\\"){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nquery allSeries($limit: Int, $nextToken: String) {\\n  allSeries(limit: $limit, nextToken: $nextToken) @connection(key: \\\"allSeries\\\"){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nquery init {\\n  init\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar initQuery = (0, _graphqlTag[\"default\"])(_templateObject());\nexports.initQuery = initQuery;\nvar allSeries = (0, _graphqlTag[\"default\"])(_templateObject2(), _fragments.seriesSummaryFragment);\nexports.allSeries = allSeries;\nvar pollQuery = (0, _graphqlTag[\"default\"])(_templateObject3(), _fragments.seriesSummaryFragment);\nexports.pollQuery = pollQuery;\nvar userSeries = (0, _graphqlTag[\"default\"])(_templateObject4(), _fragments.seriesSummaryFragment);\nexports.userSeries = userSeries;\nvar keywordSearch = (0, _graphqlTag[\"default\"])(_templateObject5(), _fragments.seriesSummaryFragment);\nexports.keywordSearch = keywordSearch;\nvar seriesSummaryFromList = (0, _graphqlTag[\"default\"])(_templateObject6(), _fragments.seriesFragment);\nexports.seriesSummaryFromList = seriesSummaryFromList;\nvar seriesFromList = (0, _graphqlTag[\"default\"])(_templateObject7(), _fragments.seriesFragment, _fragments.photoFragment);\nexports.seriesFromList = seriesFromList;\nvar seriesWithTag = (0, _graphqlTag[\"default\"])(_templateObject8(), _fragments.seriesSummaryFragment);\nexports.seriesWithTag = seriesWithTag;\nvar tagSearch = (0, _graphqlTag[\"default\"])(_templateObject9());\nexports.tagSearch = tagSearch;\nvar geoSeries = (0, _graphqlTag[\"default\"])(_templateObject10(), _fragments.seriesSummaryFragment);\nexports.geoSeries = geoSeries;\nvar geoSeriesIdOnly = (0, _graphqlTag[\"default\"])(_templateObject11());\nexports.geoSeriesIdOnly = geoSeriesIdOnly;\nvar getUser = (0, _graphqlTag[\"default\"])(_templateObject12(), _fragments.userFragment);\nexports.getUser = getUser;\nvar geocode = (0, _graphqlTag[\"default\"])(_templateObject13());\nexports.geocode = geocode;\nvar getMyFeed = (0, _graphqlTag[\"default\"])(_templateObject14(), _fragments.feedSeriesSummaryFragment, _fragments.photoSummaryFragment);\nexports.getMyFeed = getMyFeed;\nvar userSearch = (0, _graphqlTag[\"default\"])(_templateObject15(), _fragments.userSummaryFragment);\nexports.userSearch = userSearch;\nvar getWholeSeries = (0, _graphqlTag[\"default\"])(_templateObject16(), _fragments.seriesFragment, _fragments.photoFragment);\nexports.getWholeSeries = getWholeSeries;\nvar getNewS3Credentials = (0, _graphqlTag[\"default\"])(_templateObject17());\nexports.getNewS3Credentials = getNewS3Credentials;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.reportBug = exports.unWatchSeries = exports.watchSeries = exports.newSeriesKeys = exports.createSeries = exports.newPhotoKeys = exports.createPhoto = exports.updatePhotoKeys = exports.updatePhoto = exports.updateSeriesKeys = exports.updateSeries = exports.deleteSeries = exports.deletePhoto = void 0;\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nvar _fragments = require(\"./fragments\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\nmutation reportBug($reportJSON: String!) {\\n  reportBug(reportJSON: $reportJSON)\\n}\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\nmutation unWatch($seriesId: ID!) {\\n  unWatchSeries(seriesId: $seriesId)\\n}\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nmutation watch($seriesId: ID!) {\\n  watchSeries(seriesId: $seriesId)\\n}\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nmutation createSeries($series: NewSeriesInput!, $photo: NewPhotoInput!, $ext: String!) {\\n  createSeries(series: $series, photo: $photo, ext: $ext) {\\n    series {\\n      ...seriesFragment\\n      photos {\\n        ...photoFragment\\n      }\\n    }\\n    preAuth\\n    __typename\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nmutation createPhoto($photo: NewPhotoInput!, $ext: String!) {\\n  createPhoto(photo: $photo, ext: $ext) {\\n    photo {\\n      ...photoFragment\\n    }\\n    preAuth\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nmutation updatePhoto($photo: UpdatePhotoInput!) {\\n  updatePhoto(photo: $photo){\\n    ...photoFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nmutation updateSeries($series: UpdateSeriesInput!) {\\n  updateSeries(series: $series){\\n    ...seriesFragment\\n  }\\n\\n}\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nmutation deleteSeries($id: ID!) {\\n  deleteSeries(id: $id)\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nmutation deletePhoto($seriesId: ID!, $photoId: ID!) {\\n  deletePhoto(seriesId: $seriesId, photoId: $photoId)\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar deletePhoto = (0, _graphqlTag[\"default\"])(_templateObject());\nexports.deletePhoto = deletePhoto;\nvar deleteSeries = (0, _graphqlTag[\"default\"])(_templateObject2());\nexports.deleteSeries = deleteSeries;\nvar updateSeries = (0, _graphqlTag[\"default\"])(_templateObject3(), _fragments.seriesFragment);\nexports.updateSeries = updateSeries;\nvar updateSeriesKeys = ['id', 'access', 'name', 'note', 'coords', 'direction'];\nexports.updateSeriesKeys = updateSeriesKeys;\nvar updatePhoto = (0, _graphqlTag[\"default\"])(_templateObject4(), _fragments.photoFragment);\nexports.updatePhoto = updatePhoto;\nvar updatePhotoKeys = ['id', 'seriesId', 'takenOn', 'tags', 'note'];\nexports.updatePhotoKeys = updatePhotoKeys;\nvar createPhoto = (0, _graphqlTag[\"default\"])(_templateObject5(), _fragments.photoFragment);\nexports.createPhoto = createPhoto;\nvar newPhotoKeys = ['seriesId', 'takenOn', 'meta', 'rawData', 'coords', 'tags', 'note', 'uploadToken'];\nexports.newPhotoKeys = newPhotoKeys;\nvar createSeries = (0, _graphqlTag[\"default\"])(_templateObject6(), _fragments.seriesFragment, _fragments.photoFragment);\nexports.createSeries = createSeries;\nvar newSeriesKeys = ['access', 'name', 'note', 'coords', 'direction', 'meta'];\nexports.newSeriesKeys = newSeriesKeys;\nvar watchSeries = (0, _graphqlTag[\"default\"])(_templateObject7());\nexports.watchSeries = watchSeries;\nvar unWatchSeries = (0, _graphqlTag[\"default\"])(_templateObject8());\nexports.unWatchSeries = unWatchSeries;\nvar reportBug = (0, _graphqlTag[\"default\"])(_templateObject9());\nexports.reportBug = reportBug;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateSeriesResponse = exports.createSeriesResponse = exports.updatePhotoResponse = exports.createPhotoResponse = void 0;\n\nvar _fragments = require(\"./fragments\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar createPhotoResponse = function createPhotoResponse(_ref) {\n  var meUserSummary = _ref.meUserSummary,\n      series = _ref.series,\n      newPhoto = _ref.newPhoto,\n      ext = _ref.ext;\n  return {\n    createPhoto: {\n      photo: {\n        id: newPhoto.id,\n        meta: newPhoto.meta || null,\n        seriesId: series.id,\n        note: newPhoto.note || '',\n        createdOn: Date.now().toString(),\n        createdUser: meUserSummary,\n        updatedUser: meUserSummary,\n        createdBy: meUserSummary.id,\n        updatedBy: meUserSummary.id,\n        uploadToken: newPhoto.uploadToken,\n        updatedOn: Date.now().toString(),\n        seriesCreatedBy: series.createdUser.id,\n        takenOn: newPhoto.takenOn,\n        coords: newPhoto.coords || null,\n        tags: newPhoto.tags || [],\n        paths: {\n          base: null,\n          large: null,\n          orig: null,\n          thumb: null,\n          medium: null,\n          __typename: 'Paths'\n        },\n        __typename: 'Photo'\n      },\n      preAuth: null,\n      __typename: 'NewPhoto'\n    }\n  };\n};\n\nexports.createPhotoResponse = createPhotoResponse;\n\nvar updatePhotoResponse = function updatePhotoResponse(_ref2) {\n  var meUserSummary = _ref2.meUserSummary,\n      photo = _ref2.photo,\n      photoDelta = _ref2.photoDelta;\n  return {\n    updatePhoto: _objectSpread({}, photo, {}, photoDelta, {\n      updatedUser: meUserSummary,\n      updatedBy: meUserSummary.id,\n      __typename: 'Photo'\n    })\n  };\n};\n\nexports.updatePhotoResponse = updatePhotoResponse;\n\nvar createSeriesResponse = function createSeriesResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      newSeries = _ref3.newSeries,\n      newPhoto = _ref3.newPhoto,\n      ext = _ref3.ext;\n  var photoResponse = {\n    id: newPhoto.id,\n    meta: newPhoto.meta || null,\n    seriesId: newSeries.id,\n    createdOn: Date.now().toString(),\n    note: newPhoto.note || null,\n    createdUser: meUserSummary,\n    updatedUser: meUserSummary,\n    createdBy: meUserSummary.id,\n    updatedBy: meUserSummary.id,\n    uploadToken: newPhoto.uploadToken,\n    updatedOn: Date.now().toString(),\n    seriesCreatedBy: meUserSummary.id,\n    takenOn: newPhoto.takenOn,\n    coords: newPhoto.coords || null,\n    tags: newPhoto.tags || [],\n    paths: {\n      base: null,\n      large: null,\n      orig: null,\n      thumb: null,\n      medium: null,\n      __typename: 'Paths'\n    },\n    __typename: 'Photo'\n  };\n\n  var photoResponseSummary = _lodash[\"default\"].pick(photoResponse, _fragments.photoSummaryKeys);\n\n  return {\n    createSeries: {\n      series: {\n        id: newSeries.id,\n        name: newSeries.name,\n        note: newSeries.note || '',\n        access: newSeries.access,\n        meta: newSeries.meta || null,\n        featured: _objectSpread({}, photoResponseSummary, {\n          __typename: 'PhotoSummary'\n        }),\n        latest: _objectSpread({}, photoResponseSummary, {\n          __typename: 'PhotoSummary'\n        }),\n        seriesStatus: null,\n        coords: newSeries.coords || null,\n        direction: newSeries.direction || null,\n        photoCount: 1,\n        createdUser: meUserSummary,\n        updatedUser: meUserSummary,\n        createdBy: meUserSummary.id,\n        updatedBy: meUserSummary.id,\n        createdOn: Date.now().toString(),\n        updatedOn: Date.now().toString(),\n        watchers: 0,\n        photos: [photoResponse],\n        __typename: 'Series'\n      },\n      preAuth: null,\n      __typename: 'NewSeries'\n    }\n  };\n};\n\nexports.createSeriesResponse = createSeriesResponse;\n\nvar updateSeriesResponse = function updateSeriesResponse(_ref4) {\n  var meUserSummary = _ref4.meUserSummary,\n      series = _ref4.series,\n      seriesDelta = _ref4.seriesDelta;\n  return {\n    updateSeries: _objectSpread({}, series, {}, seriesDelta, {\n      updatedUser: meUserSummary,\n      updatedBy: meUserSummary.id,\n      __typename: 'Series'\n    })\n  };\n};\n\nexports.updateSeriesResponse = updateSeriesResponse;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _graphqlTag = _interopRequireDefault(require(\"graphql-tag\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n# Check out the cheat sheet:\\n# https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\\n\\nschema {\\n  query: Query\\n  mutation: Mutation\\n}\\n\\ntype Query { \\n  init: String\\n  series(id: ID!): Series\\n  allSeries(limit: Int, nextToken: String): PaginatedSeries\\n  userSeries(createdBy: ID, limit: Int, nextToken: String): PaginatedSeries\\n  contributedSeries(limit: Int, nextToken: String): PaginatedSeries\\n  arraySeries(seriesIds: [ID], limit: Int, nextToken: String): [Series]\\n  changedSeries(limit: Int, nextToken: String, lastCheck: String!): PaginatedSeries\\n  seriesInGeoBounds(bounds: [Float], limit: Int, nextToken: String): PaginatedSeries\\n  user(id: ID): User\\n  s3Credentials(seriesId: ID!, photoId: ID!, ext: String!): String\\n  geocoder(search: String!): [GeocodeResult]\\n\\n  # ES Search Queries REWRITE THESE\\n\\n  # This one is bad\\n  userSearch(searchStr: String!, limit: Int): [UserSummary]\\n  # This one isn't written yet\\n  # searchUser(userStr: String, limit: Int, nextToken: String): \\n  keywordSearch(searchStr: String, limit: Int, nextToken: String): PaginatedSeries\\n\\n  # These will be better when they are ES:\\n  tags(tag: String, limit: Int, nextToken: String): [TagSummary]\\n  tagSeries(tag: String, limit: Int, nextToken: String): PaginatedSeries\\n  \\n  # TODO: Thing\\n  myFeed(start: String, end: String, limit: Int): MyFeedResult!\\n}\\n\\n# this schema allows the following mutation:\\ntype Mutation {\\n  updateSeries(series: UpdateSeriesInput!): Series!\\n  updatePhoto(photo: UpdatePhotoInput!): Photo!\\n  createSeries(series: NewSeriesInput!, photo: NewPhotoInput!, ext: String!): NewSeries!\\n  createPhoto(photo: NewPhotoInput!, ext: String!): NewPhoto!\\n  deletePhoto(seriesId: ID!, photoId: ID!): ID!\\n  deleteSeries(id: ID!): ID!\\n  createUser(userInfo: NewUserInput!): User!\\n  updateUser(userInfo: UserInput!): User!\\n  \\n  deleteUser(userId: ID!): ID!\\n  watchSeries(seriesId: ID!): ID!\\n  unWatchSeries(seriesId: ID!): ID!\\n\\n  reportBug(reportJSON: String!): Boolean\\n}\\n\\ntype TagSummary {\\n  _id: ID, \\n  name: String!\\n  count: Int!\\n}\\n\\ntype MyFeedResult {\\n  feed: [MyFeedResultItem]\\n  window: [String]\\n}\\n\\ntype MyFeedResultItem {\\n    # The redundant ID is purely for caching on the client side\\n  _id: ID!\\n  series: FeedSeriesSummary!\\n  photo: PhotoSummary!\\n  relation: RelationENUM!\\n}\\n\\ntype FeedSeriesSummary {\\n  # The redundant ID is purely for caching on the client side\\n  id: ID!\\n  name: String\\n  createdUser: UserSummary!\\n  access: String!\\n  updatedOn: String!\\n  createdOn: String!\\n  coords: [Float]\\n  watchers: Int!\\n  photoCount: Int\\n  seriesStatus: String\\n  direction: Int\\n}\\n\\nenum RelationENUM {\\n  OWNED\\n  CONTRIBUTED\\n  WATCHING\\n}\\n\\ntype PaginatedTagSummary {\\n  tags: [TagSummary]\\n  nextToken: String\\n}\\n\\n# Series Connection allows us to implement pagination easily\\ntype PaginatedSeries {\\n  seriesSummaries: [SeriesSummary]\\n  nextToken: String\\n}\\n\\n# Tags belong to Photos\\ninput TagInput {\\n  label: String\\n  typeId: String\\n  coords: ImageCoordsInput\\n}\\n\\ninput ImageCoordsInput {\\n  x: Int\\n  y: Int\\n}\\n\\n# New Photo is a little different because it includes the s3 authorization to upload it\\ntype NewPhoto {\\n  photo: Photo!\\n  preAuth: String!\\n}\\n\\n# Like NewPhoto, newSeries needs a token for the first image\\ntype NewSeries {\\n  series: Series!\\n  preAuth: String!\\n}\\n\\ninput UpdateSeriesInput {\\n  id: ID!\\n  access: String\\n  name: String\\n  note: String\\n  coords: [Float]\\n  direction: Int\\n}\\n\\ninput NewSeriesInput {\\n  access: String!\\n  name: String!\\n  note: String\\n  coords: [Float]\\n  direction: Int\\n  meta: String\\n}\\n\\n# This is a sample Dynamo Schema\\ntype Series {\\n  id: ID!\\n  createdBy: ID!\\n  createdUser: UserSummary!\\n  updatedBy: ID!\\n  updatedUser: UserSummary!\\n  access: String!\\n  seriesStatus: String\\n  # dates come back as strings because graphql can't do 32-bit integers\\n  createdOn: String!\\n  updatedOn: String!\\n  name: String!\\n  watchers: Int!\\n  photos: [Photo]\\n  coords: [Float]\\n  direction: Int\\n  photoCount: Int!\\n  featured: PhotoSummary!\\n  latest: PhotoSummary!\\n  # These is a JSON string object\\n  meta: String\\n  note: String\\n}\\n\\n# This is a sample Dynamo Schema\\ntype SeriesSummary {\\n  id: ID!\\n  name: String\\n  createdUser: UserSummary!\\n  access: String!\\n  updatedOn: String!\\n  createdOn: String!\\n  coords: [Float]\\n  watchers: Int!\\n  featured: PhotoSummary\\n  latest: PhotoSummary\\n  photoCount: Int\\n  seriesStatus: String\\n  direction: Int\\n}\\n\\ntype Photo {\\n  id: ID!\\n  createdBy: ID!\\n  createdUser: UserSummary!\\n  updatedBy: ID!\\n  updatedUser: UserSummary!\\n  createdOn: String!\\n  updatedOn: String!\\n  takenOn: String!\\n  coords: [Float]\\n  note: String\\n  seriesId: ID!\\n  seriesCreatedBy: ID!\\n  meta: String\\n  tags: [Tag]\\n  paths: Paths\\n  # This is a tracking marker so we know when things are updated \\n  uploadToken: String \\n}\\n\\n# Featured or latest photo in a series\\ntype PhotoSummary {\\n  id: ID!\\n  createdUser: UserSummary!\\n  takenOn: String\\n  updatedOn: String\\n  createdOn: String\\n  seriesId: ID!\\n  seriesCreatedBy: ID!\\n  paths: Paths\\n}\\n\\ninput NewPhotoInput {\\n  # Series ID might not be there if this is a new series\\n  seriesId: ID\\n  takenOn: String!\\n  meta: String\\n  rawData: String\\n  coords: [Float]\\n  tags: [TagInput]\\n  note: String\\n  # This is a tracking marker so we know when things are updated \\n  uploadToken: String!\\n}\\n\\ninput UpdatePhotoInput {\\n  id: ID!\\n  seriesId: ID!\\n  takenOn: String\\n  tags: [TagInput]\\n  coords: [Float]\\n  note: String\\n  featured: Boolean\\n  # This is a tracking marker so we know when things are updated \\n  uploadToken: String \\n}\\n\\n\\n# Tags belong to Photos\\ntype Tag {\\n  label: String\\n  typeId: String\\n  coords: ImageCoords\\n}\\n\\ntype Paths {\\n  base: String\\n  thumb: String\\n  medium: String\\n  large: String\\n  orig: String\\n}\\n\\ntype ImageCoords {\\n  x: Int\\n  y: Int\\n}\\n\\n\\ntype User {\\n  id: ID!\\n  username: String\\n  gravatar: String\\n  watching: [ID]\\n  gravatarProfile: String\\n  meta: String\\n  createdOn: String!\\n  updatedOn: String!\\n}\\n\\ntype UserSummary {\\n  id: ID!\\n  gravatar: String\\n  gravatarProfile: String\\n  username: String\\n  createdOn: String!\\n}\\n\\ninput NewUserInput {\\n  id: ID!\\n  username: String!\\n  meta: String\\n}\\n\\ninput UserInput {\\n  id: ID!\\n  watching: [ID]\\n  meta: String\\n}\\n\\n# Geocode Result\\ntype GeocodeResult {\\n  relevance: Float\\n  text: String\\n  placeName: String\\n  bbox: [Float]\\n  center: [Float]\\n  geoType: String\\n  context: String\\n}\\n\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n\nvar _default = (0, _graphqlTag[\"default\"])(_templateObject());\n\nexports[\"default\"] = _default;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport BrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(2),\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      opacity: 0.3,\n      textAlign: 'center',\n      color: theme.palette.getContrastText(theme.palette.text.primary),\n      background: theme.palette.text.primary\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      opacity: 0.5\n    },\n    primary: {\n      textAlign: 'center',\n      width: '100%'\n    }\n  };\n});\n\nvar BrokenImg = function BrokenImg(_ref) {\n  var text = _ref.text,\n      className = _ref.className,\n      style = _ref.style;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className),\n    style: style\n  }, React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(BrokenImageIcon, {\n    className: classes.icon,\n    color: \"inherit\"\n  }), React.createElement(Typography, {\n    className: classes.primary,\n    color: \"inherit\"\n  }, text || 'Missing'), React.createElement(\"div\", {\n    className: classes.spacer\n  }));\n};\n\nBrokenImg.propTypes = {\n  text: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object\n};\nexport default BrokenImg;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(2),\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      opacity: 0.3,\n      textAlign: 'center',\n      color: theme.palette.getContrastText(theme.palette.text.primary),\n      background: theme.palette.text.primary\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      opacity: 0.5\n    },\n    circularProgress: {\n      margin: '0 auto'\n    },\n    primary: {\n      textAlign: 'center',\n      width: '100%'\n    },\n    secondary: {\n      flex: '1 1 30%',\n      width: '100%'\n    }\n  };\n});\n\nvar LoadingImg = function LoadingImg(_ref) {\n  var text = _ref.text,\n      className = _ref.className,\n      style = _ref.style;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className),\n    style: style\n  }, React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(CircularProgress, {\n    color: \"inherit\",\n    className: classes.circularProgress\n  }), React.createElement(Typography, {\n    className: classes.primary,\n    color: \"inherit\"\n  }, text || 'Loading'), React.createElement(\"div\", {\n    className: classes.spacer\n  }));\n};\n\nLoadingImg.propTypes = {\n  text: PropTypes.string,\n  className: PropTypes.string,\n  style: PropTypes.object\n};\nexport default LoadingImg;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport BrokenImg from './BrokenImg';\nimport LoadingImg from './LoadingImg';\nvar MAX_RETRIES = 3;\nvar IMG_STATES = {\n  LOADING: 'loading',\n  BROKEN: 'broken',\n  LOADED: 'loaded'\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      position: 'relative',\n      display: 'block',\n      height: '100%',\n      width: '100%'\n    },\n    img: {\n      display: 'block',\n      height: '100%',\n      width: '100%'\n    },\n    imgBroken: {\n      display: 'none'\n    }\n  };\n});\nexport var RawImage = function RawImage(_ref) {\n  var className = _ref.className,\n      sizePriority = _ref.sizePriority,\n      dataUrl = _ref.dataUrl,\n      _onLoad = _ref.onLoad,\n      photo = _ref.photo,\n      imgRef = _ref.imgRef,\n      style = _ref.style,\n      props = _objectWithoutProperties(_ref, [\"className\", \"sizePriority\", \"dataUrl\", \"onLoad\", \"photo\", \"imgRef\", \"style\"]);\n\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      imgUrls = _useState2[0],\n      setImgUrls = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      altIndex = _useState4[0],\n      setAltIndex = _useState4[1];\n\n  var _useState5 = useState({\n    state: IMG_STATES.LOADING,\n    retry: -1\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      imgState = _useState6[0],\n      setImgState = _useState6[1];\n\n  var _useContext = useContext(AppContext),\n      getPhotoUrls = _useContext.getPhotoUrls,\n      online = _useContext.online;\n\n  var mountedRef = useRef();\n  var imgPropRef = useRef();\n  imgPropRef.current = _objectSpread({\n    altIndex: altIndex\n  }, imgState);\n  useEffect(function () {\n    mountedRef.current = true;\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []);\n  var dataAsUrl = dataUrl || photo.dataUrl;\n\n  var setBroken = function setBroken() {\n    setImgState({\n      state: IMG_STATES.BROKEN,\n      retry: -1\n    });\n  };\n\n  var isBroken = imgState.state === IMG_STATES.BROKEN;\n  var isLoading = imgState.state === IMG_STATES.LOADING;\n  useEffect(function () {\n    if (dataAsUrl) return;\n\n    if (!getPhotoUrls || !photo || !photo.paths || Object.keys(photo.paths).length === 0) {\n      setBroken();\n    } else {\n      getPhotoUrls(photo, ['large', 'medium']).then(function (data) {\n        if (!imgUrls && mountedRef.current && data && data.length > 0) {\n          setImgUrls(data);\n          setImgState({\n            state: IMG_STATES.LOADING,\n            retry: 1\n          });\n        }\n      }).catch(function () {\n        if (mountedRef.current) {\n          setBroken();\n        }\n      });\n    }\n  }, [photo]);\n  var finalURL = '';\n  if (dataAsUrl) finalURL = dataAsUrl;else if (imgUrls && imgUrls[altIndex]) finalURL = imgUrls[altIndex];\n  if (!isBroken && imgState.retry > 1) finalURL = \"\".concat(finalURL, \"?retry=\").concat(imgState.retry);\n\n  if (isBroken) {\n    return React.createElement(BrokenImg, {\n      className: className,\n      style: style\n    });\n  }\n\n  return React.createElement(React.Fragment, null, isLoading && React.createElement(LoadingImg, {\n    className: className,\n    style: style\n  }), !isBroken && React.createElement(\"img\", _extends({\n    ref: imgRef,\n    className: classNames(className, classes.img),\n    alt: sizePriority[altIndex],\n    style: _objectSpread({\n      objectFit: 'contain',\n      display: isLoading ? 'none' : 'block'\n    }, style),\n    onLoad: function onLoad() {\n      setImgState({\n        state: IMG_STATES.LOADED,\n        retry: -1\n      });\n      if (_onLoad) _onLoad();\n    },\n    onError: function onError() {\n      if (!mountedRef.current) return;\n      if (dataAsUrl) setBroken();else if (!online.isOnline) {\n        if (imgUrls && imgPropRef.current.altIndex < imgUrls.length - 1) {\n          setAltIndex(imgPropRef.current.altIndex + 1);\n        } else {\n          setAltIndex(0);\n          setBroken();\n        }\n      } else if (online.isOnline) {\n        if (imgUrls && imgUrls.length > 0 && imgPropRef.current.retry > -1 && imgPropRef.current.retry < MAX_RETRIES) {\n          setTimeout(function () {\n            if (mountedRef.current) setImgState({\n              state: IMG_STATES.LOADING,\n              retry: imgPropRef.current.retry + 1\n            });\n          }, 1000);\n        } else {\n          setBroken();\n        }\n      }\n    },\n    src: finalURL\n  }, props)));\n};\nRawImage.propTypes = {\n  className: PropTypes.string,\n  sizePriority: PropTypes.arrayOf(PropTypes.string),\n  imgRef: PropTypes.any,\n  dataUrl: PropTypes.string,\n  onLoad: PropTypes.func,\n  photo: PropTypes.object,\n  style: PropTypes.object\n};\nRawImage.defaultProps = {\n  sizePriority: ['large', 'medium']\n};\nexport default RawImage;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useComponentSize } from '@morphoto/client-common';\nimport { XYTagChip, useXYTags } from '@morphoto/tags';\nimport RawImage from './RawImage';\nimport style from './Photo.style';\nvar useStyles = makeStyles(style);\n\nvar Photo = function Photo(_ref) {\n  var photo = _ref.photo,\n      opacity = _ref.opacity,\n      edit = _ref.edit,\n      showTags = _ref.showTags,\n      dataUrl = _ref.dataUrl,\n      transition = _ref.transition,\n      onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n  var refImgWrap = useRef();\n  var imgRef = useRef();\n\n  var _useState = useState({\n    multiplier: 1\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      newSize = _useState2[0],\n      setNewSize = _useState2[1];\n\n  var _useComponentSize = useComponentSize(refImgWrap),\n      _useComponentSize$siz = _useComponentSize.size,\n      height = _useComponentSize$siz.height,\n      width = _useComponentSize$siz.width,\n      setResizeActive = _useComponentSize.setResizeActive;\n\n  var _useXYTags = useXYTags(photo, {\n    height: height,\n    width: width\n  }, onChange, setResizeActive),\n      onAddTagTrigger = _useXYTags.onAddTagTrigger,\n      TagChooser = _useXYTags.TagChooser,\n      getRelXYTags = _useXYTags.getRelXYTags,\n      onTagDragOver = _useXYTags.onTagDragOver,\n      onTagDragStop = _useXYTags.onTagDragStop,\n      onTagDelete = _useXYTags.onTagDelete;\n\n  var handleNewSize = function handleNewSize() {\n    var _imgRef$current = imgRef.current,\n        naturalHeight = _imgRef$current.naturalHeight,\n        naturalWidth = _imgRef$current.naturalWidth;\n    if (!(naturalWidth > 0 && naturalHeight > 0)) return;\n    var multiplier = Math.min(height / naturalHeight, width / naturalWidth);\n    var newWidth = multiplier * naturalWidth;\n    var newHeight = multiplier * naturalHeight;\n    setNewSize({\n      newWidth: newWidth,\n      newHeight: newHeight,\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight,\n      multiplier: multiplier\n    });\n  };\n\n  useLayoutEffect(function () {\n    if (imgRef.current) handleNewSize();\n  }, [width, height]);\n  var imgStyle = {};\n\n  if (newSize) {\n    imgStyle = {\n      height: newSize.newHeight,\n      width: newSize.newWidth\n    };\n  }\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className),\n    style: {\n      opacity: opacity !== null ? opacity : 1\n    },\n    ref: refImgWrap\n  }, React.createElement(\"div\", {\n    className: classes.inner,\n    style: {\n      height: newSize ? newSize.newHeight : 1,\n      width: newSize ? newSize.newWidth : 1\n    },\n    onClick: onAddTagTrigger\n  }, showTags || edit ? React.createElement(\"div\", {\n    className: classes.xyTags\n  }, getRelXYTags(newSize.multiplier).map(function (tag, idx) {\n    return React.createElement(XYTagChip, _extends({\n      key: \"xytag-\".concat(idx),\n      color: tag.color\n    }, {\n      edit: edit,\n      newSize: newSize,\n      tag: tag,\n      onTagDragOver: onTagDragOver,\n      onTagDragStop: onTagDragStop,\n      onTagDelete: onTagDelete\n    }));\n  })) : null, React.createElement(RawImage, {\n    className: classes.rawImage,\n    sizePriority: ['large', 'medium', 'thumb'],\n    photo: photo,\n    imgRef: imgRef,\n    dataUrl: dataUrl,\n    style: imgStyle\n  })), edit && React.createElement(TagChooser, null));\n};\n\nPhoto.propTypes = {\n  className: PropTypes.string,\n  opacity: PropTypes.number,\n  photo: PropTypes.object.isRequired,\n  dataUrl: PropTypes.string,\n  edit: PropTypes.bool,\n  showTags: PropTypes.bool,\n  transition: PropTypes.string,\n  onChange: PropTypes.func\n};\nexport default Photo;","export default (function (theme) {\n  return {\n    root: {\n      display: 'block',\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      background: 'black',\n      overflow: 'hidden'\n    },\n    inner: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    xyTags: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    img: {\n      display: 'block'\n    },\n    brokenImg: {\n      display: 'none'\n    },\n    formControl: {\n      width: '100%'\n    }\n  };\n});","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { RawImage } from './RawImage';\nimport style from './PhotoGrid.style';\nimport { AppContext } from '@morphoto/client-common';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(style);\n\nvar PhotoGrid = function PhotoGrid(_ref) {\n  var photos = _ref.photos,\n      columns = _ref.columns,\n      multiSelect = _ref.multiSelect,\n      onDelete = _ref.onDelete,\n      onTileClick = _ref.onTileClick,\n      allowDelete = _ref.allowDelete;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectMode = _useState2[0],\n      setSelectMode = _useState2[1];\n\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      getPhotoUrls = _useContext.getPhotoUrls;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedItems = _useState4[0],\n      setSelectedItems = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      urls = _useState6[0],\n      setUrls = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      deleteConfirm = _useState8[0],\n      setDeleteConfirm = _useState8[1];\n\n  var handleAddToSelection = function handleAddToSelection(e, id) {\n    e.preventDefault();\n    e.stopPropagation();\n    setSelectMode(true);\n    toggleListItem(id);\n  };\n\n  var handleCancelSelection = function handleCancelSelection() {\n    setSelectMode(false);\n    setSelectedItems([]);\n  };\n\n  var onDeleteConfirm = function onDeleteConfirm(confirmation) {\n    setDeleteConfirm(false);\n    if (confirmation === true && selectedItems.length < photos.length) onDelete(selectedItems);\n    handleCancelSelection();\n  };\n\n  var toggleListItem = function toggleListItem(id) {\n    var index = selectedItems.indexOf(id);\n    if (index < 0) setSelectedItems([].concat(_toConsumableArray(selectedItems), [id]));else {\n      var remaining = selectedItems.filter(function (arrId) {\n        return arrId !== id;\n      });\n      if (remaining.length === 0) handleCancelSelection();\n      setSelectedItems(remaining);\n    }\n  };\n\n  useEffect(function () {\n    photos.forEach(function _callee(ph) {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = setUrls;\n              _context.t1 = _objectSpread;\n              _context.t2 = {};\n              _context.t3 = urls;\n              _context.t4 = _defineProperty;\n              _context.t5 = {};\n              _context.t6 = ph.id;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(getPhotoUrls(ph, ['thumb', 'medium']));\n\n            case 9:\n              _context.t7 = _context.sent;\n              _context.t8 = (0, _context.t4)(_context.t5, _context.t6, _context.t7);\n              _context.t9 = (0, _context.t1)(_context.t2, _context.t3, _context.t8);\n              (0, _context.t0)(_context.t9);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n  }, [photos]);\n\n  var handlePhotoTap = function handlePhotoTap(e, photo) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (allowDelete && selectMode) toggleListItem(photo.id);else onTileClick(photo.id);\n  };\n\n  return React.createElement(\"div\", null, React.createElement(GridList, {\n    cols: columns,\n    cellHeight: 200,\n    className: classes.root\n  }, photos.map(function (photo, idx) {\n    var selected = selectedItems.indexOf(photo.id) > -1;\n    return React.createElement(GridListTile, {\n      key: \"gridTile\".concat(idx),\n      onClick: function onClick(e) {\n        return handlePhotoTap(e, photo);\n      },\n      className: classNames(classes.tile, selectMode && !allowDelete && classes.notDeleteable, selectMode && allowDelete && !selected && classes.unSelectedTile, selectMode && selected && classes.selectedTile)\n    }, React.createElement(RawImage, {\n      photo: photo,\n      style: {\n        objectFit: 'cover'\n      },\n      sizePriority: ['medium', 'thumb', 'large'],\n      className: classes.img\n    }), allowDelete && multiSelect && React.createElement(Fab, {\n      size: \"small\",\n      \"aria-label\": \"Add\",\n      className: classes.addFab,\n      onClick: function onClick(e) {\n        return handleAddToSelection(e, photo.id);\n      }\n    }, !selectMode || !selected ? React.createElement(AddIcon, null) : React.createElement(RemoveIcon, null)), React.createElement(GridListTileBar, {\n      title: React.createElement(\"span\", null, dates.formatDate(photo.takenOn, 'll LT'))\n    }));\n  })), React.createElement(Snackbar, {\n    open: selectMode,\n    autoHideDuration: null,\n    ContentProps: {\n      'aria-describedby': 'snackbar-fab-message-id',\n      className: classes.snackbarContent\n    },\n    message: React.createElement(\"span\", {\n      id: \"snackbar-fab-message-id\"\n    }, selectedItems.length >= photos.length ? 'You can\\'t delete all the photos. delete the series instead.' : \"\".concat(selectedItems.length, \" Photos selected\")),\n    action: React.createElement(\"div\", null, React.createElement(Button, {\n      color: \"inherit\",\n      disabled: selectedItems.length >= photos.length,\n      size: \"small\",\n      onClick: function onClick() {\n        return setDeleteConfirm(true);\n      }\n    }, \"Delete\"), React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: function onClick() {\n        return handleCancelSelection();\n      }\n    }, \"Cancel\")),\n    className: classes.snackbar\n  }), React.createElement(DeleteDialog, {\n    open: deleteConfirm,\n    onConfirm: onDeleteConfirm,\n    title: \"Delete \".concat(selectedItems.length, \" Photos\"),\n    message: \"Are you sure you want to delete these photos?\"\n  }));\n};\n\nPhotoGrid.propTypes = {\n  photos: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  multiSelect: PropTypes.bool,\n  allowDelete: PropTypes.bool,\n  onDelete: PropTypes.func,\n  onTileClick: PropTypes.func.isRequired\n};\nPhotoGrid.defaultProps = {\n  multiSelect: true,\n  columns: 2\n};\nexport default PhotoGrid;","import { red } from '@material-ui/core/colors';\nexport default (function (theme) {\n  return {\n    root: {},\n    tile: {},\n    addFab: {\n      position: 'absolute',\n      zIndex: 10,\n      top: theme.spacing(1),\n      left: theme.spacing(1),\n      opacity: 0.3\n    },\n    notDeleteable: {\n      background: theme.palette.primary.dark,\n      opacity: 0.1\n    },\n    unSelectedTile: {\n      '& img': {\n        opacity: 0.7\n      }\n    },\n    selectedTile: {\n      padding: \"\".concat(theme.spacing(2), \"px!important\"),\n      '& img': {\n        opacity: 1\n      }\n    },\n    img: {},\n    snackbarContent: {\n      backgroundColor: red[700]\n    },\n    snackbar: {}\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { util } from '@morphoto/common';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: 'white',\n      zIndex: 10,\n      display: 'flex',\n      flexDirection: 'column',\n      position: 'absolute',\n      '@media (orientation: landscape)': {\n        height: '80%',\n        bottom: '0%'\n      },\n      '@media (orientation: portrait)': {\n        left: '0',\n        transform: 'translateY(-50%)',\n        height: '75%',\n        top: '50%'\n      }\n    },\n    sliderLabel: {\n      display: 'block',\n      flexGrow: 1,\n      textAlign: 'center',\n      padding: theme.spacing(3, 0, 3, 0),\n      textShadow: '0 0 5px black, 0 0 5px black'\n    },\n    vertical: {\n      padding: '0px 31px!important',\n      width: '4px!important'\n    },\n    rail: {\n      width: \"4px!important\",\n      background: theme.palette.primary.dark,\n      boxShadow: '0 0 10px 5px black'\n    },\n    track: {\n      width: \"4px!important\",\n      background: theme.palette.primary.main\n    },\n    thumb: {\n      background: theme.palette.primary.main,\n      border: \"1px solid \".concat(theme.palette.primary.dark),\n      marginLeft: '-8px !important',\n      width: 20,\n      height: 20\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar PhotoFadeSlider = function PhotoFadeSlider(_ref) {\n  var defaultValue = _ref.defaultValue,\n      onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n\n  var _useState = useState(defaultValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      slider = _useState2[0],\n      setSlider = _useState2[1];\n\n  var debouncedOnChange = util.debounce(onChange, 200, true);\n\n  var onSliderMove = function onSliderMove(event, value) {\n    setSlider(value);\n    debouncedOnChange(value);\n  };\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    className: classes.sliderLabel,\n    color: \"inherit\",\n    variant: \"caption\"\n  }, \"New\"), React.createElement(Slider, {\n    classes: {\n      vertical: classes.vertical,\n      rail: classes.rail,\n      track: classes.track,\n      thumb: classes.thumb\n    },\n    color: \"secondary\",\n    value: slider,\n    \"aria-labelledby\": \"label\",\n    onChange: onSliderMove,\n    orientation: \"vertical\"\n  }), React.createElement(Typography, {\n    className: classes.sliderLabel,\n    color: \"inherit\",\n    variant: \"caption\"\n  }, \"Reference\"));\n};\n\nPhotoFadeSlider.propTypes = {\n  defaultValue: PropTypes.number,\n  className: PropTypes.string,\n  onChange: PropTypes.func\n};\nPhotoFadeSlider.defaultProps = {\n  defaultValue: 100,\n  onChange: function onChange() {}\n};\nexport default PhotoFadeSlider;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useLayoutEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { RawImage, PhotoGrid, PhotoFadeSlider } from '@morphoto/photos';\nimport style from './PhotoReviewTool.style';\nvar useStyles = makeStyles(style);\n\nvar PhotoReviewTool = function PhotoReviewTool(_ref) {\n  var photoBlob = _ref.photoBlob,\n      photos = _ref.photos,\n      defaultRefPhotoId = _ref.defaultRefPhotoId,\n      onConfirm = _ref.onConfirm,\n      onCancel = _ref.onCancel,\n      onRetry = _ref.onRetry;\n  var classes = useStyles();\n  var imgRef = useRef();\n  var newRefPhoto = defaultRefPhotoId ? photos.find(function (p) {\n    return p.id === defaultRefPhotoId;\n  }) : photos && photos.length > 0 ? photos[0] : null;\n  useLayoutEffect(function () {\n    if (!photoBlob || !imgRef.current) return;\n    var urlCreator = window.URL || window.webkitURL;\n    var imageUrl = urlCreator.createObjectURL(photoBlob);\n    imgRef.current.src = imageUrl;\n  }, [photoBlob]);\n\n  var _useState = useState(newRefPhoto),\n      _useState2 = _slicedToArray(_useState, 2),\n      refPhoto = _useState2[0],\n      setRefPhoto = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawerOpen = _useState4[0],\n      setDrawerOpen = _useState4[1];\n\n  var _useState5 = useState(70),\n      _useState6 = _slicedToArray(_useState5, 2),\n      slider = _useState6[0],\n      setSlider = _useState6[1];\n\n  var handleTileClick = function handleTileClick(id) {\n    setRefPhoto(photos.find(function (p) {\n      return p.id === id;\n    }));\n    setDrawerOpen(false);\n  };\n\n  if (!photoBlob) return 'Loading...';\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), Boolean(refPhoto) && React.createElement(PhotoFadeSlider, {\n    className: classes.slider,\n    defaultValue: slider,\n    onChange: setSlider\n  }), Boolean(refPhoto) && React.createElement(\"div\", {\n    className: classes.reference\n  }, React.createElement(RawImage, {\n    sizePriority: ['large', 'medium', 'thumb'],\n    style: {\n      opacity: 1 - slider / 100\n    },\n    photo: refPhoto\n  })), React.createElement(\"div\", {\n    className: classes.canvasWrapper\n  }, React.createElement(\"img\", {\n    ref: imgRef,\n    className: classes.rawImage\n  })), React.createElement(Snackbar, {\n    open: true,\n    autoHideDuration: null,\n    ContentProps: {\n      'aria-describedby': 'snackbar-fab-message-id',\n      className: classes.snackbarContent\n    },\n    message: React.createElement(\"span\", {\n      id: \"snackbar-fab-message-id\"\n    }, \"Keep this photo?\"),\n    action: React.createElement(\"div\", null, React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onCancel\n    }, \"Cancel\"), Boolean(onRetry) && React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onRetry\n    }, \"Retry\"), React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onConfirm\n    }, \"Keep\")),\n    className: classes.snackbar\n  }), photos && photos.length > 0 && React.createElement(Fab, {\n    \"aria-label\": \"library\",\n    className: classNames(classes.libraryFab, classes.buttonFab),\n    classes: {\n      disabled: classes.disabledFab\n    },\n    onClick: function onClick() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    className: classes.libraryIcon\n  })), photos && React.createElement(SwipeableDrawer, {\n    anchor: \"left\",\n    open: drawerOpen,\n    classes: {\n      paperAnchorLeft: classes.swipeDrawer\n    },\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: classes.swipeDrawerContainer,\n    role: \"button\",\n    onClick: function onClick() {\n      return setDrawerOpen(false);\n    },\n    onKeyDown: function onKeyDown() {\n      return setDrawerOpen(false);\n    }\n  }, React.createElement(PhotoGrid, {\n    multiSelect: false,\n    columns: 1,\n    photos: photos,\n    onTileClick: handleTileClick\n  }))));\n};\n\nPhotoReviewTool.propTypes = {\n  defaultRefPhotoId: PropTypes.string,\n  photoBlob: PropTypes.any,\n  photos: PropTypes.array,\n  onConfirm: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onRetry: PropTypes.func\n};\nexport default PhotoReviewTool;","export default (function (theme) {\n  return {\n    root: {\n      background: 'rgb(150,150, 150)',\n      height: '100%',\n      width: '100%'\n    },\n    canvasWrapper: {\n      zIndex: 2,\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    },\n    rawImage: {\n      height: '100%',\n      width: '100%',\n      objectFit: 'contain'\n    },\n    reference: {\n      zIndex: 3,\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    },\n    libraryFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        left: '15px',\n        top: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        top: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    slider: {\n      '@media (orientation: landscape)': {\n        position: 'absolute',\n        left: '0',\n        height: '79%',\n        top: '20%'\n      },\n      '@media (orientation: portrait)': {\n        position: 'absolute',\n        left: '0',\n        transform: 'translateY(-50%)',\n        height: '50%',\n        top: '45%'\n      }\n    },\n    swipeDrawer: {\n      width: '50%'\n    },\n    referenceTextContainer: {\n      width: '100%',\n      display: 'flex',\n      color: 'white',\n      background: 'rgba(0,0,0,0.5)',\n      padding: theme.spacing(3),\n      position: 'absolute',\n      zIndex: 4,\n      top: 0\n    },\n    newText: {\n      flexGrow: 1,\n      color: 'white',\n      textShadow: '1 1 1 black',\n      textAlign: 'right'\n    },\n    refText: {\n      flexGrow: 1,\n      color: 'white',\n      textShadow: '1 1 1 black'\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport SwipeableViews from 'react-swipeable-views';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Button from '@material-ui/core/Button';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport Chip from '@material-ui/core/Chip';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport InfoIcon from '@material-ui/icons/Info';\nimport LabelIcon from '@material-ui/icons/Label';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { PhotoInfo } from '@morphoto/photoseries';\nimport Photo from './Photo';\nimport { AppContext } from '@morphoto/client-common';\nimport { dates, Tags as TagClass } from '@morphoto/common';\nimport log from 'loglevel';\nimport style from './PhotoViewTool.style';\nvar useStyles = makeStyles(style);\nvar STATES = {\n  VIEWPIC: 0,\n  SHOWINFO: 1,\n  SHOWTAGS: 2,\n  EDITTAGS: 3,\n  FIRSTAGEDIT: 4\n};\n\nvar PhotoViewTool = function PhotoViewTool(_ref) {\n  var photoId = _ref.photoId,\n      photos = _ref.photos,\n      onMenuBack = _ref.onMenuBack,\n      onUpdatePhoto = _ref.onUpdatePhoto,\n      newPhoto = _ref.newPhoto,\n      canUpdatePhoto = _ref.canUpdatePhoto;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useState = useState(photoId ? photos.findIndex(function (p) {\n    return p.id === photoId;\n  }) : 0),\n      _useState2 = _slicedToArray(_useState, 2),\n      activePhoto = _useState2[0],\n      setActivePhoto = _useState2[1];\n\n  var photo = photos[activePhoto];\n\n  var _useState3 = useState(newPhoto ? photo : {}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      delta = _useState4[0],\n      setDelta = _useState4[1];\n\n  var _useState5 = useState({\n    current: newPhoto ? STATES.FIRSTAGEDIT : STATES.VIEWPIC,\n    last: null\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      mode = _useState6[0],\n      setMode = _useState6[1];\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  if (!photo) return null;\n  var tagsClass = new TagClass(tagConfig, delta.tags || photo.tags || []);\n\n  var changeMode = function changeMode(desired) {\n    setMode({\n      current: desired,\n      last: mode.current\n    });\n  };\n\n  var onCommitTags = function onCommitTags() {\n    changeMode(STATES.SHOWTAGS);\n    onUpdatePhoto(photo, _objectSpread({\n      id: photo.id\n    }, delta));\n  };\n\n  var onCommitTagsFirst = function onCommitTagsFirst() {\n    onUpdatePhoto(photo, _objectSpread({\n      id: photo.id\n    }, delta));\n    onMenuBack();\n  };\n\n  var onCancelTagEdit = function onCancelTagEdit() {\n    changeMode(STATES.SHOWTAGS);\n    setDelta(photo);\n  };\n\n  var photoClick = function photoClick(e) {\n    if (mode.current === STATES.VIEWPIC) {\n      e.preventDefault();\n      e.stopPropagation();\n      changeMode(STATES.SHOWINFO);\n    }\n  };\n\n  if (!photo) return null;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.appBar, mode.current !== STATES.VIEWPIC ? classes.appBarEdit : null)\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"Menu\",\n    onClick: function onClick() {\n      return onMenuBack();\n    }\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(\"div\", {\n    className: classes.grow\n  }, React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, newPhoto ? 'Add Tags' : \"Photo View (\".concat(activePhoto + 1, \"/\").concat(photos.length, \")\")), React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.takenOn, 'lll'))), mode.current === STATES.EDITTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCancelTagEdit\n  }, \"Cancel\"), mode.current === STATES.EDITTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCommitTags\n  }, \"Save\"), mode.current === STATES.FIRSTAGEDIT && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCommitTagsFirst\n  }, \"Next\"), canUpdatePhoto && mode.current === STATES.SHOWTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: function onClick() {\n      return changeMode(STATES.EDITTAGS);\n    }\n  }, \"Edit\"), mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(classes.tagButton, mode.current === STATES.SHOWTAGS && classes.activeButton),\n    onClick: function onClick() {\n      return changeMode(mode.current === STATES.SHOWTAGS ? STATES.VIEWPIC : STATES.SHOWTAGS);\n    }\n  }, React.createElement(Badge, {\n    className: classes.margin,\n    badgeContent: tagsClass.getXYTags().length,\n    color: \"primary\"\n  }, React.createElement(LabelIcon, {\n    color: \"inherit\"\n  }))), mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(classes.infoButton, mode.current === STATES.SHOWINFO && classes.activeButton),\n    onClick: function onClick() {\n      return changeMode(mode.current === STATES.SHOWINFO ? STATES.VIEWPIC : STATES.SHOWINFO);\n    }\n  }, React.createElement(InfoIcon, null)))), React.createElement(\"div\", {\n    className: classes.inner,\n    onDoubleClick: testEvent\n  }, React.createElement(SwipeableViews, {\n    axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n    index: activePhoto,\n    containerStyle: {\n      height: '100%'\n    },\n    style: {\n      height: '100%'\n    },\n    disabled: mode.current !== STATES.VIEWPIC,\n    onChangeIndex: function onChangeIndex(val) {\n      return setActivePhoto(val);\n    },\n    enableMouseEvents: true\n  }, photos.map(function (photoidx, idx) {\n    return React.createElement(\"div\", {\n      className: classes.photoWrapper,\n      key: \"swipeshowpic-\".concat(idx)\n    }, React.createElement(Photo, {\n      showTags: mode.current === STATES.SHOWTAGS,\n      photo: _objectSpread({}, photoidx, {}, delta),\n      edit: canUpdatePhoto && (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT),\n      onChange: setDelta,\n      onCommitTags: onCommitTags\n    }));\n  })), mode.current === STATES.VIEWPIC && React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"bottom\",\n    activeStep: activePhoto,\n    classes: {\n      root: classes.mobileStepper,\n      dots: classes.dots,\n      dot: classes.dot,\n      dotActive: classes.dotActive\n    }\n  })), React.createElement(PhotoInfo, {\n    open: mode.current === STATES.SHOWINFO,\n    photo: photo,\n    canEdit: canUpdatePhoto,\n    onOk: function onOk(newDelta) {\n      onUpdatePhoto(photo, _objectSpread({\n        id: photo.id\n      }, newDelta));\n      changeMode(mode.last);\n    },\n    onCancel: function onCancel() {\n      return changeMode(mode.last);\n    }\n  }), (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT) && React.createElement(Chip, {\n    label: \"Tap to tag features...\",\n    onClick: function onClick() {},\n    className: classes.tipChip\n  }));\n};\n\nPhotoViewTool.propTypes = {\n  photoId: PropTypes.string.isRequired,\n  photos: PropTypes.array.isRequired,\n  newPhoto: PropTypes.bool,\n  onMenuBack: PropTypes.func.isRequired,\n  onUpdatePhoto: PropTypes.func.isRequired,\n  canUpdatePhoto: PropTypes.bool\n};\nexport default PhotoViewTool;\n\nvar testEvent = function testEvent(e) {\n  log.info('TESTEVENT', e);\n};","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    appBar: {\n      flexGrow: 0\n    },\n    appBarEdit: {\n      color: theme.palette.secondary.contrastText,\n      background: theme.palette.secondary.main\n    },\n    grow: {\n      flexGrow: 1\n    },\n    photoWrapper: {\n      height: '100%'\n    },\n    inner: {\n      flex: '1 1',\n      position: 'relative'\n    },\n    tabMenu: {\n      marginTop: theme.spacing(7)\n    },\n    tipChip: {\n      position: 'absolute',\n      zIndex: 11,\n      bottom: 20,\n      left: '50%',\n      opacity: 0.6,\n      transform: 'translateX(-50%)'\n    },\n    mobileStepper: {\n      background: 'none'\n    },\n    dots: {\n      margin: '0 auto'\n    },\n    dot: {\n      border: '1px solid #FFFFFF77'\n    },\n    dotActive: {\n      background: theme.palette.secondary.main\n    },\n    activeButton: {\n      color: theme.palette.primary.main,\n      opacity: 1\n    }\n  };\n});","export { default as RawImage } from './RawImage';\nexport { default as Photo } from './Photo';\nexport { default as BrokenImg } from './BrokenImg';\nexport { default as PhotoGrid } from './PhotoGrid';\nexport { default as PhotoFadeSlider } from './PhotoFadeSlider';\nexport { default as PhotoReviewTool } from './PhotoReviewTool';\nexport { default as PhotoViewTool } from './PhotoViewTool';","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport { getWholeSeriesPhotoUpdate, allSeriesPhotoUpdate, feedUpdate } from './updateQueries';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport _ from 'lodash';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.createPhoto;\nvar KEYS = graphqlAPI.mutations.newPhotoKeys;\nvar createOptimisticResponse = graphqlAPI.optimistic.createPhotoResponse;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      createPhotoMutation: function createPhotoMutation(series, newPhoto, ext) {\n        var newPhotoInput, _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n        return _regeneratorRuntime.async(function createPhotoMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                newPhotoInput = _.cloneDeep(newPhoto);\n\n                if (!newPhotoInput.seriesId && ownProps.activeSeries) {\n                  newPhotoInput.seriesId = ownProps.activeSeries;\n                }\n\n                _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                meUserSummary = {\n                  id: id,\n                  gravatar: gravatar,\n                  gravatarProfile: gravatarProfile,\n                  username: username,\n                  __typename: 'UserSummary'\n                };\n                variables = {\n                  photo: _.pick(newPhotoInput, KEYS),\n                  ext: ext\n                };\n                optimisticResponse = createOptimisticResponse({\n                  meUserSummary: meUserSummary,\n                  series: series,\n                  newPhoto: newPhoto,\n                  ext: ext\n                });\n                _context.next = 8;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 8:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    series: series\n                  }, ownProps.doneCreatingPhoto)\n                }).then(function (data) {\n                  log.info('createPhotoMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesPhotoUpdate(store, data.createPhoto.photo);\n    allSeriesPhotoUpdate(store, context.series, data.createPhoto.photo);\n    feedUpdate(store, context.series, data.createPhoto.photo);\n    if (cb) cb(data.createPhoto.photo.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { allSeriesPhotoUpdate, feedUpdate, getWholeSeriesPhotoUpdate } from './updateQueries';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.deletePhoto;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      deletePhotoMutation: function deletePhotoMutation(photoId) {\n        var variables, optimisticResponse, mutationStackId;\n        return _regeneratorRuntime.async(function deletePhotoMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                variables = {\n                  seriesId: ownProps.series.id,\n                  photoId: photoId\n                };\n                optimisticResponse = {\n                  deletePhoto: photoId\n                };\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 4:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    series: ownProps.series\n                  })\n                }).then(function (data) {\n                  log.info('deletePhotoMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('updateThunk', {\n      context: context,\n      data: data\n    });\n    allSeriesPhotoUpdate(store, null, {\n      id: data.deletePhoto\n    }, true);\n    getWholeSeriesPhotoUpdate(store, {\n      id: data.deletePhoto,\n      seriesId: context.series.id\n    }, true);\n    feedUpdate(store, context.series, {\n      id: data.deletePhoto,\n      seriesId: context.series.id\n    }, true);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { allSeriesUpdate, feedUpdate, userSeriesUpdate } from './updateQueries';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.deleteSeries;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      deleteSeriesMutation: function deleteSeriesMutation() {\n        var variables, optimisticResponse, mutationStackId;\n        return _regeneratorRuntime.async(function deleteSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                variables = {\n                  id: ownProps.activeSeries\n                };\n                optimisticResponse = {\n                  deleteSeries: ownProps.activeSeries\n                };\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 4:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  refetchQueries: [{\n                    query: graphqlAPI.queries.allSeries,\n                    variables: {\n                      limit: 100\n                    }\n                  }, {\n                    query: graphqlAPI.queries.userSeries\n                  }, {\n                    query: graphqlAPI.queries.getMyFeed\n                  }],\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk()\n                }).then(function (data) {\n                  log.info('deleteSeriesMutation:: done', {\n                    data: data,\n                    mutationStackId: mutationStackId\n                  });\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('deleteSeriesMutation::updateThunk', {\n      data: data\n    });\n    userSeriesUpdate(store, data.deleteSeries, true);\n    allSeriesUpdate(store, {\n      id: data.deleteSeries\n    }, true);\n    feedUpdate(store, {\n      id: data.deleteSeries\n    }, null, true);\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { watchUpdate } from './updateQueries';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.unWatchSeries;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      unWatchSeriesMutation: function unWatchSeriesMutation(userId) {\n        var variables, optimisticResponse, mutationStackId;\n        return _regeneratorRuntime.async(function unWatchSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                variables = {\n                  seriesId: ownProps.activeSeries\n                };\n                optimisticResponse = {\n                  unWatchSeries: ownProps.activeSeries\n                };\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 4:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    userId: userId\n                  })\n                }).then(function (data) {\n                  log.info('unWatchSeriesMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    watchUpdate(store, data.unWatchSeries, context.userId, true);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport { getWholeSeriesPhotoUpdate, allSeriesPhotoUpdate, feedUpdate } from './updateQueries';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nimport _ from 'lodash';\nvar MUTATION = graphqlAPI.mutations.updatePhoto;\nvar KEYS = graphqlAPI.mutations.updatePhotoKeys;\nvar createOptimisticResponse = graphqlAPI.optimistic.updatePhotoResponse;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      updatePhotoMutation: function updatePhotoMutation(series, photo, photoDelta) {\n        var newUpdatePhoto, _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n        return _regeneratorRuntime.async(function updatePhotoMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                newUpdatePhoto = _.pick(photoDelta, KEYS);\n\n                if (newUpdatePhoto.tags && newUpdatePhoto.tags.length > 0) {\n                  newUpdatePhoto.tags = newUpdatePhoto.tags.map(function (t) {\n                    var newT = _.pick(t, ['label', 'typeId', 'coords']);\n\n                    if (newT.coords) newT.coords = _.pick(newT.coords, ['x', 'y']);\n                    return newT;\n                  });\n                }\n\n                _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                meUserSummary = {\n                  id: id,\n                  gravatar: gravatar,\n                  gravatarProfile: gravatarProfile,\n                  username: username,\n                  __typename: 'UserSummary'\n                };\n                variables = {\n                  photo: newUpdatePhoto\n                };\n                optimisticResponse = createOptimisticResponse({\n                  meUserSummary: meUserSummary,\n                  newUpdatePhoto: newUpdatePhoto,\n                  photoDelta: photoDelta\n                });\n                _context.next = 8;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 8:\n                mutationStackId = _context.sent;\n                log.info('optimisticresponse', optimisticResponse);\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    photo: photo,\n                    series: series\n                  })\n                }).then(function (data) {\n                  log.info('updatePhotoMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesPhotoUpdate(store, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    allSeriesPhotoUpdate(store, context.series, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    feedUpdate(store, context.series, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport { getWholeSeriesUpdate, allSeriesUpdate, feedUpdate } from './updateQueries';\nimport log from 'loglevel';\nimport _ from 'lodash';\nvar MUTATION = graphqlAPI.mutations.updateSeries;\nvar KEYS = graphqlAPI.mutations.updateSeriesKeys;\nvar createOptimisticResponse = graphqlAPI.optimistic.updateSeriesResponse;\nexport var withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      updateSeriesMutation: function updateSeriesMutation(series, seriesDelta) {\n        var _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n        return _regeneratorRuntime.async(function updateSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                meUserSummary = {\n                  id: id,\n                  gravatar: gravatar,\n                  gravatarProfile: gravatarProfile,\n                  username: username,\n                  __typename: 'UserSummary'\n                };\n                variables = {\n                  series: _.pick(seriesDelta, KEYS)\n                };\n                optimisticResponse = createOptimisticResponse({\n                  meUserSummary: meUserSummary,\n                  series: series,\n                  seriesDelta: seriesDelta\n                });\n                _context.next = 6;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 6:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    series: series\n                  })\n                }).then(function (data) {\n                  log.info('updateSeriesMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    log.info('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesUpdate(store, data.updateSeries);\n    allSeriesUpdate(store, data.updateSeries);\n    feedUpdate(store, data.updateSeries.series, context.series.photos[0]);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport { graphql } from 'react-apollo';\nimport { watchUpdate } from './updateQueries';\nimport { graphqlAPI } from '@morphoto/common';\nimport { pushMutationPromise, popMutationPromise } from '../../offline';\nimport log from 'loglevel';\nvar MUTATION = graphqlAPI.mutations.watchSeries;\nvar withMutation = graphql(MUTATION, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      watchSeriesMutation: function watchSeriesMutation(userId) {\n        var variables, optimisticResponse, mutationStackId;\n        return _regeneratorRuntime.async(function watchSeriesMutation$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                variables = {\n                  seriesId: ownProps.activeSeries\n                };\n                optimisticResponse = {\n                  watchSeries: ownProps.activeSeries\n                };\n                _context.next = 4;\n                return _regeneratorRuntime.awrap(pushMutationPromise({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse\n                }, MUTATION));\n\n              case 4:\n                mutationStackId = _context.sent;\n                return _context.abrupt(\"return\", mutate({\n                  variables: variables,\n                  optimisticResponse: optimisticResponse,\n                  update: updateThunk({\n                    userId: userId\n                  })\n                }).then(function (data) {\n                  log.info('watchSeriesMutation:: done', data);\n                  popMutationPromise(mutationStackId);\n                  return data;\n                }));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      }\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    watchUpdate(store, data.watchSeries, context.userId, false);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { fade, lighten } from '@material-ui/core/styles/colorManipulator';\nimport { config } from '@morphoto/client-common';\nvar typography = {\n  useNextVariants: true\n};\nvar overrides = {\n  MuiDialog: {\n    paper: {\n      '@media (max-width:321px)': {\n        margin: 10\n      }\n    },\n    paperFullWidth: {\n      '@media (max-width:321px)': {\n        width: 'calc(100% - 20px)'\n      }\n    }\n  }\n};\nvar colors = {\n  jet: '#3a3335',\n  rose: '#d81e5b',\n  redorange: '#f0544f',\n  papayawhip: '#FDF0D5',\n  cblue: '#C6D8D3'\n};\nvar home = {\n  palette: {\n    jet: {\n      main: '#3a3335'\n    },\n    rose: {\n      main: '#d81e5b'\n    },\n    redorange: {\n      main: '#f0544f'\n    },\n    papayawhip: {\n      main: '#FDF0D5'\n    },\n    cblue: {\n      main: '#C6D8D3'\n    },\n    primary: {\n      main: colors.redorange\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.jet,\n      secondary: fade(colors.jet, 0.7)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nvar homeTheme = createMuiTheme(home);\nvar access = Object.keys(config.ACCESS).reduce(function (acc, key) {\n  var accessObj = config.ACCESS[key];\n  var contrastText = homeTheme.palette.getContrastText(accessObj.color);\n  return _objectSpread({}, acc, _defineProperty({}, key, createMuiTheme({\n    palette: {\n      primary: {\n        main: accessObj.color\n      },\n      background: {\n        default: accessObj.color,\n        paper: accessObj.color\n      },\n      text: {\n        primary: contrastText,\n        secondary: fade(contrastText, 0.7)\n      }\n    }\n  })));\n}, {});\nvar series = {\n  palette: {\n    primary: {\n      main: lighten(colors.jet, 0.1)\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.jet,\n      secondary: fade(colors.jet, 0.7)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nvar login = {\n  palette: {\n    primary: {\n      main: colors.redorange\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.papayawhip,\n      secondary: fade(colors.papayawhip, 0.7)\n    },\n    background: {\n      default: colors.jet,\n      paper: colors.jet\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nexport default {\n  home: homeTheme,\n  login: createMuiTheme(login),\n  series: createMuiTheme(series),\n  access: access\n};","export default {\n  '@global': {\n    'body, #root': {\n      height: '100%'\n    },\n    'html, body': {\n      overflow: 'hidden',\n      position: 'fixed',\n      fallbacks: [{\n        overflow: 'hidden'\n      }],\n      overscrollBehavior: 'contain',\n      height: '100%',\n      width: '100%'\n    },\n    '.Section__container___3YYTG': {\n      height: '100%'\n    },\n    ':not(input):not(textarea), :not(input):not(textarea)::after, :not(input):not(textarea)::before': {\n      W: 'none',\n      userSelect: 'none',\n      cursor: 'default'\n    },\n    'input, button, textarea, :focus': {\n      outline: 'none'\n    }\n  }\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport default require('./themes').default;\nexport var mapbox = require('./jss/mapbox.css').default;\nexport var roboto = require('./jss/typeface-roboto.css').default;\nexport var baseline = require('./jss/baseline.css').default;\nexport var globalStyle = {\n  '@global': _objectSpread({}, require('./jss/mapbox.css')['@global'], {}, require('./jss/typeface-roboto.css')['@global'])\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nvar style = {\n  background: 'black',\n  height: '100%',\n  position: 'relative'\n};\n\nvar CosmosBlackBackground = function CosmosBlackBackground(_ref) {\n  var children = _ref.children;\n  return React.createElement(\"div\", {\n    style: style\n  }, children);\n};\n\nCosmosBlackBackground.propTypes = {\n  children: PropTypes.any.isRequired\n};\nexport default CosmosBlackBackground;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { makeStyles } from '@material-ui/core/styles';\nimport themes, { globalStyle } from '@morphoto/themes';\nimport { AppContextProvider } from '@morphoto/client-common';\nimport { FakeData } from '@morphoto/mock';\nimport { fakeGlobalActions } from './utils';\nimport whyDidYouRender from '@welldone-software/why-did-you-render';\nimport log from 'loglevel';\nlog.enableAll();\nwhyDidYouRender(React);\n\nvar style = function style(theme) {\n  return {\n    '@global': _objectSpread({}, globalStyle['@global'], {\n      'html, body, #root': {\n        minHeight: '10px',\n        minWidth: '10px',\n        height: '100%'\n      }\n    })\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MaterialUIWrap = function MaterialUIWrap(_ref) {\n  var children = _ref.children,\n      context = _ref.context,\n      theme = _ref.theme,\n      outerTheme = _ref.outerTheme,\n      iOS = _ref.iOS,\n      noTheme = _ref.noTheme;\n  useStyles();\n  var innerTheme = useMemo(function () {\n    return theme || themes.home;\n  }, [theme]);\n  var contextValue = useMemo(function () {\n    var deviceOverride = context && context.device ? _objectSpread({}, context.device) : {};\n    if (iOS !== null) deviceOverride.ios = iOS;\n    return _objectSpread({}, FakeData.fakeAppContext(), {\n      globalActions: fakeGlobalActions,\n      signedIn: true\n    }, context, {\n      device: deviceOverride\n    });\n  }, [context]);\n\n  if (noTheme) {\n    return React.createElement(AppContextProvider, {\n      value: contextValue\n    }, children);\n  }\n\n  return React.createElement(AppContextProvider, {\n    value: contextValue\n  }, React.createElement(ThemeProvider, {\n    theme: outerTheme || innerTheme\n  }, React.createElement(CssBaseline, null), React.createElement(ThemeProvider, {\n    theme: innerTheme\n  }, children)));\n};\n\nMaterialUIWrap.propTypes = {\n  children: PropTypes.any.isRequired,\n  noTheme: PropTypes.bool,\n  theme: PropTypes.object,\n  iOS: PropTypes.bool,\n  outerTheme: PropTypes.object,\n  context: PropTypes.object\n};\nexport default MaterialUIWrap;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.randomLocation = exports.fakePastDate = void 0;\n\nvar _random = require(\"./random\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _turf = require(\"@turf/turf\");\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _faker = _interopRequireDefault(require(\"faker\"));\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _random2 = require(\"../dist/random\");\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar tagColors = ['#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B', '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'];\nvar EVENT_RELATIONS = ['OWNED', 'CONTRIBUTED', 'WATCHING'];\n\nvar fakePastDate = function fakePastDate() {\n  return _moment[\"default\"].utc(_faker[\"default\"].date.past()).format('x');\n};\n\nexports.fakePastDate = fakePastDate;\n\nvar randomLocation = function randomLocation(latLngsAarr) {\n  var coords = null;\n\n  if (latLngsAarr && latLngsAarr.length > 0) {\n    coords = (0, _random.randomArrayEl)(latLngsAarr);\n  } else {\n    coords = [_lodash[\"default\"].random(-180, 179, true), _lodash[\"default\"].random(-85, 85, true)];\n  }\n\n  var newPoint = (0, _turf.transformTranslate)((0, _turf.point)(coords), _lodash[\"default\"].random(0, 2, true), _lodash[\"default\"].random(0, 360, true), {\n    units: 'kilometers'\n  });\n  return newPoint.geometry.coordinates;\n};\n\nexports.randomLocation = randomLocation;\n\nvar FakeData = function FakeData(userPool, metaConfig, tagConfig) {\n  var _this = this;\n\n  _classCallCheck(this, FakeData);\n\n  _defineProperty(this, \"basicObj\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var createdUser = FakeData.userSummary(attribs.createdUser || (0, _random.randomArrayEl)(_this.userPool));\n    var updatedUser = FakeData.userSummary(attribs.updatedUser || createdUser);\n    return {\n      id: attribs.id || (0, _v[\"default\"])(),\n      createdBy: createdUser.id,\n      updatedBy: updatedUser.id,\n      createdUser: createdUser,\n      updatedUser: updatedUser,\n      createdOn: attribs.createdOn || fakePastDate(),\n      updatedOn: attribs.updatedOn || fakePastDate()\n    };\n  });\n\n  _defineProperty(this, \"getUser\", function (id) {\n    return _this.userPool.find(function (user) {\n      return user.id === id;\n    });\n  });\n\n  _defineProperty(this, \"series\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var basicAttribs = _this.basicObj(attribs);\n\n    var fakeWidth = 800 + _lodash[\"default\"].random(-3, 3);\n\n    var fakeHeight = 600 + _lodash[\"default\"].random(-3, 3);\n\n    var photoPlaceholderArr = attribs.numPhotos ? (0, _random2.filledArray)(attribs.numPhotos) : (0, _random.randomMap)(1, 10, function (val, idx) {\n      return idx;\n    });\n\n    var whichHighlight = _lodash[\"default\"].random(0, photoPlaceholderArr.length - 1);\n\n    var access = attribs.access || (0, _random.randomArrayEl)(['PRIVATE', 'OPEN', 'PUBLIC']);\n    var photos = attribs.photos || photoPlaceholderArr.map(function (val, idx) {\n      return _this.photo({\n        width: fakeWidth,\n        height: fakeHeight,\n        createdUser: access === 'OPEN' ? null : basicAttribs.createdUser,\n        updatedUser: access === 'OPEN' ? null : basicAttribs.updatedUser,\n        featured: idx === whichHighlight,\n        hasPaths: attribs.hasPaths !== false\n      });\n    });\n    photos.forEach(function (ph) {\n      ph.seriesId = basicAttribs.id;\n      ph.seriesCreatedBy = basicAttribs.createdBy;\n    });\n    var featured = attribs.featured;\n\n    if (!featured && photos && photos.length > 0) {\n      featured = !photos ? null : FakeData.photoSummary((0, _random.randomArrayEl)(photos));\n    }\n\n    var latest = attribs.featured;\n\n    if (!latest && photos && photos.length > 0) {\n      latest = !photos ? null : FakeData.photoSummary((0, _random.randomArrayEl)(photos));\n    }\n\n    return _objectSpread({}, basicAttribs, {\n      featured: featured,\n      latest: latest,\n      name: attribs.name || _faker[\"default\"].name.title(),\n      objType: 'SERIES',\n      access: access,\n      meta: JSON.stringify(attribs.meta || {\n        project: '926ff265-e22b-400d-ae00-a817d69d5042',\n        reach: '4f310e81-e1f8-45e7-9341-859e7f4e2208'\n      }),\n      watchers: 0,\n      note: attribs.nite || _faker[\"default\"].lorem.paragraphs(_lodash[\"default\"].random(3, 4)).replace('\\n', '\\n\\n'),\n      coords: attribs.coords || [-120.333379, 44.629701],\n      direction: attribs.direction || (0, _random.randomChance)(1, 2) ? _lodash[\"default\"].random(0, 359) : null,\n      photos: photos,\n      photoCount: photos.length\n    });\n  });\n\n  _defineProperty(this, \"event\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref = attribs.series || _this.series(),\n        photos = _ref.photos,\n        series = _objectWithoutProperties(_ref, [\"photos\"]);\n\n    var photo = (0, _random.randomArrayEl)(photos);\n    return {\n      series: FakeData.seriesSummary(series),\n      photo: FakeData.photoSummary(photo),\n      relation: (0, _random.randomArrayEl)(EVENT_RELATIONS)\n    };\n  });\n\n  _defineProperty(this, \"photo\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var basic = _this.basicObj(attribs);\n\n    var templateObj = _objectSpread({}, basic, {\n      takenOn: basic.createdOn,\n      objType: 'PHOTO',\n      base64: null,\n      seriesId: attribs.seriesId || null,\n      seriesCreatedBy: attribs.seriesCreatedBy || null,\n      coords: attribs.coords || [-120.333379, 44.629701],\n      rawData: attribs.rawData || {\n        a: 1,\n        b: 2\n      },\n      note: attribs.note || _faker[\"default\"].lorem.paragraphs(_lodash[\"default\"].random(1, 4)),\n      meta: JSON.stringify(attribs.meta || {\n        user: '926ff265-e22b-400d-ae00-a817d69d5042'\n      }),\n      tags: attribs.tags || _this.tags({\n        width: attribs.width,\n        height: attribs.height\n      })\n    });\n\n    if (attribs.hasPaths) templateObj.paths = _this.getImagePaths(attribs.width || 800, attribs.height || 600);\n    return templateObj;\n  });\n\n  _defineProperty(this, \"getImagePaths\", function () {\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 800;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 600;\n    var strict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    function getPath(w, h) {\n      var newHeight = strict ? h : _lodash[\"default\"].random(-3, 3) + h;\n      var newWidth = strict ? w : _lodash[\"default\"].random(-3, 3) + w;\n      return \"\".concat(newWidth, \"/\").concat(newHeight, \"/nature\");\n    }\n\n    if (width && height) {\n      return {\n        base: \"https://placeimg.com/\",\n        thumb: getPath(Math.round(width * 1 / 3), Math.round(height * 1 / 3)),\n        medium: getPath(Math.round(width * 2 / 3), Math.round(height * 2 / 3)),\n        large: getPath(width, height),\n        orig: getPath(width * 2, height * 2)\n      };\n    }\n\n    return {\n      base: \"https://placeimg.com/\",\n      thumb: getPath(200, 150),\n      medium: getPath(400, 300),\n      large: getPath(1024, 768),\n      orig: getPath(4000, 3000)\n    };\n  });\n\n  _defineProperty(this, \"tags\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return _this.appContext.tagConfig.reduce(function (acc, tagType) {\n      var pool = _lodash[\"default\"].shuffle(_toConsumableArray(tagType.values));\n\n      var newItems = (0, _random.randomMap)(1, pool.length, function (num, idt) {\n        return FakeData.tag({\n          label: pool[idt].label,\n          id: pool[idt].id,\n          typeId: tagType.id,\n          width: attribs.width,\n          height: attribs.height\n        });\n      });\n      return [].concat(_toConsumableArray(acc), _toConsumableArray(newItems));\n    }, []);\n  });\n\n  this.userPool = userPool || (0, _random.randomMap)(1, 10, function () {\n    return FakeData.user();\n  });\n  this.appContext = FakeData.fakeAppContext(metaConfig, tagConfig, this.userPool);\n};\n\n_defineProperty(FakeData, \"fakeAppContext\", function (metaConfig, tagConfig, userPool) {\n  var sampleUser = (0, _random.randomArrayEl)(userPool);\n  return {\n    metaConfig: metaConfig || {\n      user: {\n        objType: 'PHOTO',\n        label: 'User',\n        \"default\": sampleUser,\n        render: function render(key) {\n          return \"User 1: \".concat(sampleUser ? sampleUser.username : 'User 1');\n        }\n      }\n    },\n    currentUser: sampleUser,\n    getPhotoUrls: FakeData.getPhotoUrls,\n    onAvatarClick: function onAvatarClick(username) {\n      return _loglevel[\"default\"].info('onAvatarClick', username);\n    },\n    tagConfig: tagConfig || [FakeData.freeBothTags, FakeData.structureTags, FakeData.treeTags, FakeData.emotionTags, FakeData.seasonTags]\n  };\n});\n\n_defineProperty(FakeData, \"getPhotoUrls\", function () {\n  var _ref2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(photo, sizePriority) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n\n            if (!photo.dataUrl) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", photo.dataUrl);\n\n          case 5:\n            if (!(!photo.paths || photo.paths.length === 0)) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.reject(new Error('No Photos Found')));\n\n          case 7:\n            _loglevel[\"default\"].info('FAKEDATA: resolving image');\n\n            return _context.abrupt(\"return\", sizePriority.map(function (sp) {\n              return \"\".concat(photo.paths.base).concat(photo.paths[sp]);\n            }));\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\n_defineProperty(FakeData, \"photoSummary\", function (_ref3) {\n  var id = _ref3.id,\n      createdUser = _ref3.createdUser,\n      takenOn = _ref3.takenOn,\n      updatedOn = _ref3.updatedOn,\n      createdOn = _ref3.createdOn,\n      psid = _ref3.seriesId,\n      seriesCreatedBy = _ref3.seriesCreatedBy,\n      paths = _ref3.paths;\n  var templateObj = {\n    id: id,\n    createdUser: createdUser,\n    takenOn: takenOn,\n    updatedOn: updatedOn,\n    createdOn: createdOn,\n    seriesId: psid,\n    seriesCreatedBy: seriesCreatedBy,\n    paths: paths\n  };\n  return templateObj;\n});\n\n_defineProperty(FakeData, \"seriesSummary\", function (_ref4) {\n  var id = _ref4.id,\n      name = _ref4.name,\n      createdUser = _ref4.createdUser,\n      access = _ref4.access,\n      updatedOn = _ref4.updatedOn,\n      createdOn = _ref4.createdOn,\n      coords = _ref4.coords,\n      watchers = _ref4.watchers,\n      featured = _ref4.featured,\n      latest = _ref4.latest,\n      photoCount = _ref4.photoCount,\n      seriesStatus = _ref4.seriesStatus,\n      direction = _ref4.direction;\n  var templateObj = {\n    id: id,\n    name: name,\n    createdUser: createdUser,\n    access: access,\n    updatedOn: updatedOn,\n    createdOn: createdOn,\n    coords: coords,\n    watchers: watchers,\n    featured: featured,\n    latest: latest,\n    photoCount: photoCount,\n    seriesStatus: seriesStatus,\n    direction: direction\n  };\n  return templateObj;\n});\n\n_defineProperty(FakeData, \"userSummary\", function (_ref5) {\n  var id = _ref5.id,\n      gravatar = _ref5.gravatar,\n      gravatarProfile = _ref5.gravatarProfile,\n      username = _ref5.username;\n  return {\n    id: id,\n    gravatar: gravatar,\n    gravatarProfile: gravatarProfile,\n    username: username\n  };\n});\n\n_defineProperty(FakeData, \"tag\", function () {\n  var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    label: attribs.label,\n    id: attribs.id || (0, _v[\"default\"])(),\n    typeId: attribs.typeId,\n    xyCoords: attribs.width && attribs.height ? {\n      x: _lodash[\"default\"].random(20, attribs.width - 20),\n      y: _lodash[\"default\"].random(20, attribs.height - 20)\n    } : null\n  };\n});\n\n_defineProperty(FakeData, \"user\", function () {\n  var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    id: (0, _v[\"default\"])(),\n    objType: 'USER',\n    createdOn: attribs.createdOn || fakePastDate(),\n    updatedOn: attribs.updatedOn || fakePastDate(),\n    username: attribs.username || \"\".concat(_faker[\"default\"].name.firstName(), \" \").concat(_faker[\"default\"].name.lastName()),\n    gravatar: attribs.avatarSrc || \"https://placeimg.com/\".concat(_lodash[\"default\"].random(80, 100), \"/\").concat(_lodash[\"default\"].random(80, 100), \"/people\"),\n    gravatarProfile: 'https://s.gravatar.com/b65e93508e1b7eae0af790ec9c65093b.json',\n    watching: [],\n    meta: JSON.stringify(attribs.meta || {})\n  };\n});\n\n_defineProperty(FakeData, \"_freeBothTagsValues\", ['Groovy', 'Elbow', 'Boat', 'Anchovy', 'Garden', 'Sunday', 'Green#$@324', 'Beaver Stuff', '234Little Things', 'Spaceship', 'SAG', '(  Am I Right?    )', '{{{{\"\\'STEREO\\'\"}}}}}', 'mytag', 'XYTAGS', 'Generation', 'Frogs', 'randomTag', 'Januarry 2005', '2018'].map(function (label, idx) {\n  return {\n    label: label,\n    id: (0, _v[\"default\"])(),\n    count: idx * 31 + _lodash[\"default\"].random(1, 20)\n  };\n}));\n\n_defineProperty(FakeData, \"freeBothTags\", {\n  id: 'freeBothType',\n  label: 'Anything Goes Tag',\n  color: tagColors[8],\n  allowXY: true,\n  allowNonXY: true,\n  allowAdditions: true,\n  values: FakeData._freeBothTagsValues\n});\n\n_defineProperty(FakeData, \"treeTags\", {\n  id: 'treetypes',\n  label: 'Tree Types',\n  color: tagColors[1],\n  allowXY: true,\n  allowNonXY: false,\n  allowAdditions: true,\n  values: ['Elm', 'Birch', 'Palm', 'Cottonwood', 'Oak'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"structureTags\", {\n  id: 'structures',\n  label: 'Structures',\n  color: tagColors[2],\n  allowXY: true,\n  allowNonXY: false,\n  allowAdditions: false,\n  values: (0, _random.randomMap)(10, 15, function (val, idx) {\n    return {\n      label: \"Structure-\".concat(idx),\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"emotionTags\", {\n  id: 'emotions',\n  label: 'Emotions',\n  color: tagColors[3],\n  allowXY: false,\n  allowNonXY: true,\n  allowAdditions: true,\n  values: ['Indignation', 'Anger', 'Confusion', 'Ambivalence', 'Cautious'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"seasonTags\", {\n  id: 'season',\n  label: 'Season',\n  color: tagColors[5],\n  allowXY: false,\n  allowNonXY: true,\n  allowAdditions: false,\n  values: ['Winter', 'Spring', 'Summer', 'Fall'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\nvar _default = FakeData;\nexports[\"default\"] = _default;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {};\n};\n\nvar useStyles = makeStyles(style);\n\nvar DeleteDialog = function DeleteDialog(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onConfirm = _ref.onConfirm,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    disableBackdropClick: true,\n    open: open,\n    disableEscapeKeyDown: true,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\"\n  }, title), React.createElement(DialogContent, null, React.createElement(Typography, null, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(false);\n    },\n    color: \"primary\"\n  }, \"No\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(true);\n    },\n    color: \"primary\"\n  }, \"Yes\")));\n};\n\nDeleteDialog.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n};\nexport default DeleteDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {};\n};\n\nvar useStyles = makeStyles(style);\n\nvar CancelConfirm = function CancelConfirm(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onConfirm = _ref.onConfirm,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    disableBackdropClick: true,\n    fullWidth: true,\n    open: open,\n    disableEscapeKeyDown: true,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\"\n  }, title), React.createElement(DialogContent, null, React.createElement(Typography, null, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(false);\n    },\n    color: \"primary\"\n  }, \"No\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(true);\n    },\n    color: \"secondary\"\n  }, \"Yes\")));\n};\n\nCancelConfirm.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n};\nexport default CancelConfirm;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Apple as AppleIcon } from '@morphoto/icons';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    icon: {\n      height: 50,\n      width: '100%',\n      margin: '0 auto',\n      color: theme.palette.error.main\n    },\n    title: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar FeatureDisabled = function FeatureDisabled(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onClose = _ref.onClose,\n      open = _ref.open,\n      icon = _ref.icon;\n  var classes = useStyles();\n  var IconComp = icon || AppleIcon;\n  return React.createElement(Dialog, {\n    className: classes.root,\n    fullWidth: true,\n    open: open,\n    PaperProps: {\n      style: {\n        maxWidth: 'none'\n      }\n    },\n    onClose: onClose,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\",\n    className: classes.title\n  }, title), React.createElement(DialogContent, null, React.createElement(IconComp, {\n    className: classes.icon\n  }), React.createElement(Typography, {\n    component: \"div\"\n  }, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onClose,\n    color: \"primary\"\n  }, \"Ok\")));\n};\n\nFeatureDisabled.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  icon: PropTypes.any,\n  message: PropTypes.any,\n  onClose: PropTypes.func.isRequired\n};\nexport default FeatureDisabled;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    body: {\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar BigText = function BigText(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      title = _ref.title,\n      body = _ref.body;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    onClose: onClose,\n    \"aria-labelledby\": \"simple-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    color: \"inherit\"\n  }))), React.createElement(DialogContent, null, React.createElement(Typography, {\n    variant: \"body2\",\n    className: classes.body\n  }, body)));\n};\n\nBigText.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  title: PropTypes.string,\n  body: PropTypes.string\n};\nexport default BigText;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    body: {},\n    textArea: {\n      whiteSpace: 'pre-line',\n      padding: theme.spacing(1),\n      border: \"1px solid \".concat(theme.palette.grey[200]),\n      background: theme.palette.grey[100]\n    },\n    dlgContent: {\n      overflow: 'hidden'\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar BigTextEdit = function BigTextEdit(_ref) {\n  var open = _ref.open,\n      onOk = _ref.onOk,\n      title = _ref.title,\n      body = _ref.body,\n      multiline = _ref.multiline;\n  var classes = useStyles();\n\n  var _useState = useState(body || ''),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    onClose: function onClose() {\n      return onOk(value);\n    }\n  }, React.createElement(DialogTitle, {\n    className: classes.title\n  }, title), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(TextField, {\n    className: classes.body,\n    multiline: multiline,\n    inputProps: {\n      className: classes.textArea\n    },\n    autoFocus: true,\n    fullWidth: true,\n    rows: 6,\n    rowsMax: 6,\n    onChange: function onChange(e) {\n      return setValue(e.target.value);\n    },\n    defaultValue: body\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(body);\n    }\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(value);\n    }\n  }, \"Ok\")));\n};\n\nBigTextEdit.propTypes = {\n  open: PropTypes.bool,\n  multiline: PropTypes.bool,\n  onOk: PropTypes.func,\n  title: PropTypes.string,\n  body: PropTypes.string\n};\nexport default BigTextEdit;","export { default as DeleteDialog } from './DeleteDialog';\nexport { default as CancelConfirm } from './CancelConfirm';\nexport { default as FeatureDisabled } from './FeatureDisabled';\nexport { default as BigText } from './BigText';\nexport { default as BigTextEdit } from './BigTextEdit';","export default require('./Slideshow').default;","export default require('./SwipeShow').default;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    imgContainer: {},\n    gravatarImg: {\n      objectFit: 'cover',\n      height: '100%',\n      width: '100%'\n    }\n  };\n});\n\nvar UserListItem = function UserListItem(_ref) {\n  var user = _ref.user,\n      loading = _ref.loading,\n      onAvatarClick = _ref.onAvatarClick,\n      secondary = _ref.secondary;\n  var classes = useStyles();\n  if (loading || !user) return 'LOADING...';\n  return React.createElement(ListItem, {\n    className: classes.root,\n    button: !!onAvatarClick,\n    onClick: onAvatarClick\n  }, React.createElement(ListItemAvatar, {\n    className: classes.imgContainer\n  }, React.createElement(Avatar, null, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: user.gravatar\n  }))), React.createElement(ListItemText, {\n    primary: user.username,\n    secondary: secondary\n  }));\n};\n\nUserListItem.propTypes = {\n  user: PropTypes.object,\n  loading: PropTypes.bool,\n  secondary: PropTypes.string,\n  onAvatarClick: PropTypes.func\n};\nexport default UserListItem;","import React from 'react';\nexport var SeriesContext = React.createContext({});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport classNames from 'classnames';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport Paper from '@material-ui/core/Paper';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport themes from '@morphoto/themes';\nimport { TagChip } from '@morphoto/tags';\nimport { ShortLongText } from '@morphoto/ui';\nimport { BigText } from '@morphoto/modals';\nimport { dates, Tags as TagClass } from '@morphoto/common';\nimport { AppContext, config } from '@morphoto/client-common';\nimport log from 'loglevel';\nimport UserListItem from '../UserListItem';\nimport { SeriesContext } from '../contexts';\nimport style from './SeriesInfo.style';\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEVIEW: 'NOTEVIEW'\n};\n\nvar SeriesInfo = function SeriesInfo() {\n  var classes = useStyles();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      watching = _useContext.watching,\n      owned = _useContext.owned;\n\n  var _useContext2 = useContext(AppContext),\n      tagConfig = _useContext2.tagConfig,\n      globalActions = _useContext2.globalActions,\n      currentUser = _useContext2.currentUser;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var tagInst = new TagClass(tagConfig);\n  var newTags = series.photos.reduce(function (acc, _ref) {\n    var tags = _ref.tags;\n    tags.forEach(function (tag) {\n      if (!acc[tag.typeId]) {\n        acc[tag.typeId] = _defineProperty({}, tag.label, _objectSpread({}, tag, {\n          count: 1\n        }));\n      } else if (acc[tag.typeId][tag.label]) {\n        var existing = acc[tag.typeId][tag.label];\n        acc[tag.typeId][tag.label] = _objectSpread({}, existing, {\n          count: existing.count + 1\n        });\n      } else acc[tag.typeId][tag.label] = _objectSpread({}, tag, {\n        count: 1\n      });\n    });\n    return acc;\n  }, {});\n  var metaKeys = [];\n\n  try {\n    metaKeys = series.meta ? Object.keys(JSON.parse(series.meta)) : [];\n  } catch (e) {\n    log.error(e);\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.field\n  }, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Series Name\"), React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, series.name)), series.note && React.createElement(ShortLongText, {\n    label: \"Series Note\",\n    text: series.note,\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.NOTEVIEW);\n    }\n  }), React.createElement(Typography, {\n    className: classes.heading,\n    variant: \"subtitle1\"\n  }, \"Series Summary\"), React.createElement(Divider, null), React.createElement(ThemeProvider, {\n    theme: themes.access[series.access]\n  }, React.createElement(Paper, {\n    className: classNames(classes.access)\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, \"Series is \".concat(config.ACCESS[series.access].label)), React.createElement(Typography, {\n    variant: \"caption\"\n  }, config.ACCESS[series.access].description))), React.createElement(List, {\n    className: classes.list,\n    dense: true\n  }, series.createdUser && React.createElement(UserListItem, {\n    user: series.createdUser,\n    onAvatarClick: function onAvatarClick() {\n      return globalActions.onAvatarClick(series.createdUser.username);\n    },\n    secondary: \"created this series\"\n  }), React.createElement(ListItem, null, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.numPhotos\n  }, series.photos.length)), React.createElement(ListItemText, {\n    primary: series.photos.length > 1 ? 'Photos' : 'Photo',\n    secondary: series.photos.length > 0 && React.createElement(\"span\", null, dates.formatDate(series.photos[0].takenOn, 'LL'), React.createElement(\"span\", null, \"\\xA0\\xA0\"), \"to\", React.createElement(\"span\", null, \"\\xA0\\xA0\"), dates.formatDate(series.photos[series.photos.length - 1].takenOn, 'LL'))\n  })), React.createElement(ListItem, null, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.watchers\n  }, series.watchers || '0')), React.createElement(ListItemText, {\n    primary: \"Users Watching \".concat(watching ? '(including you)' : '')\n  })), React.createElement(ListItem, null, React.createElement(ListItemText, null, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Tags in use (across all photos)\"), React.createElement(Divider, null), Object.keys(newTags).length === 0 && React.createElement(Typography, {\n    variant: \"caption\"\n  }, \"No photos in this series have tags\"), Object.keys(newTags).map(function (tagKey, idtk) {\n    return React.createElement(\"div\", {\n      key: \"tagchipkey\".concat(idtk),\n      className: classes.tagListItem\n    }, React.createElement(Typography, {\n      className: classes.subheading,\n      variant: \"overline\"\n    }, tagInst.getTagType(tagKey).label), React.createElement(Divider, null), Object.values(newTags[tagKey]).length > 0 ? Object.values(newTags[tagKey]).map(function (tag, idx) {\n      return React.createElement(TagChip, {\n        key: \"tagchip-\".concat(idtk, \"-\").concat(idx),\n        tag: tag,\n        color: tagInst.getTagType(tagKey).color\n      });\n    }) : React.createElement(Typography, {\n      variant: \"caption\"\n    }, \"No photos in this series have tags\"));\n  })))), series.meta && metaKeys.length > 0 && Object.keys(series.meta).length > 0 && React.createElement(React.Fragment, null, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Metadata\"), React.createElement(Divider, null), React.createElement(List, {\n    className: classes.list\n  }, metaKeys.map(function (key, idx) {\n    return series.meta[key] ? React.createElement(ListItem, {\n      key: \"metadata\".concat(idx)\n    }, React.createElement(ListItemText, {\n      primary: series.meta[key].label,\n      secondary: series.meta[key].render(series.meta[key])\n    })) : null;\n  }))), activeDialog === DIALOGS.NOTEVIEW && React.createElement(BigText, {\n    open: true,\n    multiline: true,\n    onClose: function onClose() {\n      return setActiveDialog(null);\n    },\n    title: \"Series Note\",\n    body: series.note\n  }));\n};\n\nSeriesInfo.propTypes = {};\nexport default SeriesInfo;","export default (function (theme) {\n  return {\n    root: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.background.paper,\n      paddingBottom: 60\n    },\n    field: {\n      marginBottom: theme.spacing(1)\n    },\n    list: {\n      padding: theme.spacing(1)\n    },\n    heading: {\n      marginTop: theme.spacing(1)\n    },\n    watchers: {},\n    numPhotos: {\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    tagListItem: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(2)\n    },\n    chip: {\n      margin: theme.spacing(0.5)\n    },\n    access: {\n      padding: theme.spacing(1, 2)\n    }\n  };\n});","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    appBar: {\n      flexGrow: 0\n    },\n    inner: {\n      position: 'relative',\n      flexGrow: 1,\n      overflowY: 'scroll',\n      '-webkit-overflow-scrolling': 'touch'\n    },\n    tabMenu: {\n      marginTop: theme.spacing(7)\n    },\n    mapWrap: {\n      position: 'absolute',\n      height: '100%',\n      width: '100%',\n      top: 0,\n      left: 0\n    },\n    toolbarTitle: {\n      flexGrow: 1,\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    AddFab: {\n      position: 'absolute',\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      zIndex: 500\n    },\n    grow: {\n      flexGrow: 1\n    },\n    gridList: {\n      flexWrap: 'nowrap',\n      transform: 'translateZ(0)'\n    },\n    titleBar: {\n      display: 'flex',\n      padding: theme.spacing(1)\n    },\n    menuButton: {},\n    placeholderInner: {\n      position: 'relative',\n      flexGrow: 1,\n      overflow: 'hidden',\n      textAlign: 'center',\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column'\n    },\n    progressWrapper: {\n      textAlign: 'center',\n      marginBottom: theme.spacing(4)\n    },\n    placeholderText: {\n      opacity: 0.4\n    },\n    placeholder: {},\n    progress: {\n      color: theme.palette.grey[300]\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport AddAlertIcon from '@material-ui/icons/AddAlert';\nimport SlideshowIcon from '@material-ui/icons/Slideshow';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { QRDisplay } from '@morphoto/camera';\nimport { PhotoGrid } from '@morphoto/photos';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { AddFab, ContextMenu } from '@morphoto/ui';\nimport SwipeShow from '@morphoto/swipeshow';\nimport SeriesInfo from './SeriesInfo';\nimport { SeriesContext } from '../contexts';\nimport style from '../SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesView = function SeriesView(_ref) {\n  var onSlideshowStart = _ref.onSlideshowStart,\n      onChange = _ref.onChange,\n      onEditSeries = _ref.onEditSeries,\n      onDeletePhotos = _ref.onDeletePhotos,\n      onCameraAdd = _ref.onCameraAdd,\n      onDeleteSeries = _ref.onDeleteSeries,\n      onLibraryAdd = _ref.onLibraryAdd,\n      onTileClick = _ref.onTileClick,\n      onMenuBack = _ref.onMenuBack,\n      onWatch = _ref.onWatch,\n      onUnWatch = _ref.onUnWatch,\n      initialPhoto = _ref.initialPhoto,\n      onFindOnMap = _ref.onFindOnMap;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      contextEl = _useState2[0],\n      setContextEl = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showQR = _useState4[0],\n      setShowQR = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      deleteConfirm = _useState6[0],\n      setDeleteConfirm = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      listTypeTab = _useState8[0],\n      setListTypeTab = _useState8[1];\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      ac = _useContext.ac,\n      watching = _useContext.watching,\n      owned = _useContext.owned;\n\n  var _useState9 = useState(initialPhoto),\n      _useState10 = _slicedToArray(_useState9, 2),\n      activePhotoId = _useState10[0],\n      setActivePhotoId = _useState10[1];\n\n  var onDeleteConfirm = function onDeleteConfirm(confirmation) {\n    setDeleteConfirm(false);\n    if (confirmation === true) onDeleteSeries(series.id);\n  };\n\n  var viewport = {\n    zoom: 16\n  };\n\n  if (series && series.coords && series.coords.length === 2) {\n    viewport.longitude = series.coords[0];\n    viewport.latitude = series.coords[1];\n  }\n\n  useEffect(function () {\n    if (series.photos.length > 0 && !series.photos.find(function (p) {\n      return p.id === activePhotoId;\n    })) setActivePhotoId(series.photos[series.photos.length - 1].id);\n  }, [series.photos]);\n  var activePhoto = series.photos && series.photos.find(function (p) {\n    return p.id === activePhotoId;\n  });\n  var can = {\n    update: ac.canUser('update', series, 'series', '*'),\n    delete: ac.canUser('delete', series, 'series', '*'),\n    contribute: ac.canUser('update', series, 'series', ['photos'])\n  };\n  var dialogOpen = deleteConfirm || showQR;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, series.name || 'Series'), React.createElement(IconButton, {\n    \"aria-haspopup\": \"true\",\n    color: \"inherit\",\n    onClick: function onClick(event) {\n      return setContextEl(event.currentTarget);\n    }\n  }, React.createElement(MoreIcon, null)), React.createElement(ContextMenu, {\n    anchorEl: contextEl,\n    onClose: function onClose() {\n      return setContextEl(null);\n    },\n    menuItems: [{\n      text: 'Find on map',\n      icon: PlaceIcon,\n      hide: !onFindOnMap,\n      action: onFindOnMap\n    }, {\n      text: 'Watch Series',\n      icon: AddAlertIcon,\n      hide: !onWatch || owned || watching,\n      action: onWatch\n    }, {\n      text: 'Unwatch Series',\n      icon: AddAlertIcon,\n      hide: !onUnWatch || owned || !watching,\n      action: onUnWatch\n    }, {\n      text: 'Share series',\n      color: series.access === 'PRIVATE' ? 'textSecondary' : undefined,\n      icon: ShareIcon,\n      action: function action() {\n        return setShowQR(true);\n      }\n    }, {\n      text: 'Start Slideshow',\n      icon: SlideshowIcon,\n      hide: !onSlideshowStart,\n      action: onSlideshowStart\n    }, {\n      divider: true\n    }, {\n      text: 'Edit Series',\n      icon: EditIcon,\n      hide: !onEditSeries || !can.update,\n      action: onEditSeries\n    }, {\n      text: 'Delete Series',\n      icon: DeleteIcon,\n      hide: !setDeleteConfirm || !can.delete,\n      color: 'error',\n      action: function action() {\n        return setDeleteConfirm(true);\n      }\n    }]\n  })), React.createElement(Tabs, {\n    variant: \"fullWidth\",\n    value: listTypeTab,\n    onChange: function onChange(e, value) {\n      return setListTypeTab(value);\n    }\n  }, React.createElement(Tab, {\n    label: \"Series\"\n  }), React.createElement(Tab, {\n    label: \"Photos\"\n  }))), React.createElement(\"div\", {\n    className: classes.inner\n  }, listTypeTab === 0 && React.createElement(React.Fragment, null, series.photos && series.photos.length > 0 && React.createElement(SwipeShow, {\n    photos: series.photos,\n    activePhotoId: activePhotoId,\n    setActivePhotoId: setActivePhotoId,\n    onImageSelect: onTileClick\n  }), React.createElement(SeriesInfo, {\n    onChange: onChange\n  })), series.photos && listTypeTab === 1 && React.createElement(PhotoGrid, {\n    photos: series.photos,\n    onTileClick: onTileClick,\n    onDelete: onDeletePhotos,\n    allowDelete: can.delete\n  })), listTypeTab === 0 && can.contribute && React.createElement(AddFab, {\n    className: classes.AddFab,\n    disabled: !dialogOpen,\n    onCameraClick: onCameraAdd,\n    onLibraryClick: onLibraryAdd\n  }, React.createElement(AddCameraIcon, null)), activePhoto && React.createElement(QRDisplay, {\n    open: showQR,\n    onClose: function onClose() {\n      return setShowQR(false);\n    },\n    series: series,\n    photoId: activePhoto.id\n  }), React.createElement(DeleteDialog, {\n    open: deleteConfirm,\n    onConfirm: onDeleteConfirm,\n    title: \"Delete Series\",\n    message: \"Are you sure you want to delete this series? The record and all images associated with it will be gone forever.\"\n  }));\n};\n\nSeriesView.propTypes = {\n  initialPhoto: PropTypes.string,\n  onSlideshowStart: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onFindOnMap: PropTypes.func.isRequired,\n  onDeletePhotos: PropTypes.func.isRequired,\n  onDeleteSeries: PropTypes.func.isRequired,\n  onCameraAdd: PropTypes.func.isRequired,\n  onEditSeries: PropTypes.func.isRequired,\n  onLibraryAdd: PropTypes.func.isRequired,\n  onTileClick: PropTypes.func.isRequired,\n  onMenuBack: PropTypes.func.isRequired,\n  onWatch: PropTypes.func,\n  onUnWatch: PropTypes.func\n};\nexport default SeriesView;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Typography from '@material-ui/core/Typography';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { MapDirPicker, MapDot } from '@morphoto/maps';\nimport { BigTextEdit } from '@morphoto/modals';\nimport { ShortLongText } from '@morphoto/ui';\nimport { config } from '@morphoto/client-common';\nimport style from './SeriesEditInner.style';\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  MAPPICK: 'mapPicker',\n  NOTEEDIT: 'noteEdit'\n};\n\nvar SeriesEditInner = function SeriesEditInner(_ref) {\n  var series = _ref.series,\n      delta = _ref.delta,\n      _onChange = _ref.onChange,\n      disabled = _ref.disabled;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var viewport = {\n    zoom: 18\n  };\n  viewport.longitude = series.coords[0];\n  viewport.latitude = series.coords[1];\n\n  if (delta.coords && delta.coords.length === 2) {\n    viewport.longitude = delta.coords[0];\n    viewport.latitude = delta.coords[1];\n  }\n\n  var access = delta.access || series.access || 'PRIVATE';\n  var name = typeof delta.name === 'string' ? delta.name : series.name || '';\n  var note = typeof delta.note === 'string' ? delta.note : series.note || '';\n  var nameError = !name || name.length < 3;\n  return React.createElement(\"div\", null, React.createElement(TextField, {\n    label: \"Series Name \".concat(nameError ? '(Required)' : ''),\n    fullWidth: true,\n    disabled: disabled,\n    error: nameError,\n    placeholder: \"New Series\",\n    className: classes.field,\n    value: name,\n    onChange: function onChange(e) {\n      return _onChange(_objectSpread({}, delta, {\n        name: e.target.value\n      }));\n    }\n  }), React.createElement(\"div\", {\n    className: classes.mapWrapper,\n    onClick: function onClick() {\n      return !disabled ? setActiveDialog(DIALOGS.MAPPICK) : {};\n    }\n  }, React.createElement(FormLabel, {\n    className: classes.mapFormLabel\n  }, \"Location\"), React.createElement(\"div\", {\n    className: classes.mapInnerWrap\n  }, React.createElement(MapDot, {\n    staticMap: true,\n    className: classes.map,\n    direction: delta.direction || series.direction,\n    viewport: viewport\n  }))), React.createElement(\"div\", {\n    className: classes.field\n  }, React.createElement(FormLabel, null, \"Series Access\"), React.createElement(\"div\", {\n    className: classes.access\n  }, React.createElement(FormControlLabel, {\n    className: classes.accessRadio,\n    disabled: disabled,\n    control: React.createElement(Switch, {\n      checked: ['OPEN', 'PUBLIC'].indexOf(access) > -1,\n      onChange: function onChange(e) {\n        _onChange(_objectSpread({}, delta, {\n          access: e.target.checked ? 'PUBLIC' : 'PRIVATE'\n        }));\n      },\n      value: 'PUBLIC'\n    }),\n    label: React.createElement(\"div\", null, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, config.ACCESS.PUBLIC.label), React.createElement(Typography, {\n      variant: \"caption\",\n      color: \"textSecondary\",\n      component: \"div\"\n    }, config.ACCESS.PUBLIC.description))\n  }), React.createElement(FormControlLabel, {\n    className: classes.accessRadio,\n    disabled: disabled || ['PRIVATE'].indexOf(access) > -1,\n    control: React.createElement(Switch, {\n      checked: ['OPEN'].indexOf(access) > -1,\n      onChange: function onChange(e) {\n        return _onChange(_objectSpread({}, delta, {\n          access: e.target.checked ? 'OPEN' : 'PUBLIC'\n        }));\n      },\n      value: 'OPEN'\n    }),\n    label: React.createElement(\"div\", null, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, config.ACCESS.OPEN.label), React.createElement(Typography, {\n      variant: \"caption\",\n      color: \"textSecondary\",\n      component: \"div\"\n    }, config.ACCESS.OPEN.description))\n  }))), React.createElement(ShortLongText, {\n    onClick: function onClick() {\n      return !disabled ? setActiveDialog(DIALOGS.NOTEEDIT) : {};\n    },\n    className: classes.field,\n    label: \"Series Note\",\n    placeholder: 'Click to edit',\n    text: note\n  }), !disabled && activeDialog === DIALOGS.MAPPICK && React.createElement(MapDirPicker, {\n    open: true,\n    title: \"Series Location & Direction\",\n    latitude: delta.latitude || series.coords[1],\n    longitude: delta.longitude || series.coords[0],\n    direction: delta.direction || series.direction,\n    onOk: function onOk(data) {\n      _onChange(_objectSpread({}, delta, {}, data));\n\n      setActiveDialog(null);\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog(null);\n    }\n  }), !disabled && activeDialog === DIALOGS.NOTEEDIT && React.createElement(BigTextEdit, {\n    open: true,\n    title: \"Series Note\",\n    body: note,\n    multiline: true,\n    onOk: function onOk(newNote) {\n      _onChange(_objectSpread({}, delta, {\n        note: newNote\n      }));\n\n      setActiveDialog(null);\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog(null);\n    }\n  }));\n};\n\nSeriesEditInner.propTypes = {\n  series: PropTypes.object.isRequired,\n  delta: PropTypes.object.isRequired,\n  disabled: PropTypes.bool,\n  onChange: PropTypes.func.isRequired\n};\nexport default SeriesEditInner;","export default (function (theme) {\n  return {\n    root: {},\n    inner: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    dlgTitle: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    access: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    accessRadio: {\n      margin: theme.spacing(2, 1)\n    },\n    grow: {\n      flexGrow: 1\n    },\n    field: {\n      flexGrow: 0,\n      marginBottom: theme.spacing(1) * 2\n    },\n    slider: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '100%'\n    },\n    formLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapFormLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapInnerWrap: {\n      flexGrow: 1,\n      height: '200px',\n      minHeight: '200px'\n    },\n    mapWrapper: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      paddingBottom: theme.spacing(1) * 2\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SeriesContext } from '../contexts';\nimport style from './SeriesEdit.style';\nimport SeriesEditInner from './SeriesEditInner';\nvar useStyles = makeStyles(style);\n\nvar SeriesEdit = function SeriesEdit(_ref) {\n  var onOk = _ref.onOk,\n      onCancel = _ref.onCancel;\n  var classes = useStyles();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      delta = _useState2[0],\n      setDelta = _useState2[1];\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    className: classes.root,\n    fullScreen: true,\n    open: true,\n    onClose: onCancel\n  }, React.createElement(CssBaseline, null), React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitle\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.grow\n  }, \"Edit Series Details\")), React.createElement(DialogContent, {\n    className: classes.inner\n  }, React.createElement(SeriesEditInner, {\n    series: series,\n    delta: delta,\n    onChange: setDelta\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return setDelta({});\n    },\n    \"aria-label\": \"Menu\"\n  }, \"Reset\"), React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onCancel,\n    \"aria-label\": \"Menu\"\n  }, \"Cancel\"), React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return onOk(_objectSpread({\n        id: series.id\n      }, delta));\n    },\n    \"aria-label\": \"Menu\"\n  }, \"Ok\")));\n};\n\nSeriesEdit.propTypes = {\n  onOk: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired\n};\nexport default SeriesEdit;","export default (function (theme) {\n  return {\n    root: {},\n    inner: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    dlgTitle: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    grow: {\n      flexGrow: 1\n    },\n    field: {\n      flexGrow: 0,\n      marginBottom: theme.spacing(2)\n    },\n    slider: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '100%'\n    },\n    formLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapFormLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapInnerWrap: {\n      flexGrow: 1\n    },\n    mapWrapper: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      paddingBottom: theme.spacing(2)\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TagView, TagEdit } from '@morphoto/tags';\nimport { DateControl, DateView, ShortLongText } from '@morphoto/ui';\nimport { Tags as TagClass } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nimport { BigTextEdit, BigText } from '@morphoto/modals';\nimport UserListItem from '../UserListItem';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '90%',\n      width: '85%'\n    },\n    dlgTitleContainer: {\n      display: 'flex',\n      padding: 0\n    },\n    catTagTitle: {\n      marginTop: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEEDIT: 'noteEdit',\n  NOTEVIEW: 'noteView',\n  PHOTOTAKEN: 'taken',\n  TAGEDIT: 'tag',\n  CANCEL: 'cancel'\n};\n\nvar PhotoInfo = function PhotoInfo(_ref) {\n  var canEdit = _ref.canEdit,\n      photo = _ref.photo,\n      delta = _ref.delta,\n      _onChange = _ref.onChange,\n      hideUser = _ref.hideUser;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      activeDialog = _useState2$.activeDialog,\n      activeDialogContext = _useState2$.activeDialogContext,\n      setActiveDialog = _useState2[1];\n\n  var note = typeof delta.note === 'string' ? delta.note : photo.note || '';\n  var tagInst = new TagClass(tagConfig, delta.tags || photo.tags);\n  var metaKeys = [];\n\n  try {\n    metaKeys = photo.meta ? Object.keys(JSON.parse(photo.meta)) : [];\n  } catch (e) {\n    log.error(e);\n  }\n\n  return React.createElement(\"div\", null, !hideUser && photo.createdUser && React.createElement(React.Fragment, null, React.createElement(UserListItem, {\n    user: photo.createdUser,\n    secondary: \"uploaded this photo\"\n  }), React.createElement(Divider, null)), canEdit ? React.createElement(DateControl, {\n    className: classes.field,\n    label: \"Photo taken on\",\n    value: delta.takenOn || photo.takenOn,\n    onChange: function onChange(takenOn) {\n      return _onChange({\n        takenOn: takenOn\n      });\n    },\n    canEdit: canEdit\n  }) : React.createElement(DateView, {\n    label: \"Photo taken on\",\n    value: delta.takenOn || photo.takenOn\n  }), (canEdit || photo.note) && React.createElement(ShortLongText, {\n    label: \"Photo Note\",\n    placeholder: canEdit ? 'Click to edit' : 'None',\n    text: note,\n    onClick: function onClick() {\n      if (canEdit) setActiveDialog({\n        activeDialog: DIALOGS.NOTEEDIT\n      });else setActiveDialog({\n        activeDialog: DIALOGS.NOTEVIEW\n      });\n    }\n  }), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.catTagTitle\n  }, \"Category tags\"), React.createElement(Divider, null), tagInst.getNonXYTagTypes().map(function (tt, idx) {\n    return React.createElement(\"div\", {\n      key: \"tagtype-\".concat(idx),\n      onClick: function onClick() {\n        return canEdit ? setActiveDialog({\n          activeDialog: DIALOGS.TAGEDIT,\n          activeDialogContext: tt\n        }) : null;\n      }\n    }, React.createElement(TagView, {\n      className: classes.field,\n      label: tt.label,\n      tags: delta.tags || photo.tags,\n      tagConfig: tt\n    }));\n  }), metaKeys.length > 0 && Object.keys(photo.meta).length > 0 && React.createElement(React.Fragment, null, React.createElement(Typography, {\n    className: classes.heading\n  }, \"Metadata\"), React.createElement(Divider, null), React.createElement(List, {\n    className: classes.list\n  }, metaKeys.map(function (key, idx) {\n    return photo.meta[key] ? React.createElement(ListItem, {\n      key: \"metadata\".concat(idx)\n    }, React.createElement(ListItemText, {\n      primary: photo.meta[key].label,\n      secondary: photo.meta[key].render(photo.meta[key])\n    })) : null;\n  }))), activeDialog && activeDialog === DIALOGS.NOTEEDIT && React.createElement(BigTextEdit, {\n    open: true,\n    multiline: true,\n    onOk: function onOk(note) {\n      _onChange({\n        note: note\n      });\n\n      setActiveDialog({});\n    },\n    title: \"Edit Photo Note\",\n    body: note\n  }), activeDialog && activeDialog === DIALOGS.NOTEVIEW && React.createElement(BigText, {\n    open: true,\n    multiline: true,\n    onClose: function onClose() {\n      return setActiveDialog({});\n    },\n    title: \"Photo Note\",\n    body: note\n  }), activeDialog && activeDialog === DIALOGS.TAGEDIT && React.createElement(TagEdit, {\n    open: true,\n    title: \"Edit Tags: \".concat(activeDialogContext.label),\n    onOk: function onOk(tags) {\n      setActiveDialog({});\n\n      _onChange({\n        tags: tags\n      });\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog({});\n    },\n    tags: delta.tags || photo.tags,\n    tagConfig: activeDialogContext\n  }));\n};\n\nPhotoInfo.propTypes = {\n  canEdit: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  hideUser: PropTypes.bool,\n  photo: PropTypes.object.isRequired,\n  delta: PropTypes.object.isRequired\n};\nexport default PhotoInfo;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Dialog from '@material-ui/core/Dialog';\nimport Divider from '@material-ui/core/Divider';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SeriesEditInner from './SeriesEditInner';\nimport PhotoInfoInner from './PhotoInfoInner';\nimport style from './NewPhotoInfo.style';\nvar useStyles = makeStyles(style);\n\nvar NewPhotoInfo = function NewPhotoInfo(_ref) {\n  var photo = _ref.photo,\n      newSeries = _ref.newSeries,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      submitted = _useState2[0],\n      setSubmitted = _useState2[1];\n\n  var _useState3 = useState(newSeries || {}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      seriesDelta = _useState4[0],\n      setSeriesDelta = _useState4[1];\n\n  var _useState5 = useState(photo),\n      _useState6 = _slicedToArray(_useState5, 2),\n      photoDelta = _useState6[0],\n      setPhotoDelta = _useState6[1];\n\n  var validName = !newSeries || seriesDelta.name && seriesDelta.name.length >= 3;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(Dialog, {\n    fullScreen: true,\n    scroll: \"paper\",\n    disableBackdropClick: true,\n    disableEscapeKeyDown: true,\n    onClose: actions.onCancel,\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: true\n  }, React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitleContainer\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.dlgTitle\n  }, newSeries ? 'New Series Details' : 'New Photo Details')), React.createElement(DialogContent, null, !!newSeries && React.createElement(SeriesEditInner, {\n    series: newSeries,\n    delta: seriesDelta,\n    disabled: submitted,\n    onChange: setSeriesDelta\n  }), !!newSeries && React.createElement(\"div\", null, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.photoTitle\n  }, \"New photo details\"), React.createElement(Divider, null)), React.createElement(PhotoInfoInner, {\n    photo: photo,\n    canEdit: !submitted,\n    hideUser: true,\n    delta: photoDelta,\n    onChange: function onChange(newAttr) {\n      return setPhotoDelta(_objectSpread({}, photoDelta, {}, newAttr));\n    }\n  })), React.createElement(DialogActions, null, !submitted && React.createElement(Button, {\n    onClick: actions.onCancel,\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    disabled: !validName || submitted,\n    onClick: function onClick() {\n      if (submitted) return;\n      setSubmitted(true);\n      actions.onSave(seriesDelta, photoDelta);\n    },\n    color: \"primary\"\n  }, submitted ? 'Processing...' : 'Next'))));\n};\n\nNewPhotoInfo.propTypes = {\n  photo: PropTypes.object.isRequired,\n  newSeries: PropTypes.object,\n  actions: PropTypes.shape({\n    onCancel: PropTypes.func.isRequired,\n    onSave: PropTypes.func\n  })\n};\nexport default NewPhotoInfo;","export default (function (theme) {\n  return {\n    root: {},\n    formLabel: {\n      color: theme.palette.text.secondary\n    },\n    dlgTitleContainer: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    mapFormLabel: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(1),\n      color: theme.palette.text.secondary\n    },\n    map: {\n      marginBottom: theme.spacing(2)\n    },\n    mapWrapper: {\n      marginBottom: theme.spacing(2)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n});","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Series as SeriesClass, Photo as PhotoClass } from '@morphoto/common';\nimport { CameraTool } from '@morphoto/camera';\nimport NewPhotoInfo from './NewPhotoInfo';\nimport { PhotoReviewTool } from '@morphoto/photos';\nimport { LibraryFilePicker } from '@morphoto/ui';\nimport { SeriesContext } from '../contexts';\nimport { AppContext, useDeviceOrientation, useGeolocation } from '@morphoto/client-common';\nimport log from 'loglevel';\nexport var NEW_PHOTO_MODES = {\n  CAMERA: 'camera',\n  FILEPICKER: 'library',\n  PHOTOREVIEW: 'photoreview',\n  PHOTOINFOEDIT: 'photoinfoedit'\n};\n\nvar NewPhoto = function NewPhoto(_ref) {\n  var inputMethod = _ref.inputMethod,\n      isNewSeries = _ref.isNewSeries,\n      actions = _ref.actions;\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      device = _useContext.device;\n\n  var geoRef = useRef();\n\n  var _useContext2 = useContext(AppContext),\n      metaConfig = _useContext2.metaConfig;\n\n  var _useState = useState(isNewSeries ? new SeriesClass(metaConfig).series : series),\n      _useState2 = _slicedToArray(_useState, 2),\n      newSeries = _useState2[0],\n      setNewSeries = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newPhoto = _useState4[0],\n      setNewPhoto = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      photoRefId = _useState6[0],\n      setPhotoRefId = _useState6[1];\n\n  var _useState7 = useState({\n    current: inputMethod,\n    history: []\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      mode = _useState8[0],\n      _changeMode = _useState8[1];\n\n  var orientation = useDeviceOrientation();\n  var geo = useGeolocation();\n  geoRef.current = geo;\n  var photos = !isNewSeries && series && series.photos ? series.photos : [];\n\n  var changeMode = function changeMode(newModeName) {\n    log.info('NEWPHOTO changeMode', mode, newModeName);\n\n    _changeMode({\n      current: newModeName,\n      history: [].concat(_toConsumableArray(mode.history), [mode.current])\n    });\n  };\n\n  var lastMode = function lastMode() {\n    if (mode.history.length > 0) {\n      var oldHistory = _toConsumableArray(mode.history);\n\n      var oldMode = oldHistory.pop();\n\n      _changeMode({\n        current: oldMode,\n        history: oldHistory\n      });\n    } else {\n      actions.onCancel();\n    }\n  };\n\n  var onLibraryAdd = function onLibraryAdd(data) {\n    var _data$exifObj, exif, exifDateTime, exifGPS, coords, date, _geoRef$current, latitude, longitude, beginnerObj, _newPhoto;\n\n    return _regeneratorRuntime.async(function onLibraryAdd$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            log.info('onLibraryAdd Debug GOT DATA', {\n              isNewSeries: isNewSeries\n            });\n            _data$exifObj = data.exifObj, exif = _data$exifObj.exif, exifDateTime = _data$exifObj.exifDateTime, exifGPS = _data$exifObj.exifGPS;\n            coords = exifGPS;\n            log.info('EXIF Debug', {\n              exif: exif,\n              exifDateTime: exifDateTime,\n              exifGPS: exifGPS\n            });\n            date = exifDateTime || String(Date.now());\n\n            if (!coords) {\n              if (geoRef.current && geoRef.current.latitude && geoRef.current.longitude) {\n                _geoRef$current = geoRef.current, latitude = _geoRef$current.latitude, longitude = _geoRef$current.longitude;\n                coords = [longitude, latitude];\n              } else {\n                coords = [-123.1398254, 49.3050394];\n              }\n            }\n\n            if (isNewSeries) setNewSeries(_objectSpread({}, newSeries, {\n              coords: coords\n            }));\n            beginnerObj = new PhotoClass(metaConfig).photo;\n            _newPhoto = _objectSpread({}, beginnerObj, {\n              takenOn: date,\n              coords: coords,\n              rawData: JSON.stringify({\n                exif: exif,\n                sensors: {\n                  orientation: orientation,\n                  geo: geo\n                }\n              })\n            });\n            setNewPhoto({\n              captureObj: data,\n              photoObj: _newPhoto\n            });\n            log.info('onLibraryAdd', {\n              _newPhoto: _newPhoto,\n              newSeries: _objectSpread({}, newSeries, {\n                coords: coords\n              })\n            });\n            changeMode(NEW_PHOTO_MODES.PHOTOREVIEW);\n            log.info('onLibraryAdd FINISHED');\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var onShutter = function onShutter(data, refId) {\n    var _data$exifObj2, exif, exifGPS, date, coords, _geoRef$current2, latitude, longitude, beginnerObj, _newPhoto;\n\n    return _regeneratorRuntime.async(function onShutter$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            log.info('onShutter Debug GOT DATA', {\n              isNewSeries: isNewSeries\n            });\n            _data$exifObj2 = data.exifObj, exif = _data$exifObj2.exif, exifGPS = _data$exifObj2.exifGPS;\n            date = String(Date.now());\n            coords = [-123.1398254, 49.3050394];\n\n            if (geoRef.current && geoRef.current.latitude && geoRef.current.longitude) {\n              _geoRef$current2 = geoRef.current, latitude = _geoRef$current2.latitude, longitude = _geoRef$current2.longitude;\n              coords = [longitude, latitude];\n            } else if (exifGPS) {\n              coords = exifGPS;\n            }\n\n            if (isNewSeries) setNewSeries(_objectSpread({}, newSeries, {\n              coords: coords\n            }));\n            beginnerObj = new PhotoClass(metaConfig).photo;\n            _newPhoto = _objectSpread({}, beginnerObj, {\n              takenOn: date,\n              coords: coords,\n              rawData: JSON.stringify({\n                exif: exif,\n                sensors: {\n                  orientation: orientation,\n                  geo: geo\n                }\n              })\n            });\n            setNewPhoto({\n              captureObj: data,\n              photoObj: _newPhoto\n            });\n            log.info('onShutter', {\n              _newPhoto: _newPhoto,\n              newSeries: _objectSpread({}, newSeries, {\n                coords: coords\n              })\n            });\n            setPhotoRefId(refId);\n            changeMode(NEW_PHOTO_MODES.PHOTOREVIEW);\n            log.info('onShutter FINISHED');\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n\n  var onFinalCreate = function onFinalCreate(seriesDelta, photoDelta) {\n    return actions.onCreate(seriesDelta, photoDelta, newPhoto.captureObj);\n  };\n\n  var component = null;\n\n  switch (mode.current) {\n    case NEW_PHOTO_MODES.CAMERA:\n      component = device.ios ? React.createElement(LibraryFilePicker, {\n        onCancel: actions.onCancel,\n        cameraPicker: true,\n        onLibraryAdd: onLibraryAdd\n      }) : React.createElement(CameraTool, {\n        photos: photos,\n        onShutter: onShutter,\n        onCancel: actions.onCancel\n      });\n      break;\n\n    case NEW_PHOTO_MODES.FILEPICKER:\n      component = React.createElement(LibraryFilePicker, {\n        onCancel: actions.onCancel,\n        onLibraryAdd: onLibraryAdd\n      });\n      break;\n\n    case NEW_PHOTO_MODES.PHOTOREVIEW:\n      component = React.createElement(PhotoReviewTool, {\n        defaultRefPhotoId: photoRefId,\n        photoBlob: newPhoto.captureObj.file,\n        photos: photos,\n        onConfirm: function onConfirm() {\n          return changeMode(NEW_PHOTO_MODES.PHOTOINFOEDIT);\n        },\n        onCancel: actions.onCancel,\n        onRetry: lastMode\n      });\n      break;\n\n    case NEW_PHOTO_MODES.PHOTOINFOEDIT:\n      component = React.createElement(NewPhotoInfo, {\n        photo: newPhoto.photoObj,\n        newSeries: isNewSeries ? newSeries : null,\n        actions: {\n          onSave: onFinalCreate,\n          onCancel: actions.onCancel\n        }\n      });\n      break;\n\n    default:\n      log.info('NEWPHOTO: default state. you should NEVER see this', mode);\n      actions.onCancel();\n  }\n\n  return component;\n};\n\nNewPhoto.propTypes = {\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  isNewSeries: PropTypes.bool,\n  photos: PropTypes.array,\n  actions: PropTypes.shape({\n    onCreate: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired\n  })\n};\nexport default NewPhoto;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesNotFound = function SeriesNotFound(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Series\"))), React.createElement(\"div\", {\n    className: classes.placeholderInner\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), React.createElement(Typography, {\n    className: classes.placeholderText,\n    variant: \"h3\"\n  }, \"Series not found\"), React.createElement(\"div\", {\n    className: classes.grow\n  })));\n};\n\nSeriesNotFound.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default SeriesNotFound;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesLoading = function SeriesLoading(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Series\"))), React.createElement(\"div\", {\n    className: classes.placeholderInner\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), React.createElement(\"div\", {\n    className: classes.progressWrapper\n  }, React.createElement(CircularProgress, {\n    className: classes.progress,\n    color: \"inherit\",\n    size: 150,\n    thickness: 5\n  })), React.createElement(Typography, {\n    className: classes.placeholderText,\n    variant: \"h4\"\n  }, \"Loading...\"), React.createElement(\"div\", {\n    className: classes.grow\n  })));\n};\n\nSeriesLoading.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default SeriesLoading;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Slideshow from '@morphoto/slideshow';\nimport { AccessHelper } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nimport { PhotoViewTool } from '@morphoto/photos';\nimport SeriesView from './views/SeriesView';\nimport SeriesEdit from './views/SeriesEdit';\nimport NewPhoto from './views/NewPhoto';\nimport SeriesNotFound from './SeriesNotFound';\nimport SeriesLoading from './SeriesLoading';\nimport { SeriesContext } from './contexts';\nimport log from 'loglevel';\nexport var SERIES_MODES = {\n  SERIES_VIEW: 'series',\n  SERIES_EDIT: 'editseries',\n  NEWPHOTO: 'newphoto',\n  NEWSERIES: 'newseries',\n  REVIEW: 'review',\n  PHOTO_VIEW: 'photoviewer',\n  PHOTO_VIEW_NEW: 'newphotoviewer',\n  SLIDESHOW: 'slideshow'\n};\nvar VIEW_ONLY_MODES = [SERIES_MODES.SERIES_VIEW, SERIES_MODES.PHOTO_VIEW, SERIES_MODES.SLIDESHOW];\nvar VALID_STARTMODES = [SERIES_MODES.SERIES_VIEW, SERIES_MODES.NEWPHOTO, SERIES_MODES.NEWSERIES, SERIES_MODES.PHOTO_REVIEW, SERIES_MODES.PHOTO_VIEW];\n\nvar RepeatablePhotos = function RepeatablePhotos(_ref) {\n  var modeName = _ref.modeName,\n      series = _ref.series,\n      inputMethodINIT = _ref.inputMethod,\n      currentUserId = _ref.currentUserId,\n      currentUserRole = _ref.currentUserRole,\n      initialPhoto = _ref.initialPhoto,\n      loading = _ref.loading,\n      watching = _ref.watching,\n      owned = _ref.owned,\n      actions = _ref.actions;\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device;\n\n  var _useState = useState({\n    series: series,\n    device: device,\n    watching: watching,\n    owned: owned,\n    ac: new AccessHelper(currentUserId, currentUserRole)\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      seriesContextState = _useState2[0],\n      setSeriesContextState = _useState2[1];\n\n  var _useState3 = useState({\n    current: {\n      name: modeName || SERIES_MODES.SERIES_VIEW,\n      pid: initialPhoto,\n      inputMethod: inputMethodINIT\n    },\n    history: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mode = _useState4[0],\n      setMode = _useState4[1];\n\n  useEffect(function () {\n    setSeriesContextState(_objectSpread({}, seriesContextState, {\n      series: series,\n      watching: watching,\n      owned: owned\n    }));\n\n    if (series && seriesContextState.series && series.id !== seriesContextState.series.id) {\n      setMode({\n        current: {\n          name: modeName || SERIES_MODES.SERIES_VIEW,\n          pid: initialPhoto,\n          inputMethod: inputMethodINIT\n        },\n        history: []\n      });\n    } else if (mode.current.pid !== initialPhoto) {\n      setMode(_objectSpread({}, mode, {\n        current: _objectSpread({}, mode.current, {\n          name: modeName || SERIES_MODES.SERIES_VIEW,\n          pid: initialPhoto\n        })\n      }));\n    }\n  }, [series, initialPhoto, inputMethodINIT, modeName, watching, owned]);\n\n  var onUpdatePhoto = function onUpdatePhoto(photo, photoDelta) {\n    var newSeries = _objectSpread({}, seriesContextState.series);\n\n    newSeries.photos = newSeries.photos.map(function (ph) {\n      return ph.id === photoDelta.id ? _objectSpread({}, ph, {}, photoDelta) : ph;\n    });\n    actions.onChangePhoto(photo, _objectSpread({}, photoDelta, {\n      seriesId: newSeries.id\n    }));\n  };\n\n  var onApprovePhoto = function onApprovePhoto(newSeries, newPhoto, newPhotoData) {\n    return _regeneratorRuntime.async(function onApprovePhoto$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            log.info('RepeatablePhotos: waiting for photo ID', {\n              newSeries: newSeries,\n              newPhoto: newPhoto,\n              newPhotoData: newPhotoData\n            });\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(actions.onNewPhoto(newPhoto, newPhotoData));\n\n          case 3:\n            setSeriesContextState(_objectSpread({}, seriesContextState, {\n              series: _objectSpread({}, series, {\n                photos: [].concat(_toConsumableArray(series.photos), [newPhoto])\n              })\n            }));\n            changeMode(SERIES_MODES.PHOTO_VIEW_NEW, newPhoto.id);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n\n  var onDeletePhotos = function onDeletePhotos(photoIdArr) {\n    series.photos.filter(function (sp) {\n      return photoIdArr.indexOf(sp.id) > -1;\n    }).forEach(function (p) {\n      return actions.onDeletePhoto(p);\n    });\n  };\n\n  var changeMode = function changeMode(newModeName, newPid, newInputMethod) {\n    var canUpdate = seriesContextState.ac.canUser('update', series, 'series');\n    if (seriesContextState === null) actions.onClose();\n\n    if (!canUpdate && VIEW_ONLY_MODES.indexOf(newModeName) < 0) {\n      log.error('ILLEGAL MODE CHANGE!!!!!', {\n        from: mode.current,\n        to: newModeName,\n        canUpdate: canUpdate\n      });\n    } else {\n      setMode({\n        current: {\n          name: newModeName,\n          pid: newPid,\n          inputMethod: newInputMethod\n        },\n        history: [].concat(_toConsumableArray(mode.history), [mode.current])\n      });\n    }\n  };\n\n  var lastMode = function lastMode() {\n    if (mode.history.length > 0) {\n      var oldHistory = _toConsumableArray(mode.history);\n\n      var oldMode = oldHistory.pop();\n      setMode({\n        current: oldMode,\n        history: oldHistory\n      });\n    } else {\n      actions.onClose();\n    }\n  };\n\n  var viewPhoto = function viewPhoto(pid) {\n    changeMode(SERIES_MODES.PHOTO_VIEW, pid);\n  };\n\n  var component = null;\n  if (loading) return React.createElement(SeriesLoading, {\n    onMenuBack: actions.onClose\n  });else if (!seriesContextState.series && mode.current.name !== SERIES_MODES.NEWSERIES) return React.createElement(SeriesNotFound, {\n    onMenuBack: actions.onClose\n  });\n\n  switch (mode.current.name) {\n    case SERIES_MODES.SERIES_VIEW:\n      component = React.createElement(SeriesView, {\n        onSlideshowStart: function onSlideshowStart() {\n          return changeMode(SERIES_MODES.SLIDESHOW);\n        },\n        onChange: function onChange() {\n          log.info('onChange NOT IMPLEMENTED');\n        },\n        initialPhoto: initialPhoto,\n        onDeletePhotos: onDeletePhotos,\n        onDeleteSeries: actions.onDelete,\n        onFindOnMap: actions.onFindOnMap,\n        onCameraAdd: function onCameraAdd() {\n          return changeMode(SERIES_MODES.NEWPHOTO, null, 'camera');\n        },\n        onEditSeries: function onEditSeries() {\n          return changeMode(SERIES_MODES.SERIES_EDIT);\n        },\n        onLibraryAdd: function onLibraryAdd() {\n          return changeMode(SERIES_MODES.NEWPHOTO, null, 'library');\n        },\n        onTileClick: viewPhoto,\n        onMenuBack: actions.onClose,\n        onWatch: actions.onWatch,\n        onUnWatch: actions.onUnWatch\n      });\n      break;\n\n    case SERIES_MODES.SERIES_EDIT:\n      component = React.createElement(SeriesEdit, {\n        onCancel: function onCancel() {\n          return changeMode(SERIES_MODES.SERIES_VIEW);\n        },\n        onOk: function onOk(seriesDelta) {\n          actions.onChange(series, _objectSpread({}, seriesDelta, {\n            id: series.id\n          }));\n          changeMode(SERIES_MODES.SERIES_VIEW);\n        }\n      });\n      break;\n\n    case SERIES_MODES.PHOTO_VIEW:\n      var canUpdatePhotoArr = series.photos.map(function (ph) {\n        return seriesContextState.ac.canUser('update', series, 'series') || seriesContextState.ac.canUser('update', ph, 'photo');\n      });\n      component = React.createElement(PhotoViewTool, {\n        photoId: mode.current.pid,\n        photos: series.photos,\n        onMenuBack: lastMode,\n        onUpdatePhoto: onUpdatePhoto,\n        canUpdatePhotoArr: canUpdatePhotoArr\n      });\n      break;\n\n    case SERIES_MODES.PHOTO_VIEW_NEW:\n      component = React.createElement(PhotoViewTool, {\n        photoId: initialPhoto,\n        photos: series.photos,\n        newPhoto: true,\n        onMenuBack: function onMenuBack() {\n          return changeMode(SERIES_MODES.SERIES_VIEW);\n        },\n        onUpdatePhoto: onUpdatePhoto\n      });\n      break;\n\n    case SERIES_MODES.SLIDESHOW:\n      component = React.createElement(Slideshow, {\n        photos: seriesContextState.series.photos,\n        onCancel: lastMode\n      });\n      break;\n\n    case SERIES_MODES.NEWPHOTO:\n      component = React.createElement(NewPhoto, {\n        inputMethod: mode.current.inputMethod,\n        photos: series ? series.photos : null,\n        actions: {\n          onCreate: onApprovePhoto,\n          onCancel: lastMode\n        }\n      });\n      break;\n\n    case SERIES_MODES.NEWSERIES:\n      component = React.createElement(NewPhoto, {\n        inputMethod: mode.current.inputMethod,\n        isNewSeries: true,\n        actions: {\n          onCreate: actions.onNewSeries,\n          onCancel: lastMode\n        }\n      });\n      break;\n\n    default:\n      log.info('REPEATABLEPHOTO: default state. you should NEVER see this', seriesContextState);\n      component = null;\n  }\n\n  return React.createElement(SeriesContext.Provider, {\n    value: seriesContextState\n  }, component);\n};\n\nRepeatablePhotos.propTypes = {\n  modeName: PropTypes.oneOf(VALID_STARTMODES),\n  watching: PropTypes.bool,\n  owned: PropTypes.bool,\n  currentUserId: PropTypes.string,\n  currentUserRole: PropTypes.string,\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  series: PropTypes.object,\n  initialPhoto: PropTypes.string,\n  loading: PropTypes.bool,\n  actions: PropTypes.shape({\n    onChange: PropTypes.func.isRequired,\n    onFindOnMap: PropTypes.func.isRequired,\n    onChangePhoto: PropTypes.func.isRequired,\n    onDeletePhoto: PropTypes.func.isRequired,\n    onNewPhoto: PropTypes.func.isRequired,\n    onNewSeries: PropTypes.func.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onWatch: PropTypes.func,\n    onUnWatch: PropTypes.func\n  })\n};\nRepeatablePhotos.defaultProps = {\n  mode: SERIES_MODES.SERIES_VIEW\n};\nexport default RepeatablePhotos;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Fab from '@material-ui/core/Fab';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesList.style';\nimport { dates } from '@morphoto/common';\nimport { RawImage } from '@morphoto/photos';\nimport { useNewImageMenu } from '@morphoto/ui';\nvar useStyles = makeStyles(style);\n\nvar SeriesList = function SeriesList(_ref) {\n  var seriesList = _ref.seriesList,\n      canEdit = _ref.canEdit,\n      tileClick = _ref.tileClick,\n      columns = _ref.columns,\n      cameraClick = _ref.cameraClick,\n      libraryClick = _ref.libraryClick;\n  var classes = useStyles();\n\n  var _useNewImageMenu = useNewImageMenu(cameraClick, libraryClick),\n      onDownThunk = _useNewImageMenu.onDownThunk,\n      onUpThunk = _useNewImageMenu.onUpThunk,\n      onBlock = _useNewImageMenu.onBlock,\n      menu = _useNewImageMenu.menu;\n\n  return React.createElement(GridList, {\n    cols: columns || 1,\n    cellHeight: 200,\n    className: classes.root\n  }, seriesList.map(function (seriesItem, idx) {\n    var photo = seriesItem.photos[0];\n    return React.createElement(GridListTile, {\n      key: \"gridTile\".concat(idx),\n      onClick: function onClick() {\n        return tileClick(seriesItem);\n      }\n    }, photo && React.createElement(RawImage, {\n      sizePriority: ['medium', 'thumb', 'large'],\n      photo: photo\n    }), canEdit && React.createElement(Fab, {\n      onClick: onBlock,\n      onMouseDown: onDownThunk(seriesItem),\n      onMouseUp: onUpThunk(seriesItem),\n      onTouchStart: onDownThunk(seriesItem),\n      onTouchEnd: onUpThunk(seriesItem),\n      color: \"secondary\",\n      className: classes.fab\n    }, React.createElement(AddCameraIcon, null)), menu, React.createElement(GridListTileBar, {\n      title: seriesItem.name,\n      subtitle: React.createElement(\"span\", null, seriesItem.photos.length, \" photos \", React.createElement(\"strong\", null, \"Last Photo\"), \": \", dates.formatDate(seriesItem.photos[0].takenOn, 'llll'))\n    }));\n  }));\n};\n\nSeriesList.propTypes = {\n  seriesList: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  canEdit: PropTypes.bool,\n  tileClick: PropTypes.func.isRequired,\n  cameraClick: PropTypes.func.isRequired,\n  libraryClick: PropTypes.func.isRequired\n};\nexport default SeriesList;","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'space-around',\n      overflow: 'hidden',\n      backgroundColor: theme.palette.background.paper\n    },\n    fab: {\n      position: 'absolute',\n      top: 10,\n      right: 10,\n      height: theme.spacing(5),\n      width: theme.spacing(5)\n    },\n    fab2: {\n      position: 'absolute',\n      top: 10,\n      left: 10,\n      height: theme.spacing(5),\n      width: theme.spacing(5)\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { CircularProgress } from '@material-ui/core';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { RawImage } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { config } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      margin: 0,\n      padding: theme.spacing(1)\n    },\n    rootSm: {\n      margin: 0,\n      padding: theme.spacing(0, 0, 1, 0)\n    },\n    chipContainer: {\n      display: 'flex',\n      width: '100%'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    accessLabel: {\n      padding: theme.spacing(0.5, 0.5)\n    },\n    img: {},\n    text: {\n      height: '115px',\n      margin: 0,\n      padding: theme.spacing(0, 1),\n      alignSelf: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    textSm: {\n      height: '75px',\n      margin: 0,\n      padding: theme.spacing(0, 1),\n      alignSelf: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    titleText: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    createdUserText: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    dateContainer: {\n      display: 'flex',\n      maxWidth: '400px'\n    },\n    dateLabel: {\n      fontWeight: 'bold',\n      flex: '1 1 50px'\n    },\n    dateText: {},\n    imgContainer: {\n      position: 'relative',\n      flex: '0 0 115px',\n      alignSelf: 'flex-start',\n      overflow: 'hidden',\n      '&::before': {\n        content: '\" \"',\n        display: 'block',\n        paddingTop: '100%'\n      }\n    },\n    imgContainerSm: {\n      position: 'relative',\n      flex: '0 0 100px',\n      alignSelf: 'flex-start',\n      overflow: 'hidden',\n      '&::before': {\n        content: '\" \"',\n        display: 'block',\n        paddingTop: '100%'\n      }\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar SeriesListItem = function SeriesListItem(_ref) {\n  var series = _ref.series,\n      loading = _ref.loading,\n      onClick = _ref.onClick,\n      children = _ref.children,\n      showCreatedOn = _ref.showCreatedOn,\n      showLastPhoto = _ref.showLastPhoto;\n  var classes = useStyles();\n  var isSmall = useMediaQuery('(max-width:375px)');\n  if (loading || !series) return React.createElement(SeriesListItemLoading, null);\n  var accessLabel = config.ACCESS.PRIVATE.label;\n  accessLabel = series.access ? config.ACCESS[series.access].label : config.ACCESS.PRIVATE.label;\n  return React.createElement(ListItem, {\n    className: isSmall ? classes.rootSm : classes.root,\n    button: true,\n    component: \"div\",\n    disableGutters: true,\n    onClick: onClick\n  }, React.createElement(ListItemIcon, {\n    className: isSmall ? classes.imgContainerSm : classes.imgContainer\n  }, React.createElement(RawImage, {\n    photo: series.featured,\n    sizePriority: ['thumb', 'medium', 'large'],\n    className: classes.img,\n    style: {\n      objectFit: 'cover',\n      position: 'absolute',\n      width: '100%',\n      height: '100%'\n    }\n  })), React.createElement(ListItemText, {\n    className: classes.text,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    component: \"div\",\n    className: classes.titleText\n  }, series.name || loading), React.createElement(Typography, {\n    variant: \"body2\",\n    component: \"div\",\n    className: classes.createdUserText\n  }, React.createElement(\"strong\", null, \"Created by:\"), \" \", series.createdUser.username), series.access && React.createElement(ThemeProvider, {\n    theme: themes.access[series.access]\n  }, React.createElement(Typography, {\n    className: classNames(classes.accessLabel),\n    variant: \"caption\",\n    component: \"div\"\n  }, \"\".concat(series.photoCount || 0, \" Photos\"), React.createElement(\"em\", null, \"(\", accessLabel, \")\"))), React.createElement(\"div\", {\n    className: classes.grow\n  }), showCreatedOn && React.createElement(\"div\", {\n    className: classes.dateContainer\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateLabel\n  }, \"Created:\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateText\n  }, dates.formatDate(series.createdOn, isSmall ? 'll' : 'lll'))), showLastPhoto && series.latest && React.createElement(\"div\", {\n    className: classes.dateContainer\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateLabel\n  }, \"Last Photo:\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateText\n  }, dates.formatDate(series.latest.takenOn, isSmall ? 'll' : 'lll')))), children);\n};\n\nSeriesListItem.propTypes = {\n  series: PropTypes.object,\n  loading: PropTypes.bool,\n  showCreatedOn: PropTypes.bool,\n  showLastPhoto: PropTypes.bool,\n  onClick: PropTypes.func,\n  children: PropTypes.array\n};\nexport default SeriesListItem;\n\nvar SeriesListItemLoading = function SeriesListItemLoading() {\n  var classes = useStyles();\n  return React.createElement(ListItem, {\n    className: classes.root,\n    button: true,\n    component: \"div\",\n    disableGutters: true\n  }, React.createElement(ListItemAvatar, null, React.createElement(CircularProgress, {\n    color: \"primary\"\n  })), React.createElement(ListItemText, null, React.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, \"Loading...\")));\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { List } from '@material-ui/core';\nimport SeriesListItem from './SeriesListItem';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    },\n    list: {\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ViewListDialog = function ViewListDialog(_ref) {\n  var title = _ref.title,\n      seriesList = _ref.seriesList,\n      onSelect = _ref.onSelect,\n      onClose = _ref.onClose,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    fullWidth: true,\n    open: open,\n    onClose: onClose,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    color: \"inherit\"\n  }))), React.createElement(List, {\n    className: classes.list,\n    dense: true,\n    disablePadding: true\n  }, seriesList.map(function (series) {\n    return React.createElement(SeriesListItem, {\n      key: \"series\".concat(series.id),\n      series: series,\n      onClick: function onClick() {\n        return onSelect(series.id);\n      }\n    });\n  })));\n};\n\nViewListDialog.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  seriesList: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default ViewListDialog;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CancelConfirm } from '@morphoto/modals';\nimport PhotoInfoInner from './PhotoInfoInner';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '90%',\n      width: '85%'\n    },\n    dlgTitleContainer: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main,\n      display: 'flex',\n      padding: 0\n    },\n    dlgTitle: {\n      flexGrow: 1,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEEDIT: 'noteEdit',\n  NOTEVIEW: 'noteView',\n  PHOTOTAKEN: 'taken',\n  TAGEDIT: 'tag',\n  CANCEL: 'cancel'\n};\n\nvar PhotoInfo = function PhotoInfo(_ref) {\n  var canEdit = _ref.canEdit,\n      photo = _ref.photo,\n      onCancel = _ref.onCancel,\n      onOk = _ref.onOk,\n      open = _ref.open;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      delta = _useState4[0],\n      setDelta = _useState4[1];\n\n  var dirty = delta && Object.keys(delta).length > 0;\n  return React.createElement(Dialog, {\n    fullScreen: true,\n    onClose: function onClose() {\n      if (dirty) setActiveDialog(DIALOGS.CANCEL);else onCancel();\n    },\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: open\n  }, React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitleContainer\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.dlgTitle\n  }, \"Photo Properties\"), React.createElement(IconButton, {\n    onClick: onCancel,\n    color: \"inherit\"\n  }, React.createElement(CloseIcon, null))), React.createElement(DialogContent, null, React.createElement(PhotoInfoInner, {\n    photo: photo,\n    delta: delta,\n    onChange: function onChange(newDelta) {\n      return setDelta(_objectSpread({}, delta, {}, newDelta));\n    },\n    canEdit: canEdit\n  })), React.createElement(DialogActions, null, !canEdit && React.createElement(Button, {\n    onClick: onCancel,\n    color: \"primary\"\n  }, \"Ok\"), canEdit && !dirty && React.createElement(Button, {\n    onClick: onCancel,\n    color: \"primary\"\n  }, \"Back\"), canEdit && dirty && React.createElement(React.Fragment, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.CANCEL);\n    },\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return setDelta({});\n    },\n    color: \"primary\"\n  }, \"Reset\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(delta);\n    },\n    color: \"primary\"\n  }, \"Ok\"))), activeDialog && activeDialog === DIALOGS.CANCEL && React.createElement(CancelConfirm, {\n    open: true,\n    title: \"Lose unsaved changes?\",\n    message: \"You will lose any changes you made to this form\",\n    onConfirm: function onConfirm(confirm) {\n      setActiveDialog(null);\n      if (confirm) onCancel();\n    }\n  }));\n};\n\nPhotoInfo.propTypes = {\n  canEdit: PropTypes.bool,\n  onCancel: PropTypes.func.isRequired,\n  onOk: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  photo: PropTypes.object.isRequired\n};\nexport default PhotoInfo;","import PhotoSeries from './PhotoSeries';\nexport default PhotoSeries;\nexport { SERIES_MODES } from './PhotoSeries';\nexport { default as SeriesList } from './SeriesList';\nexport { default as SeriesListItem } from './SeriesListItem';\nexport { default as ViewListDialog } from './ViewListDialog';\nexport { default as NewPhoto, NEW_PHOTO_MODES } from './views/NewPhoto';\nexport { default as PhotoInfo } from './views/PhotoInfo';","import Satellite from './Satellite.json';\nimport TopoMap from './TopoMap.json';\nimport { Satellite as SatIcon, SatelliteOutlined, Terrain, TerrainOutlined } from '@material-ui/icons';\nexport default [{\n  toolTip: 'Sat',\n  Icon: SatelliteOutlined,\n  ActiveIcon: SatIcon,\n  color: 'green',\n  style: Satellite\n}, {\n  toolTip: 'Topo',\n  Icon: TerrainOutlined,\n  ActiveIcon: Terrain,\n  color: 'blue',\n  style: TopoMap\n}];","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      width: 1,\n      height: 1,\n      zIndex: 1\n    },\n    svgDot: {\n      width: 20,\n      height: 20,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    svgAccuracyDot: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MyLocation = function MyLocation(_ref) {\n  var position = _ref.position,\n      projection = _ref.projection;\n  var classes = useStyles();\n  var accuracy = 20;\n  var accHeight = projection.pixelsPerMeter[0] * accuracy;\n  var accWidth = projection.pixelsPerMeter[1] * accuracy;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"svg\", {\n    style: {\n      height: accHeight,\n      width: accWidth\n    },\n    className: classes.svgAccuracyDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 100, 100\"\n  }, React.createElement(\"circle\", {\n    cx: \"50\",\n    cy: \"50\",\n    r: 49,\n    stroke: \"#8888FF\",\n    fillOpacity: \"0.4\",\n    strokeWidth: \"1\",\n    fill: \"#AAAAFF\"\n  })), React.createElement(\"svg\", {\n    className: classes.svgDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 10, 10\"\n  }, React.createElement(\"circle\", {\n    cx: \"5\",\n    cy: \"5\",\n    r: \"4\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: \"1\",\n    fill: \"#4444FF\"\n  })));\n};\n\nMyLocation.propTypes = {\n  position: PropTypes.object,\n  projection: PropTypes.object\n};\nexport default MyLocation;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      zIndex: 10,\n      position: 'absolute'\n    },\n    speedDialFab: {\n      border: '2px solid',\n      background: theme.palette.text.primary,\n      color: theme.palette.primary.contrastText,\n      width: 40,\n      height: 40\n    },\n    speedDialAction: {},\n    speedDialIcon: {},\n    speedDialLabel: {\n      background: 'black',\n      color: 'white'\n    },\n    actionsClosed: {\n      display: 'none'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar StyleButtons = function StyleButtons(_ref) {\n  var controlPadding = _ref.controlPadding,\n      currStyle = _ref.currStyle,\n      mapStyles = _ref.mapStyles,\n      setCurrStyle = _ref.setCurrStyle;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var noEventSetOpen = function noEventSetOpen(e, state) {\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(state);\n  };\n\n  if (!mapStyles || !Array.isArray(mapStyles) || mapStyles.length < 2 || !mapStyles[currStyle]) return null;\n  var currStyleObj = mapStyles[currStyle];\n  var ActiveIcon = currStyleObj.ActiveIcon;\n  return React.createElement(\"div\", {\n    className: classes.root,\n    style: {\n      top: controlPadding.top ? controlPadding.top : theme.spacing(2),\n      right: controlPadding.right ? controlPadding.right : theme.spacing(2)\n    }\n  }, mapStyles.length > 1 && React.createElement(SpeedDial, {\n    ariaLabel: \"SpeedDial\",\n    className: classes.speedDial,\n    classes: {\n      fab: classes.speedDialFab,\n      actionsClosed: classes.actionsClosed\n    },\n    icon: React.createElement(ActiveIcon, {\n      className: classes.icon\n    }),\n    onClick: function onClick(e) {\n      return noEventSetOpen(e, !open);\n    },\n    onClose: function onClose(e) {\n      return noEventSetOpen(e, false);\n    },\n    open: open,\n    direction: \"left\"\n  }, mapStyles.map(function (_ref2, idx) {\n    var Icon = _ref2.Icon,\n        ActiveIcon = _ref2.ActiveIcon,\n        toolTip = _ref2.toolTip;\n    return React.createElement(SpeedDialAction, {\n      key: \"stylebutton\".concat(idx),\n      icon: React.createElement(Icon, {\n        className: classes.speedDialIcon\n      }),\n      tooltipOpen: false,\n      tooltipPlacement: \"bottom\",\n      tooltipTitle: toolTip,\n      onClick: function onClick() {\n        setCurrStyle(idx);\n        setOpen(false);\n      }\n    });\n  })));\n};\n\nStyleButtons.propTypes = {\n  controlPadding: PropTypes.object,\n  currStyle: PropTypes.number,\n  mapStyles: PropTypes.array,\n  setCurrStyle: PropTypes.func\n};\nStyleButtons.defaultProps = {\n  controlPadding: {}\n};\nexport default StyleButtons;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Fab from '@material-ui/core/Fab';\nimport MyLocationIcon from '@material-ui/icons/MyLocation';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      border: '1px solid',\n      background: theme.palette.grey[100],\n      color: 'black',\n      width: 40,\n      height: 40,\n      zIndex: 10,\n      position: 'absolute'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MyLocationButton = function MyLocationButton(_ref) {\n  var onClick = _ref.onClick,\n      controlPadding = _ref.controlPadding,\n      disabled = _ref.disabled;\n  var classes = useStyles();\n  var theme = useTheme();\n  return React.createElement(Fab, {\n    disabled: disabled,\n    style: {\n      top: 56 + (controlPadding.top ? controlPadding.top : theme.spacing(2)),\n      right: controlPadding.right ? controlPadding.right : theme.spacing(2)\n    },\n    \"aria-label\": \"myLocation\",\n    className: classes.root,\n    onClick: onClick\n  }, React.createElement(MyLocationIcon, null));\n};\n\nMyLocationButton.propTypes = {\n  controlPadding: PropTypes.object,\n  onClick: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\nexport default MyLocationButton;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo, useEffect } from 'react';\nimport ReactMapGL, { NavigationControl, Marker, FlyToInterpolator } from 'react-map-gl';\nimport PropTypes from 'prop-types';\nimport { easeCubic } from 'd3-ease';\nimport WebMercatorViewport, { getDistanceScales } from 'viewport-mercator-project';\nimport mapStyles from './mapStyles';\nimport MyLocation from './markers/MyLocation';\nimport StyleButtons from './controls/StyleButtons';\nimport MyLocationButton from './controls/MyLocationButton';\nimport log from 'loglevel';\nimport { useGeolocation, useComponentSize, config } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nvar useStyles = makeStyles(require('./BaseMap.style').default);\n\nvar BaseMap = function BaseMap(props) {\n  var classes = useStyles();\n\n  var showMe = props.showMe,\n      children = props.children,\n      mapStyles = props.mapStyles,\n      controlPadding = props.controlPadding,\n      initViewport = props.viewport,\n      bounds = props.bounds,\n      lockToBounds = props.lockToBounds,\n      lockPan = props.lockPan,\n      initStyle = props.initStyle,\n      incomingOnViewportChange = props.onViewportChange,\n      incomingOnTransitionStart = props.onTransitionStart,\n      incomingOnTransitionEnd = props.onTransitionEnd,\n      transitions = props.transitions,\n      onMapDataEvent = props.onMapDataEvent,\n      stylechooser = props.stylechooser,\n      passthroughProps = _objectWithoutProperties(props, [\"showMe\", \"children\", \"mapStyles\", \"controlPadding\", \"viewport\", \"bounds\", \"lockToBounds\", \"lockPan\", \"initStyle\", \"onViewportChange\", \"onTransitionStart\", \"onTransitionEnd\", \"transitions\", \"onMapDataEvent\", \"stylechooser\"]);\n\n  var mapContainerRef = useRef(null);\n  var mapBoxRef = useRef(null);\n  var innerTransitionsRef = useRef(null);\n\n  var _useComponentSize = useComponentSize(mapContainerRef),\n      size = _useComponentSize.size;\n\n  var _useState = useState(initStyle),\n      _useState2 = _slicedToArray(_useState, 2),\n      currStyle = _useState2[0],\n      setCurrStyle = _useState2[1];\n\n  var _useState3 = useState(_objectSpread({}, defaultViewVals, {}, initViewport)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewport = _useState4[0],\n      setViewport = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isTransitioning = _useState6[0],\n      setIsTransitioning = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      projection = _useState8[0],\n      setProjection = _useState8[1];\n\n  var myPosition = {};\n  myPosition = useGeolocation();\n  var geoMarker = myPosition.latitude && myPosition.longitude ? React.createElement(Marker, {\n    key: \"myPos\",\n    className: \"myPosMarker\",\n    captureDrag: false,\n    latitude: myPosition.latitude,\n    longitude: myPosition.longitude,\n    style: {\n      zIndex: 1\n    }\n  }, React.createElement(MyLocation, {\n    position: myPosition,\n    projection: projection\n  })) : null;\n  useMemo(function () {\n    if (!size || size.width < 10 || size.height < 10) return;\n    if (mapStyles.length <= currStyle) setCurrStyle(initStyle);\n\n    try {\n      var _projection = getDistanceScales(viewport);\n\n      setProjection(_projection);\n    } catch (e) {\n      log.error(e);\n    }\n  }, [viewport.zoom, size]);\n\n  var flyToMe = function flyToMe() {\n    if (!myPosition.latitude || !myPosition.longitude) return;\n    var transitionTime = 2000;\n    innerTransitionsRef.current = {\n      transitionDuration: transitionTime,\n      transitionInterpolator: new FlyToInterpolator(),\n      transitionEasing: easeCubic\n    };\n    setTimeout(function () {\n      if (innerTransitionsRef.current) innerTransitionsRef.current = null;\n    }, transitionTime);\n    setViewport(_objectSpread({}, viewport, {\n      latitude: myPosition.latitude,\n      longitude: myPosition.longitude,\n      zoom: viewport.zoom > 10 ? viewport.zoom : 12\n    }));\n  };\n\n  var _onViewportChange = function onViewportChange(viewportChange) {\n    var newViewport = _objectSpread({}, viewportChange);\n\n    if (bounds && lockToBounds) {\n      if (newViewport.longitude < bounds[0]) newViewport.longitude = bounds[0];else if (newViewport.longitude > bounds[2]) newViewport.longitude = bounds[2];\n      if (newViewport.latitude < bounds[1]) newViewport.latitude = bounds[1];else if (newViewport.latitude > bounds[3]) newViewport.latitude = bounds[3];\n    }\n\n    if (lockPan) {\n      newViewport.latitude = viewport.latitude;\n      newViewport.longitude = viewport.longitude;\n    }\n\n    if (!isTransitioning && typeof incomingOnViewportChange === 'function') {\n      incomingOnViewportChange({\n        viewport: newViewport,\n        size: size,\n        projection: projection,\n        map: mapBoxRef.current && mapBoxRef.current.getMap()\n      });\n    }\n\n    setViewport(newViewport);\n  };\n\n  var recalcZoomBounds = function recalcZoomBounds() {\n    if (!mapContainerRef.current) return;\n    if (!bounds || !size || size.width < 10 || size.height < 10 || isTransitioning) return;\n\n    var _bounds = _slicedToArray(bounds, 4),\n        minlng = _bounds[0],\n        minlat = _bounds[1],\n        maxlng = _bounds[2],\n        maxlat = _bounds[3];\n\n    try {\n      var _fitBounds = new WebMercatorViewport(_objectSpread({}, size, {}, viewport)).fitBounds([[minlng, minlat], [maxlng, maxlat]], {\n        padding: 40,\n        offset: [0, 0]\n      }),\n          longitude = _fitBounds.longitude,\n          latitude = _fitBounds.latitude,\n          zoom = _fitBounds.zoom;\n\n      setViewport(_objectSpread({}, viewport, {\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      }));\n    } catch (e) {\n      log.warn('recalcZoomBounds', e);\n    }\n  };\n\n  var handleTransitionStart = function handleTransitionStart() {\n    setIsTransitioning(true);\n    if (typeof incomingOnTransitionStart === 'function') incomingOnTransitionStart();\n  };\n\n  var handleTransitionEnd = function handleTransitionEnd() {\n    setIsTransitioning(false);\n    innerTransitionsRef.current = null;\n    if (incomingOnTransitionEnd) incomingOnTransitionEnd();\n\n    if (typeof incomingOnViewportChange === 'function') {\n      incomingOnViewportChange({\n        viewport: viewport,\n        size: size,\n        projection: projection,\n        map: mapBoxRef.current && mapBoxRef.current.getMap()\n      });\n    }\n  };\n\n  useMemo(recalcZoomBounds, [size, bounds]);\n  useEffect(function () {\n    setViewport(_objectSpread({}, viewport, {}, initViewport));\n  }, [initViewport]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.mapContainer, props.className),\n    ref: mapContainerRef\n  }, size.height > 0 && size.width > 0 && React.createElement(ReactMapGL, _extends({}, viewport, innerTransitionsRef.current || transitions, {\n    ref: function ref(map) {\n      mapBoxRef.current = map;\n    },\n    height: size.height,\n    width: size.width,\n    mapStyle: currStyle < mapStyles.length ? mapStyles[currStyle].style : mapStyles[0].style,\n    onData: onMapDataEvent,\n    onTransitionStart: handleTransitionStart,\n    onTransitionEnd: handleTransitionEnd,\n    dragPan: !lockPan,\n    onViewportChange: _onViewportChange,\n    mapboxApiAccessToken: config.mapConfig.mapBoxToken\n  }, passthroughProps), children && Array.isArray(children) ? children.map(function (c, idx) {\n    return c ? React.cloneElement(handleChild(c, viewport, size.height, size.width, projection), {\n      key: \"mapChild-\".concat(idx)\n    }) : null;\n  }) : handleChild(children, viewport, size.height, size.width, projection), stylechooser && React.createElement(StyleButtons, {\n    controlPadding: controlPadding,\n    currStyle: currStyle,\n    mapStyles: mapStyles,\n    setCurrStyle: setCurrStyle\n  }), !props.hideNavControls && React.createElement(NavigationControl, {\n    onViewportChange: function onViewportChange(viewport) {\n      return _onViewportChange(_objectSpread({}, viewport, {}, size));\n    },\n    showZoom: !props.touchZoom === false && !props.scrollZoom === false,\n    showCompass: !props.touchRotate === false && !props.dragRotate === false\n  }), showMe && !lockPan && React.createElement(React.Fragment, null, geoMarker, React.createElement(MyLocationButton, {\n    disabled: !myPosition || !myPosition.latitude,\n    controlPadding: controlPadding,\n    onClick: flyToMe\n  }))));\n};\n\nBaseMap.propTypes = {\n  children: PropTypes.any,\n  data: PropTypes.array,\n  controlPadding: PropTypes.object,\n  showMe: PropTypes.bool,\n  className: PropTypes.string,\n  touchZoom: PropTypes.bool,\n  scrollZoom: PropTypes.bool,\n  touchRotate: PropTypes.bool,\n  dragRotate: PropTypes.bool,\n  transitions: PropTypes.object,\n  viewport: PropTypes.object,\n  initStyle: PropTypes.number,\n  stylechooser: PropTypes.bool,\n  lockPan: PropTypes.bool,\n  lockRotation: PropTypes.bool,\n  lockZoom: PropTypes.bool,\n  lockToBounds: PropTypes.bool,\n  hideNavControls: PropTypes.bool,\n  bounds: PropTypes.array,\n  mapStyles: PropTypes.array,\n  onMapDataEvent: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  onTransitionStart: PropTypes.func,\n  onTransitionEnd: PropTypes.func\n};\nBaseMap.defaultProps = {\n  controlPadding: {},\n  stylechooser: true,\n  initStyle: 0,\n  lockToBounds: false,\n  mapStyles: mapStyles\n};\nexport default BaseMap;\nvar defaultViewVals = {\n  latitude: 49.3050394,\n  longitude: -123.1398254,\n  bearing: 0,\n  pitch: 0,\n  zoom: 12\n};\n\nfunction handleChild(child, viewport, height, width, projection) {\n  return typeof child === 'function' ? child(viewport, height, width, projection) : child;\n}","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport uuid from 'uuid/v4';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport rbush from 'rbush';\nimport { point, centroid, featureCollection } from '@turf/turf';\nimport { util } from '@morphoto/common';\nimport log from 'loglevel';\n\nvar useClusteredData = function useClusteredData(data, filterBounds, currentZoom, viewport, sizeScale, queryVersion, isTransitioning) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clusteredData = _useState2[0],\n      setClusteredData = _useState2[1];\n\n  var mountedRef = useRef();\n\n  var _useState3 = useState({\n    single: [],\n    cluster: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredData = _useState4[0],\n      setFilteredData = _useState4[1];\n\n  useEffect(function () {\n    mountedRef.current = true;\n    return function () {\n      mountedRef.current = false;\n    };\n  }, []);\n  var updateDataDebounce = useCallback(util.debounce(function _callee() {\n    var updatedData,\n        _args = arguments;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (mountedRef.current) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(updateData.apply(void 0, _args));\n\n          case 4:\n            updatedData = _context.sent;\n            setClusteredData(updatedData);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  }, 1000), []);\n  var filterDataDebounce = useCallback(util.debounce(function _callee2() {\n    var filtered,\n        _args2 = arguments;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (mountedRef.current) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(filterData.apply(void 0, _args2));\n\n          case 4:\n            filtered = _context2.sent;\n            setFilteredData(filtered);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }, 300), []);\n  useEffect(function () {\n    updateDataDebounce(data, sizeScale, viewport);\n  }, [data.length, queryVersion]);\n  useEffect(function () {\n    if (!isTransitioning) filterDataDebounce(clusteredData, filteredData, filterBounds, currentZoom);\n  }, [clusteredData, currentZoom, filterBounds, queryVersion, isTransitioning]);\n  return {\n    filteredClusteredData: filteredData\n  };\n};\n\nexport default useClusteredData;\n\nvar updateData = function updateData(data, sizeScale, viewport) {\n  if (!data) {\n    return [];\n  }\n\n  var tree = rbush(9, ['.x', '.y', '.x', '.y']);\n  var transform = new WebMercatorViewport(_objectSpread({}, viewport, {\n    zoom: 0\n  }));\n  var newData = data.map(function (p) {\n    var screenCoords = [0, 0];\n\n    try {\n      screenCoords = transform.project(p.coords);\n    } catch (e) {\n      log.error(e);\n    }\n\n    var longitude = p.longitude,\n        latitude = p.latitude,\n        properties = _objectWithoutProperties(p, [\"longitude\", \"latitude\"]);\n\n    return {\n      x: screenCoords[0],\n      y: screenCoords[1],\n      photoCount: properties.photoCount,\n      zoomLevels: [],\n      geoJSON: p.coords ? point(p.coords, _objectSpread({}, properties)) : null\n    };\n  });\n  tree.clear();\n  tree.load(newData);\n\n  var _loop = function _loop(z) {\n    var radius = sizeScale / Math.sqrt(2) / Math.pow(2, z);\n    newData.forEach(function (p) {\n      if (p.zoomLevels[z] === undefined) {\n        var x = p.x,\n            y = p.y;\n        var neighbors = tree.search({\n          minX: x - radius,\n          minY: y - radius,\n          maxX: x + radius,\n          maxY: y + radius\n        }).filter(function (neighbor) {\n          return neighbor.zoomLevels[z] === undefined;\n        });\n        neighbors.forEach(function (neighbor) {\n          if (neighbor === p) {\n            var newGeoJSON = neighbors.length === 1 ? p.geoJSON : centroid(featureCollection(neighbors.map(function (n) {\n              return n.geoJSON;\n            })));\n            newGeoJSON.properties = _objectSpread({}, newGeoJSON.properties, {\n              id: newGeoJSON.properties.id || uuid(),\n              count: neighbors.length,\n              reducedPhotoCount: neighbors.reduce(function (acc, _ref2) {\n                var photoCount = _ref2.photoCount;\n                return photoCount ? acc + photoCount : acc;\n              }, 0),\n              points: neighbors.map(function (n) {\n                return n.geoJSON;\n              })\n            });\n            p.zoomLevels[z] = newGeoJSON;\n          } else {\n            neighbor.zoomLevels[z] = null;\n          }\n        });\n      }\n    });\n  };\n\n  for (var z = 0; z <= 20; z++) {\n    _loop(z);\n  }\n\n  return newData.map(function (_ref) {\n    var zoomLevels = _ref.zoomLevels;\n    return zoomLevels;\n  });\n};\n\nfunction filterData(clusteredData, filteredData, filterBounds, newZ) {\n  return clusteredData.filter(function (d) {\n    return !!d[newZ];\n  }).reduce(function (acc, zoomLevels) {\n    var geoJSON = zoomLevels[newZ];\n    var coords = geoJSON.geometry.coordinates;\n    var count = geoJSON.properties.count;\n\n    if (!filterBounds || filterBounds.length < 4 || filterBounds[0] < coords[0] && filterBounds[1] < coords[1] && filterBounds[2] > coords[0] && filterBounds[3] > coords[1]) {\n      if (count > 1) acc.cluster.push(geoJSON);else acc.single.push(geoJSON);\n    }\n\n    return acc;\n  }, {\n    single: [],\n    cluster: []\n  });\n}","export default (function (theme) {\n  return {\n    root: {\n      position: 'relative',\n      height: '100%',\n      '& .myPosMarker': {\n        zIndex: 1\n      },\n      '& .singleMarker': {\n        zIndex: 3\n      },\n      '& .clusterMarker': {\n        zIndex: 2\n      }\n    },\n    fab: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText\n    },\n    topBar: {\n      position: 'absolute',\n      zIndex: 100,\n      top: 0\n    },\n    loadingWrapper: {\n      position: 'absolute',\n      color: theme.palette.text.primary,\n      opacity: 0.5,\n      zIndex: 90,\n      textAlign: 'center',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    zoomOutFab: {\n      margin: theme.spacing(0.5),\n      padding: theme.spacing(0.5),\n      border: '2px solid',\n      borderRadius: theme.spacing(1),\n      background: theme.palette.common.white,\n      fontSize: 20,\n      position: 'absolute',\n      zIndex: 80,\n      bottom: theme.spacing(2),\n      right: theme.spacing(10)\n    },\n    selectedPopup: {\n      width: '90%',\n      maxWidth: 400,\n      zIndex: 100,\n      position: 'absolute',\n      bottom: theme.spacing(1),\n      left: '50%',\n      transformOrigin: '0% 50%',\n      transform: 'translateY(0%) translateX(-50%)'\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ZoomOutMapIcon from '@material-ui/icons/ZoomOutMap';\nimport ViewListIcon from '@material-ui/icons/ViewList';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport log from 'loglevel';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    listItemText: {\n      textAlign: 'center'\n    },\n    iconButton: {\n      background: theme.palette.grey[200]\n    },\n    compoundButton: {\n      textAlign: 'center'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ClusterSelected = function ClusterSelected(_ref) {\n  var seriesCount = _ref.seriesCount,\n      reducedPhotoCount = _ref.reducedPhotoCount,\n      actions = _ref.actions;\n  var classes = useStyles();\n  log.info('cluster selected', {\n    seriesCount: seriesCount,\n    reducedPhotoCount: reducedPhotoCount\n  });\n  return React.createElement(List, null, React.createElement(ListItem, {\n    className: classes.root\n  }, React.createElement(ListItemIcon, null, React.createElement(\"div\", {\n    className: classes.compoundButton\n  }, React.createElement(IconButton, {\n    onClick: actions.onZoomTo,\n    className: classes.iconButton\n  }, React.createElement(ZoomOutMapIcon, null)), React.createElement(Typography, {\n    variant: \"caption\",\n    component: \"div\"\n  }, \"Zoom In\"))), React.createElement(ListItemText, {\n    className: classes.listItemText,\n    onClick: actions.onZoomTo,\n    primary: \"\".concat(seriesCount, \" Photo series\"),\n    secondary: \"containing \".concat(reducedPhotoCount, \" individual photo\").concat(reducedPhotoCount === 1 ? '' : 's')\n  }), React.createElement(ListItemIcon, null, React.createElement(\"div\", {\n    className: classes.compoundButton\n  }, React.createElement(IconButton, {\n    onClick: actions.onViewList,\n    className: classes.iconButton\n  }, React.createElement(ViewListIcon, null)), React.createElement(Typography, {\n    variant: \"caption\",\n    component: \"div\"\n  }, \"List\")))));\n};\n\nClusterSelected.propTypes = {\n  seriesCount: PropTypes.number.isRequired,\n  reducedPhotoCount: PropTypes.number.isRequired,\n  actions: PropTypes.shape({\n    onZoomTo: PropTypes.func.isRequired,\n    onViewList: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired\n  })\n};\nexport default ClusterSelected;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport Avatar from '@material-ui/core/Avatar';\nimport Camera from '@material-ui/icons/Camera';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: theme.palette.primary.main,\n      width: 150,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    rootActive: {\n      zIndex: 60\n    },\n    icon: {},\n    avatar: {\n      position: 'relative',\n      margin: '0 auto',\n      border: \"2px solid \".concat(theme.palette.text.primary),\n      height: 40,\n      width: 40,\n      zIndex: 61,\n      background: theme.palette.background.default,\n      color: theme.palette.text.primary\n    },\n    avatarActive: {\n      background: '#FFFF00',\n      color: 'black',\n      border: \"2px solid black\"\n    },\n    badge: {\n      zIndex: 62,\n      color: theme.palette.secondary.contrastText,\n      background: theme.palette.secondary.main,\n      transform: 'scale(1) translate(30%, -30%)'\n    },\n    badgeActive: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    directionIndicator: {\n      position: 'absolute',\n      top: 20,\n      left: '50%',\n      zIndex: 59\n    },\n    name: {\n      color: 'white',\n      fontWeight: 'bold',\n      textShadow: \"\\n        0px 0px 4px #000000, \\n        0px 0px 4px #000000 \\n    \",\n      zIndex: 60,\n      position: 'relative'\n    },\n    nameActive: {\n      color: 'black',\n      textShadow: \"\\n    0px 0px 2px #FFFFFF, \\n    0px 0px 2px #FFFFFF,\\n    0px 0px 4px #FFFFFF \\n\"\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Single = function Single(_ref) {\n  var name = _ref.name,\n      onClick = _ref.onClick,\n      active = _ref.active,\n      photoCount = _ref.photoCount,\n      direction = _ref.direction;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, active ? classes.rootActive : null)\n  }, React.createElement(Badge, {\n    classes: {\n      badge: classNames(classes.badge, active ? classes.badgeActive : null)\n    },\n    badgeContent: photoCount\n  }, React.createElement(Avatar, {\n    className: classNames(classes.avatar, active ? classes.avatarActive : null),\n    onClick: onClick\n  }, React.createElement(Camera, {\n    className: classes.icon,\n    color: \"inherit\"\n  }))), direction && direction >= 0 ? React.createElement(\"div\", {\n    className: classes.directionIndicator\n  }, React.createElement(\"svg\", {\n    className: classes.svgArc,\n    version: \"1.1\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0, 0, 100, 100\",\n    style: {\n      transform: \"translateY(-50%) translateX(-50%) rotateZ(\".concat(direction, \"deg)\")\n    }\n  }, React.createElement(\"path\", {\n    d: \"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z\",\n    fill: \"#009DC1\",\n    fillOpacity: \"0.444\",\n    strokeWidth: \"1\",\n    strokeOpacity: \"0.6\",\n    stroke: \"#FFFFFF\"\n  }))) : null, React.createElement(Typography, {\n    variant: \"body1\",\n    className: classNames(classes.name, active ? classes.nameActive : null)\n  }, name));\n};\n\nSingle.propTypes = {\n  name: PropTypes.string,\n  photoCount: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n  direction: PropTypes.number,\n  active: PropTypes.bool\n};\nexport default Single;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport numeral from 'numeral';\n\nvar style = function style(theme) {\n  return {\n    avatar: {\n      background: theme.palette.grey[900],\n      border: \"2px solid \".concat(theme.palette.grey[100]),\n      color: theme.palette.grey[100]\n    },\n    avatarActive: {\n      background: '#FFFF00',\n      border: \"2px solid black\",\n      color: 'black',\n      zIndex: 50\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Cluster = function Cluster(_ref) {\n  var seriesCount = _ref.seriesCount,\n      active = _ref.active,\n      onClick = _ref.onClick;\n  var classes = useStyles();\n  return React.createElement(Avatar, {\n    onClick: onClick,\n    className: classNames(classes.avatar, active ? classes.avatarActive : null)\n  }, numeral(seriesCount).format('0,0'));\n};\n\nCluster.propTypes = {\n  seriesCount: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n  active: PropTypes.bool\n};\nexport default Cluster;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { FlyToInterpolator, LinearInterpolator, Marker } from 'react-map-gl';\nimport { easeCubic } from 'd3-ease';\nimport { bbox, featureCollection, buffer, point } from '@turf/turf';\nimport Paper from '@material-ui/core/Paper';\nimport { CircularProgress } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport { SearchInput } from '@morphoto/Search';\nimport { SeriesListItem, ViewListDialog } from '@morphoto/photoseries';\nimport BaseMap from './BaseMap';\nimport MapStyles from './mapStyles';\nimport useClusteredData from './lib/useClusteredData';\nimport style from './HomeMap.style';\nimport ClusterSelected from './ClusterSelected';\nimport SingleMarker from './markers/Single';\nimport ClusterMarker from './markers/Cluster';\nimport themes from '@morphoto/themes';\nvar useStyles = makeStyles(style);\nvar defaultView = {\n  zoom: 4,\n  latitude: 44.629701,\n  longitude: -120.333379\n};\nvar SIZESCALE = 80;\n\nvar HomeMap = function HomeMap(_ref) {\n  var seriesList = _ref.seriesList,\n      initViewport = _ref.initViewport,\n      loading = _ref.loading,\n      initialActiveSeries = _ref.initialActiveSeries,\n      queryVersion = _ref.queryVersion,\n      actions = _ref.actions;\n\n  var _useState = useState({\n    viewport: _objectSpread({}, defaultView, {}, initViewport.viewport),\n    bounds: initViewport.bounds,\n    filterBounds: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      mapViewObj = _useState2[0],\n      setMapViewObj = _useState2[1];\n\n  var classes = useStyles();\n  var mapViewRef = useRef();\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isTransitioning = _useState4[0],\n      setIsTransitioning = _useState4[1];\n\n  var homeMapContainerRef = useRef();\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentZoom = _useState6[0],\n      setCurrentZoom = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showViewList = _useState8[0],\n      setShowViewList = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      transitions = _useState10[0],\n      setTransitions = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedItem = _useState12[0],\n      setSelectedItem = _useState12[1];\n\n  var _useClusteredData = useClusteredData(seriesList || [], mapViewObj.filterBounds, currentZoom, mapViewObj.viewport, SIZESCALE, queryVersion, isTransitioning),\n      filteredClusteredData = _useClusteredData.filteredClusteredData;\n\n  useEffect(function () {\n    if (!initialActiveSeries || !seriesList || selectedItem) return;\n\n    try {\n      var selected = seriesList.find(function (s) {\n        return s.id === initialActiveSeries;\n      });\n\n      if (selected && selected.coords) {\n        var bufferPts = buffer(point(selected.coords), 10, {\n          units: 'meters'\n        });\n        var bounds = bbox(bufferPts);\n        setMapViewObj(_objectSpread({}, mapViewObj, {\n          bounds: bounds\n        }));\n      }\n    } catch (e) {\n      log.error(e);\n    }\n  }, [seriesList]);\n  useEffect(function () {\n    if (!initialActiveSeries || !filteredClusteredData.single || selectedItem) return;\n\n    try {\n      var selected = filteredClusteredData.single.find(function (s) {\n        return s.properties.id === initialActiveSeries;\n      });\n      if (selected && homeMapContainerRef.current) setSelectedItem(selected);\n    } catch (e) {\n      log.error(e);\n    }\n  }, [filteredClusteredData.single]);\n\n  var saveMap = function saveMap(delay) {\n    var _ref2 = mapViewRef.current ? mapViewRef.current : mapViewObj.viewport,\n        transitionDuration = _ref2.transitionDuration,\n        transitionInterpolator = _ref2.transitionInterpolator,\n        transitionInterruption = _ref2.transitionInterruption,\n        maxZoom = _ref2.maxZoom,\n        minZoom = _ref2.minZoom,\n        maxPitch = _ref2.maxPitch,\n        minPitch = _ref2.minPitch,\n        newView = _objectWithoutProperties(_ref2, [\"transitionDuration\", \"transitionInterpolator\", \"transitionInterruption\", \"maxZoom\", \"minZoom\", \"maxPitch\", \"minPitch\"]);\n\n    var saveObj = {\n      viewport: newView\n    };\n    if (!delay) actions.pushMapHistory(saveObj);else {\n      setTimeout(function () {\n        return actions.pushMapHistory(saveObj);\n      }, delay);\n    }\n  };\n\n  var updateSelectedItem = function updateSelectedItem(item) {\n    setSelectedItem(item);\n    if (item && item.properties.count === 1) actions.onSeriesMapSelect(item.properties.id);else actions.onSeriesMapSelect();\n    saveMap();\n  };\n\n  var _onZoomTo = function onZoomTo(object) {\n    try {\n      var pts = featureCollection(object.properties.points);\n      var bounds = bbox(pts);\n\n      if (bounds[0] === bounds[2] && bounds[1] === bounds[3]) {\n        var paddedPoint = buffer(point([bounds[0], bounds[1]]), 10, {\n          units: 'meters'\n        });\n        bounds = bbox(paddedPoint);\n      }\n\n      var lngBuff = (bounds[2] - bounds[0]) * 0.2;\n      var latBuff = (bounds[3] - bounds[1]) * 0.2;\n      var buffBounds = [bounds[0] - lngBuff, bounds[1] - latBuff, bounds[2] + lngBuff, bounds[3] + latBuff];\n      setTransitions({\n        transitionDuration: 2000,\n        transitionInterpolator: new FlyToInterpolator(),\n        transitionEasing: easeCubic\n      });\n      setMapViewObj(_objectSpread({}, mapViewObj, {\n        bounds: buffBounds\n      }));\n      if (object.properties.count > 1) setTimeout(function () {\n        return updateSelectedItem(null);\n      }, 2000);\n    } catch (e) {\n      log.error(e);\n    }\n  };\n\n  var onViewportChange = function onViewportChange(_ref3) {\n    var viewport = _ref3.viewport,\n        map = _ref3.map;\n    mapViewRef.current = viewport;\n    var viewZoom = Math.floor(viewport.zoom);\n\n    if (!isTransitioning && map && map.getBounds) {\n      var _map$getBounds = map.getBounds(),\n          _map$getBounds$_sw = _map$getBounds._sw,\n          minLng = _map$getBounds$_sw.lng,\n          minLat = _map$getBounds$_sw.lat,\n          _map$getBounds$_ne = _map$getBounds._ne,\n          maxLng = _map$getBounds$_ne.lng,\n          maxLat = _map$getBounds$_ne.lat;\n\n      var _ref4 = mapViewObj.filterBounds || [minLng, minLat, maxLng, maxLat],\n          _ref5 = _slicedToArray(_ref4, 4),\n          oldMinLng = _ref5[0],\n          oldMinLat = _ref5[1],\n          oldMaxLng = _ref5[2],\n          oldMaxLat = _ref5[3];\n\n      if (viewZoom !== currentZoom || oldMinLng >= minLng || oldMinLat >= minLat || oldMaxLng <= maxLng || oldMaxLat <= maxLat) {\n        var filterBounds = [minLng - (maxLng - minLng) / 2, minLat - (maxLat - minLat) / 2, maxLng + (maxLng - minLng) / 2, maxLat + (maxLat - minLat) / 2];\n        setMapViewObj(_objectSpread({}, mapViewObj, {\n          filterBounds: filterBounds\n        }));\n      }\n    }\n\n    if (viewZoom !== currentZoom) {\n      setCurrentZoom(viewZoom);\n    }\n  };\n\n  var lock = {};\n\n  var onMarkerClick = function onMarkerClick(obj) {\n    if (selectedItem && selectedItem.properties.id === obj.properties.id) {\n      _onZoomTo(selectedItem);\n    } else {\n      setTransitions({\n        transitionDuration: 500,\n        transitionInterpolator: new LinearInterpolator(),\n        transitionEasing: easeCubic\n      });\n      setMapViewObj({\n        viewport: {\n          longitude: obj.geometry.coordinates[0],\n          latitude: obj.geometry.coordinates[1]\n        }\n      });\n    }\n\n    updateSelectedItem(obj);\n  };\n\n  var markersRendered = useMemo(function () {\n    return [].concat(_toConsumableArray(filteredClusteredData.single.filter(function (obj) {\n      return !isTransitioning || selectedItem && selectedItem.properties.id === obj.properties.id;\n    }).map(function (obj) {\n      return React.createElement(Marker, {\n        className: 'singleMarker',\n        key: \"single-\".concat(obj.properties.id),\n        latitude: obj.geometry.coordinates[1],\n        longitude: obj.geometry.coordinates[0],\n        offsetLeft: 0,\n        offsetTop: -20\n      }, React.createElement(ThemeProvider, {\n        theme: themes.access[obj.properties.access]\n      }, React.createElement(SingleMarker, {\n        name: obj.properties.name,\n        photoCount: obj.properties.photoCount,\n        onClick: function onClick() {\n          return onMarkerClick(obj);\n        },\n        direction: currentZoom > 10 && obj.properties.direction ? obj.properties.direction : null,\n        active: selectedItem && selectedItem.properties.id === obj.properties.id\n      })));\n    })), _toConsumableArray(filteredClusteredData.cluster.filter(function (obj) {\n      return !isTransitioning || selectedItem && selectedItem.properties.id === obj.properties.id && selectedItem.properties.count === obj.properties.count;\n    }).map(function (obj) {\n      return React.createElement(Marker, {\n        className: \"clusterMarker\",\n        key: \"cluster-\".concat(obj.properties.id),\n        latitude: obj.geometry.coordinates[1],\n        longitude: obj.geometry.coordinates[0],\n        offsetLeft: -20,\n        offsetTop: -20\n      }, React.createElement(ClusterMarker, {\n        seriesCount: obj.properties.count,\n        photoCount: obj.properties.reducedPhotoCount,\n        onClick: function onClick() {\n          return onMarkerClick(obj);\n        },\n        active: selectedItem && selectedItem.properties.id === obj.properties.id && selectedItem.properties.count === obj.properties.count\n      }));\n    })));\n  }, [filteredClusteredData, selectedItem, isTransitioning]);\n  var selectedItemRender = useMemo(function () {\n    return !!selectedItem && React.createElement(Paper, {\n      className: classes.selectedPopup\n    }, selectedItem.properties.count === 1 ? React.createElement(SeriesListItem, {\n      series: selectedItem.properties,\n      showCreatedOn: true,\n      showLastPhoto: true,\n      onClick: function onClick() {\n        return actions.onSeriesNavigate(selectedItem.properties.id);\n      }\n    }) : React.createElement(ClusterSelected, {\n      seriesCount: selectedItem.properties.count,\n      reducedPhotoCount: selectedItem.properties.reducedPhotoCount,\n      actions: {\n        onViewList: function onViewList() {\n          return setShowViewList(true);\n        },\n        onClose: function onClose() {\n          return updateSelectedItem(null);\n        },\n        onZoomTo: function onZoomTo() {\n          return _onZoomTo(selectedItem);\n        }\n      }\n    }));\n  }, [selectedItem]);\n  return React.createElement(\"div\", {\n    className: classes.root,\n    ref: homeMapContainerRef\n  }, React.createElement(TopBarWrapper, {\n    isTransparent: true\n  }, React.createElement(SearchInput, {\n    isTransparent: true,\n    onClick: actions.onSearchClick,\n    defaultValue: ''\n  })), loading && React.createElement(\"div\", {\n    className: classes.loadingWrapper\n  }, React.createElement(CircularProgress, {\n    size: 80,\n    thickness: 7,\n    color: \"inherit\"\n  })), React.createElement(BaseMap, _extends({\n    showMe: true,\n    viewport: mapViewObj.viewport,\n    transitions: transitions,\n    mapStyles: MapStyles,\n    controlPadding: {\n      top: 56\n    },\n    initStyle: MapStyles.length > 1 ? 1 : 0\n  }, lock, {\n    onTransitionStart: function onTransitionStart() {\n      setIsTransitioning(true);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      setIsTransitioning(false);\n      setTransitions(null);\n    },\n    bounds: mapViewObj.bounds,\n    maxZoom: 20,\n    minZoom: 1,\n    onViewportChange: onViewportChange,\n    onNativeClick: function onNativeClick() {\n      if (selectedItem) updateSelectedItem(null);\n    }\n  }), markersRendered), selectedItem && selectedItem.properties.count > 1 && React.createElement(ViewListDialog, {\n    open: showViewList,\n    title: \"\".concat(selectedItem.properties.count, \" Series\"),\n    onClose: function onClose() {\n      return setShowViewList(false);\n    },\n    onSelect: actions.onSeriesNavigate,\n    seriesList: selectedItem.properties.points.map(function (p) {\n      return p.properties;\n    })\n  }), selectedItemRender);\n};\n\nHomeMap.propTypes = {\n  seriesList: PropTypes.array,\n  queryVersion: PropTypes.number,\n  initialActiveSeries: PropTypes.string,\n  initViewport: PropTypes.object,\n  loading: PropTypes.bool,\n  actions: PropTypes.shape({\n    onSearchClick: PropTypes.func,\n    onSeriesNavigate: PropTypes.func,\n    onSeriesMapSelect: PropTypes.func,\n    popMapHistory: PropTypes.func,\n    pushMapHistory: PropTypes.func,\n    clearMapHistory: PropTypes.func\n  })\n};\nexport default HomeMap;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo } from 'react';\nimport { StaticMap } from 'react-map-gl';\nimport PropTypes from 'prop-types';\nimport { getDistanceScales } from 'viewport-mercator-project';\nimport StyleButtons from './controls/StyleButtons';\nimport { useComponentSize, config } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport mapStyles from './mapStyles';\nimport log from 'loglevel';\nimport classNames from 'classnames';\nvar useStyles = makeStyles(require('./BaseMap.style').default);\n\nvar BaseStaticMap = function BaseStaticMap(props) {\n  var classes = useStyles();\n\n  var className = props.className,\n      controlPadding = props.controlPadding,\n      viewport = props.viewport,\n      children = props.children,\n      mapStyles = props.mapStyles,\n      onMapDataEvent = props.onMapDataEvent,\n      passthroughProps = _objectWithoutProperties(props, [\"className\", \"controlPadding\", \"viewport\", \"children\", \"mapStyles\", \"onMapDataEvent\"]);\n\n  var mapRef = useRef(null);\n  var mapBoxRef = useRef();\n\n  var _useComponentSize = useComponentSize(mapRef, {\n    width: 100,\n    height: 50\n  }),\n      size = _useComponentSize.size;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      currStyle = _useState2[0],\n      setCurrStyle = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      projection = _useState4[0],\n      setProjection = _useState4[1];\n\n  var recalcProjection = function recalcProjection() {\n    if (!size || size.width < 10 || size.height < 10) return;\n\n    try {\n      var _projection = getDistanceScales(viewport);\n\n      setProjection(_projection);\n    } catch (e) {\n      log.warn('recalcZoomBounds', e);\n    }\n  };\n\n  if (!projection) recalcProjection();\n  useMemo(recalcProjection, [size]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.baseStaticMap, className),\n    ref: mapRef,\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, React.createElement(StaticMap, _extends({}, viewport, {\n    height: size.height,\n    width: size.width,\n    mapStyle: mapStyles[currStyle].style,\n    onData: onMapDataEvent,\n    mapboxApiAccessToken: config.mapConfig.mapBoxToken\n  }, passthroughProps, {\n    ref: function ref(map) {\n      mapBoxRef.current = map;\n    }\n  }), mapStyles && mapStyles.length > 1 ? React.createElement(StyleButtons, {\n    controlPadding: controlPadding,\n    currStyle: currStyle,\n    mapStyles: mapStyles,\n    setCurrStyle: setCurrStyle\n  }) : null, children && Array.isArray(children) ? children.map(function (c) {\n    return handleChild(c, mapBoxRef, size.height, size.width, projection);\n  }) : handleChild(children, mapBoxRef, size.height, size.width, projection)));\n};\n\nfunction handleChild(child, mapBoxRef, height, width, projection) {\n  var viewport = {};\n  return typeof child === 'function' ? child(viewport, height, width, projection) : child;\n}\n\nBaseStaticMap.propTypes = {\n  children: PropTypes.any,\n  deckelements: PropTypes.array,\n  data: PropTypes.array,\n  controlPadding: PropTypes.object,\n  minPitch: PropTypes.number,\n  maxPitch: PropTypes.number,\n  pitch: PropTypes.number,\n  className: PropTypes.string,\n  viewport: PropTypes.object,\n  bounds: PropTypes.array,\n  zoomBounds: PropTypes.array,\n  InnerBounds: PropTypes.array,\n  mapStyles: PropTypes.array,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  zoom: PropTypes.number,\n  onMapDataEvent: PropTypes.func\n};\nBaseStaticMap.defaultProps = {\n  controlPadding: {},\n  stylechooser: true,\n  initStyle: 0,\n  mapStyles: mapStyles\n};\nexport default BaseStaticMap;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: theme.palette.primary.main,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      zIndex: 1\n    },\n    rootActive: {\n      zIndex: 60\n    },\n    svgDot: {\n      zIndex: 61,\n      width: 20,\n      height: 20,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    dot: {\n      stroke: theme.palette.secondary.contrastText,\n      strokeWidth: '1',\n      fill: theme.palette.secondary.main\n    },\n    directionIndicator: {\n      position: 'absolute',\n      left: '50%',\n      zIndex: 59\n    },\n    name: {\n      color: 'white',\n      fontWeight: 'bold',\n      textShadow: \"\\n        0px 0px 4px #000000, \\n        0px 0px 4px #000000 \\n    \",\n      zIndex: 60,\n      position: 'relative'\n    },\n    nameActive: {\n      color: theme.palette.secondary.dark,\n      textShadow: \"\\n    0px 0px 2px #FFFFFF, \\n    0px 0px 2px #FFFFFF,\\n    0px 0px 4px #FFFFFF \\n\"\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Single = function Single(_ref) {\n  var direction = _ref.direction;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"svg\", {\n    className: classes.svgDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 10, 10\"\n  }, React.createElement(\"circle\", {\n    cx: \"5\",\n    cy: \"5\",\n    r: \"4\",\n    className: classes.dot\n  })), direction && direction >= 0 ? React.createElement(\"div\", {\n    className: classes.directionIndicator\n  }, React.createElement(\"svg\", {\n    className: classes.svgArc,\n    version: \"1.1\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0, 0, 100, 100\",\n    style: {\n      transform: \"translateY(-50%) translateX(-50%) rotateZ(\".concat(direction, \"deg)\")\n    }\n  }, React.createElement(\"path\", {\n    d: \"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z\",\n    fill: \"#009DC1\",\n    fillOpacity: \"0.444\",\n    strokeWidth: \"0.5\",\n    strokeOpacity: \"0.6\",\n    stroke: \"#FFFFFF\"\n  }))) : null);\n};\n\nSingle.propTypes = {\n  direction: PropTypes.number\n};\nexport default Single;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Marker } from 'react-map-gl';\nimport BaseMap from './BaseMap';\nimport Dot from './markers/Dot';\nimport BaseStaticMap from './BaseStaticMap';\n\nvar MapDot = function MapDot(_ref) {\n  var staticMap = _ref.staticMap,\n      editable = _ref.editable,\n      latitude = _ref.latitude,\n      longitude = _ref.longitude,\n      onChange = _ref.onChange,\n      direction = _ref.direction,\n      props = _objectWithoutProperties(_ref, [\"staticMap\", \"editable\", \"latitude\", \"longitude\", \"onChange\", \"direction\"]);\n\n  var Map = staticMap ? BaseStaticMap : BaseMap;\n  var mapProps = staticMap ? {} : {\n    touchRotate: false,\n    dragRotate: false,\n    showMe: editable,\n    lockPan: !editable,\n    onViewportChange: onChange\n  };\n  return React.createElement(Map, _extends({}, mapProps, props), latitude && longitude ? React.createElement(Marker, {\n    className: 'singleMarker',\n    latitude: latitude,\n    longitude: longitude\n  }, React.createElement(Dot, {\n    direction: direction\n  })) : React.createElement(Dot, {\n    direction: direction\n  }));\n};\n\nMapDot.propTypes = {\n  direction: PropTypes.number,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  editable: PropTypes.bool,\n  staticMap: PropTypes.bool,\n  onChange: PropTypes.func\n};\nexport default MapDot;","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    rectContents: {\n      color: theme.palette.common.white,\n      textShadow: \"5px 6px 6px \".concat(theme.palette.common.black),\n      position: 'absolute',\n      padding: theme.spacing(2),\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    areaLabel: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      transform: 'translateY(-110%)'\n    },\n    rectContentsDownloading: {\n      textShadow: 'none',\n      color: theme.palette.primary.contrastText\n    },\n    rectIcon: {\n      position: 'absolute',\n      opacity: 0.4,\n      width: '50%',\n      height: '50%',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    tooBig: {\n      color: theme.palette.error.contrastText\n    },\n    tickText: {},\n    svgRect: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: -1,\n      height: '100%',\n      width: '100%'\n    },\n    svgCutout: {\n      stroke: 'none',\n      fill: '#00000099'\n    },\n    svgBorder: {\n      fill: 'none',\n      stroke: 'none'\n    },\n    svgBorderNavigating: {\n      stroke: '#44444499'\n    },\n    svgBorderLocked: {\n      fill: '#66666666',\n      stroke: '#44444499'\n    },\n    svgBorderTooBig: {\n      opacity: 0.5,\n      fill: theme.palette.error.main,\n      stroke: theme.palette.error.dark\n    },\n    svgBorderDownloading: {\n      opacity: 0.7,\n      fill: theme.palette.primary.main,\n      stroke: '#44444499'\n    },\n    downloadingProgress: {},\n    downloadingProgressCircle: {\n      margin: theme.spacing(2)\n    },\n    snackError: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    mapWrapper: {\n      flex: '1 1',\n      overflow: 'hidden',\n      position: 'relative'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef, useState, useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport AppBar from '@material-ui/core/AppBar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport LockIcon from '@material-ui/icons/Lock';\nimport SignalWifiOffIcon from '@material-ui/icons/SignalWifiOff';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { Button } from '@material-ui/core';\nimport { config } from '@morphoto/client-common';\nimport numeral from 'numeral';\nimport { util } from '@morphoto/common';\nimport BaseMap from './BaseMap';\nimport useStyles from './OfflineMap.style';\nexport var OFFLINE_STATES = {\n  LOCKED: 'Locked',\n  OFFLINE: 'Offline',\n  NAVIGATING: 'Navigating',\n  ERROR: 'Error',\n  DOWNLOADING: 'Downloading',\n  CANCELED: 'Canceled'\n};\n\nvar OfflineMap = function OfflineMap(_ref) {\n  var initViewport = _ref.initViewport,\n      progress = _ref.progress,\n      toolState = _ref.toolState,\n      actions = _ref.actions;\n  var classes = useStyles();\n  var mapWrapperRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      bounds = _useState2[0],\n      setBounds = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewState = _useState4[0],\n      setViewport = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      area = _useState6[0],\n      setArea = _useState6[1];\n\n  var tooBig = area > config.home.Offline.maxMapTileArea;\n\n  var classWithState = function classWithState(name) {\n    if (!toolState) return classes[name];else return classNames(classes[name], classes[\"\".concat(name).concat(toolState)], tooBig ? classes[\"\".concat(name, \"TooBig\")] : null);\n  };\n\n  var setGeoState = useCallback(util.debounce(function (newViewport, projection, rectSide) {\n    if (!mapWrapperRef.current) return;\n    var longitude = newViewport.longitude,\n        latitude = newViewport.latitude;\n    var newArea = projection ? Math.abs(projection.metersPerPixel[0] * rectSide * projection.metersPerPixel[1] * rectSide / (1000 * 1000)) : 0;\n    var dx = rectSide / 2 * projection.degreesPerPixel[0];\n    var dy = rectSide / 2 * projection.degreesPerPixel[1];\n    var newBounds = [longitude - dx, latitude - dy, longitude + dx, latitude + dy];\n    if (newArea !== area) setArea(newArea);\n    if (newBounds !== bounds) setBounds(newBounds);\n    setViewport(newViewport);\n  }, 500), []);\n  var snack = null;\n\n  var onSnackClose = function onSnackClose() {};\n\n  var snackTimeout = null;\n\n  switch (toolState) {\n    case OFFLINE_STATES.NAVIGATING:\n      snack = tooBig ? null : React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Place the square around the area you wish to download for later use',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"inherit\",\n          disabled: area > config.home.Offline.maxMapTileArea,\n          onClick: function onClick() {\n            return actions.onStartDownload(bounds, viewState);\n          }\n        }, \"Start Download\")]\n      });\n      break;\n\n    case OFFLINE_STATES.DOWNLOADING:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Downloading...',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"inherit\",\n          onClick: actions.onCancel\n        }, \"Cancel\")]\n      });\n      break;\n\n    case OFFLINE_STATES.LOCKED:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'This is the area you downloaded last',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"secondary\",\n          onClick: actions.onUnlock\n        }, \"Download a new Area\")]\n      });\n      break;\n\n    case OFFLINE_STATES.OFFLINE:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'You cannot download content when you are offline.'\n      });\n      break;\n\n    case OFFLINE_STATES.CANCELED:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snackError,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Cancelling...'\n      });\n      onSnackClose = actions.onCancelComplete;\n      snackTimeout = 2000;\n      break;\n\n    default:\n      break;\n  }\n\n  var unlocked = toolState === OFFLINE_STATES.NAVIGATING;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: actions.onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Offline data manager\"))), React.createElement(\"div\", {\n    className: classes.mapWrapper,\n    ref: mapWrapperRef\n  }, React.createElement(BaseMap, {\n    hideNavControls: true,\n    showMe: unlocked,\n    dragPan: unlocked,\n    dragRotate: false,\n    scrollZoom: unlocked,\n    doubleClickZoom: false,\n    touchZoom: unlocked,\n    touchRotate: false,\n    viewport: initViewport\n  }, function (viewport, height, width, projection) {\n    var rectSide = Math.min(height, width) * 0.6;\n    var rectStyle = {\n      height: rectSide,\n      width: rectSide\n    };\n    var boxCorners = {\n      x: width / 2 - rectSide / 2,\n      y: height / 2 - rectSide / 2\n    };\n    var totalProgress = progress.tileTick && progress.seriesTick && progress.seriesPhotoTick ? [progress.tileTick[0] + progress.seriesTick[0] + progress.seriesPhotoTick[0], progress.tileTick[1] + progress.seriesTick[1] + progress.seriesPhotoTick[1]] : [0, 1];\n    if (totalProgress[1] === 0) totalProgress[1] = 1;\n    setGeoState(viewport, projection, rectSide);\n    return React.createElement(\"div\", {\n      style: {\n        height: height,\n        width: width\n      }\n    }, React.createElement(\"div\", {\n      className: classWithState('rectContents'),\n      style: rectStyle\n    }, toolState !== OFFLINE_STATES.DOWNLOADING && React.createElement(Typography, {\n      className: classNames(classes.areaLabel, tooBig ? classes.tooBig : null),\n      color: \"inherit\",\n      variant: \"h5\",\n      component: \"div\"\n    }, numeral(area).format('0,0'), \" km\\xB2\"), toolState === OFFLINE_STATES.NAVIGATING && !tooBig && React.createElement(CheckCircleOutlineIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\",\n      onClick: function onClick() {\n        return actions.onStartDownload(bounds, viewState);\n      }\n    }), toolState === OFFLINE_STATES.NAVIGATING && tooBig ? React.createElement(\"div\", null, React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"> \", config.home.Offline.maxMapTileArea, \" km\\xB2\"), React.createElement(ErrorIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    }), React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body2\",\n      component: \"div\"\n    }, \"Window too big. Try zooming in.\")) : null, toolState === OFFLINE_STATES.DOWNLOADING && React.createElement(\"div\", {\n      className: classes.downloadingProgress\n    }, React.createElement(Typography, {\n      className: \"areaLabel\",\n      color: \"inherit\",\n      variant: \"h5\"\n    }, \"Downloading...\"), React.createElement(CircularProgress, {\n      className: classes.downloadingProgressCircle,\n      variant: \"determinate\",\n      size: rectSide * 0.4,\n      thickness: rectSide * 0.013,\n      value: Math.floor(100 * totalProgress[0] / totalProgress[1]),\n      color: \"inherit\"\n    }), progress.tileTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Map Tiles: \", progress.tileTick[0], \" of \", progress.tileTick[1]), progress.seriesTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Series: \", progress.seriesTick[0], \" of \", progress.seriesTick[1]), progress.seriesPhotoTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Series Photos: \", progress.seriesPhotoTick[0], \" of \", progress.seriesPhotoTick[1])), toolState === OFFLINE_STATES.LOCKED && React.createElement(\"div\", null, React.createElement(LockIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    })), toolState === OFFLINE_STATES.OFFLINE && React.createElement(\"div\", null, React.createElement(SignalWifiOffIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    }))), React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        height: height,\n        width: width\n      }\n    }, React.createElement(\"defs\", null, React.createElement(\"path\", {\n      id: \"Triangle\",\n      d: \"M 16,0 L -8,9 v-18 z\",\n      fill: \"black\",\n      stroke: \"none\"\n    })), React.createElement(\"g\", {\n      fillRule: \"evenodd\",\n      className: classWithState('svgCutout')\n    }, React.createElement(\"path\", {\n      d: \"\\n                            M 0 0 L \".concat(width, \" \", 0, \" L \").concat(width, \" \").concat(height, \"  L \", 0, \" \").concat(height, \" Z\\n                             M \").concat(boxCorners.x, \" \").concat(boxCorners.y, \" \\n                             L \").concat(width - boxCorners.x, \" \").concat(boxCorners.y, \"\\n                             L \").concat(width - boxCorners.x, \" \").concat(height - boxCorners.y, \" \\n                             L \").concat(boxCorners.x, \" \").concat(height - boxCorners.y, \" Z\\n                             \")\n    })), React.createElement(\"g\", {\n      fillRule: \"evenodd\",\n      className: classWithState('svgBorder')\n    }, React.createElement(\"path\", {\n      d: \"\\n                             M \".concat(boxCorners.x, \" \").concat(boxCorners.y, \" \\n                             L \").concat(width - boxCorners.x, \" \").concat(boxCorners.y, \"\\n                             L \").concat(width - boxCorners.x, \" \").concat(height - boxCorners.y, \" \\n                             L \").concat(boxCorners.x, \" \").concat(height - boxCorners.y, \" Z\\n                             \")\n    }))));\n  }), snack && React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: true,\n    onClose: onSnackClose,\n    autoHideDuration: snackTimeout\n  }, snack)));\n};\n\nOfflineMap.propTypes = {\n  toolState: PropTypes.oneOf(Object.values(OFFLINE_STATES)),\n  initViewport: PropTypes.object,\n  progress: PropTypes.shape({\n    tileTick: PropTypes.array,\n    seriesTick: PropTypes.array,\n    seriesPhotoTick: PropTypes.array\n  }),\n  actions: PropTypes.shape({\n    onMenuBack: PropTypes.func.isRequired,\n    onStartDownload: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onCancelComplete: PropTypes.func.isRequired,\n    onUnlock: PropTypes.func.isRequired\n  })\n};\nexport default OfflineMap;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Slider from '@material-ui/core/Slider';\nimport MapDot from './MapDot';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dlgContent: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 0\n    },\n    mapWrapper: {\n      flexGrow: 1\n    },\n    sliderWrapper: {\n      padding: '20px'\n    },\n    slider: {},\n    sliderRoot: {},\n    body: {\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      margin: 0,\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MapDirPicker = function MapDirPicker(_ref) {\n  var open = _ref.open,\n      onOk = _ref.onOk,\n      onCancel = _ref.onCancel,\n      title = _ref.title,\n      initLat = _ref.latitude,\n      initLong = _ref.longitude,\n      initDir = _ref.direction;\n  var classes = useStyles();\n\n  var _useState = useState({\n    longitude: initLong,\n    latitude: initLat\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      longitude = _useState2$.longitude,\n      latitude = _useState2$.latitude,\n      setCoords = _useState2[1];\n\n  var _useState3 = useState(initDir),\n      _useState4 = _slicedToArray(_useState3, 2),\n      direction = _useState4[0],\n      setRotation = _useState4[1];\n\n  var initViewport = useMemo(function () {\n    return {\n      zoom: 18,\n      latitude: initLat,\n      longitude: initLong\n    };\n  }, [initLat, initLong]);\n\n  var mapChange = function mapChange(_ref2) {\n    var _ref2$viewport = _ref2.viewport,\n        longitude = _ref2$viewport.longitude,\n        latitude = _ref2$viewport.latitude;\n    return setCoords({\n      longitude: longitude,\n      latitude: latitude\n    });\n  };\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    fullScreen: true,\n    onClose: onCancel\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    color: \"inherit\"\n  }, title)), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(\"div\", {\n    className: classes.mapWrapper\n  }, React.createElement(MapDot, {\n    editable: true,\n    className: classes.map,\n    direction: direction > 0 ? direction : null,\n    viewport: initViewport,\n    onChange: mapChange\n  })), React.createElement(\"div\", {\n    className: classes.sliderWrapper\n  }, React.createElement(FormLabel, {\n    className: classes.mapFormLabel\n  }, \"Direction \", direction > -1 ? '' : '(off)'), React.createElement(Slider, {\n    classes: {\n      root: classes.sliderRoot\n    },\n    value: direction || -1,\n    min: -1,\n    max: 360,\n    step: 1,\n    onChange: function onChange(e, value) {\n      return setRotation(value);\n    }\n  }))), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onCancel\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk({\n        coords: [longitude, latitude],\n        direction: direction\n      });\n    }\n  }, \"Ok\")));\n};\n\nMapDirPicker.propTypes = {\n  open: PropTypes.bool,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  direction: PropTypes.number,\n  onOk: PropTypes.func,\n  onCancel: PropTypes.func,\n  title: PropTypes.string\n};\nexport default MapDirPicker;","export { default as HomeMap } from './HomeMap';\nexport { default as BaseMap } from './BaseMap';\nexport { default as BaseStaticMap } from './BaseStaticMap';\nexport { default as MapDot } from './MapDot';\nexport { default as OfflineMap, OFFLINE_STATES } from './OfflineMap';\nexport { default as MapDirPicker } from './MapDirPicker';\nexport { default as ClusterSelected } from './ClusterSelected';"],"sourceRoot":""}